"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.Ti = void 0;

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _toArray(arr) { return _arrayWithHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableRest(); }

function _objectDestructuringEmpty(obj) { if (obj == null) throw new TypeError("Cannot destructure undefined"); }

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { "default": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj["default"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _readOnlyError(name) { throw new Error("\"" + name + "\" is read-only"); }

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }

function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }

function _createForOfIteratorHelper(o) { if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function (_e101) { function e(_x38) { return _e101.apply(this, arguments); } e.toString = function () { return _e101.toString(); }; return e; }(function (e) { throw e; }), f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function (_e102) { function e(_x39) { return _e102.apply(this, arguments); } e.toString = function () { return _e102.toString(); }; return e; }(function (e) { didErr = true; err = e; }), f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(n); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function Preload(t, e) {
  LOAD_CACHE[t] = e;
}

function AddResourcePrefix() {
  for (var _len = arguments.length, t = new Array(_len), _key = 0; _key < _len; _key++) {
    t[_key] = arguments[_key];
  }

  for (var _i = 0, _t = t; _i < _t.length; _i++) {
    var e = _t[_i];
    e && (e.endsWith("/") ? RS_PREFIXs.push(e) : RS_PREFIXs.push(e + "/"));
  }
}

function MatchCache(t) {
  if (t) {
    var _iterator = _createForOfIteratorHelper(RS_PREFIXs),
        _step;

    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var e = _step.value;

        if (e && t.startsWith(e)) {
          t = t.substring(e.length);
          break;
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }

    return LOAD_CACHE[t];
  }
}

function _IS_LOG() {
  var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "ROOT";
  var e = arguments.length > 1 ? arguments[1] : undefined;
  var i = ENV.log[t];
  return _.isUndefined(i) && (i = ENV.log.ROOT), i >= e;
}

var _ref = function () {
  return {
    Alert: function () {
      var _Alert = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
        var t,
            _ref36,
            e,
            i,
            _ref36$type,
            n,
            _ref36$textOk,
            s,
            _ref36$position,
            r,
            _ref36$width,
            a,
            o,
            _ref36$vars,
            l,
            h,
            c,
            u,
            _args = arguments;

        return regeneratorRuntime.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                t = _args.length > 0 && _args[0] !== undefined ? _args[0] : "";
                _ref36 = _args.length > 1 && _args[1] !== undefined ? _args[1] : {}, e = _ref36.title, i = _ref36.icon, _ref36$type = _ref36.type, n = _ref36$type === void 0 ? "track" : _ref36$type, _ref36$textOk = _ref36.textOk, s = _ref36$textOk === void 0 ? "i18n:ok" : _ref36$textOk, _ref36$position = _ref36.position, r = _ref36$position === void 0 ? "center" : _ref36$position, _ref36$width = _ref36.width, a = _ref36$width === void 0 ? 480 : _ref36$width, o = _ref36.height, _ref36$vars = _ref36.vars, l = _ref36$vars === void 0 ? {} : _ref36$vars;
                h = Ti.I18n.textf(t, l), c = i || Ti.Icons.get(n, "zmdi-info"), u = e || Ti.I18n.get(n);
                _context.next = 5;
                return Ti.App.Open({
                  className: "is-alert in-top-z-index",
                  type: n,
                  width: a,
                  height: o,
                  position: r,
                  title: u,
                  closer: !1,
                  actions: [{
                    text: s,
                    handler: function handler() {
                      return !0;
                    }
                  }],
                  comType: "modal-inner-body",
                  comConf: {
                    icon: c,
                    text: h
                  },
                  components: {
                    name: "modal-inner-body",
                    globally: !1,
                    props: {
                      icon: void 0,
                      text: void 0
                    },
                    template: '<div class="ti-msg-body as-alert">\n          <div class="as-icon"><ti-icon :value="icon"/></div>\n          <div class="as-text">{{text}}</div>\n        </div>'
                  }
                });

              case 5:
                return _context.abrupt("return", _context.sent);

              case 6:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }));

      function Alert() {
        return _Alert.apply(this, arguments);
      }

      return Alert;
    }()
  };
}(),
    Alert = _ref.Alert,
    _ref2 = function () {
  return {
    Confirm: function () {
      var _Confirm = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {
        var t,
            _ref37,
            e,
            i,
            _ref37$closer,
            n,
            _ref37$type,
            s,
            _ref37$position,
            r,
            _ref37$textYes,
            a,
            _ref37$textNo,
            o,
            _ref37$width,
            l,
            h,
            c,
            u,
            d,
            _args2 = arguments;

        return regeneratorRuntime.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                t = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : "";
                _ref37 = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : {}, e = _ref37.title, i = _ref37.icon, _ref37$closer = _ref37.closer, n = _ref37$closer === void 0 ? !1 : _ref37$closer, _ref37$type = _ref37.type, s = _ref37$type === void 0 ? "info" : _ref37$type, _ref37$position = _ref37.position, r = _ref37$position === void 0 ? "center" : _ref37$position, _ref37$textYes = _ref37.textYes, a = _ref37$textYes === void 0 ? "i18n:yes" : _ref37$textYes, _ref37$textNo = _ref37.textNo, o = _ref37$textNo === void 0 ? "i18n:no" : _ref37$textNo, _ref37$width = _ref37.width, l = _ref37$width === void 0 ? 480 : _ref37$width, h = _ref37.height;
                c = Ti.I18n.text(t), u = i || "zmdi-help", d = e || "i18n:confirm";
                _context2.next = 5;
                return Ti.App.Open({
                  type: s,
                  width: l,
                  height: h,
                  position: r,
                  title: d,
                  closer: n,
                  actions: [{
                    text: a,
                    handler: function handler() {
                      return !0;
                    }
                  }, {
                    text: o,
                    handler: function handler() {
                      return !1;
                    }
                  }],
                  comType: "modal-inner-body",
                  comConf: {
                    icon: u,
                    text: c
                  },
                  components: {
                    name: "modal-inner-body",
                    globally: !1,
                    props: {
                      icon: void 0,
                      text: void 0
                    },
                    template: '<div class="ti-msg-body as-confirm">\n          <div class="as-icon"><ti-icon :value="icon"/></div>\n          <div class="as-text">{{text}}</div>\n        </div>'
                  }
                });

              case 5:
                return _context2.abrupt("return", _context2.sent);

              case 6:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2);
      }));

      function Confirm() {
        return _Confirm.apply(this, arguments);
      }

      return Confirm;
    }()
  };
}(),
    Confirm = _ref2.Confirm,
    _ref3 = function () {
  return {
    Prompt: function () {
      var _Prompt = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {
        var t,
            _ref38,
            _ref38$title,
            e,
            i,
            _ref38$type,
            n,
            _ref38$position,
            s,
            r,
            a,
            _ref38$textOk,
            o,
            _ref38$textCancel,
            l,
            _ref38$width,
            h,
            c,
            _ref38$trimed,
            u,
            _ref38$placeholder,
            d,
            _ref38$valueCase,
            p,
            _ref38$value,
            f,
            m,
            g,
            _args3 = arguments;

        return regeneratorRuntime.wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                t = _args3.length > 0 && _args3[0] !== undefined ? _args3[0] : "";
                _ref38 = _args3.length > 1 && _args3[1] !== undefined ? _args3[1] : {}, _ref38$title = _ref38.title, e = _ref38$title === void 0 ? "i18n:prompt" : _ref38$title, i = _ref38.icon, _ref38$type = _ref38.type, n = _ref38$type === void 0 ? "info" : _ref38$type, _ref38$position = _ref38.position, s = _ref38$position === void 0 ? "center" : _ref38$position, r = _ref38.iconOk, a = _ref38.iconCancel, _ref38$textOk = _ref38.textOk, o = _ref38$textOk === void 0 ? "i18n:ok" : _ref38$textOk, _ref38$textCancel = _ref38.textCancel, l = _ref38$textCancel === void 0 ? "i18n:cancel" : _ref38$textCancel, _ref38$width = _ref38.width, h = _ref38$width === void 0 ? 480 : _ref38$width, c = _ref38.height, _ref38$trimed = _ref38.trimed, u = _ref38$trimed === void 0 ? !0 : _ref38$trimed, _ref38$placeholder = _ref38.placeholder, d = _ref38$placeholder === void 0 ? "" : _ref38$placeholder, _ref38$valueCase = _ref38.valueCase, p = _ref38$valueCase === void 0 ? null : _ref38$valueCase, _ref38$value = _ref38.value, f = _ref38$value === void 0 ? "" : _ref38$value;
                m = Ti.I18n.text(t), g = i || "zmdi-keyboard";
                _context3.next = 5;
                return Ti.App.Open({
                  type: n,
                  width: h,
                  height: c,
                  position: s,
                  title: e,
                  closer: !1,
                  result: f,
                  textOk: o,
                  textCancel: l,
                  iconOk: r,
                  iconCancel: a,
                  comType: "modal-inner-body",
                  components: [{
                    name: "modal-inner-body",
                    globally: !1,
                    data: {
                      icon: g,
                      text: m,
                      placeholder: d || f,
                      trimed: u,
                      valueCase: p
                    },
                    props: {
                      value: null
                    },
                    template: '<div class="ti-msg-body as-prompt"\n          v-ti-activable>\n          <div class="as-icon"><ti-icon :value="icon"/></div>\n          <div class="as-text">\n            <div class="as-tip" v-if="text">{{text}}</div>\n            <ti-input\n              :value="value"\n              :trimed="trimed"\n              :placeholder="placeholder"\n              :value-case="valueCase"\n              :focused="true"\n              :auto-select="true"\n              @inputing="onInputing"/>\n          </div>\n        </div>',
                    methods: {
                      onInputing: function onInputing(t) {
                        this.$emit("change", t);
                      },
                      __ti_shortcut: function __ti_shortcut(t) {
                        "ENTER" == t && Ti.App(this).$vm().close(this.value);
                      }
                    }
                  }, "@com:ti/input"]
                });

              case 5:
                return _context3.abrupt("return", _context3.sent);

              case 6:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3);
      }));

      function Prompt() {
        return _Prompt.apply(this, arguments);
      }

      return Prompt;
    }()
  };
}(),
    Prompt = _ref3.Prompt,
    _ref4 = function () {
  return {
    Captcha: function () {
      var _Captcha = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {
        var t,
            _ref39,
            _ref39$title,
            e,
            _ref39$type,
            i,
            _ref39$position,
            n,
            s,
            r,
            _ref39$textOk,
            a,
            _ref39$textCancel,
            o,
            _ref39$width,
            l,
            h,
            c,
            _ref39$imgHeight,
            u,
            _ref39$textChange,
            d,
            _ref39$placeholder,
            p,
            _args4 = arguments;

        return regeneratorRuntime.wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                t = _args4.length > 0 && _args4[0] !== undefined ? _args4[0] : "";
                _ref39 = _args4.length > 1 && _args4[1] !== undefined ? _args4[1] : {}, _ref39$title = _ref39.title, e = _ref39$title === void 0 ? "i18n:captcha-tip" : _ref39$title, _ref39$type = _ref39.type, i = _ref39$type === void 0 ? "info" : _ref39$type, _ref39$position = _ref39.position, n = _ref39$position === void 0 ? "center" : _ref39$position, s = _ref39.iconOk, r = _ref39.iconCancel, _ref39$textOk = _ref39.textOk, a = _ref39$textOk === void 0 ? "i18n:ok" : _ref39$textOk, _ref39$textCancel = _ref39.textCancel, o = _ref39$textCancel === void 0 ? "i18n:cancel" : _ref39$textCancel, _ref39$width = _ref39.width, l = _ref39$width === void 0 ? 420 : _ref39$width, h = _ref39.height, c = _ref39.imgWidth, _ref39$imgHeight = _ref39.imgHeight, u = _ref39$imgHeight === void 0 ? 50 : _ref39$imgHeight, _ref39$textChange = _ref39.textChange, d = _ref39$textChange === void 0 ? "i18n:captcha-chagne" : _ref39$textChange, _ref39$placeholder = _ref39.placeholder, p = _ref39$placeholder === void 0 ? "i18n:captcha" : _ref39$placeholder;
                _context4.next = 4;
                return Ti.App.Open({
                  type: i,
                  width: l,
                  height: h,
                  position: n,
                  title: e,
                  closer: !1,
                  result: "",
                  textOk: a,
                  textCancel: o,
                  iconOk: s,
                  iconCancel: r,
                  comType: "modal-inner-body",
                  components: [{
                    name: "modal-inner-body",
                    globally: !1,
                    data: {
                      src: t,
                      timestamp: Date.now(),
                      imgWidth: c,
                      imgHeight: u,
                      textChange: d,
                      placeholder: p || value
                    },
                    props: {
                      value: null
                    },
                    template: '<div class="web-simple-form">\n          <header style="padding-bottom:0;">\n            <img ref="pic"\n              v-if="src"\n                :style="CaptchaStyle"\n                :src="CaptchaSrc"\n                @load="OnImgLoaded"/>\n          </header>\n          <section>\n            <div class="as-input">\n              <input ref="input"\n                spellcheck="false"\n                :placeholder="placeholder|i18n"\n                :value="value"\n                @input="$emit(\'change\', $refs.input.value)">\n              <span @click="timestamp = Date.now()">\n                <a>{{textChange|i18n}}</a>\n              </span>\n            </div>\n          </section>\n        </div>',
                    computed: {
                      CaptchaStyle: function CaptchaStyle() {
                        return Ti.Css.toStyle({
                          width: this.imgWidth,
                          height: this.imgHeight
                        });
                      },
                      CaptchaSrc: function CaptchaSrc() {
                        return this.src && this.timestamp > 0 ? -1 == this.src.lastIndexOf("?") ? this.src + "?_t=" + this.timestamp : this.src + "&_t=" + this.timestamp : this.src;
                      }
                    },
                    methods: {
                      OnImgLoaded: function OnImgLoaded() {
                        Ti.Be.BlinkIt(this.$refs.pic);
                      },
                      __ti_shortcut: function __ti_shortcut(t) {
                        "ENTER" == t && Ti.App(this).$vm().close(this.value);
                      }
                    }
                  }]
                });

              case 4:
                return _context4.abrupt("return", _context4.sent);

              case 5:
              case "end":
                return _context4.stop();
            }
          }
        }, _callee4);
      }));

      function Captcha() {
        return _Captcha.apply(this, arguments);
      }

      return Captcha;
    }()
  };
}(),
    Captcha = _ref4.Captcha,
    _ref5 = function () {
  var _ref40 = function () {
    var t = /*#__PURE__*/function () {
      function t() {
        var _ref41 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            _ref41$setItemViewpor = _ref41.setItemViewportMode,
            _t2 = _ref41$setItemViewpor === void 0 ? _.identity : _ref41$setItemViewpor;

        _classCallCheck(this, t);

        this.viewportMode = "desktop", this.stack = [], this.setItemViewportMode = _t2;
      }

      _createClass(t, [{
        key: "push",
        value: function push(t) {
          t && (this.setItemViewportMode(t, this.viewportMode), this.stack.push(t));
        }
      }, {
        key: "remove",
        value: function remove(t) {
          var e,
              i = [];

          var _iterator2 = _createForOfIteratorHelper(this.stack),
              _step2;

          try {
            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
              var _n = _step2.value;
              _n === t ? e = (_readOnlyError("e"), _n) : i.push(_n);
            }
          } catch (err) {
            _iterator2.e(err);
          } finally {
            _iterator2.f();
          }

          return this.stack = i, e;
        }
      }, {
        key: "setViewportMode",
        value: function setViewportMode(t) {
          this.viewportMode = t;

          var _iterator3 = _createForOfIteratorHelper(this.stack),
              _step3;

          try {
            for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
              var _e = _step3.value;
              this.setItemViewportMode(_e, t);
            }
          } catch (err) {
            _iterator3.e(err);
          } finally {
            _iterator3.f();
          }
        }
      }, {
        key: "pop",
        value: function pop() {
          return this.stack.pop();
        }
      }]);

      return t;
    }();

    return {
      TiRuntimeStack: t
    };
  }(),
      t = _ref40.TiRuntimeStack,
      e = new t(),
      i = Symbol("toa-options"),
      n = Symbol("toa-app-instance");

  var s = /*#__PURE__*/function () {
    function s() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      _classCallCheck(this, s);

      this[i] = t;
    }

    _createClass(s, [{
      key: "open",
      value: function () {
        var _open = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5() {
          var _this$i, _this$i$position, t, _this$i$icon, s, _this$i$content, r, _this$i$vars, a, _this$i$type, o, _this$i$spacing, l, _this$i$duration, h, _this$i$closer, c, u, d, p;

          return regeneratorRuntime.wrap(function _callee5$(_context5) {
            while (1) {
              switch (_context5.prev = _context5.next) {
                case 0:
                  _this$i = this[i], _this$i$position = _this$i.position, t = _this$i$position === void 0 ? "center" : _this$i$position, _this$i$icon = _this$i.icon, s = _this$i$icon === void 0 ? !0 : _this$i$icon, _this$i$content = _this$i.content, r = _this$i$content === void 0 ? "i18n:empty" : _this$i$content, _this$i$vars = _this$i.vars, a = _this$i$vars === void 0 ? {} : _this$i$vars, _this$i$type = _this$i.type, o = _this$i$type === void 0 ? "info" : _this$i$type, _this$i$spacing = _this$i.spacing, l = _this$i$spacing === void 0 ? 0 : _this$i$spacing, _this$i$duration = _this$i.duration, h = _this$i$duration === void 0 ? 3e3 : _this$i$duration, _this$i$closer = _this$i.closer, c = _this$i$closer === void 0 ? !0 : _this$i$closer, u = Ti.Dom.createElement({
                    $p: document.body,
                    className: "the-stub"
                  });
                  !0 === s && (s = Ti.Icons.get(o));
                  d = {
                    template: '<div class="ti-toast"\n        :class="topClass"\n        :style="topStyle"\n        @click="onClose">\n        <transition :name="transName"\n          @after-leave="onAfterLeave">\n          <div v-if="!hidden"\n            class="toast-con"\n            @click.stop>\n            <div v-if="icon"\n              class="toast-icon">\n              <ti-icon :value="icon"/>\n            </div>\n            <div class="toast-body">{{content|i18n(vars)}}</div>\n            <div v-if="closer && \'center\'!=position"\n              class="toast-closer">\n              <a @click="onClose">{{\'close\'|i18n}}</a>\n            </div>\n          </div>\n        </transition>\n      </div>',
                    data: {
                      position: t,
                      icon: s,
                      content: r,
                      type: o,
                      closer: c,
                      vars: a,
                      hidden: !0
                    },
                    store: {
                      modules: {
                        viewport: "@mod:ti/viewport"
                      }
                    },
                    computed: {
                      topClass: function topClass() {
                        return Ti.Css.mergeClassName({
                          "as-bar": "center" != this.position,
                          "as-block": "center" == this.position
                        }, ["at-".concat(this.position), "is-".concat(this.type)]);
                      },
                      topStyle: function topStyle() {
                        if ("center" != this.position) return {
                          padding: Ti.Css.toSize(l)
                        };
                      },
                      transName: function transName() {
                        return "toast-trans-at-".concat(this.position);
                      }
                    },
                    methods: {
                      onClose: function onClose() {
                        this.closer && (this.hidden = !0);
                      },
                      onAfterLeave: function onAfterLeave() {
                        Ti.App(this).$toast.close();
                      },
                      doOpen: function doOpen() {
                        this.hidden = !1;
                      },
                      doClose: function doClose() {
                        this.hidden = !0;
                      }
                    }
                  };
                  _context5.next = 5;
                  return Ti.App(d);

                case 5:
                  p = _context5.sent;
                  this[n] = p;
                  _context5.next = 9;
                  return p.init();

                case 9:
                  p.mountTo(u);
                  p.$toast = this;
                  p.root("doOpen");
                  e.push(this);
                  h > 0 && _.delay(function () {
                    p.root("doClose");
                  }, h);
                  return _context5.abrupt("return", this);

                case 15:
                case "end":
                  return _context5.stop();
              }
            }
          }, _callee5, this);
        }));

        function open() {
          return _open.apply(this, arguments);
        }

        return open;
      }()
    }, {
      key: "$app",
      value: function $app() {
        return this[n];
      }
    }, {
      key: "close",
      value: function close() {
        e.remove(this), this.$app().destroy(!0);
      }
    }]);

    return s;
  }();

  return {
    Toast: {
      Open: function Open(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "info";
        var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "top";
        _.isString(t) && (t = _.isPlainObject(e) ? _.assign({
          position: i,
          type: "info",
          content: t,
          vars: e
        }, e) : {
          type: e || "info",
          position: i || "top",
          content: t
        });
        var n = new s(t);
        return n.open(), n;
      },
      Close: function Close() {
        var t = e.pop();
        t && t.close();
      }
    }
  };
}(),
    Toast = _ref5.Toast,
    _ref6 = function () {
  var t = {
    Open: function Open(t) {
      var _ref42 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref42$target = _ref42.target,
          e = _ref42$target === void 0 ? "_blank" : _ref42$target,
          _ref42$method = _ref42.method,
          i = _ref42$method === void 0 ? "GET" : _ref42$method,
          _ref42$params = _ref42.params,
          n = _ref42$params === void 0 ? {} : _ref42$params,
          _ref42$delay = _ref42.delay,
          s = _ref42$delay === void 0 ? 100 : _ref42$delay;

      return new Promise(function (r) {
        var a = Ti.Dom.createElement({
          $p: document.body,
          tagName: "form",
          attrs: {
            target: e,
            method: i,
            action: t
          },
          props: {
            style: "display:none;"
          }
        });
        _.forEach(n, function (t, e) {
          Ti.Dom.createElement({
            $p: a,
            tagName: "input",
            props: {
              name: e,
              value: t,
              type: "hidden"
            }
          });
        }), _.delay(function () {
          a.submit(), r({
            url: t,
            target: e,
            method: i,
            params: n
          });
        }, s);
      });
    },
    OpenLink: function OpenLink(e) {
      var _ref43 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref43$target = _ref43.target,
          i = _ref43$target === void 0 ? "_blank" : _ref43$target,
          _ref43$method = _ref43.method,
          n = _ref43$method === void 0 ? "GET" : _ref43$method,
          _ref43$delay = _ref43.delay,
          s = _ref43$delay === void 0 ? 100 : _ref43$delay;

      return t.Open(e.url, {
        target: i,
        method: n,
        delay: s,
        params: e.params
      });
    },
    ScrollWindowTo: function ScrollWindowTo() {
      var _ref44 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
          _ref44$x = _ref44.x,
          t = _ref44$x === void 0 ? 0 : _ref44$x,
          _ref44$y = _ref44.y,
          e = _ref44$y === void 0 ? 0 : _ref44$y;

      window.scrollTo(t, e);
    },
    BlinkIt: function BlinkIt(t, e) {
      if (0 != (t = $(t)).length) {
        "function" == typeof (e = e || {}) ? e = {
          after: e
        } : "number" == typeof e && (e = {
          speed: e
        });
        var i = t.offset(),
            n = t[0].ownerDocument,
            s = $(n),
            r = {
          width: t.outerWidth(),
          height: t.outerHeight(),
          "border-color": "#FF0",
          background: "#FFA",
          opacity: .8,
          position: "fixed",
          top: i.top - s.scrollTop(),
          left: i.left - s.scrollLeft(),
          "z-index": 9999999
        },
            a = $(e.html || '<div class="z_blink_light">&nbsp;</div>');
        a.css(r).appendTo(n.body), a.animate({
          opacity: .1
        }, e.speed || 500, function () {
          $(this).remove(), "function" == typeof e.after && e.after.apply(t);
        });
      }
    },
    EditIt: function EditIt(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var i = $(t);
      if (0 == i.length || i.hasClass("is-be-editing")) return;
      i.addClass("is-be-editing"), _.defaults(e, {
        text: null,
        width: 0,
        height: 0,
        extendWidth: !0,
        takePlace: !0,
        selectOnFocus: !0,
        copyStyle: ["letter-spacing", "margin", "border", "font-size", "font-family", "line-height", "text-align"],
        ok: function ok(t, e) {
          this.innerText = t;
        },
        context: i[0]
      });
      var n = {
        jEle: i,
        $el: i[0],
        options: e,
        oldValue: Ti.Util.fallback(e.text, i.text()),
        onCancel: function onCancel() {
          this.jMask.remove(), this.jDiv.remove(), this.jEle.css({
            visibility: ""
          }).removeClass("is-be-editing");
        },
        onOk: function onOk() {
          var t = _.trim(this.jInput.val());

          t != this.oldValue && e.ok.apply(e.context, [t, e.oldValue, e]), this.onCancel();
        }
      };
      var s = Ti.Rects.createBy(n.$el),
          r = e.width || s.width,
          a = e.height || s.height;
      var o = $('<div class="ti-be-editing as-con"><input></div>'),
          l = o.find("input"),
          h = $('<div class="ti-be-editing as-mask"></div>');

      if (_.assign(n, {
        jDiv: o,
        jInput: l,
        jMask: h,
        $div: o[0],
        $input: l[0],
        $mask: h[0],
        primaryWidth: r,
        primaryHeight: a
      }), h.css({
        position: "fixed",
        zIndex: 999999,
        top: 0,
        left: 0,
        right: 0,
        bottom: 0
      }), o.css({
        position: "fixed",
        zIndex: 1e6,
        top: s.top,
        left: s.left,
        width: r,
        height: a
      }), l.css({
        width: "100%",
        height: "100%",
        outline: "none",
        resize: "none",
        overflow: "hidden",
        padding: "0 .06rem",
        background: "rgba(255,255,50,0.8)",
        color: "#000",
        lineHeight: a
      }).attr({
        spellcheck: !1
      }).val(n.oldValue), !_.isEmpty(e.copyStyle)) {
        var _t3 = window.getComputedStyle(n.$el);

        var _i2 = _.pick(_t3, e.copyStyle);

        l.css(_i2);
      }

      return n.jMask.appendTo(document.body), n.jDiv.appendTo(document.body), n.jEle.css({
        visibility: "hidden"
      }), e.selectOnFocus ? n.$input.select() : n.$input.focus(), l.one("blur", function () {
        n.onOk();
      }), l.on("keydown", function (t) {
        var e = t.which;
        27 == e ? n.onCancel() : 13 == e && n.onOk();
      }), n;
    }
  };
  return {
    Be: t
  };
}(),
    Be = _ref6.Be,
    _Alg = {
  Alg: {
    sha1: function sha1(t) {
      return _.isString(t) || (t = JSON.stringify(t)), CryptoJS.SHA1(t).toString();
    },
    gcd: function gcd(t, e) {
      return t = Math.round(t), (e = Math.round(e)) ? this.gcd(e, t % e) : t;
    },
    gcds: function gcds() {
      var t = Array.from(arguments),
          e = _.flatten(t);

      if (0 == e.length) return NaN;
      if (1 == e.length) return e[0];

      for (var i = this.gcd(e[0], e[1]), n = 2; n < e.length; n++) {
        i = this.gcd(i, e[n]);
      }

      return i;
    },
    lcm: function lcm(t, e) {
      return t = Math.round(t), e = Math.round(e), t * e / this.gcd(t, e);
    },
    lcms: function lcms() {
      var t = Array.from(arguments),
          e = _.flatten(t);

      if (0 == e.length) return NaN;
      if (1 == e.length) return e[0];

      for (var i = this.lcm(e[0], e[1]), n = 2; n < e.length; n++) {
        i = this.lcm(i, e[n]);
      }

      return i;
    }
  }
},
    Alg = _Alg.Alg,
    _ref7 = function () {
  var TiStr = {
    sBlank: function sBlank(t, e) {
      return t || e;
    },
    isBlank: function isBlank(t) {
      return !t || /^\s*$/.test(t);
    },
    renderVars: function renderVars() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";

      var _ref45 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
          i = _ref45.iteratee,
          n = _ref45.regex,
          s = _ref45.safe;

      return (_.isString(t) || _.isNumber(t)) && (t = {
        val: t
      }), !t || _.isEmpty(t) ? _.isArray(t) ? [] : "" : TiStr.renderBy(e, t, {
        iteratee: i,
        regex: n,
        safe: s
      });
    },
    renderBy: function renderBy() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      var _ref46 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
          i = _ref46.iteratee,
          _ref46$regex = _ref46.regex,
          n = _ref46$regex === void 0 ? /(\${1,2})\{([^}]+)\}/g : _ref46$regex,
          _ref46$safe = _ref46.safe,
          s = _ref46$safe === void 0 ? !1 : _ref46$safe;

      if (!t) return _.isArray(e) ? [] : "";

      if (e = e || {}, s) {
        var _t4 = _.isRegExp(s) ? s : void 0;

        e = TiStr.safeDeep(e, _t4);
      }

      if (_.isRegExp(i) && (n = i, i = void 0), i || (i = function i() {
        var _ref47 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            t = _ref47.varName,
            e = _ref47.vars,
            i = _ref47.matched;

        if (i.startsWith("$$")) return i.substring(1);
        var n = i,
            s = t.indexOf("?");
        s > 0 && (n = _.trim(t.substring(s + 1)), t = _.trim(t.substring(0, s)));
        var r = !1;
        t.startsWith("i18n:") && (r = !0, t = t.substring(5).trim());
        var a = Ti.Util.fallback(Ti.Util.getOrPick(e, t), n);
        return r ? Ti.I18n.get(a) : a;
      }), _.isArray(e)) {
        var _i3 = [];

        for (var _n2 = 0; _n2 < e.length; _n2++) {
          var _s = e[_n2],
              _r = TiStr.renderBy(t, _s);

          _i3.push(_r);
        }

        return _i3;
      }

      var r,
          a = [],
          o = 0;

      for (; r = n.exec(t);) {
        var _s2 = r.index;
        _s2 > o && a.push(t.substring(o, _s2));
        var l = i({
          vars: e,
          matched: r[0],
          prefix: r[1],
          varName: r[2]
        });
        a.push(l), o = n.lastIndex;
      }

      return o < t.length && a.push(t.substring(o)), a.join("");
    },
    safeDeep: function safeDeep() {
      var _this = this;

      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : /['"]/g;
      return _.isString(t) ? t.replace(e, "") : _.isArray(t) ? _.map(t, function (t) {
        return _this.safeDeep(t, e);
      }) : _.isPlainObject(t) ? _.mapValues(t, function (t) {
        return _this.safeDeep(t, e);
      }) : t;
    },
    joinWithoutNil: function joinWithoutNil() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";

      for (var _len2 = arguments.length, e = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
        e[_key2 - 1] = arguments[_key2];
      }

      var i = _.flattenDeep(e);

      return _.filter(i, function (t) {
        return !Ti.Util.isNil(t);
      }).join(t);
    },
    join: function join() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;

      var n = _.flattenDeep(t);

      return _.isFunction(i) && (n = _.map(n, i)), n.join(e);
    },
    joinAs: function joinAs() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      var n = null;
      return i && (n = function n(t) {
        return _.isPlainObject(t) ? _.get(t, i) : i;
      }), TiStr.join(t, e, n);
    },
    toJsValue: function toJsValue() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";

      var _ref48 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref48$autoJson = _ref48.autoJson,
          e = _ref48$autoJson === void 0 ? !0 : _ref48$autoJson,
          _ref48$autoDate = _ref48.autoDate,
          i = _ref48$autoDate === void 0 ? !0 : _ref48$autoDate,
          _ref48$autoNil = _ref48.autoNil,
          n = _ref48$autoNil === void 0 ? !1 : _ref48$autoNil,
          _ref48$trimed = _ref48.trimed,
          s = _ref48$trimed === void 0 ? !0 : _ref48$trimed,
          _ref48$context = _ref48.context,
          r = _ref48$context === void 0 ? {} : _ref48$context;

      if (_.isArray(t)) {
        var _a = [],
            _o = {
          autoJson: e,
          autoDate: i,
          autoNil: n,
          trimed: s,
          context: r
        };

        var _iterator4 = _createForOfIteratorHelper(t),
            _step4;

        try {
          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
            var _e2 = _step4.value;

            var _t5 = TiStr.toJsValue(_e2, _o);

            _a.push(_t5);
          }
        } catch (err) {
          _iterator4.e(err);
        } finally {
          _iterator4.f();
        }

        return _a;
      }

      if (_.isPlainObject(t)) {
        var _a2 = {},
            _o2 = {
          autoJson: e,
          autoDate: i,
          autoNil: n,
          trimed: s,
          context: r
        };
        return _.forEach(t, function (t, e) {
          var i = TiStr.toJsValue(t, _o2);
          _a2[e] = i;
        }), _a2;
      }

      if (Ti.Util.isNil(t) || _.isBoolean(t) || _.isNumber(t)) return t;
      var a = s ? _.trim(t) : t;

      if (n) {
        if ("undefined" == a) return;
        if ("null" == a) return null;
      }

      if (/^-?[\d.]+$/.test(a)) return 1 * a;

      var o = _.get(r, a);

      if (!_.isUndefined(o)) return o;
      if (/^(true|false|yes|no|on|off)$/.test(a)) return /^(true|yes|on)$/.test(a);
      var l = /^'([^']*)'$/.exec(a);
      if (l) return l[1];

      if (e) {
        var _e3 = Ti.Types.safeParseJson(t);

        if (!_.isUndefined(_e3)) return _e3;
      }

      if (i) try {
        return Ti.Types.toDate(t);
      } catch (t) {}
      return a;
    },
    joinArgs: function joinArgs(s) {
      var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
      var iteratee = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : TiStr.toJsValue;

      if (_.isString(s)) {
        if (/^\{.*\}$/.test(s)) try {
          return [eval("(".concat(s, ")"))];
        } catch (t) {}
        var list = s.split(",");

        var _iterator5 = _createForOfIteratorHelper(list),
            _step5;

        try {
          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
            var t = _step5.value;

            var _e4 = _.trim(t);

            if (!_e4) continue;

            var _i4 = iteratee(_e4);

            args.push(_i4);
          }
        } catch (err) {
          _iterator5.e(err);
        } finally {
          _iterator5.f();
        }

        return args;
      }

      if (_.isArray(s)) {
        var _iterator6 = _createForOfIteratorHelper(s),
            _step6;

        try {
          for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
            var _t6 = _step6.value;

            var _e5 = iteratee(_t6);

            args.push(_e5);
          }
        } catch (err) {
          _iterator6.e(err);
        } finally {
          _iterator6.f();
        }
      } else _.isUndefined(s) || args.push(s);

      return args;
    },
    toArray: function toArray(t) {
      var _ref49 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref49$sep = _ref49.sep,
          e = _ref49$sep === void 0 ? /[:,;\t\n\/]+/g : _ref49$sep,
          _ref49$ignoreNil = _ref49.ignoreNil,
          i = _ref49$ignoreNil === void 0 ? !0 : _ref49$ignoreNil;

      if (Ti.Util.isNil(t)) return [];
      if (_.isArray(t)) return t;

      if (_.isString(t) && e) {
        var _n3 = _.map(t.split(e), function (t) {
          return _.trim(t);
        });

        return i ? _.without(_n3, "") : _n3;
      }

      return [t];
    },
    toArrayBy: function toArrayBy(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ",";
      return TiStr.toArray(t, {
        sep: e,
        ignoreNil: !0
      });
    },
    toObject: function toObject(t) {
      var _ref50 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref50$sep = _ref50.sep,
          e = _ref50$sep === void 0 ? /[:,;\t\n\/]+/g : _ref50$sep,
          _ref50$ignoreNil = _ref50.ignoreNil,
          i = _ref50$ignoreNil === void 0 ? !0 : _ref50$ignoreNil,
          _ref50$keys = _ref50.keys,
          n = _ref50$keys === void 0 ? ["value", "text?value", "icon"] : _ref50$keys;

      if (_.isPlainObject(t) || _.isNull(t) || _.isUndefined(t)) return t;
      var s = TiStr.toArray(t, {
        sep: e,
        ignoreNil: i
      }),
          r = [],
          a = [];

      _.forEach(n, function (t) {
        var e = TiStr.toArray(t, {
          sep: "?"
        });

        if (e.length > 1) {
          var _t7 = e[0];
          r.push(_t7), a.push({
            name: _t7,
            backup: e[1]
          });
        } else r.push(t);
      });

      var o = {};

      _.forEach(r, function (t, e) {
        var n = _.nth(s, e);

        _.isUndefined(n) && i || (o[t] = n);
      });

      for (var _i5 = 0, _a3 = a; _i5 < _a3.length; _i5++) {
        var _t8 = _a3[_i5];
        _.isUndefined(o[_t8.name]) && (o[_t8.name] = o[_t8.backup]);
      }

      return o;
    },
    toObjList: function toObjList(t) {
      var _ref51 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref51$sepLine = _ref51.sepLine,
          e = _ref51$sepLine === void 0 ? /[,;\n]+/g : _ref51$sepLine,
          _ref51$sepPair = _ref51.sepPair,
          i = _ref51$sepPair === void 0 ? /[:|\/\t]+/g : _ref51$sepPair,
          _ref51$ignoreNil = _ref51.ignoreNil,
          n = _ref51$ignoreNil === void 0 ? !0 : _ref51$ignoreNil,
          _ref51$keys = _ref51.keys,
          s = _ref51$keys === void 0 ? ["value", "text?value", "icon"] : _ref51$keys;

      var r = TiStr.toArray(t, {
        sep: e,
        ignoreNil: n
      });
      return _.map(r, function (t) {
        return TiStr.toObject(t, {
          sep: i,
          ignoreNil: n,
          keys: s
        });
      });
    },
    sizeText: function sizeText() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;

      var _ref52 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref52$fixed = _ref52.fixed,
          e = _ref52$fixed === void 0 ? 2 : _ref52$fixed,
          _ref52$M = _ref52.M,
          i = _ref52$M === void 0 ? 1024 : _ref52$M,
          _ref52$bytes = _ref52.bytes,
          n = _ref52$bytes === void 0 ? !1 : _ref52$bytes,
          _ref52$units = _ref52.units,
          s = _ref52$units === void 0 ? ["Bytes", "KB", "MB", "GB", "PB", "TB"] : _ref52$units;

      var r = t,
          a = 0;

      for (; a < s.length; a++) {
        var _t9 = r / i;

        if (_t9 < 1) break;
        r = _t9;
      }

      var o,
          l = s[a];
      return o = r == parseInt(r) ? r + l : r.toFixed(e) + l, n ? o + " (".concat(t, " bytes)") : o;
    },
    toPercent: function toPercent(t) {
      var _ref53 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref53$fixed = _ref53.fixed,
          e = _ref53$fixed === void 0 ? 2 : _ref53$fixed,
          _ref53$auto = _ref53.auto,
          i = _ref53$auto === void 0 ? !0 : _ref53$auto;

      if (!_.isNumber(t)) return "NaN";
      var n = 100 * t,
          s = e >= 0 ? n.toFixed(e) : n + "";

      if (i) {
        var _t10 = s.lastIndexOf("."),
            _e6 = s.lastIndexOf("0");

        if (_t10 >= 0 && _e6 > _t10) {
          var _i6 = s.length - 1;

          for (; _i6 >= _t10 && "0" == s[_i6]; _i6--) {
            ;
          }

          _i6 == _e6 || _i6 == _t10 || _i6++, _i6 < s.length && (s = s.substring(0, _i6));
        }
      }

      return s + "%";
    },
    toCase: function toCase(t, e) {
      if (Ti.Util.isNil(t)) return t;
      var i = TiStr.getCaseFunc(e);
      return _.isFunction(i) ? i(t) : t;
    },
    getCaseFunc: function getCaseFunc(t) {
      return {
        upper: function upper(t) {
          return t ? t.toUpperCase() : t;
        },
        lower: function lower(t) {
          return t ? t.toLowerCase() : t;
        },
        camel: function camel(t) {
          return _.camelCase(t);
        },
        snake: function snake(t) {
          return _.snakeCase(t);
        },
        kebab: function kebab(t) {
          return _.kebabCase(t);
        },
        start: function start(t) {
          return _.startCase(t);
        }
      }[t];
    },
    isValidCase: function isValidCase(t) {
      return _.isFunction(TiStr.getCaseFunc(t));
    },
    isPhoneNumber: function isPhoneNumber() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";
      return /^(\+\d{2})? *(\d{11})$/.test(t);
    }
  };
  return {
    S: TiStr
  };
}(),
    S = _ref7.S,
    _ref8 = function () {
  var _ref54 = function () {
    function t(t) {
      return /^@https?:\/\//.test(t) ? t.substring(1) : /^@!(js|css|html|mjs|text|json):\/\//.test(t) ? t.substring(1) : /^@\/{1,2}/.test(t) ? t.substring(1) : /^(@[A-Za-z0-9_-]+:?|\.\/)/.test(t) ? t : /^(!(m?js|json|css|text):)/.test(t) ? t : void 0;
    }

    function e() {
      return _e7.apply(this, arguments);
    }

    function _e7() {
      _e7 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee9() {
        var i,
            _ref58,
            n,
            s,
            r,
            _args9 = arguments;

        return regeneratorRuntime.wrap(function _callee9$(_context9) {
          while (1) {
            switch (_context9.prev = _context9.next) {
              case 0:
                i = _args9.length > 0 && _args9[0] !== undefined ? _args9[0] : {};
                _ref58 = _args9.length > 1 && _args9[1] !== undefined ? _args9[1] : {}, n = _ref58.dynamicPrefix, s = _ref58.dynamicAlias;
                r = [];

                _.forOwn(i, function (a, o) {
                  if (!/^\.{3}/.test(o)) if (_.isString(a)) {
                    var _l = t(a);

                    if (!_l) return;
                    r.push(new Promise(function (t, r) {
                      Ti.Load(_l, {
                        dynamicPrefix: n,
                        dynamicAlias: s
                      }).then( /*#__PURE__*/function () {
                        var _ref59 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7(r) {
                          var a, h;
                          return regeneratorRuntime.wrap(function _callee7$(_context7) {
                            while (1) {
                              switch (_context7.prev = _context7.next) {
                                case 0:
                                  a = Ti.Config.url(_l, {
                                    dynamicPrefix: n,
                                    dynamicAlias: s
                                  });
                                  _context7.next = 3;
                                  return e(r, {
                                    dynamicAlias: new Ti.Config.AliasMapping({
                                      "^./": Ti.Util.getParentPath(a)
                                    })
                                  });

                                case 3:
                                  h = _context7.sent;
                                  i[o] = h, t(h);

                                case 5:
                                case "end":
                                  return _context7.stop();
                              }
                            }
                          }, _callee7);
                        }));

                        return function (_x) {
                          return _ref59.apply(this, arguments);
                        };
                      }());
                    }));
                  } else if (_.isArray(a)) {
                    var _loop = function _loop(_i7) {
                      var l = t(a[_i7]);
                      l && r.push(new Promise(function (t, r) {
                        Ti.Load(l, {
                          dynamicPrefix: n,
                          dynamicAlias: s
                        }).then( /*#__PURE__*/function () {
                          var _ref60 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8(r) {
                            var h, c;
                            return regeneratorRuntime.wrap(function _callee8$(_context8) {
                              while (1) {
                                switch (_context8.prev = _context8.next) {
                                  case 0:
                                    h = Ti.Config.url(l, {
                                      dynamicPrefix: n,
                                      dynamicAlias: s
                                    });
                                    _context8.next = 3;
                                    return e(r, {
                                      dynamicAlias: new Ti.Config.AliasMapping({
                                        "^./": Ti.Util.getParentPath(h)
                                      })
                                    });

                                  case 3:
                                    c = _context8.sent;
                                    a[_i7] = c, !c.name && /^(modules|components)$/.test(o) && (c.name = Ti.Util.getLinkName(v)), t(c);

                                  case 5:
                                  case "end":
                                    return _context8.stop();
                                }
                              }
                            }, _callee8);
                          }));

                          return function (_x2) {
                            return _ref60.apply(this, arguments);
                          };
                        }());
                      }));
                    };

                    for (var _i7 = 0; _i7 < a.length; _i7++) {
                      _loop(_i7);
                    }
                  } else _.isPlainObject(a) && r.push(e(a, {
                    dynamicPrefix: n,
                    dynamicAlias: s
                  }));
                });

                _context9.t0 = r.length > 0;

                if (!_context9.t0) {
                  _context9.next = 8;
                  break;
                }

                _context9.next = 8;
                return Promise.all(r);

              case 8:
                return _context9.abrupt("return", i);

              case 9:
              case "end":
                return _context9.stop();
            }
          }
        }, _callee9);
      }));
      return _e7.apply(this, arguments);
    }

    return {
      LoadTiLinkedObj: e,
      LoadTiAppInfo: function () {
        var _LoadTiAppInfo = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6() {
          var t,
              i,
              n,
              _args6 = arguments;
          return regeneratorRuntime.wrap(function _callee6$(_context6) {
            while (1) {
              switch (_context6.prev = _context6.next) {
                case 0:
                  t = _args6.length > 0 && _args6[0] !== undefined ? _args6[0] : {};
                  i = _args6.length > 1 && _args6[1] !== undefined ? _args6[1] : document;
                  n = _.cloneDeep(t);
                  _context6.next = 5;
                  return e(n);

                case 5:
                  Ti.IsInfo("TiApp") && console.log("await LoadTiLinkedObj(conf)", n);
                  return _context6.abrupt("return", n);

                case 7:
                case "end":
                  return _context6.stop();
              }
            }
          }, _callee6);
        }));

        function LoadTiAppInfo() {
          return _LoadTiAppInfo.apply(this, arguments);
        }

        return LoadTiAppInfo;
      }()
    };
  }(),
      t = _ref54.LoadTiAppInfo,
      e = _ref54.LoadTiLinkedObj,
      _ref55 = function () {
    var t = /*#__PURE__*/function () {
      function t() {
        _classCallCheck(this, t);

        this.guards = {}, this.actions = {};
      }

      _createClass(t, [{
        key: "addGuard",
        value: function addGuard(t, e, i) {
          e && _.isFunction(i) && Ti.Util.pushValue(this.guards, e, {
            scope: t,
            func: i
          });
        }
      }, {
        key: "removeGuard",
        value: function removeGuard(t) {
          for (var _len3 = arguments.length, e = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {
            e[_key3 - 1] = arguments[_key3];
          }

          this.guards = this.__remove_by(this.guards, t, e);
        }
      }, {
        key: "isWatched",
        value: function isWatched(t, e) {
          var i = this.actions[e];

          if (_.isArray(i)) {
            var _iterator7 = _createForOfIteratorHelper(i),
                _step7;

            try {
              for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {
                var _e8 = _step7.value;
                if (_e8.scope === t) return !0;
              }
            } catch (err) {
              _iterator7.e(err);
            } finally {
              _iterator7.f();
            }
          }

          return !1;
        }
      }, {
        key: "watch",
        value: function watch(t) {
          var _this2 = this;

          var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];

          var _ref61 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
              i = _ref61.$com,
              _ref61$argContext = _ref61.argContext,
              n = _ref61$argContext === void 0 ? {} : _ref61$argContext;

          var s = _.without(_.concat(e), null);

          _.forEach(s, function (e) {
            if (_.isArray(e.items) && e.items.length > 0) _this2.watch(t, e.items, {
              $com: i,
              argContext: n
            });else if (e.action && e.shortcut) {
              if (_this2.isWatched(t, e.shortcut)) return;

              var _s3 = Ti.Shortcut.genActionInvoking(e.action, {
                $com: i,
                argContext: n,
                wait: e.wait
              });

              Ti.Util.pushValueBefore(_this2.actions, e.shortcut, {
                scope: t,
                func: _s3,
                prevent: Ti.Util.fallback(e.prevent, !0),
                stop: Ti.Util.fallback(e.stop, !0)
              });
            }
          });
        }
      }, {
        key: "unwatch",
        value: function unwatch(t) {
          for (var _len4 = arguments.length, e = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {
            e[_key4 - 1] = arguments[_key4];
          }

          this.actions = this.__remove_by(this.actions, t, e);
        }
      }, {
        key: "__remove_by",
        value: function __remove_by(t, e) {
          for (var _len5 = arguments.length, i = new Array(_len5 > 2 ? _len5 - 2 : 0), _key5 = 2; _key5 < _len5; _key5++) {
            i[_key5 - 2] = arguments[_key5];
          }

          var n = _.flattenDeep(i);

          if (!e && _.isEmpty(n)) return {};
          _.isEmpty(n) && (n = _.keys(t));
          var s = Ti.Util.isNil(e),
              r = {};
          return _.forEach(n, function (i) {
            var n = [];
            _.forEach(t[i], function (t) {
              s || t.scope === e || n.push(t);
            }), _.isEmpty(n) || (r[i] = n);
          }), r;
        }
      }, {
        key: "fire",
        value: function fire(t, e) {
          var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {
            stop: !1,
            prevent: !1,
            quit: !1
          };
          if (i.quit) return i;
          var n = Ti.Util.isNil(t),
              s = this.guards[e];

          if (_.isArray(s)) {
            var _iterator8 = _createForOfIteratorHelper(s),
                _step8;

            try {
              for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {
                var _e9 = _step8.value;
                if ((n || _e9.scope === t) && !_e9.func()) return i.quit = !0, i;
              }
            } catch (err) {
              _iterator8.e(err);
            } finally {
              _iterator8.f();
            }
          }

          var r = this.actions[e];
          if (!_.isArray(r)) return i;

          var _iterator9 = _createForOfIteratorHelper(r),
              _step9;

          try {
            for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {
              var _e10 = _step9.value;
              if ((n || _e10.scope === t) && (i.quit |= _e10.func(), i.stop |= _e10.stop, i.prevent |= _e10.prevent, i.quit)) return i;
            }
          } catch (err) {
            _iterator9.e(err);
          } finally {
            _iterator9.f();
          }

          return i;
        }
      }]);

      return t;
    }();

    return {
      TiAppActionShortcuts: t
    };
  }(),
      i = _ref55.TiAppActionShortcuts,
      _ref56 = function () {
    function t(t, e) {
      var i = !1,
          n = {};
      return _.forOwn(e, function (e, s, r) {
        var a = /^\.{3}(.*)$/.exec(s);

        if (a) {
          i = !0;
          var _s4 = a[1];
          t && _.assign(n, function (t, e) {
            var i = {};
            return _.forOwn(e, function (e, n) {
              var s = "map" + _.capitalize(n);

              t ? _.assign(i, Vuex[s](t, e)) : _.assign(i, Vuex[s](e));
            }), i;
          }(_s4, e));
        }
      }), i ? n : e;
    }

    var e = {
      StoreConfig: function StoreConfig() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
        var n = Ti.Util.merge({
          modules: {}
        }, t.mixins);
        return !t.state && n.state || (n.state = Ti.Util.genObj(t.state)), n.getters = _.assign(n.getters, Ti.Util.merge({}, t.getters)), n.mutations = _.assign(n.mutations, Ti.Util.merge({}, t.mutations)), n.actions = _.assign(n.actions, Ti.Util.merge({}, t.actions)), Ti.I18n.put(t.i18n), i && (n.namespaced = !0), _.forEach(t.modules, function (t, i) {
          var s;
          s = i.startsWith(".") ? e.StoreConfig(t) : e.StoreConfig(t, i), n.modules[i] = s;
        }), n.plugins = [].concat(t.plugins || []), n;
      },
      CreateStore: function CreateStore(t) {
        return new Vuex.Store(_objectSpread({
          strict: Ti.IsForDev()
        }, t));
      },
      Options: function Options() {
        var _Ti$Util, _Ti$Util2;

        var _ref62 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            _ref62$global = _ref62.global,
            i = _ref62$global === void 0 ? {} : _ref62$global,
            _ref62$conf = _ref62.conf,
            n = _ref62$conf === void 0 ? {} : _ref62$conf,
            s = _ref62.store;

        _.isPlainObject(n.i18n) && Ti.I18n.put(n.i18n);

        var r = _.pick(n, ["data", "props", "watch"]),
            a = _.pick(n, ["template", "render", "renderError"]),
            o = _.pick(n, ["beforeCreate", "created", "beforeMount", "mounted", "beforeUpdate", "updated", "activated", "deactivated", "beforeDestroy", "destroyed", "errorCaptured"]),
            l = _.pick(n, ["directives", "filters", "components"]);

        _.forOwn(l, function (t, n, s) {
          var r = _.flattenDeep([t]),
              a = [];

          var _iterator10 = _createForOfIteratorHelper(r),
              _step10;

          try {
            for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {
              var _t11 = _step10.value;
              _t11.globally ? ("components" == n && (_t11 = e.Options({
                conf: _t11,
                global: i
              })), Ti.Util.pushValue(i, n, _t11)) : a.push(_t11);
            }
          } catch (err) {
            _iterator10.e(err);
          } finally {
            _iterator10.f();
          }

          s[n] = a;
        });

        var h = _.pick(n, ["mixins", "extends"]),
            c = _.pick(n, ["name", "delimiters", "functional", "model", "inheritAttrs", "comments", "inject", "provide"]);

        var u = _objectSpread({}, _.mapValues(r, function (t) {
          return Ti.Util.merge({}, t);
        }), {}, a, {}, _.mapValues(o, Ti.Util.groupCall), {
          directives: Ti.Util.merge({}, l.directives),
          filters: Ti.Util.merge({}, l.filters),
          components: function () {
            var t = {};
            return _.map(l.components, function (n) {
              t[n.name] = e.Options({
                conf: n,
                global: i
              });
            }), t;
          }()
        }, h, {}, c);

        _.isFunction(u.data) || (u.data = Ti.Util.genObj(u.data || {}));

        var d = _.partial(t, s);

        return _.isArray(n.computed) ? u.computed = (_Ti$Util = Ti.Util).mergeWith.apply(_Ti$Util, [d, {}].concat(_toConsumableArray(n.computed))) : _.isObject(n.computed) && (u.computed = n.computed), _.isArray(n.methods) ? u.methods = (_Ti$Util2 = Ti.Util).mergeWith.apply(_Ti$Util2, [d, {}].concat(_toConsumableArray(n.methods))) : _.isObject(n.methods) && (u.methods = n.methods), s && (u.store = s), u;
      },
      Setup: function Setup() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        var i = arguments.length > 1 ? arguments[1] : undefined;
        var n = {};
        return {
          global: n,
          options: e.Options({
            global: n,
            conf: t,
            store: i
          })
        };
      },
      CreateInstance: function CreateInstance(t, e) {
        var _this3 = this;

        var i = Ti.Util.merge({}, t.global.filters),
            n = Ti.Util.merge({}, t.global.directives);
        _.forOwn(i, function (t, e) {
          Vue.filter(e, t);
        }), _.forOwn(n, function (t, e) {
          Vue.directive(e, t);
        });

        var s = function s(t) {
          _.map(t.components, s), delete t.components, Ti.I18n.put(t.i18n), _.isFunction(e) && e(t), _this3.registerComponent(t.name, t);
        };

        return _.map(t.global.components, s), _.isFunction(e) && e(t.options), new Vue(t.options);
      },
      registerComponent: function registerComponent(t, e) {
        var i = _.upperFirst(_.camelCase(t));

        Vue.component(i, e);
      }
    };
    return {
      TiVue: e
    };
  }(),
      n = _ref56.TiVue,
      _ref57 = function () {
    var t = /*#__PURE__*/function () {
      function t() {
        _classCallCheck(this, t);

        this.className = void 0, this.icon = void 0, this.title = void 0, this.type = "info", this.iconOk = void 0, this.textOk = "i18n:ok", this.ok = function (_ref63) {
          var t = _ref63.result;
          return t;
        }, this.iconCancel = void 0, this.textCancel = "i18n:cancel", this.cancel = function () {
          return void 0;
        }, this.actions = null, this.transDelay = 350, this.comType = "ti-label", this.comConf = {}, this.components = [], this.closer = "default", this.escape = !0, this.mask = !0, this.clickMaskToClose = !1, this.changeToClose = !1, this.position = "center", this.width = "6.4rem", this.height = void 0, this.spacing = void 0, this.overflow = void 0, this.adjustable = !1, this.result = void 0, this.model = {
          prop: "value",
          event: "change"
        }, this.modules = {}, this.events = {}, this.topActions = [], this.ready = /*#__PURE__*/function () {
          var _ref64 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee10(t) {
            return regeneratorRuntime.wrap(function _callee10$(_context10) {
              while (1) {
                switch (_context10.prev = _context10.next) {
                  case 0:
                  case "end":
                    return _context10.stop();
                }
              }
            }, _callee10);
          }));

          return function (_x3) {
            return _ref64.apply(this, arguments);
          };
        }(), this.preload = /*#__PURE__*/function () {
          var _ref65 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee11(t) {
            return regeneratorRuntime.wrap(function _callee11$(_context11) {
              while (1) {
                switch (_context11.prev = _context11.next) {
                  case 0:
                  case "end":
                    return _context11.stop();
                }
              }
            }, _callee11);
          }));

          return function (_x4) {
            return _ref65.apply(this, arguments);
          };
        }();
      }

      _createClass(t, [{
        key: "open",
        value: function () {
          var _open2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee13() {
            var _this6 = this;

            var t,
                e,
                i,
                n,
                s,
                r,
                a,
                o,
                _args13 = arguments;
            return regeneratorRuntime.wrap(function _callee13$(_context13) {
              while (1) {
                switch (_context13.prev = _context13.next) {
                  case 0:
                    t = _args13.length > 0 && _args13[0] !== undefined ? _args13[0] : _.identity;
                    e = [];
                    this.actions ? e = this.actions : (_.isFunction(this.ok) && this.textOk && e.push({
                      icon: this.iconOk,
                      text: this.textOk,
                      handler: this.ok
                    }), _.isFunction(this.cancel) && this.textCancel && e.push({
                      icon: this.iconCancel,
                      text: this.textCancel,
                      handler: this.cancel
                    }));
                    i = "";
                    this.model && (this.model.event && (i += " @".concat(this.model.event, "=\"OnChange\"")), this.model.prop && (i += " :".concat(this.model.prop, "=\"result\"")));
                    n = _.cloneDeep(this.events), s = [];

                    _.forEach(n, function (t, e) {
                      s.push("@".concat(e, "=\"OnEvent('").concat(e, "', $event)\""));
                    });

                    r = {
                      name: "app.modal",
                      template: "<transition :name=\"TransName\" @after-leave=\"OnAfterLeave\">\n          <div class=\"ti-app-modal ".concat(this.className || "", "\"\n            v-if=\"!hidden\"\n              :class=\"TopClass\"\n              :style=\"TopStyle\"\n              @click.left=\"OnClickTop\"\n              v-ti-activable>\n    \n              <div class=\"modal-con\" \n                :class=\"ConClass\"\n                :style=\"ConStyle\"\n                @click.left.stop>\n    \n                <div class=\"modal-head\"\n                  v-if=\"isShowHead\">\n                    <div class=\"as-icon\" v-if=\"icon\"><ti-icon :value=\"icon\"/></div>\n                    <div class=\"as-title\">{{title|i18n}}</div>\n                    <div\n                      v-if=\"hasTopActionBar\"\n                        class=\"as-bar\">\n                          <ti-actionbar\n                            :items=\"topActions\"\n                            align=\"right\"\n                            :status=\"TopActionBarStatus\"/>\n                    </div>\n                </div>\n    \n                <div class=\"modal-main\">\n                  <component\n                    v-if=\"comType\"\n                      class=\"ti-fill-parent\"\n                      :class=\"MainClass\"\n                      :is=\"comType\"\n                      v-bind=\"TheComConf\"\n                      :on-init=\"OnMainInit\"\n                      ").concat(i, "\n                      ").concat(s.join(" "), "\n                      @close=\"OnClose\"\n                      @ok=\"OnOk\"\n                      @actions:update=\"OnActionsUpdated\"/>\n                </div>\n    \n                <div class=\"modal-actions\"\n                  v-if=\"hasActions\">\n                    <div class=\"as-action\"\n                      v-for=\"a of actions\"\n                        @click.left=\"OnClickActon(a)\">\n                        <div class=\"as-icon\" v-if=\"a.icon\">\n                          <ti-icon :value=\"a.icon\"/></div>\n                        <div class=\"as-text\">{{a.text|i18n}}</div>\n                    </div>\n                </div>\n    \n                <div class=\"modal-closer\"\n                  v-if=\"hasCloser\"\n                    :class=\"CloserClass\">\n                      <ti-icon value=\"zmdi-close\" @click.native=\"OnClose\"/>\n                </div>\n            </div>\n        </div></transition>"),
                      components: this.components,
                      data: {
                        hidden: !0,
                        icon: this.icon,
                        title: this.title,
                        type: this.type,
                        ready: this.ready,
                        actions: e,
                        topActions: this.topActions,
                        comType: null,
                        comConf: this.comConf,
                        closer: this.closer,
                        escape: this.escape,
                        mask: this.mask,
                        position: this.position,
                        clickMaskToClose: this.clickMaskToClose,
                        changeToClose: this.changeToClose,
                        width: this.width,
                        height: this.height,
                        spacing: this.spacing,
                        overflow: this.overflow,
                        adjustable: this.adjustable,
                        result: _.cloneDeep(this.result)
                      },
                      store: {
                        modules: _.defaults({
                          viewport: "@mod:ti/viewport"
                        }, this.modules)
                      },
                      computed: {
                        TopClass: function TopClass() {
                          var t = Ti.Util.isNil(this.height);
                          return this.getTopClass({
                            "show-mask": this.isShowMask,
                            "no-mask": !this.isShowMask,
                            "has-height": !t,
                            "nil-height": t
                          }, "at-".concat(this.position));
                        },
                        TopStyle: function TopStyle() {
                          if ("center" != this.position) return {
                            padding: Ti.Css.toSize(this.spacing)
                          };
                        },
                        TransName: function TransName() {
                          return "app-modal-trans-at-".concat(this.position);
                        },
                        isShowHead: function isShowHead() {
                          return this.icon || this.title || this.hasTopActionBar;
                        },
                        hasTopActionBar: function hasTopActionBar() {
                          return !_.isEmpty(this.topActions);
                        },
                        isShowMask: function isShowMask() {
                          return !!this.mask;
                        },
                        hasActions: function hasActions() {
                          return !_.isEmpty(this.actions);
                        },
                        hasCloser: function hasCloser() {
                          return !!this.closer;
                        },
                        isCloserDefault: function isCloserDefault() {
                          return !0 === this.closer || "default" == this.closer;
                        },
                        ConClass: function ConClass() {
                          return Ti.Css.mergeClassName({
                            "is-show-header": this.isShowHead,
                            "is-hide-header": !this.isShowHead,
                            "is-show-actions": this.hasActions,
                            "is-hide-actions": !this.hasActions,
                            "is-closer-default": this.isCloserDefault,
                            "has-top-action-bar": this.hasTopActionBar
                          }, "is-".concat(this.type));
                        },
                        ConStyle: function ConStyle() {
                          return Ti.Css.toStyle({
                            width: this.width,
                            height: this.height
                          });
                        },
                        MainClass: function MainClass() {
                          return Ti.Css.mergeClassName("modal-type-is-".concat(this.type));
                        },
                        Main: function Main() {
                          return this.$store.state.main;
                        },
                        TopActionBarStatus: function TopActionBarStatus() {
                          return _.get(this.Main, "status");
                        },
                        CloserClass: function CloserClass() {
                          return Ti.Css.mergeClassName(_defineProperty({
                            "as-lamp-cord": !this.isCloserDefault,
                            "as-default": this.isCloserDefault
                          }, "at-".concat(this.closer), !this.isCloserDefault));
                        },
                        TheComConf: function TheComConf() {
                          return Ti.Util.explainObj(this, this.comConf);
                        }
                      },
                      methods: {
                        OnClickTop: function OnClickTop() {
                          this.clickMaskToClose && (this.hidden = !0);
                        },
                        OnClose: function OnClose() {
                          this.close();
                        },
                        OnOk: function OnOk(t) {
                          _.isUndefined(t) && (t = this.result), this.close(t);
                        },
                        OnChange: function OnChange(t) {
                          this.result = t, this.changeToClose && this.close(this.result);
                        },
                        OnActionsUpdated: function OnActionsUpdated() {
                          var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
                          this.topActions = t, Ti.App(this).reWatchShortcut(t);
                        },
                        OnEvent: function OnEvent(t, e) {
                          _.get(n, t)(e);
                        },
                        OnClickActon: function OnClickActon(t) {
                          var _this4 = this;

                          return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee12() {
                            var _e11, _i8, _n4, _s5;

                            return regeneratorRuntime.wrap(function _callee12$(_context12) {
                              while (1) {
                                switch (_context12.prev = _context12.next) {
                                  case 0:
                                    if (!t.handler) {
                                      _context12.next = 8;
                                      break;
                                    }

                                    _e11 = Ti.App(_this4);
                                    _i8 = {
                                      close: !0
                                    };
                                    _n4 = _e11.$vm();
                                    _context12.next = 6;
                                    return t.handler({
                                      $app: _e11,
                                      $body: _n4,
                                      $main: _n4.$main,
                                      result: _.cloneDeep(_n4.result),
                                      status: _i8
                                    });

                                  case 6:
                                    _s5 = _context12.sent;
                                    _i8.close ? _this4.close(_s5) : _this4.setResult(_s5);

                                  case 8:
                                  case "end":
                                    return _context12.stop();
                                }
                              }
                            }, _callee12);
                          }))();
                        },
                        OnAfterLeave: function OnAfterLeave() {
                          Ti.App(this).destroy(!0), t(this.returnValue);
                        },
                        OnMainInit: function OnMainInit(t) {
                          var e = Ti.App(this);
                          this.$main = t, e.$vmMain(t), this.escape && e.watchShortcut([{
                            action: "root:close",
                            shortcut: "ESCAPE"
                          }]), this.setActived(), this.ready(e);
                        },
                        close: function close(t) {
                          _.isUndefined(t) || (this.returnValue = t), this.hidden = !0;
                        },
                        setResult: function setResult(t) {
                          this.returnValue = t;
                        }
                      },
                      mounted: function mounted() {
                        var _this5 = this;

                        var t = Ti.App(this);
                        Ti.App.pushInstance(t), this.$nextTick(function () {
                          _this5.hidden = !1;
                        });
                      },
                      beforeDestroy: function beforeDestroy() {
                        var t = Ti.App(this);
                        Ti.App.pullInstance(t);
                      }
                    }, a = Ti.App(r);
                    _context13.next = 10;
                    return a.init();

                  case 10:
                    o = Ti.Dom.createElement({
                      $p: document.body,
                      className: "the-stub"
                    });
                    _context13.next = 13;
                    return this.preload(a);

                  case 13:
                    a.mountTo(o);

                    _.delay(function () {
                      a.$vm().comType = _this6.comType;
                    }, this.transDelay || 0);

                  case 15:
                  case "end":
                    return _context13.stop();
                }
              }
            }, _callee13, this);
          }));

          function open() {
            return _open2.apply(this, arguments);
          }

          return open;
        }()
      }]);

      return t;
    }();

    return {
      TiAppModal: t
    };
  }(),
      s = _ref57.TiAppModal,
      r = Symbol("ti-app"),
      a = Symbol("ti-info"),
      o = Symbol("ti-conf"),
      l = Symbol("ti-store"),
      h = Symbol("ti-vm"),
      c = Symbol("ti-vm-main"),
      u = Symbol("ti-vm-actived");

  var d = /*#__PURE__*/function () {
    function d() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = arguments.length > 1 ? arguments[1] : undefined;

      _classCallCheck(this, d);

      this.appDecorator = e, this.$info(t), this.$conf(null), this.$store(null), this.$vm(null), this.$shortcuts = new i();
    }

    _createClass(d, [{
      key: "name",
      value: function name() {
        return this.$info().name;
      }
    }, {
      key: "$info",
      value: function $info(t) {
        return Ti.Util.geset(this, a, t);
      }
    }, {
      key: "$conf",
      value: function $conf(t) {
        return Ti.Util.geset(this, o, t);
      }
    }, {
      key: "$store",
      value: function $store(t) {
        return Ti.Util.geset(this, l, t);
      }
    }, {
      key: "$vm",
      value: function $vm(t) {
        return Ti.Util.geset(this, h, t);
      }
    }, {
      key: "$vmMain",
      value: function $vmMain(t) {
        return Ti.Util.geset(this, c, t);
      }
    }, {
      key: "$state",
      value: function $state() {
        return this.$store().state;
      }
    }, {
      key: "init",
      value: function () {
        var _init = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee14() {
          var e, i, s, _t12, a, o;

          return regeneratorRuntime.wrap(function _callee14$(_context14) {
            while (1) {
              switch (_context14.prev = _context14.next) {
                case 0:
                  e = this.$info();
                  _context14.next = 3;
                  return t(e);

                case 3:
                  i = _context14.sent;
                  _context14.next = 6;
                  return this.appDecorator(i);

                case 6:
                  this.$conf(i);
                  Ti.IsInfo("TiApp") && console.log("Ti.$conf", this.$conf());

                  if (i.store) {
                    _t12 = n.StoreConfig(i.store);
                    Ti.IsInfo("TiApp") && console.log("TiVue.StoreConfig:", _t12), s = n.CreateStore(_t12), this.$store(s), s[r] = this, Ti.IsInfo("TiApp") && console.log("Ti.$store", this.$store());
                  }

                  a = n.Setup(i, s);
                  Ti.IsInfo("TiApp") && (console.log("TiVue.VueSetup(conf)"), console.log(" -- global:", a.global), console.log(" -- options:", a.options));
                  o = n.CreateInstance(a, function (t) {
                    Ti.Config.decorate(t);
                  });
                  return _context14.abrupt("return", (o[r] = this, this.$vm(o), this));

                case 13:
                case "end":
                  return _context14.stop();
              }
            }
          }, _callee14, this);
        }));

        function init() {
          return _init.apply(this, arguments);
        }

        return init;
      }()
    }, {
      key: "mountTo",
      value: function mountTo(t) {
        this.$el = Ti.Dom.find(t), this.$vm().$mount(this.$el), this.$el = this.$vm().$el, this.$el[r] = this;
      }
    }, {
      key: "destroy",
      value: function destroy() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;
        this.$vm().$destroy(), this.$el[r] = null, t && Ti.Dom.remove(this.$el);
      }
    }, {
      key: "setActivedVm",
      value: function setActivedVm() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
        this[u] = t;
        var e = t.tiActivableComIdPath();
        this.$store().commit("viewport/setActivedIds", e);
      }
    }, {
      key: "setBlurredVm",
      value: function setBlurredVm() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;

        if (this[u] == t) {
          var _e12 = t.tiParentActivableCom();

          this[u] = _e12;

          var _i9 = _e12 ? _e12.tiActivableComIdPath() : [];

          this.$store().commit("viewport/setActivedIds", _i9);
        }
      }
    }, {
      key: "getActivedVm",
      value: function getActivedVm() {
        return this[u];
      }
    }, {
      key: "reWatchShortcut",
      value: function reWatchShortcut() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
        this.unwatchShortcut(), this.watchShortcut(t);
      }
    }, {
      key: "watchShortcut",
      value: function watchShortcut() {
        var _this7 = this;

        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
        this.$shortcuts.watch(this, t, {
          $com: function $com() {
            return _this7.$vmMain();
          },
          argContext: this.$state()
        });
      }
    }, {
      key: "unwatchShortcut",
      value: function unwatchShortcut() {
        var _this$$shortcuts;

        for (var _len6 = arguments.length, t = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {
          t[_key6] = arguments[_key6];
        }

        (_this$$shortcuts = this.$shortcuts).unwatch.apply(_this$$shortcuts, [this].concat(t));
      }
    }, {
      key: "guardShortcut",
      value: function guardShortcut(t, e, i) {
        this.$shortcuts.addGuard(t, e, i);
      }
    }, {
      key: "pulloutShortcut",
      value: function pulloutShortcut(t, e, i) {
        this.$shortcuts.removeGuard(t, e, i);
      }
    }, {
      key: "fireShortcut",
      value: function fireShortcut(t, e) {
        var i = {
          stop: !1,
          prevent: !1,
          quit: !1
        },
            n = this.getActivedVm();

        if (n) {
          var _e13 = n.tiActivableComPath(!1);

          var _iterator11 = _createForOfIteratorHelper(_e13),
              _step11;

          try {
            for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {
              var _n5 = _step11.value;

              if (_.isFunction(_n5.__ti_shortcut)) {
                var _e14 = _n5.__ti_shortcut(t) || {};

                if (i.stop |= _e14.stop, i.prevent |= _e14.prevent, i.quit |= _e14.quit, i.quit) break;
              }
            }
          } catch (err) {
            _iterator11.e(err);
          } finally {
            _iterator11.f();
          }
        }

        return this.$shortcuts.fire(this, t, i), i.prevent && e.preventDefault(), i.stop && e.stopPropagation(), i;
      }
    }, {
      key: "exec",
      value: function () {
        var _exec = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee15(t, e) {
          var i, _t13;

          return regeneratorRuntime.wrap(function _callee15$(_context15) {
            while (1) {
              switch (_context15.prev = _context15.next) {
                case 0:
                  i = t;

                  if (!_.isString(i)) {
                    _context15.next = 6;
                    break;
                  }

                  _t13 = /^(commit|dispatch|root|main):(.+)$/.exec(i);

                  if (_t13) {
                    _context15.next = 5;
                    break;
                  }

                  return _context15.abrupt("return");

                case 5:
                  i = {
                    method: _t13[1],
                    name: _t13[2]
                  };

                case 6:
                  _context15.next = 8;
                  return this[i.method](i.name, e);

                case 8:
                  return _context15.abrupt("return", _context15.sent);

                case 9:
                case "end":
                  return _context15.stop();
              }
            }
          }, _callee15, this);
        }));

        function exec(_x5, _x6) {
          return _exec.apply(this, arguments);
        }

        return exec;
      }()
    }, {
      key: "commit",
      value: function commit(t, e) {
        this.$store().commit(t, e);
      }
    }, {
      key: "dispatch",
      value: function () {
        var _dispatch = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee16(t, e) {
          return regeneratorRuntime.wrap(function _callee16$(_context16) {
            while (1) {
              switch (_context16.prev = _context16.next) {
                case 0:
                  Ti.IsInfo("TiApp") && console.log("TiApp.dispatch", t, e);
                  _context16.next = 3;
                  return this.$store().dispatch(t, e);

                case 3:
                  return _context16.abrupt("return", _context16.sent);

                case 4:
                case "end":
                  return _context16.stop();
              }
            }
          }, _callee16, this);
        }));

        function dispatch(_x7, _x8) {
          return _dispatch.apply(this, arguments);
        }

        return dispatch;
      }()
    }, {
      key: "root",
      value: function root(t, e) {
        Ti.IsInfo("TiApp") && console.log("TiApp.self", t, e);
        var i = this.$vm()[t];
        if (_.isFunction(i)) return i(e);
        if (_.isUndefined(i)) throw Ti.Err.make("e-ti-app-self", {
          nm: t,
          payload: e
        });
        return i;
      }
    }, {
      key: "main",
      value: function main(t, e) {
        Ti.IsInfo("TiApp") && console.log("TiApp.main", t, e);
        var i = this.$vmMain()[t];
        if (_.isFunction(i)) return i(e);
        if (_.isUndefined(i)) throw Ti.Err.make("e-ti-app-main", {
          nm: t,
          payload: e
        });
        return i;
      }
    }, {
      key: "global",
      value: function global(t) {
        var i = _.get(window, t);

        for (var _len7 = arguments.length, e = new Array(_len7 > 1 ? _len7 - 1 : 0), _key7 = 1; _key7 < _len7; _key7++) {
          e[_key7 - 1] = arguments[_key7];
        }

        if (_.isFunction(i)) return i.apply(this, e);
        throw Ti.Err.make("e-ti-app-main", {
          nm: t,
          args: e
        });
      }
    }, {
      key: "get",
      value: function get(t) {
        return t ? this.$vm()[t] : this.$vm();
      }
    }, {
      key: "loadView",
      value: function () {
        var _loadView = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee17(t) {
          var i, _s6, _r2, s, r, a, o;

          return regeneratorRuntime.wrap(function _callee17$(_context17) {
            while (1) {
              switch (_context17.prev = _context17.next) {
                case 0:
                  if (!t.modType) {
                    _context17.next = 8;
                    break;
                  }

                  _context17.next = 3;
                  return Ti.Load(t.modType);

                case 3:
                  _s6 = _context17.sent;
                  _context17.next = 6;
                  return e(_s6, {
                    dynamicAlias: new Ti.Config.AliasMapping({
                      "^./": t.modType + "/"
                    })
                  });

                case 6:
                  _r2 = _context17.sent;
                  _r2.state || (_r2.state = {}), i = n.StoreConfig(_r2, !0);

                case 8:
                  _context17.next = 10;
                  return Ti.Load(t.comType);

                case 10:
                  s = _context17.sent;
                  Ti.Util.pushValue(s, "components", t.components);
                  _context17.next = 14;
                  return e(s, {
                    dynamicAlias: new Ti.Config.AliasMapping({
                      "^./": t.comType + "/"
                    })
                  });

                case 14:
                  r = _context17.sent;
                  a = n.Setup(r);
                  o = a.options.name || Ti.Util.getLinkName(t.comType);
                  return _context17.abrupt("return", (Ti.IsInfo("TiApp") && (console.log("TiApp.loadView:", o), console.log(" -- global:", a.global), console.log(" -- options:", a.options)), Ti.Config.decorate(a.options), n.registerComponent(o, a.options), _.map(a.global.components, function (t) {
                    Ti.Config.decorate(t), n.registerComponent(t.name, t);
                  }), _objectSpread({}, t, {
                    comName: o,
                    mod: i
                  })));

                case 18:
                case "end":
                  return _context17.stop();
              }
            }
          }, _callee17);
        }));

        function loadView(_x9) {
          return _loadView.apply(this, arguments);
        }

        return loadView;
      }()
    }]);

    return d;
  }();

  var p = function p(t) {
    var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _.identity;
    if (Ti.Util.isNil(t)) return null;
    if (_.isString(t)) return Ti.Load(t).then(function (t) {
      return new d(t, e);
    });

    if (_.isElement(t)) {
      var _e15 = t,
          _i10 = _e15[r];

      for (; !_i10 && _e15.parentElement;) {
        _i10 = (_e15 = _e15.parentElement)[r];
      }

      return _i10;
    }

    return t instanceof Vue ? t.$root[r] : t instanceof Vuex.Store ? t[r] : _.isPlainObject(t) ? new d(t, e) : void 0;
  },
      f = [];

  return p.pushInstance = function (t) {
    t && f.push(t);
  }, p.pullInstance = function (t) {
    t && _.pull(f, t);
  }, p.topInstance = function () {
    return _.last(f);
  }, p.hasTopInstance = function () {
    return f.length > 0;
  }, p.eachInstance = function () {
    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _.identity;

    _.forEach(f, t);
  }, p.allInstance = function () {
    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _.identity;
    return f;
  }, p.Open = function (t) {
    return new Promise(function (e) {
      var i = new s();
      _.assign(i, t), i.open(e);
    });
  }, {
    App: p
  };
}(),
    App = _ref8.App,
    _Err = {
  Err: {
    make: function make() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";
      var e = arguments.length > 1 ? arguments[1] : undefined;
      var i = t;
      _.isString(t) && (i = {
        code: t,
        data: e
      });
      var n = i.code.replace(/[.]/g, "-"),
          s = Ti.I18n.get(n);
      e && (_.isPlainObject(e) ? s += " : " + JSON.stringify(e) : s += " : " + e);
      var r = new Error(s.trim());
      return _.assign(r, i);
    }
  }
},
    Err = _Err.Err,
    _ref9 = function () {
  var t = {
    prefix: {},
    alias: {},
    suffix: {}
  };

  var e = /*#__PURE__*/function () {
    function e(t) {
      _classCallCheck(this, e);

      this.list = [], this.reset(t);
    }

    _createClass(e, [{
      key: "reset",
      value: function reset() {
        var _this8 = this;

        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        return this.list = [], _.forOwn(t, function (t, e) {
          _this8.list.push({
            regex: new RegExp(e),
            newstr: t
          });
        }), this;
      }
    }, {
      key: "get",
      value: function get() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";
        var e = arguments.length > 1 ? arguments[1] : undefined;
        var i = t;

        var _iterator12 = _createForOfIteratorHelper(this.list),
            _step12;

        try {
          for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {
            var _t14 = _step12.value;
            _t14.regex.test(i) && (i = i.replace(_t14.regex, _t14.newstr));
          }
        } catch (err) {
          _iterator12.e(err);
        } finally {
          _iterator12.f();
        }

        return i || (_.isUndefined(e) ? t : e);
      }
    }]);

    return e;
  }();

  var i = new e().reset();

  var n = /*#__PURE__*/function () {
    function n(t) {
      _classCallCheck(this, n);

      this.list = [], this.reset(t);
    }

    _createClass(n, [{
      key: "reset",
      value: function reset() {
        var _this9 = this;

        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        return _.forOwn(t, function (t, e) {
          _this9.list.push({
            regex: new RegExp(e),
            suffix: t
          });
        }), this;
      }
    }, {
      key: "get",
      value: function get() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";
        var e = arguments.length > 1 ? arguments[1] : undefined;
        var i = t;

        var _iterator13 = _createForOfIteratorHelper(this.list),
            _step13;

        try {
          for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {
            var _t15 = _step13.value;

            if (_t15.regex.test(i) && !i.endsWith(_t15.suffix)) {
              i += _t15.suffix;
              break;
            }
          }
        } catch (err) {
          _iterator13.e(err);
        } finally {
          _iterator13.f();
        }

        return i || (_.isUndefined(e) ? t : e);
      }
    }]);

    return n;
  }();

  var s = new n().reset(),
      r = {
    AliasMapping: e,
    version: function version() {
      return t.version;
    },
    set: function set() {
      var _ref66 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
          e = _ref66.prefix,
          n = _ref66.alias,
          r = _ref66.suffix,
          a = _ref66.lang;

      e && (t.prefix = e), n && (t.alias = n, i.reset(t.alias)), r && (t.suffix = r, s.reset(t.suffix)), a && (t.lang = a);
    },
    update: function update() {
      var _ref67 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
          e = _ref67.prefix,
          n = _ref67.alias,
          r = _ref67.suffix,
          a = _ref67.lang;

      e && _.assign(t.prefix, e), n && (_.assign(t.alias, n), i.reset(t.alias)), r && (_.assign(t.suffix, r), s.reset(t.suffix)), a && (t.lang = a);
    },
    get: function get() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
      return e ? _.get(t, e) : t;
    },
    decorate: function decorate(t) {
      var e = t.name || "Unkown";
      Ti.Util.pushValue(t, "mixins", {
        computed: {
          tiComType: function tiComType() {
            return e;
          }
        }
      });
    },
    lang: function lang() {
      return r.get("lang") || "zh-cn";
    },
    url: function url() {
      var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";

      var _ref68 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref68$dynamicPrefix = _ref68.dynamicPrefix,
          r = _ref68$dynamicPrefix === void 0 ? {} : _ref68$dynamicPrefix,
          a = _ref68.dynamicAlias;

      if (/^((https?:)?\/\/)/.test(n)) return n;
      var o = n;

      if (a) {
        o = (a instanceof e ? a : new e().reset(a)).get(n, null);
      }

      o = i.get(o || n), /^.+\.(css|js|mjs|json|txt|text|html|xml)$/.test(o) || (o = s.get(o));
      var l = /^(@([^:]+):?)(.*)/.exec(o);
      if (!l) return o;

      var _l$slice = l.slice(2),
          _l$slice2 = _slicedToArray(_l$slice, 2),
          h = _l$slice2[0],
          c = _l$slice2[1],
          u = r[h] || t.prefix[h];

      if (!u) throw Ti.Err.make("e-ti-config-prefix_without_defined", h);
      return u + c;
    }
  };
  return {
    Config: r
  };
}(),
    Config = _ref9.Config,
    _ref10 = function () {
  var t = {
    createElement: function createElement(_ref69) {
      var _ref69$tagName = _ref69.tagName,
          t = _ref69$tagName === void 0 ? "div" : _ref69$tagName,
          _ref69$attrs = _ref69.attrs,
          e = _ref69$attrs === void 0 ? {} : _ref69$attrs,
          _ref69$props = _ref69.props,
          i = _ref69$props === void 0 ? {} : _ref69$props,
          _ref69$className = _ref69.className,
          n = _ref69$className === void 0 ? "" : _ref69$className,
          _ref69$$p = _ref69.$p,
          s = _ref69$$p === void 0 ? null : _ref69$$p;
      var r = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;
      var a = r.createElement(t);
      return n && (a.className = Ti.Css.joinClassNames(n)), _.forOwn(e, function (t, e) {
        a.setAttribute(e, t);
      }), _.forOwn(i, function (t, e) {
        a[e] = t;
      }), s && s.appendChild(a), a;
    },
    appendToHead: function appendToHead(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document.head;
      _.isElement(t) && _.isElement(e) && e.appendChild(t);
    },
    appendToBody: function appendToBody(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document.body;
      _.isElement(t) && _.isElement($body) && $body.appendChild(t);
    },
    appendTo: function appendTo(t, e) {
      _.isElement(t) && _.isElement(e) && e.appendChild(t);
    },
    prependTo: function prependTo(t, e) {
      e.firstChild ? e.insertBefore(t, e.firstChild) : e.appendChild(t);
    },
    findAll: function findAll() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "*";
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;
      if (!e) return [];
      return _toConsumableArray(e.querySelectorAll(t));
    },
    find: function find() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "*";
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;
      return e ? _.isElement(t) ? t : e.querySelector(t) : [];
    },
    remove: function remove(e, i) {
      if (_.isString(e)) {
        var _n6 = t.findAll(e, i);

        var _iterator14 = _createForOfIteratorHelper(_n6),
            _step14;

        try {
          for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {
            var _e16 = _step14.value;
            t.remove(_e16);
          }
        } catch (err) {
          _iterator14.e(err);
        } finally {
          _iterator14.f();
        }
      } else _.isElement(e) && e.parentNode.removeChild(e);
    },
    ownerWindow: function ownerWindow(t) {
      return t.defaultView ? t.defaultView : t.ownerDocument ? t.ownerDocument.defaultView : t;
    },
    autoRootFontSize: function autoRootFontSize() {
      var _ref70 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
          _ref70$$win = _ref70.$win,
          t = _ref70$$win === void 0 ? window : _ref70$$win,
          _ref70$phoneMaxWidth = _ref70.phoneMaxWidth,
          e = _ref70$phoneMaxWidth === void 0 ? 540 : _ref70$phoneMaxWidth,
          _ref70$tabletMaxWidth = _ref70.tabletMaxWidth,
          i = _ref70$tabletMaxWidth === void 0 ? 768 : _ref70$tabletMaxWidth,
          _ref70$designWidth = _ref70.designWidth,
          n = _ref70$designWidth === void 0 ? 1e3 : _ref70$designWidth,
          _ref70$max = _ref70.max,
          s = _ref70$max === void 0 ? 100 : _ref70$max,
          _ref70$min = _ref70.min,
          r = _ref70$min === void 0 ? 80 : _ref70$min,
          a = _ref70.callback;

      var o = window.document,
          l = document.documentElement;
      var h = t.innerWidth / n * s,
          c = Math.min(Math.max(h, r), s);

      if (_.isFunction(a)) {
        a({
          $win: t,
          $doc: o,
          $root: l,
          mode: t.innerWidth > i ? "desktop" : t.innerWidth > e ? "tablet" : "phone",
          fontSize: c,
          width: t.innerWidth,
          height: t.innerHeight
        });
      }
    },
    watchDocument: function watchDocument(t, e) {
      document.addEventListener(t, e);
    },
    unwatchDocument: function unwatchDocument(t, e) {
      document.removeEventListener(t, e);
    },
    watchAutoRootFontSize: function watchAutoRootFontSize() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var i = arguments.length > 1 ? arguments[1] : undefined;
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : window;
      _.isFunction(e) && (n = i || window, i = e, e = void 0);

      var s = _.assign({}, e, {
        $win: n,
        callback: i
      });

      n.addEventListener("resize", function () {
        t.autoRootFontSize(s);
      }), _.delay(function () {
        t.autoRootFontSize(s);
      }, 1);
    },
    setStyle: function setStyle(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      _.forOwn(e, function (e, i) {
        if (_.isNull(e) || _.isUndefined(e)) return;

        var n = _.kebabCase(i);

        if ("" === e) t.style.removeProperty(n);else {
          var _i11 = _.isNumber(e) ? e + "px" : e;

          t.style.setProperty(n, _i11);
        }
      });
    },
    setClass: function setClass(t) {
      for (var _len8 = arguments.length, e = new Array(_len8 > 1 ? _len8 - 1 : 0), _key8 = 1; _key8 < _len8; _key8++) {
        e[_key8 - 1] = arguments[_key8];
      }

      var i = _.flattenDeep(e).join(" ");

      t.className = i;
    },
    addClass: function addClass(t) {
      for (var _len9 = arguments.length, e = new Array(_len9 > 1 ? _len9 - 1 : 0), _key9 = 1; _key9 < _len9; _key9++) {
        e[_key9 - 1] = arguments[_key9];
      }

      var i = _.flattenDeep(e);

      var _iterator15 = _createForOfIteratorHelper(i),
          _step15;

      try {
        for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {
          var _e17 = _step15.value;

          var _i12 = _.trim(_e17);

          t.classList.add(_i12);
        }
      } catch (err) {
        _iterator15.e(err);
      } finally {
        _iterator15.f();
      }
    },
    removeClass: function removeClass(t) {
      for (var _len10 = arguments.length, e = new Array(_len10 > 1 ? _len10 - 1 : 0), _key10 = 1; _key10 < _len10; _key10++) {
        e[_key10 - 1] = arguments[_key10];
      }

      var i = _.flattenDeep(e);

      var _iterator16 = _createForOfIteratorHelper(i),
          _step16;

      try {
        for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {
          var _e18 = _step16.value;

          var _i13 = _.trim(_e18);

          t.classList.remove(_i13);
        }
      } catch (err) {
        _iterator16.e(err);
      } finally {
        _iterator16.f();
      }
    },
    hasClass: function hasClass(t) {
      if (!_.isElement(t)) return !1;

      for (var _len11 = arguments.length, e = new Array(_len11 > 1 ? _len11 - 1 : 0), _key11 = 1; _key11 < _len11; _key11++) {
        e[_key11 - 1] = arguments[_key11];
      }

      for (var _i14 = 0, _e19 = e; _i14 < _e19.length; _i14++) {
        var _i15 = _e19[_i14];
        if (!t.classList.contains(_i15)) return !1;
      }

      return !0;
    },
    hasOneClass: function hasOneClass(t) {
      if (!_.isElement(t)) return !1;

      for (var _len12 = arguments.length, e = new Array(_len12 > 1 ? _len12 - 1 : 0), _key12 = 1; _key12 < _len12; _key12++) {
        e[_key12 - 1] = arguments[_key12];
      }

      for (var _i16 = 0, _e20 = e; _i16 < _e20.length; _i16++) {
        var _i17 = _e20[_i16];
        if (t.classList.contains(_i17)) return !0;
      }

      return !1;
    },
    applyRect: function applyRect(e, i) {
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "tlwh";
      var s = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
      var r = e.ownerDocument.defaultView;

      _.defaults(s, {
        width: r.innerWidth,
        height: r.innerHeight
      });

      var a = i.toCss(s, n);
      t.setStyle(e, a);
    },
    dockTo: function dockTo(e, i) {
      var _ref71 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
          _ref71$mode = _ref71.mode,
          n = _ref71$mode === void 0 ? "H" : _ref71$mode,
          _ref71$axis = _ref71.axis,
          s = _ref71$axis === void 0 ? {} : _ref71$axis,
          r = _ref71.posListX,
          a = _ref71.posListY,
          o = _ref71.space,
          _ref71$viewportBorder = _ref71.viewportBorder,
          l = _ref71$viewportBorder === void 0 ? 4 : _ref71$viewportBorder,
          h = _ref71.position;

      h && (e.style.position = h);
      var c = {
        src: Ti.Rects.createBy(e),
        ta: Ti.Rects.createBy(i),
        win: Ti.Rects.createBy(e.ownerDocument.defaultView)
      };

      var u = function u(t, e, i) {
        return t <= e ? i[0] : t > e && t <= 2 * e ? i[1] : i[2];
      };

      if (_.defaults(s, {
        x: "auto",
        y: "auto"
      }), "auto" == s.x) {
        var _t16 = r || {
          H: ["left", "right"],
          V: ["right", "left"]
        }[n];

        s.x = u(c.ta.x, c.win.width / _t16.length, _t16);
      }

      if ("auto" == s.y) {
        var _t17 = a || {
          H: ["bottom", "top"],
          V: ["top", "center", "bottom"]
        }[n];

        s.y = u(c.ta.y, c.win.height / _t17.length, _t17);
      }

      var d = c.win.clone();
      "H" == n && ("bottom" == s.y ? d.top = c.ta.bottom : "top" == s.y && (d.bottom = c.ta.top), d.updateBy("tlbr"));
      var p = c.src.dockTo(c.ta, n, {
        axis: s,
        space: o,
        viewport: d,
        viewportBorder: l,
        wrapCut: !0
      });

      _.delay(function () {
        t.applyRect(e, c.src, p);
      }, 0);
    },
    htmlChipITT: function htmlChipITT() {
      var _ref72 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
          t = _ref72.icon,
          e = _ref72.text,
          i = _ref72.tip,
          n = _ref72.more;

      var _ref73 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref73$tagName = _ref73.tagName,
          s = _ref73$tagName === void 0 ? "div" : _ref73$tagName,
          _ref73$className = _ref73.className,
          r = _ref73$className === void 0 ? "" : _ref73$className,
          _ref73$iconTag = _ref73.iconTag,
          a = _ref73$iconTag === void 0 ? "div" : _ref73$iconTag,
          _ref73$iconClass = _ref73.iconClass,
          o = _ref73$iconClass === void 0 ? "" : _ref73$iconClass,
          _ref73$textTag = _ref73.textTag,
          l = _ref73$textTag === void 0 ? "div" : _ref73$textTag,
          _ref73$textClass = _ref73.textClass,
          h = _ref73$textClass === void 0 ? "" : _ref73$textClass,
          _ref73$textAsHtml = _ref73.textAsHtml,
          c = _ref73$textAsHtml === void 0 ? !1 : _ref73$textAsHtml,
          _ref73$moreTag = _ref73.moreTag,
          u = _ref73$moreTag === void 0 ? "div" : _ref73$moreTag,
          _ref73$moreClass = _ref73.moreClass,
          d = _ref73$moreClass === void 0 ? "" : _ref73$moreClass,
          _ref73$wrapperTag = _ref73.wrapperTag,
          p = _ref73$wrapperTag === void 0 ? "" : _ref73$wrapperTag,
          _ref73$wrapperClass = _ref73.wrapperClass,
          f = _ref73$wrapperClass === void 0 ? "" : _ref73$wrapperClass,
          _ref73$attrs = _ref73.attrs,
          m = _ref73$attrs === void 0 ? {} : _ref73$attrs;

      var g = "";

      if (t || e) {
        var _p = Ti.Icons.fontIconHtml(t),
            _f = function _f(t, e) {
          return t && e ? "".concat(t, "=\"").concat(e, "\"") : "";
        },
            _y = function _y(t) {
          return _f("class", t);
        },
            T = [];

        if (_.forOwn(m, function (t, e) {
          T.push(_f(e, t));
        }), T = T.join(" "), g += "<".concat(s, " ").concat(_y(r), " ").concat(_f("ti-tip", i), " ").concat(T, ">"), _p && (g += "<".concat(a, " ").concat(_y(o), "\">").concat(_p, "</").concat(a, ">")), e) {
          var _t18 = c ? e : Ti.I18n.text(e);

          g += "<".concat(l, " ").concat(_y(h), ">").concat(_t18, "</").concat(l, ">");
        }

        if (n) {
          var _t19 = Ti.I18n.text(n);

          g += "<".concat(u, " ").concat(_y(d), ">").concat(_t19, "</").concat(u, ">");
        }

        g += "</".concat(s, ">");
      }

      return p ? "<".concat(p, " ").concat(klass(f), ">").concat(g, "</").concat(p, ">") : g;
    },
    scrollBarSize: function scrollBarSize() {
      if (!window.SCROLL_BAR_SIZE) {
        var t = 0;
        $("body").append("<div id='div_out' style='position:relative;width:100px;height:100px;overflow-y:scroll;overflow-x:scroll'></div>"), $("#div_out").append("<div id='div_in' style='position:absolute;width:100%;height:100%;'></div>");
        var e = $("#div_out"),
            i = $("#div_in");
        t = e.width() - i.width(), $("#div_out").remove(), $("#div_in").remove(), window.SCROLL_BAR_SIZE = t;
      }

      return window.SCROLL_BAR_SIZE;
    }
  };
  return {
    Dom: t
  };
}(),
    Dom = _ref10.Dom,
    _ref11 = function () {
  function t(t, e, n) {
    var s = {},
        r = i.explainToArray(e, !1);

    var _iterator17 = _createForOfIteratorHelper(r),
        _step17;

    try {
      for (_iterator17.s(); !(_step17 = _iterator17.n()).done;) {
        var _e21 = _step17.value;

        var _i18 = Ti.Util.fallback(t[_e21], n);

        _.isUndefined(_i18) || (s[_e21] = _i18);
      }
    } catch (err) {
      _iterator17.e(err);
    } finally {
      _iterator17.f();
    }

    return s;
  }

  var e = /*#__PURE__*/function () {
    function e() {
      _classCallCheck(this, e);

      _.assign(this, {
        t: "top",
        l: "left",
        w: "width",
        h: "height",
        r: "right",
        b: "bottom",
        x: "x",
        y: "y"
      });
    }

    _createClass(e, [{
      key: "explainToArray",
      value: function explainToArray(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;

        var i = [],
            n = function (t) {
          var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;
          if (!t) return [];
          if (_.isArray(t)) return t;
          var i = t.toLowerCase().split("");
          return e ? i.sort() : i;
        }(t, e);

        var _iterator18 = _createForOfIteratorHelper(n),
            _step18;

        try {
          for (_iterator18.s(); !(_step18 = _iterator18.n()).done;) {
            var _t20 = _step18.value;
            var _e22 = this[_t20];
            _e22 && i.push(_e22);
          }
        } catch (err) {
          _iterator18.e(err);
        } finally {
          _iterator18.f();
        }

        return i;
      }
    }, {
      key: "getKey",
      value: function getKey(t) {
        return this[t];
      }
    }]);

    return e;
  }();

  var i = new e();

  var n = /*#__PURE__*/function () {
    function n(t, e) {
      _classCallCheck(this, n);

      this.__ti_rect__ = !0, this.set(t, e);
    }

    _createClass(n, [{
      key: "set",
      value: function set() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {
          top: 0,
          left: 0,
          width: 0,
          height: 0
        };
        var e = arguments.length > 1 ? arguments[1] : undefined;
        var i = ["bottom", "height", "left", "right", "top", "width", "x", "y"];

        if (_.isUndefined(e)) {
          var _n7 = [];

          var _iterator19 = _createForOfIteratorHelper(i),
              _step19;

          try {
            for (_iterator19.s(); !(_step19 = _iterator19.n()).done;) {
              var _e23 = _step19.value;
              var _i19 = t[_e23];

              if (_.isNumber(_i19)) {
                this[_e23] = _i19;

                var _t21 = _e23.substring(0, 1);

                _n7.push(_t21);
              }
            }
          } catch (err) {
            _iterator19.e(err);
          } finally {
            _iterator19.f();
          }

          e = _n7.join("");
        } else {
          var _iterator20 = _createForOfIteratorHelper(i),
              _step20;

          try {
            for (_iterator20.s(); !(_step20 = _iterator20.n()).done;) {
              var _e24 = _step20.value;
              var _i20 = t[_e24];
              _.isNumber(_i20) && (this[_e24] = _i20);
            }
          } catch (err) {
            _iterator20.e(err);
          } finally {
            _iterator20.f();
          }
        }

        return "bhlrtwxy" == e ? this : this.updateBy(e);
      }
    }, {
      key: "toString",
      value: function toString() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "tlwh";
        var i = t(this, e, "NaN"),
            n = [];
        return _.forEach(i, function (t) {
          return n.push(t);
        }), n.join(",");
      }
    }, {
      key: "valueOf",
      value: function valueOf() {
        return this.toString();
      }
    }, {
      key: "updateBy",
      value: function updateBy() {
        var _this10 = this;

        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "tlwh";
        return {
          "height/left/top/width": function heightLeftTopWidth() {
            _this10.right = _this10.left + _this10.width, _this10.bottom = _this10.top + _this10.height, _this10.x = _this10.left + _this10.width / 2, _this10.y = _this10.top + _this10.height / 2;
          },
          "height/right/top/width": function heightRightTopWidth() {
            _this10.left = _this10.right - _this10.width, _this10.bottom = _this10.top + _this10.height, _this10.x = _this10.left + _this10.width / 2, _this10.y = _this10.top + _this10.height / 2;
          },
          "bottom/height/left/width": function bottomHeightLeftWidth() {
            _this10.top = _this10.bottom - _this10.height, _this10.right = _this10.left + _this10.width, _this10.x = _this10.left + _this10.width / 2, _this10.y = _this10.top + _this10.height / 2;
          },
          "bottom/height/right/width": function bottomHeightRightWidth() {
            _this10.top = _this10.bottom - _this10.height, _this10.left = _this10.right - _this10.width, _this10.x = _this10.left + _this10.width / 2, _this10.y = _this10.top + _this10.height / 2;
          },
          "bottom/left/right/top": function bottomLeftRightTop() {
            _this10.width = _this10.right - _this10.left, _this10.height = _this10.bottom - _this10.top, _this10.x = _this10.left + _this10.width / 2, _this10.y = _this10.top + _this10.height / 2;
          },
          "height/width/x/y": function heightWidthXY() {
            var t = _this10.width / 2,
                e = _this10.height / 2;
            _this10.top = _this10.y - e, _this10.bottom = _this10.y + e, _this10.left = _this10.x - t, _this10.right = _this10.x + t;
          },
          "height/left/width/y": function heightLeftWidthY() {
            var t = _this10.width / 2,
                e = _this10.height / 2;
            _this10.top = _this10.y - e, _this10.bottom = _this10.y + e, _this10.x = _this10.left + t, _this10.right = _this10.left + _this10.width;
          },
          "height/right/width/y": function heightRightWidthY() {
            var t = _this10.width / 2,
                e = _this10.height / 2;
            _this10.top = _this10.y - e, _this10.bottom = _this10.y + e, _this10.x = _this10.right - t, _this10.left = _this10.right - _this10.width;
          },
          "height/top/width/x": function heightTopWidthX() {
            var t = _this10.width / 2,
                e = _this10.height / 2;
            _this10.y = _this10.top + e, _this10.bottom = _this10.top + _this10.height, _this10.left = _this10.x - t, _this10.right = _this10.x + t;
          },
          "bottom/height/width/x": function bottomHeightWidthX() {
            var t = _this10.width / 2,
                e = _this10.height / 2;
            _this10.y = _this10.bottom - e, _this10.top = _this10.bottom - _this10.height, _this10.left = _this10.x - t, _this10.right = _this10.x + t;
          }
        }[i.explainToArray(t).join("/")](), this;
      }
    }, {
      key: "raw",
      value: function raw() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "tlwh";
        var i = arguments.length > 1 ? arguments[1] : undefined;
        return t(this, e, i);
      }
    }, {
      key: "toCss",
      value: function toCss() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {
          width: window.innerWidth,
          height: window.innerHeight
        };
        var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "tlwh";
        var n = arguments.length > 2 ? arguments[2] : undefined;
        var s = {
          top: this.top,
          left: this.left,
          width: this.width,
          height: this.height,
          right: e.width - this.right,
          bottom: e.height - this.bottom
        };
        return Ti.IsDebug() && console.log("CSS:", s), t(s, i, n);
      }
    }, {
      key: "relative",
      value: function relative(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
          x: 0,
          y: 0
        };
        return this.top = this.top - (t.top - e.y), this.left = this.left - (t.left - e.x), this.updateBy("tlwh");
      }
    }, {
      key: "zoom",
      value: function zoom() {
        var _ref74 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            _ref74$x = _ref74.x,
            t = _ref74$x === void 0 ? 1 : _ref74$x,
            _ref74$y = _ref74.y,
            e = _ref74$y === void 0 ? t : _ref74$y,
            _ref74$centre = _ref74.centre,
            i = _ref74$centre === void 0 ? this : _ref74$centre;

        return this.top = (this.top - i.y) * e + i.y, this.left = (this.left - i.x) * t + i.x, this.width = this.width * t, this.height = this.height * e, this.updateBy("tlwh");
      }
    }, {
      key: "zoomTo",
      value: function zoomTo() {
        var _ref75 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            t = _ref75.width,
            e = _ref75.height,
            _ref75$mode = _ref75.mode,
            i = _ref75$mode === void 0 ? "contain" : _ref75$mode;

        if ("contain" == i) {
          if (new n({
            top: 0,
            left: 0,
            width: t,
            height: e
          }).contains(this)) return this;
        }

        var s,
            r,
            a = t,
            o = e,
            l = this.width / this.height,
            h = a / o;
        return l > h ? "cover" == i ? (r = o, s = o * l) : (s = a, r = a / l) : l < h ? "cover" == i ? (s = a, r = a / l) : (r = o, s = o * l) : (s = a, r = o, x = 0, y = 0), this.width = s, this.height = r, this.updateBy("tlwh");
      }
    }, {
      key: "centreTo",
      value: function centreTo() {
        var _ref76 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            t = _ref76.width,
            e = _ref76.height,
            _ref76$top = _ref76.top,
            i = _ref76$top === void 0 ? 0 : _ref76$top,
            _ref76$left = _ref76.left,
            n = _ref76$left === void 0 ? 0 : _ref76$left;

        var _ref77 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
            _ref77$xAxis = _ref77.xAxis,
            s = _ref77$xAxis === void 0 ? !0 : _ref77$xAxis,
            _ref77$yAxis = _ref77.yAxis,
            r = _ref77$yAxis === void 0 ? !0 : _ref77$yAxis;

        if (s && t > 0) {
          var _e25 = t - this.width;

          this.left = n + _e25 / 2;
        }

        if (r && e > 0) {
          var _t22 = e - this.height;

          this.top = i + _t22 / 2;
        }

        return this.updateBy("tlwh");
      }
    }, {
      key: "translate",
      value: function translate() {
        var _ref78 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            _ref78$x = _ref78.x,
            t = _ref78$x === void 0 ? 0 : _ref78$x,
            _ref78$y = _ref78.y,
            e = _ref78$y === void 0 ? 0 : _ref78$y;

        return this.y -= e, this.x -= t, this.updateBy("xywh");
      }
    }, {
      key: "moveTo",
      value: function moveTo() {
        var _this11 = this;

        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "tl";
        _.defaults(t, {
          x: 0,
          y: 0
        }), _.defaults(e, {
          x: 0,
          y: 0
        });
        return {
          "left/top": function leftTop() {
            _this11.left = t.x - e.x, _this11.top = t.y - e.y, _this11.updateBy("tlwh");
          },
          "right/top": function rightTop() {
            _this11.right = t.x + e.x, _this11.top = t.y - e.y, _this11.updateBy("trwh");
          },
          "bottom/left": function bottomLeft() {
            _this11.left = t.x - e.x, _this11.bottom = t.y + e.y, _this11.updateBy("blwh");
          },
          "bottom/right": function bottomRight() {
            _this11.right = t.x + e.x, _this11.bottom = t.y + e.y, _this11.updateBy("brwh");
          }
        }[i.explainToArray(n).join("/")](), this;
      }
    }, {
      key: "dockTo",
      value: function dockTo(t) {
        var _this12 = this;

        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "H";

        var _ref79 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
            _ref79$axis = _ref79.axis,
            i = _ref79$axis === void 0 ? {} : _ref79$axis,
            _ref79$space = _ref79.space,
            n = _ref79$space === void 0 ? {} : _ref79$space,
            _ref79$viewport = _ref79.viewport,
            r = _ref79$viewport === void 0 ? {} : _ref79$viewport,
            _ref79$viewportBorder = _ref79.viewportBorder,
            a = _ref79$viewportBorder === void 0 ? 4 : _ref79$viewportBorder,
            _ref79$wrapCut = _ref79.wrapCut,
            o = _ref79$wrapCut === void 0 ? !1 : _ref79$wrapCut;

        _.isNumber(n) && (n = {
          x: n,
          y: n
        }), _.defaults(i, {
          x: "center",
          y: "bottom"
        }), _.defaults(n, {
          x: 0,
          y: 0
        });
        ({
          "V:left/top": function VLeftTop() {
            _this12.right = t.left - n.x, _this12.top = t.top + n.y, _this12.updateBy("rtwh");
          },
          "V:left/center": function VLeftCenter() {
            _this12.right = t.left - n.x, _this12.y = t.y + n.y, _this12.updateBy("rywh");
          },
          "V:left/bottom": function VLeftBottom() {
            _this12.right = t.left - n.x, _this12.bottom = t.bottom - n.y, _this12.updateBy("rbwh");
          },
          "V:right/top": function VRightTop() {
            _this12.left = t.right + n.x, _this12.top = t.top + n.y, _this12.updateBy("ltwh");
          },
          "V:right/center": function VRightCenter() {
            _this12.left = t.right + n.x, _this12.y = t.y + n.y, _this12.updateBy("lywh");
          },
          "V:right/bottom": function VRightBottom() {
            _this12.left = t.right + n.x, _this12.bottom = t.bottom - n.y, _this12.updateBy("lbwh");
          },
          "H:left/top": function HLeftTop() {
            _this12.left = t.left + n.x, _this12.bottom = t.top - n.y, _this12.updateBy("lbwh");
          },
          "H:left/bottom": function HLeftBottom() {
            _this12.left = t.left + n.x, _this12.top = t.bottom + n.y, _this12.updateBy("ltwh");
          },
          "H:center/top": function HCenterTop() {
            _this12.x = t.x + n.x, _this12.bottom = t.top - n.y, _this12.updateBy("xbwh");
          },
          "H:center/bottom": function HCenterBottom() {
            _this12.x = t.x + n.x, _this12.top = t.bottom + n.y, _this12.updateBy("xtwh");
          },
          "H:right/top": function HRightTop() {
            _this12.right = t.right - n.x, _this12.bottom = t.top - n.y, _this12.updateBy("rbwh");
          },
          "H:right/bottom": function HRightBottom() {
            _this12.right = t.right - n.x, _this12.top = t.bottom + n.y, _this12.updateBy("rtwh");
          }
        })[e + ":" + i.x + "/" + i.y]();
        var l = "tl";

        if (o && s.isRect(r)) {
          var _t23 = r.clone(a);

          _t23.wrap(this), _t23.contains(this) || (this.overlap(_t23), l = "tlwh");
        }

        return l;
      }
    }, {
      key: "dockIn",
      value: function dockIn(t) {
        var _this13 = this;

        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
        _.defaults(e, {
          x: "center",
          y: "center"
        }), _.defaults(i, {
          x: 0,
          y: 0
        });
        return {
          "left/top": function leftTop() {
            _this13.left = t.left + i.x, _this13.top = t.top + i.y, _this13.updateBy("ltwh");
          },
          "left/center": function leftCenter() {
            _this13.left = t.left + i.x, _this13.y = t.y + i.y, _this13.updateBy("lywh");
          },
          "left/bottom": function leftBottom() {
            _this13.left = t.left + i.x, _this13.bottom = t.bottom - i.y, _this13.updateBy("lbwh");
          },
          "right/top": function rightTop() {
            _this13.right = t.right - i.x, _this13.top = t.top + i.y, _this13.updateBy("rtwh");
          },
          "right/center": function rightCenter() {
            _this13.right = t.right - i.x, _this13.y = t.y + i.y, _this13.updateBy("rywh");
          },
          "right/bottom": function rightBottom() {
            _this13.right = t.right - i.x, _this13.bottom = t.bottom - i.y, _this13.updateBy("brwh");
          },
          "center/center": function centerCenter() {
            _this13.x = t.x + i.x, _this13.x = t.y + i.y, _this13.updateBy("xywh");
          }
        }[e.x + "/" + e.y](), this;
      }
    }, {
      key: "wrap",
      value: function wrap(t) {
        var e = ["w", "h"];
        return this.containsX(t) || (t.left > this.left && t.right > this.right ? (t.right = this.right, e.push("r")) : (t.left = this.left, e.push("l"))), this.containsY(t) ? 3 == e.length && e.push("t") : t.top > this.top && t.bottom > this.bottom ? (t.bottom = this.bottom, e.push("b")) : (t.top = this.top, e.push("t")), 3 == e.length && e.push("l"), 4 == e.length ? t.updateBy(e.join("")) : t;
      }
    }, {
      key: "wrapCut",
      value: function wrapCut(t) {
        return this.wrap(t), this.contains(t) || t.overlap(this), t;
      }
    }, {
      key: "union",
      value: function union() {
        for (var _len13 = arguments.length, t = new Array(_len13), _key13 = 0; _key13 < _len13; _key13++) {
          t[_key13] = arguments[_key13];
        }

        for (var _i21 = 0, _t24 = t; _i21 < _t24.length; _i21++) {
          var _e26 = _t24[_i21];
          this.top = Math.min(this.top, _e26.top), this.left = Math.min(this.left, _e26.left), this.right = Math.max(this.right, _e26.right), this.bottom = Math.max(this.bottom, _e26.bottom);
        }

        return this.updateBy("tlbr");
      }
    }, {
      key: "overlap",
      value: function overlap() {
        for (var _len14 = arguments.length, t = new Array(_len14), _key14 = 0; _key14 < _len14; _key14++) {
          t[_key14] = arguments[_key14];
        }

        for (var _i22 = 0, _t25 = t; _i22 < _t25.length; _i22++) {
          var _e27 = _t25[_i22];
          this.top = Math.max(this.top, _e27.top), this.left = Math.max(this.left, _e27.left), this.right = Math.min(this.right, _e27.right), this.bottom = Math.min(this.bottom, _e27.bottom);
        }

        return this.updateBy("tlbr");
      }
    }, {
      key: "contains",
      value: function contains(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
        return this.containsX(t, e) && this.containsY(t, e);
      }
    }, {
      key: "containsX",
      value: function containsX(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
        return this.left + e <= t.left && this.right - e >= t.right;
      }
    }, {
      key: "containsY",
      value: function containsY(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
        return this.top + e <= t.top && this.bottom - e >= t.bottom;
      }
    }, {
      key: "isOverlap",
      value: function isOverlap(t) {
        return this.overlap(t).area() > 0;
      }
    }, {
      key: "area",
      value: function area() {
        return this.width * this.height;
      }
    }, {
      key: "clone",
      value: function clone() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
        return new n({
          left: this.left + t,
          right: this.right - t,
          top: this.top + t,
          bottom: this.bottom - t
        }, "tlbr");
      }
    }]);

    return n;
  }();

  var s = {
    create: function create(t, e) {
      return new n(t, e);
    },
    createBy: function createBy(t) {
      if (!t.ownerDocument) {
        var _e28 = Ti.Dom.ownerWindow(t);

        return new n({
          top: 0,
          left: 0,
          width: _e28.innerWidth,
          height: _e28.innerHeight
        });
      }

      var e = t.getBoundingClientRect();
      return new n(e, "tlwh");
    },
    union: function union() {
      for (var _len15 = arguments.length, t = new Array(_len15), _key15 = 0; _key15 < _len15; _key15++) {
        t[_key15] = arguments[_key15];
      }

      if (0 == t.length) return new n();
      var e = new n(t[0]);
      return e.union.apply(e, _toConsumableArray(t.slice(1))), e;
    },
    overlap: function overlap() {
      for (var _len16 = arguments.length, t = new Array(_len16), _key16 = 0; _key16 < _len16; _key16++) {
        t[_key16] = arguments[_key16];
      }

      if (0 == t.length) return new n();
      var e = new n(t[0]);
      return e.overlap.apply(e, _toConsumableArray(t.slice(1))), e;
    },
    isRect: function isRect(t) {
      return t && t.__ti_rect__ && t instanceof n;
    }
  };
  return {
    Rect: n,
    TiRects: s,
    Rects: s
  };
}(),
    Rect = _ref11.Rect,
    Rects = _ref11.Rects,
    _ref12 = function () {
  function t() {
    return _t26.apply(this, arguments);
  }

  function _t26() {
    _t26 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee22() {
      var e,
          _ref82,
          i,
          n,
          _s7,
          _r3,
          r,
          a,
          o,
          l,
          h,
          _args22 = arguments;

      return regeneratorRuntime.wrap(function _callee22$(_context22) {
        while (1) {
          switch (_context22.prev = _context22.next) {
            case 0:
              e = _args22.length > 0 && _args22[0] !== undefined ? _args22[0] : [];
              _ref82 = _args22.length > 1 && _args22[1] !== undefined ? _args22[1] : {}, i = _ref82.dynamicPrefix, n = _ref82.dynamicAlias;

              if (!_.isFunction(e)) {
                _context22.next = 4;
                break;
              }

              return _context22.abrupt("return", t(e(), {
                dynamicPrefix: i
              }));

            case 4:
              if (!_.isArray(e)) {
                _context22.next = 7;
                break;
              }

              _s7 = [], _r3 = [];
              return _context22.abrupt("return", (e.forEach(function (e, a) {
                _s7.push(t(e, {
                  dynamicPrefix: i,
                  dynamicAlias: n
                }).then(function (t) {
                  return _r3[a] = t;
                }));
              }), Promise.all(_s7).then(function () {
                return _r3;
              })));

            case 7:
              if (_.isString(e)) {
                _context22.next = 9;
                break;
              }

              throw Ti.Err.make("e-ti-use-url_must_string", e);

            case 9:
              a = e, o = /^(!(m?js|json|css|text):)?(.+)$/.exec(e);
              o && (r = o[2], a = o[3]);
              l = Ti.Config.url(a, {
                dynamicPrefix: i,
                dynamicAlias: n
              });
              Ti.IsInfo("TiLoad") && console.log("url", e, "\n  ::", a, "\n  ::", l, "\n  ::", i, "\n  ::", n), r || (r = (o = /\.(m?js|css|json)$/.exec(l)) ? o[1] : "text");
              h = Ti.MatchCache(l);

              if (!h) {
                _context22.next = 16;
                break;
              }

              return _context22.abrupt("return", h);

            case 16:
              _context22.prev = 16;
              _context22.next = 19;
              return s[r](l);

            case 19:
              return _context22.abrupt("return", h = _context22.sent);

            case 22:
              _context22.prev = 22;
              _context22.t0 = _context22["catch"](16);
              throw Ti.IsWarn("TiLoad") && console.warn("TiLoad Fail: [".concat(r, "]"), "\"".concat(e, "\" => \"").concat(l, "\"")), _context22.t0;

            case 25:
            case "end":
              return _context22.stop();
          }
        }
      }, _callee22, null, [[16, 22]]);
    }));
    return _t26.apply(this, arguments);
  }

  var e = /*#__PURE__*/function () {
    function e() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function (t) {
        return t;
      };

      _classCallCheck(this, e);

      this.cached = {}, this.loading = {}, this.doLoad = t;
    }

    _createClass(e, [{
      key: "tryLoad",
      value: function () {
        var _tryLoad = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee18(t, e) {
          var i, n, s, r, _iterator21, _step21, _t27;

          return regeneratorRuntime.wrap(function _callee18$(_context18) {
            while (1) {
              switch (_context18.prev = _context18.next) {
                case 0:
                  i = this.cached[t];

                  if (_.isUndefined(i)) {
                    _context18.next = 3;
                    break;
                  }

                  return _context18.abrupt("return", void e(i));

                case 3:
                  n = this.loading[t];

                  if (!(_.isArray(n) && n.length > 0)) {
                    _context18.next = 6;
                    break;
                  }

                  return _context18.abrupt("return", void n.push(e));

                case 6:
                  this.loading[t] = [e];
                  _context18.next = 9;
                  return this.doLoad(t);

                case 9:
                  s = _context18.sent;
                  this.cached[t] = s;
                  r = this.loading[t];
                  this.loading[t] = null;
                  _iterator21 = _createForOfIteratorHelper(r);

                  try {
                    for (_iterator21.s(); !(_step21 = _iterator21.n()).done;) {
                      _t27 = _step21.value;

                      _t27(s);
                    }
                  } catch (err) {
                    _iterator21.e(err);
                  } finally {
                    _iterator21.f();
                  }

                case 15:
                case "end":
                  return _context18.stop();
              }
            }
          }, _callee18, this);
        }));

        function tryLoad(_x10, _x11) {
          return _tryLoad.apply(this, arguments);
        }

        return tryLoad;
      }()
    }]);

    return e;
  }();

  var i = new e( /*#__PURE__*/function () {
    var _ref80 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee19(t) {
      return regeneratorRuntime.wrap(function _callee19$(_context19) {
        while (1) {
          switch (_context19.prev = _context19.next) {
            case 0:
              _context19.prev = 0;
              _context19.next = 3;
              return Promise.resolve().then(function () {
                return _interopRequireWildcard(require("".concat(t)));
              });

            case 3:
              return _context19.abrupt("return", _context19.sent);

            case 6:
              _context19.prev = 6;
              _context19.t0 = _context19["catch"](0);
              throw Ti.IsWarn("TiLoad") && console.warn("ti.load.mjs", t, _context19.t0), _context19.t0;

            case 9:
            case "end":
              return _context19.stop();
          }
        }
      }, _callee19, null, [[0, 6]]);
    }));

    return function (_x12) {
      return _ref80.apply(this, arguments);
    };
  }()),
      n = new e( /*#__PURE__*/function () {
    var _ref81 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee20(t) {
      return regeneratorRuntime.wrap(function _callee20$(_context20) {
        while (1) {
          switch (_context20.prev = _context20.next) {
            case 0:
              _context20.prev = 0;
              _context20.next = 3;
              return Ti.Http.get(t);

            case 3:
              return _context20.abrupt("return", _context20.sent);

            case 6:
              _context20.prev = 6;
              _context20.t0 = _context20["catch"](0);
              throw Ti.IsWarn("TiLoad") && console.warn("ti.load.text", t, _context20.t0), _context20.t0;

            case 9:
            case "end":
              return _context20.stop();
          }
        }
      }, _callee20, null, [[0, 6]]);
    }));

    return function (_x13) {
      return _ref81.apply(this, arguments);
    };
  }()),
      s = {
    js: function js(t) {
      return new Promise(function (e, i) {
        var n = Ti.Dom.find("script[src=\"".concat(t, "\"]"));
        n ? _.defer(e, n) : ((n = Ti.Dom.createElement({
          tagName: "script",
          props: {
            src: t
          }
        })).addEventListener("load", function (t) {
          e(n);
        }, {
          once: !0
        }), n.addEventListener("error", function (t) {
          i(t);
        }, {
          once: !0
        }), Ti.Dom.appendToHead(n));
      });
    },
    mjs: function mjs(t) {
      return new Promise(function (e, n) {
        i.tryLoad(t, function (t) {
          e(t["default"]);
        });
      });
    },
    css: function css(t) {
      return new Promise(function (e, i) {
        var n = Ti.Dom.find("link[href=\"".concat(t, "\"]"));
        n ? _.defer(e, n) : ((n = Ti.Dom.createElement({
          tagName: "link",
          props: {
            rel: "stylesheet",
            type: "text/css",
            href: t
          }
        })).addEventListener("load", function (t) {
          e(n);
        }, {
          once: !0
        }), n.addEventListener("error", function (t) {
          i(t);
        }, {
          once: !0
        }), Ti.Dom.appendToHead(n));
      });
    },
    json: function json(t) {
      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee21() {
        var _e29;

        return regeneratorRuntime.wrap(function _callee21$(_context21) {
          while (1) {
            switch (_context21.prev = _context21.next) {
              case 0:
                _context21.prev = 0;
                _context21.next = 3;
                return s.text(t);

              case 3:
                _e29 = _context21.sent;
                return _context21.abrupt("return", _.isPlainObject(_e29) ? _e29 : JSON.parse(_e29));

              case 7:
                _context21.prev = 7;
                _context21.t0 = _context21["catch"](0);
                throw Ti.IsWarn("TiLoad") && console.warn("ti.load.json!!", t, _context21.t0), _context21.t0;

              case 10:
              case "end":
                return _context21.stop();
            }
          }
        }, _callee21, null, [[0, 7]]);
      }))();
    },
    text: function text(t) {
      return new Promise(function (e, i) {
        n.tryLoad(t, e);
      });
    }
  };
  return {
    Load: t
  };
}(),
    Load = _ref12.Load,
    _ref13 = function () {
  var t = {
    arraybuffer: function arraybuffer(t) {
      throw "No implement yet!";
    },
    blob: function blob(t) {
      throw "No implement yet!";
    },
    document: function document(t) {
      throw "No implement yet!";
    },
    xml: function xml(t) {
      throw "No implement yet!";
    },
    ajax: function ajax(e) {
      var i = t.json(e);
      if (i.ok) return i.data;
      throw i;
    },
    json: function json(t) {
      var e = t.responseText,
          i = _.trim(e) || null;

      try {
        return JSON.parse(i);
      } catch (t) {
        return Ti.Types.safeParseJson(i, i);
      }
    },
    jsonOrText: function jsonOrText(t) {
      var e = t.responseText;

      try {
        var _t28 = _.trim(e) || null;

        return JSON.parse(_t28);
      } catch (t) {}

      return e;
    },
    text: function text(t) {
      return t.responseText;
    }
  },
      e = {
    send: function send(t) {
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      if (Ti.IsInfo("TiHttp") && console.log("TiHttp.send", t, i), !t) return;
      var _i$method = i.method,
          n = _i$method === void 0 ? "GET" : _i$method,
          _i$params = i.params,
          s = _i$params === void 0 ? {} : _i$params,
          _i$body = i.body,
          r = _i$body === void 0 ? null : _i$body,
          _i$file = i.file,
          a = _i$file === void 0 ? null : _i$file,
          _i$headers = i.headers,
          o = _i$headers === void 0 ? {} : _i$headers,
          _i$cleanNil = i.cleanNil,
          l = _i$cleanNil === void 0 ? !0 : _i$cleanNil,
          _i$progress = i.progress,
          h = _i$progress === void 0 ? _.identity : _i$progress,
          _i$created = i.created,
          c = _i$created === void 0 ? _.identity : _i$created,
          _i$beforeSend = i.beforeSend,
          u = _i$beforeSend === void 0 ? _.identity : _i$beforeSend,
          _i$finished = i.finished,
          d = _i$finished === void 0 ? _.identity : _i$finished,
          _i$readyStateChanged = i.readyStateChanged,
          p = _i$readyStateChanged === void 0 ? _.identity : _i$readyStateChanged;

      if (n = _.upperCase(n), l) {
        var _t29 = {};
        Ti.Util.walk(s, {
          leaf: function leaf(e, i) {
            Ti.Util.isNil(e) || _.set(_t29, i, e);
          }
        }), s = _t29;
      }

      var _ref83 = Ti.Invoke({
        GET: function GET() {
          var i = e.encodeFormData(s);
          return {
            urlToSend: i ? t + "?" + i : t
          };
        },
        POST: function POST() {
          return _.defaults(o, {
            "Content-type": "application/x-www-form-urlencoded; charset=utf-8"
          }), a ? {
            urlToSend: [t, e.encodeFormData(s)].join("?"),
            sendData: a
          } : r ? {
            urlToSend: [t, e.encodeFormData(s)].join("?"),
            sendData: r
          } : {
            urlToSend: t,
            sendData: e.encodeFormData(s)
          };
        }
      }[n]) || {
        urlToSend: t
      },
          f = _ref83.urlToSend,
          m = _ref83.sendData,
          g = new XMLHttpRequest();

      if (a) {
        if (!g.upload) throw Ti.Err.make("e.ti.http.upload.NoSupported");
        g.upload.addEventListener("progress", h);
      }

      return c(g), new Promise(function (t, e) {
        g.onreadystatechange = function () {
          p(g, i), 4 == g.readyState && (d(g), 200 == g.status ? t(g) : e(g));
        }, g.open(n, f), _.forOwn(o, function (t, e) {
          g.setRequestHeader(e, t);
        }), u(g), g.send(m);
      });
    },
    sendAndProcess: function sendAndProcess(i) {
      var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      return e.send(i, n).then(function (e) {
        return function (e) {
          var _ref84 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
              _ref84$as = _ref84.as,
              i = _ref84$as === void 0 ? "text" : _ref84$as;

          return Ti.InvokeBy(t, i, [e]);
        }(e, n);
      });
    },
    get: function get(t) {
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      return e.sendAndProcess(t, _.assign({}, i, {
        method: "GET"
      }));
    },
    post: function post(t) {
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      return e.sendAndProcess(t, _.assign({}, i, {
        method: "POST"
      }));
    },
    encodeFormData: function encodeFormData() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = [];
      return _.forOwn(t, function (t, i) {
        var n = Ti.Types.toStr(t);
        e.push("".concat(i, "=").concat(encodeURIComponent(n)));
      }), e.join("&");
    }
  };
  return {
    Http: e
  };
}(),
    Http = _ref13.Http,
    _ref14 = function () {
  function t(t) {
    var i = _.get(e, t);

    if (i) return i;

    if (_.isString(t)) {
      var _i23 = t.replace(/\./g, "-");

      return e[_i23];
    }

    return t;
  }

  var e = {},
      i = {
    put: function put(t) {
      if (_.isArray(t)) {
        var _iterator22 = _createForOfIteratorHelper(t),
            _step22;

        try {
          for (_iterator22.s(); !(_step22 = _iterator22.n()).done;) {
            var _e30 = _step22.value;
            i.put(_e30);
          }
        } catch (err) {
          _iterator22.e(err);
        } finally {
          _iterator22.f();
        }
      } else if (_.isPlainObject(t)) {
        if (_.isBoolean(t.ok)) return void console.warn("invalid msgs", t);

        _.assign(e, t);
      }
    },
    get: function get(e, n) {
      if (e && e.key && _.isPlainObject(e)) return i.getf(e.key, e.vars);
      if (e instanceof Error) return e.code ? Ti.S.join([i.get(e.code), e.data], " : ") : e.message;
      var s = t(e);
      return _.isUndefined(s) ? _.isUndefined(n) ? e : n : s;
    },
    text: function text(t, e) {
      if (t && t.text && _.isPlainObject(t)) return i.textf(t.text, t.vars);
      if (t instanceof Error) return i.get(t);
      var n = /^i18n:(.+)$/.exec(t);
      return n ? i.get(n[1], e) : Ti.Util.fallback(t, e);
    },
    getf: function getf(e) {
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      if (_.isString(e)) {
        var _n8 = t(e) || e;

        return Ti.S.renderBy(_n8, i);
      }

      return e;
    },
    textf: function textf(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var n = /^i18n:(.+)$/.exec(t);
      return n ? i.getf(n[1], e) : Ti.S.renderBy(t, e);
    },
    render: function render() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = arguments.length > 1 ? arguments[1] : undefined;
      return i.textf(e, t);
    },
    explain: function explain(t) {
      var e = _.trim(t),
          n = e.indexOf(":");

      if (n > 0) {
        var _t30 = _.trim(e.substring(0, n)),
            _s8 = _.trim(e.substring(n + 1));

        return i.getf(_t30, {
          val: _s8
        });
      }

      return i.get(e);
    }
  };
  return {
    I18n: i
  };
}(),
    I18n = _ref14.I18n,
    _ref15 = function () {
  var t = {
    "7z": "fas-file-archive",
    apk: "zmdi-android",
    bin: "fas-file",
    css: "fab-css3",
    csv: "fas-file-csv",
    doc: "far-file-word",
    docx: "fas-file-word",
    dmg: "fab-apple",
    exe: "im-windows-o",
    gz: "fas-file-archive",
    hmaker_site: "zmdi-globe-alt",
    html: "fab-html5",
    js: "fab-node-js",
    json: "fas-quote-right",
    less: "fab-first-order-alt",
    md: "fab-markdown",
    mjs: "fab-node-js",
    mkv: "far-file-video",
    mp: "fas-file-signature",
    mp3: "far-file-audio",
    mp4: "far-file-video",
    msi: "fab-windows",
    pdf: "far-file-pdf",
    py: "fab-python",
    rar: "fas-file-archive",
    rss: "fas-rss-square",
    sass: "fab-first-order",
    tar: "far-file-archive",
    tgz: "fas-file-archive",
    comt: "im-flask",
    wnml: "fas-file-code",
    xls: "far-file-excel",
    xlsx: "fas-file-excel",
    xml: "far-file-code",
    zip: "fas-file-archive"
  },
      e = {
    audio: "far-file-audio",
    image: "far-file-image",
    text: "far-file-alt",
    video: "far-file-video",
    "text/css": "fab-css3",
    "text/html": "fab-html5",
    "application/x-zip-compressed": "fas-file-archive",
    "application/x-javascript": "fab-js-square",
    "text/javascript": "fab-js-square"
  },
      i = {
    add: "zmdi-plus",
    alert: "zmdi-notifications-none",
    backward: "zmdi-chevron-left",
    close: "zmdi-close",
    confirm: "zmdi-help",
    create: "zmdi-audio",
    del: "zmdi-delete",
    done: "fas-thumbs-up",
    download: "zmdi-download",
    edit: "zmdi-edit",
    error: "zmdi-alert-octagon",
    forward: "zmdi-chevron-right",
    help: "zmdi-help-outline",
    info: "zmdi-info-outline",
    loading: "fas-spinner fa-spin",
    processing: "zmdi-settings zmdi-hc-spin",
    ok: "zmdi-check-circle",
    prompt: "zmdi-keyboard",
    refresh: "zmdi-refresh",
    removed: "far-trash-alt",
    setting: "zmdi-settings",
    success: "zmdi-check-circle",
    track: "zmdi-notifications-none",
    warn: "zmdi-alert-triangle"
  },
      n = {
    FILE: "far-file",
    DIR: "fas-folder"
  },
      s = _objectSpread({}, t, {}, e, {}, n, {}, i),
      r = "zmdi-cake",
      a = {
    put: function put() {
      var _ref85 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
          s = _ref85.types,
          a = _ref85.mimes,
          o = _ref85.races,
          l = _ref85.names,
          h = _ref85.dft;

      _.assign(t, s), _.assign(e, a), _.assign(i, l), _.assign(n, o), _.assign(r, h);
    },
    get: function get(a) {
      var o = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : r;
      if (!a) return o || r;
      if (_.isString(a)) return s[a] || o || r;
      var l = a.tp,
          h = a.type,
          c = a.mime,
          u = a.race,
          d = a.name,
          p = null;

      if (c) {
        var _t31 = /^([a-z0-9]+)\/(.+)$/.exec(c);

        _t31 && (p = _t31[1]);
      }

      return t[h || l] || e[c] || e[p] || n[u] || i[d] || o || r;
    },
    getByName: function getByName(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      return Ti.Util.fallback(i[t], e, r);
    },
    parseFontIcon: function parseFontIcon(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      if (!t) return e;
      var i = {
        className: "material-icons",
        text: t
      },
          n = /^([a-z]+)-(.+)$/.exec(t);
      return n && (/^fa[a-z]$/.test(n[1]) ? (i.className = n[1] + " fa-" + n[2], i.text = null) : (i.className = n[1] + " " + t, i.text = null)), i;
    },
    fontIconHtml: function fontIconHtml(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
      if (!t) return e;
      var i = a.parseFontIcon(t);
      return _.isEmpty(i) ? e : "<i class=\"".concat(i.className, "\">").concat(i.text || "", "</i>");
    }
  };

  return {
    Icons: a
  };
}(),
    Icons = _ref15.Icons,
    _ref16 = function () {
  var t = /*#__PURE__*/function () {
    function t() {
      var _ref86 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
          _t32 = _ref86.key,
          e = _ref86.everythingOk,
          i = _ref86.fail,
          _ref86$once = _ref86.once,
          n = _ref86$once === void 0 ? !1 : _ref86$once;

      _classCallCheck(this, t);

      _.assign(this, {
        key: _t32,
        everythingOk: e,
        fail: i,
        once: n
      });
    }

    _createClass(t, [{
      key: "explode",
      value: function () {
        var _explode = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee23() {
          return regeneratorRuntime.wrap(function _callee23$(_context23) {
            while (1) {
              switch (_context23.prev = _context23.next) {
                case 0:
                  _context23.next = 2;
                  return this.everythingOk();

                case 2:
                  _context23.t0 = !!_context23.sent;

                  if (_context23.t0) {
                    _context23.next = 7;
                    break;
                  }

                  _context23.next = 6;
                  return this.fail();

                case 6:
                  _context23.t0 = !1;

                case 7:
                  return _context23.abrupt("return", _context23.t0);

                case 8:
                case "end":
                  return _context23.stop();
              }
            }
          }, _callee23, this);
        }));

        function explode() {
          return _explode.apply(this, arguments);
        }

        return explode;
      }()
    }]);

    return t;
  }();

  var e = /*#__PURE__*/function () {
    function e() {
      _classCallCheck(this, e);

      this.detonators = [];
    }

    _createClass(e, [{
      key: "fire",
      value: function () {
        var _fire = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee24() {
          var _iterator23, _step23, _t33;

          return regeneratorRuntime.wrap(function _callee24$(_context24) {
            while (1) {
              switch (_context24.prev = _context24.next) {
                case 0:
                  _iterator23 = _createForOfIteratorHelper(this.detonators);
                  _context24.prev = 1;

                  _iterator23.s();

                case 3:
                  if ((_step23 = _iterator23.n()).done) {
                    _context24.next = 11;
                    break;
                  }

                  _t33 = _step23.value;
                  _context24.next = 7;
                  return _t33.explode();

                case 7:
                  if (_context24.sent) {
                    _context24.next = 9;
                    break;
                  }

                  return _context24.abrupt("return", !1);

                case 9:
                  _context24.next = 3;
                  break;

                case 11:
                  _context24.next = 16;
                  break;

                case 13:
                  _context24.prev = 13;
                  _context24.t0 = _context24["catch"](1);

                  _iterator23.e(_context24.t0);

                case 16:
                  _context24.prev = 16;

                  _iterator23.f();

                  return _context24.finish(16);

                case 19:
                  return _context24.abrupt("return", (_.remove(this.detonators, function (t) {
                    return t.once;
                  }), !0));

                case 20:
                case "end":
                  return _context24.stop();
              }
            }
          }, _callee24, this, [[1, 13, 16, 19]]);
        }));

        function fire() {
          return _fire.apply(this, arguments);
        }

        return fire;
      }()
    }, {
      key: "add",
      value: function add() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        _.defaults(e, {
          key: "det-" + this.detonators.length
        }), e instanceof t ? this.detonators.push(e) : this.detonators.push(new t(e));
      }
    }, {
      key: "remove",
      value: function remove() {
        for (var _len17 = arguments.length, t = new Array(_len17), _key17 = 0; _key17 < _len17; _key17++) {
          t[_key17] = arguments[_key17];
        }

        _.pullAllWith(this.detonators, t, function (t, e) {
          return t.key == e;
        });
      }
    }, {
      key: "clear",
      value: function clear() {
        this.detonators = [];
      }
    }]);

    return e;
  }();

  var i = /*#__PURE__*/function () {
    function i() {
      _classCallCheck(this, i);

      this.fuses = {};
    }

    _createClass(i, [{
      key: "get",
      value: function get() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "main";
        return this.fuses[t];
      }
    }, {
      key: "getOrCreate",
      value: function getOrCreate() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "main";
        var i = this.get(t);
        return i || (i = new e(), this.fuses[t] = i), i;
      }
    }, {
      key: "fire",
      value: function () {
        var _fire2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee25() {
          var t,
              e,
              _args25 = arguments;
          return regeneratorRuntime.wrap(function _callee25$(_context25) {
            while (1) {
              switch (_context25.prev = _context25.next) {
                case 0:
                  t = _args25.length > 0 && _args25[0] !== undefined ? _args25[0] : "main";
                  e = this.get(t);
                  _context25.t0 = !e;

                  if (_context25.t0) {
                    _context25.next = 7;
                    break;
                  }

                  _context25.next = 6;
                  return e.fire();

                case 6:
                  _context25.t0 = _context25.sent;

                case 7:
                  return _context25.abrupt("return", _context25.t0);

                case 8:
                case "end":
                  return _context25.stop();
              }
            }
          }, _callee25, this);
        }));

        function fire() {
          return _fire2.apply(this, arguments);
        }

        return fire;
      }()
    }, {
      key: "removeFuse",
      value: function removeFuse(t) {
        var e = this.get(t);
        return e && delete this[t], e;
      }
    }, {
      key: "clear",
      value: function clear() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "main";
        var e = this.get(t);
        return e && e.clear(), e;
      }
    }]);

    return i;
  }();

  return {
    Fuse: new i()
  };
}(),
    Fuse = _ref16.Fuse,
    _ref17 = function () {
  var t = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split("");
  return {
    Random: {
      str: function str() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 4;
        var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : t;
        var n = "";

        for (var _s9 = 0; _s9 < e; _s9++) {
          n += i[_.random(0, t.length - 1)];
        }

        return n;
      },
      obj: function obj() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : t;
        return e[_.random(0, t.length - 1)];
      },
      list: function list() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : t.length;
        var i = Math.min(e, t.length) - 1;

        for (; i > 0; i--) {
          var _e31 = _.random(0, i),
              _n9 = t[i],
              _s10 = t[_e31];

          t[i] = _s10, t[_e31] = _n9;
        }

        return t;
      }
    }
  };
}(),
    Random = _ref17.Random,
    _ref18 = function () {
  var t = /*#__PURE__*/function () {
    function t(_t34) {
      _classCallCheck(this, t);

      this.storage = _t34;
    }

    _createClass(t, [{
      key: "get",
      value: function get(t, e) {
        var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _.identity;
        var n = this.storage.getItem(t);
        return Ti.Util.isNil(n) ? e : i(n);
      }
    }, {
      key: "getString",
      value: function getString(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
        return this.get(t, e);
      }
    }, {
      key: "getObject",
      value: function getObject(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        return this.get(t, e, function (t) {
          return JSON.parse(t);
        });
      }
    }, {
      key: "getInt",
      value: function getInt(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;
        return this.get(t, e, function (t) {
          return parseInt(t);
        });
      }
    }, {
      key: "getBoolean",
      value: function getBoolean(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
        return this.get(t, e, function (t) {
          return !!/^(true|yes|on|ok)$/.test(t);
        });
      }
    }, {
      key: "getNumber",
      value: function getNumber(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;
        return this.get(t, e, function (t) {
          return 1 * t;
        });
      }
    }, {
      key: "set",
      value: function set(t, e) {
        if (_.isNull(e) || _.isUndefined(e)) this.remove(t);else {
          var _i24 = e + "";

          this.storage.setItem(t, _i24);
        }
      }
    }, {
      key: "setObject",
      value: function setObject(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        (_.isNull(e) || _.isUndefined(e)) && this.remove(t);
        var i = JSON.stringify(e);
        this.storage.setItem(t, i);
      }
    }, {
      key: "mergeObject",
      value: function mergeObject(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        var i = this.getObject(t);
        _.merge(i, e), this.setObject(t, i);
      }
    }, {
      key: "remove",
      value: function remove(t) {
        this.storage.removeItem(t);
      }
    }, {
      key: "clear",
      value: function clear() {
        this.storage.clear();
      }
    }]);

    return t;
  }();

  return {
    Storage: {
      session: new t(window.sessionStorage),
      local: new t(window.localStorage)
    }
  };
}(),
    Storage = _ref18.Storage,
    _ref19 = function () {
  var t = {
    genActionInvoking: function genActionInvoking(t) {
      var _ref87 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          e = _ref87.$com,
          _ref87$argContext = _ref87.argContext,
          i = _ref87$argContext === void 0 ? {} : _ref87$argContext,
          _ref87$wait = _ref87.wait,
          n = _ref87$wait === void 0 ? 0 : _ref87$wait;

      var s = function s(t) {
        return n > 0 ? _.debounce(t, n, {
          leading: !0
        }) : t;
      },
          r = function r(t) {
        return _.isFunction(t) ? t() : t;
      };

      if (_.isFunction(t)) return s(t);
      var a, o, l;

      if (_.isString(t)) {
        var _e32 = /^((global|commit|dispatch|root|main|\$\w+):|=>)([^()]+)(\((.*)\))?$/.exec(t);

        if (!_e32) throw Ti.Err.make("e.action.invalid : " + t, {
          action: t
        });
        a = _e32[2] || _e32[1], o = _e32[3], l = _e32[5];
      } else _.isPlainObject(t) && (a = t.mode, o = t.name, l = t.args);

      var h,
          c = Ti.S.joinArgs(l, [], function (t) {
        return Ti.S.toJsValue(t, {
          context: i
        });
      });

      if ("=>" == a) {
        var _i25 = _.get(window, o);

        if (!_.isFunction(_i25)) throw Ti.Err.make("e.action.invoke.NotFunc : " + t, {
          action: t
        });

        h = function h() {
          var t = r(e);

          _i25.apply(t, c);
        };
      } else h = "$emit" == a || "$notify" == a ? function () {
        var i = r(e);
        if (!i) throw Ti.Err.make("e.action.emit.NoCom : " + t, {
          action: t
        });
        i[a].apply(i, [o].concat(_toConsumableArray(c)));
      } : "$parent" == a ? function () {
        var i = r(e),
            n = i[o];
        if (!_.isFunction(n)) throw Ti.Err.make("e.action.call.NotFunc : " + t, {
          action: t
        });
        n.apply(i, c);
      } : function () {
        var t = r(e),
            i = Ti.App(t),
            n = i[a],
            s = _.concat(o, c);

        n.apply(i, s);
      };

      if (!_.isFunction(h)) throw Ti.Err.make("e.invalid.action : " + t, {
        action: t
      });
      return s(h);
    },
    getUniqueKey: function getUniqueKey(t) {
      var _ref88 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref88$sep = _ref88.sep,
          e = _ref88$sep === void 0 ? "+" : _ref88$sep,
          _ref88$mode = _ref88.mode,
          i = _ref88$mode === void 0 ? "upper" : _ref88$mode;

      var n = [];
      t.altKey && n.push("ALT"), t.ctrlKey && n.push("CTRL"), t.metaKey && n.push("META"), t.shiftKey && n.push("SHIFT");
      var s = Ti.S.toCase(t.key, i);
      return /^(ALT|CTRL|CONTROL|SHIFT|META)$/.test(s) || n.push(" " === s ? "SPACE" : s), n.join(e);
    },
    startListening: function startListening() {
      this.isListening || (window.addEventListener("keydown", function (e) {
        var i = t.getUniqueKey(e),
            n = Ti.App.topInstance();
        n && n.fireShortcut(i, e);
      }), this.isListening = !0);
    }
  };
  return {
    Shortcut: t
  };
}(),
    Shortcut = _ref19.Shortcut,
    _TiWebsocket = {
  TiWebsocket: {
    listenRemote: function listenRemote() {
      var _ref89 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
          _ref89$watchTo = _ref89.watchTo,
          t = _ref89$watchTo === void 0 ? null : _ref89$watchTo,
          _ref89$watched = _ref89.watched,
          e = _ref89$watched === void 0 ? _.identity : _ref89$watched,
          _ref89$received = _ref89.received,
          i = _ref89$received === void 0 ? _.identity : _ref89$received,
          _ref89$closed = _ref89.closed,
          n = _ref89$closed === void 0 ? _.identity : _ref89$closed,
          _ref89$error = _ref89.error,
          s = _ref89$error === void 0 ? _.identity : _ref89$error;

      var r = window.location.hostname,
          a = window.location.port,
          o = {
        "http:": "ws",
        "https:": "wss"
      }[window.location.protocol],
          l = [r];
      a > 80 && l.push(a);
      var h = "".concat(o, "://").concat(l.join(":"), "/websocket"),
          c = new WebSocket(h);
      return _.isPlainObject(t) && (c.onmessage = function (n) {
        var s = JSON.parse(n.data);

        if ("hi" == s.event) {
          var _e33 = JSON.stringify(t);

          this.send(_e33);
        } else "watched" == s.event ? e(s) : i(s);
      }), c.onclose = n, c.onerror = s, c;
    }
  }
},
    TiWebsocket = _TiWebsocket.TiWebsocket,
    _ref20 = function () {
  var t = {
    notNil: function notNil(t) {
      return !Ti.Util.isNil(t);
    },
    notEmpty: function notEmpty(t) {
      return !_.isEmpty(t);
    },
    notBlank: function notBlank(t) {
      return !Ti.S.isBlank(t);
    },
    isNil: function isNil(t) {
      return Ti.Util.isNil(t);
    },
    isEmpty: function isEmpty(t) {
      return _.isEmpty(t);
    },
    isBlank: function isBlank(t) {
      return Ti.S.isBlank(t);
    },
    isPlainObject: function isPlainObject(t) {
      return _.isPlainObject(t);
    },
    isBoolean: function isBoolean(t) {
      return _.isBoolean(t);
    },
    isTrue: function isTrue(t) {
      return !0 === t;
    },
    isFalse: function isFalse(t) {
      return !1 === t;
    },
    isTruthy: function isTruthy(t) {
      return !!t;
    },
    isFalsy: function isFalsy(t) {
      return !t;
    },
    isNumber: function isNumber(t) {
      return _.isNumber(t);
    },
    isString: function isString(t) {
      return _.isString(t);
    },
    isDate: function isDate(t) {
      return _.isDate(t);
    },
    inRange: function inRange(t) {
      var _ref90;

      for (var _len18 = arguments.length, e = new Array(_len18 > 1 ? _len18 - 1 : 0), _key18 = 1; _key18 < _len18; _key18++) {
        e[_key18 - 1] = arguments[_key18];
      }

      return (_ref90 = _).inRange.apply(_ref90, [t].concat(e));
    },
    isMatch: function isMatch(t, e) {
      return _.isMatch(t, e);
    },
    isEqual: function isEqual(t, e) {
      return _.isEqual(t, e);
    },
    isOf: function isOf(t) {
      for (var _len19 = arguments.length, e = new Array(_len19 > 1 ? _len19 - 1 : 0), _key19 = 1; _key19 < _len19; _key19++) {
        e[_key19 - 1] = arguments[_key19];
      }

      for (var _i26 = 0, _e34 = e; _i26 < _e34.length; _i26++) {
        var _i27 = _e34[_i26];
        if (_.isEqual(_i27, t)) return !0;
      }

      return !1;
    },
    matchRegex: function matchRegex(t, e) {
      return _.isRegExp(e) ? e.test(t) : new RegExp(e).test(t);
    }
  },
      e = {
    get: function get(e) {
      var _ref91;

      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
      var n = arguments.length > 2 ? arguments[2] : undefined;
      _.isFunction(e) && (e = e());

      var s = _.get(t, e);

      if (!_.isFunction(s)) throw "Invalid Validate: ".concat(e);
      var r;
      return r = _.isEmpty(i) ? s : (_ref91 = _).partialRight.apply(_ref91, [s].concat(_toConsumableArray(i))), n ? function (t) {
        return !r(t);
      } : r;
    },
    evalBy: function evalBy(e) {
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var n = !1;
      e.startsWith("!") && (n = !0, e = _.trim(e.substring(1)));
      var s = Ti.Util.genInvoking(e, {
        context: i,
        funcSet: t,
        partial: "right"
      });
      if (!_.isFunction(s)) throw "Invalid TiValidator: \"".concat(e, "\"");
      return n ? function (t) {
        return !s(t);
      } : s;
    },
    getBy: function getBy(t) {
      if (_.isBoolean(t)) return function () {
        return t;
      };
      if (_.isFunction(t)) return t;
      if (_.isString(t)) return e.evalBy(t);

      if (_.isPlainObject(t)) {
        var _i28 = t.name,
            _n10 = _.isUndefined(t.args) ? [] : [].concat(t.args),
            _s11 = !!t.not;

        return /^!/.test(_i28) && (_i28 = _i28.substring(1).trim(), _s11 = !0), e.get(_i28, _n10, _s11);
      }

      if (_.isArray(t) && t.length > 0) {
        var _i29 = t[0],
            _n11 = t.slice(1, t.length),
            _s12 = !1;

        return /^!/.test(_i29) && (_i29 = _i29.substring(1).trim(), _s12 = !0), e.get(_i29, _n11, _s12);
      }
    },
    checkBy: function checkBy(t, i) {
      var n = e.getBy(t);
      return !!_.isFunction(n) && !!n(i);
    },
    match: function match() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;
      if (!t || _.isEmpty(t)) return n;
      if (_.isFunction(i)) return !!i(t);
      if (_.isBoolean(i)) return !!i;

      if (_.isArray(i)) {
        var _iterator24 = _createForOfIteratorHelper(i),
            _step24;

        try {
          for (_iterator24.s(); !(_step24 = _iterator24.n()).done;) {
            var _e35 = _step24.value;
            if (Ti.Validate.match(t, _e35, n)) return !0;
          }
        } catch (err) {
          _iterator24.e(err);
        } finally {
          _iterator24.f();
        }

        return !1;
      }

      var s = _.keys(i);

      var _iterator25 = _createForOfIteratorHelper(s),
          _step25;

      try {
        for (_iterator25.s(); !(_step25 = _iterator25.n()).done;) {
          var _n12 = _step25.value;

          var _s13 = _.get(i, _n12),
              _r4 = _.get(t, _n12);

          if (!e.checkBy(_s13, _r4)) return !1;
        }
      } catch (err) {
        _iterator25.e(err);
      } finally {
        _iterator25.f();
      }

      return !0;
    },
    compile: function compile(t, i) {
      return function (n) {
        return e.match(n, t, i);
      };
    }
  };
  return {
    Validate: e
  };
}(),
    Validate = _ref20.Validate,
    _ref21 = function () {
  function t(i) {
    if (Ti.Util.isNil(i)) return new e();
    if (_.isBoolean(i)) return function (t) {
      var e = !!t;
      return function (t) {
        return !!t === e;
      };
    }(i);
    if (_.isNumber(i)) return function (t) {
      return function (e) {
        return e == t;
      };
    }(i);

    if (_.isArray(i)) {
      var _e36 = [];

      var _iterator26 = _createForOfIteratorHelper(i),
          _step26;

      try {
        for (_iterator26.s(); !(_step26 = _iterator26.n()).done;) {
          var _n13 = _step26.value;

          var _i31 = t(_n13);

          _e36.push(_i31);
        }
      } catch (err) {
        _iterator26.e(err);
      } finally {
        _iterator26.f();
      }

      return function () {
        for (var _len20 = arguments.length, t = new Array(_len20), _key20 = 0; _key20 < _len20; _key20++) {
          t[_key20] = arguments[_key20];
        }

        return function (e) {
          if (_.isEmpty(t)) return !1;

          var _iterator27 = _createForOfIteratorHelper(t),
              _step27;

          try {
            for (_iterator27.s(); !(_step27 = _iterator27.n()).done;) {
              var _i30 = _step27.value;
              if (_i30(e)) return !0;
            }
          } catch (err) {
            _iterator27.e(err);
          } finally {
            _iterator27.f();
          }

          return !1;
        };
      }.apply(void 0, _e36);
    }

    if (_.isPlainObject(i)) return function (e) {
      var i = [];
      return _.forEach(e, function (e, n) {
        var s = n.startsWith("!"),
            r = t(e);
        s && (n = n.substring(1).trim(), r = function (t) {
          return function (e) {
            return !t(e);
          };
        }(r)), i.push({
          key: n,
          m: r
        });
      }), function (t) {
        if (!t || !_.isPlainObject(t)) return !1;

        var _iterator28 = _createForOfIteratorHelper(i),
            _step28;

        try {
          for (_iterator28.s(); !(_step28 = _iterator28.n()).done;) {
            var _e37 = _step28.value;

            var _i32 = _e37.key,
                _n14 = _.get(t, _i32);

            if (!(0, _e37.m)(_n14)) return !1;
          }
        } catch (err) {
          _iterator28.e(err);
        } finally {
          _iterator28.f();
        }

        return !0;
      };
    }(i);
    if (_.isString(i)) return function (t) {
      if (Ti.Util.isNil(t)) return e();
      if ("" == t) return function (t) {
        return Ti.Util.isNil(t) || "" === t;
      };
      if (Ti.S.isBlank(t) || "[BLANK]" == t) return function (t) {
        return Ti.Util.isNil(t) || Ti.S.isBlank(t);
      };
      if (/^!?\^/.test(t)) return function (t) {
        var e = !1;
        t.startsWith("!") && (e = !0, t = t.substring(1).trim());
        var i = new RegExp(t);
        return function (t) {
          return Ti.Util.isNil(t) ? e : i.test(t) ? !e : e;
        };
      }(t);
      if (/\*/.test(t)) return function (t) {
        var e = !1;
        t.startsWith("!") && (e = !0, t = t.substring(1).trim());
        var i = "^" + t.replaceAll("*", ".*") + "$",
            n = new RegExp(i);
        return function (t) {
          return Ti.Util.isNil(t) ? e : n.test(t) ? !e : e;
        };
      }(t);
      return function (t) {
        var e = !1;
        t.startsWith("~~") && (e = !0, t = t.substring(2).toUpperCase());
        return function (i) {
          return Ti.Util.isNil(i) ? Ti.Util.isNil(t) : e ? t == i.toUpperCase() : t == i;
        };
      }(t);
    }(i);
    throw Ti.Err.make("e.match.unsupport", i);
  }

  function e() {
    return function (t) {
      return Ti.Util.isNil(t);
    };
  }

  return {
    AutoMatch: {
      parse: function parse(e) {
        return t(e);
      },
      test: function test(e, i) {
        return t(e)(i);
      }
    }
  };
}(),
    AutoMatch = _ref21.AutoMatch,
    _ref22 = function () {
  var TiTime = /*#__PURE__*/function () {
    function TiTime(t, e) {
      _classCallCheck(this, TiTime);

      this.hours = 0, this.minutes = 0, this.seconds = 0, this.milliseconds = 0, this.__cached = {}, this.update(t, e);
    }

    _createClass(TiTime, [{
      key: "clone",
      value: function clone() {
        return new TiTime(this);
      }
    }, {
      key: "setHours",
      value: function setHours() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
        this.__cached = {}, this.hours = _.clamp(t, 0, 23);
      }
    }, {
      key: "setMinutes",
      value: function setMinutes() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
        this.__cached = {}, this.minutes = _.clamp(t, 0, 59);
      }
    }, {
      key: "setSeconds",
      value: function setSeconds() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
        this.__cached = {}, this.seconds = _.clamp(t, 0, 59);
      }
    }, {
      key: "setMilliseconds",
      value: function setMilliseconds() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;
        this.__cached = {}, this.milliseconds = _.clamp(t, 0, 999);
      }
    }, {
      key: "setTimes",
      value: function setTimes() {
        var _ref92 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            t = _ref92.hours,
            e = _ref92.minutes,
            i = _ref92.seconds,
            n = _ref92.milliseconds;

        this.__cached = {}, this.hours = _.clamp(Ti.Util.fallback(t, this.hours), 0, 23), this.minutes = _.clamp(Ti.Util.fallback(e, this.minutes), 0, 59), this.seconds = _.clamp(Ti.Util.fallback(i, this.seconds), 0, 59), this.milliseconds = _.clamp(Ti.Util.fallback(n, this.milliseconds), 0, 999);
      }
    }, {
      key: "update",
      value: function update(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "ms";
        if (this.__cached = {}, _.isDate(t)) this.hours = t.getHours(), this.minutes = t.getMinutes(), this.seconds = t.getSeconds(), this.milliseconds = t.getMilliseconds();else if (t instanceof TiTime) this.hours = t.hours, this.minutes = t.minutes, this.seconds = t.seconds, this.milliseconds = t.milliseconds;else if (_.isNumber(t)) {
          var _i33 = {
            ms: function ms(t) {
              return Math.round(t);
            },
            s: function s(t) {
              return Math.round(1e3 * t);
            },
            min: function min(t) {
              return Math.round(1e3 * t * 60);
            },
            hr: function hr(t) {
              return Math.round(1e3 * t * 60 * 60);
            }
          }[e](t);

          _i33 = _.clamp(_i33, 0, 864e5);

          var _n15 = parseInt(_i33 / 1e3);

          this.milliseconds = _i33 - 1e3 * _n15, this.hours = parseInt(_n15 / 3600), _n15 -= 3600 * this.hours, this.minutes = parseInt(_n15 / 60), this.seconds = _n15 - 60 * this.minutes;
        } else if (_.isString(t)) {
          var _e38 = /^([0-9]{1,2}):?([0-9]{1,2})(:?([0-9]{1,2})([.,]([0-9]{1,3}))?)?$/.exec(t);

          _e38 && (_e38[3] ? _e38[5] ? (this.hours = _.clamp(parseInt(_e38[1]), 0, 23), this.minutes = _.clamp(parseInt(_e38[2]), 0, 59), this.seconds = _.clamp(parseInt(_e38[4]), 0, 59), this.milliseconds = _.clamp(parseInt(_e38[6]), 0, 999)) : (this.hours = _.clamp(parseInt(_e38[1]), 0, 23), this.minutes = _.clamp(parseInt(_e38[2]), 0, 59), this.seconds = _.clamp(parseInt(_e38[4]), 0, 59), this.milliseconds = 0) : (this.hours = _.clamp(parseInt(_e38[1]), 0, 23), this.minutes = _.clamp(parseInt(_e38[2]), 0, 59), this.seconds = 0, this.milliseconds = 0));
        }
        return this;
      }
    }, {
      key: "toString",
      value: function toString() {
        var _this14 = this;

        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "auto";
        "auto" == t ? t = this.milliseconds > 0 ? "HH:mm:ss.SSS" : this.seconds > 0 ? "HH:mm:ss" : "HH:mm" : "min" == t && (t = this.hours <= 0 ? "mm:ss" : "HH:mm:ss");
        var e,
            i = "",
            n = /a|HH?|KK?|hh?|kk?|mm?|ss?|S(SS)?/g,
            s = 0;

        for (; e = n.exec(t);) {
          var _r5 = e.index;
          _r5 > s && (i += t.substring(s, _r5)), s = n.lastIndex;
          i += {
            a: function a() {
              return _this14.value > 43200 ? "PM" : "AM";
            },
            H: function H() {
              return _this14.hours;
            },
            k: function k() {
              return _this14.hours + 1;
            },
            K: function K() {
              return _this14.hours % 12;
            },
            h: function h() {
              return _this14.hours % 12 + 1;
            },
            m: function m() {
              return _this14.minutes;
            },
            s: function s() {
              return _this14.seconds;
            },
            S: function S() {
              return _this14.milliseconds;
            },
            HH: function HH() {
              return _.padStart(_this14.hours, 2, "0");
            },
            kk: function kk() {
              return _.padStart(_this14.hours + 1, 2, "0");
            },
            KK: function KK() {
              return _.padStart(_this14.hours % 12, 2, "0");
            },
            hh: function hh() {
              return _.padStart(_this14.hours % 12 + 1, 2, "0");
            },
            mm: function mm() {
              return _.padStart(_this14.minutes, 2, "0");
            },
            ss: function ss() {
              return _.padStart(_this14.seconds, 2, "0");
            },
            SSS: function SSS() {
              return _.padStart(_this14.milliseconds, 3, "0");
            }
          }[e[0]]();
        }

        return s < t.length && (i += t.substring(s)), i;
      }
    }, {
      key: "value",
      get: function get() {
        if (!_.isNumber(this.__cached.value)) {
          var _t35 = 3600 * this.hours + 60 * this.minutes + this.seconds + Math.round(this.milliseconds / 1e3);

          this.__cached.value = _t35;
        }

        return this.__cached.value;
      }
    }, {
      key: "valueInMilliseconds",
      get: function get() {
        if (!_.isNumber(this.__cached.valueInMilliseconds)) {
          var _t36 = 36e5 * this.hours + 6e4 * this.minutes + 1e3 * this.seconds + this.milliseconds;

          this.__cached.valueInMilliseconds = _t36;
        }

        return this.__cached.valueInMilliseconds;
      }
    }]);

    return TiTime;
  }();

  var QUICK_COLOR_TABLE = {
    red: [255, 0, 0, 1],
    green: [0, 255, 0, 1],
    blue: [0, 0, 255, 1],
    yellow: [255, 255, 0, 1],
    black: [0, 0, 0, 1],
    white: [255, 255, 255, 1]
  };

  var TiColor = /*#__PURE__*/function () {
    function TiColor(t) {
      _classCallCheck(this, TiColor);

      this.red = 0, this.green = 0, this.blue = 0, this.alpha = 1, this.__cached = {}, this.update(t);
    }

    _createClass(TiColor, [{
      key: "clone",
      value: function clone() {
        return new TiColor([this.red, this.green, this.blue, this.alpha]);
      }
    }, {
      key: "setRGBA",
      value: function setRGBA() {
        var _ref93 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            t = _ref93.r,
            e = _ref93.g,
            i = _ref93.b,
            n = _ref93.a;

        this.__cached = {}, _.isNumber(t) && (this.red = _.clamp(t, 0, 255)), _.isNumber(e) && (this.green = _.clamp(e, 0, 255)), _.isNumber(i) && (this.blue = _.clamp(i, 0, 255)), _.isNumber(n) && (this.alpha = _.clamp(n, 0, 1));
      }
    }, {
      key: "update",
      value: function update(t) {
        if (this.__cached = {}, _.isString(t)) {
          var _e39 = QUICK_COLOR_TABLE[t.toLowerCase()];
          if (_e39) this.red = _e39[0], this.green = _e39[1], this.blue = _e39[2], this.alpha = _e39[3];else {
            var _e40,
                _i34 = t.replace(/[ \t\r\n]+/g, "").toUpperCase();

            (_e40 = /^#?([0-9A-F])([0-9A-F])([0-9A-F]);?$/.exec(_i34)) ? (this.red = parseInt(_e40[1] + _e40[1], 16), this.green = parseInt(_e40[2] + _e40[2], 16), this.blue = parseInt(_e40[3] + _e40[3], 16)) : (_e40 = /^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2});?$/.exec(_i34)) ? (this.red = parseInt(_e40[1], 16), this.green = parseInt(_e40[2], 16), this.blue = parseInt(_e40[3], 16)) : (_e40 = /^RGB\((\d+),(\d+),(\d+)\)$/.exec(_i34)) ? (this.red = parseInt(_e40[1], 10), this.green = parseInt(_e40[2], 10), this.blue = parseInt(_e40[3], 10)) : (_e40 = /^RGBA\((\d+),(\d+),(\d+),([\d.]+)\)$/.exec(_i34)) ? (this.red = parseInt(_e40[1], 10), this.green = parseInt(_e40[2], 10), this.blue = parseInt(_e40[3], 10), this.alpha = 1 * _e40[4]) : (_e40 = /^0[xX]([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2});?$/.exec(_i34)) && (this.alpha = parseInt(_e40[1], 16) / 255, this.red = parseInt(_e40[2], 16), this.green = parseInt(_e40[3], 16), this.blue = parseInt(_e40[4], 16));
          }
        } else if (_.isNumber(t)) {
          var _e41 = _.clamp(Math.round(t), 0, 255);

          this.red = _e41, this.green = _e41, this.blue = _e41, this.alpha = 1;
        } else _.isArray(t) && t.length >= 3 ? (this.red = _.clamp(Math.round(t[0]), 0, 255), this.green = _.clamp(Math.round(t[1]), 0, 255), this.blue = _.clamp(Math.round(t[2]), 0, 255), this.alpha = t.length > 3 ? t[3] : 1) : t instanceof TiColor && (this.red = t.red, this.green = t.green, this.blue = t.blue, this.alpha = t.alpha);

        return this;
      }
    }, {
      key: "light",
      value: function light() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10;
        this.red = _.clamp(this.red + t, 0, 255), this.green = _.clamp(this.green + t, 0, 255), this.blue = _.clamp(this.blue + t, 0, 255);
      }
    }, {
      key: "dark",
      value: function dark() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10;
        this.red = _.clamp(this.red - t, 0, 255), this.green = _.clamp(this.green - t, 0, 255), this.blue = _.clamp(this.blue - t, 0, 255);
      }
    }, {
      key: "between",
      value: function between(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : .5;

        var _ref94 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

        _objectDestructuringEmpty(_ref94);

        e = _.clamp(e, 0, 1);
        var i = t.red - this.red,
            n = t.green - this.green,
            s = t.blue - this.blue,
            r = t.alpha - this.alpha,
            a = this.red + i * e,
            o = this.green + n * e,
            l = this.blue + s * e,
            h = this.alpha + r * e;
        return new TiColor([_.clamp(Math.round(a), 0, 255), _.clamp(Math.round(o), 0, 255), _.clamp(Math.round(l), 0, 255), _.clamp(h, 0, 1)]);
      }
    }, {
      key: "adjustByHSL",
      value: function adjustByHSL() {
        var _ref95 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            _ref95$h = _ref95.h,
            t = _ref95$h === void 0 ? 0 : _ref95$h,
            _ref95$s = _ref95.s,
            e = _ref95$s === void 0 ? 0 : _ref95$s,
            _ref95$l = _ref95.l,
            i = _ref95$l === void 0 ? 0 : _ref95$l;

        var n = this.toHSL();
        return n.h = _.clamp(n.h + t, 0, 1), n.s = _.clamp(n.s + e, 0, 1), n.l = _.clamp(n.l + i, 0, 1), this.fromHSL(n);
      }
    }, {
      key: "toHSL",
      value: function toHSL() {
        var t = this.red,
            e = this.green,
            i = this.blue;
        t /= 255, e /= 255, i /= 255;
        var n,
            s,
            r = Math.max(t, e, i),
            a = Math.min(t, e, i),
            o = (r + a) / 2;
        if (r === a) n = s = 0;else {
          var l = r - a;

          switch (s = o > .5 ? l / (2 - r - a) : l / (r + a), r) {
            case t:
              n = (e - i) / l + (e < i ? 6 : 0);
              break;

            case e:
              n = (i - t) / l + 2;
              break;

            case i:
              n = (t - e) / l + 4;
          }

          n /= 6;
        }
        return {
          h: n,
          s: s,
          l: o
        };
      }
    }, {
      key: "fromHSL",
      value: function fromHSL() {
        var _ref96 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            t = _ref96.h,
            e = _ref96.s,
            i = _ref96.l;

        var n,
            s,
            r,
            a = function a(t, e, i) {
          return i < 0 && (i += 1), i > 1 && (i -= 1), i < 1 / 6 ? t + 6 * (e - t) * i : i < .5 ? e : i < 2 / 3 ? t + (e - t) * (2 / 3 - i) * 6 : t;
        };

        if (0 === e) n = s = r = i;else {
          var _o3 = i < .5 ? i * (1 + e) : i + e - i * e,
              _l2 = 2 * i - _o3;

          n = a(_l2, _o3, t + 1 / 3), s = a(_l2, _o3, t), r = a(_l2, _o3, t - 1 / 3);
        }
        return this.red = Math.round(255 * n), this.green = Math.round(255 * s), this.blue = Math.round(255 * r), this;
      }
    }, {
      key: "toString",
      value: function toString() {
        return 1 == this.alpha ? this.hex : this.rgba;
      }
    }, {
      key: "hex",
      get: function get() {
        if (!this.__cached.hex) {
          var _t37 = ["#"];
          _t37.push(_.padStart(this.red.toString(16).toUpperCase(), 2, "0")), _t37.push(_.padStart(this.green.toString(16).toUpperCase(), 2, "0")), _t37.push(_.padStart(this.blue.toString(16).toUpperCase(), 2, "0")), this.__cached.hex = _t37.join("");
        }

        return this.__cached.hex;
      }
    }, {
      key: "rgb",
      get: function get() {
        if (!this.__cached.rgb) {
          var _t38 = [this.red, this.green, this.blue];
          this.__cached.rgb = "RGB(".concat(_t38.join(","), ")");
        }

        return this.__cached.rgb;
      }
    }, {
      key: "rgba",
      get: function get() {
        if (!this.__cached.rgba) {
          return "RGBA(".concat([this.red, this.green, this.blue, this.alpha].join(","), ")");
        }

        return this.__cached.rgba;
      }
    }]);

    return TiColor;
  }();

  var TiTypes = {
    toStr: function toStr(t, e, i) {
      if (_.isFunction(e)) return e(t) || i;
      if (Ti.Util.isNil(t)) return Ti.Util.fallback(i, null);

      if (_.isNumber(t)) {
        if (_.isArray(e)) return Ti.Util.fallback(_.nth(e, t), t);
        if (_.isString(e)) return Ti.S.renderVars(t, e);

        var _i35 = "" + t;

        return _.isPlainObject(e) ? e[_i35] : _i35;
      }

      if (_.isString(t)) return _.isPlainObject(e) ? Ti.Util.getOrPick(e, t) : _.isString(e) ? Ti.S.renderVars(t, e) : t;
      if (_.isArray(t)) return t.join(e || ",");
      if (_.isBoolean(t)) return (e || ["false", "true"])[1 * t];
      if (_.isDate(t)) return TiTypes.formatDateTime(t, e);
      if (t instanceof TiTime) return t.toString(e);
      if (t instanceof TiColor) return t.toString();

      if (_.isPlainObject(t)) {
        if (!Ti.S.isBlank(e)) {
          if (_.isString(e)) return Ti.S.renderVars(t, e);
          _.isPlainObject(e) && (t = Ti.Util.translate(t, e));
        }

        return JSON.stringify(t, null, e);
      }

      return "" + t;
    },
    toNumber: function toNumber(t) {
      if (_.isBoolean(t)) return t ? 1 : 0;
      if (_.isDate(t)) return t.getTime();
      var e = 1 * t;
      return isNaN(e) ? NaN : e;
    },
    toInteger: function toInteger(t) {
      var _ref97 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref97$mode = _ref97.mode,
          e = _ref97$mode === void 0 ? "int" : _ref97$mode,
          _ref97$dft = _ref97.dft,
          i = _ref97$dft === void 0 ? NaN : _ref97$dft,
          _ref97$range = _ref97.range,
          n = _ref97$range === void 0 ? [] : _ref97$range,
          _ref97$border = _ref97.border,
          s = _ref97$border === void 0 ? [!0, !0] : _ref97$border;

      if (_.isBoolean(t)) return t ? 1 : 0;
      if (_.isDate(t)) return t.getTime();
      var r = {
        round: function round(t) {
          return Math.round(t);
        },
        ceil: function ceil(t) {
          return Math.ceil(t);
        },
        floor: function floor(t) {
          return Math.floor(t);
        },
        "int": function int(t) {
          return parseInt(t);
        }
      }[e](t);

      if (isNaN(r) && (r = i), _.isArray(n) && 2 == n.length) {
        _.isArray(s) || (s = [s, s]);

        var _s14 = s,
            _s15 = _slicedToArray(_s14, 2),
            _t39 = _s15[0],
            _e42 = _s15[1],
            _n16 = _slicedToArray(n, 2),
            _i36 = _n16[0],
            _a4 = _n16[1];

        if (isNaN(r)) return Math.round((_i36 + _a4) / 2);

        if (!_.isNull(_i36)) {
          if (_t39 && r < _i36) return _i36;
          if (!_t39 && r <= _i36) return _i36 + 1;
        }

        if (!_.isNull(_a4)) {
          if (_e42 && r > _a4) return _a4;
          if (!_e42 && r >= _a4) return _a4 - 1;
        }
      }

      return r;
    },
    toFloat: function toFloat(t) {
      var _ref98 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref98$precision = _ref98.precision,
          e = _ref98$precision === void 0 ? 2 : _ref98$precision,
          _ref98$dft = _ref98.dft,
          i = _ref98$dft === void 0 ? NaN : _ref98$dft;

      var n = 1 * t;
      if (isNaN(n)) return i;

      if (e >= 0) {
        var _t40 = Math.pow(10, e);

        return Math.round(n * _t40) / _t40;
      }

      return n;
    },
    toPercent: function toPercent(t) {
      var _ref99 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref99$fixed = _ref99.fixed,
          e = _ref99$fixed === void 0 ? 2 : _ref99$fixed,
          _ref99$auto = _ref99.auto,
          i = _ref99$auto === void 0 ? !0 : _ref99$auto;

      return Ti.S.toPercent(t, {
        fixed: e,
        auto: i
      });
    },
    toBoolean: function toBoolean(t) {
      return 0 != t && !_.isNull(t) && !_.isUndefined(t) && !/^(no|off|false)$/i.test(t);
    },
    toBoolStr: function toBoolStr(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "No";
      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "Yes";
      return t ? i : e;
    },
    toObject: function toObject(t, e) {
      var i = t;
      return _.isPlainObject(t) && _.isPlainObject(e) ? Ti.Util.translate(i, e) : _.isArray(t) ? Ti.S.toObject(t, e) : _.isString(t) ? ((/^\{.*\}$/.test(t) || /^\[.*\]$/.test(t)) && (i = JSON.parse(t)), Ti.S.toObject(t, e)) : i;
    },
    toObjByPair: function toObjByPair() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      var _ref100 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref100$nameBy = _ref100.nameBy,
          e = _ref100$nameBy === void 0 ? "name" : _ref100$nameBy,
          _ref100$valueBy = _ref100.valueBy,
          i = _ref100$valueBy === void 0 ? "value" : _ref100$valueBy,
          _ref100$dft = _ref100.dft,
          n = _ref100$dft === void 0 ? {} : _ref100$dft;

      var s = t[e],
          r = t[i],
          a = _.assign({}, n);

      if (_.isString(s)) a[s] = r;else if (_.isArray(s)) {
        var _iterator29 = _createForOfIteratorHelper(s),
            _step29;

        try {
          for (_iterator29.s(); !(_step29 = _iterator29.n()).done;) {
            var _t41 = _step29.value;
            a[_t41] = r[_t41];
          }
        } catch (err) {
          _iterator29.e(err);
        } finally {
          _iterator29.f();
        }
      }
      return a;
    },
    toArray: function toArray(t) {
      var _ref101 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref101$sep = _ref101.sep,
          e = _ref101$sep === void 0 ? /[ ,;\/\r\n]+/ : _ref101$sep;

      if (Ti.Util.isNil(t)) return t;
      if (_.isArray(t)) return t;

      if (_.isString(t)) {
        if (_.isRegExp(e)) {
          var _i37 = t.split(e);

          for (var _t42 = 0; _t42 < _i37.length; _t42++) {
            _i37[_t42] = _.trim(_i37[_t42]);
          }

          return _.without(_i37, void 0, null, "");
        }

        return [t];
      }
    },
    toDate: function toDate(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      if (_.isNull(t) || _.isUndefined(t)) return e;

      if (_.isArray(t)) {
        var _e43 = [];
        return _.forEach(t, function (t) {
          _e43.push(Ti.DateTime.parse(t));
        }), _e43;
      }

      return Ti.DateTime.parse(t);
    },
    toTime: function toTime(t) {
      var _ref102 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          e = _ref102.dft,
          i = _ref102.unit;

      return _.isNull(t) || _.isUndefined(t) ? e : new TiTime(t, i);
    },
    toColor: function toColor(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new TiColor();
      return _.isNull(t) || _.isUndefined(t) ? e : t instanceof TiColor ? t : new TiColor(t);
    },
    toAMS: function toAMS(t) {
      var e = Ti.DateTime.parse(t);
      return _.isDate(e) ? e.getTime() : null;
    },
    toJson: function toJson(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "  ";
      return JSON.stringify(t, null, e);
    },
    safeParseJson: function safeParseJson(str, dft) {
      if (Ti.Util.isNil(str)) return null;
      if (!_.isString(str)) return str;

      try {
        return JSON.parse(str);
      } catch (E) {
        var json = str.replace(/(function|=>)/g, "Function");

        try {
          return eval("(" + json + ")");
        } catch (t) {}
      }

      return dft;
    },
    formatTime: function formatTime(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "ms";
      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "auto";
      if (_.isUndefined(t) || _.isNull(t)) return "";

      if (_.isArray(t)) {
        var _e44 = [];

        var _iterator30 = _createForOfIteratorHelper(t),
            _step30;

        try {
          for (_iterator30.s(); !(_step30 = _iterator30.n()).done;) {
            var _n17 = _step30.value;

            _e44.push(TiTypes.formatTime(_n17, i));
          }
        } catch (err) {
          _iterator30.e(err);
        } finally {
          _iterator30.f();
        }

        return _e44;
      }

      return t instanceof TiTime || (t = new TiTime(t, e)), t.toString(i);
    },
    formatDate: function formatDate(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "yyyy-MM-dd";
      return Ti.DateTime.format(t, e);
    },
    formatDateTime: function formatDateTime(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "yyyy-MM-dd HH:mm:ss";
      return Ti.DateTime.format(t, e);
    },
    toAjaxReturn: function toAjaxReturn(t, e) {
      var i = t;
      if (_.isString(t)) try {
        i = JSON.parse(t);
      } catch (t) {
        return {
          ok: !1,
          errCode: "e.invalid.json_format",
          data: e
        };
      }
      return _.isBoolean(i.ok) ? i : {
        ok: !0,
        data: i
      };
    },
    Time: TiTime,
    Color: TiColor,
    getFuncByType: function getFuncByType() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "String";
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "transformer";
      return _.get({
        String: {
          transformer: "toStr",
          serializer: "toStr"
        },
        Number: {
          transformer: "toNumber",
          serializer: "toNumber"
        },
        Integer: {
          transformer: "toInteger",
          serializer: "toInteger"
        },
        Float: {
          transformer: "toFloat",
          serializer: "toFloat"
        },
        Boolean: {
          transformer: "toBoolean",
          serializer: "toBoolean"
        },
        Object: {
          transformer: "toObject",
          serializer: "toObject"
        },
        Array: {
          transformer: "toArray",
          serializer: "toArray"
        },
        DateTime: {
          transformer: "toDate",
          serializer: "formatDateTime"
        },
        AMS: {
          transformer: "toDate",
          serializer: "toAMS"
        },
        Time: {
          transformer: "toTime",
          serializer: "formatTime"
        },
        Date: {
          transformer: "toDate",
          serializer: "formatDate"
        },
        Color: {
          transformer: "toColor",
          serializer: "toStr"
        }
      }, "".concat(t, ".").concat(e));
    },
    getFuncBy: function getFuncBy() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = arguments.length > 1 ? arguments[1] : undefined;
      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : TiTypes;
      var n = TiTypes.evalFunc(t[e], i);
      if (_.isFunction(n)) return n;
      if (!n && t.type && (n = TiTypes.getFuncByType(t.type, e)), _.isString(n)) return _.get(i, n);

      if (_.isPlainObject(n) && n.name) {
        var _ref103;

        var _t43 = _.get(i, n.name);

        if (!_.isFunction(_t43)) return;
        return _.isArray(n.args) && n.args.length > 0 ? (_ref103 = _).partialRight.apply(_ref103, [_t43].concat(_toConsumableArray(n.args))) : _.isUndefined(n.args) || _.isNull(n.args) ? _t43 : _.partialRight(_t43, n.args);
      }
    },
    getFunc: function getFunc() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = arguments.length > 1 ? arguments[1] : undefined;
      return TiTypes.getFuncBy(t, e);
    },
    evalFunc: function evalFunc(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : TiTypes;
      if (_.isFunction(t)) return t;
      if (_.isString(t)) return _.get(e, t);

      if (_.isPlainObject(t) && t.name) {
        var _ref104;

        var _i38 = _.get(e, t.name);

        if (!_.isFunction(_i38)) return;
        return _.isArray(t.args) && t.args.length > 0 ? (_ref104 = _).partialRight.apply(_ref104, [_i38].concat(_toConsumableArray(t.args))) : _.isUndefined(t.args) || _.isNull(t.args) ? _i38 : _.partialRight(_i38, t.args);
      }
    },
    getJsType: function getJsType(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "Object";
      return _.isUndefined(t) ? e : _.isNull(t) ? "Object" : _.isNaN(t) ? "Number" : _.isNumber(t) ? parseInt(t) == t ? "Integer" : "Number" : _.isBoolean(t) ? "Boolean" : _.isString(t) ? "String" : _.isArray(t) ? "Array" : "Object";
    }
  };
  return {
    TiTime: TiTime,
    TiColor: TiColor,
    Types: TiTypes
  };
}(),
    Types = _ref22.Types,
    _ref23 = function () {
  var t = _objectSpread({}, function () {
    var t = {
      getLinkName: function getLinkName(e) {
        var i = e.lastIndexOf("/"),
            n = e.lastIndexOf(":"),
            s = Math.max(i, n),
            r = s >= 0 ? e.substring(s + 1) : e;
        return t.getMajorName(r);
      },
      getFileName: function getFileName(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
        if (!t) return e;
        var i = t.lastIndexOf("/");
        return i >= 0 ? t.substring(i + 1) : t;
      },
      getMajorName: function getMajorName(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
        if (!t) return e;

        for (var i = t.length, n = 0, s = i, r = s - 1; r > 0; r--) {
          if (s == i && "." == t[r] && (s = r), "/" == t[r] || "\\" == t[r]) {
            n = r + 1;
            break;
          }
        }

        return t.substring(n, s);
      },
      getSuffixName: function getSuffixName(t, e) {
        if (!t) return "";
        var i = t.lastIndexOf("."),
            n = t.lastIndexOf("/");
        if (-1 == i || i < n) return "";
        var s = t.substring(i + 1);
        return e ? s.toLowerCase() : s;
      },
      getSuffix: function getSuffix(t, e) {
        if (!t) return "";
        var i = t.lastIndexOf("."),
            n = t.lastIndexOf("/");
        if (-1 == i || i < n) return "";
        var s = t.substring(i);
        return e ? s.toLowerCase() : s;
      },
      appendPath: function appendPath() {
        var e = [];

        for (var _len21 = arguments.length, t = new Array(_len21), _key21 = 0; _key21 < _len21; _key21++) {
          t[_key21] = arguments[_key21];
        }

        for (var _i39 = 0, _t44 = t; _i39 < _t44.length; _i39++) {
          var _i40 = _t44[_i39];
          if (_.isEmpty(_i40)) continue;

          var _t45 = /\/*$/.exec(_i40);

          _t45 && (_i40 = _i40.substring(0, _t45.index)), e.length > 0 && !/^\//.test(_i40) && e.push("/"), e.push(_i40);
        }

        return e.join("");
      },
      getParentPath: function getParentPath() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";
        if (!t || t.endsWith("/")) return t;
        var e = t.lastIndexOf("/");
        return e < 0 ? "" : t.substring(0, e + 1);
      },
      getRelativePath: function getRelativePath() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
        var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : ".";
        if (_.isEqual(t, e)) return i;

        var n = t.endsWith("/"),
            s = e.endsWith("/"),
            r = _.without(t.split("/"), ""),
            a = _.without(e.split("/"), ""),
            o = Math.min(r.length, a.length),
            l = 0;

        for (; l < o; l++) {
          if (r[l] != a[l]) break;
        }

        var h = [],
            c = r.length;
        n || c--;

        for (var _t46 = l; _t46 < c; _t46++) {
          h.push("..");
        }

        for (var _t47 = l; _t47 < a.length; _t47++) {
          h.push(a[_t47]);
        }

        return s && h.push(""), h.join("/");
      },
      explainEventName: function explainEventName(t) {
        var e = {},
            i = /^(([^>]+)>)?(.+)$/.exec(t);
        return i && (e.block = _.trim(i[2]), e.event = _.trim(i[3])), e;
      },
      parseHref: function parseHref() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";
        var e = /^((https?):)?((\/\/([^/:]+))(:(\d+))?)?([^?]*)(\?([^#]*))?(#(.*))?$/.exec(t);

        if (e) {
          var _i41 = {
            href: t,
            protocol: e[2],
            host: e[5],
            port: 1 * (e[7] || 80),
            path: e[8],
            search: e[9],
            query: e[10],
            hash: e[11],
            anchor: e[12],
            toString: function toString() {
              var t = "".concat(this.protocol, "://").concat(this.host).concat(this.path);

              if (!_.isEmpty(this.params)) {
                var _e45 = [];
                _.forEach(this.params, function (t, i) {
                  _e45.push("".concat(i, "=").concat(t));
                }), t += "?" + _e45.join("&");
              }

              return this.hash && (t += this.hash), t;
            }
          };

          if (_i41.query) {
            var _t48 = {},
                _e46 = _i41.query.split("&");

            var _iterator31 = _createForOfIteratorHelper(_e46),
                _step31;

            try {
              for (_iterator31.s(); !(_step31 = _iterator31.n()).done;) {
                var _i42 = _step31.value;

                var _e47 = _i42.indexOf("=");

                if (_e47 > 0) {
                  var _n18 = _i42.substring(0, _e47),
                      _s16 = _i42.substring(_e47 + 1);

                  _t48[_n18] = decodeURIComponent(_s16);
                } else _t48[_i42] = !0;
              }
            } catch (err) {
              _iterator31.e(err);
            } finally {
              _iterator31.f();
            }

            _i41.params = _t48;
          }

          return _i41;
        }

        return {
          path: t
        };
      }
    };
    return t;
  }(), {}, function () {
    var t = /*#__PURE__*/function () {
      function t() {
        var _ref105 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            _t49 = _ref105.url,
            e = _ref105.params,
            i = _ref105.anchor;

        _classCallCheck(this, t);

        this.url = _t49, this.params = e, this.anchor = i, this.__S = null, this.set({
          url: _t49,
          params: e
        });
      }

      _createClass(t, [{
        key: "set",
        value: function set() {
          var _ref106 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
              _ref106$url = _ref106.url,
              t = _ref106$url === void 0 ? "" : _ref106$url,
              _ref106$params = _ref106.params,
              e = _ref106$params === void 0 ? {} : _ref106$params,
              i = _ref106.anchor;

          return this.url = t, this.params = e, this.anchor = i, this.__S = null, this;
        }
      }, {
        key: "valueOf",
        value: function valueOf() {
          return this.toString();
        }
      }, {
        key: "toString",
        value: function toString() {
          if (!this.__S) {
            var _t50 = [this.url],
                _e48 = [];
            _.forEach(this.params, function (t, i) {
              _e48.push("".concat(i, "=").concat(t));
            }), _e48.length > 0 && _t50.push(_e48.join("&"));

            var _i43 = _t50.join("?");

            this.anchor && (/^#/.test(this.anchor) ? _i43 += this.anchor : _i43 += "#" + this.anchor), this.__S = _i43;
          }

          return this.__S;
        }
      }]);

      return t;
    }();

    return {
      Link: function Link() {
        var _ref107 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            e = _ref107.url,
            i = _ref107.params,
            n = _ref107.anchor;

        return new t({
          url: e,
          params: i,
          anchor: n
        });
      }
    };
  }(), {
    merge: function merge() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      for (var _len22 = arguments.length, i = new Array(_len22 > 1 ? _len22 - 1 : 0), _key22 = 1; _key22 < _len22; _key22++) {
        i[_key22 - 1] = arguments[_key22];
      }

      return t.mergeWith.apply(t, [void 0, e].concat(i));
    },
    mergeWith: function mergeWith() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _.identity;
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      for (var _len23 = arguments.length, n = new Array(_len23 > 2 ? _len23 - 2 : 0), _key23 = 2; _key23 < _len23; _key23++) {
        n[_key23 - 2] = arguments[_key23];
      }

      var s = _.flattenDeep(n);

      var _iterator32 = _createForOfIteratorHelper(s),
          _step32;

      try {
        for (_iterator32.s(); !(_step32 = _iterator32.n()).done;) {
          var _n19 = _step32.value;
          if (!_n19) continue;

          var _s17 = e(_n19);

          _.isArray(_s17) ? t.merge.apply(t, [i].concat(_toConsumableArray(_s17))) : _.isFunction(_s17) ? i[_s17.name] = _s17 : _.isPlainObject(_s17) && _.merge(i, _s17);
        }
      } catch (err) {
        _iterator32.e(err);
      } finally {
        _iterator32.f();
      }

      return i;
    },
    deepMergeObj: function deepMergeObj() {
      var _ref108;

      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      for (var _len24 = arguments.length, e = new Array(_len24 > 1 ? _len24 - 1 : 0), _key24 = 1; _key24 < _len24; _key24++) {
        e[_key24 - 1] = arguments[_key24];
      }

      return (_ref108 = _).mergeWith.apply(_ref108, [t].concat(e, [function (t, e) {
        if (_.isArray(t) || _.isArray(e)) return e;
      }]));
    },
    grouping: function grouping() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var e = arguments.length > 1 ? arguments[1] : undefined;

      var _ref109 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
          _ref109$titles = _ref109.titles,
          i = _ref109$titles === void 0 ? [] : _ref109$titles,
          _ref109$otherTitle = _ref109.otherTitle,
          n = _ref109$otherTitle === void 0 ? {
        value: "Others",
        text: "Others"
      } : _ref109$otherTitle,
          _ref109$asList = _ref109.asList,
          s = _ref109$asList === void 0 ? !1 : _ref109$asList;

      var r = {},
          a = [];

      _.forEach(i, function (t) {
        t.text && !Ti.Util.isNil(t.value) && (a[t.value] = t);
      });

      var o = [];
      return _.forEach(t, function (t) {
        var i = _.get(t, e);

        if (i) {
          var _e49 = a[i] || {
            text: i,
            value: i
          },
              _n20 = r[i];

          _n20 || (_n20 = _objectSpread({}, _e49, {
            list: []
          }), r[i] = _n20), _n20.list.push(t);
        } else o.push(t);
      }), _.isEmpty(o) || (r[n.value] = _objectSpread({}, n, {
        list: o
      })), s ? _.values(r) : r;
    },
    insertToArray: function insertToArray() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;

      for (var _len25 = arguments.length, i = new Array(_len25 > 2 ? _len25 - 2 : 0), _key25 = 2; _key25 < _len25; _key25++) {
        i[_key25 - 2] = arguments[_key25];
      }

      if (!_.isArray(t) || _.isEmpty(i)) return -1;
      if (_.isEmpty(t)) return t.push.apply(t, i), 0;
      var n = Ti.Num.scrollIndex(e, t.length + 1);
      if (0 == n) t.unshift.apply(t, i);else if (t.length == n) t.push.apply(t, i);else {
        var _e50 = i.length;

        for (var _i44 = t.length - 1; _i44 >= n; _i44--) {
          t[_i44 + _e50] = t[_i44];
        }

        for (var _s18 = 0; _s18 < _e50; _s18++) {
          t[n + _s18] = i[_s18];
        }
      }
      return n;
    },
    appendToObject: function appendToObject() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
      var n = {};
      return _.forEach(t, function (t, s) {
        n[s] = t, e == s && _.assign(n, i);
      }), n;
    },
    walk: function walk() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      var _ref110 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref110$root = _ref110.root,
          e = _ref110$root === void 0 ? _.identity : _ref110$root,
          _ref110$all = _ref110.all,
          i = _ref110$all === void 0 ? _.identity : _ref110$all,
          _ref110$leaf = _ref110.leaf,
          n = _ref110$leaf === void 0 ? _.identity : _ref110$leaf,
          _ref110$node = _ref110.node,
          s = _ref110$node === void 0 ? _.identity : _ref110$node;

      var r = function r(t) {
        var a = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];

        var o = _.isArray(t),
            l = _.isPlainObject(t);

        if (i(t, a), o || l ? _.isEmpty(a) ? e(t, a) : s(t, a) : n(t, a), o) for (var _e51 = 0; _e51 < t.length; _e51++) {
          var _i45 = t[_e51],
              _n21 = a.concat(_e51);

          r(_i45, _n21);
        } else if (l) {
          var _e52 = _.keys(t);

          var _iterator33 = _createForOfIteratorHelper(_e52),
              _step33;

          try {
            for (_iterator33.s(); !(_step33 = _iterator33.n()).done;) {
              var _i46 = _step33.value;

              var _e53 = t[_i46],
                  _n22 = a.concat(_i46);

              r(_e53, _n22);
            }
          } catch (err) {
            _iterator33.e(err);
          } finally {
            _iterator33.f();
          }
        }
      };

      r(t);
    },
    inset: function inset() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _.identity;
      var i = [];

      var _iterator34 = _createForOfIteratorHelper(t),
          _step34;

      try {
        for (_iterator34.s(); !(_step34 = _iterator34.n()).done;) {
          var _n23 = _step34.value;

          var _t51 = e(_n23);

          if (_.isArray(_t51) && !_.isEmpty(_t51)) {
            var _iterator35 = _createForOfIteratorHelper(_t51),
                _step35;

            try {
              for (_iterator35.s(); !(_step35 = _iterator35.n()).done;) {
                var _e54 = _step35.value;
                i.push(_e54);
              }
            } catch (err) {
              _iterator35.e(err);
            } finally {
              _iterator35.f();
            }
          }

          _.isUndefined(_t51) || i.push(_t51);
        }
      } catch (err) {
        _iterator34.e(err);
      } finally {
        _iterator34.f();
      }

      return i;
    },
    explainObj: function explainObj() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = arguments.length > 1 ? arguments[1] : undefined;

      var _ref111 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
          _ref111$evalFunc = _ref111.evalFunc,
          i = _ref111$evalFunc === void 0 ? !1 : _ref111$evalFunc,
          _ref111$iteratee = _ref111.iteratee,
          n = _ref111$iteratee === void 0 ? _.identity : _ref111$iteratee;

      var s = function s(e) {
        var r = e;

        if (_.isString(r)) {
          var _e55 = /^:(:*(=|==|!=|=>>?|->)(.+))$/.exec(r);

          if (_e55) return n(_e55[1]);

          var _i47, _s19, _a5;

          if ((_e55 = /^(==|!=|=>>?|->)(.+)$/.exec(r)) ? (_i47 = _e55[1], _s19 = _.trim(_e55[2])) : (_e55 = /^(=)([^?]+)(\?(.*))?$/.exec(r)) && (_i47 = _e55[1], _s19 = _.trim(_e55[2]), _a5 = _e55[4]), _i47) {
            Ti.Util.isNil(_a5) || (_a5 = _.trim(_a5));
            var _e56 = {
              "==": function (_2) {
                function _(_x14) {
                  return _2.apply(this, arguments);
                }

                _.toString = function () {
                  return _2.toString();
                };

                return _;
              }(function (e) {
                return !!_.get(t, e);
              }),
              "!=": function (_3) {
                function _(_x15) {
                  return _3.apply(this, arguments);
                }

                _.toString = function () {
                  return _3.toString();
                };

                return _;
              }(function (e) {
                return !_.get(t, e);
              }),
              "=": function (_4) {
                function _(_x16, _x17) {
                  return _4.apply(this, arguments);
                }

                _.toString = function () {
                  return _4.toString();
                };

                return _;
              }(function (e, i) {
                if (".." == e) return t;
                var n = Ti.Util.getOrPick(t, e);
                return Ti.Util.isNil(n) && !_.isUndefined(i) ? i : n;
              }),
              "=>>": function _(e) {
                return Ti.Util.genInvoking(e, {
                  context: t,
                  partial: "right"
                })();
              },
              "=>": function _(e) {
                return Ti.Util.genInvoking(e, {
                  context: t,
                  partial: "left"
                })();
              },
              "->": function (_5) {
                function _(_x18) {
                  return _5.apply(this, arguments);
                }

                _.toString = function () {
                  return _5.toString();
                };

                return _;
              }(function (e) {
                var i = /^(([\w\d_.]+)\?\?)?(.+)$/.exec(e),
                    n = i[2],
                    s = i[3];
                if (!n || !Ti.Util.isNil(_.get(t, n))) return Ti.S.renderBy(s, t);
              })
            }[_i47];
            if (_.isFunction(_e56)) return _e56(_s19, _a5);
            throw "invalid dynamic value: " + r;
          }

          return n(r);
        }

        if (_.isFunction(r)) {
          if (i) {
            var _e57 = r(t);

            return n(_e57);
          }

          return r;
        }

        if (_.isArray(r)) {
          var _t52 = [];

          var _iterator36 = _createForOfIteratorHelper(r),
              _step36;

          try {
            for (_iterator36.s(); !(_step36 = _iterator36.n()).done;) {
              var _e58 = _step36.value;

              var _i48 = s(_e58);

              _t52.push(n(_i48));
            }
          } catch (err) {
            _iterator36.e(err);
          } finally {
            _iterator36.f();
          }

          return _t52;
        }

        if (_.isPlainObject(r)) {
          var _t53 = {};
          return _.forEach(r, function (e, i) {
            var r = s(e),
                a = n(r);
            "..." == i ? _.assign(_t53, a) : /^\.{3,}$/.test(i) ? _t53[i.substring(1)] = a : _t53[i] = a;
          }), _t53;
        }

        return n(e);
      };

      return s(e);
    },
    explainObjs: function explainObjs() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var n = arguments.length > 2 ? arguments[2] : undefined;

      if (_.isArray(e)) {
        var _s20 = [];

        var _iterator37 = _createForOfIteratorHelper(e),
            _step37;

        try {
          for (_iterator37.s(); !(_step37 = _iterator37.n()).done;) {
            var _r6 = _step37.value;

            var _e59 = t.explainObj(_r6, i, n);

            _s20.push(_e59);
          }
        } catch (err) {
          _iterator37.e(err);
        } finally {
          _iterator37.f();
        }

        return _s20;
      }

      return t.explainObj(e, i, n);
    },
    genObj: function genObj() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      return _.partial(_.cloneDeep, t);
    },
    groupCall: function groupCall() {
      for (var _len26 = arguments.length, t = new Array(_len26), _key26 = 0; _key26 < _len26; _key26++) {
        t[_key26] = arguments[_key26];
      }

      var e = _.flattenDeep(t).filter(function (t) {
        return _.isFunction(t);
      });

      if (0 != e.length) return 1 == e.length ? e[0] : function () {
        for (var _len27 = arguments.length, t = new Array(_len27), _key27 = 0; _key27 < _len27; _key27++) {
          t[_key27] = arguments[_key27];
        }

        var _iterator38 = _createForOfIteratorHelper(e),
            _step38;

        try {
          for (_iterator38.s(); !(_step38 = _iterator38.n()).done;) {
            var _i49 = _step38.value;

            _i49.apply(this, t);
          }
        } catch (err) {
          _iterator38.e(err);
        } finally {
          _iterator38.f();
        }
      };
    },
    pushValue: function pushValue(t, e, i) {
      var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
      var s = _.get(t, e) || [];
      n ? t[e] = _.concat(s, i || []) : _.set(t, e, _.concat(s, i || []));
    },
    pushValueBefore: function pushValueBefore(t, e, i) {
      var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
      var s = _.get(t, e) || [];
      n ? t[e] = _.concat(i || [], s) : _.set(t, e, _.concat(i || [], s));
    },
    pushUniqValue: function pushUniqValue(t, e, i) {
      var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
      var s = _.get(t, e) || [];
      n ? t[e] = _.uniq(_.concat(s, i || [])) : _.set(t, e, _.uniq(_.concat(s, i || [])));
    },
    pushUniqValueBefore: function pushUniqValueBefore(t, e, i) {
      var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
      var s = _.get(t, e) || [];
      n ? t[e] = _.uniq(_.concat(i || [], s)) : _.set(t, e, _.uniq(_.concat(i || [], s)));
    },
    setTo: function setTo() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = arguments.length > 1 ? arguments[1] : undefined;
      var i = arguments.length > 2 ? arguments[2] : undefined;
      var n = arguments.length > 3 ? arguments[3] : undefined;
      _.isString(e) && !_.isUndefined(i) ? t[e] = _.isNull(i) ? n : i : _.isPlainObject(e) && (n = i, _.forOwn(e, function (e, i) {
        _.isUndefined(e) || (t[i] = _.isNull(e) ? n : e);
      }));
    },
    nth: function nth() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      var n = t.length;
      if (n <= 0) return i;
      return t[Ti.Num.scrollIndex(e, n)];
    },
    anyKey: function anyKey(e, i) {
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "-";
      if (t.isNil(e)) return e;
      var s = [];
      return i && s.push(i), _.isArray(e) || _.isPlainObject(e) ? (_.forEach(e, function (t) {
        return s.push(t);
      }), s.join("-")) : (s.push(e), s.join(n));
    },
    translate: function translate() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _.identity;
      if (_.isEmpty(e) || _.isEmpty(i)) return _.cloneDeep(e);

      if (_.isArray(e)) {
        var _s21 = [];

        for (var _r7 = 0; _r7 < e.length; _r7++) {
          var _a6 = e[_r7],
              _o4 = t.translate(_a6, i, n);

          _s21.push(_o4);
        }

        return _s21;
      }

      if (_.isString(i)) {
        var _t54 = i.split(/[:;]/g),
            _e60 = {};

        var _iterator39 = _createForOfIteratorHelper(_t54),
            _step39;

        try {
          for (_iterator39.s(); !(_step39 = _iterator39.n()).done;) {
            var _i50 = _step39.value;
            _i50 = _.trim(_i50);

            var _t55 = /^([^=]+)=(.+)$/.exec(_i50);

            _t55 && (_e60[_t55[1]] = _t55[2]);
          }
        } catch (err) {
          _iterator39.e(err);
        } finally {
          _iterator39.f();
        }

        i = _e60;
      }

      if (_.isString(e)) return _.get(i, e);
      var s = {};
      return _.forEach(i, function (i, r) {
        var a;
        a = ".." == i ? e : t.getOrPick(e, i), a = n(a), _.set(s, r, a);
      }), s;
    },
    pureCloneDeep: function pureCloneDeep(e) {
      if (_.isArray(e)) {
        var _i51 = [];
        return _.forEach(e, function (e, n) {
          _.isUndefined(e) || _.isFunction(e) || (_i51[n] = t.pureCloneDeep(e));
        }), _i51;
      }

      if (_.isPlainObject(e)) {
        var _i52 = {};
        return _.forEach(e, function (e, n) {
          _.isUndefined(e) || _.isFunction(e) || (_i52[n] = t.pureCloneDeep(e));
        }), _i52;
      }

      return _.cloneDeep(e);
    },
    setKey: function setKey() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = arguments.length > 1 ? arguments[1] : undefined;
      var i = arguments.length > 2 ? arguments[2] : undefined;

      var n = function n(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
        var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
        var s = arguments.length > 3 ? arguments[3] : undefined;
        if (i >= e.length) return t;

        if (_.isArray(t)) {
          var _r8 = [],
              _a7 = parseInt(e[i]);

          for (var _o5 = 0; _o5 < t.length; _o5++) {
            if (_o5 == _a7) {
              var _a8 = n(t[_o5], e, i + 1, s);

              _r8.push(_a8);
            } else _r8.push(t[_o5]);
          }

          return _r8;
        }

        if (_.isPlainObject(t)) {
          var _r9 = {},
              _a9 = _.keys(t);

          if (e.length == i + 1) {
            var _n24 = e[i];

            var _iterator40 = _createForOfIteratorHelper(_a9),
                _step40;

            try {
              for (_iterator40.s(); !(_step40 = _iterator40.n()).done;) {
                var _e61 = _step40.value;
                var _i53 = t[_e61];
                _n24 == _e61 ? _r9[s] = _i53 : _r9[_e61] = _i53;
              }
            } catch (err) {
              _iterator40.e(err);
            } finally {
              _iterator40.f();
            }
          } else {
            var _iterator41 = _createForOfIteratorHelper(_a9),
                _step41;

            try {
              for (_iterator41.s(); !(_step41 = _iterator41.n()).done;) {
                var _o6 = _step41.value;

                var _a10 = t[_o6],
                    _l3 = n(_a10, e, i + 1, s);

                _r9[_o6] = _l3;
              }
            } catch (err) {
              _iterator41.e(err);
            } finally {
              _iterator41.f();
            }
          }

          return _r9;
        }

        return t;
      };

      return _.isString(e) && (e = e.split(".")), n(t, e, 0, i);
    },
    getOrPick: function getOrPick(t, e, i) {
      if (_.isArray(e)) return Ti.Util.fallback(_.pick(t, e), i);
      if (_.isFunction(e)) return Ti.Util.fallback(e(t), i);

      if (_.isString(e)) {
        var _n25 = e.split("|");

        if (_n25.length > 1) return Ti.Util.fallback(Ti.Util.getFallbackNil(t, _n25), i);
      }

      return Ti.Util.fallback(_.get(t, e), i);
    },
    getOrPickNoBlank: function getOrPickNoBlank(t, e, i) {
      if (_.isArray(e)) return Ti.Util.fallback(_.pick(t, e), i);
      if (_.isFunction(e)) return Ti.Util.fallback(e(t), i);

      if (_.isString(e)) {
        var _n26 = e.split("|");

        if (_n26.length > 1) return Ti.Util.fallback(Ti.Util.getFallbackBlank(t, _n26), i);
      }

      return Ti.Util.fallback(_.get(t, e), i);
    },
    truthyKeys: function truthyKeys() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = [];
      return _.forEach(t, function (t, i) {
        t && e.push(i);
      }), e;
    },
    getFallback: function getFallback(t) {
      for (var _len28 = arguments.length, e = new Array(_len28 > 1 ? _len28 - 1 : 0), _key28 = 1; _key28 < _len28; _key28++) {
        e[_key28 - 1] = arguments[_key28];
      }

      var i = _.flattenDeep(e);

      var _iterator42 = _createForOfIteratorHelper(i),
          _step42;

      try {
        for (_iterator42.s(); !(_step42 = _iterator42.n()).done;) {
          var _e62 = _step42.value;

          if (_e62) {
            var _i54 = _.get(t, _e62);

            if (!_.isUndefined(_i54)) return _i54;
          }
        }
      } catch (err) {
        _iterator42.e(err);
      } finally {
        _iterator42.f();
      }
    },
    getFallbackNil: function getFallbackNil(e) {
      for (var _len29 = arguments.length, i = new Array(_len29 > 1 ? _len29 - 1 : 0), _key29 = 1; _key29 < _len29; _key29++) {
        i[_key29 - 1] = arguments[_key29];
      }

      var n = _.flattenDeep(i);

      var _iterator43 = _createForOfIteratorHelper(n),
          _step43;

      try {
        for (_iterator43.s(); !(_step43 = _iterator43.n()).done;) {
          var _i55 = _step43.value;

          if (_i55) {
            var _n27 = _.get(e, _i55);

            if (!t.isNil(_n27)) return _n27;
          }
        }
      } catch (err) {
        _iterator43.e(err);
      } finally {
        _iterator43.f();
      }
    },
    getFallbackEmpty: function getFallbackEmpty(t) {
      for (var _len30 = arguments.length, e = new Array(_len30 > 1 ? _len30 - 1 : 0), _key30 = 1; _key30 < _len30; _key30++) {
        e[_key30 - 1] = arguments[_key30];
      }

      var i = _.flattenDeep(e);

      var _iterator44 = _createForOfIteratorHelper(i),
          _step44;

      try {
        for (_iterator44.s(); !(_step44 = _iterator44.n()).done;) {
          var _e63 = _step44.value;

          if (_e63) {
            var _i56 = _.get(t, _e63);

            if (!_.isEmpty(_i56)) return _i56;
          }
        }
      } catch (err) {
        _iterator44.e(err);
      } finally {
        _iterator44.f();
      }
    },
    getFallbackBlank: function getFallbackBlank(t) {
      for (var _len31 = arguments.length, e = new Array(_len31 > 1 ? _len31 - 1 : 0), _key31 = 1; _key31 < _len31; _key31++) {
        e[_key31 - 1] = arguments[_key31];
      }

      var i = _.flattenDeep(e);

      var _iterator45 = _createForOfIteratorHelper(i),
          _step45;

      try {
        for (_iterator45.s(); !(_step45 = _iterator45.n()).done;) {
          var _e64 = _step45.value;

          if (_e64) {
            var _i57 = _.get(t, _e64);

            if (!Ti.Util.isBlank(_i57)) return _i57;
          }
        }
      } catch (err) {
        _iterator45.e(err);
      } finally {
        _iterator45.f();
      }
    },
    getFallbackNaN: function getFallbackNaN(t) {
      for (var _len32 = arguments.length, e = new Array(_len32 > 1 ? _len32 - 1 : 0), _key32 = 1; _key32 < _len32; _key32++) {
        e[_key32 - 1] = arguments[_key32];
      }

      var i = _.flattenDeep(e);

      var _iterator46 = _createForOfIteratorHelper(i),
          _step46;

      try {
        for (_iterator46.s(); !(_step46 = _iterator46.n()).done;) {
          var _e65 = _step46.value;

          if (_e65) {
            var _i58 = _.get(t, _e65);

            if (!isNaN(_i58)) return _i58;
          }
        }
      } catch (err) {
        _iterator46.e(err);
      } finally {
        _iterator46.f();
      }
    },
    fallback: function fallback() {
      for (var _len33 = arguments.length, t = new Array(_len33), _key33 = 0; _key33 < _len33; _key33++) {
        t[_key33] = arguments[_key33];
      }

      for (var _i59 = 0, _t56 = t; _i59 < _t56.length; _i59++) {
        var _e66 = _t56[_i59];
        if (!_.isUndefined(_e66)) return _e66;
      }
    },
    fallbackNil: function fallbackNil() {
      for (var _len34 = arguments.length, e = new Array(_len34), _key34 = 0; _key34 < _len34; _key34++) {
        e[_key34] = arguments[_key34];
      }

      for (var _i60 = 0, _e67 = e; _i60 < _e67.length; _i60++) {
        var _i61 = _e67[_i60];
        if (!t.isNil(_i61)) return _i61;
      }
    },
    fallbackEmpty: function fallbackEmpty() {
      for (var _len35 = arguments.length, t = new Array(_len35), _key35 = 0; _key35 < _len35; _key35++) {
        t[_key35] = arguments[_key35];
      }

      for (var _i62 = 0, _t57 = t; _i62 < _t57.length; _i62++) {
        var _e68 = _t57[_i62];
        if (!_.isEmpty(_e68)) return _e68;
      }
    },
    fallbackBlank: function fallbackBlank() {
      for (var _len36 = arguments.length, t = new Array(_len36), _key36 = 0; _key36 < _len36; _key36++) {
        t[_key36] = arguments[_key36];
      }

      for (var _i63 = 0, _t58 = t; _i63 < _t58.length; _i63++) {
        var _e69 = _t58[_i63];
        if (!Ti.S.isBlank(_e69)) return _e69;
      }
    },
    fallbackNaN: function fallbackNaN() {
      for (var _len37 = arguments.length, t = new Array(_len37), _key37 = 0; _key37 < _len37; _key37++) {
        t[_key37] = arguments[_key37];
      }

      for (var _i64 = 0, _t59 = t; _i64 < _t59.length; _i64++) {
        var _e70 = _t59[_i64];
        if (!isNaN(_e70)) return _e70;
      }
    },
    isNil: function isNil(t) {
      return _.isUndefined(t) || _.isNull(t);
    },
    isBlank: function isBlank(t) {
      return _.isUndefined(t) || _.isNull(t) || "" === t || /^[ \t]*$/.test(t);
    },
    geset: function geset() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = arguments.length > 1 ? arguments[1] : undefined;
      var i = arguments.length > 2 ? arguments[2] : undefined;
      return _.isPlainObject(e) ? (_.assign(t, e), t) : _.isArray(e) ? _.pick(t, e) : _.isUndefined(i) ? _.isUndefined(e) ? t : t[e] : (t[e] = i, t);
    },
    invoke: function invoke() {
      var _arguments = arguments,
          _this15 = this;

      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee26() {
        var t, e, i, n, s, _t60;

        return regeneratorRuntime.wrap(function _callee26$(_context26) {
          while (1) {
            switch (_context26.prev = _context26.next) {
              case 0:
                t = _arguments.length > 0 && _arguments[0] !== undefined ? _arguments[0] : {};
                e = _arguments.length > 1 ? _arguments[1] : undefined;
                i = _arguments.length > 2 && _arguments[2] !== undefined ? _arguments[2] : [];
                n = _arguments.length > 3 && _arguments[3] !== undefined ? _arguments[3] : _this15;
                s = _.get(t, e);

                if (!_.isFunction(s)) {
                  _context26.next = 9;
                  break;
                }

                _t60 = _.concat(i);
                _context26.next = 9;
                return s.apply(n, _t60);

              case 9:
              case "end":
                return _context26.stop();
            }
          }
        }, _callee26);
      }))();
    },
    first: function first() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      return _.isArray(t) ? _.first(t) : t;
    },
    last: function last() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      return _.isArray(t) ? _.last(t) : t;
    },
    genGetter: function genGetter(e) {
      var _ref112 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          i = _ref112.indexPrefix,
          _ref112$dftKeys = _ref112.dftKeys,
          n = _ref112$dftKeys === void 0 ? [] : _ref112$dftKeys,
          _ref112$context = _ref112.context,
          s = _ref112$context === void 0 ? {} : _ref112$context,
          _ref112$funcSet = _ref112.funcSet,
          r = _ref112$funcSet === void 0 ? window : _ref112$funcSet,
          _ref112$partial = _ref112.partial,
          a = _ref112$partial === void 0 ? "right" : _ref112$partial;

      if (_.isFunction(e)) return function (t) {
        return e(t);
      };

      if (e) {
        if (i) return function (t, n) {
          return Ti.Util.fallbackNil(Ti.Types.toStr(_.get(t, e)), "".concat(i).concat(n));
        };

        var _n28 = /^'(.+)'$/.exec(e);

        if (_n28) return function () {
          return _n28[1];
        };

        if (_n28 = /^=>(.+)$/.exec(e)) {
          var _e71 = _n28[1];
          return t.genInvoking(_e71, {
            context: s,
            funcSet: r,
            partial: a
          });
        }

        return function (t) {
          return Ti.Util.getOrPick(t, e);
        };
      }

      return _.isEmpty(n) ? void 0 : function (t) {
        var _Ti$Util3;

        return (_Ti$Util3 = Ti.Util).getFallback.apply(_Ti$Util3, [t].concat(_toConsumableArray(n)));
      };
    },
    genInvoking: function genInvoking(t) {
      var _ref113 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref113$context = _ref113.context,
          e = _ref113$context === void 0 ? {} : _ref113$context,
          _ref113$funcSet = _ref113.funcSet,
          i = _ref113$funcSet === void 0 ? window : _ref113$funcSet,
          _ref113$partial = _ref113.partial,
          n = _ref113$partial === void 0 ? "left" : _ref113$partial;

      if (_.isFunction(t)) return t;
      var s, r;
      if (t.name && !_.isUndefined(t.args)) s = t.name, r = _.concat(t.args);else {
        var _e72 = /^([^()]+)(\((.+)\))?$/.exec(t);

        _e72 && (s = _.trim(_e72[1]), r = _.trim(_e72[3]));
      }

      var a = _.get(i, s);

      if (_.isFunction(a)) {
        var _t61 = Ti.S.joinArgs(r, [], function (t) {
          return Ti.S.toJsValue(t, {
            context: e
          });
        });

        return _.isEmpty(_t61) ? a : "right" == n ? function (e) {
          var i = _.isUndefined(e) ? _t61 : _.concat([e], _t61);
          return a.apply(this, i);
        } : "left" == n ? function (e) {
          var i = _.concat(_t61, [e]);

          return a.apply(this, i);
        } : function () {
          return a.apply(void 0, _toConsumableArray(_t61));
        };
      }

      return function () {
        return t;
      };
    },
    genItemMatcher: function genItemMatcher(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
      return _.isFunction(t) ? function (e, i) {
        return t(e, i);
      } : _.isString(t) ? e ? function (e, i) {
        return _.indexOf(Ti.Util.getOrPick(e, t), i) >= 0;
      } : function (e, i) {
        return _.isEqual(Ti.Util.getOrPick(e, t), i);
      } : _.isArray(t) ? function (i, n) {
        var _iterator47 = _createForOfIteratorHelper(t),
            _step47;

        try {
          for (_iterator47.s(); !(_step47 = _iterator47.n()).done;) {
            var _s22 = _step47.value;

            var _t62 = Ti.Util.getOrPick(i, _s22);

            if (e) {
              if (_.indexOf(_t62, n) >= 0) return !0;
            } else if (_.isEqual(_t62, n)) return !0;
          }
        } catch (err) {
          _iterator47.e(err);
        } finally {
          _iterator47.f();
        }

        return !1;
      } : function (t, e) {
        return !1;
      };
    },
    genItemValueGetter: function genItemValueGetter(t, e) {
      return _.isFunction(t) ? function (i) {
        return t(i, e);
      } : _.isString(t) ? function (i) {
        return Ti.Util.getOrPick(i, t, e);
      } : function () {
        return e;
      };
    },
    genRowIdGetter: function genRowIdGetter(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ["id", "value"];
      return _.isFunction(t) ? function (e, i) {
        return Ti.Types.toStr(t(e, i));
      } : _.isString(t) ? function (e, i) {
        return Ti.Util.fallbackNil(Ti.Types.toStr(_.get(e, t)), "Row-".concat(i));
      } : _.isEmpty(e) ? void 0 : function (t) {
        var _Ti$Util4;

        return (_Ti$Util4 = Ti.Util).getFallback.apply(_Ti$Util4, [t].concat(_toConsumableArray(e)));
      };
    },
    genRowDataGetter: function genRowDataGetter(t) {
      return _.isFunction(t) ? function (e) {
        return t(e);
      } : _.isString(t) ? function (e) {
        return _.get(e, t);
      } : _.isObject(t) ? function (e) {
        return Ti.Util.translate(e, t);
      } : function (t) {
        return t;
      };
    }
  });

  return {
    Util: t
  };
}(),
    Util = _ref23.Util,
    _ref24 = function () {
  var t = {
    path: function path() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      return Ti.Util.isNil(t) ? [] : _.isArray(t) ? t : _.map(_.without(t.split("/"), ""), function (t) {
        return /^\d+$/.test(t) ? 1 * t : t;
      });
    },
    walkDeep: function walkDeep(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {
        return {};
      };
      var i = {
        index: 0,
        node: t,
        path: [],
        depth: 0,
        parent: null,
        ancestors: []
      };

      var n = function n(t) {
        var _$concat = _.concat(e(t) || [null, !1]),
            _$concat2 = _slicedToArray(_$concat, 2),
            i = _$concat2[0],
            s = _$concat2[1];

        if (s) return [i, s];

        if (_.isArray(t.node.children)) {
          var _e73 = {
            depth: t.depth + 1,
            parent: t,
            ancestors: _.concat(t.ancestors, t)
          },
              _r10 = 0;

          var _iterator48 = _createForOfIteratorHelper(t.node.children),
              _step48;

          try {
            for (_iterator48.s(); !(_step48 = _iterator48.n()).done;) {
              var _n29, _n30;

              var _a11 = _step48.value;
              if ((_n29 = n(_objectSpread({
                index: _r10,
                node: _a11,
                path: _.concat(t.path, _a11.name)
              }, _e73)), _n30 = _slicedToArray(_n29, 2), i = _n30[0], s = _n30[1], _n29), _r10++, s) return [i, s];
            }
          } catch (err) {
            _iterator48.e(err);
          } finally {
            _iterator48.f();
          }
        }

        return [];
      };

      var _n31 = n(i),
          _n32 = _slicedToArray(_n31, 1),
          s = _n32[0];

      return s;
    },
    walkBreadth: function walkBreadth(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {
        return {};
      };

      var i = {
        index: 0,
        node: t,
        path: [],
        depth: 0,
        parent: null,
        ancestors: []
      },
          _$concat3 = _.concat(e(i) || [null, !1]),
          _$concat4 = _slicedToArray(_$concat3, 2),
          n = _$concat4[0],
          s = _$concat4[1];

      if (s) return [n, s];

      var r = function r(t) {
        if (_.isArray(t.node.children)) {
          var _i65 = [],
              _n33 = {
            depth: t.depth + 1,
            parent: t,
            ancestors: _.concat(t.ancestors, t)
          },
              _s23 = 0;

          var _iterator49 = _createForOfIteratorHelper(t.node.children),
              _step49;

          try {
            for (_iterator49.s(); !(_step49 = _iterator49.n()).done;) {
              var _r13 = _step49.value;

              var _a12 = _objectSpread({
                index: _s23,
                node: _r13,
                path: _.concat(t.path, _r13.name || _s23)
              }, _n33),
                  _$concat5 = _.concat(e(_a12) || [null, !1]),
                  _$concat6 = _slicedToArray(_$concat5, 2),
                  _o7 = _$concat6[0],
                  _l4 = _$concat6[1];

              if (_s23++, _l4) return [_o7, _l4];

              _i65.push(_a12);
            }
          } catch (err) {
            _iterator49.e(err);
          } finally {
            _iterator49.f();
          }

          for (var _i67 = 0, _i66 = _i65; _i67 < _i66.length; _i67++) {
            var _t63 = _i66[_i67];

            var _r11 = r(_t63),
                _r12 = _slicedToArray(_r11, 2),
                _e74 = _r12[0],
                _i68 = _r12[1];

            if (_i68) return [_e74, _i68];
          }
        }

        return [];
      };

      var _r14 = r(i),
          _r15 = _slicedToArray(_r14, 1),
          a = _r15[0];

      return a;
    },
    getById: function getById(e, i) {
      if (!Ti.Util.isNil(i)) return t.walkDeep(e, function (t) {
        if (t.node.id == i) return [t, !0];
      });
    },
    getByPath: function getByPath(e) {
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
      var n = t.path(i);
      return t.walkDeep(e, function (t) {
        if (_.isEqual(n, t.path)) return [t, !0];
      });
    },
    getNodeById: function getNodeById(e, i) {
      var n = t.getById(e, i);
      if (n) return n.node;
    },
    getNodeByPath: function getNodeByPath(e) {
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
      var n = t.getByPath(e, i);
      if (n) return n.node;
    },
    insertBefore: function insertBefore(t, e) {
      if (!t || _.isUndefined(e)) return;
      var i, n;
      t.parent ? (n = t.parent.node.children, i = t.index) : (n = t.node.children, i = 0);
      return {
        hierarchy: t,
        children: n,
        item: e,
        index: Ti.Util.insertToArray(n, i, e)
      };
    },
    insertAfter: function insertAfter(t, e) {
      if (!t || _.isUndefined(e)) return;
      var i, n;
      t.parent ? (n = t.parent.node.children, i = t.index + 1) : (n = t.node.children, i = -1);
      return {
        hierarchy: t,
        children: n,
        item: e,
        index: Ti.Util.insertToArray(n, i, e)
      };
    },
    prepend: function prepend(t, e) {
      if (!t || _.isUndefined(e)) return;
      var i, n;
      _.isArray(t.node.children) ? (n = t.node.children, i = 0) : (n = t.parent.node.children, i = t.index + 1);
      return {
        hierarchy: t,
        children: n,
        item: e,
        index: Ti.Util.insertToArray(n, i, e)
      };
    },
    append: function append(t, e) {
      if (!t || _.isUndefined(e)) return;
      var i, n;
      _.isArray(t.node.children) ? (n = t.node.children, i = 0) : (n = t.parent.node.children, i = t.index);
      return {
        hierarchy: t,
        children: n,
        item: e,
        index: Ti.Util.insertToArray(n, i, e)
      };
    },
    remove: function remove(t) {
      if (!t || !t.parent) return;
      var e = t.index;
      return _.remove(t.parent.node.children, function (t, i) {
        return i == e;
      }).length > 0;
    },
    nextCandidate: function nextCandidate(t) {
      if (!t || !t.parent) return;
      var e,
          i,
          n = t.parent.node.children;
      return n.length <= 1 ? (e = t.parent.node, i = _.isEmpty(t.parent.path) ? null : t.parent.path.slice(0, t.parent.path.length - 1)) : t.index + 1 < n.length ? (e = n[t.index + 1], i = t.parent.path) : (e = n[t.index - 1], i = t.parent.path), {
        node: e,
        path: i
      };
    }
  };
  return {
    Trees: t
  };
}(),
    Trees = _ref24.Trees,
    _ref25 = function () {
  var t = /*#__PURE__*/function () {
    function t() {
      _classCallCheck(this, t);

      this.reset();
    }

    _createClass(t, [{
      key: "reset",
      value: function reset() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
        return this.scrolling = [], this.resizing = [], this;
      }
    }, {
      key: "watch",
      value: function watch(t) {
        var _ref114 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
            e = _ref114.scroll,
            i = _ref114.resize;

        _.isFunction(e) && this.scrolling.push({
          context: t,
          handler: e
        }), _.isFunction(i) && this.resizing.push({
          context: t,
          handler: i
        });
      }
    }, {
      key: "unwatch",
      value: function unwatch(t) {
        _.remove(this.scrolling, function (_ref115) {
          var e = _ref115.context;
          return e === t;
        }), _.remove(this.resizing, function (_ref116) {
          var e = _ref116.context;
          return e === t;
        });
      }
    }, {
      key: "startListening",
      value: function startListening() {
        var t = this;
        this.isListening || (window.addEventListener("resize", function (e) {
          var _iterator50 = _createForOfIteratorHelper(t.resizing),
              _step50;

          try {
            for (_iterator50.s(); !(_step50 = _iterator50.n()).done;) {
              var _i69 = _step50.value;

              _i69.handler.apply(_i69.context, [e]);
            }
          } catch (err) {
            _iterator50.e(err);
          } finally {
            _iterator50.f();
          }
        }), window.addEventListener("scroll", function (e) {
          var _iterator51 = _createForOfIteratorHelper(t.scrolling),
              _step51;

          try {
            for (_iterator51.s(); !(_step51 = _iterator51.n()).done;) {
              var _i70 = _step51.value;

              _i70.handler.apply(_i70.context, [e]);
            }
          } catch (err) {
            _iterator51.e(err);
          } finally {
            _iterator51.f();
          }
        }), this.isListening = !0);
      }
    }]);

    return t;
  }();

  return {
    Viewport: new t()
  };
}(),
    Viewport = _ref25.Viewport,
    _ref26 = function () {
  var t = {
    explainNavigation: function explainNavigation() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "/";
      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : ".html";
      var s = [];

      var _iterator52 = _createForOfIteratorHelper(e),
          _step52;

      try {
        for (_iterator52.s(); !(_step52 = _iterator52.n()).done;) {
          var _r16 = _step52.value;

          var _e75 = _objectSpread({
            type: "page"
          }, _.pick(_r16, "icon", "title", "type", "value", "href", "target", "params"));

          if ("page" == _r16.type) {
            if (!_e75.href && _r16.value) {
              var _s24 = _r16.value;
              _s24.endsWith(n) || (_s24 += n);

              var _a13 = Ti.Util.appendPath(i, _s24);

              _e75.value = _s24, _e75.href = t.joinHrefParams(_a13, _r16.params, _r16.anchor);
            }

            _e75.highlightBy = t.evalHighlightBy(_r16.highlightBy || _e75.value, _r16), !_e75.target && _r16.newTab && (_e75.target = "_blank");
          } else "href" == _e75.type ? (_e75.highlightBy = function () {
            return !1;
          }, _e75.href || (_e75.href = t.joinHrefParams(_r16.value, _r16.params, _r16.anchor)), !_e75.target && _r16.newTab && (_e75.target = "_blank")) : _e75.highlightBy = function () {
            return !1;
          };

          _.isArray(_r16.items) && (_e75.items = t.explainNavigation(_r16.items, i, n)), s.push(_e75);
        }
      } catch (err) {
        _iterator52.e(err);
      } finally {
        _iterator52.f();
      }

      return s;
    },
    evalHighlightBy: function evalHighlightBy() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      if (_.isFunction(t)) return t;

      if (_.isString(t)) {
        if (t.startsWith("^") || t.endsWith("$")) {
          var _e76 = new RegExp(t);

          return _.bind(function (t) {
            return this.test(t);
          }, _e76);
        }

        return function (i, n) {
          return !!_.isEqual(i, t) && !(!_.isEmpty(e.params) && n && !_.isEqual(e.params, n));
        };
      }

      return _.isRegExp(t) ? _.bind(function (t) {
        return this.test(t);
      }, t) : _.isBoolean(t) ? function () {
        return t;
      } : function () {
        return !1;
      };
    },
    joinHrefParams: function joinHrefParams(t, e, i) {
      if (!t) return null;
      var n;
      return _.isEmpty(e) || (n = [], _.forEach(e, function (t, e) {
        if (!Ti.Util.isNil(t)) {
          var _i71 = encodeURIComponent(t);

          n.push("".concat(e, "=").concat(_i71));
        }
      }), n.length > 0 && (t = t + "?" + n.join("&"))), i && (i.startsWith("#") ? t += i : t += "#" + i), t;
    },
    evalFee: function evalFee() {
      var _ref117 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
          _ref117$price = _ref117.price,
          t = _ref117$price === void 0 ? 0 : _ref117$price,
          _ref117$amount = _ref117.amount,
          e = _ref117$amount === void 0 ? 1 : _ref117$amount;

      return t * e;
    },
    getCurrencyPrefix: function getCurrencyPrefix(t) {
      return {
        RMB: "",
        USD: "$",
        EUR: "",
        GBP: ""
      }[_.upperCase(t)];
    },
    feeText: function feeText() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "RMB";

      var _ref118 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
          _ref118$autoSuffix = _ref118.autoSuffix,
          n = _ref118$autoSuffix === void 0 ? !0 : _ref118$autoSuffix;

      var s = _.upperCase(i),
          r = t.getCurrencyPrefix(s),
          a = [];

      return r && a.push(r), a.push(e), n && r || a.push(s), a.join("");
    },
    evalObjPreviewSrc: function evalObjPreviewSrc(t) {
      var _ref119 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          e = _ref119.previewKey,
          i = _ref119.previewObj,
          _ref119$sha1Path = _ref119.sha1Path,
          n = _ref119$sha1Path === void 0 ? 4 : _ref119$sha1Path,
          s = _ref119.apiTmpl,
          r = _ref119.cdnTmpl,
          a = _ref119.dftSrc;

      if (_.isString(t)) return t;

      if (r) {
        var _e77 = ".." == i ? t : _.get(t, i);

        if (_e77 && _e77.sha1) return _e77 = _.cloneDeep(_e77), _e77.sha1Path = n > 0 ? _e77.sha1.substring(0, n) + "/" + _e77.sha1.substring(n) : _e77.sha1, Ti.S.renderBy(r, _e77);
      }

      if (s) {
        if (_.get(t, e)) return Ti.S.renderBy(s, t);
      }

      return a;
    },
    getSSRData: function getSSRData(t) {
      var _ref120 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref120$root = _ref120.root,
          e = _ref120$root === void 0 ? document.documentElement : _ref120$root,
          _ref120$as = _ref120.as,
          i = _ref120$as === void 0 ? "text" : _ref120$as,
          _ref120$trimed = _ref120.trimed,
          n = _ref120$trimed === void 0 ? !0 : _ref120$trimed,
          _ref120$autoRemove = _ref120.autoRemove,
          s = _ref120$autoRemove === void 0 ? !0 : _ref120$autoRemove,
          r = _ref120.ssrFinger,
          a = _ref120.dft;

      var o = ".wn-ssr-data[data-ssr-key=\"".concat(t, "\"]"),
          l = Ti.Dom.find(o, e);

      if (_.isElement(l)) {
        if (!Ti.Util.isNil(r)) {
          if (l.getAttribute("data-ssr-finger") != r) return a;
        }

        var _t64 = l.textContent;
        return n && (_t64 = _.trim(_t64)), s && Ti.Dom.remove(l), "json" == i ? JSON.parse(_t64) : _t64;
      }

      return a;
    }
  };
  return {
    WWW: t
  };
}(),
    WWW = _ref26.WWW,
    _ref27 = function () {
  var t = 3.141592653589793,
      e = 6378245,
      i = .006693421622965943,
      n = {
    WGS84_TO_GCJ02: function WGS84_TO_GCJ02(s, r) {
      if (n.outOfChina(s, r)) return {
        lat: s,
        lng: r
      };
      var a = n.transformLat(r - 105, s - 35),
          o = n.transformLng(r - 105, s - 35),
          l = s / 180 * t,
          h = Math.sin(l);
      h = 1 - i * h * h;
      var c = Math.sqrt(h);
      return {
        lat: s + (a = 180 * a / (e * (1 - i) / (h * c) * t)),
        lng: r + (o = 180 * o / (e / c * Math.cos(l) * t))
      };
    },
    WGS84_TO_BD09: function WGS84_TO_BD09(t, e) {
      var i = n.WGS84_TO_GCJ02(t, e);
      return n.GCJ02_TO_BD09(i.lat, i.lng);
    },
    GCJ02_TO_WGS84: function GCJ02_TO_WGS84(t, e) {
      var i = n.transform(t, e),
          s = 2 * e - i.lng;
      return {
        lat: 2 * t - i.lat,
        lng: s
      };
    },
    GCJ02_TO_BD09: function GCJ02_TO_BD09(e, i) {
      var n = i,
          s = e,
          r = Math.sqrt(n * n + s * s) + 2e-5 * Math.sin(s * t),
          a = Math.atan2(s, n) + 3e-6 * Math.cos(n * t),
          o = r * Math.cos(a) + .0065;
      return {
        lat: r * Math.sin(a) + .006,
        lng: o
      };
    },
    BD09_TO_GCJ02: function BD09_TO_GCJ02(e, i) {
      var n = i - .0065,
          s = e - .006,
          r = Math.sqrt(n * n + s * s) - 2e-5 * Math.sin(s * t),
          a = Math.atan2(s, n) - 3e-6 * Math.cos(n * t),
          o = r * Math.cos(a);
      return {
        lat: r * Math.sin(a),
        lng: o
      };
    },
    BD09_TO_WGS84: function BD09_TO_WGS84(t, e) {
      var i = n.BD09_TO_GCJ02(t, e);
      return n.GCJ02_TO_WGS84(i.lat, i.lng);
    },
    outOfChina: function outOfChina(t, e) {
      return e < 72.004 || e > 137.8347 || t < .8293 || t > 55.8271;
    },
    transform: function transform(s, r) {
      if (n.outOfChina(s, r)) return {
        lat: s,
        lng: r
      };
      var a = n.transformLat(r - 105, s - 35),
          o = n.transformLng(r - 105, s - 35),
          l = s / 180 * t,
          h = Math.sin(l);
      h = 1 - i * h * h;
      var c = Math.sqrt(h);
      return {
        lat: s + (a = 180 * a / (e * (1 - i) / (h * c) * t)),
        lng: r + (o = 180 * o / (e / c * Math.cos(l) * t))
      };
    },
    transformLat: function transformLat(e, i) {
      var n = 2 * e - 100 + 3 * i + .2 * i * i + .1 * e * i + .2 * Math.sqrt(Math.abs(e));
      return n += 2 * (20 * Math.sin(6 * e * t) + 20 * Math.sin(2 * e * t)) / 3, n += 2 * (20 * Math.sin(i * t) + 40 * Math.sin(i / 3 * t)) / 3, n += 2 * (160 * Math.sin(i / 12 * t) + 320 * Math.sin(i * t / 30)) / 3;
    },
    transformLng: function transformLng(e, i) {
      var n = 300 + e + 2 * i + .1 * e * e + .1 * e * i + .1 * Math.sqrt(Math.abs(e));
      return n += 2 * (20 * Math.sin(6 * e * t) + 20 * Math.sin(2 * e * t)) / 3, n += 2 * (20 * Math.sin(e * t) + 40 * Math.sin(e / 3 * t)) / 3, n += 2 * (150 * Math.sin(e / 12 * t) + 300 * Math.sin(e / 30 * t)) / 3;
    },
    getLngToWest: function getLngToWest(t, e) {
      var i = t - e;
      return e < 0 && t > 0 ? 360 - i : i;
    },
    getLatToSouth: function getLatToSouth(t, e) {
      return t - e;
    },
    normlizedLat: function normlizedLat(t) {
      return t;
    },
    normlizedLng: function normlizedLng(t) {
      return t > 360 && (t %= 360), t > 180 ? t - 360 : (t < -360 && (t %= 360), t < -180 ? t + 360 : t);
    },
    getBounds: function getBounds() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var e = void 0,
          i = void 0,
          n = void 0,
          s = void 0;

      var _iterator53 = _createForOfIteratorHelper(t),
          _step53;

      try {
        for (_iterator53.s(); !(_step53 = _iterator53.n()).done;) {
          var _r17 = _step53.value;
          e = (_readOnlyError("e"), _.isUndefined(e) ? _r17.lng : Math.max(e, _r17.lng)), i = (_readOnlyError("i"), _.isUndefined(i) ? _r17.lng : Math.min(i, _r17.lng)), n = (_readOnlyError("n"), _.isUndefined(n) ? _r17.lat : Math.max(n, _r17.lat)), s = _.isUndefined(s) ? _r17.lat : Math.min(s, _r17.lat);
        }
      } catch (err) {
        _iterator53.e(err);
      } finally {
        _iterator53.f();
      }

      return e - i > 180 ? [{
        lat: s,
        lng: e
      }, {
        lat: n,
        lng: i
      }] : [{
        lat: s,
        lng: i
      }, {
        lat: n,
        lng: e
      }];
    },
    getCenter: function getCenter() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];

      var _n$getBounds = n.getBounds(t),
          _n$getBounds2 = _slicedToArray(_n$getBounds, 2),
          e = _n$getBounds2[0],
          i = _n$getBounds2[1];

      return {
        lat: (i.lat + e.lat) / 2,
        lng: (i.lng + e.lng) / 2
      };
    }
  };
  return {
    GPS: n
  };
}(),
    GPS = _ref27.GPS,
    _Bank = {
  Bank: {
    getCurrencyChar: function getCurrencyChar() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "RMB";
      return {
        RMB: "",
        USD: "$",
        GBP: ""
      }[t];
    },
    isValidPayType: function isValidPayType(t) {
      return {
        "wx.qrcode": !0,
        "zfb.qrcode": !0,
        paypal: !0
      }[t] || !1;
    },
    getPayTypeText: function getPayTypeText(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
      var i = null;
      if (_.isString(t) && (i = "pay-by-".concat(t.replace(".", "-"))), i) return e ? Ti.I18n.get(i) : i;
    },
    getPayTypeChooseI18nText: function getPayTypeChooseI18nText(t) {
      var _ref121 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref121$text = _ref121.text,
          e = _ref121$text === void 0 ? "pay-step-choose-tip2" : _ref121$text,
          _ref121$nil = _ref121.nil,
          i = _ref121$nil === void 0 ? "pay-step-choose-nil" : _ref121$nil;

      var n = Ti.Bank.getPayTypeText(t, !0);
      return n ? Ti.I18n.getf(e, {
        val: n
      }) : Ti.I18n.get(i);
    }
  }
},
    Bank = _Bank.Bank,
    _ref28 = function () {
  var t = ["sun", "mon", "tue", "wed", "thu", "fri", "sat"],
      e = ["sunday", "monday", "tuesday", "wednesday", "thursday", "friday", "saturday"],
      i = {
    sun: 0,
    mon: 1,
    tue: 2,
    wed: 3,
    thu: 4,
    fri: 5,
    sat: 6,
    sunday: 0,
    monday: 1,
    tuesday: 2,
    wednesday: 3,
    thursday: 4,
    friday: 5,
    saturday: 6
  },
      n = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
      s = new RegExp("^((\\d{4})([/\\\\-])?(\\d{1,2})?([/\\\\-])?(\\d{1,2})?)?(([ T])?(\\d{1,2})(:)(\\d{1,2})((:)(\\d{1,2}))?((.)(\\d{1,3}))?)?(([+-])(\\d{1,2})(:\\d{1,2})?)?(Z(\\d*))?$"),
      r = {
    parse: function parse(t) {
      if (_.isUndefined(t) || "today" === t) return new Date();
      if (!t || _.isArray(t) && _.isEmpty(t)) return null;
      if (_.isDate(t)) return new Date(t);
      if (_.isNumber(t)) return new Date(t);

      if (_.isString(t)) {
        var _e78 = t;
        if (/\d{13,}/.test(_e78)) return new Date(1 * _e78);

        var _i72 = s.exec(t);

        if (_i72) {
          var _t65 = function _t65(t, e, i) {
            var n = t[e];
            return n ? parseInt(n) : i;
          },
              _e79 = new Date(),
              _n34 = _t65(_i72, 2, _e79.getFullYear()),
              _s25 = _t65(_i72, 4, _i72[2] ? 1 : _e79.getMonth() + 1),
              _r18 = _t65(_i72, 6, _i72[2] ? 1 : _e79.getDate()),
              _a14 = _t65(_i72, 9, 0),
              _o8 = _t65(_i72, 11, 0),
              _l5 = _t65(_i72, 14, 0),
              _h = _t65(_i72, 17, 0),
              _c = [_.padStart(_n34, 4, "0"), "-", _.padStart(_s25, 2, "0"), "-", _.padStart(_r18, 2, "0"), "T", _.padStart(_a14, 2, "0"), ":", _.padStart(_o8, 2, "0"), ":", _.padStart(_l5, 2, "0"), ".", _.padStart(_h, 3, "0")];

          _i72[18] && _c.push(_i72[18]);

          var _u = _c.join("");

          return new Date(_u);
        }
      }

      throw "i18n:invalid-date";
    },
    format: function format(i) {
      var s = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "yyyy-MM-dd HH:mm:ss";

      if (_.isArray(i)) {
        var _t66 = [];

        var _iterator54 = _createForOfIteratorHelper(i),
            _step54;

        try {
          for (_iterator54.s(); !(_step54 = _iterator54.n()).done;) {
            var _e80 = _step54.value;

            _t66.push(r.format(_e80, s));
          }
        } catch (err) {
          _iterator54.e(err);
        } finally {
          _iterator54.f();
        }

        return _t66;
      }

      if (_.isDate(i) || (i = r.parse(i)), !i) return null;

      var a,
          o = i.getFullYear(),
          l = i.getMonth() + 1,
          h = i.getDate(),
          c = i.getHours(),
          u = i.getMinutes(),
          d = i.getSeconds(),
          p = i.getMilliseconds(),
          f = n[i.getMonth()],
          m = Ti.I18n.get("cal.abbr.".concat(f)),
          g = Ti.I18n.get(f),
          y = i.getDay(),
          T = _.upperFirst(t[y]),
          b = _.upperFirst(e[y]),
          w = Ti.I18n.get(T),
          v = Ti.I18n.get(b),
          x = {
        yyyy: o,
        M: l,
        d: h,
        H: c,
        m: u,
        s: d,
        S: p,
        yyy: o,
        yy: ("" + o).substring(2, 4),
        MM: _.padStart(l, 2, "0"),
        dd: _.padStart(h, 2, "0"),
        HH: _.padStart(c, 2, "0"),
        mm: _.padStart(u, 2, "0"),
        ss: _.padStart(d, 2, "0"),
        SS: _.padStart(p, 3, "0"),
        SSS: _.padStart(p, 3, "0"),
        E: w,
        EE: w,
        EEE: w,
        EEEE: v,
        MMM: m,
        MMMM: g
      },
          S = /(y{2,4}|M{1,4}|dd?|HH?|mm?|ss?|S{1,3}|E{1,4}|'([^']+)')/g,
          k = [],
          C = 0;

      for (; a = S.exec(s);) {
        C < a.index && k.push(s.substring(C, a.index));

        var _t67 = Ti.Util.fallback(a[2], x[a[1]], a[1]);

        k.push(_t67), C = S.lastIndex;
      }

      return C < s.length && k.push(s.substring(C)), k.join("");
    },
    getWeekDayAbbr: function getWeekDayAbbr(e) {
      var i = _.clamp(e, 0, t.length - 1);

      return t[i];
    },
    getWeekDayName: function getWeekDayName(t) {
      var i = _.clamp(t, 0, e.length - 1);

      return e[i];
    },
    getWeekDayValue: function getWeekDayValue(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;

      var n = _.trim(_.lowerCase(t)),
          s = i[n];

      return _.isNumber(s) ? s : e;
    },
    getMonthAbbr: function getMonthAbbr(t) {
      var e = _.clamp(t, 0, 11);

      return n[e];
    },
    setTime: function setTime(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
      var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;
      var s = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;
      return _.inRange(e, 0, 24) && t.setHours(e), _.inRange(i, 0, 60) && t.setMinutes(i), _.inRange(n, 0, 60) && t.setSeconds(n), _.inRange(s, 0, 1e3) && t.setMilliseconds(s), t;
    },
    setDayLastTime: function setDayLastTime(t) {
      return r.setTime(t, 23, 59, 59, 999);
    },
    moveYear: function moveYear(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      return _.isDate(t) && t.setFullYear(t.getFullYear + e), t;
    },
    moveMonth: function moveMonth(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      return _.isDate(t) && t.setMonth(t.getMonth() + e), t;
    },
    moveDate: function moveDate(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      return _.isDate(t) && t.setDate(t.getDate() + e), t;
    },
    createDate: function createDate(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;

      if (_.isDate(t)) {
        var _i73 = new Date(t);

        return _i73.setDate(_i73.getDate() + e), _i73;
      }
    },
    timeText: function timeText(t) {
      var _ref122 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref122$justNow = _ref122.justNow,
          e = _ref122$justNow === void 0 ? 10 : _ref122$justNow,
          _ref122$i18n = _ref122.i18n,
          i = _ref122$i18n === void 0 ? Ti.I18n.get("time") : _ref122$i18n;

      var n = (t = r.parse(t)).getTime(),
          s = Date.now() - n,
          a = s > 0 ? "past-" : "future-";
      s = Math.abs(s);
      var o = Math.round(s / 6e4);
      if (o < e) return i["".concat(a, "in-min")];
      if (o < 60) return Ti.S.renderBy(i["".concat(a, "in-hour")], {
        min: o
      });
      var l = Math.round(s / 36e5);
      if (l < 24) return Ti.S.renderBy(i["".concat(a, "in-day")], {
        min: o,
        hour: l
      });
      var h = Math.round(l / 24);
      if (h < 7) return Ti.S.renderBy(i["".concat(a, "in-week")], {
        min: o,
        hour: l,
        day: h
      });
      return t.getFullYear() == new Date().getFullYear() ? r.format(t, i["in-year"]) : r.format(t, i["any-time"]);
    }
  };
  return {
    DateTime: r
  };
}(),
    DateTime = _ref28.DateTime,
    _Num = {
  Num: {
    fillSteps: function fillSteps() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;

      var _ref123 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
          _ref123$ary = _ref123.ary,
          i = _ref123$ary === void 0 ? [] : _ref123$ary,
          _ref123$step = _ref123.step,
          n = _ref123$step === void 0 ? 1 : _ref123$step;

      for (var _s26 = 0; _s26 < e; _s26++) {
        i[_s26] = t + _s26 * n;
      }

      return i;
    },
    scrollIndex: function scrollIndex(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;

      if (e > 0) {
        var _i74 = t % e;

        return _i74 >= 0 ? _i74 : e + _i74;
      }

      return -1;
    },
    precise: function precise(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;

      if (e >= 0) {
        var i = Math.pow(10, e);
        return Math.round(t * i) / i;
      }

      return t;
    },
    ceilUnit: function ceilUnit(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;

      if (_.isNumber(t) && e > 0) {
        return Math.ceil(t / e) * e;
      }

      return t;
    },
    floorUnit: function floorUnit(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;

      if (_.isNumber(t) && e > 0) {
        return Math.floor(t / e) * e;
      }

      return t;
    }
  }
},
    Num = _Num.Num,
    _ref29 = function () {
  var t = {
    toPixel: function toPixel(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100;
      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
      if (_.isNumber(t)) return t > -1 && t < 1 ? t * e : t;
      var n = /^([\d.]+)(px)?(%)?$/.exec(t);
      return n ? n[3] ? n[1] * e / 100 : 1 * n[1] : i;
    },
    toSize: function toSize(t) {
      var _ref124 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref124$autoPercent = _ref124.autoPercent,
          e = _ref124$autoPercent === void 0 ? !0 : _ref124$autoPercent,
          _ref124$remBase = _ref124.remBase,
          i = _ref124$remBase === void 0 ? 0 : _ref124$remBase;

      return _.isNumber(t) || /^[0-9]+$/.test(t) ? 0 == t ? t : e && t > -1 && t < 1 ? 100 * t + "%" : i > 0 ? t / i + "rem" : t + "px" : t;
    },
    toSizeRem100: function toSizeRem100(e, i) {
      var n = _.assign({}, i, {
        remBase: 100
      });

      return t.toSize(e, n);
    },
    toStyle: function toStyle(e, i) {
      return _.mapValues(e, function (e, n) {
        var s = _.kebabCase(n);

        return /^(opacity|z-index|order)$/.test(s) ? e : t.toSize(e, i);
      });
    },
    toStyleRem100: function toStyleRem100(e, i) {
      var n = _.assign({}, i, {
        remBase: 100
      });

      return t.toStyle(e, n);
    },
    toBackgroundUrl: function toBackgroundUrl(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
      if (t) return e && (t = Ti.Util.appendPath(e, t)), "url(\"".concat(t, "\")");
    },
    toNumStyle: function toNumStyle(e) {
      return t.toStyle(e, !1);
    },
    mergeClassName: function mergeClassName() {
      var e = {};

      var i = function i(t) {
        if (!Ti.Util.isNil(t)) if (_.isFunction(t)) {
          var _e81 = t();

          i(_e81);
        } else if (_.isString(t)) {
          var _i75 = _.without(_.split(t, / +/g), "");

          var _iterator55 = _createForOfIteratorHelper(_i75),
              _step55;

          try {
            for (_iterator55.s(); !(_step55 = _iterator55.n()).done;) {
              var _t68 = _step55.value;
              e[_t68] = !0;
            }
          } catch (err) {
            _iterator55.e(err);
          } finally {
            _iterator55.f();
          }
        } else if (_.isArray(t)) {
          var _iterator56 = _createForOfIteratorHelper(t),
              _step56;

          try {
            for (_iterator56.s(); !(_step56 = _iterator56.n()).done;) {
              var _e82 = _step56.value;
              i(_e82);
            }
          } catch (err) {
            _iterator56.e(err);
          } finally {
            _iterator56.f();
          }
        } else _.isPlainObject(t) && _.forEach(t, function (t, i) {
          t && (e[i] = !0);
        });
      };

      for (var _len38 = arguments.length, t = new Array(_len38), _key38 = 0; _key38 < _len38; _key38++) {
        t[_key38] = arguments[_key38];
      }

      return i(t), e;
    },
    joinClassNames: function joinClassNames() {
      var i = t.mergeClassName.apply(t, arguments),
          n = [];
      return _.forEach(i, function (t, e) {
        t && n.push(e);
      }), n.join(" ");
    }
  };
  return {
    Css: t
  };
}(),
    Css = _ref29.Css,
    _ref30 = function () {
  var t = /*#__PURE__*/function () {
    function t(_t69, e) {
      _classCallCheck(this, t);

      this.data = e, _.isString(_t69) ? this.path = _.without(_t69.split("/"), "") : _.isArray(_t69) && (this.path = _t69);
    }

    _createClass(t, [{
      key: "match",
      value: function match(t) {
        var e = _.isArray(t) ? t : _.without(t.split("/"), "");

        for (var _t70 = 0; _t70 < e.length; _t70++) {
          var _i76 = e[_t70],
              _n35 = this.path[_t70];
          if ("*" != _n35 && _i76 != _n35) return !1;
        }

        return !0;
      }
    }]);

    return t;
  }();

  var e = /*#__PURE__*/function () {
    function e(t, _e83) {
      _classCallCheck(this, e);

      this.data = _e83, this.regex = new RegExp(t);
    }

    _createClass(e, [{
      key: "match",
      value: function match(t) {
        return this.regex.test(t);
      }
    }]);

    return e;
  }();

  var i = /*#__PURE__*/function () {
    function i() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      _classCallCheck(this, i);

      this.parse(t);
    }

    _createClass(i, [{
      key: "parse",
      value: function parse() {
        var _this16 = this;

        var i = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        this.maps = {}, this.regexs = [], this.paths = [], _.forEach(i, function (i, n) {
          var s = _.map(n.split(","), function (t) {
            return _.trim(t);
          });

          var _iterator57 = _createForOfIteratorHelper(s),
              _step57;

          try {
            for (_iterator57.s(); !(_step57 = _iterator57.n()).done;) {
              var _n36 = _step57.value;
              _n36.startsWith("^") ? _this16.regexs.push(new e(_n36, i)) : _n36.indexOf("/") >= 0 ? _this16.paths.push(new t(_n36, i)) : _this16.maps[_n36] = i;
            }
          } catch (err) {
            _iterator57.e(err);
          } finally {
            _iterator57.f();
          }
        });
      }
    }, {
      key: "get",
      value: function get(t, e) {
        if (!Ti.Util.isNil(t)) {
          var _e84 = this.maps[t];
          if (!_.isUndefined(_e84)) return _e84;

          var _iterator58 = _createForOfIteratorHelper(this.paths),
              _step58;

          try {
            for (_iterator58.s(); !(_step58 = _iterator58.n()).done;) {
              var _e85 = _step58.value;

              var _i77 = _.without(t.split("/"), "");

              if (_e85.match(_i77)) return _e85.data;
            }
          } catch (err) {
            _iterator58.e(err);
          } finally {
            _iterator58.f();
          }

          var _iterator59 = _createForOfIteratorHelper(this.regexs),
              _step59;

          try {
            for (_iterator59.s(); !(_step59 = _iterator59.n()).done;) {
              var _e86 = _step59.value;
              if (_e86.match(t)) return _e86.data;
            }
          } catch (err) {
            _iterator59.e(err);
          } finally {
            _iterator59.f();
          }
        }

        return e;
      }
    }]);

    return i;
  }();

  return {
    Mapping: i
  };
}(),
    Mapping = _ref30.Mapping,
    _ref31 = function () {
  var t = {
    item: Symbol("item"),
    data: Symbol("data"),
    query: Symbol("query"),
    children: Symbol("children"),
    getValue: Symbol("getValue"),
    getText: Symbol("getText"),
    getIcon: Symbol("getIcon"),
    isMatched: Symbol("isMatched"),
    itemCache: Symbol("itemCache"),
    dataCache: Symbol("dataCache"),
    hooks: Symbol("hooks"),
    shadowed: Symbol("shadowed")
  },
      e = {};

  var i = /*#__PURE__*/function () {
    function i() {
      _classCallCheck(this, i);

      this[t.hooks] = [], this[t.shadowed] = !1, this[t.item] = _.idendity, this[t.data] = function () {
        return [];
      }, this[t.query] = function (t) {
        return [];
      }, this[t.children] = function (t) {
        return [];
      }, this[t.getValue] = function (t) {
        return Ti.Util.getFallback(t, "value", "id");
      }, this[t.getText] = function (t) {
        return Ti.Util.getFallback(t, "title", "text", "name", "nm");
      }, this[t.getIcon] = function (t) {
        return _.get(t, "icon");
      }, this[t.isMatched] = function (t, e, i) {
        var n = i.getValue(t);
        if (_.isEqual(e, n)) return !0;
        var s = i.getText(t);
        return !!(s && s.indexOf(e) >= 0);
      }, this[t.itemCache] = {}, this[t.dataCache] = null;
    }

    _createClass(i, [{
      key: "setShadowed",
      value: function setShadowed() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;
        this[t.shadowed] = e;
      }
    }, {
      key: "isShadowed",
      value: function isShadowed() {
        return this[t.shadowed];
      }
    }, {
      key: "addHooks",
      value: function addHooks() {
        var _this17 = this;

        for (var _len39 = arguments.length, e = new Array(_len39), _key39 = 0; _key39 < _len39; _key39++) {
          e[_key39] = arguments[_key39];
        }

        var i = _.flattenDeep(e);

        _.forEach(i, function (e) {
          _.isFunction(e) && _this17[t.hooks].push(e);
        });
      }
    }, {
      key: "clearHooks",
      value: function clearHooks() {
        this[t.hooks] = [];
      }
    }, {
      key: "doHooks",
      value: function doHooks() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;

        var _iterator60 = _createForOfIteratorHelper(this[t.hooks]),
            _step60;

        try {
          for (_iterator60.s(); !(_step60 = _iterator60.n()).done;) {
            var _i78 = _step60.value;

            _i78({
              loading: e
            });
          }
        } catch (err) {
          _iterator60.e(err);
        } finally {
          _iterator60.f();
        }
      }
    }, {
      key: "invoke",
      value: function invoke(e) {
        var n = this[t[e]];

        for (var _len40 = arguments.length, i = new Array(_len40 > 1 ? _len40 - 1 : 0), _key40 = 1; _key40 < _len40; _key40++) {
          i[_key40 - 1] = arguments[_key40];
        }

        if (_.isFunction(n)) return n.apply(this, [].concat(i, [this]));
      }
    }, {
      key: "invokeAsync",
      value: function () {
        var _invokeAsync = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee27(e) {
          var n,
              _len41,
              i,
              _key41,
              _args27 = arguments;

          return regeneratorRuntime.wrap(function _callee27$(_context27) {
            while (1) {
              switch (_context27.prev = _context27.next) {
                case 0:
                  n = this[t[e]];

                  if (!_.isFunction(n)) {
                    _context27.next = 6;
                    break;
                  }

                  for (_len41 = _args27.length, i = new Array(_len41 > 1 ? _len41 - 1 : 0), _key41 = 1; _key41 < _len41; _key41++) {
                    i[_key41 - 1] = _args27[_key41];
                  }

                  _context27.next = 5;
                  return n.apply(this, [].concat(i, [this]));

                case 5:
                  return _context27.abrupt("return", _context27.sent);

                case 6:
                case "end":
                  return _context27.stop();
              }
            }
          }, _callee27, this);
        }));

        function invokeAsync(_x19) {
          return _invokeAsync.apply(this, arguments);
        }

        return invokeAsync;
      }()
    }, {
      key: "setFunc",
      value: function setFunc(e) {
        var _this18 = this;

        _.forEach(e, function (e, i) {
          _.isFunction(e) && (_this18[t[i]] = e);
        });
      }
    }, {
      key: "duplicate",
      value: function duplicate() {
        var _this19 = this;

        var _ref125 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            _ref125$hooks = _ref125.hooks,
            e = _ref125$hooks === void 0 ? !1 : _ref125$hooks,
            _ref125$cache = _ref125.cache,
            n = _ref125$cache === void 0 ? !0 : _ref125$cache,
            _ref125$dataCache = _ref125.dataCache,
            s = _ref125$dataCache === void 0 ? !0 : _ref125$dataCache,
            _ref125$itemCache = _ref125.itemCache,
            r = _ref125$itemCache === void 0 ? !0 : _ref125$itemCache;

        var a = new i();
        return _.forEach(t, function (t) {
          a[t] = _this19[t];
        }), e || (a[t.hooks] = []), n || (a[t.itemCache] = {}, a[t.dataCache] = null), s || (a[t.dataCache] = null), r || (a[t.itemCache] = {}), a;
      }
    }, {
      key: "isItemCached",
      value: function isItemCached(e) {
        return !Ti.Util.isNil(this[t.itemCache][e]);
      }
    }, {
      key: "addItemToCache",
      value: function addItemToCache(e, i) {
        e = Ti.Util.fallback(e, null);
        var n = i;
        Ti.Util.isNil(n) && (n = this.getValue(e)), _.isUndefined(e) || Ti.Util.isNil(n) || (this[t.itemCache][n] = e);
      }
    }, {
      key: "clearCache",
      value: function clearCache() {
        this[t.itemCache] = {}, this[t.dataCache] = null;
      }
    }, {
      key: "findItem",
      value: function findItem(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];

        var _iterator61 = _createForOfIteratorHelper(e),
            _step61;

        try {
          for (_iterator61.s(); !(_step61 = _iterator61.n()).done;) {
            var _i79 = _step61.value;

            var _e87 = this.getValue(_i79);

            if (_.isEqual(t, _e87)) return _i79;
          }
        } catch (err) {
          _iterator61.e(err);
        } finally {
          _iterator61.f();
        }
      }
    }, {
      key: "getItem",
      value: function () {
        var _getItem = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee28(i) {
          var n, _t71, _iterator62, _step62, _e88;

          return regeneratorRuntime.wrap(function _callee28$(_context28) {
            while (1) {
              switch (_context28.prev = _context28.next) {
                case 0:
                  if (!Ti.Util.isNil(i)) {
                    _context28.next = 2;
                    break;
                  }

                  return _context28.abrupt("return", null);

                case 2:
                  n = this[t.itemCache][i];

                  if (!_.isUndefined(n)) {
                    _context28.next = 20;
                    break;
                  }

                  _t71 = e[i];

                  if (!_t71) {
                    _context28.next = 9;
                    break;
                  }

                  _context28.next = 8;
                  return new Promise(function (e) {
                    _t71.push(e);
                  });

                case 8:
                  return _context28.abrupt("return", _context28.sent);

                case 9:
                  _t71 = [];
                  e[i] = _t71;
                  this.doHooks(!0);
                  _context28.next = 14;
                  return this.invokeAsync("item", i);

                case 14:
                  n = _context28.sent;
                  this.doHooks(!1);
                  n && _.isPlainObject(n) && this.addItemToCache(n, i);
                  _iterator62 = _createForOfIteratorHelper(_t71);

                  try {
                    for (_iterator62.s(); !(_step62 = _iterator62.n()).done;) {
                      _e88 = _step62.value;

                      _e88(n || null);
                    }
                  } catch (err) {
                    _iterator62.e(err);
                  } finally {
                    _iterator62.f();
                  }

                  delete e[i];

                case 20:
                  return _context28.abrupt("return", (_.isArray(n) && console.warn("!!!! Dict.getItem=>[] !!!  val=", i), this.isShadowed() ? _.cloneDeep(n) : n));

                case 21:
                case "end":
                  return _context28.stop();
              }
            }
          }, _callee28, this);
        }));

        function getItem(_x20) {
          return _getItem.apply(this, arguments);
        }

        return getItem;
      }()
    }, {
      key: "getData",
      value: function () {
        var _getData = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee29() {
          var _this20 = this;

          var e,
              i,
              _args29 = arguments;
          return regeneratorRuntime.wrap(function _callee29$(_context29) {
            while (1) {
              switch (_context29.prev = _context29.next) {
                case 0:
                  e = _args29.length > 0 && _args29[0] !== undefined ? _args29[0] : !1;
                  i = this[t.dataCache];
                  _context29.t0 = e || _.isEmpty(i);

                  if (!_context29.t0) {
                    _context29.next = 11;
                    break;
                  }

                  this.doHooks(!0);
                  _context29.next = 7;
                  return this.invokeAsync("data");

                case 7:
                  i = _context29.sent;
                  this.doHooks(!1);

                  _.forEach(i, function (t, e) {
                    _.isPlainObject(t) || (t = {
                      text: t,
                      value: t
                    }, i[e] = t), _this20.addItemToCache(t);
                  });

                  this[t.dataCache] = i;

                case 11:
                  return _context29.abrupt("return", this.isShadowed() ? _.cloneDeep(i) || [] : i || []);

                case 12:
                case "end":
                  return _context29.stop();
              }
            }
          }, _callee29, this);
        }));

        function getData() {
          return _getData.apply(this, arguments);
        }

        return getData;
      }()
    }, {
      key: "queryData",
      value: function () {
        var _queryData = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee30(t) {
          var _this21 = this;

          var e, i;
          return regeneratorRuntime.wrap(function _callee30$(_context30) {
            while (1) {
              switch (_context30.prev = _context30.next) {
                case 0:
                  i = _.trim(t);

                  if (!i) {
                    _context30.next = 11;
                    break;
                  }

                  this.doHooks(!0);
                  _context30.next = 5;
                  return this.invokeAsync("query", i);

                case 5:
                  e = _context30.sent;
                  this.doHooks(!1);

                  _.forEach(e, function (t) {
                    _this21.addItemToCache(t);
                  });

                  _context30.t0 = this.isShadowed() ? _.cloneDeep(e) || [] : e || [];
                  _context30.next = 14;
                  break;

                case 11:
                  _context30.next = 13;
                  return this.getData();

                case 13:
                  _context30.t0 = e = _context30.sent;

                case 14:
                  return _context30.abrupt("return", _context30.t0);

                case 15:
                case "end":
                  return _context30.stop();
              }
            }
          }, _callee30, this);
        }));

        function queryData(_x21) {
          return _queryData.apply(this, arguments);
        }

        return queryData;
      }()
    }, {
      key: "getChildren",
      value: function () {
        var _getChildren = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee31(t) {
          var _this22 = this;

          var e;
          return regeneratorRuntime.wrap(function _callee31$(_context31) {
            while (1) {
              switch (_context31.prev = _context31.next) {
                case 0:
                  if (t) {
                    _context31.next = 4;
                    break;
                  }

                  _context31.next = 3;
                  return this.getData();

                case 3:
                  return _context31.abrupt("return", _context31.sent);

                case 4:
                  this.doHooks(!0);
                  _context31.next = 7;
                  return this.invokeAsync("children", t);

                case 7:
                  e = _context31.sent;
                  return _context31.abrupt("return", (this.doHooks(!1), _.forEach(e, function (t) {
                    _this22.addItemToCache(t);
                  }), this.isShadowed() ? _.cloneDeep(e) || [] : e || []));

                case 9:
                case "end":
                  return _context31.stop();
              }
            }
          }, _callee31, this);
        }));

        function getChildren(_x22) {
          return _getChildren.apply(this, arguments);
        }

        return getChildren;
      }()
    }, {
      key: "getValue",
      value: function getValue(t) {
        return this.invoke("getValue", t);
      }
    }, {
      key: "getText",
      value: function getText(t) {
        return this.invoke("getText", t);
      }
    }, {
      key: "getIcon",
      value: function getIcon(t) {
        return this.invoke("getIcon", t);
      }
    }, {
      key: "isMatched",
      value: function isMatched(t, e) {
        return this.invoke("isMatched", t, e);
      }
    }, {
      key: "getBy",
      value: function getBy() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ".text";
        var e = arguments.length > 1 ? arguments[1] : undefined;
        var i = arguments.length > 2 ? arguments[2] : undefined;
        return t && ".text" != t ? ".icon" == t ? this.getIcon(e) : ".value" == t ? this.getValue(e) : Ti.Util.fallback(Ti.Util.getOrPick(e, t), i, this.getValue(e)) : this.getText(e);
      }
    }, {
      key: "checkItem",
      value: function () {
        var _checkItem = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee32(t) {
          var e;
          return regeneratorRuntime.wrap(function _callee32$(_context32) {
            while (1) {
              switch (_context32.prev = _context32.next) {
                case 0:
                  _context32.next = 2;
                  return this.getItem(t);

                case 2:
                  e = _context32.sent;

                  if (e) {
                    _context32.next = 5;
                    break;
                  }

                  throw Ti.Err.make("e.dict.no-item", {
                    dictName: dictName,
                    val: t
                  });

                case 5:
                  return _context32.abrupt("return", e);

                case 6:
                case "end":
                  return _context32.stop();
              }
            }
          }, _callee32, this);
        }));

        function checkItem(_x23) {
          return _checkItem.apply(this, arguments);
        }

        return checkItem;
      }()
    }, {
      key: "getItemText",
      value: function () {
        var _getItemText = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee33(t) {
          var e;
          return regeneratorRuntime.wrap(function _callee33$(_context33) {
            while (1) {
              switch (_context33.prev = _context33.next) {
                case 0:
                  _context33.next = 2;
                  return this.getItem(t);

                case 2:
                  e = _context33.sent;

                  if (!e) {
                    _context33.next = 5;
                    break;
                  }

                  return _context33.abrupt("return", this.getText(e));

                case 5:
                case "end":
                  return _context33.stop();
              }
            }
          }, _callee33, this);
        }));

        function getItemText(_x24) {
          return _getItemText.apply(this, arguments);
        }

        return getItemText;
      }()
    }, {
      key: "getItemIcon",
      value: function () {
        var _getItemIcon = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee34(t) {
          var e;
          return regeneratorRuntime.wrap(function _callee34$(_context34) {
            while (1) {
              switch (_context34.prev = _context34.next) {
                case 0:
                  _context34.next = 2;
                  return this.getItem(t);

                case 2:
                  e = _context34.sent;

                  if (!e) {
                    _context34.next = 5;
                    break;
                  }

                  return _context34.abrupt("return", this.getIcon(e));

                case 5:
                case "end":
                  return _context34.stop();
              }
            }
          }, _callee34, this);
        }));

        function getItemIcon(_x25) {
          return _getItemIcon.apply(this, arguments);
        }

        return getItemIcon;
      }()
    }, {
      key: "getItemAs",
      value: function () {
        var _getItemAs = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee35(t, e) {
          var i;
          return regeneratorRuntime.wrap(function _callee35$(_context35) {
            while (1) {
              switch (_context35.prev = _context35.next) {
                case 0:
                  _context35.next = 2;
                  return this.getItem(e);

                case 2:
                  i = _context35.sent;

                  if (!i) {
                    _context35.next = 5;
                    break;
                  }

                  return _context35.abrupt("return", this.getBy(t, i, e));

                case 5:
                case "end":
                  return _context35.stop();
              }
            }
          }, _callee35, this);
        }));

        function getItemAs(_x26, _x27) {
          return _getItemAs.apply(this, arguments);
        }

        return getItemAs;
      }()
    }]);

    return i;
  }();

  var n = {},
      s = {
    DictReferName: function DictReferName(t) {
      if (_.isString(t)) {
        var _e89 = /^(@Dict:|#)(.+)$/.exec(t);

        if (_e89) return _.trim(_e89[2]);
      }
    },
    GetOrCreate: function GetOrCreate() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      var _ref126 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          e = _ref126.hooks,
          r = _ref126.name;

      var a;
      if (t.data instanceof i) a = t.data;else {
        var _e90 = r || s.DictReferName(t.data);

        _e90 && (a = n[_e90]);
      }
      return a ? (e && (a = a.duplicate({
        hooks: !1
      })).addHooks(e), a) : s.CreateDict(t, {
        hooks: e,
        name: r
      });
    },
    CreateDict: function CreateDict() {
      var _ref127 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
          t = _ref127.data,
          e = _ref127.query,
          s = _ref127.item,
          r = _ref127.children,
          a = _ref127.getValue,
          o = _ref127.getText,
          l = _ref127.getIcon,
          h = _ref127.isMatched,
          c = _ref127.shadowed;

      var _ref128 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          u = _ref128.hooks,
          d = _ref128.name;

      if (_.isString(t) || _.isArray(t)) {
        var _e91 = Ti.S.toObjList(t);

        t = function t() {
          return _e91;
        };
      } else t || (t = function t() {
        return [];
      });

      s || (s = /*#__PURE__*/function () {
        var _ref129 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee36(t, e) {
          var i, _iterator63, _step63, _n37, _i80;

          return regeneratorRuntime.wrap(function _callee36$(_context36) {
            while (1) {
              switch (_context36.prev = _context36.next) {
                case 0:
                  _context36.next = 2;
                  return e.getData();

                case 2:
                  i = _context36.sent;
                  _iterator63 = _createForOfIteratorHelper(i);
                  _context36.prev = 4;

                  _iterator63.s();

                case 6:
                  if ((_step63 = _iterator63.n()).done) {
                    _context36.next = 13;
                    break;
                  }

                  _n37 = _step63.value;
                  _i80 = e.getValue(_n37);

                  if (!(_i80 == t || _.isEqual(_i80, t))) {
                    _context36.next = 11;
                    break;
                  }

                  return _context36.abrupt("return", _n37);

                case 11:
                  _context36.next = 6;
                  break;

                case 13:
                  _context36.next = 18;
                  break;

                case 15:
                  _context36.prev = 15;
                  _context36.t0 = _context36["catch"](4);

                  _iterator63.e(_context36.t0);

                case 18:
                  _context36.prev = 18;

                  _iterator63.f();

                  return _context36.finish(18);

                case 21:
                case "end":
                  return _context36.stop();
              }
            }
          }, _callee36, null, [[4, 15, 18, 21]]);
        }));

        return function s(_x28, _x29) {
          return _ref129.apply(this, arguments);
        };
      }()), e || (e = /*#__PURE__*/function () {
        var _ref130 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee37(t, e) {
          var i, n, _iterator64, _step64, _s27;

          return regeneratorRuntime.wrap(function _callee37$(_context37) {
            while (1) {
              switch (_context37.prev = _context37.next) {
                case 0:
                  _context37.next = 2;
                  return e.getData();

                case 2:
                  i = _context37.sent;
                  n = [];
                  _iterator64 = _createForOfIteratorHelper(i);

                  try {
                    for (_iterator64.s(); !(_step64 = _iterator64.n()).done;) {
                      _s27 = _step64.value;
                      e.isMatched(_s27, t) && n.push(_s27);
                    }
                  } catch (err) {
                    _iterator64.e(err);
                  } finally {
                    _iterator64.f();
                  }

                  return _context37.abrupt("return", n);

                case 7:
                case "end":
                  return _context37.stop();
              }
            }
          }, _callee37);
        }));

        return function (_x30, _x31) {
          return _ref130.apply(this, arguments);
        };
      }()), r || (r = function r() {
        return [];
      });
      var p = new i();
      return p.setFunc({
        data: t,
        query: e,
        item: s,
        children: r,
        getValue: a,
        getText: o,
        getIcon: l,
        isMatched: h
      }), d && (n[d] = p), c && p.setShadowed(c), u && p.addHooks(u), p;
    },
    GetDict: function GetDict(t, e) {
      var i = n[t];
      return i && e && (i = i.duplicate({
        hooks: !1
      })).addHooks(e), i;
    },
    CheckDict: function CheckDict(t, e) {
      var i = s.GetDict(t, e);
      if (i) return i;

      var _s$explainDictName = s.explainDictName(t),
          r = _s$explainDictName.name,
          a = _s$explainDictName.args;

      if (i = s.GetDict(r, e)) {
        if (!_.isEmpty(a)) {
          var _e93 = i.duplicate({
            hooks: !0,
            dataCache: !1
          });

          return _e93.setFunc({
            data: function data() {
              return this.getChildren.apply(this, _toConsumableArray(a));
            }
          }), n[t] = _e93, _e93;
        }

        return i;
      }

      throw "e.dict.noexists : ".concat(t);
    },
    explainDictName: function explainDictName(t) {
      var e = {},
          i = /^([^:()]+)(\(([^)]*)\))?(:(.+))?$/.exec(t);
      return i && (e.name = i[1], e.args = Ti.S.joinArgs(i[3]), e.vkey = i[5]), e;
    },
    getBy: function getBy(t, e) {
      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee38() {
        var _s$explainDictName2, i, n, r;

        return regeneratorRuntime.wrap(function _callee38$(_context38) {
          while (1) {
            switch (_context38.prev = _context38.next) {
              case 0:
                if (!Ti.Util.isNil(e)) {
                  _context38.next = 2;
                  break;
                }

                return _context38.abrupt("return", e);

              case 2:
                _s$explainDictName2 = s.explainDictName(t), i = _s$explainDictName2.name, n = _s$explainDictName2.vKey, r = s.CheckDict(i);
                _context38.next = 5;
                return r.getItemAs(n, e);

              case 5:
                return _context38.abrupt("return", _context38.sent);

              case 6:
              case "end":
                return _context38.stop();
            }
          }
        }, _callee38);
      }))();
    },
    getAll: function getAll(t) {
      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee39() {
        var _e94;

        return regeneratorRuntime.wrap(function _callee39$(_context39) {
          while (1) {
            switch (_context39.prev = _context39.next) {
              case 0:
                _context39.prev = 0;
                _e94 = s.CheckDict(t);
                _context39.next = 4;
                return _e94.getData();

              case 4:
                return _context39.abrupt("return", _context39.sent);

              case 7:
                _context39.prev = 7;
                _context39.t0 = _context39["catch"](0);
                console.error("e.dict.getAll : ".concat(t), _context39.t0);

              case 10:
              case "end":
                return _context39.stop();
            }
          }
        }, _callee39, null, [[0, 7]]);
      }))();
    },
    getText: function getText(t, e) {
      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee40() {
        var _i81;

        return regeneratorRuntime.wrap(function _callee40$(_context40) {
          while (1) {
            switch (_context40.prev = _context40.next) {
              case 0:
                _context40.prev = 0;
                _i81 = s.CheckDict(t);
                _context40.next = 4;
                return _i81.getItemText(e);

              case 4:
                return _context40.abrupt("return", _context40.sent);

              case 7:
                _context40.prev = 7;
                _context40.t0 = _context40["catch"](0);
                console.error("e.dict.getText : ".concat(t), _context40.t0);

              case 10:
              case "end":
                return _context40.stop();
            }
          }
        }, _callee40, null, [[0, 7]]);
      }))();
    },
    getIcon: function getIcon(t, e) {
      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee41() {
        var _i82;

        return regeneratorRuntime.wrap(function _callee41$(_context41) {
          while (1) {
            switch (_context41.prev = _context41.next) {
              case 0:
                _context41.prev = 0;
                _i82 = s.CheckDict(t);
                _context41.next = 4;
                return _i82.getItemIcon(e);

              case 4:
                return _context41.abrupt("return", _context41.sent);

              case 7:
                _context41.prev = 7;
                _context41.t0 = _context41["catch"](0);
                console.error("e.dict.getIcon : ".concat(t), _context41.t0);

              case 10:
              case "end":
                return _context41.stop();
            }
          }
        }, _callee41, null, [[0, 7]]);
      }))();
    }
  };
  return {
    Dict: i,
    DictFactory: s
  };
}(),
    Dict = _ref31.Dict,
    DictFactory = _ref31.DictFactory,
    _ref32 = function () {
  var t = function (_t72) {
    function t(_x34, _x35) {
      return _t72.apply(this, arguments);
    }

    t.toString = function () {
      return _t72.toString();
    };

    return t;
  }(function (t, e) {
    var _t$$parent;

    var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;
    t.$parent && !i && (_.isFunction(t.__before_bubble) && (e = t.__before_bubble(e) || e), (_t$$parent = t.$parent).$notify.apply(_t$$parent, [e.name].concat(_toConsumableArray(e.args))));
  }),
      e = function (_e96) {
    function e(_x36) {
      return _e96.apply(this, arguments);
    }

    e.toString = function () {
      return _e96.toString();
    };

    return e;
  }(function (e) {
    for (var _len42 = arguments.length, i = new Array(_len42 > 1 ? _len42 - 1 : 0), _key42 = 1; _key42 < _len42; _key42++) {
      i[_key42 - 1] = arguments[_key42];
    }

    var n,
        s = {
      name: e,
      args: i
    },
        r = !1;

    if (_.isFunction(this.__on_events) && (n = this.__on_events.apply(this, [e].concat(i))), _.isFunction(n) || (n = _.get(this.$listeners, e)), _.isFunction(n) || (n = this.$tiEventTryFallback(e, this.$listeners)), _.isFunction(n)) {
      var _e95 = n.apply(void 0, _toConsumableArray(s.args));

      r = !0, _.isBoolean(_e95) ? r = _e95 : _e95 && _.isBoolean(_e95.stop) && (r = _e95.stop), t(this, s, r);
    } else t(this, s);
  });

  return {
    VueEventBubble: {
      install: function install(t) {
        var _ref131 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
            _ref131$overrideEmit = _ref131.overrideEmit,
            i = _ref131$overrideEmit === void 0 ? !1 : _ref131$overrideEmit;

        _.assign(t.prototype, {
          $notify: e,
          $tiEventTryFallback: function $tiEventTryFallback(t) {
            var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

            var i = _.split(t, "::");

            for (; i.length > 1;) {
              var _i83 = i,
                  _i84 = _toArray(_i83),
                  _t73 = _i84.slice(1),
                  _n38 = _t73.join("::"),
                  _s28 = _.get(e, _n38);

              if (_s28) return _s28;
              i = _t73;
            }
          }
        }), i && t.mixin({
          created: function created() {
            this.$emit = e;
          }
        });
      }
    }
  };
}(),
    VueEventBubble = _ref32.VueEventBubble,
    _ref33 = function () {
  var t = {
    inheritAttrs: !1,
    computed: _objectSpread({}, Vuex.mapGetters("viewport", ["viewportMode", "viewportActivedComIds", "isViewportModeDesktop", "isViewportModeTablet", "isViewportModePhone", "isViewportModeDesktopOrTablet", "isViewportModePhoneOrTablet"]), {
      tiComId: function tiComId() {
        return "".concat(this._uid, ":").concat(this.tiComType);
      },
      isActived: function isActived() {
        return _.indexOf(this.viewportActivedComIds, this.tiComId) >= 0;
      },
      isSelfActived: function isSelfActived() {
        return _.last(this.viewportActivedComIds) == this.tiComId;
      },
      getTopClass: function getTopClass() {
        var _this23 = this;

        return function () {
          for (var _len43 = arguments.length, t = new Array(_len43), _key43 = 0; _key43 < _len43; _key43++) {
            t[_key43] = arguments[_key43];
          }

          return Ti.Css.mergeClassName({
            "is-self-actived": _this23.isSelfActived,
            "is-actived": _this23.isActived
          }, t, _this23.className);
        };
      }
    }),
    props: {
      className: void 0,
      onInit: void 0,
      onReady: void 0
    },
    created: function () {
      var _created = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee42() {
        return regeneratorRuntime.wrap(function _callee42$(_context42) {
          while (1) {
            switch (_context42.prev = _context42.next) {
              case 0:
                _.isFunction(this.onInit) && this.onInit(this);

              case 1:
              case "end":
                return _context42.stop();
            }
          }
        }, _callee42, this);
      }));

      function created() {
        return _created.apply(this, arguments);
      }

      return created;
    }(),
    mounted: function mounted() {
      _.isFunction(this.onReady) && this.onReady(this);
    },
    beforeDestroyed: function beforeDestroyed() {
      Ti.App(this).setBlurredVm(this);
    }
  },
      e = {
    tiActivableComIdPath: function tiActivableComIdPath() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !0;
      var e = this.tiActivableComPath(t);
      return _.map(e, function (t) {
        return t.tiComId;
      });
    },
    tiActivableComPath: function tiActivableComPath() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !0;
      var e = [this],
          i = this.$parent;

      for (; i;) {
        i.__ti_activable__ && e.push(i), i = i.$parent;
      }

      return t && e.reverse(), e;
    },
    tiParentActivableCom: function tiParentActivableCom() {
      var t = this.$parent;

      for (; t && !t.__ti_activable__;) {
        t = (_readOnlyError("t"), t.$parent);
      }

      return t;
    },
    setActived: function setActived() {
      this.isSelfActived || Ti.App(this).setActivedVm(this);
    }
  };
  return {
    VueTiCom: {
      install: function install(i) {
        i.mixin(t), _.assign(i.prototype, e), i.filter("i18n", function (t) {
          var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
          return /^i18n:(.+)/.test(t) ? Ti.I18n.textf(t, e) : Ti.I18n.getf(t, e);
        }), i.filter("percent", function (t) {
          var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;
          var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;
          return Ti.S.toPercent(1 * t, {
            fixed: e,
            auto: i
          });
        }), i.filter("float", function (t) {
          var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;
          var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
          return Ti.Types.toFloat(t, {
            precision: e,
            dft: i
          });
        }), i.filter("datetime", function (t) {
          var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "yyyy-MM-dd";
          return Ti.DateTime.format(t, e);
        }), i.directive("dropFiles", {
          bind: function bind(t, e) {
            var i = null,
                n = null,
                s = e.modifiers.mask;
            _.isArray(e.value) ? (i = e.value.length > 0 ? e.value[0] : null, n = e.value.length > 1 ? e.value[1] : null) : _.isFunction(e.value) && (i = e.value), s && (n = Ti.I18n.text(n || "i18n:drop-file-here-to-upload")), t.__drag_enter_count = 0, t.addEventListener("dragenter", function (e) {
              t.__drag_enter_count++, 1 == t.__drag_enter_count && (t.setAttribute("ti-is-drag", ""), s && (t.$ti_drag_mask = Ti.Dom.createElement({
                className: "ti-drag-mask",
                $p: t
              }), t.$ti_drag_mask.innerHTML = "<span>".concat(n, "</span>")));
            }), t.addEventListener("dragover", function (t) {
              t.preventDefault(), t.stopPropagation();
            }), t.addEventListener("dragleave", function (e) {
              t.__drag_enter_count--, t.__drag_enter_count <= 0 && (t.removeAttribute("ti-is-drag"), t.$ti_drag_mask && (Ti.Dom.remove(t.$ti_drag_mask), delete t.$ti_drag_mask));
            }), t.addEventListener("drop", function (e) {
              e.preventDefault(), e.stopPropagation(), t.__drag_enter_count = 0, t.removeAttribute("ti-is-drag"), t.$ti_drag_mask && (Ti.Dom.remove(t.$ti_drag_mask), delete t.$ti_drag_mask), _.isFunction(i) && i(e.dataTransfer.files);
            });
          }
        }), i.directive("dropOff", {
          bind: function bind(t, e) {
            t.addEventListener("dragover", function (t) {
              t.preventDefault(), t.stopPropagation();
            }), t.addEventListener("drop", function (t) {
              t.preventDefault(), t.stopPropagation();
            });
          }
        }), i.directive("dragOff", {
          bind: function bind(t, e) {
            t.addEventListener("dragstart", function (t) {
              t.preventDefault(), t.stopPropagation();
            });
          }
        }), i.directive("tiActivable", {
          bind: function bind(t, _ref132, _ref133) {
            var e = _ref132.value;
            var i = _ref133.context;
            var n = i;
            n.__ti_activable__ = !0, t.addEventListener("click", function (t) {
              t.__ti_activable_used__ || (t.__ti_activable_used__ = !0, n.setActived());
            });
          }
        });
      }
    }
  };
}(),
    VueTiCom = _ref33.VueTiCom,
    _ref34 = function () {
  return {
    WalnutAppMain: function () {
      var _WalnutAppMain = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee44() {
        var _ref134,
            _ref134$rs,
            t,
            _ref134$appName,
            e,
            _ref134$preloads,
            i,
            _ref134$debug,
            n,
            _ref134$logging,
            s,
            _ref134$shortcute,
            r,
            a,
            _ref134$lang,
            o,
            _ref134$viewport,
            l,
            _t74,
            h,
            _t75,
            _iterator65,
            _step65,
            _e97,
            _t76,
            c,
            _t77,
            _t78,
            _iterator66,
            _step66,
            _t79,
            _e99,
            _i85,
            u,
            d,
            _args44 = arguments;

        return regeneratorRuntime.wrap(function _callee44$(_context44) {
          while (1) {
            switch (_context44.prev = _context44.next) {
              case 0:
                _ref134 = _args44.length > 0 && _args44[0] !== undefined ? _args44[0] : {}, _ref134$rs = _ref134.rs, t = _ref134$rs === void 0 ? "/gu/rs/" : _ref134$rs, _ref134$appName = _ref134.appName, e = _ref134$appName === void 0 ? "wn.manager" : _ref134$appName, _ref134$preloads = _ref134.preloads, i = _ref134$preloads === void 0 ? [] : _ref134$preloads, _ref134$debug = _ref134.debug, n = _ref134$debug === void 0 ? !1 : _ref134$debug, _ref134$logging = _ref134.logging, s = _ref134$logging === void 0 ? {
                  root: "warn"
                } : _ref134$logging, _ref134$shortcute = _ref134.shortcute, r = _ref134$shortcute === void 0 ? !0 : _ref134$shortcute, a = _ref134.theme, _ref134$lang = _ref134.lang, o = _ref134$lang === void 0 ? "zh-cn" : _ref134$lang, _ref134$viewport = _ref134.viewport, l = _ref134$viewport === void 0 ? {
                  phoneMaxWidth: 540,
                  tabletMaxWidth: 768,
                  designWidth: 1e3,
                  max: 100,
                  min: 80
                } : _ref134$viewport;

                if (!(Ti.AddResourcePrefix(t), Vue.use(Ti.Vue.EventBubble), Vue.use(Ti.Vue.TiCom), Ti.SetForDev(n), Ti.SetLogLevel(s.root), _.forEach(s.names, function (t, e) {
                  return Ti.SetLogLevel(e, t);
                }), r && Ti.Shortcut.startListening(), l && Ti.Viewport.startListening(), Ti.SetAppName(e), Ti.Config.set({
                  prefix: {
                    app: "/a/load/",
                    MyApp: "/a/load/".concat(e, "/"),
                    theme: "".concat(t, "ti/theme/"),
                    lib: "".concat(t, "ti/lib/"),
                    deps: "".concat(t, "ti/deps/"),
                    dist: "".concat(t, "ti/dist/"),
                    mod: "".concat(t, "ti/mod/"),
                    com: "".concat(t, "ti/com/"),
                    i18n: "".concat(t, "ti/i18n/")
                  },
                  alias: {
                    "^./": "@MyApp:",
                    "^@MyApp:?$": "@MyApp:_app.json",
                    "^@i18n:(.+)$": "@i18n:".concat(o, "/$1"),
                    "/i18n/": "/i18n/".concat(o, "/"),
                    "^(@[A-Za-z]+):i18n/(.+)$": "$1:i18n/".concat(o, "/$2")
                  },
                  suffix: {
                    "^@theme:": ".css",
                    "^@app:": "/_app.json",
                    "(^@mod:|[/:]mod/)": "/_mod.json",
                    "(^@com:|[/:]com/)": "/_com.json",
                    "(^@i18n:|[/:]i18n/)": ".i18n.json"
                  },
                  lang: o
                }), !_.isEmpty(i))) {
                  _context44.next = 6;
                  break;
                }

                _t74 = [];

                _.forEach(i, function (e) {
                  _t74.push(Ti.Load(e));
                });

                _context44.next = 6;
                return Promise.all(_t74);

              case 6:
                _context44.t0 = Ti.I18n;
                _context44.next = 9;
                return Ti.Load(["@i18n:_ti", "@i18n:_wn", "@i18n:_net", "@i18n:web", "@i18n:ti-datetime"]);

              case 9:
                _context44.t1 = _context44.sent;

                _context44.t0.put.call(_context44.t0, _context44.t1);

                _context44.next = 13;
                return Wn.Sys.exec("ti config -cqn", {
                  appName: e,
                  as: "json"
                });

              case 13:
                h = _context44.sent;
                _.isEmpty(h) || Ti.Config.update(h);
                _context44.t2 = h.i18n;

                if (!_context44.t2) {
                  _context44.next = 22;
                  break;
                }

                _context44.t3 = Ti.I18n;
                _context44.next = 20;
                return Ti.Load(h.i18n);

              case 20:
                _context44.t4 = _context44.sent;

                _context44.t3.put.call(_context44.t3, _context44.t4);

              case 22:
                if (!h.css) {
                  _context44.next = 42;
                  break;
                }

                _t75 = [].concat(h.css);
                _iterator65 = _createForOfIteratorHelper(_t75);
                _context44.prev = 25;

                _iterator65.s();

              case 27:
                if ((_step65 = _iterator65.n()).done) {
                  _context44.next = 34;
                  break;
                }

                _e97 = _step65.value;
                _t76 = _.template(_e97)({
                  theme: a
                });
                _context44.next = 32;
                return Ti.Load(_t76);

              case 32:
                _context44.next = 27;
                break;

              case 34:
                _context44.next = 39;
                break;

              case 36:
                _context44.prev = 36;
                _context44.t5 = _context44["catch"](25);

                _iterator65.e(_context44.t5);

              case 39:
                _context44.prev = 39;

                _iterator65.f();

                return _context44.finish(39);

              case 42:
                _context44.next = 44;
                return Ti.Load("@MyApp");

              case 44:
                c = _context44.sent;

                if (!(_.assign(c.data, h.gui), _.isEmpty(h.components) || Ti.Util.pushUniqValue(c, "components", h.components), _.isEmpty(h.deps) || Ti.Util.pushUniqValue(c, "deps", h.deps), !_.isEmpty(h.preloads))) {
                  _context44.next = 50;
                  break;
                }

                _t77 = [];

                _.forEach(h.preloads, function (e) {
                  _t77.push(Ti.Load(e));
                });

                _context44.next = 50;
                return Promise.all(_t77);

              case 50:
                if (!_.isEmpty(h.rsPrefixes)) {
                  _t78 = _.concat(h.rsPrefixes);
                  Ti.AddResourcePrefix.apply(Ti, _toConsumableArray(_t78));
                }

                _iterator66 = _createForOfIteratorHelper(_.keys(h.global));
                _context44.prev = 52;

                _iterator66.s();

              case 54:
                if ((_step66 = _iterator66.n()).done) {
                  _context44.next = 63;
                  break;
                }

                _t79 = _step66.value;
                _e99 = h.global[_t79];
                _context44.next = 59;
                return Ti.Load(_e99);

              case 59:
                _i85 = _context44.sent;
                window[_t79] = _i85;

              case 61:
                _context44.next = 54;
                break;

              case 63:
                _context44.next = 68;
                break;

              case 65:
                _context44.prev = 65;
                _context44.t6 = _context44["catch"](52);

                _iterator66.e(_context44.t6);

              case 68:
                _context44.prev = 68;

                _iterator66.f();

                return _context44.finish(68);

              case 71:
                Wn.Dict.setup(h.dictionary);
                u = Ti.App(c, /*#__PURE__*/function () {
                  var _ref135 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee43(t) {
                    var _e98;

                    return regeneratorRuntime.wrap(function _callee43$(_context43) {
                      while (1) {
                        switch (_context43.prev = _context43.next) {
                          case 0:
                            if (!t.varLoadPath) {
                              _context43.next = 5;
                              break;
                            }

                            _context43.next = 3;
                            return Wn.Io.loadContent(t.varLoadPath, {
                              as: "json"
                            });

                          case 3:
                            _e98 = _context43.sent;

                            _.set(t, "data.vars", _e98);

                          case 5:
                          case "end":
                            return _context43.stop();
                        }
                      }
                    }, _callee43);
                  }));

                  return function (_x37) {
                    return _ref135.apply(this, arguments);
                  };
                }());
                _context44.next = 75;
                return u.init();

              case 75:
                Ti.Dom.watchAutoRootFontSize(l, function (_ref136) {
                  var t = _ref136.$root,
                      e = _ref136.mode,
                      i = _ref136.fontSize;
                  t.style.fontSize = i + "px", t.setAttribute("as", e), Ti.App.eachInstance(function (t) {
                    t.commit("viewport/setMode", e);
                  });
                });
                u.commit("session/set", _app.session);
                Wn.Session.setup(_app.session);
                u.mountTo("#app");
                Ti.App.pushInstance(u);
                d = "~";
                _app.obj && (d = "id:" + _app.obj.id);
                _context44.next = 84;
                return u.dispatch("current/reload", d);

              case 84:
                return _context44.abrupt("return", u.get("obj"));

              case 85:
              case "end":
                return _context44.stop();
            }
          }
        }, _callee44, null, [[25, 36, 39, 42], [52, 65, 68, 71]]);
      }));

      function WalnutAppMain() {
        return _WalnutAppMain.apply(this, arguments);
      }

      return WalnutAppMain;
    }()
  };
}(),
    WalnutAppMain = _ref34.WalnutAppMain,
    _ref35 = function () {
  return {
    WebAppMain: function () {
      var _WebAppMain = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee45() {
        var _ref137,
            _ref137$rs,
            t,
            _ref137$siteRs,
            e,
            _ref137$vars,
            i,
            _ref137$lang,
            n,
            s,
            r,
            a,
            _ref137$preloads,
            o,
            _ref137$debug,
            l,
            _ref137$logging,
            h,
            _ref137$shortcute,
            c,
            _ref137$viewport,
            u,
            _t80,
            _t81,
            _iterator67,
            _step67,
            _e100,
            d,
            _args45 = arguments;

        return regeneratorRuntime.wrap(function _callee45$(_context45) {
          while (1) {
            switch (_context45.prev = _context45.next) {
              case 0:
                _ref137 = _args45.length > 0 && _args45[0] !== undefined ? _args45[0] : {}, _ref137$rs = _ref137.rs, t = _ref137$rs === void 0 ? "/gu/rs/" : _ref137$rs, _ref137$siteRs = _ref137.siteRs, e = _ref137$siteRs === void 0 ? "/" : _ref137$siteRs, _ref137$vars = _ref137.vars, i = _ref137$vars === void 0 ? {} : _ref137$vars, _ref137$lang = _ref137.lang, n = _ref137$lang === void 0 ? "zh-cn" : _ref137$lang, s = _ref137.appJson, r = _ref137.siteId, a = _ref137.domain, _ref137$preloads = _ref137.preloads, o = _ref137$preloads === void 0 ? [] : _ref137$preloads, _ref137$debug = _ref137.debug, l = _ref137$debug === void 0 ? !1 : _ref137$debug, _ref137$logging = _ref137.logging, h = _ref137$logging === void 0 ? {
                  root: "warn"
                } : _ref137$logging, _ref137$shortcute = _ref137.shortcute, c = _ref137$shortcute === void 0 ? !0 : _ref137$shortcute, _ref137$viewport = _ref137.viewport, u = _ref137$viewport === void 0 ? {
                  phoneMaxWidth: 640,
                  tabletMaxWidth: 900,
                  designWidth: 1200,
                  max: 100,
                  min: 70
                } : _ref137$viewport;

                if (!(t = _.get(i, "rs") || t, e = _.get(i, "siteRs") || e, n = _.get(i, "lang") || n, Ti.AddResourcePrefix(t, e), Vue.use(Ti.Vue.EventBubble), Vue.use(Ti.Vue.TiCom), Ti.SetForDev(l), Ti.SetLogLevel(h.root), _.forEach(h.names, function (t, e) {
                  return Ti.SetLogLevel(e, t);
                }), c && Ti.Shortcut.startListening(), u && Ti.Viewport.startListening(), Ti.Config.set({
                  prefix: {
                    Site: "".concat(e),
                    theme: "".concat(t, "ti/theme/"),
                    lib: "".concat(t, "ti/lib/"),
                    deps: "".concat(t, "ti/deps/"),
                    dist: "".concat(t, "ti/dist/"),
                    mod: "".concat(t, "ti/mod/"),
                    com: "".concat(t, "ti/com/"),
                    i18n: "".concat(t, "ti/i18n/")
                  },
                  alias: {
                    "^./": "@Site:",
                    "^@Site:?$": "@Site:_app.json",
                    "^@i18n:(.+)$": "@i18n:".concat(n, "/$1"),
                    "[:/]i18n/": "$&".concat(n, "/")
                  },
                  suffix: {
                    "^@theme:": ".css",
                    "^@app:": "/_app.json",
                    "(^@mod:|[/:]mod/)": "/_mod.json",
                    "(^@com:|[/:]com/)": "/_com.json",
                    "(^@i18n:|[/:]i18n/)": ".i18n.json"
                  },
                  lang: n
                }), !_.isEmpty(o))) {
                  _context45.next = 6;
                  break;
                }

                _t80 = [];

                _.forEach(o, function (e) {
                  _t80.push(Ti.Load(e));
                });

                _context45.next = 6;
                return Promise.all(_t80);

              case 6:
                _context45.t0 = Ti.I18n;
                _context45.next = 9;
                return Ti.Load(["@i18n:_ti", "@i18n:_net", "@i18n:_wn", "@i18n:web", "@i18n:ti-datetime"]);

              case 9:
                _context45.t1 = _context45.sent;

                _context45.t0.put.call(_context45.t0, _context45.t1);

                if (!s.css) {
                  _context45.next = 32;
                  break;
                }

                _t81 = _.concat(s.css);
                _iterator67 = _createForOfIteratorHelper(_t81);
                _context45.prev = 14;

                _iterator67.s();

              case 16:
                if ((_step67 = _iterator67.n()).done) {
                  _context45.next = 24;
                  break;
                }

                _e100 = _step67.value;
                _context45.t2 = _e100;

                if (!_context45.t2) {
                  _context45.next = 22;
                  break;
                }

                _context45.next = 22;
                return Ti.Load(_e100);

              case 22:
                _context45.next = 16;
                break;

              case 24:
                _context45.next = 29;
                break;

              case 26:
                _context45.prev = 26;
                _context45.t3 = _context45["catch"](14);

                _iterator67.e(_context45.t3);

              case 29:
                _context45.prev = 29;

                _iterator67.f();

                return _context45.finish(29);

              case 32:
                _.isArray(i.deps) && Ti.Util.pushUniqValue(s, "deps", i.deps);
                _context45.next = 35;
                return Ti.App(s, function (e) {
                  return _.assign(e.store.state, i, {
                    loading: !1,
                    siteId: r,
                    domain: a,
                    rs: t
                  }), e;
                });

              case 35:
                d = _context45.sent;
                _context45.next = 38;
                return d.init();

              case 38:
                Ti.App.pushInstance(d);
                Ti.SetAppName(d.name());
                Ti.Dom.watchAutoRootFontSize(u, function (_ref138) {
                  var t = _ref138.$root,
                      e = _ref138.mode,
                      i = _ref138.fontSize;
                  t.style.fontSize = i + "px", t.setAttribute("as", e), Ti.App.eachInstance(function (t) {
                    t.commit("viewport/setMode", e);
                  });
                });
                d.mountTo("#app");
                _context45.next = 44;
                return d.dispatch("reload");

              case 44:
                return _context45.abrupt("return", d);

              case 45:
              case "end":
                return _context45.stop();
            }
          }
        }, _callee45, null, [[14, 26, 29, 32]]);
      }));

      function WebAppMain() {
        return _WebAppMain.apply(this, arguments);
      }

      return WebAppMain;
    }()
  };
}(),
    WebAppMain = _ref35.WebAppMain,
    LOAD_CACHE = {};

var RS_PREFIXs = [];
var ENV = {
  version: "2.5-20201027.205544",
  dev: !1,
  appName: null,
  session: {},
  log: {
    ROOT: 0
  }
},
    LOG_LEVELS = {
  error: 0,
  warn: 1,
  info: 2,
  debug: 3,
  trace: 4
},
    G_FUNCS = {};
var Ti = {
  Alg: Alg,
  Be: Be,
  S: S,
  Util: Util,
  App: App,
  Err: Err,
  Config: Config,
  Dom: Dom,
  Css: Css,
  Load: Load,
  Http: Http,
  Icons: Icons,
  I18n: I18n,
  Shortcut: Shortcut,
  Fuse: Fuse,
  Random: Random,
  Storage: Storage,
  Types: Types,
  Viewport: Viewport,
  WWW: WWW,
  GPS: GPS,
  Validate: Validate,
  DateTime: DateTime,
  Num: Num,
  Trees: Trees,
  Bank: Bank,
  Mapping: Mapping,
  Dict: Dict,
  DictFactory: DictFactory,
  Rects: Rects,
  Rect: Rect,
  AutoMatch: AutoMatch,
  Websocket: TiWebsocket,
  Preload: Preload,
  MatchCache: MatchCache,
  AddResourcePrefix: AddResourcePrefix,
  RS_PREFIXs: RS_PREFIXs,
  LOAD_CACHE: LOAD_CACHE,
  WalnutAppMain: WalnutAppMain,
  WebAppMain: WebAppMain,
  Vue: {
    EventBubble: VueEventBubble,
    TiCom: VueTiCom
  },
  Alert: Alert,
  Confirm: Confirm,
  Prompt: Prompt,
  Toast: Toast,
  Captcha: Captcha,
  Env: function Env(t, e) {
    return Ti.Util.geset(ENV, t, e);
  },
  Version: function Version() {
    return Ti.Env("version");
  },
  SetForDev: function SetForDev() {
    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !0;
    Ti.Env({
      dev: t
    });
  },
  IsForDev: function IsForDev() {
    return Ti.Env("dev");
  },
  SetAppName: function SetAppName(t) {
    Ti.Env({
      appName: t
    });
  },
  GetAppName: function GetAppName() {
    return Ti.Env("appName");
  },
  SetLogLevel: function SetLogLevel() {
    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
    var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "ROOT";
    _.isString(t) && (t = LOG_LEVELS[t] || 0), ENV.log[e] = t;
  },
  IsError: function IsError(t) {
    return _IS_LOG(t, LOG_LEVELS.error);
  },
  IsWarn: function IsWarn(t) {
    return _IS_LOG(t, LOG_LEVELS.warn);
  },
  IsInfo: function IsInfo(t) {
    return _IS_LOG(t, LOG_LEVELS.info);
  },
  IsDebug: function IsDebug(t) {
    return _IS_LOG(t, LOG_LEVELS.debug);
  },
  IsTrace: function IsTrace(t) {
    return _IS_LOG(t, LOG_LEVELS.trace);
  },
  Invoke: function Invoke(t) {
    var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
    var i = arguments.length > 2 ? arguments[2] : undefined;
    if (_.isFunction(t)) return i = i || this, t.apply(i, e);
  },
  InvokeBy: function InvokeBy() {
    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var e = arguments.length > 1 ? arguments[1] : undefined;
    var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
    var n = arguments.length > 3 ? arguments[3] : undefined;
    if (t) return Ti.Invoke(t[e], i, n || t);
  },
  DoInvoke: function DoInvoke(t) {
    var _arguments2 = arguments,
        _this24 = this;

    return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee46() {
      var e, i;
      return regeneratorRuntime.wrap(function _callee46$(_context46) {
        while (1) {
          switch (_context46.prev = _context46.next) {
            case 0:
              e = _arguments2.length > 1 && _arguments2[1] !== undefined ? _arguments2[1] : [];
              i = _arguments2.length > 2 ? _arguments2[2] : undefined;

              if (!_.isFunction(t)) {
                _context46.next = 7;
                break;
              }

              i = i || _this24;
              _context46.next = 6;
              return t.apply(i, e);

            case 6:
              return _context46.abrupt("return", _context46.sent);

            case 7:
            case "end":
              return _context46.stop();
          }
        }
      }, _callee46);
    }))();
  },
  DoInvokeBy: function DoInvokeBy() {
    var _arguments3 = arguments;
    return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee47() {
      var t, e, i, n;
      return regeneratorRuntime.wrap(function _callee47$(_context47) {
        while (1) {
          switch (_context47.prev = _context47.next) {
            case 0:
              t = _arguments3.length > 0 && _arguments3[0] !== undefined ? _arguments3[0] : {};
              e = _arguments3.length > 1 ? _arguments3[1] : undefined;
              i = _arguments3.length > 2 && _arguments3[2] !== undefined ? _arguments3[2] : [];
              n = _arguments3.length > 3 ? _arguments3[3] : undefined;

              if (!t) {
                _context47.next = 8;
                break;
              }

              _context47.next = 7;
              return Ti.DoInvoke(t[e], i, n || t);

            case 7:
              return _context47.abrupt("return", _context47.sent);

            case 8:
            case "end":
              return _context47.stop();
          }
        }
      }, _callee47);
    }))();
  },
  AddGlobalFuncs: function AddGlobalFuncs(t) {
    _.assign(G_FUNCS, t);
  },
  GlobalFuncs: function GlobalFuncs() {
    return _.assign({}, Ti.Types, G_FUNCS);
  }
};
exports.Ti = Ti;
var _default = Ti;
exports["default"] = _default;
window && (window.Ti = Ti);