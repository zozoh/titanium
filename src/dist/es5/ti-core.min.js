"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.Ti = void 0;

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _toArray(arr) { return _arrayWithHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableRest(); }

function _objectDestructuringEmpty(obj) { if (obj == null) throw new TypeError("Cannot destructure undefined"); }

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { "default": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj["default"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _readOnlyError(name) { throw new Error("\"" + name + "\" is read-only"); }

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }

function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }

function _createForOfIteratorHelper(o) { if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function (_e88) { function e(_x36) { return _e88.apply(this, arguments); } e.toString = function () { return _e88.toString(); }; return e; }(function (e) { throw e; }), f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function (_e89) { function e(_x37) { return _e89.apply(this, arguments); } e.toString = function () { return _e89.toString(); }; return e; }(function (e) { didErr = true; err = e; }), f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(n); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function Preload(t, e) {
  LOAD_CACHE[t] = e;
}

function AddResourcePrefix() {
  for (var _len = arguments.length, t = new Array(_len), _key = 0; _key < _len; _key++) {
    t[_key] = arguments[_key];
  }

  for (var _i = 0, _t = t; _i < _t.length; _i++) {
    var e = _t[_i];
    e && (e.endsWith("/") ? RS_PREFIXs.push(e) : RS_PREFIXs.push(e + "/"));
  }
}

function MatchCache(t) {
  if (t) {
    var _iterator = _createForOfIteratorHelper(RS_PREFIXs),
        _step;

    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var e = _step.value;

        if (e && t.startsWith(e)) {
          t = t.substring(e.length);
          break;
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }

    return LOAD_CACHE[t];
  }
}

function _IS_LOG() {
  var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "ROOT";
  var e = arguments.length > 1 ? arguments[1] : undefined;
  var i = ENV.log[t];
  return _.isUndefined(i) && (i = ENV.log.ROOT), i >= e;
}

var _ref = function () {
  return {
    Alert: function () {
      var _Alert = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
        var t,
            _ref35,
            e,
            i,
            _ref35$type,
            s,
            _ref35$textOk,
            n,
            _ref35$position,
            r,
            _ref35$width,
            o,
            a,
            _ref35$vars,
            l,
            h,
            c,
            u,
            _args = arguments;

        return regeneratorRuntime.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                t = _args.length > 0 && _args[0] !== undefined ? _args[0] : "";
                _ref35 = _args.length > 1 && _args[1] !== undefined ? _args[1] : {}, e = _ref35.title, i = _ref35.icon, _ref35$type = _ref35.type, s = _ref35$type === void 0 ? "track" : _ref35$type, _ref35$textOk = _ref35.textOk, n = _ref35$textOk === void 0 ? "i18n:ok" : _ref35$textOk, _ref35$position = _ref35.position, r = _ref35$position === void 0 ? "center" : _ref35$position, _ref35$width = _ref35.width, o = _ref35$width === void 0 ? 480 : _ref35$width, a = _ref35.height, _ref35$vars = _ref35.vars, l = _ref35$vars === void 0 ? {} : _ref35$vars;
                h = Ti.I18n.textf(t, l), c = i || Ti.Icons.get(s, "zmdi-info"), u = e || Ti.I18n.get(s);
                _context.next = 5;
                return Ti.App.Open({
                  type: s,
                  width: o,
                  height: a,
                  position: r,
                  title: u,
                  closer: !1,
                  actions: [{
                    text: n,
                    handler: function handler() {
                      return !0;
                    }
                  }],
                  comType: "modal-inner-body",
                  comConf: {
                    icon: c,
                    text: h
                  },
                  components: {
                    name: "modal-inner-body",
                    globally: !1,
                    props: {
                      icon: void 0,
                      text: void 0
                    },
                    template: '<div class="ti-msg-body as-alert">\n          <div class="as-icon"><ti-icon :value="icon"/></div>\n          <div class="as-text">{{text}}</div>\n        </div>'
                  }
                });

              case 5:
                return _context.abrupt("return", _context.sent);

              case 6:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }));

      function Alert() {
        return _Alert.apply(this, arguments);
      }

      return Alert;
    }()
  };
}(),
    Alert = _ref.Alert,
    _ref2 = function () {
  return {
    Confirm: function () {
      var _Confirm = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {
        var t,
            _ref36,
            e,
            i,
            _ref36$closer,
            s,
            _ref36$type,
            n,
            _ref36$position,
            r,
            _ref36$textYes,
            o,
            _ref36$textNo,
            a,
            _ref36$width,
            l,
            h,
            c,
            u,
            d,
            _args2 = arguments;

        return regeneratorRuntime.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                t = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : "";
                _ref36 = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : {}, e = _ref36.title, i = _ref36.icon, _ref36$closer = _ref36.closer, s = _ref36$closer === void 0 ? !1 : _ref36$closer, _ref36$type = _ref36.type, n = _ref36$type === void 0 ? "warn" : _ref36$type, _ref36$position = _ref36.position, r = _ref36$position === void 0 ? "center" : _ref36$position, _ref36$textYes = _ref36.textYes, o = _ref36$textYes === void 0 ? "i18n:yes" : _ref36$textYes, _ref36$textNo = _ref36.textNo, a = _ref36$textNo === void 0 ? "i18n:no" : _ref36$textNo, _ref36$width = _ref36.width, l = _ref36$width === void 0 ? 480 : _ref36$width, h = _ref36.height;
                c = Ti.I18n.text(t), u = i || "zmdi-help", d = e || "i18n:confirm";
                _context2.next = 5;
                return Ti.App.Open({
                  type: n,
                  width: l,
                  height: h,
                  position: r,
                  title: d,
                  closer: s,
                  actions: [{
                    text: o,
                    handler: function handler() {
                      return !0;
                    }
                  }, {
                    text: a,
                    handler: function handler() {
                      return !1;
                    }
                  }],
                  comType: "modal-inner-body",
                  comConf: {
                    icon: u,
                    text: c
                  },
                  components: {
                    name: "modal-inner-body",
                    globally: !1,
                    props: {
                      icon: void 0,
                      text: void 0
                    },
                    template: '<div class="ti-msg-body as-confirm">\n          <div class="as-icon"><ti-icon :value="icon"/></div>\n          <div class="as-text">{{text}}</div>\n        </div>'
                  }
                });

              case 5:
                return _context2.abrupt("return", _context2.sent);

              case 6:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2);
      }));

      function Confirm() {
        return _Confirm.apply(this, arguments);
      }

      return Confirm;
    }()
  };
}(),
    Confirm = _ref2.Confirm,
    _ref3 = function () {
  return {
    Prompt: function () {
      var _Prompt = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {
        var t,
            _ref37,
            _ref37$title,
            e,
            i,
            _ref37$type,
            s,
            _ref37$position,
            n,
            r,
            o,
            _ref37$textOk,
            a,
            _ref37$textCancel,
            l,
            _ref37$width,
            h,
            c,
            _ref37$trimed,
            u,
            _ref37$placeholder,
            d,
            _ref37$valueCase,
            p,
            _ref37$value,
            f,
            m,
            g,
            _args3 = arguments;

        return regeneratorRuntime.wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                t = _args3.length > 0 && _args3[0] !== undefined ? _args3[0] : "";
                _ref37 = _args3.length > 1 && _args3[1] !== undefined ? _args3[1] : {}, _ref37$title = _ref37.title, e = _ref37$title === void 0 ? "i18n:prompt" : _ref37$title, i = _ref37.icon, _ref37$type = _ref37.type, s = _ref37$type === void 0 ? "info" : _ref37$type, _ref37$position = _ref37.position, n = _ref37$position === void 0 ? "center" : _ref37$position, r = _ref37.iconOk, o = _ref37.iconCancel, _ref37$textOk = _ref37.textOk, a = _ref37$textOk === void 0 ? "i18n:ok" : _ref37$textOk, _ref37$textCancel = _ref37.textCancel, l = _ref37$textCancel === void 0 ? "i18n:cancel" : _ref37$textCancel, _ref37$width = _ref37.width, h = _ref37$width === void 0 ? 480 : _ref37$width, c = _ref37.height, _ref37$trimed = _ref37.trimed, u = _ref37$trimed === void 0 ? !0 : _ref37$trimed, _ref37$placeholder = _ref37.placeholder, d = _ref37$placeholder === void 0 ? "" : _ref37$placeholder, _ref37$valueCase = _ref37.valueCase, p = _ref37$valueCase === void 0 ? null : _ref37$valueCase, _ref37$value = _ref37.value, f = _ref37$value === void 0 ? "" : _ref37$value;
                m = Ti.I18n.text(t), g = i || "zmdi-keyboard";
                _context3.next = 5;
                return Ti.App.Open({
                  type: s,
                  width: h,
                  height: c,
                  position: n,
                  title: e,
                  closer: !1,
                  result: f,
                  textOk: a,
                  textCancel: l,
                  iconOk: r,
                  iconCancel: o,
                  comType: "modal-inner-body",
                  components: [{
                    name: "modal-inner-body",
                    globally: !1,
                    data: {
                      icon: g,
                      text: m,
                      placeholder: d || f,
                      trimed: u,
                      valueCase: p
                    },
                    props: {
                      value: null
                    },
                    template: '<div class="ti-msg-body as-prompt"\n          v-ti-activable>\n          <div class="as-icon"><ti-icon :value="icon"/></div>\n          <div class="as-text">\n            <div class="as-tip" v-if="text">{{text}}</div>\n            <ti-input\n              :value="value"\n              :trimed="trimed"\n              :placeholder="placeholder"\n              :value-case="valueCase"\n              :focused="true"\n              :auto-select="true"\n              @inputing="onInputing"/>\n          </div>\n        </div>',
                    methods: {
                      onInputing: function onInputing(t) {
                        this.$emit("change", t);
                      },
                      __ti_shortcut: function __ti_shortcut(t) {
                        "ENTER" == t && Ti.App(this).$vm().close(this.value);
                      }
                    }
                  }, "@com:ti/input"]
                });

              case 5:
                return _context3.abrupt("return", _context3.sent);

              case 6:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3);
      }));

      function Prompt() {
        return _Prompt.apply(this, arguments);
      }

      return Prompt;
    }()
  };
}(),
    Prompt = _ref3.Prompt,
    _ref4 = function () {
  return {
    Captcha: function () {
      var _Captcha = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {
        var t,
            _ref38,
            _ref38$title,
            e,
            _ref38$type,
            i,
            _ref38$position,
            s,
            n,
            r,
            _ref38$textOk,
            o,
            _ref38$textCancel,
            a,
            _ref38$width,
            l,
            h,
            c,
            _ref38$imgHeight,
            u,
            _ref38$textChange,
            d,
            _ref38$placeholder,
            p,
            _args4 = arguments;

        return regeneratorRuntime.wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                t = _args4.length > 0 && _args4[0] !== undefined ? _args4[0] : "";
                _ref38 = _args4.length > 1 && _args4[1] !== undefined ? _args4[1] : {}, _ref38$title = _ref38.title, e = _ref38$title === void 0 ? "i18n:captcha-tip" : _ref38$title, _ref38$type = _ref38.type, i = _ref38$type === void 0 ? "info" : _ref38$type, _ref38$position = _ref38.position, s = _ref38$position === void 0 ? "center" : _ref38$position, n = _ref38.iconOk, r = _ref38.iconCancel, _ref38$textOk = _ref38.textOk, o = _ref38$textOk === void 0 ? "i18n:ok" : _ref38$textOk, _ref38$textCancel = _ref38.textCancel, a = _ref38$textCancel === void 0 ? "i18n:cancel" : _ref38$textCancel, _ref38$width = _ref38.width, l = _ref38$width === void 0 ? 420 : _ref38$width, h = _ref38.height, c = _ref38.imgWidth, _ref38$imgHeight = _ref38.imgHeight, u = _ref38$imgHeight === void 0 ? 50 : _ref38$imgHeight, _ref38$textChange = _ref38.textChange, d = _ref38$textChange === void 0 ? "i18n:captcha-chagne" : _ref38$textChange, _ref38$placeholder = _ref38.placeholder, p = _ref38$placeholder === void 0 ? "i18n:captcha" : _ref38$placeholder;
                _context4.next = 4;
                return Ti.App.Open({
                  type: i,
                  width: l,
                  height: h,
                  position: s,
                  title: e,
                  closer: !1,
                  result: "",
                  textOk: o,
                  textCancel: a,
                  iconOk: n,
                  iconCancel: r,
                  comType: "modal-inner-body",
                  components: [{
                    name: "modal-inner-body",
                    globally: !1,
                    data: {
                      src: t,
                      timestamp: Date.now(),
                      imgWidth: c,
                      imgHeight: u,
                      textChange: d,
                      placeholder: p || value
                    },
                    props: {
                      value: null
                    },
                    template: '<div class="web-simple-form">\n          <header style="padding-bottom:0;">\n            <img ref="pic"\n              v-if="src"\n                :style="CaptchaStyle"\n                :src="CaptchaSrc"\n                @load="OnImgLoaded"/>\n          </header>\n          <section>\n            <div class="as-input">\n              <input ref="input"\n                spellcheck="false"\n                :placeholder="placeholder|i18n"\n                :value="value"\n                @input="$emit(\'change\', $refs.input.value)">\n              <span @click="timestamp = Date.now()">\n                <a>{{textChange|i18n}}</a>\n              </span>\n            </div>\n          </section>\n        </div>',
                    computed: {
                      CaptchaStyle: function CaptchaStyle() {
                        return Ti.Css.toStyle({
                          width: this.imgWidth,
                          height: this.imgHeight
                        });
                      },
                      CaptchaSrc: function CaptchaSrc() {
                        return this.src && this.timestamp > 0 ? -1 == this.src.lastIndexOf("?") ? this.src + "?_t=" + this.timestamp : this.src + "&_t=" + this.timestamp : this.src;
                      }
                    },
                    methods: {
                      OnImgLoaded: function OnImgLoaded() {
                        Ti.Be.BlinkIt(this.$refs.pic);
                      },
                      __ti_shortcut: function __ti_shortcut(t) {
                        "ENTER" == t && Ti.App(this).$vm().close(this.value);
                      }
                    }
                  }]
                });

              case 4:
                return _context4.abrupt("return", _context4.sent);

              case 5:
              case "end":
                return _context4.stop();
            }
          }
        }, _callee4);
      }));

      function Captcha() {
        return _Captcha.apply(this, arguments);
      }

      return Captcha;
    }()
  };
}(),
    Captcha = _ref4.Captcha,
    _ref5 = function () {
  var _ref39 = function () {
    var t = /*#__PURE__*/function () {
      function t() {
        var _ref40 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            _ref40$setItemViewpor = _ref40.setItemViewportMode,
            _t2 = _ref40$setItemViewpor === void 0 ? _.identity : _ref40$setItemViewpor;

        _classCallCheck(this, t);

        this.viewportMode = "desktop", this.stack = [], this.setItemViewportMode = _t2;
      }

      _createClass(t, [{
        key: "push",
        value: function push(t) {
          t && (this.setItemViewportMode(t, this.viewportMode), this.stack.push(t));
        }
      }, {
        key: "remove",
        value: function remove(t) {
          var e,
              i = [];

          var _iterator2 = _createForOfIteratorHelper(this.stack),
              _step2;

          try {
            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
              var _s = _step2.value;
              _s === t ? e = (_readOnlyError("e"), _s) : i.push(_s);
            }
          } catch (err) {
            _iterator2.e(err);
          } finally {
            _iterator2.f();
          }

          return this.stack = i, e;
        }
      }, {
        key: "setViewportMode",
        value: function setViewportMode(t) {
          this.viewportMode = t;

          var _iterator3 = _createForOfIteratorHelper(this.stack),
              _step3;

          try {
            for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
              var _e = _step3.value;
              this.setItemViewportMode(_e, t);
            }
          } catch (err) {
            _iterator3.e(err);
          } finally {
            _iterator3.f();
          }
        }
      }, {
        key: "pop",
        value: function pop() {
          return this.stack.pop();
        }
      }]);

      return t;
    }();

    return {
      TiRuntimeStack: t
    };
  }(),
      t = _ref39.TiRuntimeStack,
      e = new t(),
      i = Symbol("toa-options"),
      s = Symbol("toa-app-instance");

  var n = /*#__PURE__*/function () {
    function n() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      _classCallCheck(this, n);

      this[i] = t;
    }

    _createClass(n, [{
      key: "open",
      value: function () {
        var _open = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5() {
          var _this$i, _this$i$position, t, _this$i$icon, n, _this$i$content, r, _this$i$vars, o, _this$i$type, a, _this$i$spacing, l, _this$i$duration, h, _this$i$closer, c, u, d, p;

          return regeneratorRuntime.wrap(function _callee5$(_context5) {
            while (1) {
              switch (_context5.prev = _context5.next) {
                case 0:
                  _this$i = this[i], _this$i$position = _this$i.position, t = _this$i$position === void 0 ? "center" : _this$i$position, _this$i$icon = _this$i.icon, n = _this$i$icon === void 0 ? !0 : _this$i$icon, _this$i$content = _this$i.content, r = _this$i$content === void 0 ? "i18n:empty" : _this$i$content, _this$i$vars = _this$i.vars, o = _this$i$vars === void 0 ? {} : _this$i$vars, _this$i$type = _this$i.type, a = _this$i$type === void 0 ? "info" : _this$i$type, _this$i$spacing = _this$i.spacing, l = _this$i$spacing === void 0 ? 0 : _this$i$spacing, _this$i$duration = _this$i.duration, h = _this$i$duration === void 0 ? 3e3 : _this$i$duration, _this$i$closer = _this$i.closer, c = _this$i$closer === void 0 ? !0 : _this$i$closer, u = Ti.Dom.createElement({
                    $p: document.body,
                    className: "the-stub"
                  });
                  !0 === n && (n = Ti.Icons.get(a));
                  d = {
                    template: '<div class="ti-toast"\n        :class="topClass"\n        :style="topStyle"\n        @click="onClose">\n        <transition :name="transName"\n          @after-leave="onAfterLeave">\n          <div v-if="!hidden"\n            class="toast-con"\n            @click.stop>\n            <div v-if="icon"\n              class="toast-icon">\n              <ti-icon :value="icon"/>\n            </div>\n            <div class="toast-body">{{content|i18n(vars)}}</div>\n            <div v-if="closer && \'center\'!=position"\n              class="toast-closer">\n              <a @click="onClose">{{\'close\'|i18n}}</a>\n            </div>\n          </div>\n        </transition>\n      </div>',
                    data: {
                      position: t,
                      icon: n,
                      content: r,
                      type: a,
                      closer: c,
                      vars: o,
                      hidden: !0
                    },
                    store: {
                      modules: {
                        viewport: "@mod:ti/viewport"
                      }
                    },
                    computed: {
                      topClass: function topClass() {
                        return Ti.Css.mergeClassName({
                          "as-bar": "center" != this.position,
                          "as-block": "center" == this.position
                        }, ["at-".concat(this.position), "is-".concat(this.type)]);
                      },
                      topStyle: function topStyle() {
                        if ("center" != this.position) return {
                          padding: Ti.Css.toSize(l)
                        };
                      },
                      transName: function transName() {
                        return "toast-trans-at-".concat(this.position);
                      }
                    },
                    methods: {
                      onClose: function onClose() {
                        this.closer && (this.hidden = !0);
                      },
                      onAfterLeave: function onAfterLeave() {
                        Ti.App(this).$toast.close();
                      },
                      doOpen: function doOpen() {
                        this.hidden = !1;
                      },
                      doClose: function doClose() {
                        this.hidden = !0;
                      }
                    }
                  };
                  _context5.next = 5;
                  return Ti.App(d);

                case 5:
                  p = _context5.sent;
                  this[s] = p;
                  _context5.next = 9;
                  return p.init();

                case 9:
                  p.mountTo(u);
                  p.$toast = this;
                  p.root("doOpen");
                  e.push(this);
                  h > 0 && _.delay(function () {
                    p.root("doClose");
                  }, h);
                  return _context5.abrupt("return", this);

                case 15:
                case "end":
                  return _context5.stop();
              }
            }
          }, _callee5, this);
        }));

        function open() {
          return _open.apply(this, arguments);
        }

        return open;
      }()
    }, {
      key: "$app",
      value: function $app() {
        return this[s];
      }
    }, {
      key: "close",
      value: function close() {
        e.remove(this), this.$app().destroy(!0);
      }
    }]);

    return n;
  }();

  return {
    Toast: {
      Open: function Open(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "info";
        var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "top";
        _.isString(t) && (t = _.isPlainObject(e) ? _.assign({
          position: i,
          type: "info",
          content: t,
          vars: e
        }, e) : {
          type: e || "info",
          position: i || "top",
          content: t
        });
        var s = new n(t);
        return s.open(), s;
      },
      Close: function Close() {
        var t = e.pop();
        t && t.close();
      }
    }
  };
}(),
    Toast = _ref5.Toast,
    _ref6 = function () {
  var t = {
    Open: function Open(t) {
      var _ref41 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref41$target = _ref41.target,
          e = _ref41$target === void 0 ? "_blank" : _ref41$target,
          _ref41$method = _ref41.method,
          i = _ref41$method === void 0 ? "GET" : _ref41$method,
          _ref41$params = _ref41.params,
          s = _ref41$params === void 0 ? {} : _ref41$params,
          _ref41$delay = _ref41.delay,
          n = _ref41$delay === void 0 ? 100 : _ref41$delay;

      return new Promise(function (r) {
        var o = Ti.Dom.createElement({
          $p: document.body,
          tagName: "form",
          attrs: {
            target: e,
            method: i,
            action: t
          },
          props: {
            style: "display:none;"
          }
        });
        _.forEach(s, function (t, e) {
          Ti.Dom.createElement({
            $p: o,
            tagName: "input",
            attrs: {
              name: e,
              value: t,
              type: "hidden"
            }
          });
        }), _.delay(function () {
          o.submit(), Ti.Dom.remove(o), r({
            url: t,
            target: e,
            method: i,
            params: s
          });
        }, n);
      });
    },
    OpenLink: function OpenLink(e) {
      var _ref42 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref42$target = _ref42.target,
          i = _ref42$target === void 0 ? "_blank" : _ref42$target,
          _ref42$method = _ref42.method,
          s = _ref42$method === void 0 ? "GET" : _ref42$method,
          _ref42$delay = _ref42.delay,
          n = _ref42$delay === void 0 ? 100 : _ref42$delay;

      return t.Open(e.url, {
        target: i,
        method: s,
        delay: n,
        params: e.params
      });
    },
    ScrollWindowTo: function ScrollWindowTo() {
      var _ref43 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
          _ref43$x = _ref43.x,
          t = _ref43$x === void 0 ? 0 : _ref43$x,
          _ref43$y = _ref43.y,
          e = _ref43$y === void 0 ? 0 : _ref43$y;

      window.scrollTo(t, e);
    },
    BlinkIt: function BlinkIt(t, e) {
      if (0 != (t = $(t)).length) {
        "function" == typeof (e = e || {}) ? e = {
          after: e
        } : "number" == typeof e && (e = {
          speed: e
        });
        var i = t.offset(),
            s = t[0].ownerDocument,
            n = $(s),
            r = {
          width: t.outerWidth(),
          height: t.outerHeight(),
          "border-color": "#FF0",
          background: "#FFA",
          opacity: .8,
          position: "fixed",
          top: i.top - n.scrollTop(),
          left: i.left - n.scrollLeft(),
          "z-index": 9999999
        },
            o = $(e.html || '<div class="z_blink_light">&nbsp;</div>');
        o.css(r).appendTo(s.body), o.animate({
          opacity: .1
        }, e.speed || 500, function () {
          $(this).remove(), "function" == typeof e.after && e.after.apply(t);
        });
      }
    },
    EditIt: function EditIt(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var i = $(t);
      if (0 == i.length || i.hasClass("is-be-editing")) return;
      i.addClass("is-be-editing"), _.defaults(e, {
        text: null,
        width: 0,
        height: 0,
        extendWidth: !0,
        takePlace: !0,
        selectOnFocus: !0,
        copyStyle: ["letter-spacing", "margin", "border", "font-size", "font-family", "line-height", "text-align"],
        ok: function ok(t, e) {
          this.innerText = t;
        },
        context: i[0]
      });
      var s = {
        jEle: i,
        $el: i[0],
        options: e,
        oldValue: Ti.Util.fallback(e.text, i.text()),
        onCancel: function onCancel() {
          this.jMask.remove(), this.jDiv.remove(), this.jEle.css({
            visibility: ""
          }).removeClass("is-be-editing");
        },
        onOk: function onOk() {
          var t = _.trim(this.jInput.val());

          t != this.oldValue && e.ok.apply(e.context, [t, e.oldValue, e]), this.onCancel();
        }
      };
      var n = Ti.Rects.createBy(s.$el),
          r = e.width || n.width,
          o = e.height || n.height;
      var a = $('<div class="ti-be-editing as-con"><input></div>'),
          l = a.find("input"),
          h = $('<div class="ti-be-editing as-mask"></div>');

      if (_.assign(s, {
        jDiv: a,
        jInput: l,
        jMask: h,
        $div: a[0],
        $input: l[0],
        $mask: h[0],
        primaryWidth: r,
        primaryHeight: o
      }), h.css({
        position: "fixed",
        zIndex: 999999,
        top: 0,
        left: 0,
        right: 0,
        bottom: 0
      }), a.css({
        position: "fixed",
        zIndex: 1e6,
        top: n.top,
        left: n.left,
        width: r,
        height: o
      }), l.css({
        width: "100%",
        height: "100%",
        outline: "none",
        resize: "none",
        overflow: "hidden",
        padding: "0 .06rem",
        background: "rgba(255,255,50,0.8)",
        color: "#000",
        lineHeight: o
      }).attr({
        spellcheck: !1
      }).val(s.oldValue), !_.isEmpty(e.copyStyle)) {
        var _t3 = window.getComputedStyle(s.$el);

        var _i2 = _.pick(_t3, e.copyStyle);

        l.css(_i2);
      }

      return s.jMask.appendTo(document.body), s.jDiv.appendTo(document.body), s.jEle.css({
        visibility: "hidden"
      }), e.selectOnFocus ? s.$input.select() : s.$input.focus(), l.one("blur", function () {
        s.onOk();
      }), l.on("keydown", function (t) {
        var e = t.which;
        27 == e ? s.onCancel() : 13 == e && s.onOk();
      }), s;
    }
  };
  return {
    Be: t
  };
}(),
    Be = _ref6.Be,
    _Alg = {
  Alg: {
    sha1: function sha1(t) {
      return _.isString(t) || (t = JSON.stringify(t)), CryptoJS.SHA1(t).toString();
    },
    gcd: function gcd(t, e) {
      return t = Math.round(t), (e = Math.round(e)) ? this.gcd(e, t % e) : t;
    },
    gcds: function gcds() {
      var t = Array.from(arguments),
          e = _.flatten(t);

      if (0 == e.length) return NaN;
      if (1 == e.length) return e[0];

      for (var i = this.gcd(e[0], e[1]), s = 2; s < e.length; s++) {
        i = this.gcd(i, e[s]);
      }

      return i;
    },
    lcm: function lcm(t, e) {
      return t = Math.round(t), e = Math.round(e), t * e / this.gcd(t, e);
    },
    lcms: function lcms() {
      var t = Array.from(arguments),
          e = _.flatten(t);

      if (0 == e.length) return NaN;
      if (1 == e.length) return e[0];

      for (var i = this.lcm(e[0], e[1]), s = 2; s < e.length; s++) {
        i = this.lcm(i, e[s]);
      }

      return i;
    }
  }
},
    Alg = _Alg.Alg,
    _ref7 = function () {
  var TiStr = {
    sBlank: function sBlank(t, e) {
      return t || e;
    },
    isBlank: function isBlank(t) {
      return !t || /^\s*$/.test(t);
    },
    renderVars: function renderVars() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";

      var _ref44 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
          i = _ref44.iteratee,
          s = _ref44.regex,
          n = _ref44.safe;

      return (_.isString(t) || _.isNumber(t)) && (t = {
        val: t
      }), !t || _.isEmpty(t) ? _.isArray(t) ? [] : "" : TiStr.renderBy(e, t, {
        iteratee: i,
        regex: s,
        safe: n
      });
    },
    renderBy: function renderBy() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      var _ref45 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
          i = _ref45.iteratee,
          _ref45$regex = _ref45.regex,
          s = _ref45$regex === void 0 ? /(\${1,2})\{([^}]+)\}/g : _ref45$regex,
          _ref45$safe = _ref45.safe,
          n = _ref45$safe === void 0 ? !1 : _ref45$safe;

      if (!t) return _.isArray(e) ? [] : "";

      if (e = e || {}, n) {
        var _t4 = _.isRegExp(n) ? n : void 0;

        e = TiStr.safeDeep(e, _t4);
      }

      if (_.isRegExp(i) && (s = i, i = void 0), i || (i = function i() {
        var _ref46 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            t = _ref46.varName,
            e = _ref46.vars,
            i = _ref46.matched;

        if (i.startsWith("$$")) return i.substring(1);
        var s = i,
            n = t.indexOf("?");
        return n > 0 && (s = _.trim(t.substring(n + 1)), t = _.trim(t.substring(0, n))), Ti.Util.fallback(Ti.Util.getOrPick(e, t), s);
      }), _.isArray(e)) {
        var _i3 = [];

        for (var _s2 = 0; _s2 < e.length; _s2++) {
          var _n = e[_s2],
              _r = TiStr.renderBy(t, _n);

          _i3.push(_r);
        }

        return _i3;
      }

      var r,
          o = [],
          a = 0;

      for (; r = s.exec(t);) {
        var _n2 = r.index;
        _n2 > a && o.push(t.substring(a, _n2));
        var l = i({
          vars: e,
          matched: r[0],
          prefix: r[1],
          varName: r[2]
        });
        o.push(l), a = s.lastIndex;
      }

      return a < t.length && o.push(t.substring(a)), o.join("");
    },
    safeDeep: function safeDeep() {
      var _this = this;

      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : /['"]/g;
      return _.isString(t) ? t.replace(e, "") : _.isArray(t) ? _.map(t, function (t) {
        return _this.safeDeep(t, e);
      }) : _.isPlainObject(t) ? _.mapValues(t, function (t) {
        return _this.safeDeep(t, e);
      }) : t;
    },
    joinWithoutNil: function joinWithoutNil() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";

      for (var _len2 = arguments.length, e = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
        e[_key2 - 1] = arguments[_key2];
      }

      var i = _.flattenDeep(e);

      return _.filter(i, function (t) {
        return !Ti.Util.isNil(t);
      }).join(t);
    },
    join: function join() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;

      var s = _.flattenDeep(t);

      return _.isFunction(i) && (s = _.map(s, i)), s.join(e);
    },
    joinAs: function joinAs() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      var s = null;
      return i && (s = function s(t) {
        return _.isPlainObject(t) ? _.get(t, i) : i;
      }), TiStr.join(t, e, s);
    },
    toJsValue: function toJsValue() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";

      var _ref47 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref47$autoJson = _ref47.autoJson,
          e = _ref47$autoJson === void 0 ? !0 : _ref47$autoJson,
          _ref47$autoDate = _ref47.autoDate,
          i = _ref47$autoDate === void 0 ? !0 : _ref47$autoDate,
          _ref47$autoNil = _ref47.autoNil,
          s = _ref47$autoNil === void 0 ? !1 : _ref47$autoNil,
          _ref47$trimed = _ref47.trimed,
          n = _ref47$trimed === void 0 ? !0 : _ref47$trimed,
          _ref47$context = _ref47.context,
          r = _ref47$context === void 0 ? {} : _ref47$context;

      if (_.isArray(t)) {
        var _o = [],
            _a = {
          autoJson: e,
          autoDate: i,
          autoNil: s,
          trimed: n,
          context: r
        };

        var _iterator4 = _createForOfIteratorHelper(t),
            _step4;

        try {
          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
            var _e2 = _step4.value;

            var _t5 = TiStr.toJsValue(_e2, _a);

            _o.push(_t5);
          }
        } catch (err) {
          _iterator4.e(err);
        } finally {
          _iterator4.f();
        }

        return _o;
      }

      if (_.isPlainObject(t)) {
        var _o2 = {},
            _a2 = {
          autoJson: e,
          autoDate: i,
          autoNil: s,
          trimed: n,
          context: r
        };
        return _.forEach(t, function (t, e) {
          var i = TiStr.toJsValue(t, _a2);
          _o2[e] = i;
        }), _o2;
      }

      if (Ti.Util.isNil(t) || _.isBoolean(t) || _.isNumber(t)) return t;
      var o = n ? _.trim(t) : t;

      if (s) {
        if ("undefined" == o) return;
        if ("null" == o) return null;
      }

      if (/^-?[\d.]+$/.test(o)) return 1 * o;

      var a = _.get(r, o);

      if (!_.isUndefined(a)) return a;
      if (/^(true|false|yes|no|on|off)$/i.test(o)) return /^(true|yes|on)$/i.test(o);
      var l = /^'([^']*)'$/.exec(o);
      if (l) return l[1];

      if (e) {
        var _e3 = Ti.Types.safeParseJson(t);

        if (!_.isUndefined(_e3)) return _e3;
      }

      if (i) try {
        return Ti.Types.toDate(t);
      } catch (t) {}
      return o;
    },
    joinArgs: function joinArgs(s) {
      var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
      var iteratee = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : TiStr.toJsValue;

      if (_.isString(s)) {
        if (/^\{.*\}$/.test(s)) try {
          return [eval("(".concat(s, ")"))];
        } catch (t) {}
        var list = s.split(",");

        var _iterator5 = _createForOfIteratorHelper(list),
            _step5;

        try {
          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
            var t = _step5.value;

            var _e4 = _.trim(t);

            if (!_e4) continue;

            var _i4 = iteratee(_e4);

            args.push(_i4);
          }
        } catch (err) {
          _iterator5.e(err);
        } finally {
          _iterator5.f();
        }

        return args;
      }

      if (_.isArray(s)) {
        var _iterator6 = _createForOfIteratorHelper(s),
            _step6;

        try {
          for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
            var _t6 = _step6.value;

            var _e5 = iteratee(_t6);

            args.push(_e5);
          }
        } catch (err) {
          _iterator6.e(err);
        } finally {
          _iterator6.f();
        }
      } else _.isUndefined(s) || args.push(s);

      return args;
    },
    toArray: function toArray(t) {
      var _ref48 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref48$sep = _ref48.sep,
          e = _ref48$sep === void 0 ? /[:,;\t\n\/]+/g : _ref48$sep,
          _ref48$ignoreNil = _ref48.ignoreNil,
          i = _ref48$ignoreNil === void 0 ? !0 : _ref48$ignoreNil;

      if (Ti.Util.isNil(t)) return [];
      if (_.isArray(t)) return t;

      if (_.isString(t) && e) {
        var _s3 = _.map(t.split(e), function (t) {
          return _.trim(t);
        });

        return i ? _.without(_s3, "") : _s3;
      }

      return [t];
    },
    toArrayBy: function toArrayBy(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ",";
      return TiStr.toArray(t, {
        sep: e,
        ignoreNil: !0
      });
    },
    toObject: function toObject(t) {
      var _ref49 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref49$sep = _ref49.sep,
          e = _ref49$sep === void 0 ? /[:,;\t\n\/]+/g : _ref49$sep,
          _ref49$ignoreNil = _ref49.ignoreNil,
          i = _ref49$ignoreNil === void 0 ? !0 : _ref49$ignoreNil,
          _ref49$keys = _ref49.keys,
          s = _ref49$keys === void 0 ? ["value", "text?value", "icon"] : _ref49$keys;

      if (_.isPlainObject(t) || _.isNull(t) || _.isUndefined(t)) return t;
      var n = TiStr.toArray(t, {
        sep: e,
        ignoreNil: i
      }),
          r = [],
          o = [];

      _.forEach(s, function (t) {
        var e = TiStr.toArray(t, {
          sep: "?"
        });

        if (e.length > 1) {
          var _t7 = e[0];
          r.push(_t7), o.push({
            name: _t7,
            backup: e[1]
          });
        } else r.push(t);
      });

      var a = {};

      _.forEach(r, function (t, e) {
        var s = _.nth(n, e);

        _.isUndefined(s) && i || (a[t] = s);
      });

      for (var _i5 = 0, _o3 = o; _i5 < _o3.length; _i5++) {
        var _t8 = _o3[_i5];
        _.isUndefined(a[_t8.name]) && (a[_t8.name] = a[_t8.backup]);
      }

      return a;
    },
    toObjList: function toObjList(t) {
      var _ref50 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref50$sepLine = _ref50.sepLine,
          e = _ref50$sepLine === void 0 ? /[,;\n]+/g : _ref50$sepLine,
          _ref50$sepPair = _ref50.sepPair,
          i = _ref50$sepPair === void 0 ? /[:|\/\t]+/g : _ref50$sepPair,
          _ref50$ignoreNil = _ref50.ignoreNil,
          s = _ref50$ignoreNil === void 0 ? !0 : _ref50$ignoreNil,
          _ref50$keys = _ref50.keys,
          n = _ref50$keys === void 0 ? ["value", "text?value", "icon"] : _ref50$keys;

      var r = TiStr.toArray(t, {
        sep: e,
        ignoreNil: s
      });
      return _.map(r, function (t) {
        return TiStr.toObject(t, {
          sep: i,
          ignoreNil: s,
          keys: n
        });
      });
    },
    sizeText: function sizeText() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;

      var _ref51 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref51$fixed = _ref51.fixed,
          e = _ref51$fixed === void 0 ? 2 : _ref51$fixed,
          _ref51$M = _ref51.M,
          i = _ref51$M === void 0 ? 1024 : _ref51$M,
          _ref51$units = _ref51.units,
          s = _ref51$units === void 0 ? ["Bytes", "KB", "MB", "GB", "PB", "TB"] : _ref51$units;

      var n = t,
          r = 0;

      for (; r < s.length; r++) {
        var _t9 = n / i;

        if (_t9 < 1) break;
        n = _t9;
      }

      var o = s[r];
      return n == parseInt(n) ? n + o : n.toFixed(e) + o;
    },
    toPercent: function toPercent(t) {
      var _ref52 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref52$fixed = _ref52.fixed,
          e = _ref52$fixed === void 0 ? 2 : _ref52$fixed,
          _ref52$auto = _ref52.auto,
          i = _ref52$auto === void 0 ? !0 : _ref52$auto;

      if (!_.isNumber(t)) return "NaN";
      var s = 100 * t,
          n = e >= 0 ? s.toFixed(e) : s + "";

      if (i) {
        var _t10 = n.lastIndexOf("."),
            _e6 = n.lastIndexOf("0");

        if (_t10 >= 0 && _e6 > _t10) {
          var _i6 = n.length - 1;

          for (; _i6 >= _t10 && "0" == n[_i6]; _i6--) {
            ;
          }

          _i6 == _e6 || _i6 == _t10 || _i6++, _i6 < n.length && (n = n.substring(0, _i6));
        }
      }

      return n + "%";
    },
    toCase: function toCase(t, e) {
      if (Ti.Util.isNil(t)) return t;
      var i = TiStr.getCaseFunc(e);
      return _.isFunction(i) ? i(t) : t;
    },
    getCaseFunc: function getCaseFunc(t) {
      return {
        upper: function upper(t) {
          return t ? t.toUpperCase() : t;
        },
        lower: function lower(t) {
          return t ? t.toLowerCase() : t;
        },
        camel: function camel(t) {
          return _.camelCase(t);
        },
        snake: function snake(t) {
          return _.snakeCase(t);
        },
        kebab: function kebab(t) {
          return _.kebabCase(t);
        },
        start: function start(t) {
          return _.startCase(t);
        }
      }[t];
    },
    isValidCase: function isValidCase(t) {
      return _.isFunction(TiStr.getCaseFunc(t));
    },
    isPhoneNumber: function isPhoneNumber() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";
      return /^(\+\d{2})? *(\d{11})$/.test(t);
    }
  };
  return {
    S: TiStr
  };
}(),
    S = _ref7.S,
    _ref8 = function () {
  var _ref53 = function () {
    function t(t) {
      return /^@https?:\/\//.test(t) ? t.substring(1) : /^@\/.+/.test(t) ? t.substring(1) : /^(@[A-Za-z0-9_-]+:?|\.\/)/.test(t) ? t : /^(!(m?js|json|css|text):)/.test(t) ? t : void 0;
    }

    function e() {
      return _e7.apply(this, arguments);
    }

    function _e7() {
      _e7 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee9() {
        var i,
            _ref57,
            s,
            n,
            r,
            _args9 = arguments;

        return regeneratorRuntime.wrap(function _callee9$(_context9) {
          while (1) {
            switch (_context9.prev = _context9.next) {
              case 0:
                i = _args9.length > 0 && _args9[0] !== undefined ? _args9[0] : {};
                _ref57 = _args9.length > 1 && _args9[1] !== undefined ? _args9[1] : {}, s = _ref57.dynamicPrefix, n = _ref57.dynamicAlias;
                r = [];

                _.forOwn(i, function (o, a) {
                  if (!/^\.{3}/.test(a)) if (_.isString(o)) {
                    var _l = t(o);

                    if (!_l) return;
                    r.push(new Promise(function (t, r) {
                      Ti.Load(_l, {
                        dynamicPrefix: s,
                        dynamicAlias: n
                      }).then( /*#__PURE__*/function () {
                        var _ref58 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7(r) {
                          var o, h;
                          return regeneratorRuntime.wrap(function _callee7$(_context7) {
                            while (1) {
                              switch (_context7.prev = _context7.next) {
                                case 0:
                                  o = Ti.Config.url(_l, {
                                    dynamicPrefix: s,
                                    dynamicAlias: n
                                  });
                                  _context7.next = 3;
                                  return e(r, {
                                    dynamicAlias: new Ti.Config.AliasMapping({
                                      "^./": Ti.Util.getParentPath(o)
                                    })
                                  });

                                case 3:
                                  h = _context7.sent;
                                  i[a] = h, t(h);

                                case 5:
                                case "end":
                                  return _context7.stop();
                              }
                            }
                          }, _callee7);
                        }));

                        return function (_x) {
                          return _ref58.apply(this, arguments);
                        };
                      }());
                    }));
                  } else if (_.isArray(o)) {
                    var _loop = function _loop(_i7) {
                      var l = t(o[_i7]);
                      l && r.push(new Promise(function (t, r) {
                        Ti.Load(l, {
                          dynamicPrefix: s,
                          dynamicAlias: n
                        }).then( /*#__PURE__*/function () {
                          var _ref59 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8(r) {
                            var h, c;
                            return regeneratorRuntime.wrap(function _callee8$(_context8) {
                              while (1) {
                                switch (_context8.prev = _context8.next) {
                                  case 0:
                                    h = Ti.Config.url(l, {
                                      dynamicPrefix: s,
                                      dynamicAlias: n
                                    });
                                    _context8.next = 3;
                                    return e(r, {
                                      dynamicAlias: new Ti.Config.AliasMapping({
                                        "^./": Ti.Util.getParentPath(h)
                                      })
                                    });

                                  case 3:
                                    c = _context8.sent;
                                    o[_i7] = c, !c.name && /^(modules|components)$/.test(a) && (c.name = Ti.Util.getLinkName(v)), t(c);

                                  case 5:
                                  case "end":
                                    return _context8.stop();
                                }
                              }
                            }, _callee8);
                          }));

                          return function (_x2) {
                            return _ref59.apply(this, arguments);
                          };
                        }());
                      }));
                    };

                    for (var _i7 = 0; _i7 < o.length; _i7++) {
                      _loop(_i7);
                    }
                  } else _.isPlainObject(o) && r.push(e(o, {
                    dynamicPrefix: s,
                    dynamicAlias: n
                  }));
                });

                _context9.t0 = r.length > 0;

                if (!_context9.t0) {
                  _context9.next = 8;
                  break;
                }

                _context9.next = 8;
                return Promise.all(r);

              case 8:
                return _context9.abrupt("return", i);

              case 9:
              case "end":
                return _context9.stop();
            }
          }
        }, _callee9);
      }));
      return _e7.apply(this, arguments);
    }

    return {
      LoadTiLinkedObj: e,
      LoadTiAppInfo: function () {
        var _LoadTiAppInfo = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6() {
          var t,
              i,
              s,
              _args6 = arguments;
          return regeneratorRuntime.wrap(function _callee6$(_context6) {
            while (1) {
              switch (_context6.prev = _context6.next) {
                case 0:
                  t = _args6.length > 0 && _args6[0] !== undefined ? _args6[0] : {};
                  i = _args6.length > 1 && _args6[1] !== undefined ? _args6[1] : document;
                  s = _.cloneDeep(t);
                  _context6.next = 5;
                  return e(s);

                case 5:
                  Ti.IsInfo("TiApp") && console.log("await LoadTiLinkedObj(conf)", s);
                  return _context6.abrupt("return", s);

                case 7:
                case "end":
                  return _context6.stop();
              }
            }
          }, _callee6);
        }));

        function LoadTiAppInfo() {
          return _LoadTiAppInfo.apply(this, arguments);
        }

        return LoadTiAppInfo;
      }()
    };
  }(),
      t = _ref53.LoadTiAppInfo,
      e = _ref53.LoadTiLinkedObj,
      _ref54 = function () {
    var t = /*#__PURE__*/function () {
      function t() {
        _classCallCheck(this, t);

        this.guards = {}, this.actions = {};
      }

      _createClass(t, [{
        key: "addGuard",
        value: function addGuard(t, e, i) {
          e && _.isFunction(i) && Ti.Util.pushValue(this.guards, e, {
            scope: t,
            func: i
          });
        }
      }, {
        key: "removeGuard",
        value: function removeGuard(t) {
          for (var _len3 = arguments.length, e = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {
            e[_key3 - 1] = arguments[_key3];
          }

          this.guards = this.__remove_by(this.guards, t, e);
        }
      }, {
        key: "isWatched",
        value: function isWatched(t, e) {
          var i = this.actions[e];

          if (_.isArray(i)) {
            var _iterator7 = _createForOfIteratorHelper(i),
                _step7;

            try {
              for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {
                var _e8 = _step7.value;
                if (_e8.scope === t) return !0;
              }
            } catch (err) {
              _iterator7.e(err);
            } finally {
              _iterator7.f();
            }
          }

          return !1;
        }
      }, {
        key: "watch",
        value: function watch(t) {
          var _this2 = this;

          var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];

          var _ref60 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
              i = _ref60.$com,
              _ref60$argContext = _ref60.argContext,
              s = _ref60$argContext === void 0 ? {} : _ref60$argContext;

          var n = _.without(_.concat(e), null);

          _.forEach(n, function (e) {
            if (_.isArray(e.items) && e.items.length > 0) _this2.watch(t, e.items, {
              $com: i,
              argContext: s
            });else if (e.action && e.shortcut) {
              if (_this2.isWatched(t, e.shortcut)) return;

              var _n3 = Ti.Shortcut.genActionInvoking(e.action, {
                $com: i,
                argContext: s,
                wait: e.wait
              });

              Ti.Util.pushValueBefore(_this2.actions, e.shortcut, {
                scope: t,
                func: _n3,
                prevent: Ti.Util.fallback(e.prevent, !0),
                stop: Ti.Util.fallback(e.stop, !0)
              });
            }
          });
        }
      }, {
        key: "unwatch",
        value: function unwatch(t) {
          for (var _len4 = arguments.length, e = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {
            e[_key4 - 1] = arguments[_key4];
          }

          this.actions = this.__remove_by(this.actions, t, e);
        }
      }, {
        key: "__remove_by",
        value: function __remove_by(t, e) {
          for (var _len5 = arguments.length, i = new Array(_len5 > 2 ? _len5 - 2 : 0), _key5 = 2; _key5 < _len5; _key5++) {
            i[_key5 - 2] = arguments[_key5];
          }

          var s = _.flattenDeep(i);

          if (!e && _.isEmpty(s)) return {};
          _.isEmpty(s) && (s = _.keys(t));
          var n = Ti.Util.isNil(e),
              r = {};
          return _.forEach(s, function (i) {
            var s = [];
            _.forEach(t[i], function (t) {
              n || t.scope === e || s.push(t);
            }), _.isEmpty(s) || (r[i] = s);
          }), r;
        }
      }, {
        key: "fire",
        value: function fire(t, e) {
          var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {
            stop: !1,
            prevent: !1,
            quit: !1
          };
          if (i.quit) return i;
          var s = Ti.Util.isNil(t),
              n = this.guards[e];

          if (_.isArray(n)) {
            var _iterator8 = _createForOfIteratorHelper(n),
                _step8;

            try {
              for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {
                var _e9 = _step8.value;
                if ((s || _e9.scope === t) && !_e9.func()) return i.quit = !0, i;
              }
            } catch (err) {
              _iterator8.e(err);
            } finally {
              _iterator8.f();
            }
          }

          var r = this.actions[e];
          if (!_.isArray(r)) return i;

          var _iterator9 = _createForOfIteratorHelper(r),
              _step9;

          try {
            for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {
              var _e10 = _step9.value;
              if ((s || _e10.scope === t) && (i.quit |= _e10.func(), i.stop |= _e10.stop, i.prevent |= _e10.prevent, i.quit)) return i;
            }
          } catch (err) {
            _iterator9.e(err);
          } finally {
            _iterator9.f();
          }

          return i;
        }
      }]);

      return t;
    }();

    return {
      TiAppActionShortcuts: t
    };
  }(),
      i = _ref54.TiAppActionShortcuts,
      _ref55 = function () {
    function t(t, e) {
      var i = !1,
          s = {};
      return _.forOwn(e, function (e, n, r) {
        var o = /^\.{3}(.*)$/.exec(n);

        if (o) {
          i = !0;
          var _n4 = o[1];
          t && _.assign(s, function (t, e) {
            var i = {};
            return _.forOwn(e, function (e, s) {
              var n = "map" + _.capitalize(s);

              t ? _.assign(i, Vuex[n](t, e)) : _.assign(i, Vuex[n](e));
            }), i;
          }(_n4, e));
        }
      }), i ? s : e;
    }

    var e = {
      StoreConfig: function StoreConfig() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
        var s = Ti.Util.merge({
          modules: {}
        }, t.mixins);
        return !t.state && s.state || (s.state = Ti.Util.genObj(t.state)), s.getters = _.assign(s.getters, Ti.Util.merge({}, t.getters)), s.mutations = _.assign(s.mutations, Ti.Util.merge({}, t.mutations)), s.actions = _.assign(s.actions, Ti.Util.merge({}, t.actions)), Ti.I18n.put(t.i18n), i && (s.namespaced = !0), _.forEach(t.modules, function (t, i) {
          var n;
          n = i.startsWith(".") ? e.StoreConfig(t) : e.StoreConfig(t, i), s.modules[i] = n;
        }), s.plugins = [].concat(t.plugins || []), s;
      },
      CreateStore: function CreateStore(t) {
        return new Vuex.Store(_objectSpread({
          strict: Ti.IsForDev()
        }, t));
      },
      Options: function Options() {
        var _Ti$Util, _Ti$Util2;

        var _ref61 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            _ref61$global = _ref61.global,
            i = _ref61$global === void 0 ? {} : _ref61$global,
            _ref61$conf = _ref61.conf,
            s = _ref61$conf === void 0 ? {} : _ref61$conf,
            n = _ref61.store;

        _.isPlainObject(s.i18n) && Ti.I18n.put(s.i18n);

        var r = _.pick(s, ["data", "props", "watch"]),
            o = _.pick(s, ["template", "render", "renderError"]),
            a = _.pick(s, ["beforeCreate", "created", "beforeMount", "mounted", "beforeUpdate", "updated", "activated", "deactivated", "beforeDestroy", "destroyed", "errorCaptured"]),
            l = _.pick(s, ["directives", "filters", "components"]);

        _.forOwn(l, function (t, s, n) {
          var r = _.flattenDeep([t]),
              o = [];

          var _iterator10 = _createForOfIteratorHelper(r),
              _step10;

          try {
            for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {
              var _t11 = _step10.value;
              _t11.globally ? ("components" == s && (_t11 = e.Options({
                conf: _t11,
                global: i
              })), Ti.Util.pushValue(i, s, _t11)) : o.push(_t11);
            }
          } catch (err) {
            _iterator10.e(err);
          } finally {
            _iterator10.f();
          }

          n[s] = o;
        });

        var h = _.pick(s, ["mixins", "extends"]),
            c = _.pick(s, ["name", "delimiters", "functional", "model", "inheritAttrs", "comments", "inject", "provide"]);

        var u = _objectSpread({}, _.mapValues(r, function (t) {
          return Ti.Util.merge({}, t);
        }), {}, o, {}, _.mapValues(a, Ti.Util.groupCall), {
          directives: Ti.Util.merge({}, l.directives),
          filters: Ti.Util.merge({}, l.filters),
          components: function () {
            var t = {};
            return _.map(l.components, function (s) {
              t[s.name] = e.Options({
                conf: s,
                global: i
              });
            }), t;
          }()
        }, h, {}, c);

        _.isFunction(u.data) || (u.data = Ti.Util.genObj(u.data || {}));

        var d = _.partial(t, n);

        return _.isArray(s.computed) ? u.computed = (_Ti$Util = Ti.Util).mergeWith.apply(_Ti$Util, [d, {}].concat(_toConsumableArray(s.computed))) : _.isObject(s.computed) && (u.computed = s.computed), _.isArray(s.methods) ? u.methods = (_Ti$Util2 = Ti.Util).mergeWith.apply(_Ti$Util2, [d, {}].concat(_toConsumableArray(s.methods))) : _.isObject(s.methods) && (u.methods = s.methods), n && (u.store = n), u;
      },
      Setup: function Setup() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        var i = arguments.length > 1 ? arguments[1] : undefined;
        var s = {};
        return {
          global: s,
          options: e.Options({
            global: s,
            conf: t,
            store: i
          })
        };
      },
      CreateInstance: function CreateInstance(t, e) {
        var _this3 = this;

        var i = Ti.Util.merge({}, t.global.filters),
            s = Ti.Util.merge({}, t.global.directives);
        _.forOwn(i, function (t, e) {
          Vue.filter(e, t);
        }), _.forOwn(s, function (t, e) {
          Vue.directive(e, t);
        });

        var n = function n(t) {
          _.map(t.components, n), delete t.components, Ti.I18n.put(t.i18n), _.isFunction(e) && e(t), _this3.registerComponent(t.name, t);
        };

        return _.map(t.global.components, n), _.isFunction(e) && e(t.options), new Vue(t.options);
      },
      registerComponent: function registerComponent(t, e) {
        var i = _.upperFirst(_.camelCase(t));

        Vue.component(i, e);
      }
    };
    return {
      TiVue: e
    };
  }(),
      s = _ref55.TiVue,
      _ref56 = function () {
    var t = /*#__PURE__*/function () {
      function t() {
        _classCallCheck(this, t);

        this.icon = void 0, this.title = void 0, this.type = "info", this.iconOk = void 0, this.textOk = "i18n:ok", this.ok = function (_ref62) {
          var t = _ref62.result;
          return t;
        }, this.iconCancel = void 0, this.textCancel = "i18n:cancel", this.cancel = function () {
          return void 0;
        }, this.actions = null, this.transDelay = 300, this.comType = "ti-label", this.comConf = {}, this.components = [], this.closer = "default", this.escape = !0, this.mask = !0, this.clickMaskToClose = !1, this.position = "center", this.width = "6.4rem", this.height = void 0, this.spacing = void 0, this.overflow = void 0, this.adjustable = !1, this.result = void 0, this.modules = {}, this.topActions = [], this.ready = /*#__PURE__*/function () {
          var _ref63 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee10(t) {
            return regeneratorRuntime.wrap(function _callee10$(_context10) {
              while (1) {
                switch (_context10.prev = _context10.next) {
                  case 0:
                  case "end":
                    return _context10.stop();
                }
              }
            }, _callee10);
          }));

          return function (_x3) {
            return _ref63.apply(this, arguments);
          };
        }(), this.preload = /*#__PURE__*/function () {
          var _ref64 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee11(t) {
            return regeneratorRuntime.wrap(function _callee11$(_context11) {
              while (1) {
                switch (_context11.prev = _context11.next) {
                  case 0:
                  case "end":
                    return _context11.stop();
                }
              }
            }, _callee11);
          }));

          return function (_x4) {
            return _ref64.apply(this, arguments);
          };
        }();
      }

      _createClass(t, [{
        key: "open",
        value: function () {
          var _open2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee13() {
            var _this6 = this;

            var t,
                e,
                i,
                s,
                n,
                _args13 = arguments;
            return regeneratorRuntime.wrap(function _callee13$(_context13) {
              while (1) {
                switch (_context13.prev = _context13.next) {
                  case 0:
                    t = _args13.length > 0 && _args13[0] !== undefined ? _args13[0] : _.identity;
                    e = [];
                    this.actions ? e = this.actions : (_.isFunction(this.ok) && this.textOk && e.push({
                      icon: this.iconOk,
                      text: this.textOk,
                      handler: this.ok
                    }), _.isFunction(this.cancel) && this.textCancel && e.push({
                      icon: this.iconCancel,
                      text: this.textCancel,
                      handler: this.cancel
                    }));
                    i = {
                      name: "app.modal",
                      template: '<transition :name="TransName" @after-leave="OnAfterLeave">\n          <div class="ti-app-modal"\n            v-if="!hidden"\n              :class="TopClass"\n              :style="TopStyle"\n              @click.left="OnClickTop"\n              v-ti-activable>\n    \n              <div class="modal-con" \n                :class="ConClass"\n                :style="ConStyle"\n                @click.left.stop>\n    \n                <div class="modal-head"\n                  v-if="isShowHead">\n                    <div class="as-icon" v-if="icon"><ti-icon :value="icon"/></div>\n                    <div class="as-title">{{title|i18n}}</div>\n                    <div\n                      v-if="hasTopActionBar"\n                        class="as-bar">\n                          <ti-actionbar\n                            :items="topActions"\n                            align="right"\n                            :status="TopActionBarStatus"/>\n                    </div>\n                </div>\n    \n                <div class="modal-main">\n                  <component\n                    v-if="comType"\n                      class="ti-fill-parent"\n                      :class="MainClass"\n                      :is="comType"\n                      v-bind="TheComConf"\n                      :on-init="OnMainInit"\n                      :value="result"\n                      @close="OnClose"\n                      @ok="OnOk"\n                      @change="OnChange"\n                      @actions:update="OnActionsUpdated"/>\n                </div>\n    \n                <div class="modal-actions"\n                  v-if="hasActions">\n                    <div class="as-action"\n                      v-for="a of actions"\n                        @click.left="OnClickActon(a)">\n                        <div class="as-icon" v-if="a.icon">\n                          <ti-icon :value="a.icon"/></div>\n                        <div class="as-text">{{a.text|i18n}}</div>\n                    </div>\n                </div>\n    \n                <div class="modal-closer"\n                  v-if="hasCloser"\n                    :class="CloserClass">\n                      <ti-icon value="zmdi-close" @click.native="OnClose"/>\n                </div>\n            </div>\n        </div></transition>',
                      components: this.components,
                      data: {
                        hidden: !0,
                        icon: this.icon,
                        title: this.title,
                        type: this.type,
                        ready: this.ready,
                        actions: e,
                        topActions: this.topActions,
                        comType: null,
                        comConf: this.comConf,
                        closer: this.closer,
                        escape: this.escape,
                        mask: this.mask,
                        position: this.position,
                        clickMaskToClose: this.clickMaskToClose,
                        width: this.width,
                        height: this.height,
                        spacing: this.spacing,
                        overflow: this.overflow,
                        adjustable: this.adjustable,
                        result: _.cloneDeep(this.result)
                      },
                      store: {
                        modules: _.defaults({
                          viewport: "@mod:ti/viewport"
                        }, this.modules)
                      },
                      computed: {
                        TopClass: function TopClass() {
                          var t = Ti.Util.isNil(this.height);
                          return this.getTopClass({
                            "show-mask": this.isShowMask,
                            "no-mask": !this.isShowMask,
                            "has-height": !t,
                            "nil-height": t
                          }, "at-".concat(this.position));
                        },
                        TopStyle: function TopStyle() {
                          if ("center" != this.position) return {
                            padding: Ti.Css.toSize(this.spacing)
                          };
                        },
                        TransName: function TransName() {
                          return "app-modal-trans-at-".concat(this.position);
                        },
                        isShowHead: function isShowHead() {
                          return this.icon || this.title || this.hasTopActionBar;
                        },
                        hasTopActionBar: function hasTopActionBar() {
                          return !_.isEmpty(this.topActions);
                        },
                        isShowMask: function isShowMask() {
                          return !!this.mask;
                        },
                        hasActions: function hasActions() {
                          return !_.isEmpty(this.actions);
                        },
                        hasCloser: function hasCloser() {
                          return !!this.closer;
                        },
                        isCloserDefault: function isCloserDefault() {
                          return !0 === this.closer || "default" == this.closer;
                        },
                        ConClass: function ConClass() {
                          return Ti.Css.mergeClassName({
                            "is-show-header": this.isShowHead,
                            "is-hide-header": !this.isShowHead,
                            "is-show-actions": this.hasActions,
                            "is-hide-actions": !this.hasActions,
                            "is-closer-default": this.isCloserDefault,
                            "has-top-action-bar": this.hasTopActionBar
                          }, "is-".concat(this.type));
                        },
                        ConStyle: function ConStyle() {
                          return Ti.Css.toStyle({
                            width: this.width,
                            height: this.height
                          });
                        },
                        MainClass: function MainClass() {
                          return Ti.Css.mergeClassName("modal-type-is-".concat(this.type));
                        },
                        Main: function Main() {
                          return this.$store.state.main;
                        },
                        TopActionBarStatus: function TopActionBarStatus() {
                          return _.get(this.Main, "status");
                        },
                        CloserClass: function CloserClass() {
                          return Ti.Css.mergeClassName(_defineProperty({
                            "as-lamp-cord": !this.isCloserDefault,
                            "as-default": this.isCloserDefault
                          }, "at-".concat(this.closer), !this.isCloserDefault));
                        },
                        TheComConf: function TheComConf() {
                          return Ti.Util.explainObj(this, this.comConf);
                        }
                      },
                      methods: {
                        OnClickTop: function OnClickTop() {
                          this.clickMaskToClose && (this.hidden = !0);
                        },
                        OnClose: function OnClose() {
                          this.close();
                        },
                        OnOk: function OnOk(t) {
                          _.isUndefined(t) && (t = this.result), this.close(t);
                        },
                        OnChange: function OnChange(t) {
                          this.result = t;
                        },
                        OnActionsUpdated: function OnActionsUpdated() {
                          var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
                          this.topActions = t, Ti.App(this).reWatchShortcut(t);
                        },
                        OnClickActon: function OnClickActon(t) {
                          var _this4 = this;

                          return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee12() {
                            var _e11, _i8, _s4, _n5;

                            return regeneratorRuntime.wrap(function _callee12$(_context12) {
                              while (1) {
                                switch (_context12.prev = _context12.next) {
                                  case 0:
                                    if (!t.handler) {
                                      _context12.next = 8;
                                      break;
                                    }

                                    _e11 = Ti.App(_this4);
                                    _i8 = {
                                      close: !0
                                    };
                                    _s4 = _e11.$vm();
                                    _context12.next = 6;
                                    return t.handler({
                                      $app: _e11,
                                      $body: _s4,
                                      $main: _s4.$main,
                                      result: _.cloneDeep(_s4.result),
                                      status: _i8
                                    });

                                  case 6:
                                    _n5 = _context12.sent;
                                    _i8.close ? _this4.close(_n5) : _this4.setResult(_n5);

                                  case 8:
                                  case "end":
                                    return _context12.stop();
                                }
                              }
                            }, _callee12);
                          }))();
                        },
                        OnAfterLeave: function OnAfterLeave() {
                          Ti.App(this).destroy(!0), t(this.returnValue);
                        },
                        OnMainInit: function OnMainInit(t) {
                          var e = Ti.App(this);
                          this.$main = t, e.$vmMain(t), this.escape && e.watchShortcut([{
                            action: "root:close",
                            shortcut: "ESCAPE"
                          }]), this.setActived(), this.ready(e);
                        },
                        close: function close(t) {
                          _.isUndefined(t) || (this.returnValue = t), this.hidden = !0;
                        },
                        setResult: function setResult(t) {
                          this.returnValue = t;
                        }
                      },
                      mounted: function mounted() {
                        var _this5 = this;

                        var t = Ti.App(this);
                        Ti.App.pushInstance(t), this.$nextTick(function () {
                          _this5.hidden = !1;
                        });
                      },
                      beforeDestroy: function beforeDestroy() {
                        var t = Ti.App(this);
                        Ti.App.pullInstance(t);
                      }
                    }, s = Ti.App(i);
                    _context13.next = 6;
                    return s.init();

                  case 6:
                    n = Ti.Dom.createElement({
                      $p: document.body,
                      className: "the-stub"
                    });
                    _context13.next = 9;
                    return this.preload(s);

                  case 9:
                    s.mountTo(n);

                    _.delay(function () {
                      s.$vm().comType = _this6.comType;
                    }, this.transDelay || 0);

                  case 11:
                  case "end":
                    return _context13.stop();
                }
              }
            }, _callee13, this);
          }));

          function open() {
            return _open2.apply(this, arguments);
          }

          return open;
        }()
      }]);

      return t;
    }();

    return {
      TiAppModal: t
    };
  }(),
      n = _ref56.TiAppModal,
      r = Symbol("ti-app"),
      o = Symbol("ti-info"),
      a = Symbol("ti-conf"),
      l = Symbol("ti-store"),
      h = Symbol("ti-vm"),
      c = Symbol("ti-vm-main"),
      u = Symbol("ti-vm-actived");

  var d = /*#__PURE__*/function () {
    function d() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = arguments.length > 1 ? arguments[1] : undefined;

      _classCallCheck(this, d);

      this.appDecorator = e, this.$info(t), this.$conf(null), this.$store(null), this.$vm(null), this.$shortcuts = new i();
    }

    _createClass(d, [{
      key: "name",
      value: function name() {
        return this.$info().name;
      }
    }, {
      key: "$info",
      value: function $info(t) {
        return Ti.Util.geset(this, o, t);
      }
    }, {
      key: "$conf",
      value: function $conf(t) {
        return Ti.Util.geset(this, a, t);
      }
    }, {
      key: "$store",
      value: function $store(t) {
        return Ti.Util.geset(this, l, t);
      }
    }, {
      key: "$vm",
      value: function $vm(t) {
        return Ti.Util.geset(this, h, t);
      }
    }, {
      key: "$vmMain",
      value: function $vmMain(t) {
        return Ti.Util.geset(this, c, t);
      }
    }, {
      key: "$state",
      value: function $state() {
        return this.$store().state;
      }
    }, {
      key: "init",
      value: function () {
        var _init = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee14() {
          var e, i, n, _t12, o, a;

          return regeneratorRuntime.wrap(function _callee14$(_context14) {
            while (1) {
              switch (_context14.prev = _context14.next) {
                case 0:
                  e = this.$info();
                  _context14.next = 3;
                  return t(e);

                case 3:
                  i = _context14.sent;
                  this.appDecorator(i), this.$conf(i), Ti.IsInfo("TiApp") && console.log("Ti.$conf", this.$conf());

                  if (i.store) {
                    _t12 = s.StoreConfig(i.store);
                    Ti.IsInfo("TiApp") && console.log("TiVue.StoreConfig:", _t12), n = s.CreateStore(_t12), this.$store(n), n[r] = this, Ti.IsInfo("TiApp") && console.log("Ti.$store", this.$store());
                  }

                  o = s.Setup(i, n);
                  Ti.IsInfo("TiApp") && (console.log("TiVue.VueSetup(conf)"), console.log(" -- global:", o.global), console.log(" -- options:", o.options));
                  a = s.CreateInstance(o, function (t) {
                    Ti.Config.decorate(t);
                  });
                  return _context14.abrupt("return", (a[r] = this, this.$vm(a), this));

                case 10:
                case "end":
                  return _context14.stop();
              }
            }
          }, _callee14, this);
        }));

        function init() {
          return _init.apply(this, arguments);
        }

        return init;
      }()
    }, {
      key: "mountTo",
      value: function mountTo(t) {
        this.$el = Ti.Dom.find(t), this.$vm().$mount(this.$el), this.$el = this.$vm().$el, this.$el[r] = this;
      }
    }, {
      key: "destroy",
      value: function destroy() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;
        this.$vm().$destroy(), this.$el[r] = null, t && Ti.Dom.remove(this.$el);
      }
    }, {
      key: "setActivedVm",
      value: function setActivedVm() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
        this[u] = t;
        var e = t.tiActivableComIdPath();
        this.$store().commit("viewport/setActivedIds", e);
      }
    }, {
      key: "setBlurredVm",
      value: function setBlurredVm() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;

        if (this[u] == t) {
          var _e12 = t.tiParentActivableCom();

          this[u] = _e12;

          var _i9 = _e12 ? _e12.tiActivableComIdPath() : [];

          this.$store().commit("viewport/setActivedIds", _i9);
        }
      }
    }, {
      key: "getActivedVm",
      value: function getActivedVm() {
        return this[u];
      }
    }, {
      key: "reWatchShortcut",
      value: function reWatchShortcut() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
        this.unwatchShortcut(), this.watchShortcut(t);
      }
    }, {
      key: "watchShortcut",
      value: function watchShortcut() {
        var _this7 = this;

        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
        this.$shortcuts.watch(this, t, {
          $com: function $com() {
            return _this7.$vmMain();
          },
          argContext: this.$state()
        });
      }
    }, {
      key: "unwatchShortcut",
      value: function unwatchShortcut() {
        var _this$$shortcuts;

        for (var _len6 = arguments.length, t = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {
          t[_key6] = arguments[_key6];
        }

        (_this$$shortcuts = this.$shortcuts).unwatch.apply(_this$$shortcuts, [this].concat(t));
      }
    }, {
      key: "guardShortcut",
      value: function guardShortcut(t, e, i) {
        this.$shortcuts.addGuard(t, e, i);
      }
    }, {
      key: "pulloutShortcut",
      value: function pulloutShortcut(t, e, i) {
        this.$shortcuts.removeGuard(t, e, i);
      }
    }, {
      key: "fireShortcut",
      value: function fireShortcut(t, e) {
        var i = {
          stop: !1,
          prevent: !1,
          quit: !1
        },
            s = this.getActivedVm();

        if (s) {
          var _e13 = s.tiActivableComPath(!1);

          var _iterator11 = _createForOfIteratorHelper(_e13),
              _step11;

          try {
            for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {
              var _s5 = _step11.value;

              if (_.isFunction(_s5.__ti_shortcut)) {
                var _e14 = _s5.__ti_shortcut(t) || {};

                if (i.stop |= _e14.stop, i.prevent |= _e14.prevent, i.quit |= _e14.quit, i.quit) break;
              }
            }
          } catch (err) {
            _iterator11.e(err);
          } finally {
            _iterator11.f();
          }
        }

        return this.$shortcuts.fire(this, t, i), i.prevent && e.preventDefault(), i.stop && e.stopPropagation(), i;
      }
    }, {
      key: "exec",
      value: function () {
        var _exec = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee15(t, e) {
          var i, _t13;

          return regeneratorRuntime.wrap(function _callee15$(_context15) {
            while (1) {
              switch (_context15.prev = _context15.next) {
                case 0:
                  i = t;

                  if (!_.isString(i)) {
                    _context15.next = 6;
                    break;
                  }

                  _t13 = /^(commit|dispatch|root|main):(.+)$/.exec(i);

                  if (_t13) {
                    _context15.next = 5;
                    break;
                  }

                  return _context15.abrupt("return");

                case 5:
                  i = {
                    method: _t13[1],
                    name: _t13[2]
                  };

                case 6:
                  _context15.next = 8;
                  return this[i.method](i.name, e);

                case 8:
                  return _context15.abrupt("return", _context15.sent);

                case 9:
                case "end":
                  return _context15.stop();
              }
            }
          }, _callee15, this);
        }));

        function exec(_x5, _x6) {
          return _exec.apply(this, arguments);
        }

        return exec;
      }()
    }, {
      key: "commit",
      value: function commit(t, e) {
        this.$store().commit(t, e);
      }
    }, {
      key: "dispatch",
      value: function () {
        var _dispatch = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee16(t, e) {
          return regeneratorRuntime.wrap(function _callee16$(_context16) {
            while (1) {
              switch (_context16.prev = _context16.next) {
                case 0:
                  Ti.IsInfo("TiApp") && console.log("TiApp.dispatch", t, e);
                  _context16.next = 3;
                  return this.$store().dispatch(t, e);

                case 3:
                  return _context16.abrupt("return", _context16.sent);

                case 4:
                case "end":
                  return _context16.stop();
              }
            }
          }, _callee16, this);
        }));

        function dispatch(_x7, _x8) {
          return _dispatch.apply(this, arguments);
        }

        return dispatch;
      }()
    }, {
      key: "root",
      value: function root(t, e) {
        Ti.IsInfo("TiApp") && console.log("TiApp.self", t, e);
        var i = this.$vm()[t];
        if (_.isFunction(i)) return i(e);
        if (_.isUndefined(i)) throw Ti.Err.make("e-ti-app-self", {
          nm: t,
          payload: e
        });
        return i;
      }
    }, {
      key: "main",
      value: function main(t, e) {
        Ti.IsInfo("TiApp") && console.log("TiApp.main", t, e);
        var i = this.$vmMain()[t];
        if (_.isFunction(i)) return i(e);
        if (_.isUndefined(i)) throw Ti.Err.make("e-ti-app-main", {
          nm: t,
          payload: e
        });
        return i;
      }
    }, {
      key: "global",
      value: function global(t) {
        var i = _.get(window, t);

        for (var _len7 = arguments.length, e = new Array(_len7 > 1 ? _len7 - 1 : 0), _key7 = 1; _key7 < _len7; _key7++) {
          e[_key7 - 1] = arguments[_key7];
        }

        if (_.isFunction(i)) return i.apply(this, e);
        throw Ti.Err.make("e-ti-app-main", {
          nm: t,
          args: e
        });
      }
    }, {
      key: "get",
      value: function get(t) {
        return t ? this.$vm()[t] : this.$vm();
      }
    }, {
      key: "loadView",
      value: function () {
        var _loadView = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee17(t) {
          var i, _n6, _r2, n, r, o, a;

          return regeneratorRuntime.wrap(function _callee17$(_context17) {
            while (1) {
              switch (_context17.prev = _context17.next) {
                case 0:
                  if (!t.modType) {
                    _context17.next = 8;
                    break;
                  }

                  _context17.next = 3;
                  return Ti.Load(t.modType);

                case 3:
                  _n6 = _context17.sent;
                  _context17.next = 6;
                  return e(_n6, {
                    dynamicAlias: new Ti.Config.AliasMapping({
                      "^./": t.modType + "/"
                    })
                  });

                case 6:
                  _r2 = _context17.sent;
                  _r2.state || (_r2.state = {}), i = s.StoreConfig(_r2, !0);

                case 8:
                  _context17.next = 10;
                  return Ti.Load(t.comType);

                case 10:
                  n = _context17.sent;
                  _context17.next = 13;
                  return e(n, {
                    dynamicAlias: new Ti.Config.AliasMapping({
                      "^./": t.comType + "/"
                    })
                  });

                case 13:
                  r = _context17.sent;
                  o = s.Setup(r);
                  a = o.options.name || Ti.Util.getLinkName(t.comType);
                  return _context17.abrupt("return", (Ti.IsInfo("TiApp") && (console.log("TiApp.loadView:", a), console.log(" -- global:", o.global), console.log(" -- options:", o.options)), Ti.Config.decorate(o.options), s.registerComponent(a, o.options), _.map(o.global.components, function (t) {
                    Ti.Config.decorate(t), s.registerComponent(t.name, t);
                  }), _objectSpread({}, t, {
                    comName: a,
                    mod: i
                  })));

                case 17:
                case "end":
                  return _context17.stop();
              }
            }
          }, _callee17);
        }));

        function loadView(_x9) {
          return _loadView.apply(this, arguments);
        }

        return loadView;
      }()
    }]);

    return d;
  }();

  var p = function p(t) {
    var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _.identity;
    if (Ti.Util.isNil(t)) return null;
    if (_.isString(t)) return Ti.Load(t).then(function (t) {
      return new d(t, e);
    });

    if (_.isElement(t)) {
      var _e15 = t,
          _i10 = _e15[r];

      for (; !_i10 && _e15.parentElement;) {
        _i10 = (_e15 = _e15.parentElement)[r];
      }

      return _i10;
    }

    return t instanceof Vue ? t.$root[r] : t instanceof Vuex.Store ? t[r] : _.isPlainObject(t) ? new d(t, e) : void 0;
  },
      f = [];

  return p.pushInstance = function (t) {
    t && f.push(t);
  }, p.pullInstance = function (t) {
    t && _.pull(f, t);
  }, p.topInstance = function () {
    return _.last(f);
  }, p.hasTopInstance = function () {
    return f.length > 0;
  }, p.eachInstance = function () {
    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _.identity;

    _.forEach(f, t);
  }, p.allInstance = function () {
    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _.identity;
    return f;
  }, p.Open = function (t) {
    return new Promise(function (e) {
      var i = new n();
      _.assign(i, t), i.open(e);
    });
  }, {
    App: p
  };
}(),
    App = _ref8.App,
    _Err = {
  Err: {
    make: function make() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";
      var e = arguments.length > 1 ? arguments[1] : undefined;
      var i = t;
      _.isString(t) && (i = {
        code: t,
        data: e
      });
      var s = i.code.replace(/[.]/g, "-"),
          n = Ti.I18n.get(s);
      e && (_.isPlainObject(e) ? n += " : " + JSON.stringify(e) : n += " : " + e);
      var r = new Error(n.trim());
      return _.assign(r, i);
    }
  }
},
    Err = _Err.Err,
    _ref9 = function () {
  var t = {
    prefix: {},
    alias: {},
    suffix: {}
  };

  var e = /*#__PURE__*/function () {
    function e(t) {
      _classCallCheck(this, e);

      this.list = [], this.reset(t);
    }

    _createClass(e, [{
      key: "reset",
      value: function reset() {
        var _this8 = this;

        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        return _.forOwn(t, function (t, e) {
          _this8.list.push({
            regex: new RegExp(e),
            newstr: t
          });
        }), this;
      }
    }, {
      key: "get",
      value: function get() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";
        var e = arguments.length > 1 ? arguments[1] : undefined;
        var i = t;

        var _iterator12 = _createForOfIteratorHelper(this.list),
            _step12;

        try {
          for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {
            var _t14 = _step12.value;
            _t14.regex.test(i) && (i = i.replace(_t14.regex, _t14.newstr));
          }
        } catch (err) {
          _iterator12.e(err);
        } finally {
          _iterator12.f();
        }

        return i || (_.isUndefined(e) ? t : e);
      }
    }]);

    return e;
  }();

  var i = new e().reset();

  var s = /*#__PURE__*/function () {
    function s(t) {
      _classCallCheck(this, s);

      this.list = [], this.reset(t);
    }

    _createClass(s, [{
      key: "reset",
      value: function reset() {
        var _this9 = this;

        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        return _.forOwn(t, function (t, e) {
          _this9.list.push({
            regex: new RegExp(e),
            suffix: t
          });
        }), this;
      }
    }, {
      key: "get",
      value: function get() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";
        var e = arguments.length > 1 ? arguments[1] : undefined;
        var i = t;

        var _iterator13 = _createForOfIteratorHelper(this.list),
            _step13;

        try {
          for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {
            var _t15 = _step13.value;

            if (_t15.regex.test(i) && !i.endsWith(_t15.suffix)) {
              i += _t15.suffix;
              break;
            }
          }
        } catch (err) {
          _iterator13.e(err);
        } finally {
          _iterator13.f();
        }

        return i || (_.isUndefined(e) ? t : e);
      }
    }]);

    return s;
  }();

  var n = new s().reset(),
      r = {
    AliasMapping: e,
    version: function version() {
      return t.version;
    },
    set: function set() {
      var _ref65 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
          e = _ref65.prefix,
          s = _ref65.alias,
          r = _ref65.suffix,
          o = _ref65.lang;

      e && (t.prefix = e), s && (t.alias = s, i.reset(t.alias)), r && (t.suffix = r, n.reset(t.suffix)), o && (t.lang = o);
    },
    update: function update() {
      var _ref66 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
          e = _ref66.prefix,
          s = _ref66.alias,
          r = _ref66.suffix,
          o = _ref66.lang;

      e && _.assign(t.prefix, e), s && (_.assign(t.alias, s), i.reset(t.alias)), r && (_.assign(t.suffix, r), n.reset(t.suffix)), o && (t.lang = o);
    },
    get: function get() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
      return e ? _.get(t, e) : t;
    },
    decorate: function decorate(t) {
      var e = t.name || "Unkown";
      Ti.Util.pushValue(t, "mixins", {
        computed: {
          tiComType: function tiComType() {
            return e;
          }
        }
      });
    },
    lang: function lang() {
      return r.get("lang") || "zh-cn";
    },
    url: function url() {
      var s = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";

      var _ref67 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref67$dynamicPrefix = _ref67.dynamicPrefix,
          r = _ref67$dynamicPrefix === void 0 ? {} : _ref67$dynamicPrefix,
          o = _ref67.dynamicAlias;

      var a, l;

      if (o) {
        a = (o instanceof e ? o : new e().reset(o)).get(s, null);
      }

      var h;
      if (/^((https?:)?\/\/)/.test(a)) h = /^.+\.(css|js|mjs|json|txt|text|html|xml)$/.test(a) ? a : n.get(a);else {
        if (a = i.get(a || s), /^.+\.(css|js|mjs|json|txt|text|html|xml)$/.test(a) || (a = n.get(a)), !(l = /^(@([^:]+):?)(.*)/.exec(a))) return a;

        var _l$slice = l.slice(2),
            _l$slice2 = _slicedToArray(_l$slice, 2),
            _e16 = _l$slice2[0],
            _o4 = _l$slice2[1],
            _c = r[_e16] || t.prefix[_e16];

        if (!_c) throw Ti.Err.make("e-ti-config-prefix_without_defined", _e16);
        h = _c + _o4;
      }
      return h;
    }
  };
  return {
    Config: r
  };
}(),
    Config = _ref9.Config,
    _ref10 = function () {
  var t = {
    createElement: function createElement(_ref68) {
      var _ref68$tagName = _ref68.tagName,
          t = _ref68$tagName === void 0 ? "div" : _ref68$tagName,
          _ref68$attrs = _ref68.attrs,
          e = _ref68$attrs === void 0 ? {} : _ref68$attrs,
          _ref68$props = _ref68.props,
          i = _ref68$props === void 0 ? {} : _ref68$props,
          _ref68$className = _ref68.className,
          s = _ref68$className === void 0 ? "" : _ref68$className,
          _ref68$$p = _ref68.$p,
          n = _ref68$$p === void 0 ? null : _ref68$$p;
      var r = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;
      var o = r.createElement(t);
      return s && (o.className = Ti.Css.joinClassNames(s)), _.forOwn(e, function (t, e) {
        o.setAttribute(e, t);
      }), _.forOwn(i, function (t, e) {
        o[e] = t;
      }), n && n.appendChild(o), o;
    },
    appendToHead: function appendToHead(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document.head;
      _.isElement(t) && _.isElement(e) && e.appendChild(t);
    },
    appendToBody: function appendToBody(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document.body;
      _.isElement(t) && _.isElement($body) && $body.appendChild(t);
    },
    appendTo: function appendTo(t, e) {
      _.isElement(t) && _.isElement(e) && e.appendChild(t);
    },
    prependTo: function prependTo(t, e) {
      e.firstChild ? e.insertBefore(t, e.firstChild) : e.appendChild(t);
    },
    findAll: function findAll() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "*";
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;
      if (!e) return [];
      return _toConsumableArray(e.querySelectorAll(t));
    },
    find: function find() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "*";
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;
      return e ? _.isElement(t) ? t : e.querySelector(t) : [];
    },
    remove: function remove(e, i) {
      if (_.isString(e)) {
        var _s6 = t.findAll(e, i);

        var _iterator14 = _createForOfIteratorHelper(_s6),
            _step14;

        try {
          for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {
            var _e17 = _step14.value;
            t.remove(_e17);
          }
        } catch (err) {
          _iterator14.e(err);
        } finally {
          _iterator14.f();
        }
      } else _.isElement(e) && e.parentNode.removeChild(e);
    },
    ownerWindow: function ownerWindow(t) {
      return t.defaultView ? t.defaultView : t.ownerDocument ? t.ownerDocument.defaultView : t;
    },
    autoRootFontSize: function autoRootFontSize() {
      var _ref69 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
          _ref69$$win = _ref69.$win,
          t = _ref69$$win === void 0 ? window : _ref69$$win,
          _ref69$phoneMaxWidth = _ref69.phoneMaxWidth,
          e = _ref69$phoneMaxWidth === void 0 ? 540 : _ref69$phoneMaxWidth,
          _ref69$tabletMaxWidth = _ref69.tabletMaxWidth,
          i = _ref69$tabletMaxWidth === void 0 ? 768 : _ref69$tabletMaxWidth,
          _ref69$designWidth = _ref69.designWidth,
          s = _ref69$designWidth === void 0 ? 1e3 : _ref69$designWidth,
          _ref69$max = _ref69.max,
          n = _ref69$max === void 0 ? 100 : _ref69$max,
          _ref69$min = _ref69.min,
          r = _ref69$min === void 0 ? 80 : _ref69$min,
          o = _ref69.callback;

      var a = window.document,
          l = document.documentElement;
      var h = t.innerWidth / s * n,
          c = Math.min(Math.max(h, r), n);

      if (_.isFunction(o)) {
        o({
          $win: t,
          $doc: a,
          $root: l,
          mode: t.innerWidth > i ? "desktop" : t.innerWidth > e ? "tablet" : "phone",
          fontSize: c,
          width: t.innerWidth,
          height: t.innerHeight
        });
      }
    },
    watchDocument: function watchDocument(t, e) {
      document.addEventListener(t, e);
    },
    unwatchDocument: function unwatchDocument(t, e) {
      document.removeEventListener(t, e);
    },
    watchAutoRootFontSize: function watchAutoRootFontSize() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var i = arguments.length > 1 ? arguments[1] : undefined;
      var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : window;
      _.isFunction(e) && (s = i || window, i = e, e = void 0);

      var n = _.assign({}, e, {
        $win: s,
        callback: i
      });

      s.addEventListener("resize", function () {
        t.autoRootFontSize(n);
      }), _.delay(function () {
        t.autoRootFontSize(n);
      }, 1);
    },
    setStyle: function setStyle(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      _.forOwn(e, function (e, i) {
        if (_.isNull(e) || _.isUndefined(e)) return;

        var s = _.kebabCase(i);

        if ("" === e) t.style.removeProperty(s);else {
          var _i11 = _.isNumber(e) ? e + "px" : e;

          t.style.setProperty(s, _i11);
        }
      });
    },
    setClass: function setClass(t) {
      for (var _len8 = arguments.length, e = new Array(_len8 > 1 ? _len8 - 1 : 0), _key8 = 1; _key8 < _len8; _key8++) {
        e[_key8 - 1] = arguments[_key8];
      }

      var i = _.flattenDeep(e).join(" ");

      t.className = i;
    },
    addClass: function addClass(t) {
      for (var _len9 = arguments.length, e = new Array(_len9 > 1 ? _len9 - 1 : 0), _key9 = 1; _key9 < _len9; _key9++) {
        e[_key9 - 1] = arguments[_key9];
      }

      var i = _.flattenDeep(e);

      var _iterator15 = _createForOfIteratorHelper(i),
          _step15;

      try {
        for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {
          var _e18 = _step15.value;

          var _i12 = _.trim(_e18);

          t.classList.add(_i12);
        }
      } catch (err) {
        _iterator15.e(err);
      } finally {
        _iterator15.f();
      }
    },
    removeClass: function removeClass(t) {
      for (var _len10 = arguments.length, e = new Array(_len10 > 1 ? _len10 - 1 : 0), _key10 = 1; _key10 < _len10; _key10++) {
        e[_key10 - 1] = arguments[_key10];
      }

      var i = _.flattenDeep(e);

      var _iterator16 = _createForOfIteratorHelper(i),
          _step16;

      try {
        for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {
          var _e19 = _step16.value;

          var _i13 = _.trim(_e19);

          t.classList.remove(_i13);
        }
      } catch (err) {
        _iterator16.e(err);
      } finally {
        _iterator16.f();
      }
    },
    hasClass: function hasClass(t) {
      if (!_.isElement(t)) return !1;

      for (var _len11 = arguments.length, e = new Array(_len11 > 1 ? _len11 - 1 : 0), _key11 = 1; _key11 < _len11; _key11++) {
        e[_key11 - 1] = arguments[_key11];
      }

      for (var _i14 = 0, _e20 = e; _i14 < _e20.length; _i14++) {
        var _i15 = _e20[_i14];
        if (!t.classList.contains(_i15)) return !1;
      }

      return !0;
    },
    hasOneClass: function hasOneClass(t) {
      if (!_.isElement(t)) return !1;

      for (var _len12 = arguments.length, e = new Array(_len12 > 1 ? _len12 - 1 : 0), _key12 = 1; _key12 < _len12; _key12++) {
        e[_key12 - 1] = arguments[_key12];
      }

      for (var _i16 = 0, _e21 = e; _i16 < _e21.length; _i16++) {
        var _i17 = _e21[_i16];
        if (t.classList.contains(_i17)) return !0;
      }

      return !1;
    },
    applyRect: function applyRect(e, i) {
      var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "tlwh";
      var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
      var r = e.ownerDocument.defaultView;

      _.defaults(n, {
        width: r.innerWidth,
        height: r.innerHeight
      });

      var o = i.toCss(n, s);
      t.setStyle(e, o);
    },
    dockTo: function dockTo(e, i) {
      var _ref70 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
          _ref70$mode = _ref70.mode,
          s = _ref70$mode === void 0 ? "H" : _ref70$mode,
          _ref70$axis = _ref70.axis,
          n = _ref70$axis === void 0 ? {} : _ref70$axis,
          r = _ref70.posListX,
          o = _ref70.posListY,
          a = _ref70.space,
          _ref70$viewportBorder = _ref70.viewportBorder,
          l = _ref70$viewportBorder === void 0 ? 4 : _ref70$viewportBorder,
          h = _ref70.position;

      h && (e.style.position = h);
      var c = {
        src: Ti.Rects.createBy(e),
        ta: Ti.Rects.createBy(i),
        win: Ti.Rects.createBy(e.ownerDocument.defaultView)
      };

      var u = function u(t, e, i) {
        return t <= e ? i[0] : t > e && t <= 2 * e ? i[1] : i[2];
      };

      if (_.defaults(n, {
        x: "auto",
        y: "auto"
      }), "auto" == n.x) {
        var _t16 = r || {
          H: ["left", "right"],
          V: ["right", "left"]
        }[s];

        n.x = u(c.ta.x, c.win.width / _t16.length, _t16);
      }

      if ("auto" == n.y) {
        var _t17 = o || {
          H: ["bottom", "top"],
          V: ["top", "center", "bottom"]
        }[s];

        n.y = u(c.ta.y, c.win.height / _t17.length, _t17);
      }

      var d = c.win.clone();
      "H" == s && ("bottom" == n.y ? d.top = c.ta.bottom : "top" == n.y && (d.bottom = c.ta.top), d.updateBy("tlbr"));
      var p = c.src.dockTo(c.ta, s, {
        axis: n,
        space: a,
        viewport: d,
        viewportBorder: l,
        wrapCut: !0
      });

      _.delay(function () {
        t.applyRect(e, c.src, p);
      }, 0);
    },
    htmlChipITT: function htmlChipITT() {
      var _ref71 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
          t = _ref71.icon,
          e = _ref71.text,
          i = _ref71.tip,
          s = _ref71.more;

      var _ref72 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref72$tagName = _ref72.tagName,
          n = _ref72$tagName === void 0 ? "div" : _ref72$tagName,
          _ref72$className = _ref72.className,
          r = _ref72$className === void 0 ? "" : _ref72$className,
          _ref72$iconTag = _ref72.iconTag,
          o = _ref72$iconTag === void 0 ? "div" : _ref72$iconTag,
          _ref72$iconClass = _ref72.iconClass,
          a = _ref72$iconClass === void 0 ? "" : _ref72$iconClass,
          _ref72$textTag = _ref72.textTag,
          l = _ref72$textTag === void 0 ? "div" : _ref72$textTag,
          _ref72$textClass = _ref72.textClass,
          h = _ref72$textClass === void 0 ? "" : _ref72$textClass,
          _ref72$textAsHtml = _ref72.textAsHtml,
          c = _ref72$textAsHtml === void 0 ? !1 : _ref72$textAsHtml,
          _ref72$moreTag = _ref72.moreTag,
          u = _ref72$moreTag === void 0 ? "div" : _ref72$moreTag,
          _ref72$moreClass = _ref72.moreClass,
          d = _ref72$moreClass === void 0 ? "" : _ref72$moreClass,
          _ref72$wrapperTag = _ref72.wrapperTag,
          p = _ref72$wrapperTag === void 0 ? "" : _ref72$wrapperTag,
          _ref72$wrapperClass = _ref72.wrapperClass,
          f = _ref72$wrapperClass === void 0 ? "" : _ref72$wrapperClass,
          _ref72$attrs = _ref72.attrs,
          m = _ref72$attrs === void 0 ? {} : _ref72$attrs;

      var g = "";

      if (t || e) {
        var _p = Ti.Icons.fontIconHtml(t),
            _f = function _f(t, e) {
          return t && e ? "".concat(t, "=\"").concat(e, "\"") : "";
        },
            _y = function _y(t) {
          return _f("class", t);
        },
            T = [];

        if (_.forOwn(m, function (t, e) {
          T.push(_f(e, t));
        }), T = T.join(" "), g += "<".concat(n, " ").concat(_y(r), " ").concat(_f("ti-tip", i), " ").concat(T, ">"), _p && (g += "<".concat(o, " ").concat(_y(a), "\">").concat(_p, "</").concat(o, ">")), e) {
          var _t18 = c ? e : Ti.I18n.text(e);

          g += "<".concat(l, " ").concat(_y(h), ">").concat(_t18, "</").concat(l, ">");
        }

        if (s) {
          var _t19 = Ti.I18n.text(s);

          g += "<".concat(u, " ").concat(_y(d), ">").concat(_t19, "</").concat(u, ">");
        }

        g += "</".concat(n, ">");
      }

      return p ? "<".concat(p, " ").concat(klass(f), ">").concat(g, "</").concat(p, ">") : g;
    },
    scrollBarSize: function scrollBarSize() {
      if (!window.SCROLL_BAR_SIZE) {
        var t = 0;
        $("body").append("<div id='div_out' style='position:relative;width:100px;height:100px;overflow-y:scroll;overflow-x:scroll'></div>"), $("#div_out").append("<div id='div_in' style='position:absolute;width:100%;height:100%;'></div>");
        var e = $("#div_out"),
            i = $("#div_in");
        t = e.width() - i.width(), $("#div_out").remove(), $("#div_in").remove(), window.SCROLL_BAR_SIZE = t;
      }

      return window.SCROLL_BAR_SIZE;
    }
  };
  return {
    Dom: t
  };
}(),
    Dom = _ref10.Dom,
    _ref11 = function () {
  function t(t, e, s) {
    var n = {},
        r = i.explainToArray(e, !1);

    var _iterator17 = _createForOfIteratorHelper(r),
        _step17;

    try {
      for (_iterator17.s(); !(_step17 = _iterator17.n()).done;) {
        var _e22 = _step17.value;

        var _i18 = Ti.Util.fallback(t[_e22], s);

        _.isUndefined(_i18) || (n[_e22] = _i18);
      }
    } catch (err) {
      _iterator17.e(err);
    } finally {
      _iterator17.f();
    }

    return n;
  }

  var e = /*#__PURE__*/function () {
    function e() {
      _classCallCheck(this, e);

      _.assign(this, {
        t: "top",
        l: "left",
        w: "width",
        h: "height",
        r: "right",
        b: "bottom",
        x: "x",
        y: "y"
      });
    }

    _createClass(e, [{
      key: "explainToArray",
      value: function explainToArray(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;

        var i = [],
            s = function (t) {
          var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;
          if (!t) return [];
          if (_.isArray(t)) return t;
          var i = t.toLowerCase().split("");
          return e ? i.sort() : i;
        }(t, e);

        var _iterator18 = _createForOfIteratorHelper(s),
            _step18;

        try {
          for (_iterator18.s(); !(_step18 = _iterator18.n()).done;) {
            var _t20 = _step18.value;
            var _e23 = this[_t20];
            _e23 && i.push(_e23);
          }
        } catch (err) {
          _iterator18.e(err);
        } finally {
          _iterator18.f();
        }

        return i;
      }
    }, {
      key: "getKey",
      value: function getKey(t) {
        return this[t];
      }
    }]);

    return e;
  }();

  var i = new e();

  var s = /*#__PURE__*/function () {
    function s(t, e) {
      _classCallCheck(this, s);

      this.__ti_rect__ = !0, this.set(t, e);
    }

    _createClass(s, [{
      key: "set",
      value: function set() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {
          top: 0,
          left: 0,
          width: 0,
          height: 0
        };
        var e = arguments.length > 1 ? arguments[1] : undefined;
        var i = ["bottom", "height", "left", "right", "top", "width", "x", "y"];

        if (_.isUndefined(e)) {
          var _s7 = [];

          var _iterator19 = _createForOfIteratorHelper(i),
              _step19;

          try {
            for (_iterator19.s(); !(_step19 = _iterator19.n()).done;) {
              var _e24 = _step19.value;
              var _i19 = t[_e24];

              if (_.isNumber(_i19)) {
                this[_e24] = _i19;

                var _t21 = _e24.substring(0, 1);

                _s7.push(_t21);
              }
            }
          } catch (err) {
            _iterator19.e(err);
          } finally {
            _iterator19.f();
          }

          e = _s7.join("");
        } else {
          var _iterator20 = _createForOfIteratorHelper(i),
              _step20;

          try {
            for (_iterator20.s(); !(_step20 = _iterator20.n()).done;) {
              var _e25 = _step20.value;
              var _i20 = t[_e25];
              _.isNumber(_i20) && (this[_e25] = _i20);
            }
          } catch (err) {
            _iterator20.e(err);
          } finally {
            _iterator20.f();
          }
        }

        return "bhlrtwxy" == e ? this : this.updateBy(e);
      }
    }, {
      key: "toString",
      value: function toString() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "tlwh";
        var i = t(this, e, "NaN"),
            s = [];
        return _.forEach(i, function (t) {
          return s.push(t);
        }), s.join(",");
      }
    }, {
      key: "valueOf",
      value: function valueOf() {
        return this.toString();
      }
    }, {
      key: "updateBy",
      value: function updateBy() {
        var _this10 = this;

        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "tlwh";
        return {
          "height/left/top/width": function heightLeftTopWidth() {
            _this10.right = _this10.left + _this10.width, _this10.bottom = _this10.top + _this10.height, _this10.x = _this10.left + _this10.width / 2, _this10.y = _this10.top + _this10.height / 2;
          },
          "height/right/top/width": function heightRightTopWidth() {
            _this10.left = _this10.right - _this10.width, _this10.bottom = _this10.top + _this10.height, _this10.x = _this10.left + _this10.width / 2, _this10.y = _this10.top + _this10.height / 2;
          },
          "bottom/height/left/width": function bottomHeightLeftWidth() {
            _this10.top = _this10.bottom - _this10.height, _this10.right = _this10.left + _this10.width, _this10.x = _this10.left + _this10.width / 2, _this10.y = _this10.top + _this10.height / 2;
          },
          "bottom/height/right/width": function bottomHeightRightWidth() {
            _this10.top = _this10.bottom - _this10.height, _this10.left = _this10.right - _this10.width, _this10.x = _this10.left + _this10.width / 2, _this10.y = _this10.top + _this10.height / 2;
          },
          "bottom/left/right/top": function bottomLeftRightTop() {
            _this10.width = _this10.right - _this10.left, _this10.height = _this10.bottom - _this10.top, _this10.x = _this10.left + _this10.width / 2, _this10.y = _this10.top + _this10.height / 2;
          },
          "height/width/x/y": function heightWidthXY() {
            var t = _this10.width / 2,
                e = _this10.height / 2;
            _this10.top = _this10.y - e, _this10.bottom = _this10.y + e, _this10.left = _this10.x - t, _this10.right = _this10.x + t;
          },
          "height/left/width/y": function heightLeftWidthY() {
            var t = _this10.width / 2,
                e = _this10.height / 2;
            _this10.top = _this10.y - e, _this10.bottom = _this10.y + e, _this10.x = _this10.left + t, _this10.right = _this10.left + _this10.width;
          },
          "height/right/width/y": function heightRightWidthY() {
            var t = _this10.width / 2,
                e = _this10.height / 2;
            _this10.top = _this10.y - e, _this10.bottom = _this10.y + e, _this10.x = _this10.right - t, _this10.left = _this10.right - _this10.width;
          },
          "height/top/width/x": function heightTopWidthX() {
            var t = _this10.width / 2,
                e = _this10.height / 2;
            _this10.y = _this10.top + e, _this10.bottom = _this10.top + _this10.height, _this10.left = _this10.x - t, _this10.right = _this10.x + t;
          },
          "bottom/height/width/x": function bottomHeightWidthX() {
            var t = _this10.width / 2,
                e = _this10.height / 2;
            _this10.y = _this10.bottom - e, _this10.top = _this10.bottom - _this10.height, _this10.left = _this10.x - t, _this10.right = _this10.x + t;
          }
        }[i.explainToArray(t).join("/")](), this;
      }
    }, {
      key: "raw",
      value: function raw() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "tlwh";
        var i = arguments.length > 1 ? arguments[1] : undefined;
        return t(this, e, i);
      }
    }, {
      key: "toCss",
      value: function toCss() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {
          width: window.innerWidth,
          height: window.innerHeight
        };
        var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "tlwh";
        var s = arguments.length > 2 ? arguments[2] : undefined;
        var n = {
          top: this.top,
          left: this.left,
          width: this.width,
          height: this.height,
          right: e.width - this.right,
          bottom: e.height - this.bottom
        };
        return Ti.IsDebug() && console.log("CSS:", n), t(n, i, s);
      }
    }, {
      key: "relative",
      value: function relative(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
          x: 0,
          y: 0
        };
        return this.top = this.top - (t.top - e.y), this.left = this.left - (t.left - e.x), this.updateBy("tlwh");
      }
    }, {
      key: "zoom",
      value: function zoom() {
        var _ref73 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            _ref73$x = _ref73.x,
            t = _ref73$x === void 0 ? 1 : _ref73$x,
            _ref73$y = _ref73.y,
            e = _ref73$y === void 0 ? t : _ref73$y,
            _ref73$centre = _ref73.centre,
            i = _ref73$centre === void 0 ? this : _ref73$centre;

        return this.top = (this.top - i.y) * e + i.y, this.left = (this.left - i.x) * t + i.x, this.width = this.width * t, this.height = this.height * e, this.updateBy("tlwh");
      }
    }, {
      key: "zoomTo",
      value: function zoomTo() {
        var _ref74 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            t = _ref74.width,
            e = _ref74.height,
            _ref74$mode = _ref74.mode,
            i = _ref74$mode === void 0 ? "contain" : _ref74$mode;

        if ("contain" == i) {
          if (new s({
            top: 0,
            left: 0,
            width: t,
            height: e
          }).contains(this)) return this;
        }

        var n,
            r,
            o = t,
            a = e,
            l = this.width / this.height,
            h = o / a;
        return l > h ? "cover" == i ? (r = a, n = a * l) : (n = o, r = o / l) : l < h ? "cover" == i ? (n = o, r = o / l) : (r = a, n = a * l) : (n = o, r = a, x = 0, y = 0), this.width = n, this.height = r, this.updateBy("tlwh");
      }
    }, {
      key: "centreTo",
      value: function centreTo() {
        var _ref75 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            t = _ref75.width,
            e = _ref75.height,
            _ref75$top = _ref75.top,
            i = _ref75$top === void 0 ? 0 : _ref75$top,
            _ref75$left = _ref75.left,
            s = _ref75$left === void 0 ? 0 : _ref75$left;

        var _ref76 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
            _ref76$xAxis = _ref76.xAxis,
            n = _ref76$xAxis === void 0 ? !0 : _ref76$xAxis,
            _ref76$yAxis = _ref76.yAxis,
            r = _ref76$yAxis === void 0 ? !0 : _ref76$yAxis;

        if (n && t > 0) {
          var _e26 = t - this.width;

          this.left = s + _e26 / 2;
        }

        if (r && e > 0) {
          var _t22 = e - this.height;

          this.top = i + _t22 / 2;
        }

        return this.updateBy("tlwh");
      }
    }, {
      key: "translate",
      value: function translate() {
        var _ref77 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            _ref77$x = _ref77.x,
            t = _ref77$x === void 0 ? 0 : _ref77$x,
            _ref77$y = _ref77.y,
            e = _ref77$y === void 0 ? 0 : _ref77$y;

        return this.y -= e, this.x -= t, this.updateBy("xywh");
      }
    }, {
      key: "moveTo",
      value: function moveTo() {
        var _this11 = this;

        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "tl";
        _.defaults(t, {
          x: 0,
          y: 0
        }), _.defaults(e, {
          x: 0,
          y: 0
        });
        return {
          "left/top": function leftTop() {
            _this11.left = t.x - e.x, _this11.top = t.y - e.y, _this11.updateBy("tlwh");
          },
          "right/top": function rightTop() {
            _this11.right = t.x + e.x, _this11.top = t.y - e.y, _this11.updateBy("trwh");
          },
          "bottom/left": function bottomLeft() {
            _this11.left = t.x - e.x, _this11.bottom = t.y + e.y, _this11.updateBy("blwh");
          },
          "bottom/right": function bottomRight() {
            _this11.right = t.x + e.x, _this11.bottom = t.y + e.y, _this11.updateBy("brwh");
          }
        }[i.explainToArray(s).join("/")](), this;
      }
    }, {
      key: "dockTo",
      value: function dockTo(t) {
        var _this12 = this;

        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "H";

        var _ref78 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
            _ref78$axis = _ref78.axis,
            i = _ref78$axis === void 0 ? {} : _ref78$axis,
            _ref78$space = _ref78.space,
            s = _ref78$space === void 0 ? {} : _ref78$space,
            _ref78$viewport = _ref78.viewport,
            r = _ref78$viewport === void 0 ? {} : _ref78$viewport,
            _ref78$viewportBorder = _ref78.viewportBorder,
            o = _ref78$viewportBorder === void 0 ? 4 : _ref78$viewportBorder,
            _ref78$wrapCut = _ref78.wrapCut,
            a = _ref78$wrapCut === void 0 ? !1 : _ref78$wrapCut;

        _.isNumber(s) && (s = {
          x: s,
          y: s
        }), _.defaults(i, {
          x: "center",
          y: "bottom"
        }), _.defaults(s, {
          x: 0,
          y: 0
        });
        ({
          "V:left/top": function VLeftTop() {
            _this12.right = t.left - s.x, _this12.top = t.top + s.y, _this12.updateBy("rtwh");
          },
          "V:left/center": function VLeftCenter() {
            _this12.right = t.left - s.x, _this12.y = t.y + s.y, _this12.updateBy("rywh");
          },
          "V:left/bottom": function VLeftBottom() {
            _this12.right = t.left - s.x, _this12.bottom = t.bottom - s.y, _this12.updateBy("rbwh");
          },
          "V:right/top": function VRightTop() {
            _this12.left = t.right + s.x, _this12.top = t.top + s.y, _this12.updateBy("ltwh");
          },
          "V:right/center": function VRightCenter() {
            _this12.left = t.right + s.x, _this12.y = t.y + s.y, _this12.updateBy("lywh");
          },
          "V:right/bottom": function VRightBottom() {
            _this12.left = t.right + s.x, _this12.bottom = t.bottom - s.y, _this12.updateBy("lbwh");
          },
          "H:left/top": function HLeftTop() {
            _this12.left = t.left + s.x, _this12.bottom = t.top - s.y, _this12.updateBy("lbwh");
          },
          "H:left/bottom": function HLeftBottom() {
            _this12.left = t.left + s.x, _this12.top = t.bottom + s.y, _this12.updateBy("ltwh");
          },
          "H:center/top": function HCenterTop() {
            _this12.x = t.x + s.x, _this12.bottom = t.top - s.y, _this12.updateBy("xbwh");
          },
          "H:center/bottom": function HCenterBottom() {
            _this12.x = t.x + s.x, _this12.top = t.bottom + s.y, _this12.updateBy("xtwh");
          },
          "H:right/top": function HRightTop() {
            _this12.right = t.right - s.x, _this12.bottom = t.top - s.y, _this12.updateBy("rbwh");
          },
          "H:right/bottom": function HRightBottom() {
            _this12.right = t.right - s.x, _this12.top = t.bottom + s.y, _this12.updateBy("rtwh");
          }
        })[e + ":" + i.x + "/" + i.y]();
        var l = "tl";

        if (a && n.isRect(r)) {
          var _t23 = r.clone(o);

          _t23.wrap(this), _t23.contains(this) || (this.overlap(_t23), l = "tlwh");
        }

        return l;
      }
    }, {
      key: "dockIn",
      value: function dockIn(t) {
        var _this13 = this;

        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
        _.defaults(e, {
          x: "center",
          y: "center"
        }), _.defaults(i, {
          x: 0,
          y: 0
        });
        return {
          "left/top": function leftTop() {
            _this13.left = t.left + i.x, _this13.top = t.top + i.y, _this13.updateBy("ltwh");
          },
          "left/center": function leftCenter() {
            _this13.left = t.left + i.x, _this13.y = t.y + i.y, _this13.updateBy("lywh");
          },
          "left/bottom": function leftBottom() {
            _this13.left = t.left + i.x, _this13.bottom = t.bottom - i.y, _this13.updateBy("lbwh");
          },
          "right/top": function rightTop() {
            _this13.right = t.right - i.x, _this13.top = t.top + i.y, _this13.updateBy("rtwh");
          },
          "right/center": function rightCenter() {
            _this13.right = t.right - i.x, _this13.y = t.y + i.y, _this13.updateBy("rywh");
          },
          "right/bottom": function rightBottom() {
            _this13.right = t.right - i.x, _this13.bottom = t.bottom - i.y, _this13.updateBy("brwh");
          },
          "center/center": function centerCenter() {
            _this13.x = t.x + i.x, _this13.x = t.y + i.y, _this13.updateBy("xywh");
          }
        }[e.x + "/" + e.y](), this;
      }
    }, {
      key: "wrap",
      value: function wrap(t) {
        var e = ["w", "h"];
        return this.containsX(t) || (t.left > this.left && t.right > this.right ? (t.right = this.right, e.push("r")) : (t.left = this.left, e.push("l"))), this.containsY(t) ? 3 == e.length && e.push("t") : t.top > this.top && t.bottom > this.bottom ? (t.bottom = this.bottom, e.push("b")) : (t.top = this.top, e.push("t")), 3 == e.length && e.push("l"), 4 == e.length ? t.updateBy(e.join("")) : t;
      }
    }, {
      key: "wrapCut",
      value: function wrapCut(t) {
        return this.wrap(t), this.contains(t) || t.overlap(this), t;
      }
    }, {
      key: "union",
      value: function union() {
        for (var _len13 = arguments.length, t = new Array(_len13), _key13 = 0; _key13 < _len13; _key13++) {
          t[_key13] = arguments[_key13];
        }

        for (var _i21 = 0, _t24 = t; _i21 < _t24.length; _i21++) {
          var _e27 = _t24[_i21];
          this.top = Math.min(this.top, _e27.top), this.left = Math.min(this.left, _e27.left), this.right = Math.max(this.right, _e27.right), this.bottom = Math.max(this.bottom, _e27.bottom);
        }

        return this.updateBy("tlbr");
      }
    }, {
      key: "overlap",
      value: function overlap() {
        for (var _len14 = arguments.length, t = new Array(_len14), _key14 = 0; _key14 < _len14; _key14++) {
          t[_key14] = arguments[_key14];
        }

        for (var _i22 = 0, _t25 = t; _i22 < _t25.length; _i22++) {
          var _e28 = _t25[_i22];
          this.top = Math.max(this.top, _e28.top), this.left = Math.max(this.left, _e28.left), this.right = Math.min(this.right, _e28.right), this.bottom = Math.min(this.bottom, _e28.bottom);
        }

        return this.updateBy("tlbr");
      }
    }, {
      key: "contains",
      value: function contains(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
        return this.containsX(t, e) && this.containsY(t, e);
      }
    }, {
      key: "containsX",
      value: function containsX(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
        return this.left + e <= t.left && this.right - e >= t.right;
      }
    }, {
      key: "containsY",
      value: function containsY(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
        return this.top + e <= t.top && this.bottom - e >= t.bottom;
      }
    }, {
      key: "isOverlap",
      value: function isOverlap(t) {
        return this.overlap(t).area() > 0;
      }
    }, {
      key: "area",
      value: function area() {
        return this.width * this.height;
      }
    }, {
      key: "clone",
      value: function clone() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
        return new s({
          left: this.left + t,
          right: this.right - t,
          top: this.top + t,
          bottom: this.bottom - t
        }, "tlbr");
      }
    }]);

    return s;
  }();

  var n = {
    create: function create(t, e) {
      return new s(t, e);
    },
    createBy: function createBy(t) {
      if (!t.ownerDocument) {
        var _e29 = Ti.Dom.ownerWindow(t);

        return new s({
          top: 0,
          left: 0,
          width: _e29.innerWidth,
          height: _e29.innerHeight
        });
      }

      var e = t.getBoundingClientRect();
      return new s(e, "tlwh");
    },
    union: function union() {
      for (var _len15 = arguments.length, t = new Array(_len15), _key15 = 0; _key15 < _len15; _key15++) {
        t[_key15] = arguments[_key15];
      }

      if (0 == t.length) return new s();
      var e = new s(t[0]);
      return e.union.apply(e, _toConsumableArray(t.slice(1))), e;
    },
    overlap: function overlap() {
      for (var _len16 = arguments.length, t = new Array(_len16), _key16 = 0; _key16 < _len16; _key16++) {
        t[_key16] = arguments[_key16];
      }

      if (0 == t.length) return new s();
      var e = new s(t[0]);
      return e.overlap.apply(e, _toConsumableArray(t.slice(1))), e;
    },
    isRect: function isRect(t) {
      return t && t.__ti_rect__ && t instanceof s;
    }
  };
  return {
    Rect: s,
    TiRects: n,
    Rects: n
  };
}(),
    Rect = _ref11.Rect,
    Rects = _ref11.Rects,
    _ref12 = function () {
  function t() {
    return _t26.apply(this, arguments);
  }

  function _t26() {
    _t26 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee22() {
      var e,
          _ref81,
          i,
          s,
          _n7,
          _r3,
          r,
          o,
          a,
          l,
          h,
          _args22 = arguments;

      return regeneratorRuntime.wrap(function _callee22$(_context22) {
        while (1) {
          switch (_context22.prev = _context22.next) {
            case 0:
              e = _args22.length > 0 && _args22[0] !== undefined ? _args22[0] : [];
              _ref81 = _args22.length > 1 && _args22[1] !== undefined ? _args22[1] : {}, i = _ref81.dynamicPrefix, s = _ref81.dynamicAlias;

              if (!_.isFunction(e)) {
                _context22.next = 4;
                break;
              }

              return _context22.abrupt("return", t(e(), {
                dynamicPrefix: i
              }));

            case 4:
              if (!_.isArray(e)) {
                _context22.next = 7;
                break;
              }

              _n7 = [], _r3 = [];
              return _context22.abrupt("return", (e.forEach(function (e, o) {
                _n7.push(t(e, {
                  dynamicPrefix: i,
                  dynamicAlias: s
                }).then(function (t) {
                  return _r3[o] = t;
                }));
              }), Promise.all(_n7).then(function () {
                return _r3;
              })));

            case 7:
              if (_.isString(e)) {
                _context22.next = 9;
                break;
              }

              throw Ti.Err.make("e-ti-use-url_must_string", e);

            case 9:
              o = e, a = /^(!(m?js|json|css|text):)?(.+)$/.exec(e);
              a && (r = a[2], o = a[3]);
              l = Ti.Config.url(o, {
                dynamicPrefix: i,
                dynamicAlias: s
              });
              Ti.IsInfo("TiLoad") && console.log("url：", e, "\n  ::", o, "\n  ::", l, "\n  ::", i, "\n  ::", s), r || (r = (a = /\.(m?js|css|json)$/.exec(l)) ? a[1] : "text");
              h = Ti.MatchCache(l);

              if (!h) {
                _context22.next = 16;
                break;
              }

              return _context22.abrupt("return", h);

            case 16:
              _context22.prev = 16;
              _context22.next = 19;
              return n[r](l);

            case 19:
              return _context22.abrupt("return", h = _context22.sent);

            case 22:
              _context22.prev = 22;
              _context22.t0 = _context22["catch"](16);
              throw Ti.IsWarn("TiLoad") && console.warn("TiLoad Fail: [".concat(r, "]"), "\"".concat(e, "\" => \"").concat(l, "\"")), _context22.t0;

            case 25:
            case "end":
              return _context22.stop();
          }
        }
      }, _callee22, null, [[16, 22]]);
    }));
    return _t26.apply(this, arguments);
  }

  var e = /*#__PURE__*/function () {
    function e() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function (t) {
        return t;
      };

      _classCallCheck(this, e);

      this.cached = {}, this.loading = {}, this.doLoad = t;
    }

    _createClass(e, [{
      key: "tryLoad",
      value: function () {
        var _tryLoad = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee18(t, e) {
          var i, s, n, r, _iterator21, _step21, _t27;

          return regeneratorRuntime.wrap(function _callee18$(_context18) {
            while (1) {
              switch (_context18.prev = _context18.next) {
                case 0:
                  i = this.cached[t];

                  if (_.isUndefined(i)) {
                    _context18.next = 3;
                    break;
                  }

                  return _context18.abrupt("return", void e(i));

                case 3:
                  s = this.loading[t];

                  if (!(_.isArray(s) && s.length > 0)) {
                    _context18.next = 6;
                    break;
                  }

                  return _context18.abrupt("return", void s.push(e));

                case 6:
                  this.loading[t] = [e];
                  _context18.next = 9;
                  return this.doLoad(t);

                case 9:
                  n = _context18.sent;
                  this.cached[t] = n;
                  r = this.loading[t];
                  this.loading[t] = null;
                  _iterator21 = _createForOfIteratorHelper(r);

                  try {
                    for (_iterator21.s(); !(_step21 = _iterator21.n()).done;) {
                      _t27 = _step21.value;

                      _t27(n);
                    }
                  } catch (err) {
                    _iterator21.e(err);
                  } finally {
                    _iterator21.f();
                  }

                case 15:
                case "end":
                  return _context18.stop();
              }
            }
          }, _callee18, this);
        }));

        function tryLoad(_x10, _x11) {
          return _tryLoad.apply(this, arguments);
        }

        return tryLoad;
      }()
    }]);

    return e;
  }();

  var i = new e( /*#__PURE__*/function () {
    var _ref79 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee19(t) {
      return regeneratorRuntime.wrap(function _callee19$(_context19) {
        while (1) {
          switch (_context19.prev = _context19.next) {
            case 0:
              _context19.prev = 0;
              _context19.next = 3;
              return Promise.resolve().then(function () {
                return _interopRequireWildcard(require("".concat(t)));
              });

            case 3:
              return _context19.abrupt("return", _context19.sent);

            case 6:
              _context19.prev = 6;
              _context19.t0 = _context19["catch"](0);
              throw Ti.IsWarn("TiLoad") && console.warn("ti.load.mjs", t, _context19.t0), _context19.t0;

            case 9:
            case "end":
              return _context19.stop();
          }
        }
      }, _callee19, null, [[0, 6]]);
    }));

    return function (_x12) {
      return _ref79.apply(this, arguments);
    };
  }()),
      s = new e( /*#__PURE__*/function () {
    var _ref80 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee20(t) {
      return regeneratorRuntime.wrap(function _callee20$(_context20) {
        while (1) {
          switch (_context20.prev = _context20.next) {
            case 0:
              _context20.prev = 0;
              _context20.next = 3;
              return Ti.Http.get(t);

            case 3:
              return _context20.abrupt("return", _context20.sent);

            case 6:
              _context20.prev = 6;
              _context20.t0 = _context20["catch"](0);
              throw Ti.IsWarn("TiLoad") && console.warn("ti.load.text", t, _context20.t0), _context20.t0;

            case 9:
            case "end":
              return _context20.stop();
          }
        }
      }, _callee20, null, [[0, 6]]);
    }));

    return function (_x13) {
      return _ref80.apply(this, arguments);
    };
  }()),
      n = {
    js: function js(t) {
      return new Promise(function (e, i) {
        var s = Ti.Dom.find("script[src=\"".concat(t, "\"]"));
        s ? _.defer(e, s) : ((s = Ti.Dom.createElement({
          tagName: "script",
          props: {
            src: t
          }
        })).addEventListener("load", function (t) {
          e(s);
        }, {
          once: !0
        }), s.addEventListener("error", function (t) {
          i(t);
        }, {
          once: !0
        }), Ti.Dom.appendToHead(s));
      });
    },
    mjs: function mjs(t) {
      return new Promise(function (e, s) {
        i.tryLoad(t, function (t) {
          e(t["default"]);
        });
      });
    },
    css: function css(t) {
      return new Promise(function (e, i) {
        var s = Ti.Dom.find("link[href=\"".concat(t, "\"]"));
        s ? _.defer(e, s) : ((s = Ti.Dom.createElement({
          tagName: "link",
          props: {
            rel: "stylesheet",
            type: "text/css",
            href: t
          }
        })).addEventListener("load", function (t) {
          e(s);
        }, {
          once: !0
        }), s.addEventListener("error", function (t) {
          i(t);
        }, {
          once: !0
        }), Ti.Dom.appendToHead(s));
      });
    },
    json: function json(t) {
      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee21() {
        var _e30;

        return regeneratorRuntime.wrap(function _callee21$(_context21) {
          while (1) {
            switch (_context21.prev = _context21.next) {
              case 0:
                _context21.prev = 0;
                _context21.next = 3;
                return n.text(t);

              case 3:
                _e30 = _context21.sent;
                return _context21.abrupt("return", _.isPlainObject(_e30) ? _e30 : JSON.parse(_e30));

              case 7:
                _context21.prev = 7;
                _context21.t0 = _context21["catch"](0);
                throw Ti.IsWarn("TiLoad") && console.warn("ti.load.json!!", t, _context21.t0), _context21.t0;

              case 10:
              case "end":
                return _context21.stop();
            }
          }
        }, _callee21, null, [[0, 7]]);
      }))();
    },
    text: function text(t) {
      return new Promise(function (e, i) {
        s.tryLoad(t, e);
      });
    }
  };
  return {
    Load: t
  };
}(),
    Load = _ref12.Load,
    _ref13 = function () {
  var t = {
    arraybuffer: function arraybuffer(t) {
      throw "No implement yet!";
    },
    blob: function blob(t) {
      throw "No implement yet!";
    },
    document: function document(t) {
      throw "No implement yet!";
    },
    xml: function xml(t) {
      throw "No implement yet!";
    },
    ajax: function ajax(e) {
      var i = t.json(e);
      if (i.ok) return i.data;
      throw i;
    },
    json: function json(t) {
      var e = t.responseText,
          i = _.trim(e) || null;

      try {
        return JSON.parse(i);
      } catch (t) {
        return Ti.Types.safeParseJson(i, i);
      }
    },
    jsonOrText: function jsonOrText(t) {
      var e = t.responseText;

      try {
        var _t28 = _.trim(e) || null;

        return JSON.parse(_t28);
      } catch (t) {}

      return e;
    },
    text: function text(t) {
      return t.responseText;
    }
  },
      e = {
    send: function send(t) {
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      Ti.IsInfo("TiHttp") && console.log("TiHttp.send", t, i);
      var _i$method = i.method,
          s = _i$method === void 0 ? "GET" : _i$method,
          _i$params = i.params,
          n = _i$params === void 0 ? {} : _i$params,
          _i$body = i.body,
          r = _i$body === void 0 ? null : _i$body,
          _i$file = i.file,
          o = _i$file === void 0 ? null : _i$file,
          _i$headers = i.headers,
          a = _i$headers === void 0 ? {} : _i$headers,
          _i$cleanNil = i.cleanNil,
          l = _i$cleanNil === void 0 ? !0 : _i$cleanNil,
          _i$progress = i.progress,
          h = _i$progress === void 0 ? _.identity : _i$progress,
          _i$created = i.created,
          c = _i$created === void 0 ? _.identity : _i$created,
          _i$beforeSend = i.beforeSend,
          u = _i$beforeSend === void 0 ? _.identity : _i$beforeSend,
          _i$finished = i.finished,
          d = _i$finished === void 0 ? _.identity : _i$finished,
          _i$readyStateChanged = i.readyStateChanged,
          p = _i$readyStateChanged === void 0 ? _.identity : _i$readyStateChanged;

      if (s = _.upperCase(s), l) {
        var _t29 = {};
        Ti.Util.walk(n, {
          leaf: function leaf(e, i) {
            Ti.Util.isNil(e) || _.set(_t29, i, e);
          }
        }), n = _t29;
      }

      var _ref82 = Ti.Invoke({
        GET: function GET() {
          var i = e.encodeFormData(n);
          return {
            urlToSend: i ? t + "?" + i : t
          };
        },
        POST: function POST() {
          return _.defaults(a, {
            "Content-type": "application/x-www-form-urlencoded; charset=utf-8"
          }), o ? {
            urlToSend: [t, e.encodeFormData(n)].join("?"),
            sendData: o
          } : r ? {
            urlToSend: [t, e.encodeFormData(n)].join("?"),
            sendData: r
          } : {
            urlToSend: t,
            sendData: e.encodeFormData(n)
          };
        }
      }[s]) || {
        urlToSend: t
      },
          f = _ref82.urlToSend,
          m = _ref82.sendData,
          g = new XMLHttpRequest();

      if (o) {
        if (!g.upload) throw Ti.Err.make("e.ti.http.upload.NoSupported");
        g.upload.addEventListener("progress", h);
      }

      return c(g), new Promise(function (t, e) {
        g.onreadystatechange = function () {
          p(g, i), 4 == g.readyState && (d(g), 200 == g.status ? t(g) : e(g));
        }, g.open(s, f), _.forOwn(a, function (t, e) {
          g.setRequestHeader(e, t);
        }), u(g), g.send(m);
      });
    },
    sendAndProcess: function sendAndProcess(i) {
      var s = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      return e.send(i, s).then(function (e) {
        return function (e) {
          var _ref83 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
              _ref83$as = _ref83.as,
              i = _ref83$as === void 0 ? "text" : _ref83$as;

          return Ti.InvokeBy(t, i, [e]);
        }(e, s);
      });
    },
    get: function get(t) {
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      return e.sendAndProcess(t, _.assign({}, i, {
        method: "GET"
      }));
    },
    post: function post(t) {
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      return e.sendAndProcess(t, _.assign({}, i, {
        method: "POST"
      }));
    },
    encodeFormData: function encodeFormData() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = [];
      return _.forOwn(t, function (t, i) {
        var s = Ti.Types.toStr(t);
        e.push("".concat(i, "=").concat(encodeURIComponent(s)));
      }), e.join("&");
    }
  };
  return {
    Http: e
  };
}(),
    Http = _ref13.Http,
    _ref14 = function () {
  function t(t) {
    var i = _.get(e, t);

    if (i) return i;

    if (_.isString(t)) {
      var _i23 = t.replace(/\./g, "-");

      return e[_i23];
    }

    return t;
  }

  var e = {},
      i = {
    put: function put(t) {
      if (_.isArray(t)) {
        var _iterator22 = _createForOfIteratorHelper(t),
            _step22;

        try {
          for (_iterator22.s(); !(_step22 = _iterator22.n()).done;) {
            var _e31 = _step22.value;
            i.put(_e31);
          }
        } catch (err) {
          _iterator22.e(err);
        } finally {
          _iterator22.f();
        }
      } else if (_.isPlainObject(t)) {
        if (_.isBoolean(t.ok)) return void console.warn("invalid msgs", t);

        _.assign(e, t);
      }
    },
    get: function get(e, s) {
      if (e && e.key && _.isPlainObject(e)) return i.getf(e.key, e.vars);
      if (e instanceof Error) return e.code ? Ti.S.join([i.get(e.code), e.data], " : ") : e.message;
      var n = t(e);
      return _.isUndefined(n) ? _.isUndefined(s) ? e : s : n;
    },
    text: function text(t, e) {
      if (t && t.text && _.isPlainObject(t)) return i.textf(t.text, t.vars);
      if (t instanceof Error) return i.get(t);
      var s = /^i18n:(.+)$/.exec(t);
      return s ? i.get(s[1], e) : Ti.Util.fallback(t, e);
    },
    getf: function getf(e) {
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      if (_.isString(e)) {
        var _s8 = t(e) || e;

        return Ti.S.renderBy(_s8, i);
      }

      return e;
    },
    textf: function textf(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var s = /^i18n:(.+)$/.exec(t);
      return s ? i.getf(s[1], e) : Ti.S.renderBy(t, e);
    }
  };
  return {
    I18n: i
  };
}(),
    I18n = _ref14.I18n,
    _ref15 = function () {
  var t = {
    "7z": "fas-file-archive",
    apk: "zmdi-android",
    css: "fab-css3",
    csv: "fas-file-csv",
    doc: "far-file-word",
    docx: "fas-file-word",
    dmg: "fab-apple",
    exe: "im-windows-o",
    gz: "fas-file-archive",
    hmaker_site: "zmdi-globe-alt",
    html: "fab-html5",
    js: "fab-node-js",
    json: "fas-quote-right",
    less: "fab-first-order-alt",
    md: "fab-markdown",
    mjs: "fab-node-js",
    mkv: "far-file-video",
    mp: "fas-file-signature",
    mp3: "far-file-audio",
    mp4: "far-file-video",
    msi: "fab-windows",
    pdf: "far-file-pdf",
    py: "fab-python",
    rar: "fas-file-archive",
    rss: "fas-rss-square",
    sass: "fab-first-order",
    tar: "far-file-archive",
    tgz: "fas-file-archive",
    comt: "im-flask",
    wnml: "fas-file-code",
    xls: "far-file-excel",
    xlsx: "fas-file-excel",
    xml: "far-file-code",
    zip: "fas-file-archive"
  },
      e = {
    audio: "far-file-audio",
    image: "far-file-image",
    text: "far-file-alt",
    video: "far-file-video",
    "text/css": "fab-css3",
    "text/html": "fab-html5",
    "application/x-zip-compressed": "fas-file-archive",
    "application/x-javascript": "fab-js-square",
    "text/javascript": "fab-js-square"
  },
      i = {
    add: "zmdi-plus",
    alert: "zmdi-notifications-none",
    backward: "zmdi-chevron-left",
    close: "zmdi-close",
    confirm: "zmdi-help",
    create: "zmdi-audio",
    del: "zmdi-delete",
    done: "fas-thumbs-up",
    download: "zmdi-download",
    edit: "zmdi-edit",
    error: "zmdi-alert-octagon",
    forward: "zmdi-chevron-right",
    help: "zmdi-help-outline",
    info: "zmdi-info-outline",
    loading: "fas-spinner fa-spin",
    processing: "zmdi-settings zmdi-hc-spin",
    ok: "zmdi-check-circle",
    prompt: "zmdi-keyboard",
    refresh: "zmdi-refresh",
    removed: "far-trash-alt",
    setting: "zmdi-settings",
    success: "zmdi-check-circle",
    track: "zmdi-notifications-none",
    warn: "zmdi-alert-triangle"
  },
      s = {
    FILE: "far-file",
    DIR: "fas-folder"
  },
      n = _objectSpread({}, t, {}, e, {}, s, {}, i),
      r = "zmdi-cake",
      o = {
    put: function put() {
      var _ref84 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
          n = _ref84.types,
          o = _ref84.mimes,
          a = _ref84.races,
          l = _ref84.names,
          h = _ref84.dft;

      _.assign(t, n), _.assign(e, o), _.assign(i, l), _.assign(s, a), _.assign(r, h);
    },
    get: function get(o) {
      var a = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : r;
      if (!o) return a || r;
      if (_.isString(o)) return n[o] || a || r;
      var l = o.tp,
          h = o.type,
          c = o.mime,
          u = o.race,
          d = o.name,
          p = null;

      if (c) {
        var _t30 = /^([a-z0-9]+)\/(.+)$/.exec(c);

        _t30 && (p = _t30[1]);
      }

      return t[h || l] || e[c] || e[p] || s[u] || i[d] || a || r;
    },
    getByName: function getByName(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      return Ti.Util.fallback(i[t], e, r);
    },
    parseFontIcon: function parseFontIcon(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      if (!t) return e;
      var i = {
        className: "material-icons",
        text: t
      },
          s = /^([a-z]+)-(.+)$/.exec(t);
      return s && (/^fa[a-z]$/.test(s[1]) ? (i.className = s[1] + " fa-" + s[2], i.text = null) : (i.className = s[1] + " " + t, i.text = null)), i;
    },
    fontIconHtml: function fontIconHtml(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
      if (!t) return e;
      var i = o.parseFontIcon(t);
      return _.isEmpty(i) ? e : "<i class=\"".concat(i.className, "\">").concat(i.text || "", "</i>");
    }
  };

  return {
    Icons: o
  };
}(),
    Icons = _ref15.Icons,
    _ref16 = function () {
  var t = /*#__PURE__*/function () {
    function t() {
      var _ref85 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
          _t31 = _ref85.key,
          e = _ref85.everythingOk,
          i = _ref85.fail,
          _ref85$once = _ref85.once,
          s = _ref85$once === void 0 ? !1 : _ref85$once;

      _classCallCheck(this, t);

      _.assign(this, {
        key: _t31,
        everythingOk: e,
        fail: i,
        once: s
      });
    }

    _createClass(t, [{
      key: "explode",
      value: function () {
        var _explode = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee23() {
          return regeneratorRuntime.wrap(function _callee23$(_context23) {
            while (1) {
              switch (_context23.prev = _context23.next) {
                case 0:
                  _context23.next = 2;
                  return this.everythingOk();

                case 2:
                  _context23.t0 = !!_context23.sent;

                  if (_context23.t0) {
                    _context23.next = 7;
                    break;
                  }

                  _context23.next = 6;
                  return this.fail();

                case 6:
                  _context23.t0 = !1;

                case 7:
                  return _context23.abrupt("return", _context23.t0);

                case 8:
                case "end":
                  return _context23.stop();
              }
            }
          }, _callee23, this);
        }));

        function explode() {
          return _explode.apply(this, arguments);
        }

        return explode;
      }()
    }]);

    return t;
  }();

  var e = /*#__PURE__*/function () {
    function e() {
      _classCallCheck(this, e);

      this.detonators = [];
    }

    _createClass(e, [{
      key: "fire",
      value: function () {
        var _fire = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee24() {
          var _iterator23, _step23, _t32;

          return regeneratorRuntime.wrap(function _callee24$(_context24) {
            while (1) {
              switch (_context24.prev = _context24.next) {
                case 0:
                  _iterator23 = _createForOfIteratorHelper(this.detonators);
                  _context24.prev = 1;

                  _iterator23.s();

                case 3:
                  if ((_step23 = _iterator23.n()).done) {
                    _context24.next = 11;
                    break;
                  }

                  _t32 = _step23.value;
                  _context24.next = 7;
                  return _t32.explode();

                case 7:
                  if (_context24.sent) {
                    _context24.next = 9;
                    break;
                  }

                  return _context24.abrupt("return", !1);

                case 9:
                  _context24.next = 3;
                  break;

                case 11:
                  _context24.next = 16;
                  break;

                case 13:
                  _context24.prev = 13;
                  _context24.t0 = _context24["catch"](1);

                  _iterator23.e(_context24.t0);

                case 16:
                  _context24.prev = 16;

                  _iterator23.f();

                  return _context24.finish(16);

                case 19:
                  return _context24.abrupt("return", (_.remove(this.detonators, function (t) {
                    return t.once;
                  }), !0));

                case 20:
                case "end":
                  return _context24.stop();
              }
            }
          }, _callee24, this, [[1, 13, 16, 19]]);
        }));

        function fire() {
          return _fire.apply(this, arguments);
        }

        return fire;
      }()
    }, {
      key: "add",
      value: function add() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        _.defaults(e, {
          key: "det-" + this.detonators.length
        }), e instanceof t ? this.detonators.push(e) : this.detonators.push(new t(e));
      }
    }, {
      key: "remove",
      value: function remove() {
        for (var _len17 = arguments.length, t = new Array(_len17), _key17 = 0; _key17 < _len17; _key17++) {
          t[_key17] = arguments[_key17];
        }

        _.pullAllWith(this.detonators, t, function (t, e) {
          return t.key == e;
        });
      }
    }, {
      key: "clear",
      value: function clear() {
        this.detonators = [];
      }
    }]);

    return e;
  }();

  var i = /*#__PURE__*/function () {
    function i() {
      _classCallCheck(this, i);

      this.fuses = {};
    }

    _createClass(i, [{
      key: "get",
      value: function get() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "main";
        return this.fuses[t];
      }
    }, {
      key: "getOrCreate",
      value: function getOrCreate() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "main";
        var i = this.get(t);
        return i || (i = new e(), this.fuses[t] = i), i;
      }
    }, {
      key: "fire",
      value: function () {
        var _fire2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee25() {
          var t,
              e,
              _args25 = arguments;
          return regeneratorRuntime.wrap(function _callee25$(_context25) {
            while (1) {
              switch (_context25.prev = _context25.next) {
                case 0:
                  t = _args25.length > 0 && _args25[0] !== undefined ? _args25[0] : "main";
                  e = this.get(t);
                  _context25.t0 = !e;

                  if (_context25.t0) {
                    _context25.next = 7;
                    break;
                  }

                  _context25.next = 6;
                  return e.fire();

                case 6:
                  _context25.t0 = _context25.sent;

                case 7:
                  return _context25.abrupt("return", _context25.t0);

                case 8:
                case "end":
                  return _context25.stop();
              }
            }
          }, _callee25, this);
        }));

        function fire() {
          return _fire2.apply(this, arguments);
        }

        return fire;
      }()
    }, {
      key: "removeFuse",
      value: function removeFuse(t) {
        var e = this.get(t);
        return e && delete this[t], e;
      }
    }, {
      key: "clear",
      value: function clear() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "main";
        var e = this.get(t);
        return e && e.clear(), e;
      }
    }]);

    return i;
  }();

  return {
    Fuse: new i()
  };
}(),
    Fuse = _ref16.Fuse,
    _ref17 = function () {
  var t = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split("");
  return {
    Random: {
      str: function str() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 4;
        var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : t;
        var s = "";

        for (var _n8 = 0; _n8 < e; _n8++) {
          s += i[_.random(0, t.length - 1)];
        }

        return s;
      },
      obj: function obj() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : t;
        return e[_.random(0, t.length - 1)];
      },
      list: function list() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : t.length;
        var i = Math.min(e, t.length) - 1;

        for (; i > 0; i--) {
          var _e32 = _.random(0, i),
              _s9 = t[i],
              _n9 = t[_e32];

          t[i] = _n9, t[_e32] = _s9;
        }

        return t;
      }
    }
  };
}(),
    Random = _ref17.Random,
    _ref18 = function () {
  var t = /*#__PURE__*/function () {
    function t(_t33) {
      _classCallCheck(this, t);

      this.storage = _t33;
    }

    _createClass(t, [{
      key: "get",
      value: function get(t, e) {
        var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _.identity;
        var s = this.storage.getItem(t);
        return Ti.Util.isNil(s) ? e : i(s);
      }
    }, {
      key: "getString",
      value: function getString(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
        return this.get(t, e);
      }
    }, {
      key: "getObject",
      value: function getObject(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        return this.get(t, e, function (t) {
          return JSON.parse(t);
        });
      }
    }, {
      key: "getInt",
      value: function getInt(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;
        return this.get(t, e, function (t) {
          return parseInt(t);
        });
      }
    }, {
      key: "getBoolean",
      value: function getBoolean(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
        return this.get(t, e, function (t) {
          return !!/^(true|yes|on|ok)$/.test(t);
        });
      }
    }, {
      key: "getNumber",
      value: function getNumber(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;
        return this.get(t, e, function (t) {
          return 1 * t;
        });
      }
    }, {
      key: "set",
      value: function set(t, e) {
        if (_.isNull(e) || _.isUndefined(e)) this.remove(t);else {
          var _i24 = e + "";

          this.storage.setItem(t, _i24);
        }
      }
    }, {
      key: "setObject",
      value: function setObject(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        (_.isNull(e) || _.isUndefined(e)) && this.remove(t);
        var i = JSON.stringify(e);
        this.storage.setItem(t, i);
      }
    }, {
      key: "mergeObject",
      value: function mergeObject(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        var i = this.getObject(t);
        _.merge(i, e), this.setObject(t, i);
      }
    }, {
      key: "remove",
      value: function remove(t) {
        this.storage.removeItem(t);
      }
    }, {
      key: "clear",
      value: function clear() {
        this.storage.clear();
      }
    }]);

    return t;
  }();

  return {
    Storage: {
      session: new t(window.sessionStorage),
      local: new t(window.localStorage)
    }
  };
}(),
    Storage = _ref18.Storage,
    _ref19 = function () {
  var t = {
    genActionInvoking: function genActionInvoking(t) {
      var _ref86 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          e = _ref86.$com,
          _ref86$argContext = _ref86.argContext,
          i = _ref86$argContext === void 0 ? {} : _ref86$argContext,
          _ref86$wait = _ref86.wait,
          s = _ref86$wait === void 0 ? 0 : _ref86$wait;

      var n = function n(t) {
        return s > 0 ? _.debounce(t, s, {
          leading: !0
        }) : t;
      },
          r = function r(t) {
        return _.isFunction(t) ? t() : t;
      };

      if (_.isFunction(t)) return n(t);
      var o, a, l;

      if (_.isString(t)) {
        var _e33 = /^((global|commit|dispatch|root|main|\$\w+):|=>)([^()]+)(\((.*)\))?$/.exec(t);

        if (!_e33) throw Ti.Err.make("e.action.invalid : " + t, {
          action: t
        });
        o = _e33[2] || _e33[1], a = _e33[3], l = _e33[5];
      } else _.isPlainObject(t) && (o = t.mode, a = t.name, l = t.args);

      var h,
          c = Ti.S.joinArgs(l, [], function (t) {
        return Ti.S.toJsValue(t, {
          context: i
        });
      });

      if ("=>" == o) {
        var _i25 = _.get(window, a);

        if (!_.isFunction(_i25)) throw Ti.Err.make("e.action.invoke.NotFunc : " + t, {
          action: t
        });

        h = function h() {
          var t = r(e);

          _i25.apply(t, c);
        };
      } else h = "$emit" == o || "$notify" == o ? function () {
        var i = r(e);
        if (!i) throw Ti.Err.make("e.action.emit.NoCom : " + t, {
          action: t
        });
        i[o].apply(i, [a].concat(_toConsumableArray(c)));
      } : "$parent" == o ? function () {
        var i = r(e),
            s = i[a];
        if (!_.isFunction(s)) throw Ti.Err.make("e.action.call.NotFunc : " + t, {
          action: t
        });
        s.apply(i, c);
      } : function () {
        var t = r(e),
            i = Ti.App(t),
            s = i[o],
            n = _.concat(a, c);

        s.apply(i, n);
      };

      if (!_.isFunction(h)) throw Ti.Err.make("e.invalid.action : " + t, {
        action: t
      });
      return n(h);
    },
    getUniqueKey: function getUniqueKey(t) {
      var _ref87 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref87$sep = _ref87.sep,
          e = _ref87$sep === void 0 ? "+" : _ref87$sep,
          _ref87$mode = _ref87.mode,
          i = _ref87$mode === void 0 ? "upper" : _ref87$mode;

      var s = [];
      t.altKey && s.push("ALT"), t.ctrlKey && s.push("CTRL"), t.metaKey && s.push("META"), t.shiftKey && s.push("SHIFT");
      var n = Ti.S.toCase(t.key, i);
      return /^(ALT|CTRL|CONTROL|SHIFT|META)$/.test(n) || s.push(" " === n ? "SPACE" : n), s.join(e);
    },
    startListening: function startListening() {
      this.isListening || (window.addEventListener("keydown", function (e) {
        var i = t.getUniqueKey(e),
            s = Ti.App.topInstance();
        s && s.fireShortcut(i, e);
      }), this.isListening = !0);
    }
  };
  return {
    Shortcut: t
  };
}(),
    Shortcut = _ref19.Shortcut,
    _TiWebsocket = {
  TiWebsocket: {
    listenRemote: function listenRemote() {
      var _ref88 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
          _ref88$watchTo = _ref88.watchTo,
          t = _ref88$watchTo === void 0 ? null : _ref88$watchTo,
          _ref88$watched = _ref88.watched,
          e = _ref88$watched === void 0 ? _.identity : _ref88$watched,
          _ref88$received = _ref88.received,
          i = _ref88$received === void 0 ? _.identity : _ref88$received,
          _ref88$closed = _ref88.closed,
          s = _ref88$closed === void 0 ? _.identity : _ref88$closed,
          _ref88$error = _ref88.error,
          n = _ref88$error === void 0 ? _.identity : _ref88$error;

      var r = window.location.hostname,
          o = window.location.port,
          a = {
        "http:": "ws",
        "https:": "wss"
      }[window.location.protocol],
          l = [r];
      o > 80 && l.push(o);
      var h = "".concat(a, "://").concat(l.join(":"), "/websocket"),
          c = new WebSocket(h);
      return _.isPlainObject(t) && (c.onmessage = function (s) {
        var n = JSON.parse(s.data);

        if ("hi" == n.event) {
          var _e34 = JSON.stringify(t);

          this.send(_e34);
        } else "watched" == n.event ? e(n) : i(n);
      }), c.onclose = s, c.onerror = n, c;
    }
  }
},
    TiWebsocket = _TiWebsocket.TiWebsocket,
    _ref20 = function () {
  var t = {
    notNil: function notNil(t) {
      return !Ti.Util.isNil(t);
    },
    notEmpty: function notEmpty(t) {
      return !_.isEmpty(t);
    },
    notBlank: function notBlank(t) {
      return !Ti.S.isBlank(t);
    },
    isNil: function isNil(t) {
      return Ti.Util.isNil(t);
    },
    isEmpty: function isEmpty(t) {
      return _.isEmpty(t);
    },
    isBlank: function isBlank(t) {
      return Ti.S.isBlank(t);
    },
    isPlainObject: function isPlainObject(t) {
      return _.isPlainObject(t);
    },
    isBoolean: function isBoolean(t) {
      return _.isBoolean(t);
    },
    isTrue: function isTrue(t) {
      return !0 === t;
    },
    isFalse: function isFalse(t) {
      return !1 === t;
    },
    isTruthy: function isTruthy(t) {
      return !!t;
    },
    isFalsy: function isFalsy(t) {
      return !t;
    },
    isNumber: function isNumber(t) {
      return _.isNumber(t);
    },
    isString: function isString(t) {
      return _.isString(t);
    },
    isDate: function isDate(t) {
      return _.isDate(t);
    },
    inRange: function inRange(t) {
      var _ref89;

      for (var _len18 = arguments.length, e = new Array(_len18 > 1 ? _len18 - 1 : 0), _key18 = 1; _key18 < _len18; _key18++) {
        e[_key18 - 1] = arguments[_key18];
      }

      return (_ref89 = _).inRange.apply(_ref89, [t].concat(e));
    },
    isMatch: function isMatch(t, e) {
      return _.isMatch(t, e);
    },
    isEqual: function isEqual(t, e) {
      return _.isEqual(t, e);
    },
    isOf: function isOf(t) {
      for (var _len19 = arguments.length, e = new Array(_len19 > 1 ? _len19 - 1 : 0), _key19 = 1; _key19 < _len19; _key19++) {
        e[_key19 - 1] = arguments[_key19];
      }

      for (var _i26 = 0, _e35 = e; _i26 < _e35.length; _i26++) {
        var _i27 = _e35[_i26];
        if (_.isEqual(_i27, t)) return !0;
      }

      return !1;
    },
    matchRegex: function matchRegex(t, e) {
      return _.isRegExp(e) ? e.test(t) : new RegExp(e).test(t);
    }
  },
      e = {
    get: function get(e) {
      var _ref90;

      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
      var s = arguments.length > 2 ? arguments[2] : undefined;
      _.isFunction(e) && (e = e());

      var n = _.get(t, e);

      if (!_.isFunction(n)) throw "Invalid Validate: ".concat(e);
      var r;
      return r = _.isEmpty(i) ? n : (_ref90 = _).partialRight.apply(_ref90, [n].concat(_toConsumableArray(i))), s ? function (t) {
        return !r(t);
      } : r;
    },
    evalBy: function evalBy(e) {
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var s = !1;
      e.startsWith("!") && (s = !0, e = _.trim(e.substring(1)));
      var n = Ti.Util.genInvoking(e, {
        context: i,
        funcSet: t,
        partialRight: !0
      });
      if (!_.isFunction(n)) throw "Invalid TiValidator: \"".concat(e, "\"");
      return s ? function (t) {
        return !n(t);
      } : n;
    },
    getBy: function getBy(t) {
      if (_.isFunction(t)) return t;
      if (_.isString(t)) return e.evalBy(t);

      if (_.isPlainObject(t)) {
        var _i28 = t.name,
            _s10 = _.isUndefined(t.args) ? [] : [].concat(t.args),
            _n10 = t.not;

        return e.get(_i28, _s10, _n10);
      }

      if (_.isArray(t) && t.length > 0) {
        var _i29 = t[0],
            _s11 = t.slice(1, t.length);

        return e.get(_i29, _s11);
      }
    },
    checkBy: function checkBy(t, i) {
      var s = e.getBy(t);
      return !!_.isFunction(s) && !!s(i);
    },
    match: function match() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;
      if (!t || _.isEmpty(t)) return s;
      if (_.isFunction(i)) return !!i(t);
      if (_.isBoolean(i)) return !!i;

      if (_.isArray(i)) {
        var _iterator24 = _createForOfIteratorHelper(i),
            _step24;

        try {
          for (_iterator24.s(); !(_step24 = _iterator24.n()).done;) {
            var _e36 = _step24.value;
            if (Ti.Validate.match(t, _e36, s)) return !0;
          }
        } catch (err) {
          _iterator24.e(err);
        } finally {
          _iterator24.f();
        }

        return !1;
      }

      var n = _.keys(i);

      var _iterator25 = _createForOfIteratorHelper(n),
          _step25;

      try {
        for (_iterator25.s(); !(_step25 = _iterator25.n()).done;) {
          var _s12 = _step25.value;

          var _n11 = _.get(i, _s12),
              _r4 = _.get(t, _s12);

          if (!e.checkBy(_n11, _r4)) return !1;
        }
      } catch (err) {
        _iterator25.e(err);
      } finally {
        _iterator25.f();
      }

      return !0;
    }
  };
  return {
    Validate: e
  };
}(),
    Validate = _ref20.Validate,
    _ref21 = function () {
  var TiTime = /*#__PURE__*/function () {
    function TiTime(t, e) {
      _classCallCheck(this, TiTime);

      this.hours = 0, this.minutes = 0, this.seconds = 0, this.milliseconds = 0, this.__cached = {}, this.update(t, e);
    }

    _createClass(TiTime, [{
      key: "clone",
      value: function clone() {
        return new TiTime(this);
      }
    }, {
      key: "setHours",
      value: function setHours() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
        this.__cached = {}, this.hours = _.clamp(t, 0, 23);
      }
    }, {
      key: "setMinutes",
      value: function setMinutes() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
        this.__cached = {}, this.minutes = _.clamp(t, 0, 59);
      }
    }, {
      key: "setSeconds",
      value: function setSeconds() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
        this.__cached = {}, this.seconds = _.clamp(t, 0, 59);
      }
    }, {
      key: "setMilliseconds",
      value: function setMilliseconds() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;
        this.__cached = {}, this.milliseconds = _.clamp(t, 0, 999);
      }
    }, {
      key: "setTimes",
      value: function setTimes() {
        var _ref91 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            t = _ref91.hours,
            e = _ref91.minutes,
            i = _ref91.seconds,
            s = _ref91.milliseconds;

        this.__cached = {}, this.hours = _.clamp(Ti.Util.fallback(t, this.hours), 0, 23), this.minutes = _.clamp(Ti.Util.fallback(e, this.minutes), 0, 59), this.seconds = _.clamp(Ti.Util.fallback(i, this.seconds), 0, 59), this.milliseconds = _.clamp(Ti.Util.fallback(s, this.milliseconds), 0, 999);
      }
    }, {
      key: "update",
      value: function update(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "ms";
        if (this.__cached = {}, _.isDate(t)) this.hours = t.getHours(), this.minutes = t.getMinutes(), this.seconds = t.getSeconds(), this.milliseconds = t.getMilliseconds();else if (t instanceof TiTime) this.hours = t.hours, this.minutes = t.minutes, this.seconds = t.seconds, this.milliseconds = t.milliseconds;else if (_.isNumber(t)) {
          var _i30 = {
            ms: function ms(t) {
              return t;
            },
            s: function s(t) {
              return Math.round(1e3 * t);
            },
            min: function min(t) {
              return Math.round(1e3 * t * 60);
            },
            hr: function hr(t) {
              return Math.round(1e3 * t * 60 * 60);
            }
          }[e](t);

          _i30 = _.clamp(_i30, 0, 864e5);

          var _s13 = parseInt(_i30 / 1e3);

          this.milliseconds = _i30 - 1e3 * _s13, this.hours = parseInt(_s13 / 3600), _s13 -= 3600 * this.hours, this.minutes = parseInt(_s13 / 60), this.seconds = _s13 - 60 * this.minutes;
        } else if (_.isString(t)) {
          var _e37 = /^([0-9]{1,2}):?([0-9]{1,2})(:?([0-9]{1,2})([.,]([0-9]{1,3}))?)?$/.exec(t);

          _e37 && (_e37[3] ? _e37[5] ? (this.hours = _.clamp(parseInt(_e37[1]), 0, 23), this.minutes = _.clamp(parseInt(_e37[2]), 0, 59), this.seconds = _.clamp(parseInt(_e37[4]), 0, 59), this.milliseconds = _.clamp(parseInt(_e37[6]), 0, 999)) : (this.hours = _.clamp(parseInt(_e37[1]), 0, 23), this.minutes = _.clamp(parseInt(_e37[2]), 0, 59), this.seconds = _.clamp(parseInt(_e37[4]), 0, 59), this.milliseconds = 0) : (this.hours = _.clamp(parseInt(_e37[1]), 0, 23), this.minutes = _.clamp(parseInt(_e37[2]), 0, 59), this.seconds = 0, this.milliseconds = 0));
        }
        return this;
      }
    }, {
      key: "toString",
      value: function toString() {
        var _this14 = this;

        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "auto";
        "auto" == t ? t = this.milliseconds > 0 ? "HH:mm:ss.SSS" : this.seconds > 0 ? "HH:mm:ss" : "HH:mm" : "min" == t && (t = this.hours <= 0 ? "mm:ss" : "HH:mm:ss");
        var e,
            i = "",
            s = /a|HH?|KK?|hh?|kk?|mm?|ss?|S(SS)?/g,
            n = 0;

        for (; e = s.exec(t);) {
          var _r5 = e.index;
          _r5 > n && (i += t.substring(n, _r5)), n = s.lastIndex;
          i += {
            a: function a() {
              return _this14.value > 43200 ? "PM" : "AM";
            },
            H: function H() {
              return _this14.hours;
            },
            k: function k() {
              return _this14.hours + 1;
            },
            K: function K() {
              return _this14.hours % 12;
            },
            h: function h() {
              return _this14.hours % 12 + 1;
            },
            m: function m() {
              return _this14.minutes;
            },
            s: function s() {
              return _this14.seconds;
            },
            S: function S() {
              return _this14.milliseconds;
            },
            HH: function HH() {
              return _.padStart(_this14.hours, 2, "0");
            },
            kk: function kk() {
              return _.padStart(_this14.hours + 1, 2, "0");
            },
            KK: function KK() {
              return _.padStart(_this14.hours % 12, 2, "0");
            },
            hh: function hh() {
              return _.padStart(_this14.hours % 12 + 1, 2, "0");
            },
            mm: function mm() {
              return _.padStart(_this14.minutes, 2, "0");
            },
            ss: function ss() {
              return _.padStart(_this14.seconds, 2, "0");
            },
            SSS: function SSS() {
              return _.padStart(_this14.milliseconds, 3, "0");
            }
          }[e[0]]();
        }

        return n < t.length && (i += t.substring(n)), i;
      }
    }, {
      key: "value",
      get: function get() {
        if (!_.isNumber(this.__cached.value)) {
          var _t34 = 3600 * this.hours + 60 * this.minutes + this.seconds + Math.round(this.milliseconds / 1e3);

          this.__cached.value = _t34;
        }

        return this.__cached.value;
      }
    }, {
      key: "valueInMilliseconds",
      get: function get() {
        if (!_.isNumber(this.__cached.valueInMilliseconds)) {
          var _t35 = 36e5 * this.hours + 6e4 * this.minutes + 1e3 * this.seconds + this.milliseconds;

          this.__cached.valueInMilliseconds = _t35;
        }

        return this.__cached.valueInMilliseconds;
      }
    }]);

    return TiTime;
  }();

  var QUICK_COLOR_TABLE = {
    red: [255, 0, 0, 1],
    green: [0, 255, 0, 1],
    blue: [0, 0, 255, 1],
    yellow: [255, 255, 0, 1],
    black: [0, 0, 0, 1],
    white: [255, 255, 255, 1]
  };

  var TiColor = /*#__PURE__*/function () {
    function TiColor(t) {
      _classCallCheck(this, TiColor);

      this.red = 0, this.green = 0, this.blue = 0, this.alpha = 1, this.__cached = {}, this.update(t);
    }

    _createClass(TiColor, [{
      key: "clone",
      value: function clone() {
        return new TiColor([this.red, this.green, this.blue, this.alpha]);
      }
    }, {
      key: "setRGBA",
      value: function setRGBA() {
        var _ref92 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            t = _ref92.r,
            e = _ref92.g,
            i = _ref92.b,
            s = _ref92.a;

        this.__cached = {}, _.isNumber(t) && (this.red = _.clamp(t, 0, 255)), _.isNumber(e) && (this.green = _.clamp(e, 0, 255)), _.isNumber(i) && (this.blue = _.clamp(i, 0, 255)), _.isNumber(s) && (this.alpha = _.clamp(s, 0, 1));
      }
    }, {
      key: "update",
      value: function update(t) {
        if (this.__cached = {}, _.isString(t)) {
          var _e38 = QUICK_COLOR_TABLE[t.toLowerCase()];
          if (_e38) this.red = _e38[0], this.green = _e38[1], this.blue = _e38[2], this.alpha = _e38[3];else {
            var _e39,
                _i31 = t.replace(/[ \t\r\n]+/g, "").toUpperCase();

            (_e39 = /^#?([0-9A-F])([0-9A-F])([0-9A-F]);?$/.exec(_i31)) ? (this.red = parseInt(_e39[1] + _e39[1], 16), this.green = parseInt(_e39[2] + _e39[2], 16), this.blue = parseInt(_e39[3] + _e39[3], 16)) : (_e39 = /^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2});?$/.exec(_i31)) ? (this.red = parseInt(_e39[1], 16), this.green = parseInt(_e39[2], 16), this.blue = parseInt(_e39[3], 16)) : (_e39 = /^RGB\((\d+),(\d+),(\d+)\)$/.exec(_i31)) ? (this.red = parseInt(_e39[1], 10), this.green = parseInt(_e39[2], 10), this.blue = parseInt(_e39[3], 10)) : (_e39 = /^RGBA\((\d+),(\d+),(\d+),([\d.]+)\)$/.exec(_i31)) ? (this.red = parseInt(_e39[1], 10), this.green = parseInt(_e39[2], 10), this.blue = parseInt(_e39[3], 10), this.alpha = 1 * _e39[4]) : (_e39 = /^0[xX]([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2});?$/.exec(_i31)) && (this.alpha = parseInt(_e39[1], 16) / 255, this.red = parseInt(_e39[2], 16), this.green = parseInt(_e39[3], 16), this.blue = parseInt(_e39[4], 16));
          }
        } else if (_.isNumber(t)) {
          var _e40 = _.clamp(Math.round(t), 0, 255);

          this.red = _e40, this.green = _e40, this.blue = _e40, this.alpha = 1;
        } else _.isArray(t) && t.length >= 3 ? (this.red = _.clamp(Math.round(t[0]), 0, 255), this.green = _.clamp(Math.round(t[1]), 0, 255), this.blue = _.clamp(Math.round(t[2]), 0, 255), this.alpha = t.length > 3 ? t[3] : 1) : t instanceof TiColor && (this.red = t.red, this.green = t.green, this.blue = t.blue, this.alpha = t.alpha);

        return this;
      }
    }, {
      key: "light",
      value: function light() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10;
        this.red = _.clamp(this.red + t, 0, 255), this.green = _.clamp(this.green + t, 0, 255), this.blue = _.clamp(this.blue + t, 0, 255);
      }
    }, {
      key: "dark",
      value: function dark() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10;
        this.red = _.clamp(this.red - t, 0, 255), this.green = _.clamp(this.green - t, 0, 255), this.blue = _.clamp(this.blue - t, 0, 255);
      }
    }, {
      key: "between",
      value: function between(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : .5;

        var _ref93 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

        _objectDestructuringEmpty(_ref93);

        e = _.clamp(e, 0, 1);
        var i = t.red - this.red,
            s = t.green - this.green,
            n = t.blue - this.blue,
            r = t.alpha - this.alpha,
            o = this.red + i * e,
            a = this.green + s * e,
            l = this.blue + n * e,
            h = this.alpha + r * e;
        return new TiColor([_.clamp(Math.round(o), 0, 255), _.clamp(Math.round(a), 0, 255), _.clamp(Math.round(l), 0, 255), _.clamp(h, 0, 1)]);
      }
    }, {
      key: "adjustByHSL",
      value: function adjustByHSL() {
        var _ref94 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            _ref94$h = _ref94.h,
            t = _ref94$h === void 0 ? 0 : _ref94$h,
            _ref94$s = _ref94.s,
            e = _ref94$s === void 0 ? 0 : _ref94$s,
            _ref94$l = _ref94.l,
            i = _ref94$l === void 0 ? 0 : _ref94$l;

        var s = this.toHSL();
        return s.h = _.clamp(s.h + t, 0, 1), s.s = _.clamp(s.s + e, 0, 1), s.l = _.clamp(s.l + i, 0, 1), this.fromHSL(s);
      }
    }, {
      key: "toHSL",
      value: function toHSL() {
        var t = this.red,
            e = this.green,
            i = this.blue;
        t /= 255, e /= 255, i /= 255;
        var s,
            n,
            r = Math.max(t, e, i),
            o = Math.min(t, e, i),
            a = (r + o) / 2;
        if (r === o) s = n = 0;else {
          var l = r - o;

          switch (n = a > .5 ? l / (2 - r - o) : l / (r + o), r) {
            case t:
              s = (e - i) / l + (e < i ? 6 : 0);
              break;

            case e:
              s = (i - t) / l + 2;
              break;

            case i:
              s = (t - e) / l + 4;
          }

          s /= 6;
        }
        return {
          h: s,
          s: n,
          l: a
        };
      }
    }, {
      key: "fromHSL",
      value: function fromHSL() {
        var _ref95 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            t = _ref95.h,
            e = _ref95.s,
            i = _ref95.l;

        var s,
            n,
            r,
            o = function o(t, e, i) {
          return i < 0 && (i += 1), i > 1 && (i -= 1), i < 1 / 6 ? t + 6 * (e - t) * i : i < .5 ? e : i < 2 / 3 ? t + (e - t) * (2 / 3 - i) * 6 : t;
        };

        if (0 === e) s = n = r = i;else {
          var _a3 = i < .5 ? i * (1 + e) : i + e - i * e,
              _l2 = 2 * i - _a3;

          s = o(_l2, _a3, t + 1 / 3), n = o(_l2, _a3, t), r = o(_l2, _a3, t - 1 / 3);
        }
        return this.red = Math.round(255 * s), this.green = Math.round(255 * n), this.blue = Math.round(255 * r), this;
      }
    }, {
      key: "toString",
      value: function toString() {
        return 1 == this.alpha ? this.hex : this.rgba;
      }
    }, {
      key: "hex",
      get: function get() {
        if (!this.__cached.hex) {
          var _t36 = ["#"];
          _t36.push(_.padStart(this.red.toString(16).toUpperCase(), 2, "0")), _t36.push(_.padStart(this.green.toString(16).toUpperCase(), 2, "0")), _t36.push(_.padStart(this.blue.toString(16).toUpperCase(), 2, "0")), this.__cached.hex = _t36.join("");
        }

        return this.__cached.hex;
      }
    }, {
      key: "rgb",
      get: function get() {
        if (!this.__cached.rgb) {
          var _t37 = [this.red, this.green, this.blue];
          this.__cached.rgb = "RGB(".concat(_t37.join(","), ")");
        }

        return this.__cached.rgb;
      }
    }, {
      key: "rgba",
      get: function get() {
        if (!this.__cached.rgba) {
          return "RGBA(".concat([this.red, this.green, this.blue, this.alpha].join(","), ")");
        }

        return this.__cached.rgba;
      }
    }]);

    return TiColor;
  }();

  var TiTypes = {
    toStr: function toStr(t, e, i) {
      if (_.isFunction(e)) return e(t) || i;
      if (Ti.Util.isNil(t)) return Ti.Util.fallback(i, null);

      if (_.isNumber(t)) {
        if (_.isArray(e)) return Ti.Util.fallback(_.nth(e, t), t);
        if (_.isString(e)) return Ti.S.renderVars(t, e);

        var _i32 = "" + t;

        return _.isPlainObject(e) ? e[_i32] : _i32;
      }

      if (_.isString(t)) return _.isPlainObject(e) ? Ti.Util.getOrPick(e, t) : _.isString(e) ? Ti.S.renderVars(t, e) : t;
      if (_.isArray(t)) return t.join(e || ",");
      if (_.isBoolean(t)) return (e || ["false", "true"])[1 * t];
      if (_.isDate(t)) return TiTypes.formatDateTime(t, e);
      if (t instanceof TiTime) return t.toString(e);
      if (t instanceof TiColor) return t.toString();

      if (_.isPlainObject(t)) {
        if (!Ti.S.isBlank(e)) {
          if (_.isString(e)) return Ti.S.renderVars(t, e);
          _.isPlainObject(e) && (t = Ti.Util.translate(t, e));
        }

        return JSON.stringify(t, null, e);
      }

      return "" + t;
    },
    toNumber: function toNumber(t) {
      if (_.isBoolean(t)) return t ? 1 : 0;
      if (_.isDate(t)) return t.getTime();
      var e = 1 * t;
      return isNaN(e) ? NaN : e;
    },
    toInteger: function toInteger(t) {
      var _ref96 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref96$mode = _ref96.mode,
          e = _ref96$mode === void 0 ? "int" : _ref96$mode,
          _ref96$dft = _ref96.dft,
          i = _ref96$dft === void 0 ? NaN : _ref96$dft,
          _ref96$range = _ref96.range,
          s = _ref96$range === void 0 ? [] : _ref96$range,
          _ref96$border = _ref96.border,
          n = _ref96$border === void 0 ? [!0, !0] : _ref96$border;

      if (_.isBoolean(t)) return t ? 1 : 0;
      if (_.isDate(t)) return t.getTime();
      var r = {
        round: function round(t) {
          return Math.round(t);
        },
        ceil: function ceil(t) {
          return Math.ceil(t);
        },
        floor: function floor(t) {
          return Math.floor(t);
        },
        "int": function int(t) {
          return parseInt(t);
        }
      }[e](t);

      if (isNaN(r) && (r = i), _.isArray(s) && 2 == s.length) {
        _.isArray(n) || (n = [n, n]);

        var _n12 = n,
            _n13 = _slicedToArray(_n12, 2),
            _t38 = _n13[0],
            _e41 = _n13[1],
            _s14 = _slicedToArray(s, 2),
            _i33 = _s14[0],
            _o5 = _s14[1];

        if (isNaN(r)) return Math.round((_i33 + _o5) / 2);

        if (!_.isNull(_i33)) {
          if (_t38 && r < _i33) return _i33;
          if (!_t38 && r <= _i33) return _i33 + 1;
        }

        if (!_.isNull(_o5)) {
          if (_e41 && r > _o5) return _o5;
          if (!_e41 && r >= _o5) return _o5 - 1;
        }
      }

      return r;
    },
    toFloat: function toFloat(t) {
      var _ref97 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref97$precision = _ref97.precision,
          e = _ref97$precision === void 0 ? 2 : _ref97$precision,
          _ref97$dft = _ref97.dft,
          i = _ref97$dft === void 0 ? NaN : _ref97$dft;

      var s = 1 * t;
      if (isNaN(s)) return i;

      if (e >= 0) {
        var _t39 = Math.pow(10, e);

        return Math.round(s * _t39) / _t39;
      }

      return s;
    },
    toPercent: function toPercent(t) {
      var _ref98 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref98$fixed = _ref98.fixed,
          e = _ref98$fixed === void 0 ? 2 : _ref98$fixed,
          _ref98$auto = _ref98.auto,
          i = _ref98$auto === void 0 ? !0 : _ref98$auto;

      return Ti.S.toPercent(t, {
        fixed: e,
        auto: i
      });
    },
    toBoolean: function toBoolean(t) {
      return 0 != t && !_.isNull(t) && !_.isUndefined(t) && !/^(no|off|false)$/i.test(t);
    },
    toBoolStr: function toBoolStr(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "No";
      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "Yes";
      return t ? i : e;
    },
    toObject: function toObject(t, e) {
      var i = t;
      return _.isPlainObject(t) && _.isPlainObject(e) ? Ti.Util.translate(i, e) : _.isArray(t) ? Ti.S.toObject(t, e) : _.isString(t) ? ((/^\{.*\}$/.test(t) || /^\[.*\]$/.test(t)) && (i = JSON.parse(t)), Ti.S.toObject(t, e)) : i;
    },
    toObjByPair: function toObjByPair() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      var _ref99 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref99$nameBy = _ref99.nameBy,
          e = _ref99$nameBy === void 0 ? "name" : _ref99$nameBy,
          _ref99$valueBy = _ref99.valueBy,
          i = _ref99$valueBy === void 0 ? "value" : _ref99$valueBy,
          _ref99$dft = _ref99.dft,
          s = _ref99$dft === void 0 ? {} : _ref99$dft;

      var n = t[e],
          r = t[i],
          o = _.assign({}, s);

      if (_.isString(n)) o[n] = r;else if (_.isArray(n)) {
        var _iterator26 = _createForOfIteratorHelper(n),
            _step26;

        try {
          for (_iterator26.s(); !(_step26 = _iterator26.n()).done;) {
            var _t40 = _step26.value;
            o[_t40] = r[_t40];
          }
        } catch (err) {
          _iterator26.e(err);
        } finally {
          _iterator26.f();
        }
      }
      return o;
    },
    toArray: function toArray(t) {
      var _ref100 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref100$sep = _ref100.sep,
          e = _ref100$sep === void 0 ? /[ ,;\/、，；\r\n]+/ : _ref100$sep;

      if (Ti.Util.isNil(t)) return t;
      if (_.isArray(t)) return t;

      if (_.isString(t)) {
        if (_.isRegExp(e)) {
          var _i34 = t.split(e);

          for (var _t41 = 0; _t41 < _i34.length; _t41++) {
            _i34[_t41] = _.trim(_i34[_t41]);
          }

          return _.without(_i34, void 0, null, "");
        }

        return [t];
      }
    },
    toDate: function toDate(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      if (_.isNull(t) || _.isUndefined(t)) return e;

      if (_.isArray(t)) {
        var _e42 = [];
        return _.forEach(t, function (t) {
          _e42.push(Ti.DateTime.parse(t));
        }), _e42;
      }

      return Ti.DateTime.parse(t);
    },
    toTime: function toTime(t) {
      var _ref101 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          e = _ref101.dft,
          i = _ref101.unit;

      return _.isNull(t) || _.isUndefined(t) ? e : new TiTime(t, i);
    },
    toColor: function toColor(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new TiColor();
      return _.isNull(t) || _.isUndefined(t) ? e : t instanceof TiColor ? t : new TiColor(t);
    },
    toAMS: function toAMS(t) {
      var e = Ti.DateTime.parse(t);
      return _.isDate(e) ? e.getTime() : null;
    },
    toJson: function toJson(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "  ";
      return JSON.stringify(t, null, e);
    },
    safeParseJson: function safeParseJson(str, dft) {
      if (Ti.Util.isNil(str)) return null;
      if (!_.isString(str)) return str;

      try {
        return JSON.parse(str);
      } catch (E) {
        var json = str.replace(/(function|=>)/g, "Function");

        try {
          return eval("(" + json + ")");
        } catch (t) {}
      }

      return dft;
    },
    formatTime: function formatTime(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "auto";
      if (_.isUndefined(t) || _.isNull(t)) return "";

      if (_.isArray(t)) {
        var _i35 = [];

        var _iterator27 = _createForOfIteratorHelper(t),
            _step27;

        try {
          for (_iterator27.s(); !(_step27 = _iterator27.n()).done;) {
            var _s15 = _step27.value;

            _i35.push(TiTypes.formatTime(_s15, e));
          }
        } catch (err) {
          _iterator27.e(err);
        } finally {
          _iterator27.f();
        }

        return _i35;
      }

      return t instanceof TiTime || (t = new TiTime(t)), t.toString(e);
    },
    formatDate: function formatDate(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "yyyy-MM-dd";
      return Ti.DateTime.format(t, e);
    },
    formatDateTime: function formatDateTime(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "yyyy-MM-dd HH:mm:ss";
      return Ti.DateTime.format(t, e);
    },
    toAjaxReturn: function toAjaxReturn(t, e) {
      var i = t;
      if (_.isString(t)) try {
        i = JSON.parse(t);
      } catch (t) {
        return {
          ok: !1,
          errCode: "e.invalid.json_format",
          data: e
        };
      }
      return _.isBoolean(i.ok) ? i : {
        ok: !0,
        data: i
      };
    },
    Time: TiTime,
    Color: TiColor,
    getFuncByType: function getFuncByType() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "String";
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "transformer";
      return _.get({
        String: {
          transformer: "toStr",
          serializer: "toStr"
        },
        Number: {
          transformer: "toNumber",
          serializer: "toNumber"
        },
        Integer: {
          transformer: "toInteger",
          serializer: "toInteger"
        },
        Float: {
          transformer: "toFloat",
          serializer: "toFloat"
        },
        Boolean: {
          transformer: "toBoolean",
          serializer: "toBoolean"
        },
        Object: {
          transformer: "toObject",
          serializer: "toObject"
        },
        Array: {
          transformer: "toArray",
          serializer: "toArray"
        },
        DateTime: {
          transformer: "toDate",
          serializer: "formatDateTime"
        },
        AMS: {
          transformer: "toDate",
          serializer: "toAMS"
        },
        Time: {
          transformer: "toTime",
          serializer: "formatTime"
        },
        Date: {
          transformer: "toDate",
          serializer: "formatDate"
        },
        Color: {
          transformer: "toColor",
          serializer: "toStr"
        }
      }, "".concat(t, ".").concat(e));
    },
    getFuncBy: function getFuncBy() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = arguments.length > 1 ? arguments[1] : undefined;
      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : TiTypes;
      var s = TiTypes.evalFunc(t[e], i);
      if (_.isFunction(s)) return s;
      if (!s && t.type && (s = TiTypes.getFuncByType(t.type, e)), _.isString(s)) return _.get(i, s);

      if (_.isPlainObject(s) && s.name) {
        var _ref102;

        var _t42 = _.get(i, s.name);

        if (!_.isFunction(_t42)) return;
        return _.isArray(s.args) && s.args.length > 0 ? (_ref102 = _).partialRight.apply(_ref102, [_t42].concat(_toConsumableArray(s.args))) : _.isUndefined(s.args) || _.isNull(s.args) ? _t42 : _.partialRight(_t42, s.args);
      }
    },
    getFunc: function getFunc() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = arguments.length > 1 ? arguments[1] : undefined;
      return TiTypes.getFuncBy(t, e);
    },
    evalFunc: function evalFunc(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : TiTypes;
      if (_.isFunction(t)) return t;
      if (_.isString(t)) return _.get(e, t);

      if (_.isPlainObject(t) && t.name) {
        var _ref103;

        var _i36 = _.get(e, t.name);

        if (!_.isFunction(_i36)) return;
        return _.isArray(t.args) && t.args.length > 0 ? (_ref103 = _).partialRight.apply(_ref103, [_i36].concat(_toConsumableArray(t.args))) : _.isUndefined(t.args) || _.isNull(t.args) ? _i36 : _.partialRight(_i36, t.args);
      }
    },
    getJsType: function getJsType(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "Object";
      return _.isUndefined(t) ? e : _.isNull(t) ? "Object" : _.isNaN(t) ? "Number" : _.isNumber(t) ? parseInt(t) == t ? "Integer" : "Number" : _.isBoolean(t) ? "Boolean" : _.isString(t) ? "String" : _.isArray(t) ? "Array" : "Object";
    }
  };
  return {
    TiTime: TiTime,
    TiColor: TiColor,
    Types: TiTypes
  };
}(),
    Types = _ref21.Types,
    _ref22 = function () {
  var t = _objectSpread({}, function () {
    var t = {
      getLinkName: function getLinkName(e) {
        var i = e.lastIndexOf("/"),
            s = e.lastIndexOf(":"),
            n = Math.max(i, s),
            r = n >= 0 ? e.substring(n + 1) : e;
        return t.getMajorName(r);
      },
      getFileName: function getFileName(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
        if (!t) return e;
        var i = t.lastIndexOf("/");
        return i >= 0 ? t.substring(i + 1) : t;
      },
      getMajorName: function getMajorName(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
        if (!t) return e;

        for (var i = t.length, s = 0, n = i, r = n - 1; r > 0; r--) {
          if (n == i && "." == t[r] && (n = r), "/" == t[r] || "\\" == t[r]) {
            s = r + 1;
            break;
          }
        }

        return t.substring(s, n);
      },
      getSuffixName: function getSuffixName(t, e) {
        if (!t) return "";
        var i = t.lastIndexOf("."),
            s = t.lastIndexOf("/");
        if (-1 == i || i < s) return "";
        var n = t.substring(i + 1);
        return e ? n.toLowerCase() : n;
      },
      getSuffix: function getSuffix(t, e) {
        if (!t) return "";
        var i = t.lastIndexOf("."),
            s = t.lastIndexOf("/");
        if (-1 == i || i < s) return "";
        var n = t.substring(i);
        return e ? n.toLowerCase() : n;
      },
      appendPath: function appendPath() {
        var e = [];

        for (var _len20 = arguments.length, t = new Array(_len20), _key20 = 0; _key20 < _len20; _key20++) {
          t[_key20] = arguments[_key20];
        }

        for (var _i37 = 0, _t43 = t; _i37 < _t43.length; _i37++) {
          var _i38 = _t43[_i37];
          if (_.isEmpty(_i38)) continue;

          var _t44 = /\/*$/.exec(_i38);

          _t44 && (_i38 = _i38.substring(0, _t44.index)), e.length > 0 && !/^\//.test(_i38) && e.push("/"), e.push(_i38);
        }

        return e.join("");
      },
      getParentPath: function getParentPath() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";
        if (!t || t.endsWith("/")) return t;
        var e = t.lastIndexOf("/");
        return e < 0 ? "" : t.substring(0, e + 1);
      },
      getRelativePath: function getRelativePath() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
        var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : ".";
        if (_.isEqual(t, e)) return i;

        var s = t.endsWith("/"),
            n = e.endsWith("/"),
            r = _.without(t.split("/"), ""),
            o = _.without(e.split("/"), ""),
            a = Math.min(r.length, o.length),
            l = 0;

        for (; l < a; l++) {
          if (r[l] != o[l]) break;
        }

        var h = [],
            c = r.length;
        s || c--;

        for (var _t45 = l; _t45 < c; _t45++) {
          h.push("..");
        }

        for (var _t46 = l; _t46 < o.length; _t46++) {
          h.push(o[_t46]);
        }

        return n && h.push(""), h.join("/");
      },
      explainEventName: function explainEventName(t) {
        var e = {},
            i = /^(([^>]+)>)?(.+)$/.exec(t);
        return i && (e.block = _.trim(i[2]), e.event = _.trim(i[3])), e;
      },
      parseHref: function parseHref() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";
        var e = /^((https?):)?((\/\/([^/:]+))(:(\d+))?)?([^?]*)(\?([^#]*))?(#(.*))?$/.exec(t);

        if (e) {
          var _i39 = {
            href: t,
            protocol: e[2],
            host: e[5],
            port: 1 * (e[7] || 80),
            path: e[8],
            search: e[9],
            query: e[10],
            hash: e[11],
            anchor: e[12]
          };

          if (_i39.query) {
            var _t47 = {},
                _e43 = _i39.query.split("&");

            var _iterator28 = _createForOfIteratorHelper(_e43),
                _step28;

            try {
              for (_iterator28.s(); !(_step28 = _iterator28.n()).done;) {
                var _i40 = _step28.value;

                var _e44 = _i40.indexOf("=");

                if (_e44 > 0) {
                  var _s16 = _i40.substring(0, _e44),
                      _n14 = _i40.substring(_e44 + 1);

                  _t47[_s16] = decodeURIComponent(_n14);
                } else _t47[_i40] = !0;
              }
            } catch (err) {
              _iterator28.e(err);
            } finally {
              _iterator28.f();
            }

            _i39.params = _t47;
          }

          return _i39;
        }

        return {
          path: t
        };
      }
    };
    return t;
  }(), {}, function () {
    var t = /*#__PURE__*/function () {
      function t() {
        var _ref104 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            _t48 = _ref104.url,
            e = _ref104.params;

        _classCallCheck(this, t);

        this.url = _t48, this.params = e, this.__S = null, this.set({
          url: _t48,
          params: e
        });
      }

      _createClass(t, [{
        key: "set",
        value: function set() {
          var _ref105 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
              _ref105$url = _ref105.url,
              t = _ref105$url === void 0 ? "" : _ref105$url,
              _ref105$params = _ref105.params,
              e = _ref105$params === void 0 ? {} : _ref105$params;

          return this.url = t, this.params = e, this.__S = null, this;
        }
      }, {
        key: "valueOf",
        value: function valueOf() {
          return this.toString();
        }
      }, {
        key: "toString",
        value: function toString() {
          if (!this.__S) {
            var _t49 = [this.url],
                _e45 = [];
            _.forEach(this.params, function (t, i) {
              _e45.push("".concat(i, "=").concat(t));
            }), _e45.length > 0 && _t49.push(_e45.join("&")), this.__S = _t49.join("?");
          }

          return this.__S;
        }
      }]);

      return t;
    }();

    return {
      Link: function Link() {
        var _ref106 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
            e = _ref106.url,
            i = _ref106.params;

        return new t({
          url: e,
          params: i
        });
      }
    };
  }(), {
    merge: function merge() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      for (var _len21 = arguments.length, i = new Array(_len21 > 1 ? _len21 - 1 : 0), _key21 = 1; _key21 < _len21; _key21++) {
        i[_key21 - 1] = arguments[_key21];
      }

      return t.mergeWith.apply(t, [void 0, e].concat(i));
    },
    mergeWith: function mergeWith() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _.identity;
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      for (var _len22 = arguments.length, s = new Array(_len22 > 2 ? _len22 - 2 : 0), _key22 = 2; _key22 < _len22; _key22++) {
        s[_key22 - 2] = arguments[_key22];
      }

      var n = _.flattenDeep(s);

      var _iterator29 = _createForOfIteratorHelper(n),
          _step29;

      try {
        for (_iterator29.s(); !(_step29 = _iterator29.n()).done;) {
          var _s17 = _step29.value;
          if (!_s17) continue;

          var _n15 = e(_s17);

          _.isArray(_n15) ? t.merge.apply(t, [i].concat(_toConsumableArray(_n15))) : _.isFunction(_n15) ? i[_n15.name] = _n15 : _.isPlainObject(_n15) && _.merge(i, _n15);
        }
      } catch (err) {
        _iterator29.e(err);
      } finally {
        _iterator29.f();
      }

      return i;
    },
    deepMergeObj: function deepMergeObj() {
      var _ref107;

      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      for (var _len23 = arguments.length, e = new Array(_len23 > 1 ? _len23 - 1 : 0), _key23 = 1; _key23 < _len23; _key23++) {
        e[_key23 - 1] = arguments[_key23];
      }

      return (_ref107 = _).mergeWith.apply(_ref107, [t].concat(e, [function (t, e) {
        if (_.isArray(t) || _.isArray(e)) return e;
      }]));
    },
    grouping: function grouping() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var e = arguments.length > 1 ? arguments[1] : undefined;

      var _ref108 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
          _ref108$titles = _ref108.titles,
          i = _ref108$titles === void 0 ? [] : _ref108$titles,
          _ref108$otherTitle = _ref108.otherTitle,
          s = _ref108$otherTitle === void 0 ? {
        value: "Others",
        text: "Others"
      } : _ref108$otherTitle,
          _ref108$asList = _ref108.asList,
          n = _ref108$asList === void 0 ? !1 : _ref108$asList;

      var r = {},
          o = [];

      _.forEach(i, function (t) {
        t.text && !Ti.Util.isNil(t.value) && (o[t.value] = t);
      });

      var a = [];
      return _.forEach(t, function (t) {
        var i = _.get(t, e);

        if (i) {
          var _e46 = o[i] || {
            text: i,
            value: i
          },
              _s18 = r[i];

          _s18 || (_s18 = _objectSpread({}, _e46, {
            list: []
          }), r[i] = _s18), _s18.list.push(t);
        } else a.push(t);
      }), _.isEmpty(a) || (r[s.value] = _objectSpread({}, s, {
        list: a
      })), n ? _.values(r) : r;
    },
    insertToArray: function insertToArray() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;

      for (var _len24 = arguments.length, i = new Array(_len24 > 2 ? _len24 - 2 : 0), _key24 = 2; _key24 < _len24; _key24++) {
        i[_key24 - 2] = arguments[_key24];
      }

      if (!_.isArray(t) || _.isEmpty(i)) return -1;
      if (_.isEmpty(t)) return t.push.apply(t, i), 0;
      var s = Ti.Num.scrollIndex(e, t.length + 1);
      if (0 == s) t.unshift.apply(t, i);else if (t.length == s) t.push.apply(t, i);else {
        var _e47 = i.length;

        for (var _i41 = t.length - 1; _i41 >= s; _i41--) {
          t[_i41 + _e47] = t[_i41];
        }

        for (var _n16 = 0; _n16 < _e47; _n16++) {
          t[s + _n16] = i[_n16];
        }
      }
      return s;
    },
    appendToObject: function appendToObject() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
      var s = {};
      return _.forEach(t, function (t, n) {
        s[n] = t, e == n && _.assign(s, i);
      }), s;
    },
    walk: function walk() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      var _ref109 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref109$root = _ref109.root,
          e = _ref109$root === void 0 ? _.identity : _ref109$root,
          _ref109$all = _ref109.all,
          i = _ref109$all === void 0 ? _.identity : _ref109$all,
          _ref109$leaf = _ref109.leaf,
          s = _ref109$leaf === void 0 ? _.identity : _ref109$leaf,
          _ref109$node = _ref109.node,
          n = _ref109$node === void 0 ? _.identity : _ref109$node;

      var r = function r(t) {
        var o = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];

        var a = _.isArray(t),
            l = _.isPlainObject(t);

        if (i(t, o), a || l ? _.isEmpty(o) ? e(t, o) : n(t, o) : s(t, o), a) for (var _e48 = 0; _e48 < t.length; _e48++) {
          var _i42 = t[_e48],
              _s19 = o.concat(_e48);

          r(_i42, _s19);
        } else if (l) {
          var _e49 = _.keys(t);

          var _iterator30 = _createForOfIteratorHelper(_e49),
              _step30;

          try {
            for (_iterator30.s(); !(_step30 = _iterator30.n()).done;) {
              var _i43 = _step30.value;

              var _e50 = t[_i43],
                  _s20 = o.concat(_i43);

              r(_e50, _s20);
            }
          } catch (err) {
            _iterator30.e(err);
          } finally {
            _iterator30.f();
          }
        }
      };

      r(t);
    },
    inset: function inset() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _.identity;
      var i = [];

      var _iterator31 = _createForOfIteratorHelper(t),
          _step31;

      try {
        for (_iterator31.s(); !(_step31 = _iterator31.n()).done;) {
          var _s21 = _step31.value;

          var _t50 = e(_s21);

          if (_.isArray(_t50) && !_.isEmpty(_t50)) {
            var _iterator32 = _createForOfIteratorHelper(_t50),
                _step32;

            try {
              for (_iterator32.s(); !(_step32 = _iterator32.n()).done;) {
                var _e51 = _step32.value;
                i.push(_e51);
              }
            } catch (err) {
              _iterator32.e(err);
            } finally {
              _iterator32.f();
            }
          }

          _.isUndefined(_t50) || i.push(_t50);
        }
      } catch (err) {
        _iterator31.e(err);
      } finally {
        _iterator31.f();
      }

      return i;
    },
    explainObj: function explainObj() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = arguments.length > 1 ? arguments[1] : undefined;

      var _ref110 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
          _ref110$evalFunc = _ref110.evalFunc,
          i = _ref110$evalFunc === void 0 ? !1 : _ref110$evalFunc,
          _ref110$iteratee = _ref110.iteratee,
          s = _ref110$iteratee === void 0 ? _.identity : _ref110$iteratee;

      var n = function n(e) {
        var r = e;

        if (_.isString(r)) {
          var _e52 = /^:((=|==|!=|=>|->)(.+))$/.exec(r);

          if (_e52) return s(_e52[1]);

          var _i44, _n17, _o6;

          if ((_e52 = /^(==|!=|=>|->)(.+)$/.exec(r)) ? (_i44 = _e52[1], _n17 = _.trim(_e52[2])) : (_e52 = /^(=)([^?]+)(\?(.*))?$/.exec(r)) && (_i44 = _e52[1], _n17 = _.trim(_e52[2]), _o6 = _e52[4]), _i44) {
            Ti.Util.isNil(_o6) || (_o6 = _.trim(_o6));
            var _e53 = {
              "==": function (_2) {
                function _(_x14) {
                  return _2.apply(this, arguments);
                }

                _.toString = function () {
                  return _2.toString();
                };

                return _;
              }(function (e) {
                return !!_.get(t, e);
              }),
              "!=": function (_3) {
                function _(_x15) {
                  return _3.apply(this, arguments);
                }

                _.toString = function () {
                  return _3.toString();
                };

                return _;
              }(function (e) {
                return !_.get(t, e);
              }),
              "=": function (_4) {
                function _(_x16, _x17) {
                  return _4.apply(this, arguments);
                }

                _.toString = function () {
                  return _4.toString();
                };

                return _;
              }(function (e, i) {
                if (".." == e) return t;
                var s = Ti.Util.getOrPick(t, e);
                return Ti.Util.isNil(s) && !_.isUndefined(i) ? i : s;
              }),
              "=>": function _(e) {
                return Ti.Util.genInvoking(e, {
                  context: t
                })();
              },
              "->": function _(e) {
                return Ti.S.renderBy(e, t);
              }
            }[_i44];
            if (_.isFunction(_e53)) return _e53(_n17, _o6);
            throw "invalid dynamic value: " + r;
          }

          return s(r);
        }

        if (_.isFunction(r)) {
          if (i) {
            var _e54 = r(t);

            return s(_e54);
          }

          return r;
        }

        if (_.isArray(r)) {
          var _t51 = [];

          var _iterator33 = _createForOfIteratorHelper(r),
              _step33;

          try {
            for (_iterator33.s(); !(_step33 = _iterator33.n()).done;) {
              var _e55 = _step33.value;

              var _i45 = n(_e55);

              _t51.push(s(_i45));
            }
          } catch (err) {
            _iterator33.e(err);
          } finally {
            _iterator33.f();
          }

          return _t51;
        }

        if (_.isPlainObject(r)) {
          var _t52 = {};
          return _.forEach(r, function (e, i) {
            var r = n(e),
                o = s(r);
            "..." == i ? _.assign(_t52, o) : _t52[i] = o;
          }), _t52;
        }

        return s(e);
      };

      return n(e);
    },
    genObj: function genObj() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      return _.partial(_.cloneDeep, t);
    },
    groupCall: function groupCall() {
      for (var _len25 = arguments.length, t = new Array(_len25), _key25 = 0; _key25 < _len25; _key25++) {
        t[_key25] = arguments[_key25];
      }

      var e = _.flattenDeep(t).filter(function (t) {
        return _.isFunction(t);
      });

      if (0 != e.length) return 1 == e.length ? e[0] : function () {
        for (var _len26 = arguments.length, t = new Array(_len26), _key26 = 0; _key26 < _len26; _key26++) {
          t[_key26] = arguments[_key26];
        }

        var _iterator34 = _createForOfIteratorHelper(e),
            _step34;

        try {
          for (_iterator34.s(); !(_step34 = _iterator34.n()).done;) {
            var _i46 = _step34.value;

            _i46.apply(this, t);
          }
        } catch (err) {
          _iterator34.e(err);
        } finally {
          _iterator34.f();
        }
      };
    },
    pushValue: function pushValue(t, e, i) {
      var s = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
      var n = _.get(t, e) || [];
      s ? t[e] = _.concat(n, i || []) : _.set(t, e, _.concat(n, i || []));
    },
    pushValueBefore: function pushValueBefore(t, e, i) {
      var s = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
      var n = _.get(t, e) || [];
      s ? t[e] = _.concat(i || [], n) : _.set(t, e, _.concat(i || [], n));
    },
    pushUniqValue: function pushUniqValue(t, e, i) {
      var s = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
      var n = _.get(t, e) || [];
      s ? t[e] = _.uniq(_.concat(n, i || [])) : _.set(t, e, _.uniq(_.concat(n, i || [])));
    },
    pushUniqValueBefre: function pushUniqValueBefre(t, e, i) {
      var s = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;
      var n = _.get(t, e) || [];
      s ? t[e] = _.uniq(_.concat(i || [], n)) : _.set(t, e, _.uniq(_.concat(i || [], n)));
    },
    setTo: function setTo() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = arguments.length > 1 ? arguments[1] : undefined;
      var i = arguments.length > 2 ? arguments[2] : undefined;
      var s = arguments.length > 3 ? arguments[3] : undefined;
      _.isString(e) && !_.isUndefined(i) ? t[e] = _.isNull(i) ? s : i : _.isPlainObject(e) && (s = i, _.forOwn(e, function (e, i) {
        _.isUndefined(e) || (t[i] = _.isNull(e) ? s : e);
      }));
    },
    nth: function nth() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      var s = t.length;
      if (s <= 0) return i;
      return t[Ti.Num.scrollIndex(e, s)];
    },
    anyKey: function anyKey(e, i) {
      var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "-";
      if (t.isNil(e)) return e;
      var n = [];
      return i && n.push(i), _.isArray(e) || _.isPlainObject(e) ? (_.forEach(e, function (t) {
        return n.push(t);
      }), n.join("-")) : (n.push(e), n.join(s));
    },
    translate: function translate() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _.identity;
      if (_.isEmpty(e) || _.isEmpty(i)) return _.cloneDeep(e);

      if (_.isArray(e)) {
        var _n18 = [];

        for (var _r6 = 0; _r6 < e.length; _r6++) {
          var _o7 = e[_r6],
              _a4 = t.translate(_o7, i, s);

          _n18.push(_a4);
        }

        return _n18;
      }

      var n = {};
      return _.forEach(i, function (i, r) {
        var o;
        o = ".." == i ? e : t.getOrPick(e, i), o = s(o), _.set(n, r, o);
      }), n;
    },
    pureCloneDeep: function pureCloneDeep(e) {
      if (_.isArray(e)) {
        var _i47 = [];
        return _.forEach(e, function (e, s) {
          _.isUndefined(e) || _.isFunction(e) || (_i47[s] = t.pureCloneDeep(e));
        }), _i47;
      }

      if (_.isPlainObject(e)) {
        var _i48 = {};
        return _.forEach(e, function (e, s) {
          _.isUndefined(e) || _.isFunction(e) || (_i48[s] = t.pureCloneDeep(e));
        }), _i48;
      }

      return _.cloneDeep(e);
    },
    setKey: function setKey() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = arguments.length > 1 ? arguments[1] : undefined;
      var i = arguments.length > 2 ? arguments[2] : undefined;

      var s = function s(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
        var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
        var n = arguments.length > 3 ? arguments[3] : undefined;
        if (i >= e.length) return t;

        if (_.isArray(t)) {
          var _r7 = [],
              _o8 = parseInt(e[i]);

          for (var _a5 = 0; _a5 < t.length; _a5++) {
            if (_a5 == _o8) {
              var _o9 = s(t[_a5], e, i + 1, n);

              _r7.push(_o9);
            } else _r7.push(t[_a5]);
          }

          return _r7;
        }

        if (_.isPlainObject(t)) {
          var _r8 = {},
              _o10 = _.keys(t);

          if (e.length == i + 1) {
            var _s22 = e[i];

            var _iterator35 = _createForOfIteratorHelper(_o10),
                _step35;

            try {
              for (_iterator35.s(); !(_step35 = _iterator35.n()).done;) {
                var _e56 = _step35.value;
                var _i49 = t[_e56];
                _s22 == _e56 ? _r8[n] = _i49 : _r8[_e56] = _i49;
              }
            } catch (err) {
              _iterator35.e(err);
            } finally {
              _iterator35.f();
            }
          } else {
            var _iterator36 = _createForOfIteratorHelper(_o10),
                _step36;

            try {
              for (_iterator36.s(); !(_step36 = _iterator36.n()).done;) {
                var _a6 = _step36.value;

                var _o11 = t[_a6],
                    _l3 = s(_o11, e, i + 1, n);

                _r8[_a6] = _l3;
              }
            } catch (err) {
              _iterator36.e(err);
            } finally {
              _iterator36.f();
            }
          }

          return _r8;
        }

        return t;
      };

      return _.isString(e) && (e = e.split(".")), s(t, e, 0, i);
    },
    getOrPick: function getOrPick(t, e, i) {
      if (_.isArray(e)) return Ti.Util.fallback(_.pick(t, e), i);
      if (_.isFunction(e)) return Ti.Util.fallback(e(t), i);

      if (_.isString(e)) {
        var _s23 = e.split("|");

        if (_s23.length > 1) return Ti.Util.fallback(Ti.Util.getFallbackNil(t, _s23), i);
      }

      return Ti.Util.fallback(_.get(t, e), i);
    },
    truthyKeys: function truthyKeys() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = [];
      return _.forEach(t, function (t, i) {
        t && e.push(i);
      }), e;
    },
    getFallback: function getFallback(t) {
      for (var _len27 = arguments.length, e = new Array(_len27 > 1 ? _len27 - 1 : 0), _key27 = 1; _key27 < _len27; _key27++) {
        e[_key27 - 1] = arguments[_key27];
      }

      var i = _.flattenDeep(e);

      var _iterator37 = _createForOfIteratorHelper(i),
          _step37;

      try {
        for (_iterator37.s(); !(_step37 = _iterator37.n()).done;) {
          var _e57 = _step37.value;

          if (_e57) {
            var _i50 = _.get(t, _e57);

            if (!_.isUndefined(_i50)) return _i50;
          }
        }
      } catch (err) {
        _iterator37.e(err);
      } finally {
        _iterator37.f();
      }
    },
    getFallbackNil: function getFallbackNil(e) {
      for (var _len28 = arguments.length, i = new Array(_len28 > 1 ? _len28 - 1 : 0), _key28 = 1; _key28 < _len28; _key28++) {
        i[_key28 - 1] = arguments[_key28];
      }

      var s = _.flattenDeep(i);

      var _iterator38 = _createForOfIteratorHelper(s),
          _step38;

      try {
        for (_iterator38.s(); !(_step38 = _iterator38.n()).done;) {
          var _i51 = _step38.value;

          if (_i51) {
            var _s24 = _.get(e, _i51);

            if (!t.isNil(_s24)) return _s24;
          }
        }
      } catch (err) {
        _iterator38.e(err);
      } finally {
        _iterator38.f();
      }
    },
    fallback: function fallback() {
      for (var _len29 = arguments.length, t = new Array(_len29), _key29 = 0; _key29 < _len29; _key29++) {
        t[_key29] = arguments[_key29];
      }

      for (var _i52 = 0, _t53 = t; _i52 < _t53.length; _i52++) {
        var _e58 = _t53[_i52];
        if (!_.isUndefined(_e58)) return _e58;
      }
    },
    fallbackNil: function fallbackNil() {
      for (var _len30 = arguments.length, e = new Array(_len30), _key30 = 0; _key30 < _len30; _key30++) {
        e[_key30] = arguments[_key30];
      }

      for (var _i53 = 0, _e59 = e; _i53 < _e59.length; _i53++) {
        var _i54 = _e59[_i53];
        if (!t.isNil(_i54)) return _i54;
      }
    },
    fallbackNaN: function fallbackNaN() {
      for (var _len31 = arguments.length, t = new Array(_len31), _key31 = 0; _key31 < _len31; _key31++) {
        t[_key31] = arguments[_key31];
      }

      for (var _i55 = 0, _t54 = t; _i55 < _t54.length; _i55++) {
        var _e60 = _t54[_i55];
        if (!isNaN(_e60)) return _e60;
      }
    },
    isNil: function isNil(t) {
      return _.isUndefined(t) || _.isNull(t);
    },
    isBlank: function isBlank(t) {
      return _.isUndefined(t) || _.isNull(t) || "" === t || /^[ \t]*$/.test(t);
    },
    geset: function geset() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var e = arguments.length > 1 ? arguments[1] : undefined;
      var i = arguments.length > 2 ? arguments[2] : undefined;
      return _.isPlainObject(e) ? (_.assign(t, e), t) : _.isArray(e) ? _.pick(t, e) : _.isUndefined(i) ? _.isUndefined(e) ? t : t[e] : (t[e] = i, t);
    },
    invoke: function invoke() {
      var _arguments = arguments,
          _this15 = this;

      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee26() {
        var t, e, i, s, n, _t55;

        return regeneratorRuntime.wrap(function _callee26$(_context26) {
          while (1) {
            switch (_context26.prev = _context26.next) {
              case 0:
                t = _arguments.length > 0 && _arguments[0] !== undefined ? _arguments[0] : {};
                e = _arguments.length > 1 ? _arguments[1] : undefined;
                i = _arguments.length > 2 && _arguments[2] !== undefined ? _arguments[2] : [];
                s = _arguments.length > 3 && _arguments[3] !== undefined ? _arguments[3] : _this15;
                n = _.get(t, e);

                if (!_.isFunction(n)) {
                  _context26.next = 9;
                  break;
                }

                _t55 = _.concat(i);
                _context26.next = 9;
                return n.apply(s, _t55);

              case 9:
              case "end":
                return _context26.stop();
            }
          }
        }, _callee26);
      }))();
    },
    first: function first() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      return _.isArray(t) ? _.first(t) : t;
    },
    last: function last() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      return _.isArray(t) ? _.last(t) : t;
    },
    genGetter: function genGetter(e) {
      var _ref111 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          i = _ref111.indexPrefix,
          _ref111$dftKeys = _ref111.dftKeys,
          s = _ref111$dftKeys === void 0 ? [] : _ref111$dftKeys,
          _ref111$context = _ref111.context,
          n = _ref111$context === void 0 ? {} : _ref111$context,
          _ref111$funcSet = _ref111.funcSet,
          r = _ref111$funcSet === void 0 ? window : _ref111$funcSet,
          _ref111$partialRight = _ref111.partialRight,
          o = _ref111$partialRight === void 0 ? !1 : _ref111$partialRight;

      if (_.isFunction(e)) return function (t) {
        return e(t);
      };

      if (e) {
        if (i) return function (t, s) {
          return Ti.Util.fallbackNil(Ti.Types.toStr(_.get(t, e)), "".concat(i).concat(s));
        };

        var _s25 = /^'(.+)'$/.exec(e);

        if (_s25) return function () {
          return _s25[1];
        };

        if (_s25 = /^=>(.+)$/.exec(e)) {
          var _e61 = _s25[1];
          return t.genInvoking(_e61, {
            context: n,
            funcSet: r,
            partialRight: o
          });
        }

        return function (t) {
          return Ti.Util.getOrPick(t, e);
        };
      }

      return _.isEmpty(s) ? void 0 : function (t) {
        var _Ti$Util3;

        return (_Ti$Util3 = Ti.Util).getFallback.apply(_Ti$Util3, [t].concat(_toConsumableArray(s)));
      };
    },
    genInvoking: function genInvoking(t) {
      var _ref112 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref112$context = _ref112.context,
          e = _ref112$context === void 0 ? {} : _ref112$context,
          _ref112$funcSet = _ref112.funcSet,
          i = _ref112$funcSet === void 0 ? window : _ref112$funcSet,
          _ref112$partialRight = _ref112.partialRight,
          s = _ref112$partialRight === void 0 ? !1 : _ref112$partialRight;

      if (_.isFunction(t)) return t;
      var n, r;
      if (t.name && t.args) n = t.name, r = _.concat(t.args);else {
        var _e62 = /^([^()]+)(\((.+)\))?$/.exec(t);

        _e62 && (n = _.trim(_e62[1]), r = _.trim(_e62[3]));
      }

      var o = _.get(i, n);

      if (_.isFunction(o)) {
        var _ref113, _ref114;

        var _t56 = Ti.S.joinArgs(r, [], function (t) {
          return Ti.S.toJsValue(t, {
            context: e
          });
        });

        return _.isEmpty(_t56) ? o : s ? (_ref113 = _).partialRight.apply(_ref113, [o].concat(_toConsumableArray(_t56))) : (_ref114 = _).partial.apply(_ref114, [o].concat(_toConsumableArray(_t56)));
      }

      return function () {
        return t;
      };
    },
    genItemMatcher: function genItemMatcher(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
      return _.isFunction(t) ? function (e, i) {
        return t(e, i);
      } : _.isString(t) ? e ? function (e, i) {
        return _.indexOf(Ti.Util.getOrPick(e, t), i) >= 0;
      } : function (e, i) {
        return _.isEqual(Ti.Util.getOrPick(e, t), i);
      } : _.isArray(t) ? function (i, s) {
        var _iterator39 = _createForOfIteratorHelper(t),
            _step39;

        try {
          for (_iterator39.s(); !(_step39 = _iterator39.n()).done;) {
            var _n19 = _step39.value;

            var _t57 = Ti.Util.getOrPick(i, _n19);

            if (e) {
              if (_.indexOf(_t57, s) >= 0) return !0;
            } else if (_.isEqual(_t57, s)) return !0;
          }
        } catch (err) {
          _iterator39.e(err);
        } finally {
          _iterator39.f();
        }

        return !1;
      } : function (t, e) {
        return !1;
      };
    },
    genItemValueGetter: function genItemValueGetter(t, e) {
      return _.isFunction(t) ? function (i) {
        return t(i, e);
      } : _.isString(t) ? function (i) {
        return Ti.Util.getOrPick(i, t, e);
      } : function () {
        return e;
      };
    },
    genRowIdGetter: function genRowIdGetter(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ["id", "value"];
      return _.isFunction(t) ? function (e, i) {
        return Ti.Types.toStr(t(e, i));
      } : _.isString(t) ? function (e, i) {
        return Ti.Util.fallbackNil(Ti.Types.toStr(_.get(e, t)), "Row-".concat(i));
      } : _.isEmpty(e) ? void 0 : function (t) {
        var _Ti$Util4;

        return (_Ti$Util4 = Ti.Util).getFallback.apply(_Ti$Util4, [t].concat(_toConsumableArray(e)));
      };
    },
    genRowDataGetter: function genRowDataGetter(t) {
      return _.isFunction(t) ? function (e) {
        return t(e);
      } : _.isString(t) ? function (e) {
        return _.get(e, t);
      } : _.isObject(t) ? function (e) {
        return Ti.Util.translate(e, t);
      } : function (t) {
        return t;
      };
    }
  });

  return {
    Util: t
  };
}(),
    Util = _ref22.Util,
    _ref23 = function () {
  var t = {
    path: function path() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      return Ti.Util.isNil(t) ? [] : _.isArray(t) ? t : _.map(_.without(t.split("/"), ""), function (t) {
        return /^\d+$/.test(t) ? 1 * t : t;
      });
    },
    walkDeep: function walkDeep(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {
        return {};
      };
      var i = {
        index: 0,
        node: t,
        path: [],
        depth: 0,
        parent: null,
        ancestors: []
      };

      var s = function s(t) {
        var _$concat = _.concat(e(t) || [null, !1]),
            _$concat2 = _slicedToArray(_$concat, 2),
            i = _$concat2[0],
            n = _$concat2[1];

        if (n) return [i, n];

        if (_.isArray(t.node.children)) {
          var _e63 = {
            depth: t.depth + 1,
            parent: t,
            ancestors: _.concat(t.ancestors, t)
          },
              _r9 = 0;

          var _iterator40 = _createForOfIteratorHelper(t.node.children),
              _step40;

          try {
            for (_iterator40.s(); !(_step40 = _iterator40.n()).done;) {
              var _s26, _s27;

              var _o12 = _step40.value;
              if ((_s26 = s(_objectSpread({
                index: _r9,
                node: _o12,
                path: _.concat(t.path, _o12.name)
              }, _e63)), _s27 = _slicedToArray(_s26, 2), i = _s27[0], n = _s27[1], _s26), _r9++, n) return [i, n];
            }
          } catch (err) {
            _iterator40.e(err);
          } finally {
            _iterator40.f();
          }
        }

        return [];
      };

      var _s28 = s(i),
          _s29 = _slicedToArray(_s28, 1),
          n = _s29[0];

      return n;
    },
    walkBreadth: function walkBreadth(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {
        return {};
      };

      var i = {
        index: 0,
        node: t,
        path: [],
        depth: 0,
        parent: null,
        ancestors: []
      },
          _$concat3 = _.concat(e(i) || [null, !1]),
          _$concat4 = _slicedToArray(_$concat3, 2),
          s = _$concat4[0],
          n = _$concat4[1];

      if (n) return [s, n];

      var r = function r(t) {
        if (_.isArray(t.node.children)) {
          var _i56 = [],
              _s30 = {
            depth: t.depth + 1,
            parent: t,
            ancestors: _.concat(t.ancestors, t)
          },
              _n20 = 0;

          var _iterator41 = _createForOfIteratorHelper(t.node.children),
              _step41;

          try {
            for (_iterator41.s(); !(_step41 = _iterator41.n()).done;) {
              var _r12 = _step41.value;

              var _o13 = _objectSpread({
                index: _n20,
                node: _r12,
                path: _.concat(t.path, _r12.name || _n20)
              }, _s30),
                  _$concat5 = _.concat(e(_o13) || [null, !1]),
                  _$concat6 = _slicedToArray(_$concat5, 2),
                  _a7 = _$concat6[0],
                  _l4 = _$concat6[1];

              if (_n20++, _l4) return [_a7, _l4];

              _i56.push(_o13);
            }
          } catch (err) {
            _iterator41.e(err);
          } finally {
            _iterator41.f();
          }

          for (var _i58 = 0, _i57 = _i56; _i58 < _i57.length; _i58++) {
            var _t58 = _i57[_i58];

            var _r10 = r(_t58),
                _r11 = _slicedToArray(_r10, 2),
                _e64 = _r11[0],
                _i59 = _r11[1];

            if (_i59) return [_e64, _i59];
          }
        }

        return [];
      };

      var _r13 = r(i),
          _r14 = _slicedToArray(_r13, 1),
          o = _r14[0];

      return o;
    },
    getById: function getById(e, i) {
      if (!Ti.Util.isNil(i)) return t.walkDeep(e, function (t) {
        if (t.node.id == i) return [t, !0];
      });
    },
    getByPath: function getByPath(e) {
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
      var s = t.path(i);
      return t.walkDeep(e, function (t) {
        if (_.isEqual(s, t.path)) return [t, !0];
      });
    },
    getNodeById: function getNodeById(e, i) {
      var s = t.getById(e, i);
      if (s) return s.node;
    },
    getNodeByPath: function getNodeByPath(e) {
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
      var s = t.getByPath(e, i);
      if (s) return s.node;
    },
    insertBefore: function insertBefore(t, e) {
      if (!t || _.isUndefined(e)) return;
      var i, s;
      t.parent ? (s = t.parent.node.children, i = t.index) : (s = t.node.children, i = 0);
      return {
        hierarchy: t,
        children: s,
        item: e,
        index: Ti.Util.insertToArray(s, i, e)
      };
    },
    insertAfter: function insertAfter(t, e) {
      if (!t || _.isUndefined(e)) return;
      var i, s;
      t.parent ? (s = t.parent.node.children, i = t.index + 1) : (s = t.node.children, i = -1);
      return {
        hierarchy: t,
        children: s,
        item: e,
        index: Ti.Util.insertToArray(s, i, e)
      };
    },
    prepend: function prepend(t, e) {
      if (!t || _.isUndefined(e)) return;
      var i, s;
      _.isArray(t.node.children) ? (s = t.node.children, i = 0) : (s = t.parent.node.children, i = t.index + 1);
      return {
        hierarchy: t,
        children: s,
        item: e,
        index: Ti.Util.insertToArray(s, i, e)
      };
    },
    append: function append(t, e) {
      if (!t || _.isUndefined(e)) return;
      var i, s;
      _.isArray(t.node.children) ? (s = t.node.children, i = 0) : (s = t.parent.node.children, i = t.index);
      return {
        hierarchy: t,
        children: s,
        item: e,
        index: Ti.Util.insertToArray(s, i, e)
      };
    },
    remove: function remove(t) {
      if (!t || !t.parent) return;
      var e = t.index;
      return _.remove(t.parent.node.children, function (t, i) {
        return i == e;
      }).length > 0;
    },
    nextCandidate: function nextCandidate(t) {
      if (!t || !t.parent) return;
      var e,
          i,
          s = t.parent.node.children;
      return s.length <= 1 ? (e = t.parent.node, i = _.isEmpty(t.parent.path) ? null : t.parent.path.slice(0, t.parent.path.length - 1)) : t.index + 1 < s.length ? (e = s[t.index + 1], i = t.parent.path) : (e = s[t.index - 1], i = t.parent.path), {
        node: e,
        path: i
      };
    }
  };
  return {
    Trees: t
  };
}(),
    Trees = _ref23.Trees,
    _ref24 = function () {
  var t = /*#__PURE__*/function () {
    function t() {
      _classCallCheck(this, t);

      this.reset();
    }

    _createClass(t, [{
      key: "reset",
      value: function reset() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
        return this.scrolling = [], this.resizing = [], this;
      }
    }, {
      key: "watch",
      value: function watch(t) {
        var _ref115 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
            e = _ref115.scroll,
            i = _ref115.resize;

        _.isFunction(e) && this.scrolling.push({
          context: t,
          handler: e
        }), _.isFunction(i) && this.resizing.push({
          context: t,
          handler: i
        });
      }
    }, {
      key: "unwatch",
      value: function unwatch(t) {
        _.remove(this.scrolling, function (_ref116) {
          var e = _ref116.context;
          return e === t;
        }), _.remove(this.resizing, function (_ref117) {
          var e = _ref117.context;
          return e === t;
        });
      }
    }, {
      key: "startListening",
      value: function startListening() {
        var t = this;
        this.isListening || (window.addEventListener("resize", function (e) {
          var _iterator42 = _createForOfIteratorHelper(t.resizing),
              _step42;

          try {
            for (_iterator42.s(); !(_step42 = _iterator42.n()).done;) {
              var _i60 = _step42.value;

              _i60.handler.apply(_i60.context, [e]);
            }
          } catch (err) {
            _iterator42.e(err);
          } finally {
            _iterator42.f();
          }
        }), window.addEventListener("scroll", function (e) {
          var _iterator43 = _createForOfIteratorHelper(t.scrolling),
              _step43;

          try {
            for (_iterator43.s(); !(_step43 = _iterator43.n()).done;) {
              var _i61 = _step43.value;

              _i61.handler.apply(_i61.context, [e]);
            }
          } catch (err) {
            _iterator43.e(err);
          } finally {
            _iterator43.f();
          }
        }), this.isListening = !0);
      }
    }]);

    return t;
  }();

  return {
    Viewport: new t()
  };
}(),
    Viewport = _ref24.Viewport,
    _ref25 = function () {
  var t = {
    explainNavigation: function explainNavigation() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "/";
      var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : ".html";
      var n = [];

      var _iterator44 = _createForOfIteratorHelper(e),
          _step44;

      try {
        for (_iterator44.s(); !(_step44 = _iterator44.n()).done;) {
          var _r15 = _step44.value;

          var _e65 = _objectSpread({
            type: "page"
          }, _.pick(_r15, "icon", "title", "type", "value", "href", "target"));

          if ("page" == _r15.type) {
            if (!_e65.href) {
              var _n21 = _r15.value;
              _n21.endsWith(s) || (_n21 += s);

              var _o14 = Ti.Util.appendPath(i, _n21);

              _e65.value = _n21, _e65.href = t.joinHrefParams(_o14, _r15.params, _r15.anchor);
            }

            _e65.highlightBy = t.evalHighlightBy(_r15.highlightBy || _e65.value), !_e65.target && _r15.newTab && (_e65.target = "_blank");
          } else "href" == _e65.type ? (_e65.highlightBy = function () {
            return !1;
          }, _e65.href || (_e65.href = t.joinHrefParams(_r15.value, _r15.params, _r15.anchor)), !_e65.target && _r15.newTab && (_e65.target = "_blank")) : _e65.highlightBy = function () {
            return !1;
          };

          _.isArray(_r15.items) && (_e65.items = t.explainNavigation(_r15.items, i)), n.push(_e65);
        }
      } catch (err) {
        _iterator44.e(err);
      } finally {
        _iterator44.f();
      }

      return n;
    },
    evalHighlightBy: function evalHighlightBy() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;
      if (_.isFunction(t)) return t;

      if (_.isString(t)) {
        if (t.startsWith("^") || t.endsWith("$")) {
          var _e66 = new RegExp(t);

          return _.bind(function (t) {
            return this.test(t);
          }, _e66);
        }

        return function (e) {
          return _.isEqual(e, t);
        };
      }

      return _.isRegExp(t) ? _.bind(function (t) {
        return this.test(t);
      }, t) : _.isBoolean(t) ? function () {
        return t;
      } : function () {
        return !1;
      };
    },
    joinHrefParams: function joinHrefParams(t, e, i) {
      if (!t) return null;
      var s;
      return _.isEmpty(e) || (s = [], _.forEach(e, function (t, e) {
        if (!Ti.Util.isNil(t)) {
          var _i62 = encodeURIComponent(t);

          s.push("".concat(e, "=").concat(_i62));
        }
      }), s.length > 0 && (t = t + "?" + s.join("&"))), i && (i.startsWith("#") ? t += i : t += "#" + i), t;
    },
    evalFee: function evalFee() {
      var _ref118 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
          _ref118$price = _ref118.price,
          t = _ref118$price === void 0 ? 0 : _ref118$price,
          _ref118$amount = _ref118.amount,
          e = _ref118$amount === void 0 ? 1 : _ref118$amount;

      return t * e;
    },
    getCurrencyPrefix: function getCurrencyPrefix(t) {
      return {
        RMB: "￥",
        USD: "$",
        EUR: "€",
        GBP: "￡"
      }[_.upperCase(t)];
    },
    feeText: function feeText() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
      var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "RMB";

      var _ref119 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
          _ref119$autoSuffix = _ref119.autoSuffix,
          s = _ref119$autoSuffix === void 0 ? !0 : _ref119$autoSuffix;

      var n = _.upperCase(i),
          r = t.getCurrencyPrefix(n),
          o = [];

      return r && o.push(r), o.push(e), s && r || o.push(n), o.join("");
    }
  };
  return {
    WWW: t
  };
}(),
    WWW = _ref25.WWW,
    _ref26 = function () {
  var t = 3.141592653589793,
      e = 6378245,
      i = .006693421622965943,
      s = {
    WGS84_TO_GCJ02: function WGS84_TO_GCJ02(n, r) {
      if (s.outOfChina(n, r)) return {
        lat: n,
        lng: r
      };
      var o = s.transformLat(r - 105, n - 35),
          a = s.transformLng(r - 105, n - 35),
          l = n / 180 * t,
          h = Math.sin(l);
      h = 1 - i * h * h;
      var c = Math.sqrt(h);
      return {
        lat: n + (o = 180 * o / (e * (1 - i) / (h * c) * t)),
        lng: r + (a = 180 * a / (e / c * Math.cos(l) * t))
      };
    },
    WGS84_TO_BD09: function WGS84_TO_BD09(t, e) {
      var i = s.WGS84_TO_GCJ02(t, e);
      return s.GCJ02_TO_BD09(i.lat, i.lng);
    },
    GCJ02_TO_WGS84: function GCJ02_TO_WGS84(t, e) {
      var i = s.transform(t, e),
          n = 2 * e - i.lng;
      return {
        lat: 2 * t - i.lat,
        lng: n
      };
    },
    GCJ02_TO_BD09: function GCJ02_TO_BD09(e, i) {
      var s = i,
          n = e,
          r = Math.sqrt(s * s + n * n) + 2e-5 * Math.sin(n * t),
          o = Math.atan2(n, s) + 3e-6 * Math.cos(s * t),
          a = r * Math.cos(o) + .0065;
      return {
        lat: r * Math.sin(o) + .006,
        lng: a
      };
    },
    BD09_TO_GCJ02: function BD09_TO_GCJ02(e, i) {
      var s = i - .0065,
          n = e - .006,
          r = Math.sqrt(s * s + n * n) - 2e-5 * Math.sin(n * t),
          o = Math.atan2(n, s) - 3e-6 * Math.cos(s * t),
          a = r * Math.cos(o);
      return {
        lat: r * Math.sin(o),
        lng: a
      };
    },
    BD09_TO_WGS84: function BD09_TO_WGS84(t, e) {
      var i = s.BD09_TO_GCJ02(t, e);
      return s.GCJ02_TO_WGS84(i.lat, i.lng);
    },
    outOfChina: function outOfChina(t, e) {
      return e < 72.004 || e > 137.8347 || t < .8293 || t > 55.8271;
    },
    transform: function transform(n, r) {
      if (s.outOfChina(n, r)) return {
        lat: n,
        lng: r
      };
      var o = s.transformLat(r - 105, n - 35),
          a = s.transformLng(r - 105, n - 35),
          l = n / 180 * t,
          h = Math.sin(l);
      h = 1 - i * h * h;
      var c = Math.sqrt(h);
      return {
        lat: n + (o = 180 * o / (e * (1 - i) / (h * c) * t)),
        lng: r + (a = 180 * a / (e / c * Math.cos(l) * t))
      };
    },
    transformLat: function transformLat(e, i) {
      var s = 2 * e - 100 + 3 * i + .2 * i * i + .1 * e * i + .2 * Math.sqrt(Math.abs(e));
      return s += 2 * (20 * Math.sin(6 * e * t) + 20 * Math.sin(2 * e * t)) / 3, s += 2 * (20 * Math.sin(i * t) + 40 * Math.sin(i / 3 * t)) / 3, s += 2 * (160 * Math.sin(i / 12 * t) + 320 * Math.sin(i * t / 30)) / 3;
    },
    transformLng: function transformLng(e, i) {
      var s = 300 + e + 2 * i + .1 * e * e + .1 * e * i + .1 * Math.sqrt(Math.abs(e));
      return s += 2 * (20 * Math.sin(6 * e * t) + 20 * Math.sin(2 * e * t)) / 3, s += 2 * (20 * Math.sin(e * t) + 40 * Math.sin(e / 3 * t)) / 3, s += 2 * (150 * Math.sin(e / 12 * t) + 300 * Math.sin(e / 30 * t)) / 3;
    }
  };
  return {
    GPS: s
  };
}(),
    GPS = _ref26.GPS,
    _Bank = {
  Bank: {
    getCurrencyChar: function getCurrencyChar() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "RMB";
      return {
        RMB: "¥",
        USD: "$",
        GBP: "£"
      }[t];
    },
    isValidPayType: function isValidPayType(t) {
      return {
        "wx.qrcode": !0,
        "zfb.qrcode": !0,
        paypal: !0
      }[t] || !1;
    },
    getPayTypeText: function getPayTypeText(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
      var i = null;
      if (_.isString(t) && (i = "pay-by-".concat(t.replace(".", "-"))), i) return e ? Ti.I18n.get(i) : i;
    },
    getPayTypeChooseI18nText: function getPayTypeChooseI18nText(t) {
      var _ref120 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref120$text = _ref120.text,
          e = _ref120$text === void 0 ? "pay-step-choose-tip2" : _ref120$text,
          _ref120$nil = _ref120.nil,
          i = _ref120$nil === void 0 ? "pay-step-choose-nil" : _ref120$nil;

      var s = Ti.Bank.getPayTypeText(t, !0);
      return s ? Ti.I18n.getf(e, {
        val: s
      }) : Ti.I18n.get(i);
    }
  }
},
    Bank = _Bank.Bank,
    _ref27 = function () {
  var t = ["sun", "mon", "tue", "wed", "thu", "fri", "sat"],
      e = ["sunday", "monday", "tuesday", "wednesday", "thursday", "friday", "saturday"],
      i = {
    sun: 0,
    mon: 1,
    tue: 2,
    wed: 3,
    thu: 4,
    fri: 5,
    sat: 6,
    sunday: 0,
    monday: 1,
    tuesday: 2,
    wednesday: 3,
    thursday: 4,
    friday: 5,
    saturday: 6
  },
      s = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
      n = new RegExp("^((\\d{4})([/\\\\-])?(\\d{1,2})?([/\\\\-])?(\\d{1,2})?)?(([ T])?(\\d{1,2})(:)(\\d{1,2})((:)(\\d{1,2}))?((.)(\\d{1,3}))?)?(([+-])(\\d{1,2})(:\\d{1,2})?)?(Z(\\d*))?$"),
      r = {
    parse: function parse(t) {
      if (_.isUndefined(t) || "today" === t) return new Date();
      if (!t || _.isArray(t) && _.isEmpty(t)) return null;
      if (_.isDate(t)) return new Date(t);
      if (_.isNumber(t)) return new Date(t);

      if (_.isString(t)) {
        var _e67 = t;
        if (/\d{13,}/.test(_e67)) return new Date(1 * _e67);

        var _i63 = n.exec(t);

        if (_i63) {
          var _t59 = function _t59(t, e, i) {
            var s = t[e];
            return s ? parseInt(s) : i;
          },
              _e68 = new Date(),
              _s31 = _t59(_i63, 2, _e68.getFullYear()),
              _n22 = _t59(_i63, 4, _i63[2] ? 1 : _e68.getMonth() + 1),
              _r16 = _t59(_i63, 6, _i63[2] ? 1 : _e68.getDate()),
              _o15 = _t59(_i63, 9, 0),
              _a8 = _t59(_i63, 11, 0),
              _l5 = _t59(_i63, 14, 0),
              _h = _t59(_i63, 17, 0),
              _c2 = [_.padStart(_s31, 4, "0"), "-", _.padStart(_n22, 2, "0"), "-", _.padStart(_r16, 2, "0"), "T", _.padStart(_o15, 2, "0"), ":", _.padStart(_a8, 2, "0"), ":", _.padStart(_l5, 2, "0"), ".", _.padStart(_h, 3, "0")];

          _i63[18] && _c2.push(_i63[18]);

          var _u = _c2.join("");

          return new Date(_u);
        }
      }

      throw "i18n:invalid-date";
    },
    format: function format(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "yyyy-MM-dd HH:mm:ss";

      if (_.isArray(t)) {
        var _i64 = [];

        var _iterator45 = _createForOfIteratorHelper(t),
            _step45;

        try {
          for (_iterator45.s(); !(_step45 = _iterator45.n()).done;) {
            var _s32 = _step45.value;

            _i64.push(r.format(_s32, e));
          }
        } catch (err) {
          _iterator45.e(err);
        } finally {
          _iterator45.f();
        }

        return _i64;
      }

      if (_.isDate(t) || (t = r.parse(t)), !t) return null;
      var i,
          s = t.getFullYear(),
          n = t.getMonth() + 1,
          o = t.getDate(),
          a = t.getHours(),
          l = t.getMinutes(),
          h = t.getSeconds(),
          c = t.getMilliseconds(),
          u = {
        yyyy: s,
        M: n,
        d: o,
        H: a,
        m: l,
        s: h,
        S: c,
        yyy: s,
        yy: ("" + s).substring(2, 4),
        MM: _.padStart(n, 2, "0"),
        dd: _.padStart(o, 2, "0"),
        HH: _.padStart(a, 2, "0"),
        mm: _.padStart(l, 2, "0"),
        ss: _.padStart(h, 2, "0"),
        SS: _.padStart(c, 3, "0"),
        SSS: _.padStart(c, 3, "0")
      },
          d = /(y{2,4}|M{1,2}|d{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|'([^']+)')/g,
          p = [],
          f = 0;

      for (; i = (_readOnlyError("i"), d.exec(e));) {
        f < i.index && p.push(e.substring(f, i.index));

        var _t60 = Ti.Util.fallback(i[2], u[i[1]], i[1]);

        p.push(_t60), f = d.lastIndex;
      }

      return f < e.length && p.push(e.substring(f)), p.join("");
    },
    getWeekDayAbbr: function getWeekDayAbbr(e) {
      var i = _.clamp(e, 0, t.length - 1);

      return t[i];
    },
    getWeekDayName: function getWeekDayName(t) {
      var i = _.clamp(t, 0, e.length - 1);

      return e[i];
    },
    getWeekDayValue: function getWeekDayValue(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;

      var s = _.trim(_.lowerCase(t)),
          n = i[s];

      return _.isNumber(n) ? n : e;
    },
    getMonthAbbr: function getMonthAbbr(t) {
      var e = _.clamp(t, 0, 11);

      return s[e];
    },
    setTime: function setTime(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
      var s = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;
      var n = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;
      return _.inRange(e, 0, 24) && t.setHours(e), _.inRange(i, 0, 60) && t.setMinutes(i), _.inRange(s, 0, 60) && t.setSeconds(s), _.inRange(n, 0, 1e3) && t.setMilliseconds(n), t;
    },
    setDayLastTime: function setDayLastTime(t) {
      return r.setTime(t, 23, 59, 59, 999);
    },
    moveYear: function moveYear(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      return _.isDate(t) && t.setFullYear(t.getFullYear + e), t;
    },
    moveMonth: function moveMonth(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      return _.isDate(t) && t.setMonth(t.getMonth() + e), t;
    },
    moveDate: function moveDate(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      return _.isDate(t) && t.setDate(t.getDate() + e), t;
    },
    createDate: function createDate(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;

      if (_.isDate(t)) {
        var _i65 = new Date(t);

        return _i65.setDate(_i65.getDate() + e), _i65;
      }
    },
    timeText: function timeText(t) {
      var _ref121 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref121$justNow = _ref121.justNow,
          e = _ref121$justNow === void 0 ? 10 : _ref121$justNow,
          _ref121$i18n = _ref121.i18n,
          i = _ref121$i18n === void 0 ? Ti.I18n.get("time") : _ref121$i18n;

      var s = (t = r.parse(t)).getTime(),
          n = Date.now() - s,
          o = n > 0 ? "past-" : "future-";
      n = Math.abs(n);
      var a = Math.round(n / 6e4);
      if (a < e) return i["".concat(o, "in-min")];
      if (a < 60) return Ti.S.renderBy(i["".concat(o, "in-hour")], {
        min: a
      });
      var l = Math.round(n / 36e5);
      if (l < 24) return Ti.S.renderBy(i["".concat(o, "in-day")], {
        min: a,
        hour: l
      });
      var h = Math.round(l / 24);
      if (h < 7) return Ti.S.renderBy(i["".concat(o, "in-week")], {
        min: a,
        hour: l,
        day: h
      });
      return t.getFullYear() == new Date().getFullYear() ? r.format(t, i["in-year"]) : r.format(t, i["any-time"]);
    }
  };
  return {
    DateTime: r
  };
}(),
    DateTime = _ref27.DateTime,
    _Num = {
  Num: {
    fillSteps: function fillSteps() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;

      var _ref122 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
          _ref122$ary = _ref122.ary,
          i = _ref122$ary === void 0 ? [] : _ref122$ary,
          _ref122$step = _ref122.step,
          s = _ref122$step === void 0 ? 1 : _ref122$step;

      for (var _n23 = 0; _n23 < e; _n23++) {
        i[_n23] = t + _n23 * s;
      }

      return i;
    },
    scrollIndex: function scrollIndex(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;

      if (e > 0) {
        var _i66 = t % e;

        return _i66 >= 0 ? _i66 : e + _i66;
      }

      return -1;
    },
    precise: function precise(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;

      if (e >= 0) {
        var i = Math.pow(10, e);
        return Math.round(t * i) / i;
      }

      return t;
    }
  }
},
    Num = _Num.Num,
    _ref28 = function () {
  var t = {
    toPixel: function toPixel(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100;
      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
      if (_.isNumber(t)) return t > -1 && t < 1 ? t * e : t;
      var s = /^([\d.]+)(px)?(%)?$/.exec(t);
      return s ? s[3] ? s[1] * e / 100 : 1 * s[1] : i;
    },
    toSize: function toSize(t) {
      var _ref123 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref123$autoPercent = _ref123.autoPercent,
          e = _ref123$autoPercent === void 0 ? !0 : _ref123$autoPercent,
          _ref123$remBase = _ref123.remBase,
          i = _ref123$remBase === void 0 ? 0 : _ref123$remBase;

      return _.isNumber(t) || /^[0-9]+$/.test(t) ? 0 == t ? t : e && t > -1 && t < 1 ? 100 * t + "%" : i > 0 ? t / i + "rem" : t + "px" : t;
    },
    toSizeRem100: function toSizeRem100(e, i) {
      var s = _.assign({}, i, {
        remBase: 100
      });

      return t.toSize(e, s);
    },
    toStyle: function toStyle(e, i) {
      return _.mapValues(e, function (e, s) {
        var n = _.kebabCase(s);

        return /^(opacity|z-index|order)$/.test(n) ? e : t.toSize(e, i);
      });
    },
    toStyleRem100: function toStyleRem100(e, i) {
      var s = _.assign({}, i, {
        remBase: 100
      });

      return t.toStyle(e, s);
    },
    toBackgroundUrl: function toBackgroundUrl(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
      if (t) return e && (t = Ti.Util.appendPath(e, t)), "url(\"".concat(t, "\")");
    },
    toNumStyle: function toNumStyle(e) {
      return t.toStyle(e, !1);
    },
    mergeClassName: function mergeClassName() {
      var e = {};

      var i = function i(t) {
        if (!Ti.Util.isNil(t)) if (_.isFunction(t)) {
          var _e69 = t();

          i(_e69);
        } else if (_.isString(t)) {
          var _i67 = _.without(_.split(t, / +/g), "");

          var _iterator46 = _createForOfIteratorHelper(_i67),
              _step46;

          try {
            for (_iterator46.s(); !(_step46 = _iterator46.n()).done;) {
              var _t61 = _step46.value;
              e[_t61] = !0;
            }
          } catch (err) {
            _iterator46.e(err);
          } finally {
            _iterator46.f();
          }
        } else if (_.isArray(t)) {
          var _iterator47 = _createForOfIteratorHelper(t),
              _step47;

          try {
            for (_iterator47.s(); !(_step47 = _iterator47.n()).done;) {
              var _e70 = _step47.value;
              i(_e70);
            }
          } catch (err) {
            _iterator47.e(err);
          } finally {
            _iterator47.f();
          }
        } else _.isPlainObject(t) && _.forEach(t, function (t, i) {
          t && (e[i] = !0);
        });
      };

      for (var _len32 = arguments.length, t = new Array(_len32), _key32 = 0; _key32 < _len32; _key32++) {
        t[_key32] = arguments[_key32];
      }

      return i(t), e;
    },
    joinClassNames: function joinClassNames() {
      var i = t.mergeClassName.apply(t, arguments),
          s = [];
      return _.forEach(i, function (t, e) {
        t && s.push(e);
      }), s.join(" ");
    }
  };
  return {
    Css: t
  };
}(),
    Css = _ref28.Css,
    _ref29 = function () {
  var t = /*#__PURE__*/function () {
    function t(_t62, e) {
      _classCallCheck(this, t);

      this.data = e, _.isString(_t62) ? this.path = _.without(_t62.split("/"), "") : _.isArray(_t62) && (this.path = _t62);
    }

    _createClass(t, [{
      key: "match",
      value: function match(t) {
        var e = _.isArray(t) ? t : _.without(t.split("/"), "");

        for (var _t63 = 0; _t63 < e.length; _t63++) {
          var _i68 = e[_t63],
              _s33 = this.path[_t63];
          if ("*" != _s33 && _i68 != _s33) return !1;
        }

        return !0;
      }
    }]);

    return t;
  }();

  var e = /*#__PURE__*/function () {
    function e(t, _e71) {
      _classCallCheck(this, e);

      this.data = _e71, this.regex = new RegExp(t);
    }

    _createClass(e, [{
      key: "match",
      value: function match(t) {
        return this.regex.test(t);
      }
    }]);

    return e;
  }();

  var i = /*#__PURE__*/function () {
    function i() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      _classCallCheck(this, i);

      this.parse(t);
    }

    _createClass(i, [{
      key: "parse",
      value: function parse() {
        var _this16 = this;

        var i = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        this.maps = {}, this.regexs = [], this.paths = [], _.forEach(i, function (i, s) {
          var n = _.map(s.split(","), function (t) {
            return _.trim(t);
          });

          var _iterator48 = _createForOfIteratorHelper(n),
              _step48;

          try {
            for (_iterator48.s(); !(_step48 = _iterator48.n()).done;) {
              var _s34 = _step48.value;
              _s34.startsWith("^") ? _this16.regexs.push(new e(_s34, i)) : _s34.indexOf("/") >= 0 ? _this16.paths.push(new t(_s34, i)) : _this16.maps[_s34] = i;
            }
          } catch (err) {
            _iterator48.e(err);
          } finally {
            _iterator48.f();
          }
        });
      }
    }, {
      key: "get",
      value: function get(t, e) {
        if (!Ti.Util.isNil(t)) {
          var _e72 = this.maps[t];
          if (!_.isUndefined(_e72)) return _e72;

          var _iterator49 = _createForOfIteratorHelper(this.paths),
              _step49;

          try {
            for (_iterator49.s(); !(_step49 = _iterator49.n()).done;) {
              var _e73 = _step49.value;

              var _i69 = _.without(t.split("/"), "");

              if (_e73.match(_i69)) return _e73.data;
            }
          } catch (err) {
            _iterator49.e(err);
          } finally {
            _iterator49.f();
          }

          var _iterator50 = _createForOfIteratorHelper(this.regexs),
              _step50;

          try {
            for (_iterator50.s(); !(_step50 = _iterator50.n()).done;) {
              var _e74 = _step50.value;
              if (_e74.match(t)) return _e74.data;
            }
          } catch (err) {
            _iterator50.e(err);
          } finally {
            _iterator50.f();
          }
        }

        return e;
      }
    }]);

    return i;
  }();

  return {
    Mapping: i
  };
}(),
    Mapping = _ref29.Mapping,
    _ref30 = function () {
  var t = {
    item: Symbol("item"),
    data: Symbol("data"),
    query: Symbol("query"),
    children: Symbol("children"),
    getValue: Symbol("getValue"),
    getText: Symbol("getText"),
    getIcon: Symbol("getIcon"),
    isMatched: Symbol("isMatched"),
    itemCache: Symbol("itemCache"),
    dataCache: Symbol("dataCache"),
    hooks: Symbol("hooks"),
    shadowed: Symbol("shadowed")
  },
      e = {};

  var i = /*#__PURE__*/function () {
    function i() {
      _classCallCheck(this, i);

      this[t.hooks] = [], this[t.shadowed] = !1, this[t.item] = _.idendity, this[t.data] = function () {
        return [];
      }, this[t.query] = function (t) {
        return [];
      }, this[t.children] = function (t) {
        return [];
      }, this[t.getValue] = function (t) {
        return Ti.Util.getFallback(t, "value", "id");
      }, this[t.getText] = function (t) {
        return Ti.Util.getFallback(t, "title", "text", "name", "nm");
      }, this[t.getIcon] = function (t) {
        return _.get(t, "icon");
      }, this[t.isMatched] = function (t, e, i) {
        var s = i.getValue(t);
        if (_.isEqual(e, s)) return !0;
        var n = i.getText(t);
        return !!(n && n.indexOf(e) >= 0);
      }, this[t.itemCache] = {}, this[t.dataCache] = null;
    }

    _createClass(i, [{
      key: "setShadowed",
      value: function setShadowed() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;
        this[t.shadowed] = e;
      }
    }, {
      key: "isShadowed",
      value: function isShadowed() {
        return this[t.shadowed];
      }
    }, {
      key: "addHooks",
      value: function addHooks() {
        var _this17 = this;

        for (var _len33 = arguments.length, e = new Array(_len33), _key33 = 0; _key33 < _len33; _key33++) {
          e[_key33] = arguments[_key33];
        }

        var i = _.flattenDeep(e);

        _.forEach(i, function (e) {
          _.isFunction(e) && _this17[t.hooks].push(e);
        });
      }
    }, {
      key: "clearHooks",
      value: function clearHooks() {
        this[t.hooks] = [];
      }
    }, {
      key: "doHooks",
      value: function doHooks() {
        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;

        var _iterator51 = _createForOfIteratorHelper(this[t.hooks]),
            _step51;

        try {
          for (_iterator51.s(); !(_step51 = _iterator51.n()).done;) {
            var _i70 = _step51.value;

            _i70({
              loading: e
            });
          }
        } catch (err) {
          _iterator51.e(err);
        } finally {
          _iterator51.f();
        }
      }
    }, {
      key: "invoke",
      value: function invoke(e) {
        var s = this[t[e]];

        for (var _len34 = arguments.length, i = new Array(_len34 > 1 ? _len34 - 1 : 0), _key34 = 1; _key34 < _len34; _key34++) {
          i[_key34 - 1] = arguments[_key34];
        }

        if (_.isFunction(s)) return s.apply(this, [].concat(i, [this]));
      }
    }, {
      key: "invokeAsync",
      value: function () {
        var _invokeAsync = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee27(e) {
          var s,
              _len35,
              i,
              _key35,
              _args27 = arguments;

          return regeneratorRuntime.wrap(function _callee27$(_context27) {
            while (1) {
              switch (_context27.prev = _context27.next) {
                case 0:
                  s = this[t[e]];

                  if (!_.isFunction(s)) {
                    _context27.next = 6;
                    break;
                  }

                  for (_len35 = _args27.length, i = new Array(_len35 > 1 ? _len35 - 1 : 0), _key35 = 1; _key35 < _len35; _key35++) {
                    i[_key35 - 1] = _args27[_key35];
                  }

                  _context27.next = 5;
                  return s.apply(this, [].concat(i, [this]));

                case 5:
                  return _context27.abrupt("return", _context27.sent);

                case 6:
                case "end":
                  return _context27.stop();
              }
            }
          }, _callee27, this);
        }));

        function invokeAsync(_x18) {
          return _invokeAsync.apply(this, arguments);
        }

        return invokeAsync;
      }()
    }, {
      key: "setFunc",
      value: function setFunc(e) {
        var _this18 = this;

        _.forEach(e, function (e, i) {
          _.isFunction(e) && (_this18[t[i]] = e);
        });
      }
    }, {
      key: "duplicate",
      value: function duplicate(_ref124) {
        var _this19 = this;

        var _ref124$hooks = _ref124.hooks,
            e = _ref124$hooks === void 0 ? !1 : _ref124$hooks,
            _ref124$cache = _ref124.cache,
            s = _ref124$cache === void 0 ? !0 : _ref124$cache,
            _ref124$dataCache = _ref124.dataCache,
            n = _ref124$dataCache === void 0 ? !0 : _ref124$dataCache,
            _ref124$itemCache = _ref124.itemCache,
            r = _ref124$itemCache === void 0 ? !0 : _ref124$itemCache;
        var o = new i();
        return _.forEach(t, function (t) {
          o[t] = _this19[t];
        }), e || (o[t.hooks] = []), s || (o[t.itemCache] = {}, o[t.dataCache] = null), n || (o[t.dataCache] = null), r || (o[t.itemCache] = {}), o;
      }
    }, {
      key: "isItemCached",
      value: function isItemCached(e) {
        return !Ti.Util.isNil(this[t.itemCache][e]);
      }
    }, {
      key: "addItemToCache",
      value: function addItemToCache(e, i) {
        e = Ti.Util.fallback(e, null);
        var s = i;
        Ti.Util.isNil(s) && (s = this.getValue(e)), _.isUndefined(e) || Ti.Util.isNil(s) || (this[t.itemCache][s] = e);
      }
    }, {
      key: "clearCache",
      value: function clearCache() {
        this[t.itemCache] = {}, this[t.dataCache] = null;
      }
    }, {
      key: "findItem",
      value: function findItem(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];

        var _iterator52 = _createForOfIteratorHelper(e),
            _step52;

        try {
          for (_iterator52.s(); !(_step52 = _iterator52.n()).done;) {
            var _i71 = _step52.value;

            var _e75 = this.getValue(_i71);

            if (_.isEqual(t, _e75)) return _i71;
          }
        } catch (err) {
          _iterator52.e(err);
        } finally {
          _iterator52.f();
        }
      }
    }, {
      key: "getItem",
      value: function () {
        var _getItem = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee28(i) {
          var s, _t64, _iterator53, _step53, _e76;

          return regeneratorRuntime.wrap(function _callee28$(_context28) {
            while (1) {
              switch (_context28.prev = _context28.next) {
                case 0:
                  if (!Ti.Util.isNil(i)) {
                    _context28.next = 2;
                    break;
                  }

                  return _context28.abrupt("return", null);

                case 2:
                  s = this[t.itemCache][i];

                  if (!_.isUndefined(s)) {
                    _context28.next = 20;
                    break;
                  }

                  _t64 = e[i];

                  if (!_t64) {
                    _context28.next = 9;
                    break;
                  }

                  _context28.next = 8;
                  return new Promise(function (e) {
                    _t64.push(e);
                  });

                case 8:
                  return _context28.abrupt("return", _context28.sent);

                case 9:
                  _t64 = [];
                  e[i] = _t64;
                  this.doHooks(!0);
                  _context28.next = 14;
                  return this.invokeAsync("item", i);

                case 14:
                  s = _context28.sent;
                  this.doHooks(!1);
                  this.addItemToCache(s, i);
                  _iterator53 = _createForOfIteratorHelper(_t64);

                  try {
                    for (_iterator53.s(); !(_step53 = _iterator53.n()).done;) {
                      _e76 = _step53.value;

                      _e76(s || null);
                    }
                  } catch (err) {
                    _iterator53.e(err);
                  } finally {
                    _iterator53.f();
                  }

                  delete e[i];

                case 20:
                  return _context28.abrupt("return", this.isShadowed() ? _.cloneDeep(s) : s);

                case 21:
                case "end":
                  return _context28.stop();
              }
            }
          }, _callee28, this);
        }));

        function getItem(_x19) {
          return _getItem.apply(this, arguments);
        }

        return getItem;
      }()
    }, {
      key: "getData",
      value: function () {
        var _getData = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee29() {
          var _this20 = this;

          var e,
              i,
              _args29 = arguments;
          return regeneratorRuntime.wrap(function _callee29$(_context29) {
            while (1) {
              switch (_context29.prev = _context29.next) {
                case 0:
                  e = _args29.length > 0 && _args29[0] !== undefined ? _args29[0] : !1;
                  i = this[t.dataCache];
                  _context29.t0 = e || _.isEmpty(i);

                  if (!_context29.t0) {
                    _context29.next = 11;
                    break;
                  }

                  this.doHooks(!0);
                  _context29.next = 7;
                  return this.invokeAsync("data");

                case 7:
                  i = _context29.sent;
                  this.doHooks(!1);

                  _.forEach(i, function (t, e) {
                    _.isPlainObject(t) || (t = {
                      text: t,
                      value: t
                    }, i[e] = t), _this20.addItemToCache(t);
                  });

                  this[t.dataCache] = i;

                case 11:
                  return _context29.abrupt("return", this.isShadowed() ? _.cloneDeep(i) || [] : i || []);

                case 12:
                case "end":
                  return _context29.stop();
              }
            }
          }, _callee29, this);
        }));

        function getData() {
          return _getData.apply(this, arguments);
        }

        return getData;
      }()
    }, {
      key: "queryData",
      value: function () {
        var _queryData = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee30(t) {
          var _this21 = this;

          var e;
          return regeneratorRuntime.wrap(function _callee30$(_context30) {
            while (1) {
              switch (_context30.prev = _context30.next) {
                case 0:
                  if (t) {
                    _context30.next = 4;
                    break;
                  }

                  _context30.next = 3;
                  return this.getData();

                case 3:
                  return _context30.abrupt("return", _context30.sent);

                case 4:
                  this.doHooks(!0);
                  _context30.next = 7;
                  return this.invokeAsync("query", t);

                case 7:
                  e = _context30.sent;
                  return _context30.abrupt("return", (this.doHooks(!1), _.forEach(e, function (t) {
                    _this21.addItemToCache(t);
                  }), this.isShadowed() ? _.cloneDeep(e) || [] : e || []));

                case 9:
                case "end":
                  return _context30.stop();
              }
            }
          }, _callee30, this);
        }));

        function queryData(_x20) {
          return _queryData.apply(this, arguments);
        }

        return queryData;
      }()
    }, {
      key: "getChildren",
      value: function () {
        var _getChildren = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee31(t) {
          var _this22 = this;

          var e;
          return regeneratorRuntime.wrap(function _callee31$(_context31) {
            while (1) {
              switch (_context31.prev = _context31.next) {
                case 0:
                  if (t) {
                    _context31.next = 4;
                    break;
                  }

                  _context31.next = 3;
                  return this.getData();

                case 3:
                  return _context31.abrupt("return", _context31.sent);

                case 4:
                  this.doHooks(!0);
                  _context31.next = 7;
                  return this.invokeAsync("children", t);

                case 7:
                  e = _context31.sent;
                  return _context31.abrupt("return", (this.doHooks(!1), _.forEach(e, function (t) {
                    _this22.addItemToCache(t);
                  }), this.isShadowed() ? _.cloneDeep(e) || [] : e || []));

                case 9:
                case "end":
                  return _context31.stop();
              }
            }
          }, _callee31, this);
        }));

        function getChildren(_x21) {
          return _getChildren.apply(this, arguments);
        }

        return getChildren;
      }()
    }, {
      key: "getValue",
      value: function getValue(t) {
        return this.invoke("getValue", t);
      }
    }, {
      key: "getText",
      value: function getText(t) {
        return this.invoke("getText", t);
      }
    }, {
      key: "getIcon",
      value: function getIcon(t) {
        return this.invoke("getIcon", t);
      }
    }, {
      key: "isMatched",
      value: function isMatched(t, e) {
        return this.invoke("isMatched", t, e);
      }
    }, {
      key: "getBy",
      value: function getBy() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ".text";
        var e = arguments.length > 1 ? arguments[1] : undefined;
        var i = arguments.length > 2 ? arguments[2] : undefined;
        return t && ".text" != t ? ".icon" == t ? this.getIcon(e) : ".value" == t ? this.getValue(e) : Ti.Util.fallback(Ti.Util.getOrPick(e, t), i, this.getValue(e)) : this.getText(e);
      }
    }, {
      key: "checkItem",
      value: function () {
        var _checkItem = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee32(t) {
          var e;
          return regeneratorRuntime.wrap(function _callee32$(_context32) {
            while (1) {
              switch (_context32.prev = _context32.next) {
                case 0:
                  _context32.next = 2;
                  return this.getItem(t);

                case 2:
                  e = _context32.sent;

                  if (e) {
                    _context32.next = 5;
                    break;
                  }

                  throw Ti.Err.make("e.dict.no-item", {
                    dictName: dictName,
                    val: t
                  });

                case 5:
                  return _context32.abrupt("return", e);

                case 6:
                case "end":
                  return _context32.stop();
              }
            }
          }, _callee32, this);
        }));

        function checkItem(_x22) {
          return _checkItem.apply(this, arguments);
        }

        return checkItem;
      }()
    }, {
      key: "getItemText",
      value: function () {
        var _getItemText = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee33(t) {
          var e;
          return regeneratorRuntime.wrap(function _callee33$(_context33) {
            while (1) {
              switch (_context33.prev = _context33.next) {
                case 0:
                  _context33.next = 2;
                  return this.getItem(t);

                case 2:
                  e = _context33.sent;

                  if (!e) {
                    _context33.next = 5;
                    break;
                  }

                  return _context33.abrupt("return", this.getText(e));

                case 5:
                case "end":
                  return _context33.stop();
              }
            }
          }, _callee33, this);
        }));

        function getItemText(_x23) {
          return _getItemText.apply(this, arguments);
        }

        return getItemText;
      }()
    }, {
      key: "getItemIcon",
      value: function () {
        var _getItemIcon = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee34(t) {
          var e;
          return regeneratorRuntime.wrap(function _callee34$(_context34) {
            while (1) {
              switch (_context34.prev = _context34.next) {
                case 0:
                  _context34.next = 2;
                  return this.getItem(t);

                case 2:
                  e = _context34.sent;

                  if (!e) {
                    _context34.next = 5;
                    break;
                  }

                  return _context34.abrupt("return", this.getIcon(e));

                case 5:
                case "end":
                  return _context34.stop();
              }
            }
          }, _callee34, this);
        }));

        function getItemIcon(_x24) {
          return _getItemIcon.apply(this, arguments);
        }

        return getItemIcon;
      }()
    }, {
      key: "getItemAs",
      value: function () {
        var _getItemAs = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee35(t, e) {
          var i;
          return regeneratorRuntime.wrap(function _callee35$(_context35) {
            while (1) {
              switch (_context35.prev = _context35.next) {
                case 0:
                  _context35.next = 2;
                  return this.getItem(e);

                case 2:
                  i = _context35.sent;

                  if (!i) {
                    _context35.next = 5;
                    break;
                  }

                  return _context35.abrupt("return", this.getBy(t, i, e));

                case 5:
                case "end":
                  return _context35.stop();
              }
            }
          }, _callee35, this);
        }));

        function getItemAs(_x25, _x26) {
          return _getItemAs.apply(this, arguments);
        }

        return getItemAs;
      }()
    }]);

    return i;
  }();

  var s = {},
      n = {
    DictReferName: function DictReferName(t) {
      if (_.isString(t)) {
        var _e77 = /^(@Dict:|#)(.+)$/.exec(t);

        if (_e77) return _.trim(_e77[2]);
      }
    },
    GetOrCreate: function GetOrCreate() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      var _ref125 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          e = _ref125.hooks,
          r = _ref125.name;

      var o;
      if (t.data instanceof i) o = t.data;else {
        var _e78 = r || n.DictReferName(t.data);

        _e78 && (o = s[_e78]);
      }
      return o ? (e && (o = o.duplicate({
        hooks: !1
      })).addHooks(e), o) : n.CreateDict(t, {
        hooks: e,
        name: r
      });
    },
    CreateDict: function CreateDict() {
      var _ref126 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
          t = _ref126.data,
          e = _ref126.query,
          n = _ref126.item,
          r = _ref126.children,
          o = _ref126.getValue,
          a = _ref126.getText,
          l = _ref126.getIcon,
          h = _ref126.isMatched,
          c = _ref126.shadowed;

      var _ref127 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          u = _ref127.hooks,
          d = _ref127.name;

      if (_.isString(t) || _.isArray(t)) {
        var _e79 = Ti.S.toObjList(t);

        t = function t() {
          return _e79;
        };
      } else t || (t = function t() {
        return [];
      });

      n || (n = /*#__PURE__*/function () {
        var _ref128 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee36(t, e) {
          var i, _iterator54, _step54, _s35, _i72;

          return regeneratorRuntime.wrap(function _callee36$(_context36) {
            while (1) {
              switch (_context36.prev = _context36.next) {
                case 0:
                  _context36.next = 2;
                  return e.getData();

                case 2:
                  i = _context36.sent;
                  _iterator54 = _createForOfIteratorHelper(i);
                  _context36.prev = 4;

                  _iterator54.s();

                case 6:
                  if ((_step54 = _iterator54.n()).done) {
                    _context36.next = 13;
                    break;
                  }

                  _s35 = _step54.value;
                  _i72 = e.getValue(_s35);

                  if (!(_i72 == t || _.isEqual(_i72, t))) {
                    _context36.next = 11;
                    break;
                  }

                  return _context36.abrupt("return", _s35);

                case 11:
                  _context36.next = 6;
                  break;

                case 13:
                  _context36.next = 18;
                  break;

                case 15:
                  _context36.prev = 15;
                  _context36.t0 = _context36["catch"](4);

                  _iterator54.e(_context36.t0);

                case 18:
                  _context36.prev = 18;

                  _iterator54.f();

                  return _context36.finish(18);

                case 21:
                case "end":
                  return _context36.stop();
              }
            }
          }, _callee36, null, [[4, 15, 18, 21]]);
        }));

        return function n(_x27, _x28) {
          return _ref128.apply(this, arguments);
        };
      }()), e || (e = /*#__PURE__*/function () {
        var _ref129 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee37(t, e) {
          var i, s, _iterator55, _step55, _n24;

          return regeneratorRuntime.wrap(function _callee37$(_context37) {
            while (1) {
              switch (_context37.prev = _context37.next) {
                case 0:
                  _context37.next = 2;
                  return e.getData();

                case 2:
                  i = _context37.sent;
                  s = [];
                  _iterator55 = _createForOfIteratorHelper(i);

                  try {
                    for (_iterator55.s(); !(_step55 = _iterator55.n()).done;) {
                      _n24 = _step55.value;
                      e.isMatched(_n24, t) && s.push(_n24);
                    }
                  } catch (err) {
                    _iterator55.e(err);
                  } finally {
                    _iterator55.f();
                  }

                  return _context37.abrupt("return", s);

                case 7:
                case "end":
                  return _context37.stop();
              }
            }
          }, _callee37);
        }));

        return function (_x29, _x30) {
          return _ref129.apply(this, arguments);
        };
      }()), r || (r = function r() {
        return [];
      });
      var p = new i();
      return p.setFunc({
        data: t,
        query: e,
        item: n,
        children: r,
        getValue: o,
        getText: a,
        getIcon: l,
        isMatched: h
      }), d && (s[d] = p), c && p.setShadowed(c), u && p.addHooks(u), p;
    },
    GetDict: function GetDict(t, e) {
      var i = s[t];
      return i && e && (i = i.duplicate({
        hooks: !1
      })).addHooks(e), i;
    },
    CheckDict: function CheckDict(t, e) {
      var i = n.GetDict(t, e);
      if (i) return i;

      var _n$explainDictName = n.explainDictName(t),
          r = _n$explainDictName.name,
          o = _n$explainDictName.args;

      if (i = n.GetDict(r, e)) {
        if (!_.isEmpty(o)) {
          var _e81 = i.duplicate({
            hooks: !0,
            dataCache: !1
          });

          return _e81.setFunc({
            data: function data() {
              return this.getChildren.apply(this, _toConsumableArray(o));
            }
          }), s[t] = _e81, _e81;
        }

        return i;
      }

      throw "e.dict.noexists : ".concat(t);
    },
    explainDictName: function explainDictName(t) {
      var e = {},
          i = /^([^:()]+)(\(([^)]*)\))?(:(.+))?$/.exec(t);
      return i && (e.name = i[1], e.args = Ti.S.joinArgs(i[3]), e.vkey = i[5]), e;
    },
    getBy: function getBy(t, e) {
      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee38() {
        var _n$explainDictName2, i, s, r;

        return regeneratorRuntime.wrap(function _callee38$(_context38) {
          while (1) {
            switch (_context38.prev = _context38.next) {
              case 0:
                if (!Ti.Util.isNil(e)) {
                  _context38.next = 2;
                  break;
                }

                return _context38.abrupt("return", e);

              case 2:
                _n$explainDictName2 = n.explainDictName(t), i = _n$explainDictName2.name, s = _n$explainDictName2.vKey, r = n.CheckDict(i);
                _context38.next = 5;
                return r.getItemAs(s, e);

              case 5:
                return _context38.abrupt("return", _context38.sent);

              case 6:
              case "end":
                return _context38.stop();
            }
          }
        }, _callee38);
      }))();
    },
    getAll: function getAll(t) {
      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee39() {
        var _e82;

        return regeneratorRuntime.wrap(function _callee39$(_context39) {
          while (1) {
            switch (_context39.prev = _context39.next) {
              case 0:
                _context39.prev = 0;
                _e82 = n.CheckDict(t);
                _context39.next = 4;
                return _e82.getData();

              case 4:
                return _context39.abrupt("return", _context39.sent);

              case 7:
                _context39.prev = 7;
                _context39.t0 = _context39["catch"](0);
                console.error("e.dict.getAll : ".concat(t), _context39.t0);

              case 10:
              case "end":
                return _context39.stop();
            }
          }
        }, _callee39, null, [[0, 7]]);
      }))();
    },
    getText: function getText(t, e) {
      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee40() {
        var _i73;

        return regeneratorRuntime.wrap(function _callee40$(_context40) {
          while (1) {
            switch (_context40.prev = _context40.next) {
              case 0:
                _context40.prev = 0;
                _i73 = n.CheckDict(t);
                _context40.next = 4;
                return _i73.getItemText(e);

              case 4:
                return _context40.abrupt("return", _context40.sent);

              case 7:
                _context40.prev = 7;
                _context40.t0 = _context40["catch"](0);
                console.error("e.dict.getText : ".concat(t), _context40.t0);

              case 10:
              case "end":
                return _context40.stop();
            }
          }
        }, _callee40, null, [[0, 7]]);
      }))();
    },
    getIcon: function getIcon(t, e) {
      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee41() {
        var _i74;

        return regeneratorRuntime.wrap(function _callee41$(_context41) {
          while (1) {
            switch (_context41.prev = _context41.next) {
              case 0:
                _context41.prev = 0;
                _i74 = n.CheckDict(t);
                _context41.next = 4;
                return _i74.getItemIcon(e);

              case 4:
                return _context41.abrupt("return", _context41.sent);

              case 7:
                _context41.prev = 7;
                _context41.t0 = _context41["catch"](0);
                console.error("e.dict.getIcon : ".concat(t), _context41.t0);

              case 10:
              case "end":
                return _context41.stop();
            }
          }
        }, _callee41, null, [[0, 7]]);
      }))();
    }
  };
  return {
    Dict: i,
    DictFactory: n
  };
}(),
    Dict = _ref30.Dict,
    DictFactory = _ref30.DictFactory,
    _ref31 = function () {
  var t = function (_t65) {
    function t(_x33, _x34) {
      return _t65.apply(this, arguments);
    }

    t.toString = function () {
      return _t65.toString();
    };

    return t;
  }(function (t, e) {
    var _t$$parent;

    var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;
    t.$parent && !i && (_.isFunction(t.__before_bubble) && (e = t.__before_bubble(e) || e), (_t$$parent = t.$parent).$notify.apply(_t$$parent, [e.name].concat(_toConsumableArray(e.args))));
  }),
      e = function (_e84) {
    function e(_x35) {
      return _e84.apply(this, arguments);
    }

    e.toString = function () {
      return _e84.toString();
    };

    return e;
  }(function (e) {
    for (var _len36 = arguments.length, i = new Array(_len36 > 1 ? _len36 - 1 : 0), _key36 = 1; _key36 < _len36; _key36++) {
      i[_key36 - 1] = arguments[_key36];
    }

    var s,
        n = {
      name: e,
      args: i
    },
        r = !1;

    if (_.isFunction(this.__on_events) && (s = this.__on_events.apply(this, [e].concat(i))), _.isFunction(s) || (s = _.get(this.$listeners, e)), _.isFunction(s) || (s = this.$tiEventTryFallback(e, this.$listeners)), _.isFunction(s)) {
      var _e83 = s.apply(void 0, _toConsumableArray(n.args));

      r = !0, _.isBoolean(_e83) ? r = _e83 : _e83 && _.isBoolean(_e83.stop) && (r = _e83.stop), t(this, n, r);
    } else t(this, n);
  });

  return {
    VueEventBubble: {
      install: function install(t) {
        var _ref130 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
            _ref130$overrideEmit = _ref130.overrideEmit,
            i = _ref130$overrideEmit === void 0 ? !1 : _ref130$overrideEmit;

        _.assign(t.prototype, {
          $notify: e,
          $tiEventTryFallback: function $tiEventTryFallback(t) {
            var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

            var i = _.split(t, "::");

            for (; i.length > 1;) {
              var _i75 = i,
                  _i76 = _toArray(_i75),
                  _t66 = _i76.slice(1),
                  _s36 = _t66.join("::"),
                  _n25 = _.get(e, _s36);

              if (_n25) return _n25;
              i = _t66;
            }
          }
        }), i && t.mixin({
          created: function created() {
            this.$emit = e;
          }
        });
      }
    }
  };
}(),
    VueEventBubble = _ref31.VueEventBubble,
    _ref32 = function () {
  var t = {
    inheritAttrs: !1,
    computed: _objectSpread({}, Vuex.mapGetters("viewport", ["viewportMode", "viewportActivedComIds", "isViewportModeDesktop", "isViewportModeTablet", "isViewportModePhone", "isViewportModeDesktopOrTablet", "isViewportModePhoneOrTablet"]), {
      tiComId: function tiComId() {
        return "".concat(this._uid, ":").concat(this.tiComType);
      },
      isActived: function isActived() {
        return _.indexOf(this.viewportActivedComIds, this.tiComId) >= 0;
      },
      isSelfActived: function isSelfActived() {
        return _.last(this.viewportActivedComIds) == this.tiComId;
      },
      getTopClass: function getTopClass() {
        var _this23 = this;

        return function () {
          for (var _len37 = arguments.length, t = new Array(_len37), _key37 = 0; _key37 < _len37; _key37++) {
            t[_key37] = arguments[_key37];
          }

          return Ti.Css.mergeClassName({
            "is-self-actived": _this23.isSelfActived,
            "is-actived": _this23.isActived
          }, t, _this23.className);
        };
      }
    }),
    props: {
      className: void 0,
      onInit: void 0,
      onReady: void 0
    },
    created: function () {
      var _created = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee42() {
        return regeneratorRuntime.wrap(function _callee42$(_context42) {
          while (1) {
            switch (_context42.prev = _context42.next) {
              case 0:
                _.isFunction(this.onInit) && this.onInit(this);

              case 1:
              case "end":
                return _context42.stop();
            }
          }
        }, _callee42, this);
      }));

      function created() {
        return _created.apply(this, arguments);
      }

      return created;
    }(),
    mounted: function mounted() {
      _.isFunction(this.onReady) && this.onReady(this);
    },
    beforeDestroyed: function beforeDestroyed() {
      Ti.App(this).setBlurredVm(this);
    }
  },
      e = {
    tiActivableComIdPath: function tiActivableComIdPath() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !0;
      var e = this.tiActivableComPath(t);
      return _.map(e, function (t) {
        return t.tiComId;
      });
    },
    tiActivableComPath: function tiActivableComPath() {
      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !0;
      var e = [this],
          i = this.$parent;

      for (; i;) {
        i.__ti_activable__ && e.push(i), i = i.$parent;
      }

      return t && e.reverse(), e;
    },
    tiParentActivableCom: function tiParentActivableCom() {
      var t = this.$parent;

      for (; t && !t.__ti_activable__;) {
        t = (_readOnlyError("t"), t.$parent);
      }

      return t;
    },
    setActived: function setActived() {
      this.isSelfActived || Ti.App(this).setActivedVm(this);
    }
  };
  return {
    VueTiCom: {
      install: function install(i) {
        i.mixin(t), _.assign(i.prototype, e), i.filter("i18n", function (t) {
          var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
          return /^i18n:(.+)/.test(t) ? Ti.I18n.textf(t, e) : Ti.I18n.getf(t, e);
        }), i.filter("percent", function (t) {
          var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;
          var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;
          return Ti.S.toPercent(1 * t, {
            fixed: e,
            auto: i
          });
        }), i.filter("float", function (t) {
          var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;
          var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
          return Ti.Types.toFloat(t, {
            precision: e,
            dft: i
          });
        }), i.directive("dropFiles", {
          bind: function bind(t, e) {
            var i = null,
                s = null,
                n = e.modifiers.mask;
            _.isArray(e.value) ? (i = e.value.length > 0 ? e.value[0] : null, s = e.value.length > 1 ? e.value[1] : null) : _.isFunction(e.value) && (i = e.value), n && (s = Ti.I18n.text(s || "i18n:drop-file-here-to-upload")), t.__drag_enter_count = 0, t.addEventListener("dragenter", function (e) {
              t.__drag_enter_count++, 1 == t.__drag_enter_count && (t.setAttribute("ti-is-drag", ""), n && (t.$ti_drag_mask = Ti.Dom.createElement({
                className: "ti-drag-mask",
                $p: t
              }), t.$ti_drag_mask.innerHTML = "<span>".concat(s, "</span>")));
            }), t.addEventListener("dragover", function (t) {
              t.preventDefault(), t.stopPropagation();
            }), t.addEventListener("dragleave", function (e) {
              t.__drag_enter_count--, t.__drag_enter_count <= 0 && (t.removeAttribute("ti-is-drag"), t.$ti_drag_mask && (Ti.Dom.remove(t.$ti_drag_mask), delete t.$ti_drag_mask));
            }), t.addEventListener("drop", function (e) {
              e.preventDefault(), e.stopPropagation(), t.__drag_enter_count = 0, t.removeAttribute("ti-is-drag"), t.$ti_drag_mask && (Ti.Dom.remove(t.$ti_drag_mask), delete t.$ti_drag_mask), _.isFunction(i) && i(e.dataTransfer.files);
            });
          }
        }), i.directive("dropOff", {
          bind: function bind(t, e) {
            t.addEventListener("dragover", function (t) {
              t.preventDefault(), t.stopPropagation();
            }), t.addEventListener("drop", function (t) {
              t.preventDefault(), t.stopPropagation();
            });
          }
        }), i.directive("dragOff", {
          bind: function bind(t, e) {
            t.addEventListener("dragstart", function (t) {
              t.preventDefault(), t.stopPropagation();
            });
          }
        }), i.directive("tiActivable", {
          bind: function bind(t, _ref131, _ref132) {
            var e = _ref131.value;
            var i = _ref132.context;
            var s = i;
            s.__ti_activable__ = !0, t.addEventListener("click", function (t) {
              t.__ti_activable_used__ || (t.__ti_activable_used__ = !0, s.setActived());
            });
          }
        });
      }
    }
  };
}(),
    VueTiCom = _ref32.VueTiCom,
    _ref33 = function () {
  return {
    WalnutAppMain: function () {
      var _WalnutAppMain = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee43() {
        var _ref133,
            _ref133$rs,
            t,
            _ref133$appName,
            e,
            _ref133$preloads,
            i,
            _ref133$debug,
            s,
            _ref133$logging,
            n,
            _ref133$shortcute,
            r,
            _ref133$viewport,
            o,
            _t67,
            a,
            _t68,
            _iterator56,
            _step56,
            _e85,
            _t69,
            l,
            _t70,
            _t71,
            _iterator57,
            _step57,
            _t72,
            _e86,
            _i77,
            h,
            c,
            _args43 = arguments;

        return regeneratorRuntime.wrap(function _callee43$(_context43) {
          while (1) {
            switch (_context43.prev = _context43.next) {
              case 0:
                _ref133 = _args43.length > 0 && _args43[0] !== undefined ? _args43[0] : {}, _ref133$rs = _ref133.rs, t = _ref133$rs === void 0 ? "/gu/rs/" : _ref133$rs, _ref133$appName = _ref133.appName, e = _ref133$appName === void 0 ? "wn.manager" : _ref133$appName, _ref133$preloads = _ref133.preloads, i = _ref133$preloads === void 0 ? [] : _ref133$preloads, _ref133$debug = _ref133.debug, s = _ref133$debug === void 0 ? !1 : _ref133$debug, _ref133$logging = _ref133.logging, n = _ref133$logging === void 0 ? {
                  root: "warn"
                } : _ref133$logging, _ref133$shortcute = _ref133.shortcute, r = _ref133$shortcute === void 0 ? !0 : _ref133$shortcute, _ref133$viewport = _ref133.viewport, o = _ref133$viewport === void 0 ? {
                  phoneMaxWidth: 540,
                  tabletMaxWidth: 768,
                  designWidth: 1e3,
                  max: 100,
                  min: 80
                } : _ref133$viewport;

                if (!(Ti.AddResourcePrefix(t), Vue.use(Ti.Vue.EventBubble), Vue.use(Ti.Vue.TiCom), Ti.SetForDev(s), Ti.SetLogLevel(n.root), _.forEach(n.names, function (t, e) {
                  return Ti.SetLogLevel(e, t);
                }), r && Ti.Shortcut.startListening(), o && Ti.Viewport.startListening(), Ti.SetAppName(e), Ti.Config.set({
                  prefix: {
                    app: "/a/load/",
                    MyApp: "/a/load/".concat(e, "/"),
                    theme: "".concat(t, "ti/theme/"),
                    lib: "".concat(t, "ti/lib/"),
                    deps: "".concat(t, "ti/deps/"),
                    dist: "".concat(t, "ti/dist/"),
                    mod: "".concat(t, "ti/mod/"),
                    com: "".concat(t, "ti/com/"),
                    i18n: "".concat(t, "ti/i18n/")
                  },
                  alias: {
                    "^./": "@MyApp:",
                    "^@MyApp:?$": "@MyApp:_app.json",
                    "^@i18n:(.+)$": "@i18n:zh-cn/$1",
                    "/i18n/": "/i18n/zh-cn/",
                    "^(@[A-Za-z]+):i18n/(.+)$": "$1:i18n/zh-cn/$2"
                  },
                  suffix: {
                    "^@theme:": ".css",
                    "^@app:": "/_app.json",
                    "(^@mod:|[/:]mod/)": "/_mod.json",
                    "(^@com:|[/:]com/)": "/_com.json",
                    "(^@i18n:|[/:]i18n/)": ".i18n.json"
                  },
                  lang: "zh-cn"
                }), !_.isEmpty(i))) {
                  _context43.next = 6;
                  break;
                }

                _t67 = [];

                _.forEach(i, function (e) {
                  _t67.push(Ti.Load(e));
                });

                _context43.next = 6;
                return Promise.all(_t67);

              case 6:
                _context43.t0 = Ti.I18n;
                _context43.next = 9;
                return Ti.Load(["@i18n:_ti", "@i18n:_wn", "@i18n:_net", "@i18n:web", "@i18n:ti-datetime"]);

              case 9:
                _context43.t1 = _context43.sent;

                _context43.t0.put.call(_context43.t0, _context43.t1);

                _context43.next = 13;
                return Wn.Sys.exec("ti config -cqn", {
                  appName: e,
                  as: "json"
                });

              case 13:
                a = _context43.sent;
                _.isEmpty(a) || Ti.Config.update(a);
                _context43.t2 = a.i18n;

                if (!_context43.t2) {
                  _context43.next = 22;
                  break;
                }

                _context43.t3 = Ti.I18n;
                _context43.next = 20;
                return Ti.Load(a.i18n);

              case 20:
                _context43.t4 = _context43.sent;

                _context43.t3.put.call(_context43.t3, _context43.t4);

              case 22:
                if (!a.css) {
                  _context43.next = 42;
                  break;
                }

                _t68 = [].concat(a.css);
                _iterator56 = _createForOfIteratorHelper(_t68);
                _context43.prev = 25;

                _iterator56.s();

              case 27:
                if ((_step56 = _iterator56.n()).done) {
                  _context43.next = 34;
                  break;
                }

                _e85 = _step56.value;
                _t69 = _.template(_e85)({
                  theme: "${theme}"
                });
                _context43.next = 32;
                return Ti.Load(_t69);

              case 32:
                _context43.next = 27;
                break;

              case 34:
                _context43.next = 39;
                break;

              case 36:
                _context43.prev = 36;
                _context43.t5 = _context43["catch"](25);

                _iterator56.e(_context43.t5);

              case 39:
                _context43.prev = 39;

                _iterator56.f();

                return _context43.finish(39);

              case 42:
                _context43.next = 44;
                return Ti.Load("@MyApp");

              case 44:
                l = _context43.sent;

                if (!(_.assign(l.data, a.gui), _.isEmpty(a.components) || Ti.Util.pushUniqValue(l, "components", a.components), _.isEmpty(a.deps) || Ti.Util.pushUniqValue(l, "deps", a.deps), !_.isEmpty(a.preloads))) {
                  _context43.next = 50;
                  break;
                }

                _t70 = [];

                _.forEach(a.preloads, function (e) {
                  _t70.push(Ti.Load(e));
                });

                _context43.next = 50;
                return Promise.all(_t70);

              case 50:
                if (!_.isEmpty(a.rsPrefixes)) {
                  _t71 = _.concat(a.rsPrefixes);
                  Ti.AddResourcePrefix.apply(Ti, _toConsumableArray(_t71));
                }

                _iterator57 = _createForOfIteratorHelper(_.keys(a.global));
                _context43.prev = 52;

                _iterator57.s();

              case 54:
                if ((_step57 = _iterator57.n()).done) {
                  _context43.next = 63;
                  break;
                }

                _t72 = _step57.value;
                _e86 = a.global[_t72];
                _context43.next = 59;
                return Ti.Load(_e86);

              case 59:
                _i77 = _context43.sent;
                window[_t72] = _i77;

              case 61:
                _context43.next = 54;
                break;

              case 63:
                _context43.next = 68;
                break;

              case 65:
                _context43.prev = 65;
                _context43.t6 = _context43["catch"](52);

                _iterator57.e(_context43.t6);

              case 68:
                _context43.prev = 68;

                _iterator57.f();

                return _context43.finish(68);

              case 71:
                Wn.Dict.setup(a.dictionary);
                h = Ti.App(l);
                _context43.next = 75;
                return h.init();

              case 75:
                Ti.Dom.watchAutoRootFontSize(o, function (_ref134) {
                  var t = _ref134.$root,
                      e = _ref134.mode,
                      i = _ref134.fontSize;
                  t.style.fontSize = i + "px", t.setAttribute("as", e), Ti.App.eachInstance(function (t) {
                    t.commit("viewport/setMode", e);
                  });
                });
                h.commit("session/set", _app.session);
                Wn.Session.setup(_app.session);
                h.mountTo("#app");
                Ti.App.pushInstance(h);
                c = "~";
                _app.obj && (c = "id:" + _app.obj.id);
                _context43.next = 84;
                return h.dispatch("current/reload", c);

              case 84:
                return _context43.abrupt("return", h.get("obj"));

              case 85:
              case "end":
                return _context43.stop();
            }
          }
        }, _callee43, null, [[25, 36, 39, 42], [52, 65, 68, 71]]);
      }));

      function WalnutAppMain() {
        return _WalnutAppMain.apply(this, arguments);
      }

      return WalnutAppMain;
    }()
  };
}(),
    WalnutAppMain = _ref33.WalnutAppMain,
    _ref34 = function () {
  return {
    WebAppMain: function () {
      var _WebAppMain = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee44() {
        var _ref135,
            _ref135$www_host,
            t,
            _ref135$www_port_suff,
            e,
            _ref135$rs,
            i,
            _ref135$siteRs,
            s,
            _ref135$lang,
            n,
            r,
            o,
            a,
            _ref135$preloads,
            l,
            _ref135$debug,
            h,
            _ref135$logging,
            c,
            _ref135$shortcute,
            u,
            _ref135$viewport,
            d,
            _t73,
            _t74,
            _iterator58,
            _step58,
            _e87,
            p,
            _args44 = arguments;

        return regeneratorRuntime.wrap(function _callee44$(_context44) {
          while (1) {
            switch (_context44.prev = _context44.next) {
              case 0:
                _ref135 = _args44.length > 0 && _args44[0] !== undefined ? _args44[0] : {}, _ref135$www_host = _ref135.www_host, t = _ref135$www_host === void 0 ? "localhost" : _ref135$www_host, _ref135$www_port_suff = _ref135.www_port_suffix, e = _ref135$www_port_suff === void 0 ? ":8080" : _ref135$www_port_suff, _ref135$rs = _ref135.rs, i = _ref135$rs === void 0 ? "/gu/rs/" : _ref135$rs, _ref135$siteRs = _ref135.siteRs, s = _ref135$siteRs === void 0 ? "/" : _ref135$siteRs, _ref135$lang = _ref135.lang, n = _ref135$lang === void 0 ? "zh-cn" : _ref135$lang, r = _ref135.appJson, o = _ref135.siteId, a = _ref135.domain, _ref135$preloads = _ref135.preloads, l = _ref135$preloads === void 0 ? [] : _ref135$preloads, _ref135$debug = _ref135.debug, h = _ref135$debug === void 0 ? !1 : _ref135$debug, _ref135$logging = _ref135.logging, c = _ref135$logging === void 0 ? {
                  root: "warn"
                } : _ref135$logging, _ref135$shortcute = _ref135.shortcute, u = _ref135$shortcute === void 0 ? !0 : _ref135$shortcute, _ref135$viewport = _ref135.viewport, d = _ref135$viewport === void 0 ? {
                  phoneMaxWidth: 640,
                  tabletMaxWidth: 900,
                  designWidth: 1200,
                  max: 100,
                  min: 70
                } : _ref135$viewport;

                if (!(Ti.AddResourcePrefix(i, s), Vue.use(Ti.Vue.EventBubble), Vue.use(Ti.Vue.TiCom), Ti.SetForDev(h), Ti.SetLogLevel(c.root), _.forEach(c.names, function (t, e) {
                  return Ti.SetLogLevel(e, t);
                }), u && Ti.Shortcut.startListening(), d && Ti.Viewport.startListening(), Ti.Config.set({
                  prefix: {
                    Site: "".concat(s),
                    theme: "".concat(i, "ti/theme/"),
                    lib: "".concat(i, "ti/lib/"),
                    deps: "".concat(i, "ti/deps/"),
                    dist: "".concat(i, "ti/dist/"),
                    mod: "".concat(i, "ti/mod/"),
                    com: "".concat(i, "ti/com/"),
                    i18n: "".concat(i, "ti/i18n/")
                  },
                  alias: {
                    "^./": "@Site:",
                    "^@Site:?$": "@Site:_app.json",
                    "^@i18n:(.+)$": "@i18n:".concat(n, "/$1"),
                    "[:/]i18n/": "$&".concat(n, "/")
                  },
                  suffix: {
                    "^@theme:": ".css",
                    "^@app:": "/_app.json",
                    "(^@mod:|[/:]mod/)": "/_mod.json",
                    "(^@com:|[/:]com/)": "/_com.json",
                    "(^@i18n:|[/:]i18n/)": ".i18n.json"
                  },
                  lang: n
                }), !_.isEmpty(l))) {
                  _context44.next = 6;
                  break;
                }

                _t73 = [];

                _.forEach(l, function (e) {
                  _t73.push(Ti.Load(e));
                });

                _context44.next = 6;
                return Promise.all(_t73);

              case 6:
                _context44.t0 = Ti.I18n;
                _context44.next = 9;
                return Ti.Load(["@i18n:_ti", "@i18n:_net", "@i18n:web", "@i18n:ti-datetime"]);

              case 9:
                _context44.t1 = _context44.sent;

                _context44.t0.put.call(_context44.t0, _context44.t1);

                if (!r.css) {
                  _context44.next = 32;
                  break;
                }

                _t74 = _.concat(r.css);
                _iterator58 = _createForOfIteratorHelper(_t74);
                _context44.prev = 14;

                _iterator58.s();

              case 16:
                if ((_step58 = _iterator58.n()).done) {
                  _context44.next = 24;
                  break;
                }

                _e87 = _step58.value;
                _context44.t2 = _e87;

                if (!_context44.t2) {
                  _context44.next = 22;
                  break;
                }

                _context44.next = 22;
                return Ti.Load(_e87);

              case 22:
                _context44.next = 16;
                break;

              case 24:
                _context44.next = 29;
                break;

              case 26:
                _context44.prev = 26;
                _context44.t3 = _context44["catch"](14);

                _iterator58.e(_context44.t3);

              case 29:
                _context44.prev = 29;

                _iterator58.f();

                return _context44.finish(29);

              case 32:
                _context44.next = 34;
                return Ti.App(r, function (s) {
                  return _.assign(s.store.state, {
                    loading: !1,
                    siteId: o,
                    domain: a,
                    rs: i,
                    www_host: t,
                    www_port_suffix: e
                  }), s;
                });

              case 34:
                p = _context44.sent;
                _context44.next = 37;
                return p.init();

              case 37:
                Ti.App.pushInstance(p);
                Ti.SetAppName(p.name());
                p.commit("explainSiteState");
                Ti.Dom.watchAutoRootFontSize(d, function (_ref136) {
                  var t = _ref136.$root,
                      e = _ref136.mode,
                      i = _ref136.fontSize;
                  t.style.fontSize = i + "px", t.setAttribute("as", e), Ti.App.eachInstance(function (t) {
                    t.commit("viewport/setMode", e);
                  });
                });
                p.mountTo("#app");
                _context44.next = 44;
                return p.dispatch("reload");

              case 44:
                return _context44.abrupt("return", p);

              case 45:
              case "end":
                return _context44.stop();
            }
          }
        }, _callee44, null, [[14, 26, 29, 32]]);
      }));

      function WebAppMain() {
        return _WebAppMain.apply(this, arguments);
      }

      return WebAppMain;
    }()
  };
}(),
    WebAppMain = _ref34.WebAppMain,
    LOAD_CACHE = {};

var RS_PREFIXs = [];
var ENV = {
  version: "2.2-20200627.185053",
  dev: !1,
  appName: null,
  session: {},
  log: {
    ROOT: 0
  }
},
    LOG_LEVELS = {
  error: 0,
  warn: 1,
  info: 2,
  debug: 3,
  trace: 4
},
    G_FUNCS = {};
var Ti = {
  Alg: Alg,
  Be: Be,
  S: S,
  Util: Util,
  App: App,
  Err: Err,
  Config: Config,
  Dom: Dom,
  Css: Css,
  Load: Load,
  Http: Http,
  Icons: Icons,
  I18n: I18n,
  Shortcut: Shortcut,
  Fuse: Fuse,
  Random: Random,
  Storage: Storage,
  Types: Types,
  Viewport: Viewport,
  WWW: WWW,
  GPS: GPS,
  Validate: Validate,
  DateTime: DateTime,
  Num: Num,
  Trees: Trees,
  Bank: Bank,
  Mapping: Mapping,
  Dict: Dict,
  DictFactory: DictFactory,
  Rects: Rects,
  Rect: Rect,
  Websocket: TiWebsocket,
  Preload: Preload,
  MatchCache: MatchCache,
  AddResourcePrefix: AddResourcePrefix,
  RS_PREFIXs: RS_PREFIXs,
  LOAD_CACHE: LOAD_CACHE,
  WalnutAppMain: WalnutAppMain,
  WebAppMain: WebAppMain,
  Vue: {
    EventBubble: VueEventBubble,
    TiCom: VueTiCom
  },
  Alert: Alert,
  Confirm: Confirm,
  Prompt: Prompt,
  Toast: Toast,
  Captcha: Captcha,
  Env: function Env(t, e) {
    return Ti.Util.geset(ENV, t, e);
  },
  Version: function Version() {
    return Ti.Env("version");
  },
  SetForDev: function SetForDev() {
    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !0;
    Ti.Env({
      dev: t
    });
  },
  IsForDev: function IsForDev() {
    return Ti.Env("dev");
  },
  SetAppName: function SetAppName(t) {
    Ti.Env({
      appName: t
    });
  },
  GetAppName: function GetAppName() {
    return Ti.Env("appName");
  },
  SetLogLevel: function SetLogLevel() {
    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
    var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "ROOT";
    _.isString(t) && (t = LOG_LEVELS[t] || 0), ENV.log[e] = t;
  },
  IsError: function IsError(t) {
    return _IS_LOG(t, LOG_LEVELS.error);
  },
  IsWarn: function IsWarn(t) {
    return _IS_LOG(t, LOG_LEVELS.warn);
  },
  IsInfo: function IsInfo(t) {
    return _IS_LOG(t, LOG_LEVELS.info);
  },
  IsDebug: function IsDebug(t) {
    return _IS_LOG(t, LOG_LEVELS.debug);
  },
  IsTrace: function IsTrace(t) {
    return _IS_LOG(t, LOG_LEVELS.trace);
  },
  Invoke: function Invoke(t) {
    var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
    var i = arguments.length > 2 ? arguments[2] : undefined;
    if (_.isFunction(t)) return i = i || this, t.apply(i, e);
  },
  InvokeBy: function InvokeBy() {
    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var e = arguments.length > 1 ? arguments[1] : undefined;
    var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
    var s = arguments.length > 3 ? arguments[3] : undefined;
    if (t) return Ti.Invoke(t[e], i, s || t);
  },
  DoInvoke: function DoInvoke(t) {
    var _arguments2 = arguments,
        _this24 = this;

    return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee45() {
      var e, i;
      return regeneratorRuntime.wrap(function _callee45$(_context45) {
        while (1) {
          switch (_context45.prev = _context45.next) {
            case 0:
              e = _arguments2.length > 1 && _arguments2[1] !== undefined ? _arguments2[1] : [];
              i = _arguments2.length > 2 ? _arguments2[2] : undefined;

              if (!_.isFunction(t)) {
                _context45.next = 7;
                break;
              }

              i = i || _this24;
              _context45.next = 6;
              return t.apply(i, e);

            case 6:
              return _context45.abrupt("return", _context45.sent);

            case 7:
            case "end":
              return _context45.stop();
          }
        }
      }, _callee45);
    }))();
  },
  DoInvokeBy: function DoInvokeBy() {
    var _arguments3 = arguments;
    return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee46() {
      var t, e, i, s;
      return regeneratorRuntime.wrap(function _callee46$(_context46) {
        while (1) {
          switch (_context46.prev = _context46.next) {
            case 0:
              t = _arguments3.length > 0 && _arguments3[0] !== undefined ? _arguments3[0] : {};
              e = _arguments3.length > 1 ? _arguments3[1] : undefined;
              i = _arguments3.length > 2 && _arguments3[2] !== undefined ? _arguments3[2] : [];
              s = _arguments3.length > 3 ? _arguments3[3] : undefined;

              if (!t) {
                _context46.next = 8;
                break;
              }

              _context46.next = 7;
              return Ti.DoInvoke(t[e], i, s || t);

            case 7:
              return _context46.abrupt("return", _context46.sent);

            case 8:
            case "end":
              return _context46.stop();
          }
        }
      }, _callee46);
    }))();
  },
  AddGlobalFuncs: function AddGlobalFuncs(t) {
    _.assign(G_FUNCS, t);
  },
  GlobalFuncs: function GlobalFuncs() {
    return _.assign({}, Ti.Types, G_FUNCS);
  }
};
exports.Ti = Ti;
var _default = Ti;
exports["default"] = _default;
window && (window.Ti = Ti);