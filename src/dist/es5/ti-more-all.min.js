"use strict";function _toArray(t){return _arrayWithHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableRest()}function _typeof(t){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _createForOfIteratorHelper(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=_unsupportedIterableToArray(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,r=!0,o=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return r=t.done,t},e:function(t){o=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(o)throw a}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function asyncGeneratorStep(t,e,n,i,a,r,o){try{var s=t[r](o),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(i,a)}function _asyncToGenerator(t){return function(){var e=this,n=arguments;return new Promise(function(i,a){function r(t){asyncGeneratorStep(s,i,a,r,o,"next",t)}function o(t){asyncGeneratorStep(s,i,a,r,o,"throw",t)}var s=t.apply(e,n);r(void 0)})}}Ti.Preload("ti/com/hmaker/edit-com/form/edit-com-form.html",'<ti-form \n  class="hmaker-edit-com-form"\n  v-bind="FormConf"/>'),function(){var t={props:{value:{type:Object,default:void 0},keepTabIndexBy:{type:String,default:"hMakerEditComForm"}},computed:{FormConf:function(){return{mode:"tab",keepTabIndexBy:this.keepTabIndexBy,spacing:"tiny",data:this.value,fields:[{type:"Group",title:"i18n:hmk-aspect",fields:[{name:"title",title:"i18n:hmk-title",type:"String",comType:"ti-input"},{name:"icon",title:"i18n:hmk-icon",type:"String",comType:"ti-input-icon"},{name:"mode",title:"i18n:hmk-mode",type:"String",defaultAs:"all",comType:"ti-switcher",comConf:{options:[{value:"all",text:"i18n:hmk-mode-all"},{value:"tab",text:"i18n:hmk-mode-tab"}]}},{name:"tabAt",title:"i18n:hmk-tabAt",type:"String",defaultAs:"top-center",width:240,hidden:{mode:{name:"isEqual",args:"tab",not:!0}},comType:"ti-droplist",comConf:{placeholder:"i18n:hmk-tabAt-top-center",autoI18n:!0,options:[{value:"top-left",text:"i18n:hmk-tabAt-top-left"},{value:"top-center",text:"i18n:hmk-tabAt-top-center"},{value:"top-right",text:"i18n:hmk-tabAt-top-right"},{value:"bottom-left",text:"i18n:hmk-tabAt-bottom-left"},{value:"bottom-center",text:"i18n:hmk-tabAt-bottom-center"},{value:"bottom-right",text:"i18n:hmk-tabAt-bottom-right"}]}},{name:"currentTab",title:"i18n:hmk-currentTab",type:"Integer",defaultAs:0,width:120,hidden:{mode:{name:"isEqual",args:"tab",not:!0}},comType:"ti-input-num"},{name:"spacing",title:"i18n:hmk-spacing",type:"String",defaultAs:"comfy",comType:"ti-switcher",comConf:{options:[{value:"comfy",text:"i18n:hmk-spacing-comfy"},{value:"tiny",text:"i18n:hmk-spacing-tiny"}]}},{name:"adjustDelay",title:"i18n:hmk-adjustDelay",type:"Integer",defaultAs:0,width:120,comType:"ti-input-num"},{name:"blankAs",title:"i18n:hmk-blankAs",type:"Object",comType:"ti-input"}]},{type:"Group",title:"i18n:hmk-fields",fields:[{name:"fields",type:"Array",height:"100%",comType:"hmaker-edit-form-fieldset",comConf:{className:"ti-fill-parent",keepTabIndexBy:this.keepTabIndexBy}}]},{type:"Group",title:"i18n:hmk-data",fields:[{title:"i18n:hmk-form-data",name:"data",comType:"ti-input"},{name:"fieldStatus",title:"i18n:hmk-fieldStatus",comType:"ti-input"},{name:"onlyFields",title:"i18n:hmk-form-onlyFields",type:"Boolean",defaultAs:!0,comType:"ti-toggle"}]},{title:"i18n:hmk-measure",fields:[{title:"i18n:hmk-form-width",name:"width",comType:"ti-input"},{title:"i18n:hmk-form-height",name:"height",comType:"ti-input"}]}]}}},methods:{},created:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Wn.Dict.hMakerComponents();case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()};Ti.Preload("ti/com/hmaker/edit-com/form/edit-com-form.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-com/form/field/edit-form-field.html",'<div class="hmaker-edit-form-field ti-scroll-v">\n  \x3c!--\n    Empty\n  --\x3e\n  <ti-loading \n    v-if="isEmpty"\n      icon="fas-hand-point-left"\n      text="i18n:hmaker-edit-form-field-nil"/>\n  \x3c!--\n    Editing\n  --\x3e\n  <ti-form\n    v-else\n      v-bind="TheForm"\n      :data="value"/>\n</div>'),function(){var t={props:{value:{type:Object,default:void 0},keepTabIndexBy:{type:String,default:void 0}},computed:{isEmpty:function(){return Ti.Util.isNil(this.value)},TheFormGeneralFields:function(){return[{hidden:this.isGroup,name:"type",title:"hmk-field-type",defaultAs:"String",comType:"ti-droplist",comConf:{placeholder:"i18n:hm-type-String",options:function(t){return _.map(t,function(t){return{icon:Ti.I18n.get("hm-type-icons")[t],value:t,text:Ti.I18n.get("hm-type-".concat(t))}})}(["Object","Number","Integer","Boolean","String","Array"]),dropDisplay:["<icon>","text","value"]}},{name:"title",title:"hmk-field-title",comType:"ti-input"},{name:"icon",title:"hmk-field-icon",comType:"ti-input-icon"},{hidden:this.isGroup,name:"name",title:"hmk-field-name",comType:"ti-input"},{hidden:this.isGroup,name:"tip",title:"hmk-field-tip",comType:"ti-input"},{hidden:this.isGroup,name:"width",title:"hmk-field-width",width:120,comType:"ti-input"},{hidden:this.isGroup,name:"height",title:"hmk-field-height",width:120,comType:"ti-input"},{hidden:this.isGroup,name:"defaultAs",title:"hmk-field-defaultAs",comType:"ti-input",comConf:{autoJsValue:!0}},{hidden:this.isGroup,name:["comType","comConf"],title:"hmk-field-com",type:"Object",width:"auto",comType:"wn-combo-edit-com"}]},TheFormAdvanceFields:function(){return[{name:"disabled",title:"hmk-field-disabled",comType:"ti-input",comConf:{autoJsValue:!0}},{name:"hidden",title:"hmk-field-hidden",comType:"ti-input",comConf:{autoJsValue:!0}},{name:"checkEquals",title:"hmk-field-checkEquals",comType:"ti-toggle"},{name:"transformer",title:"hmk-field-transformer",comType:"ti-input-text",comConf:{autoJsValue:!0}},{name:"serializer",title:"hmk-field-serializer",comType:"ti-input-text",comConf:{autoJsValue:!0}}]},TheForm:function(){return{spacing:"tiny",keepTabIndexBy:this.keepTabIndexBy,fields:[{type:"Group",title:"i18n:hmk-fields-general",fields:this.TheFormGeneralFields},{type:"Group",title:"i18n:hmk-fields-advance",hidden:this.isGroup,fields:this.TheFormAdvanceFields}]}}},methods:{isGroup:function(t){return _.isArray(t.fields)||"Group"==t.type}}};Ti.Preload("ti/com/hmaker/edit-com/form/field/edit-form-field.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-com/form/field/_com.json",{name:"hmaker-edit-form-field",globally:!0,template:"./edit-form-field.html",mixins:["./edit-form-field.mjs"]}),Ti.Preload("ti/com/hmaker/edit-com/form/fieldset/edit-form-fieldset.html",'<ti-gui\n  class="hmaker-edit-form-fieldset"\n  :class="TopClass"\n  :layout="Layout"\n  :schema="Schema"\n  :can-loading="false"\n  @tree::select="OnFieldTreeSelect"\n  @detail::change="OnFieldChange"/>'),function(){var t={data:function(){return{myCurrentId:null}},props:{value:{type:Array,default:void 0},keepTabIndexBy:{type:String,default:"hMakerEditComForm"}},computed:{TopClass:function(){return this.getTopClass()},TheDetailCom:function(){return{comType:"hmaker-edit-form-field",comConf:{value:this.CurrentField,keepTabIndexBy:this.keepTabIndexBy?"".concat(this.keepTabIndexBy,"-field"):null}}},CurrentField:function(){if(this.myCurrentId){var t=this.$tree.findTableRow(this.myCurrentId);if(t)return t.rawData}},Layout:function(){return{type:"cols",border:!0,blocks:[{type:"rows",size:"37%",border:!0,blocks:[{size:40,body:"actions"},{name:"tree",body:"tree"}]},{name:"detail",body:"detail"}]}},Schema:function(){var t=this;return{actions:{comType:"ti-actionbar",comConf:{items:[{type:"action",icon:"im-plus",text:"i18n:hmaker-edit-form-new-field",action:function(){return t.addNewField()}},{type:"action",icon:"im-folder-add",text:"i18n:hmaker-edit-form-new-group",action:function(){return t.addNewGroup()}},{type:"line"},{type:"action",icon:"im-trash-can",action:function(){return t.removeSelectedFieldOrGroup()}},{type:"line"},{type:"action",icon:"im-arrow-up",action:function(){return t.moveSelectedFieldsUp()}},{type:"action",icon:"im-arrow-down",action:function(){return t.moveSelectedFieldsDown()}}]}},tree:{comType:"ti-tree",comConf:{data:this.value,showRoot:!1,puppetMode:!0,autoOpen:!0,border:"row",defaultOpenDepth:2,currentId:this.myCurrentId,nameBy:function(t){return t.name||t.title},childrenBy:function(t){return t.fields},leafBy:function(t){return"Group"!=t.type},display:[{key:"type",transformer:{name:"toStr",args:[{Group:"zmdi-collection-bookmark",Object:"zmdi-toys",Number:"zmdi-input-svideo",Integer:"zmdi-n-6-square",Boolean:"zmdi-toll",String:"zmdi-translate",Array:"zmdi-format-list-bulleted"}]},defaultAs:"im-question",comType:"ti-icon"},{key:"name",transformer:function(t){return _.isArray(t)?t.join("+"):t}},"title"],onInit:this.OnTreeInit}},detail:this.TheDetailCom}}},methods:{OnTreeInit:function(t){this.$tree=t},OnFieldTreeSelect:function(t){var e=t.currentId;this.myCurrentId=e},OnFieldChange:function(t){this.updateCurrentField(t)},getMyCurrent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.value;if(this.myCurrentId&&_.isArray(t)){var e=this.myCurrentId.split("/"),n={path:e,index:[],group:null,field:null};if(e.length>0)for(var i=e[0],a=0;a<t.length;a++){var r=t[a];if(_.isArray(r.fields)||"Group"==r.type){if(i==r.title){n.group=r,n.index.push(a);break}}else if(i==r.name){n.field=r,n.index.push(a);break}}if(e.length>1&&n.group&&_.isArray(n.group.fields))for(var o=e[1],s=0;s<n.group.fields.length;s++){var c=n.group.fields[s];o==c.name&&(n.field=c,n.index.push(s))}return n}},isGroup:function(t){return"Group"==t.type||_.isArray(t.fields)},selectNextIdByIndex:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value,i=[],a=_createForOfIteratorHelper(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(!n||_.isEmpty(n))break;var o=_.nth(n,r);o||(o=_.nth(n,r-1)),o&&(i.push(o.name||o.title),n=o.fields)}}catch(t){a.e(t)}finally{a.f()}this.myCurrentId=i.join("/")||null},findByName:function(t){if(_.isArray(this.value))for(var e=0;e<this.value.length;e++){var n=this.value[e],i=n.name||n.title;if(_.isEqual(t,i)){var a={index:[e],path:[i],field:n};return this.isGroup(n)?a.group=n:a.field=n,a}if(this.isGroup(n))for(var r=0;r<n.fields.length;r++){var o=n.fields[r],s=o.name||o.title;if(_.isEqual(t,s))return{index:[e,r],path:[i,s],group:n,field:o}}}},existsName:function(t){return!!this.findByName(t)},updateCurrentField:function(t){var e=_.cloneDeep(this.value),n=this.getMyCurrent(e);if(console.log(n),n.group&&n.field){var i=_.last(n.index);n.group.fields[i]=t}else if(n.group){var a=_.first(n.index);_.assign(e[a],t)}else{if(!n.field)return;e[_.first(n.index)]=t}this.selectNextIdByIndex(n.index,e),this.$notify("change",e)},addFieldOrGroup:function(t){var e=_.cloneDeep(this.value)||[],n=this.getMyCurrent(e),i=[];n?n.group?this.isGroup(t)?(Ti.Util.insertToArray(e,_.first(n.index),t),i.push(t.title)):n.field?(Ti.Util.insertToArray(n.group.fields,_.last(n.index)+1,t),i.push(n.path[0],t.name)):_.isArray(n.group.fields)?(n.group.fields.push(t),i.push(n.path[0],t.name)):(n.group.fields=[t],i.push(n.path[0],t.name)):(Ti.Util.insertToArray(e,_.last(n.index)+1,t),i.push(t.name||t.title)):e.push(t),this.$notify("change",e),this.myCurrentId=i.join("/")},addNewField:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ti.Prompt("i18n:hmaker-edit-form-new-field-tip");case 2:if(n=e.sent,n=_.trim(n)){e.next=6;break}return e.abrupt("return");case 6:i=_.without(n.split(/[\s\W]/),""),a=_createForOfIteratorHelper(i),e.prev=8,a.s();case 10:if((r=a.n()).done){e.next=18;break}if(o=r.value,/^[a-z_][\da-z_]+$/.test(o)){e.next=16;break}return e.next=15,Ti.Toast.Open("i18n:hmaker-edit-form-new-field-e0","error");case 15:return e.abrupt("return",e.sent);case 16:e.next=10;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),a.e(e.t0);case 23:return e.prev=23,a.f(),e.finish(23);case 26:if(s=1==i.length?n:i,!t.existsName(s)){e.next=31;break}return e.next=30,Ti.Toast.Open({content:"i18n:hmaker-edit-form-new-field-e1",type:"error",vars:{val:n},position:"center",duration:5e3});case 30:return e.abrupt("return",e.sent);case 31:t.addFieldOrGroup({name:s,type:_.isArray(s)?"Object":"String",comType:"ti-input"});case 32:case"end":return e.stop()}},e,null,[[8,20,23,26]])}))()},addNewGroup:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ti.Prompt("i18n:hmaker-edit-form-new-group-tip");case 2:if(n=e.sent,n=_.trim(n)){e.next=6;break}return e.abrupt("return");case 6:if(!t.existsName(n)){e.next=10;break}return e.next=9,Ti.Toast.Open({content:"i18n:hmaker-edit-form-new-field-e1",type:"error",vars:{val:n},position:"center",duration:5e3});case 9:return e.abrupt("return",e.sent);case 10:t.addFieldOrGroup({type:"Group",title:n,fields:[]});case 11:case"end":return e.stop()}},e)}))()},removeSelectedFieldOrGroup:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o,s,c,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getMyCurrent()){e.next=3;break}return e.abrupt("return",Ti.Toast.Open("i18n:hmaker-edit-form-nil-field","warn"));case 3:if(!n.group||n.field){e.next=16;break}if(a=!0,_.isEmpty(n.group.fields)){e.next=9;break}return e.next=8,Ti.Confirm("i18n:hmaker-edit-form-del-group-confirm",{closer:!0,textYes:"i18n:hmaker-edit-form-del-group-all",textNo:"i18n:hmaker-edit-form-del-group-only"});case 8:a=e.sent;case 9:if(!_.isUndefined(a)){e.next=11;break}return e.abrupt("return");case 11:r=_.first(n.index),i=_.filter(t.value,function(t,e){return e!=r}),!1===a&&(_.isEmpty(n.group.fields)||(o=Ti.Util).insertToArray.apply(o,[i,r].concat(_toConsumableArray(n.group.fields)))),e.next=17;break;case 16:n.group&&n.field?(i=_.cloneDeep(t.value),s=_.cloneDeep(n.group),c=_.first(n.index),l=_.last(n.index),s.fields=_.filter(s.fields,function(t,e){return e!=l}),i[c]=s):(u=_.first(n.index),i=_.filter(t.value,function(t,e){return e!=u}));case 17:t.selectNextIdByIndex(n.index,i),t.$notify("change",i);case 19:case"end":return e.stop()}},e)}))()},moveSelectedFieldsUp:function(){var t=_.cloneDeep(this.value),e=this.getMyCurrent(t);if(!e)return Ti.Toast.Open("i18n:hmaker-edit-form-nil-field","warn");var n=_.first(e.index);if(e.group&&e.field){var i=_.last(e.index);0==i?(_.remove(e.group.fields,function(t,e){return e==i}),Ti.Util.insertToArray(t,n,e.field),this.myCurrentId=_.last(e.path)):(e.group.fields[i]=e.group.fields[i-1],e.group.fields[i-1]=e.field)}else if(n>0){var a=t[n-1];this.isGroup(a)&&e.field&&this.$tree.isOpened(a.title)?(_.remove(t,function(t,e){return e==n}),_.isArray(a.fields)?a.fields.push(e.field):a.fields=[e.field],this.myCurrentId=[a.title,_.last(e.path)].join("/")):(t[n]=t[n-1],t[n-1]=e.field||e.group)}this.$notify("change",t)},moveSelectedFieldsDown:function(){var t=_.cloneDeep(this.value),e=this.getMyCurrent(t);if(!e)return Ti.Toast.Open("i18n:hmaker-edit-form-nil-field","warn");var n=_.first(e.index);if(e.group&&e.field){var i=_.last(e.index);i>=e.group.fields.length-1?(_.remove(e.group.fields,function(t,e){return e==i}),Ti.Util.insertToArray(t,n+1,e.field),this.myCurrentId=_.last(e.path)):(e.group.fields[i]=e.group.fields[i+1],e.group.fields[i+1]=e.field)}else if(n<t.length-1){var a=t[n+1];this.isGroup(a)&&e.field&&this.$tree.isOpened(a.title)?(_.remove(t,function(t,e){return e==n}),_.isArray(a.fields)?Ti.Util.insertToArray(a.fields,0,e.field):a.fields=[e.field],this.myCurrentId=[a.title,_.last(e.path)].join("/")):(t[n]=t[n+1],t[n+1]=e.field||e.group)}this.$notify("change",t)}},mounted:function(){var t=Ti.Storage.local.getObject("vue-drop-me",null);if(t){var e=Date.now()-t.timeInMs;console.log({du:e}),e<1e3&&(this.myCurrentId=t.myCurrentId),Ti.Storage.local.remove("vue-drop-me")}else this.selectNextIdByIndex([0])},beforeDestroy:function(){Ti.Storage.local.setObject("vue-drop-me",{myCurrentId:this.myCurrentId,timeInMs:Date.now()})}};Ti.Preload("ti/com/hmaker/edit-com/form/fieldset/edit-form-fieldset.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-com/form/fieldset/_com.json",{name:"hmaker-edit-form-fieldset",globally:!0,template:"./edit-form-fieldset.html",mixins:["./edit-form-fieldset.mjs"],components:["@com:hmaker/edit-com/form/field","@com:hmaker/edit-com/form/group"]}),Ti.Preload("ti/com/hmaker/edit-com/form/group/edit-form-group.html",'<div class="hmaker-edit-form-group">\n  Group: {{value}}\n</div>'),function(){var t={props:{value:{type:Object,default:void 0}},computed:{},methods:{}};Ti.Preload("ti/com/hmaker/edit-com/form/group/edit-form-group.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-com/form/group/_com.json",{name:"hmaker-edit-form-group",globally:!0,template:"./edit-form-group.html",mixins:["./edit-form-group.mjs"]}),Ti.Preload("ti/com/hmaker/edit-com/form/_com.json",{name:"hmaker-edit-com-form",globally:!0,template:"./edit-com-form.html",mixins:["./edit-com-form.mjs"],components:["@com:hmaker/edit-com/form/fieldset"]}),Ti.Preload("ti/com/hmaker/edit-com/hmaker-edit-com.html",'<div class="hmaker-edit-com">\n  \x3c!--\n    Select Com Type\n  --\x3e\n  <div class="as-com-type">\n    <ti-combo-input \n      v-bind="ComTypeComboInput"\n      :value="ComType"\n      @change="OnComTypeChange"/>\n  </div>\n  \x3c!--\n    Edit Com Conf\n  --\x3e\n  <div class="as-com-conf"><div class="as-con">\n    \x3c!--\n      Show Com Editor\n    --\x3e\n    <component\n      v-if="hasEditCom"\n        class="ti-fill-parent"\n        :is="EditComType"\n        v-bind="EditComConf"\n        @change="OnComConfChange"/>\n    \x3c!--\n      Show Blank\n    --\x3e\n    <ti-loading \n      v-else\n        icon="fas-hand-pointer"\n        text="i18n:hmaker-com-conf-blank"/>\n  </div></div>\n</div>'),function(){var t={data:function(){return{myCom:null}},props:{value:{type:Object,default:function(){return{}}}},computed:{Dict:function(){return Wn.Dict.hMakerComponents()},ComTypeComboInput:function(){return{options:this.Dict,placeholder:"i18n:hmaker-com-type-blank",autoI18n:!0,mustInList:!0,autoCollapse:!0,dropDisplay:["<icon:im-plugin>","title|name"]}},hasEditCom:function(){return!!this.myCom},ComType:function(){return _.get(this.value,"comType")},ComConf:function(){return _.get(this.value,"comConf")},EditComType:function(){return _.get(this.myCom,"editComType")},EditComConf:function(){var t=_.get(this.myCom,"editComConf");return Ti.Util.explainObj(this.value,t)}},methods:{OnComTypeChange:function(t){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.Dict.getItem(t);case 2:e.myCom=n.sent,e.notifyChange({comType:t,comConf:e.ComConf});case 4:case"end":return n.stop()}},n)}))()},OnComConfChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.notifyChange({comType:this.ComType,comConf:t})},notifyChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$notify("change",t)},reloadMyCom:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_.isEmpty(t.value)){e.next=7;break}return n=t.value.comType,e.next=4,t.Dict.getItem(n);case 4:t.myCom=e.sent,e.next=8;break;case 7:t.myCom=null;case 8:case"end":return e.stop()}},e)}))()}},watch:{value:{handler:"reloadMyCom",immediate:!0}}};Ti.Preload("ti/com/hmaker/edit-com/hmaker-edit-com.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-com/_com.json",{name:"hmaker-edit-com",globally:!0,template:"./hmaker-edit-com.html",mixins:["./hmaker-edit-com.mjs"],components:["@com:hmaker/edit-com/form","@com:wn/combo/edit-com"]}),Ti.Preload("ti/com/hmaker/edit-site-actions/edit-site-actions.html",'<div class="hmaker-edit-site-actions">\n  Actions\n</div>'),function(){var t={inheritAttrs:!1,data:function(){return{}},props:{data:{type:Object,default:function(){return{}}}},computed:{theConfig:function(){}},methods:{}};Ti.Preload("ti/com/hmaker/edit-site-actions/edit-site-actions.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-site-actions/_com.json",{name:"hmaker-edit-site-actions",globally:!0,template:"./edit-site-actions.html",mixins:["./edit-site-actions.mjs"]}),Ti.Preload("ti/com/hmaker/edit-site-apis/edit-site-apis.html",'<div class="hmaker-edit-site-apis">\n  Apis\n</div>'),function(){var t={inheritAttrs:!1,data:function(){return{}},props:{data:{type:Object,default:function(){return{}}}},computed:{theConfig:function(){}},methods:{}};Ti.Preload("ti/com/hmaker/edit-site-apis/edit-site-apis.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-site-apis/_com.json",{name:"hmaker-edit-site-apis",globally:!0,template:"./edit-site-apis.html",mixins:["./edit-site-apis.mjs"]}),Ti.Preload("ti/com/hmaker/edit-site-blocks/edit-site-blocks.html",'<div class="hmaker-edit-site-blocks">\n  Blocks\n</div>'),function(){var t={inheritAttrs:!1,data:function(){return{}},props:{data:{type:Object,default:function(){return{}}}},computed:{theConfig:function(){}},methods:{}};Ti.Preload("ti/com/hmaker/edit-site-blocks/edit-site-blocks.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-site-blocks/_com.json",{name:"hmaker-edit-site-blocks",globally:!0,template:"./edit-site-blocks.html",mixins:["./edit-site-blocks.mjs"]}),Ti.Preload("ti/com/hmaker/edit-site-general/edit-site-general.html",'<ti-form class="hmaker-edit-site-general"\n  :fields="TheFields"\n  :data="data"/>'),function(){var t={inheritAttrs:!1,data:function(){return{}},props:{data:{type:Object,default:function(){return{}}}},computed:{TheFields:function(){return[{title:"i18n:hmaker-site-k-domain",name:"domain"},{title:"i18n:hmaker-site-k-apiBase",name:"apiBase"},{title:"i18n:hmaker-site-k-captcha",name:"captcha"},{title:"i18n:hmaker-site-k-base",name:"base"},{title:"i18n:hmaker-site-k-entry",name:"entry"}]}},methods:{}};Ti.Preload("ti/com/hmaker/edit-site-general/edit-site-general.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-site-general/_com.json",{name:"hmaker-edit-site-general",globally:!0,template:"./edit-site-general.html",mixins:["./edit-site-general.mjs"]}),Ti.Preload("ti/com/hmaker/edit-site-nav/edit-site-nav.html",'<div class="hmaker-edit-site-nav">\n  \x3c!--\n    Nav Table\n  --\x3e\n  <div class="as-table ti-fill-parent">\n    <ti-table class="ti-fill-parent"\n      :data="TableData"\n      :fields="TableFields"\n      :selectable="true"\n      :checkable="true"\n      :multi="true"\n      :current-id="myCurrentId"\n      :checked-ids="myCheckedIds"\n      @select="OnRowSelected"/>\n  </div>\n  \x3c!--\n    Nav Form\n  --\x3e\n  <div class="as-form">\n    <ti-form\n      class="ti-fill-parent"\n      :fields="FormFields"\n      :blank-as="FormBlankAs"\n      :data="FormData"\n      @change="OnFormChanged"/>\n  </div>\n</div>'),function(){var t={data:function(){return{myCurrentIndex:-1,myCurrentId:null,myCheckedIds:{},myActionStatus:{remove:!1,moveUp:!1,moveDown:!1}}},props:{data:{type:Array,default:function(){return[]}}},computed:{TableData:function(){var t=[];return _.forEach(this.data,function(e,n){t.push(_.assign({id:"N".concat(n)},e))}),t},TableLastIndex:function(){return this.TableData.length-1},TableFields:function(){return[{title:"i18n:hmaker-nav-k-display",display:[{key:"icon",comType:"ti-icon"},"title"],width:-150},{title:"i18n:hmaker-nav-k-type",name:"type",width:-100,display:[{comType:"ti-icon",transformer:{name:"toStr",args:{page:"zmdi-file",href:"zmdi-link",dispatch:"zmdi-flash-auto"}}},{transformer:{name:"toStr",args:{page:"i18n:hmaker-nav-tp-page",href:"i18n:hmaker-nav-tp-href",dispatch:"i18n:hmaker-nav-tp-dispatch"}}}]},{title:"i18n:hmaker-nav-k-value",display:"value"}]},FormBlankAs:function(){return{icon:"zmdi-long-arrow-return zmdi-hc-rotate-90",text:"i18n:hmaker-nav-blank-item"}},FormFields:function(){return[{title:"i18n:hmaker-nav-k-title",name:"title",comType:"ti-input"},{title:"i18n:hmaker-nav-k-icon",name:"icon",comType:"ti-input-icon"},{title:"i18n:hmaker-nav-k-type",name:"type",comType:"ti-switcher",comConf:{options:[{icon:"zmdi-file",text:"i18n:hmaker-nav-tp-page",value:"page"},{icon:"zmdi-link",text:"i18n:hmaker-nav-tp-href",value:"href"},{icon:"zmdi-flash-auto",text:"i18n:hmaker-nav-tp-dispatch",value:"dispatch"}]}},{title:"i18n:hmaker-nav-k-value",name:"value",comType:"ti-input"}]},FormData:function(){if(this.myCurrentIndex>=0)return this.TableData[this.myCurrentIndex]}},methods:{OnRowSelected:function(t){var e=t.currentId,n=t.checkedIds,i=t.currentIndex;this.myCurrentIndex=i,this.myCurrentId=e,this.myCheckedIds=n,_.assign(this.myActionStatus,{moveUp:i>0,moveDown:i>=0&&i<this.TableLastIndex,remove:i>=0})},OnFormChanged:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.name,n=t.value;if(this.myCurrentIndex>=0){var i=_.cloneDeep(this.data);i[this.myCurrentIndex][e]=n,this.notifyChange(i)}},updateParentActionMenu:function(){this.$notify("actions:update",{data:[{key:"create",text:"i18n:add-item",type:"action",icon:"zmdi-plus",action:"$parent:callChild(createNewOne)"},{type:"line"},{key:"remove",type:"action",icon:"zmdi-delete",action:"$parent:callChild(removeChecked)",enableBy:"remove"},{type:"line"},{key:"moveUp",type:"action",icon:"zmdi-long-arrow-up",action:"$parent:callChild(moveUp)",enableBy:"moveUp"},{key:"moveDown",type:"action",icon:"zmdi-long-arrow-down",action:"$parent:callChild(moveDown)",enableBy:"moveDown"}],status:this.myActionStatus})},notifyChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[];_.forEach(t,function(t){e.push(_.pick(t,"icon","title","type","value"))}),this.$notify("change",e)},__recover_selected:function(t,e){for(var n=this,i={},a=0;a<e;a++)i["N".concat(t+a)]=!0;console.log(i),this.$nextTick(function(){n.OnRowSelected({currentId:"N".concat(t),currentIndex:t,checkedIds:i})})},moveUp:function(){var t=this,e=_.cloneDeep(this.TableData),n=_.remove(e,function(e){var n=e.id;return t.myCheckedIds[n]});if(!_.isEmpty(n)){var i=1*_.first(n).id.substring(1),a=Math.max(0,i-1);if(a>=0){var r;(r=Ti.Util).insertToArray.apply(r,[e,a].concat(_toConsumableArray(n))),this.notifyChange(e),this.__recover_selected(a,n.length)}}},moveDown:function(){var t=this,e=_.cloneDeep(this.TableData),n=_.remove(e,function(e){var n=e.id;return t.myCheckedIds[n]});if(!_.isEmpty(n)){var i=1*_.first(n).id.substring(1)+1;if(i<=this.TableData.length-n.length){var a;(a=Ti.Util).insertToArray.apply(a,[e,i].concat(_toConsumableArray(n))),this.notifyChange(e),this.__recover_selected(i,n.length)}}},removeChecked:function(){var t=this,e=_.filter(this.TableData,function(e){var n=e.id;return!t.myCheckedIds[n]});this.notifyChange(e),this.myCurrentIndex=-1,this.myCurrentId=null,this.myCheckedIds={}},createNewOne:function(){var t=_.cloneDeep(this.TableData);Ti.Util.insertToArray(t,this.myCurrentIndex,{title:Ti.I18n.get("new-item"),type:"page"}),console.log(t),this.notifyChange(t)}},mounted:function(){this.updateParentActionMenu()}};Ti.Preload("ti/com/hmaker/edit-site-nav/edit-site-nav.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-site-nav/_com.json",{name:"hmaker-edit-site-nav",globally:!0,template:"./edit-site-nav.html",mixins:["./edit-site-nav.mjs"]}),Ti.Preload("ti/com/hmaker/edit-site-router/edit-site-router.html",'<div class="hmaker-edit-site-router">\n  Routers\n</div>'),function(){var t={inheritAttrs:!1,data:function(){return{}},props:{data:{type:Object,default:function(){return{}}}},computed:{theConfig:function(){}},methods:{}};Ti.Preload("ti/com/hmaker/edit-site-router/edit-site-router.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-site-router/_com.json",{name:"hmaker-edit-site-router",globally:!0,template:"./edit-site-router.html",mixins:["./edit-site-router.mjs"]}),Ti.Preload("ti/com/hmaker/edit-site-schema/edit-site-schema.html",'<div class="hmaker-edit-site-schema">\n  SCHEMA\n</div>'),function(){var t={inheritAttrs:!1,data:function(){return{}},props:{data:{type:Object,default:function(){return{}}}},computed:{theConfig:function(){}},methods:{}};Ti.Preload("ti/com/hmaker/edit-site-schema/edit-site-schema.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-site-schema/_com.json",{name:"hmaker-edit-site-schema",globally:!0,template:"./edit-site-schema.html",mixins:["./edit-site-schema.mjs"]}),Ti.Preload("ti/com/hmaker/edit-site-utils/edit-site-utils.html",'<div class="hmaker-edit-site-utils">\n  Utils\n</div>'),function(){var t={inheritAttrs:!1,data:function(){return{}},props:{data:{type:Object,default:function(){return{}}}},computed:{theConfig:function(){}},methods:{}};Ti.Preload("ti/com/hmaker/edit-site-utils/edit-site-utils.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-site-utils/_com.json",{name:"hmaker-edit-site-utils",globally:!0,template:"./edit-site-utils.html",mixins:["./edit-site-utils.mjs"]}),Ti.Preload("ti/com/hmaker/site-current-view/com/current-view-con/current-view-con.html",'<div class="current-view-con">\n  <component :is="comType"\n    class="ti-cover-parent"\n    v-bind="comConf"/>\n</div>'),function(){var t={inheritAttrs:!1,props:{comType:{type:String,default:"ti-loading"},comConf:{type:Object,default:function(){return{}}}}};Ti.Preload("ti/com/hmaker/site-current-view/com/current-view-con/current-view-con.mjs",t)}(),Ti.Preload("ti/com/hmaker/site-current-view/com/current-view-con/_com.json",{name:"current-view-con",globally:!1,template:"./current-view-con.html",mixins:["./current-view-con.mjs"]}),Ti.Preload("ti/com/hmaker/site-current-view/site-current-view.html",'<div class="site-current-view"\n  :class="topClass">\n  \x3c!--\n    Title\n  --\x3e\n  <div class="current-view-title">\n    \x3c!-- For Site --\x3e\n    <div class="as-name">\n      <ti-icon \n        class="as-icon"\n        :value="theTitleIcon"/>\n      <span\n        class="as-text">{{theTitleText|i18n}}</span>\n    </div>\n    \x3c!-- Crumb --\x3e\n    <div class="as-crumb"></div>\n    \x3c!-- Actions --\x3e\n    <div class="as-actions">\n      <ti-menu\n        v-if="theCurrentAction"\n          :data="theCurrentAction"\n          :status="status"/>\n    </div>\n  </div>\n  \x3c!--\n    Main Area\n  --\x3e\n  <current-view-con\n    class="ti-fill-parent"\n    :com-type="theCurrentView.comType"\n    :com-conf="theCurrentView.comConf"/>\n</div>'),function(){var t={inheritAttrs:!1,props:{home:{type:Object,default:null},tree:{type:Object,default:function(){return{}}},currentMeta:{type:Object,default:null},currentContent:{type:String,default:null},currentData:{type:Object,default:null},mapping:{type:Object,default:function(){return{}}},views:{type:Object,default:function(){return{}}},status:{type:Object,default:function(){return{}}}},computed:{topClass:function(){return{"is-changed":this.status.changed}},theViewsMapping:function(){return new e(this.mapping||{})},hasCurrent:function(){return this.currentMeta},theTitleIcon:function(){return Wn.Util.getIconObj(this.currentMeta||this.home)},theTitleText:function(){return Wn.Util.getObjDisplayName(this.currentMeta||this.home)},theCurrentView:function(){var t={comType:"ti-loading",comConf:{icon:"zmdi-alert-circle-o",text:"i18n:blank"}};if(this.hasCurrent){var e=this.home.ph,n=this.currentMeta.ph;t=this.theViewsMapping.getView({path:Ti.Util.getRelativePath(e,n),type:this.currentMeta.tp,mime:this.currentMeta.mime,race:this.currentMeta.race},t),_.isString(t)&&(t=this.views[t])}return Ti.Util.explainObj(this,t)},theCurrentAction:function(){return this.theCurrentView.actions}}},e=function(){function t(e){_classCallCheck(this,t),this.paths=new Ti.Mapping(e.paths),this.types=new Ti.Mapping(e.types),this.mimes=new Ti.Mapping(e.mimes),this.races=new Ti.Mapping(e.races)}return _createClass(t,[{key:"getView",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.path,n=t.type,i=t.mime,a=t.race,r=arguments.length>1?arguments[1]:void 0;return this.paths.get(e)||this.types.get(n)||this.mimes.get(i)||this.races.get(a)||r}}]),t}();Ti.Preload("ti/com/hmaker/site-current-view/site-current-view.mjs",t)}(),Ti.Preload("ti/com/hmaker/site-current-view/_com.json",{name:"hmaker-site-current-view",globally:!0,template:"./site-current-view.html",mixins:["./site-current-view.mjs"],components:["./com/current-view-con","@com:hmaker/site-state","@com:ti/text/raw","@com:ti/obj/json","@com:wn/obj/preview","@com:wn/adaptlist"]}),Ti.Preload("ti/com/hmaker/site-manager/hm-site-manager.html",'<ti-gui\n  class="hmaker-site-manager"\n  :class="className"\n  keep-shown-to="hmaker-site-manager"\n  :layout="theLayout"\n  :schema="theSchema"\n  :can-loading="true"\n  :loading-as="status.reloading"\n  @block:event="onBlockEvent"/>'),function(){var t={inheritAttrs:!1,props:{home:{type:Object,default:null},tree:{type:Object,default:function(){return{}}},current:{type:Object,default:function(){return{}}},config:{type:Object,default:function(){return{}}},status:{type:Object,default:function(){return{}}}},computed:{theConfig:function(){return this.config[this.viewportMode]||{}},theLayout:function(){return{type:"cols",border:!0,blocks:[{title:"i18n:hmaker-site-tree",size:280,name:"site-tree",body:"desktop-site-tree"},{name:"site-current",body:"desktop-site-current"}]}},theSchema:function(){return{"desktop-site-tree":{comType:"ti-tree",comConf:{data:this.tree.root,display:[{key:"rawData",type:"Object",transformer:"getIconObj",comType:"ti-icon"},"rawData.title","name"],blankAs:{icon:"zmdi-settings zmdi-hc-spin",text:"i18n:hmaker-site-tree-loading"},currentId:this.tree.currentId,showRoot:!1,defaultOpenDepth:1,extendFunctionSet:Wn.Util,openedNodePaths:this.tree.openedNodePaths}},"desktop-site-current":{comType:"hmaker-site-current-view",comConf:{home:this.home,tree:this.tree,currentMeta:this.current.meta,currentContent:this.current.content,currentData:this.current.data,mapping:this.theConfig.mapping,views:this.config.views,status:this.status}}}}},methods:{onBlockEvent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.block,n=t.name,i=t.args,a=_.concat(e||[],n||[]).join("."),r=_.first(i);console.log("hmaker-site-manager:onBlockEvent",a,r),_.isUndefined(r)||("site-tree.opened"==a&&Ti.App(this).dispatch("main/reloadTreeNode",{id:r.id}),"site-tree.opened-status:change"==a&&Ti.App(this).dispatch("main/setTreeOpenedNodePaths",r),"site-tree.select"==a&&Ti.App(this).dispatch("main/setTreeSelected",r.currentId),"site-current.open"==a&&Ti.App(this).dispatch("main/reloadCurrent",r.rawData),"site-current.change"==a&&Ti.App(this).dispatch("main/onCurrentChanged",r))},editCurrentObjMeta:function(){var t=this.current.meta||this.home;if(!t)return Ti.Toast.Open("i18n:nil-obj");Wn.EditObjMeta(t)}},mounted:function(){var t=this;Ti.Fuse.getOrCreate().add({key:"hmaker-site-manager",everythingOk:function(){return!t.status.changed},fail:function(){Ti.Toast.Open("i18n:wn-obj-nosaved","warn")}})},beforeDestroy:function(){Ti.Fuse.get().remove("hmaker-site-manager")}};Ti.Preload("ti/com/hmaker/site-manager/hm-site-manager.mjs",t)}(),Ti.Preload("ti/com/hmaker/site-manager/_com.json",{name:"hmaker-site-manager",globally:!0,i18n:"@i18n:hmaker",template:"./hm-site-manager.html",mixins:["./hm-site-manager.mjs"],components:["@com:hmaker/site-current-view"]}),Ti.Preload("ti/com/hmaker/site-state/com/site-node-editing/site-node-editing.html",'<div class="hmaker-site-node-editing">\n  <template v-if="hasNode">\n    \x3c!--\n      Heading\n    --\x3e\n    <div class="as-head">\n      \x3c!--Title Bar--\x3e\n      <div class="at-left">\n        <ti-icon :value="node.icon"/>\n        <span>{{node.title | i18n}}</span>\n      </div>\n      \x3c!--Action Menu--\x3e\n      <div \n        v-if="hasActionMenu"\n          class="at-right">\n          <ti-menu v-bind="myActionMenu"/>\n      </div>\n    </div>\n    \x3c!--\n      Editing\n    --\x3e\n    <div class="as-edit">\n      <component class="ti-fill-parent"\n        :is="Com.comType"\n        v-bind="Com.comConf"\n        :on-init="OnChildInit"\n        @change="OnChange"\n        @actions:update="OnActionsUpdate"/>\n    </div>\n  </template>\n  \x3c!--\n    Blank\n  --\x3e\n  <template v-else>\n    <ti-loading\n      text="i18n:blank-to-edit"\n      icon="zmdi-arrow-left"/>\n  </template>\n</div>'),function(){var t={inheritAttrs:!1,data:function(){return{myActionMenu:null}},props:{path:{type:String,default:null},node:{type:Object,default:function(){return{}}}},computed:{hasNode:function(){return this.path&&!_.isEmpty(this.node)},hasActionMenu:function(){return!_.isEmpty(this.myActionMenu)},Com:function(){return"general"==this.path?{comType:"hmaker-edit-site-general",comConf:{data:this.node.data}}:"nav"==this.path?{comType:"hmaker-edit-site-nav",comConf:{data:this.node.data}}:{comType:"ti-form",comConf:{fields:[{name:"path"},{name:"node",comType:"ti-input-text",comConf:{readonly:!0,height:"7rem"}}],data:{path:this.path,node:JSON.stringify(this.node,null,"  ")}}}}},methods:{OnChange:function(t){this.$notify("change",{path:this.path,node:this.node,payload:t})},OnActionsUpdate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.myActionMenu=t},OnChildInit:function(t){this.$myChildCom=t},callChild:function(t){console.log(t),this.$myChildCom&&this.$myChildCom[t]()}},watch:{path:function(){this.myActionMenu=null}}};Ti.Preload("ti/com/hmaker/site-state/com/site-node-editing/site-node-editing.mjs",t)}(),Ti.Preload("ti/com/hmaker/site-state/com/site-node-editing/_com.json",{name:"hmaker-site-node-editing",globally:!0,template:"./site-node-editing.html",mixins:["./site-node-editing.mjs"],components:["@com:hmaker/edit-site-general","@com:hmaker/edit-site-utils","@com:hmaker/edit-site-apis","@com:hmaker/edit-site-schema","@com:hmaker/edit-site-blocks","@com:hmaker/edit-site-nav","@com:hmaker/edit-site-router","@com:hmaker/edit-site-actions","@com:ti/form"]}),Ti.Preload("ti/com/hmaker/site-state/hm-site-state.html",'<ti-gui\n  class="hmaker-site-state ti-fill-parent"\n  keep-shown-to="hmaker-site-state"\n  :layout="theLayout"\n  :schema="theSchema"\n  @block:event="onBlockEvent"/>'),function(){var t={inheritAttrs:!1,data:function(){return{myCurrentPathId:null,myTreeOpenedStatus:{}}},props:{home:{type:Object,default:function(){return{}}},content:{type:String,default:null}},computed:{theData:function(){var t=_.trim(this.content);return t?JSON.parse(t):{}},theTreeDisplay:function(){return["<icon>","title","tip"]},theTreeData:function(){return{name:"ROOT",children:[this._general,this._nav,this._apis,this._schema,this._blocks,this._router,this._actions,this._utils]}},_general:function(){return{icon:"fas-sliders-h",name:"general",title:"i18n:hmaker-site-state-general",data:_.pick(this.theData,["domain","apiBase","captcha","base","entry"])}},_utils:function(){return{icon:"zmdi-card-sd",name:"utils",title:"i18n:hmaker-site-state-utils",data:_.assign({},this.theData.utils)}},_apis:function(){var t=[];return _.forEach(this.theData.apis,function(e,n){t.push({icon:"zmdi-input-power",name:n,title:e.title||n,tip:n,data:e})}),{icon:"zmdi-input-composite",name:"apis",title:"i18n:hmaker-site-state-apis",children:t}},_schema:function(){var t=[];return _.forEach(this.theData.schema,function(e,n){t.push({icon:"fas-puzzle-piece",name:n,title:e.title||n,data:e})}),{icon:"fas-pencil-ruler",name:"schema",title:"i18n:hmaker-site-state-schema",children:t}},_blocks:function(){var t=[];return _.forEach(this.theData.blocks,function(e,n){var i=[];_.forEach(e,function(t,e){i.push(function t(e,n){if(_.isString(e))return{icon:"fas-external-link-alt",name:n,title:e,data:e};if(e.body){var i=_.isString(e.body)?e.body:e.body.comType||"ti-label",a=_.isNumber(n)?"[".concat(n,"]"):'"'.concat(n,'"');return{icon:"fas-puzzle-piece",name:n,title:"".concat(a,":<").concat(i,">"),data:e}}var r=[];_.forEach(e.blocks,function(e,n){r.push(t(e,n))});return{icon:"im-layer",name:n,title:[_.isNumber(n)?"[".concat(n,"]"):'"'.concat(n,'"'),Ti.I18n.get("hmaker-layout-".concat(e.type||"cols"))].join(":"),data:e,children:r}}(t,e))}),t.push({icon:{desktop:"zmdi-desktop-windows",tablet:"zmdi-tablet",phone:"zmdi-smartphone-iphone"}[n],name:n,title:"i18n:".concat(n),data:e,children:i})}),{icon:"far-object-group",name:"blocks",title:"i18n:hmaker-site-state-blocks",children:t}},_nav:function(){return{icon:"im-sitemap",name:"nav",title:"i18n:hmaker-site-state-nav",data:this.theData.nav||[]}},_router:function(){var t=[];return _.forEach(this.theData.router,function(e,n){t.push({icon:"im-share",name:n,title:e.match,data:e})}),{icon:"zmdi-router",name:"router",title:"i18n:hmaker-site-state-router",children:t}},_actions:function(){var t=[];return _.forEach(this.theData.actions,function(e,n){t.push({icon:"im-flash",name:n,title:n,data:e})}),{icon:"im-rocket",name:"actions",title:"i18n:hmaker-site-state-actions",children:t}},theLayout:function(){return{type:"tabs",tabAt:"bottom-left",blocks:[{title:"i18n:structure",type:"cols",border:!0,blocks:[{size:.372,name:"tree",body:"desktopStructureTree"},{name:"edit",body:"desktopStructureEdit"}]},{title:"i18n:source-code",name:"source",body:"desktopSourceCode"}]}},theSchema:function(){return{desktopStructureTree:{comType:"ti-tree",comConf:{mainWidth:300,border:"cell",multi:!1,data:this.theTreeData,display:this.theTreeDisplay,autoOpen:!1,currentId:this.myCurrentPathId,defaultOpenDepth:0,keepOpenBy:"hm-site-state-".concat(this.home.id,"-opened"),keepCurrentBy:"hm-site-state-".concat(this.home.id,"-current"),showRoot:!1}},desktopStructureEdit:{comType:"hmaker-site-node-editing",comConf:{path:this.myCurrentPathId,node:this.theCurrentNode}},desktopSourceCode:{comType:"ti-text-raw",comConf:{showTitle:!1,content:this.content,ignoreKeyUp:!0}}}},theCurrentNode:function(){return this.myCurrentPathId?Ti.Trees.getNodeByPath(this.theTreeData,this.myCurrentPathId):null}},methods:{updateByPath:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.path,n=t.payload,i=_.cloneDeep(this.theData);_.set(i,e,n),Ti.App(this).dispatch("main/onCurrentChanged",i)},onBlockEvent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.block,n=t.name,i=t.args,a=_.concat(e||[],n||[]).join("."),r=_.first(i);console.log("hmaker-site-state:onBlockEvent",a,r),_.isUndefined(r)||("tree.select"==a?this.onSelected(r):"tree.opened-status:change"==a?this.onOpenedStatusChanged(r):"edit.change"==a?this.updateByPath(r):"source.change"==a&&Ti.App(this).dispatch("main/onCurrentChanged",r))},onSelected:function(){var t=arguments,e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=t.length>0&&void 0!==t[0]?t[0]:{},a=i.currentId,r=i.current,e.myCurrentPathId=a;case 2:case"end":return n.stop()}},n)}))()},onOpenedStatusChanged:function(t){this.myTreeOpenedStatus=t}}};Ti.Preload("ti/com/hmaker/site-state/hm-site-state.mjs",t)}(),Ti.Preload("ti/com/hmaker/site-state/_com.json",{name:"hmaker-site-state",globally:!0,template:"./hm-site-state.html",mixins:["./hm-site-state.mjs"],components:["./com/site-node-editing"]}),Ti.Preload("ti/com/net/aliyun/vod/manager/vod-manager.html",'<ti-gui\n  class="net-aliyun-vod-manager"\n  :class="TopClass"\n  :layout="GuiLayout"\n  :schema="GuiSchema"\n  :can-loading="true"\n  :loading-as="reloading"\n  @filter::change="OnFilterChange"\n  @sorter::change="OnSorterChange"\n  @list::select="OnListSelect"\n  @video::preview="OnVideoPreview"\n  @pager::change="OnPagerChange"/>'),function(){var t={data:function(){return{reloading:!1,list:[],pager:{},scrollToken:null,myCurrentId:null,myCurrentVideo:null,myFilter:{match:{}},mySort:{CreationTime:-1}}},props:{meta:{type:Object,default:function(){return{}}},fields:{type:String,default:"Title,CoverURL,Duration,CateName,Size,Description,RegionID"},filter:{type:Object,default:function(){return{comType:"ti-combo-filter",comConf:{placeholder:"i18n:net-flt-nil",form:{fields:[{title:"i18n:net-ct",name:"CreationTime",type:"Array",comType:"ti-input-daterange"},{title:"i18n:net-vod-duration",name:"Duration",comType:"ti-switcher",comConf:{autoSplitValue:!1,options:[{value:"[0, 600]",text:"i18n:net-vod-du-short"},{value:"(600, 4800]",text:"i18n:net-vod-du-tv"},{value:"(4800, )",text:"i18n:net-vod-du-long"}]}}]}}}}},sorter:{type:Object,default:function(){return{comType:"ti-combo-sorter",comConf:{options:[{value:"CreationTime",text:"i18n:net-ct"}]}}}},pageSize:{type:Number,default:20},multi:{type:Boolean,default:!0}},computed:{TopClass:function(){return this.getTopClass()},ConfName:function(){return _.get(this.meta,"vodConfigName")},CmdPrefix:function(){return this.ConfName?"aliyunvod ".concat(this.ConfName):"aliyunvod"},ThePageNumber:function(){return _.get(this.pager,"pn")||1},ThePageSize:function(){return _.get(this.pager,"pgsz")||this.pageSize},WallItemDisplay:function(){return{key:"..",comType:"ti-obj-thumb",comConf:function(t){return{id:t.videoId,title:t.title,preview:{type:"image",value:t.coverURL}}}}},GuiLayout:function(){return{type:"cols",border:!0,blocks:[{type:"rows",size:"61.8%",border:!0,blocks:[{type:"cols",size:".44rem",blocks:[{name:"filter",flex:"both",body:"pcFilter"},{name:"sorter",flex:"none",body:"pcSorter"}]},{name:"list",body:"pcList"},{name:"pager",size:40,body:"pcPager"}]},{icon:"zmdi-tv-alt-play",title:"i18n:video",name:"video",body:"pcVideo"}]}},GuiSchema:function(){return{pcFilter:{comType:this.filter.comType,comConf:_.assign({value:this.myFilter},this.filter.comConf)},pcSorter:{comType:this.sorter.comType,comConf:_.assign({value:this.mySort},this.sorter.comConf)},pcList:{comType:"ti-wall",comConf:{data:this.list,idBy:"videoId",multi:this.multi,display:this.WallItemDisplay}},pcPager:{comType:"ti-paging-jumper",comConf:{value:this.pager}},pcVideo:{comType:"net-aliyun-vod-video-info",comConf:{value:this.myCurrentVideo}}}}},methods:{OnFilterChange:function(t){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.myFilter=t,e.pager=_.assign({},e.pager,{pn:1}),n.next=4,e.reloadVideos();case 4:case"end":return n.stop()}},n)}))()},OnSorterChange:function(t){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.mySort=t,e.pager=_.assign({},e.pager,{pn:1}),n.next=4,e.reloadVideos();case 4:case"end":return n.stop()}},n)}))()},OnPagerChange:function(t){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.pager=_.assign({},e.pager,t),e.meta&&(i=_.get(t,"pgsz"),Ti.Util.isNil(i)||Ti.Storage.session.setObject(e.meta.id,{pgsz:i})),n.next=4,e.reloadVideos();case 4:case"end":return n.stop()}},n)}))()},OnListSelect:function(t){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.currentId,a=t.checkedIds,r=t.checked,e.myCurrentId=i,!i){n.next=9;break}return n.next=5,e.reloadVideoInfo(i);case 5:e.myCurrentVideo=n.sent,e.$notify("change",{currentId:e.myCurrentId,current:e.myCurrentVideo,checkedIds:a,checked:r}),n.next=11;break;case 9:e.myCurrentVideo=null,e.$notify("change",void 0);case 11:case"end":return n.stop()}},n)}))()},OnVideoPreview:function(){var t=arguments,e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:{},a=i.title,r=i.videoId,o=i.coverURL,n.next=3,e.requestPlayAuth(r);case 3:return s=n.sent,n.next=6,Ti.App.Open({icon:"zmdi-tv-alt-play",title:"Preview: ".concat(a),textOk:null,textCancel:"i18n:close",position:"top",width:"90%",height:"90%",comType:"NetAliyunVodVideoPlayer",comConf:{videoId:r,playAuth:s,coverUrl:o},components:"@com:net/aliyun/vod/video/player"});case 6:case"end":return n.stop()}},n)}))()},requestPlayAuth:function(t){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.reloading=!0,i=[e.CmdPrefix,"playauth",t,"-cqn"],n.next=4,Wn.Sys.exec2(i.join(" "),{as:"json"});case 4:return a=n.sent,e.reloading=!1,n.abrupt("return",a.playAuth);case 7:case"end":return n.stop()}},n)}))()},reloadVideoInfo:function(t){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.reloading=!0,i=[e.CmdPrefix,"video",t,"-cqn"],n.next=4,Wn.Sys.exec2(i.join(" "),{as:"json"});case 4:return a=n.sent,e.reloading=!1,n.abrupt("return",a);case 7:case"end":return n.stop()}},n)}))()},toAliyunTime:function(t){},toMatchStr:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return Ti.S.isBlank(t)||(/^[a-z0-9]{32}$/.test(t)?n.push("VideoId = '".concat(t,"'")):n.push("Title in ('".concat(t.replace(/'/g,""),"')"))),_.forEach(e,function(t,e){if(!Ti.Util.isNil(t))if(_.isString(t)&&/^[\[(].+[)\]]$/.test(t))n.push("".concat(e,"=").concat(t));else if(/time/i.test(e)){var i="yyyy-MM-dd'T'HH:mm:ss'Z'",a=Ti.Types.formatDateTime(t,i);1==(a=_.concat(a)).length&&a.push(a[0]);var r=Ti.Types.toDate(a[1]).getTime()+864e5;a[1]=Ti.Types.formatDateTime(r,i),n.push("".concat(e,"=['").concat(a[0],"', '").concat(a[1],"')"))}else if(_.isArray(t)){var o=_.map(t,function(t){return _.isString(t)?t.replace(/'/g,""):t});n.push("".concat(e," in (").concat(o.join(","),")"))}else _.isString(t)?n.push("".concat(e," in ('").concat(t.replace(/'/g,""),"')")):n.push("".concat(e," = ").concat(t))}),n.join(" and ")},reloadVideos:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.reloading=!0,(n=[t.CmdPrefix]).push("search","-fields","'".concat(t.fields,"'")),i=_.get(t.myFilter,"keyword"),a=_.get(t.myFilter,"match"),!_.isEmpty(a)||!Ti.Util.isNil(i))try{n.push("-match",'"'.concat(t.toMatchStr(i,a),'"'))}catch(t){console.error(t)}return r=[],_.forEach(t.mySort,function(t,e){r.push("".concat(e,":").concat(t>0?"ASC":"DESC"))}),_.isEmpty(r)||n.push("-sort ","".concat(r.join(" "))),n.push("-pn",t.ThePageNumber),n.push("-pgsz",t.ThePageSize),n.push("-as page -cqn"),e.next=14,Wn.Sys.exec2(n.join(" "),{as:"json"});case 14:o=e.sent,t.list=o.list,t.pager=o.pager,t.scrollToken=o.scrollToken,t.reloading=!1;case 19:case"end":return e.stop()}},e)}))()}},mounted:function(){if(this.meta){var t=Ti.Storage.session.getObject(this.meta.id);if(t){var e=_.get(t,"pgsz");this.pager.pgsz=e}}this.reloadVideos()}};Ti.Preload("ti/com/net/aliyun/vod/manager/vod-manager.mjs",t)}(),Ti.Preload("ti/com/net/aliyun/vod/manager/_com.json",{name:"net-aliyun-vod-manager",globally:!0,template:"./vod-manager.html",mixins:["./vod-manager.mjs"],components:["@com:ti/wall","@com:ti/combo/filter","@com:ti/combo/sorter","@com:ti/paging/jumper","@com:net/aliyun/vod/video/info"]}),Ti.Preload("ti/com/net/aliyun/vod/video/info/vod-video-info.html",'<div class="net-aliyun-vod-video-info"\n  :class="TopClass">\n  \x3c!--\n    Blank\n  --\x3e\n  <ti-loading\n    v-if="!hasVideo"\n      icon="fas-hand-point-left"\n      text="i18n:net-vod-video-nil"/>\n  \x3c!--\n    Show Content\n  --\x3e\n  <template v-else>\n    \x3c!--Preview--\x3e\n    <div class="as-preview">\n      <img \n        class="ti-fill-parent"\n        :src="VideoCoverURL"/>\n      <div class="as-btn" @click.left="OnClickPreview">\n        <i class="fas fa-play-circle"></i>\n      </div>\n    </div>\n    \x3c!--\n      Detail info\n    --\x3e\n    <div class="as-detail">\n      <ti-form\n        class="ti-cover-parent"\n        spacing="tiny"\n        :fields="FormFields"\n        :data="value"/>\n    </div>\n  </template>\n</div>'),function(){var t={props:{value:{type:Object,default:void 0}},computed:{TopClass:function(){return this.getTopClass()},hasVideo:function(){return!!this.value},VideoCoverURL:function(){return _.get(this.value,"coverURL")},FormFields:function(){return[{title:"VideoID",name:"videoId"},{title:"Title",name:"title"},{title:"CateName",name:"cateName"},{title:"Description",name:"description"},{title:"Duration",name:"duration"},{title:"RegionId",name:"regionId"},{title:"Size",name:"size"},{title:"Status",name:"status"},{title:"Tags",name:"tags"},{title:"AuditStatus",name:"auditStatus"},{title:"DownloadSwitch",name:"downloadSwitch"},{title:"PreprocessStatus",name:"preprocessStatus"},{title:"CreateTime",name:"createTime"},{title:"ModifyTime",name:"modifyTime"}]}},methods:{OnClickPreview:function(){this.$notify("preview",this.value)}}};Ti.Preload("ti/com/net/aliyun/vod/video/info/vod-video-info.mjs",t)}(),Ti.Preload("ti/com/net/aliyun/vod/video/info/_com.json",{name:"NetAliyunVodVideoInfo",globally:!0,template:"./vod-video-info.html",mixins:["./vod-video-info.mjs"],components:["@com:ti/form"]}),Ti.Preload("ti/com/net/aliyun/vod/video/player/vod-video-player.html",'<div class="net-vod-video-player"\n  :class="TopClass">\n  <div :id="PlayerID"></div>\n</div>'),function(){var t={props:{autoplay:{type:Boolean,default:!0},videoId:{type:String,default:void 0},coverUrl:{type:String,default:void 0},playAuth:{type:String,default:void 0},encryptType:{type:Number,default:void 0}},computed:{TopClass:function(){return this.getTopClass()},PlayerID:function(){var t=parseInt(1e5*Math.random());return"ALIPLAYER_".concat(t)}},methods:{initPlayer:function(){!this.$player&&this.playAuth&&this.videoId&&this.coverUrl&&(this.$player=new Aliplayer({id:this.PlayerID,width:"100%",height:"100%",autoplay:this.autoplay,vid:this.videoId,cover:this.coverUrl,encryptType:this.encryptType,playauth:this.playAuth}))}},watch:{},mounted:function(){this.initPlayer()}};Ti.Preload("ti/com/net/aliyun/vod/video/player/vod-video-player.mjs",t)}(),Ti.Preload("ti/com/net/aliyun/vod/video/player/_com.json",{name:"NetAliyunVodVideoPlayer",globally:!0,template:"./vod-video-player.html",mixins:["./vod-video-player.mjs"],components:[]}),Ti.Preload("ti/com/ti/actionbar/com/bar-item-action/bar-item-action.html",'<div class="bar-item-action">\n  <bar-item-info\n    v-bind="this"\n    @fire="OnFired"/>\n</div>'),function(){var t={inject:["$bar"],props:{name:{type:String,default:void 0},icon:{type:String,default:void 0},hideIcon:{type:Boolean,default:!1},text:{type:String,default:void 0},tip:{type:String,default:void 0},altDisplay:{type:[Object,Array],default:function(){return[]}},enabled:{type:[String,Array,Object],default:void 0},disabled:{type:[String,Array,Object],default:void 0},highlight:{type:[String,Array,Object],default:void 0},value:{type:[Boolean,String,Number,Array],default:!0},depth:{type:Number,default:0},status:{type:Object,default:function(){return{}}},action:{type:[String,Object,Function],default:void 0},notify:{type:[Boolean,String],default:!1},wait:{type:Number,default:0},shortcut:{type:String,default:void 0}},computed:{notifyName:function(){if(this.notify)return _.isString(this.notify)?this.notify:this.name}},methods:{OnFired:function(t){if(this.action){var e=Ti.App(this);Ti.Shortcut.genActionInvoking(this.action,{$com:this.$bar.$parent,argContext:e.$state(),wait:this.wait})()}this.notifyName&&this.$bar.notifyChange({name:this.notifyName,value:t})}},mounted:function(){var t=this;this.shortcut&&Ti.App(this).guardShortcut(this,this.shortcut,function(){return t.isEnabled})},destroyed:function(){this.shortcut&&Ti.App(this).pulloutShortcut(this)}};Ti.Preload("ti/com/ti/actionbar/com/bar-item-action/bar-item-action.mjs",t)}(),Ti.Preload("ti/com/ti/actionbar/com/bar-item-action/_com.json",{name:"bar-item-action",template:"./bar-item-action.html",mixins:["./bar-item-action.mjs"]}),Ti.Preload("ti/com/ti/actionbar/com/bar-item-group/bar-item-group.html",'<div class="bar-item-group"\n  :class="TopClass"\n  @mouseenter.stop="OnMouseEnter"\n  @mouseleave.stop="OnMouseLeave">\n  \x3c!--\n    Info\n  --\x3e\n  <bar-item-info\n    v-if="hasInfo"\n      v-bind="this"\n      :value="collapse"\n      :status="status"\n      @fire="OnFired"/>\n  \x3c!--\n    Group Children\n  --\x3e\n  <template v-if="showChildren">\n    <div v-if="isDepth1"\n      class="as-mask"\n      @click="doCollapse"></div>\n    <div ref="children"\n      v-if="showChildren"\n        class="as-children"\n        :style="ChildrenStyle"\n        @click.left="doCollapse">\n          <component \n            v-for="bi in items"\n              :key="bi.key"\n              :is="bi.comType"\n              v-bind="bi.comConf"\n              :depth="depth+1"\n              :items="bi.items"\n              :hide-icon="isChildrenWithoutIcon"\n              :status="status"/>\n    </div>\n  </template>\n</div>'),function(){var t={inject:["$bar"],provide:function(){return{depth:this.depth+1}},data:function(){return{collapse:!0,isDocked:!1,barItems:[]}},props:{name:{type:String,default:void 0},icon:{type:String,default:void 0},hideIcon:{type:Boolean,default:!1},text:{type:String,default:void 0},tip:{type:String,default:void 0},altDisplay:{type:[Object,Array],default:function(){return[]}},enabled:{type:[String,Array,Object],default:void 0},disabled:{type:[String,Array,Object],default:void 0},highlight:{type:[String,Array,Object],default:void 0},depth:{type:Number,default:0},status:{type:Object,default:function(){return{}}},items:{type:Array,default:function(){return[]}},autoExtend:{type:Boolean,default:!1}},computed:{TopClass:function(){return this.getTopClass({"is-collapse":this.collapse,"is-extended":!this.collapse},"is-depth-".concat(this.depth))},isDepth0:function(){return 0==this.depth},isDepth1:function(){return 1==this.depth},isDepthX:function(){return this.depth>1},hasInfo:function(){return this.icon||this.text},isChildrenWithoutIcon:function(){var t,e=_createForOfIteratorHelper(this.items);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(n.comConf&&n.comConf.icon)return!1}}catch(t){e.e(t)}finally{e.f()}return!0},showChildren:function(){return this.isDepth0||!this.collapse},ChildrenStyle:function(){if(!this.isDepth0&&!this.isDocked)return{visibility:"hidden"}}},methods:{OnMouseEnter:function(){this.isDepthX&&this.doExtend()},OnMouseLeave:function(){this.isDepthX&&this.doCollapse()},OnFired:function(t){t?this.doExtend():this.doCollapse()},doExtend:function(){this.collapse=!1},doCollapse:function(){this.collapse=!0,this.isDocked=!1},doDockChildren:function(){var t=this;this.$nextTick(function(){t.$refs.children&&t.depth>0&&(Ti.Dom.dockTo(t.$refs.children,t.$el,{mode:t.isDepthX?"V":"H",position:"fixed",space:t.isDepthX?{x:1}:{y:3}}),_.delay(function(){t.isDocked=!0},5))})}},watch:{collapse:"doDockChildren"},mounted:function(){this.doDockChildren(),this.$bar.allocGroup(this)},beforeDestroy:function(){this.$bar.freeGroup(this)}};Ti.Preload("ti/com/ti/actionbar/com/bar-item-group/bar-item-group.mjs",t)}(),Ti.Preload("ti/com/ti/actionbar/com/bar-item-group/_com.json",{name:"bar-item-group",template:"./bar-item-group.html",mixins:["./bar-item-group.mjs"]}),Ti.Preload("ti/com/ti/actionbar/com/bar-item-info/bar-item-info.html",'<div class="bar-item-info"\n  :class="TopClass"\n  @click.left="OnClickTop">\n  \x3c!--\n    Icon\n  --\x3e\n  <span\n    v-if="isShowIcon"\n      class="as-icon">\n      <ti-icon\n        v-if="hasIcon" \n          :value="CurrentDisplay.icon"/>\n  </span>\n  \x3c!--\n    Text\n  --\x3e\n  <span\n    v-if="CurrentDisplay.text"\n      class="as-text"\n        >{{CurrentDisplay.text|i18n}}</span>\n  \x3c!--\n    Shortcut\n  --\x3e\n  <span\n    v-if="isShowShortcut"\n      class="as-shortcut">{{shortcut}}</span>\n</div>'),function(){var t={inject:["$bar"],props:{name:{type:String,default:void 0},icon:{type:String,default:void 0},hideIcon:{type:Boolean,default:!1},text:{type:String,default:void 0},tip:{type:String,default:void 0},shortcut:{type:String,default:void 0},altDisplay:{type:[Object,Array],default:function(){return[]}},enabled:{type:[Boolean,String,Array,Object],default:void 0},disabled:{type:[Boolean,String,Array,Object],default:void 0},highlight:{type:[Boolean,String,Array,Object],default:void 0},value:{type:[Boolean,String,Number,Array],default:void 0},depth:{type:Number,default:0},status:{type:Object,default:function(){return{}}}},computed:{TopClass:function(){return this.getTopClass({"is-enabled":this.isEnabled,"is-disabled":this.isDisabled,"is-highlight":this.isHighlight,"is-top":1==this.depth,"is-sub":this.depth>1,"has-icon":!!this.icon,"no-icon":!this.icon,"show-icon":this.isShowIcon,"hide-icon":!this.isShowIcon},"is-depth-".concat(this.depth))},AltDisplay:function(){return _.isArray(this.altDisplay)?this.altDisplay:this.altDisplay?[this.altDisplay]:[]},isEnabled:function(){return Ti.Util.isNil(this.enabled)?!(!Ti.Util.isNil(this.disabled)&&this.isMatchStatus(this.disabled)):this.isMatchStatus(this.enabled)},isDisabled:function(){return!this.isEnabled},isHighlight:function(){return!Ti.Util.isNil(this.highlight)&&this.isMatchStatus(this.highlight)},isShowShortcut:function(){return this.shortcut&&this.depth>1},isShowIcon:function(){return!this.hideIcon||this.hasIcon},hasIcon:function(){return!!this.CurrentDisplay.icon},CurrentDisplay:function(){var t={icon:this.icon,text:this.text,tip:this.tip,value:this.value};if(!_.isEmpty(this.AltDisplay)){var e,n=_createForOfIteratorHelper(this.AltDisplay);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=i.match||this.name;if(this.isMatchStatus(a)){_.assign(t,_.pick(i,["icon","text","tip","value"]));break}}}catch(t){n.e(t)}finally{n.f()}}return t},TheValues:function(){var t=this.CurrentDisplay.value;return _.isBoolean(t)?[t,!t]:_.isArray(t)?t:[t]}},methods:{OnClickTop:function(){if(!this.isDisabled){var t=this.isHighlight?_.last(this.TheValues):_.first(this.TheValues);this.$emit("fire",t)}},isMatchStatus:function(t){if(_.isBoolean(t))return t;if(_.isString(t))return!!_.get(this.status,t);if(_.isArray(t)){var e,n=_createForOfIteratorHelper(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(!_.get(this.status,i))return!1}}catch(t){n.e(t)}finally{n.f()}return!0}return!!_.isPlainObject(t)&&(t.validate?Ti.Validate.match(this.status,t.validate):_.isMatch(this.status,t))}}};Ti.Preload("ti/com/ti/actionbar/com/bar-item-info/bar-item-info.mjs",t)}(),Ti.Preload("ti/com/ti/actionbar/com/bar-item-info/_com.json",{name:"bar-item-info",template:"./bar-item-info.html",mixins:["./bar-item-info.mjs"]}),Ti.Preload("ti/com/ti/actionbar/com/bar-item-line/bar-item-line.html",'<div class="bar-item-line"\n  :class="TopClass"></div>'),function(){var t={inject:["$bar"],props:{depth:{type:Number,default:0}},computed:{TopClass:function(){return this.getTopClass({"is-top":1==this.depth,"is-sub":this.depth>1})}}};Ti.Preload("ti/com/ti/actionbar/com/bar-item-line/bar-item-line.mjs",t)}(),Ti.Preload("ti/com/ti/actionbar/com/bar-item-line/_com.json",{name:"bar-item-line",template:"./bar-item-line.html",mixins:["./bar-item-line.mjs"]}),Ti.Preload("ti/com/ti/actionbar/ti-actionbar.html",'<div class="ti-actionbar"\n  :class="TopClass"\n  v-ti-activable>\n  <bar-item-group \n    name="Ti_ActionBar_Root_Group"\n    :items="BarItems"\n    :status="status"/>\n</div>'),function(){var t={provide:function(){return{$bar:this,depth:0}},data:function(){return{mySeq:0,myGroups:{}}},props:{items:{type:Array,default:function(){return[]}},align:{type:String,default:"left",validator:function(t){return/^(left|right|center)$/.test(t)}},status:{type:Object,default:function(){return{}}}},computed:{TopClass:function(){return this.getTopClass("align-".concat(this.align))},BarItems:function(){var t=this,e=[];return _.forEach(this.items,function(n){var i=t.evalBarItem(n);i&&e.push(i)}),e}},methods:{allocGroup:function(t){this.myGroups[t.name]=t},freeGroup:function(t){delete this.myGroups[t.name]},notifyChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.name,n=t.value;e&&this.$notify("change",{name:e,value:n})},evalBarItem:function(t){var e=this.getItemType(t),n=this.getItemKey(e),i={type:e,key:n,comType:"bar-item-".concat(e),comConf:_.defaults(_.omit(t,"items"),{name:n})};if("group"==e&&_.isArray(t.items)){i.items=[];var a,r=_createForOfIteratorHelper(t.items);try{for(r.s();!(a=r.n()).done;){var o=a.value,s=this.evalBarItem(o);i.items.push(s)}}catch(t){r.e(t)}finally{r.f()}}return i},getItemType:function(t){return t.type?_.toLower(t.type):_.isEmpty(t)?"line":_.isArray(t.items)?"group":"action"},getItemKey:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"BarItem";return"".concat(t,"-").concat(this.mySeq++)},collapseAllGroup:function(){_.forEach(this.myGroups,function(t){t.doCollapse()})},__ti_shortcut:function(t){var e=this;Ti.InvokeBy({ESCAPE:function(){return e.collapseAllGroup()}},t)}},mounted:function(){var t=this;Ti.Viewport.watch(this,{resize:function(){return t.collapseAllGroup()}})},beforeDestroy:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/actionbar/ti-actionbar.mjs",t)}(),Ti.Preload("ti/com/ti/actionbar/_com.json",{name:"ti-actionbar",globally:!0,template:"./ti-actionbar.html",mixins:["./ti-actionbar.mjs"],components:["./com/bar-item-action","./com/bar-item-group","./com/bar-item-line","./com/bar-item-info"]}),Ti.Preload("ti/com/ti/button/ti-button.html",'<div class="ti-button"\n  :class="topClass">\n  <ul>\n    <li v-for="it in items"\n      :key="it.name"\n      :class="it.buttonClass"\n      @click="onClickItem(it)">\n      \x3c!--\n        Icon\n      --\x3e\n      <ti-icon v-if="it.icon"\n        :value="it.icon"/>\n      \x3c!--\n        Text\n      --\x3e\n      <span v-if="it.text"\n        class="it-text">{{it.text|i18n}}</span>\n    </li>\n  </ul>\n</div>'),function(){var t={inheritAttrs:!1,props:{size:{type:String,default:"normal",validator:function(t){return/^(big|normal|small|tiny)$/.test(t)}},align:{type:String,default:"center"},setup:{type:[Array,Object],default:function(){return[]}}},computed:{topClass:function(){return Ti.Css.mergeClassName(["is-".concat(this.size),"at-".concat(this.align)],this.className)},items:function(){var t=[].concat(this.setup),e=[];return _.forEach(t,function(t,n){var i,a={};a.name=t.name||"item-".concat(n),a.eventName=t.eventName||a.name,a.payload=t.payload,a.icon=t.icon,a.text=t.text,a.disabled=t.disabled,a.buttonClass=(i={},_defineProperty(i,"as-do-".concat(a.name),!0),_defineProperty(i,"is-enabled",!t.disabled),_defineProperty(i,"is-disabled",!!t.disabled),_defineProperty(i,"is-invert-icon",!!t.invertIcon),i),e.push(a)}),e}},methods:{onClickItem:function(t){t.disabled||this.$notify(t.eventName,t.payload)}}};Ti.Preload("ti/com/ti/button/ti-button.mjs",t)}(),Ti.Preload("ti/com/ti/button/_com.json",{name:"ti-button",globally:!0,template:"./ti-button.html",mixins:["./ti-button.mjs"],components:[]}),Ti.Preload("ti/com/ti/calendar/ti-calendar.html",'<div class="ti-calendar">\n  \x3c!--\n    Heading\n  --\x3e\n  <div class="as-head">\n    \x3c!--\n      Switcher\n    --\x3e\n    <div class="as-switcher" :class="switcherClass">\n      <div class="as-title">\n        <ti-input-month\n          width="100%"\n          height=".36rem"\n          icon="far-calendar-alt"\n          :hide-border="true"\n          :value="theViewDate"\n          :format="theViewRangeText"\n          :editable="monthEditable"\n          :begin-year="beginYear"\n          :end-year="endYear"\n          @change="onMonthChanged"/>\n      </div>\n      <div class="go-btn to-prev-block" @click="gotoMatrix(-1)">\n        <ti-icon value="zmdi-chevron-left"/>\n      </div>\n      <div class="go-btn go-today" @click="gotoToday">\n        <span>{{\'today\'|i18n}}</span>\n      </div>\n      <div class="go-btn to-next-block" @click="gotoMatrix(1)">\n        <ti-icon value="zmdi-chevron-right"/>\n      </div>\n    </div>\n    \x3c!--\n      Change Mode\n      TODO maybe should support mode changing here\n    --\x3e\n    \n  </div>\n  \x3c!--\n    Day cells\n  --\x3e\n  <div class="as-matrix-table">\n    <div v-for="matrix in dateMatrixList"\n      class="as-matrix">\n      <table>\n        <thead>\n          <th v-for="wt in weekTitles">{{wt.title}}</th>\n        </thead>\n        <tbody>\n          <tr v-for="row in matrix">\n            <td v-for="cell in row" :class="cell.type">\n              <slot name="cell">\n                <span class="as-date-item"\n                  @click="onClickCell(cell)">{{cell.text}}</span>\n              </slot>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>'),function(){var t={data:function(){return{view_date:null}},props:{value:{type:[String,Number,Date,Array],default:null},range:{type:Boolean,default:!1},firstDayInWeek:{type:[Number,String],default:0},matrixMode:{type:String,default:"monthly"},matrixCount:{type:Number,default:1},monthEditable:{type:Boolean,default:!0},monthFormat:{type:String,default:"yyyy-MM-dd"},beginYear:{type:[Number,String],default:1970},endYear:{type:[Number,String],default:(new Date).getFullYear()+1}},watch:{value:function(t){if(t){var e,n=_slicedToArray([].concat(t),1)[0],i=Ti.Types.toDate(n).getTime();(e=_).inRange.apply(e,[i].concat(_toConsumableArray(this.theMatrixRangeInMs)))||(this.view_date=null)}}},computed:{switcherClass:function(){if(this.isMonthly&&this.matrixCount>1)return"sz-double"},isMonthly:function(){return"monthly"==this.matrixMode},isWeekly:function(){return"weekly"==this.matrixMode},today:function(){return new Date},todayName:function(){return Ti.Types.formatDate(this.today,"yyyy-MM-dd")},theDate:function(){return _.isArray(this.value)?this.value.length>0?Ti.Types.toDate(this.value[0]):null:Ti.Types.toDate(this.value,null)},theRangeInMs:function(){var t,e=new Date(this.theDate);t=_.isArray(this.value)&&this.value.length>1?Ti.Types.toDate(this.value[1]):new Date(e);var n=[e.getTime(),t.getTime()].sort();return e=Ti.DateTime.setTime(new Date(n[0])),t=Ti.DateTime.setDayLastTime(new Date(n[1])),[e.getTime(),t.getTime()]},theRangeInText:function(){return Ti.Types.formatDate(this.theRangeInMs,"yyyy-MM-dd")},theRangeBeginDate:function(){return new Date(this.theRangeInMs[0])},theRangeEndDate:function(){return new Date(this.theRangeInMs[1])},theMatrixRangeInMs:function(){var t=this.dateMatrixList[0][0][0],e=this.dateMatrixList.length-1,n=this.dateMatrixList[e].length-1,i=this.dateMatrixList[e][n].length-1,a=this.dateMatrixList[e][n][i],r=new Date(t.raw),o=new Date(a.raw);return Ti.DateTime.setTime(r),Ti.DateTime.setDayLastTime(o),[r.getTime(),o.getTime()]},theMatrixRange:function(){return[new Date(this.theMatrixRangeInMs[0]),new Date(this.theMatrixRangeInMs[1])]},theViewRange:function(){for(var t=this.dateMatrixList.length-1,e=this.dateMatrixList[t].length-1,n=this.dateMatrixList[t][e].length-1,i=this.dateMatrixList[t][e][n];"in-month"!=i.type&&n>0;)i=this.dateMatrixList[t][e][--n];var a=new Date(this.theViewDate),r=new Date(i.raw);return Ti.DateTime.setTime(a),Ti.DateTime.setDayLastTime(r),[a,r]},theViewRangeText:function(){var t=this.theViewRange[0];if(this.isMonthly&&this.matrixCount>1){var e=this.theViewRange[1],n=t.getFullYear(),i=t.getMonth(),a=e.getFullYear(),r=e.getMonth(),o=Ti.DateTime.getMonthAbbr(i),s=Ti.DateTime.getMonthAbbr(r),c={yy0:n,yy1:a,MM0:++i,MM1:++r,MA0:o,MA1:s,MT0:Ti.I18n.get(o),MT1:Ti.I18n.get(s)};if(n!=a)return Ti.I18n.getf("cal.m-range-beyond-years",c);if(i!=r)return Ti.I18n.getf("cal.m-range-beyond-months",c)}return Ti.Types.formatDate(t,this.monthFormat)},theDateName:function(){return Ti.Types.formatDate(this.theDate,"yyyy-MM-dd")},theViewDate:function(){return this.view_date||this.theDate||new Date},theViewYear:function(){return this.theViewDate.getFullYear()},theViewMonth:function(){return this.theViewDate.getMonth()},theViewMonthAbbr:function(){return Ti.DateTime.getMonthAbbr(this.theViewMonth)},weekTitles:function(){var t=this.firstDayInWeek;if(_.isNumber(t))t=_.clamp(t,0,6);else if(_.isString(t)){var e=_.lowerCase(t);t=Ti.DateTime.getWeekDayValue(e,0)}for(var n=[],i=0;i<7;i++)n.push({day:t,title:Ti.I18n.get(["cal","week",t])}),++t>=7&&(t=0);return n},weekFirstDayValue:function(){return _.isString(this.firstDayInWeek)?Ti.DateTime.getWeekDayValue(this.firstDayInWeek,0):_.clamp(this.firstDayInWeek,0,6)},dateMatrixList:function(){var t=new Date(this.theViewDate),e=[],n=this.theViewYear,i=this.theViewMonth;if(this.isMonthly)for(var a=0;a<this.matrixCount;a++){var r=this.createMatrix(t,n,i),o=r.matrix,s=r.lastDate;e.push(o),t=Ti.DateTime.moveDate(new Date(s),1),++i>=12&&(i=0,n++)}else{var c=this.createMatrix(t).matrix;e.push(c)}return e}},methods:{createMatrix:function(t,e,n){this.isMonthly&&t.setDate(1);for(var i=this.weekFirstDayValue;t.getDay()>i;)Ti.DateTime.moveDate(t,-1);for(;t.getDay()<i;)Ti.DateTime.moveDate(t,1);for(var a=0,r=[],o=null;;){for(var s=[],c=0;c<7;c++){var l=7*a+c,u=(o=Ti.DateTime.createDate(t,l)).getMonth(),d=o.getDate(),m=Ti.Types.formatDate(o,"yyyy-MM-dd"),h=!1;if(this.range){var p;h=(p=_).inRange.apply(p,[o.getTime()].concat(_toConsumableArray(this.theRangeInMs)))}else h=m==this.theDateName;var f={"is-prev":u<n,"is-next":u>n,"in-month":u==n,"is-today":this.todayName==m,"is-selected":h},y=""+d;if(1==d&&(this.isMonthly&&this.matrixCount>1||this.isWeekly)){var g=Ti.DateTime.getMonthAbbr(u);y=Ti.I18n.get("cal.abbr.".concat(g))}s.push({x:c,y:a,index:l,type:f,name:m,text:y,year:o.getFullYear(),month:u,day:o.getDay(),date:o.getDate(),raw:o})}if(a++,this.isWeekly){if(a>_.clamp(this.matrixCount,1,100))break}else{if(!this.isMonthly)break;if(s[0].year==e&&s[0].month>n||s[0].year>e)break}r.push(s)}return{matrix:r,lastDate:o}},gotoToday:function(){this.view_date=new Date},gotoMatrix:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.theViewDate,n=new Date(e.getFullYear(),e.getMonth(),e.getDate());if(this.isMonthly)Ti.DateTime.moveMonth(n,t);else{if(!this.isWeekly)return;Ti.DateTime.moveDate(n,7*t*this.matrixCount)}this.view_date=n},onMonthChanged:function(t){var e=Ti.Types.toDate(t);this.view_date=e},onClickCell:function(t){if(this.range)if(_.isArray(this.value))if(1==this.value.length){var e=[t.raw.getTime(),this.theDate.getTime()].sort(),n=Ti.Types.toDate(e[0]),i=Ti.Types.toDate(e[1]);this.$notify("change",[n,i])}else this.$notify("change",[t.raw]);else this.$notify("change",[t.raw]);else this.$notify("change",t.raw)}},mounted:function(){this.view_date=this.theDate||new Date}};Ti.Preload("ti/com/ti/calendar/ti-calendar.mjs",t)}(),Ti.Preload("ti/com/ti/calendar/_com.json",{name:"ti-calendar",globally:!0,template:"./ti-calendar.html",mixins:["./ti-calendar.mjs"],components:["@com:ti/input/month"]}),Ti.Preload("ti/com/ti/chart/g2/ti-chart-g2.html",'<div class="ti-chart ti-chart-g2">\n  <section ref="chart"\n    class="chart-main ti-fill-parent"></section>\n</div>'),function(){var t={inheritAttrs:!1,props:{data:{type:Array,default:function(){return[]}},padding:{type:[Number,Array,String],default:"auto"},setup:{type:Function,default:_.identity},autoSource:{type:Boolean,default:!0}},watch:{data:function(){this.debounceRedrawChart()}},computed:{},methods:{redrawChart:function(){if(_.isElement(this.$refs.chart)){if(this.__g2_chart){try{this.__g2_chart.destroy()}catch(t){}$(this.$refs.chart).empty()}this.__g2_chart=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.$refs,n=t.padding,i=t.data,a=t.setup,r=void 0===a?_.identity:a,o=t.autoSource,s=e.chart,c=G2.DomUtil.getWidth(s),l=G2.DomUtil.getHeight(s),u=new G2.Chart({container:s,padding:n,width:c,height:l});return o&&i&&!_.isEmpty(i)&&u.source(i),r(u,i,{width:c,height:l}),u.render(),u}(this)}},drawAll:function(){var t=this;this.$nextTick(function(){t.redrawChart()})}},mounted:function(){var t=this;this.drawAll(),this.debounceRedrawChart=_.debounce(function(){t.redrawChart()},500),this.debounceRedrawAll=_.debounce(function(){t.drawAll()},500),Ti.Viewport.watch(this,{resize:function(){var t=this.__g2_chart;if(t){this.$notify("before_resize");var e=this.$refs.chart,n=G2.DomUtil.getWidth(e),i=G2.DomUtil.getHeight(e);t.changeWidth(n),t.changeHeight(i)}}})},beforeDestroy:function(){this.__g2_chart&&this.__g2_chart.destroy(),Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/chart/g2/ti-chart-g2.mjs",t)}(),Ti.Preload("ti/com/ti/chart/g2/_com.json",{name:"ti-chart-g2",globally:!0,template:"./ti-chart-g2.html",mixins:["./ti-chart-g2.mjs"],components:[],deps:[]}),Ti.Preload("ti/com/ti/chart/simple/ti-chart-simple.html",'<div class="ti-chart ti-chart-simple">\n  <header \n    v-if="title" \n    @click="drawAll">{{title}}</header>\n  <aside v-if="aside"\n    :class="asideClass">\n    <slot name="aside">\n      <span v-if="unit">{{unit}}</span>\n    </slot>\n  </aside>\n  <section class="chart-main" ref="chart"></section>\n  <div v-if="hasSlider"\n    ref="slider"\n    class="chart-slider">\n  </div>\n</div>'),function(){var t={inheritAttrs:!1,props:{title:{type:String,default:null},data:{type:Array,default:function(){return[]}},type:{type:String,default:"interval"},axisX:{type:Object,default:function(){return{name:"name",title:"name"}}},axisY:{type:Object,default:function(){return{name:"value",title:"value"}}},aside:{type:String,default:"left"},unit:{type:String,default:null},padding:{type:Array,default:function(){return[20,20,50,50]}},minValue:{type:Number,default:0},maxValue:{type:Number,default:void 0},color:{type:String,default:null},animate:{type:Object,default:function(){return{delay:500,duration:1e3}}},valueInterval:{type:Number,default:100},coord:{type:[String,Object],default:null}},watch:{data:function(){this.debounceRedrawChart()}},computed:{asideClass:function(){return"at-".concat(this.aside||"none")},hasSlider:function(){return!1}},methods:{redrawChart:function(){this.__g2_chart&&(this.__g2_chart.destroy(),$(this.$refs.chart).empty()),this.__g2_chart=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.$refs,n=t.type,i=void 0===n?"interval":n,a=(t.unit,t.data),r=void 0===a?[]:a,o=t.axisX,s=t.axisY,c=t.color,l=t.animate,u=t.padding,d=t.minValue,m=t.maxValue,h=t.valueInterval,p=t.coord,f=e.chart,y=G2.DomUtil.getWidth(f),g=G2.DomUtil.getHeight(f);if(_.isUndefined(m)){m=0;var v,b=s.name,x=_createForOfIteratorHelper(r);try{for(x.s();!(v=x.n()).done;){var T=v.value;m=Math.max(m,T[b])}}catch(t){x.e(t)}finally{x.f()}}var w=new G2.Chart({container:f,padding:u,width:y,height:g});w.source(r),w.legend(!1);var k={label:{textStyle:{fill:o.color||"#888"}}};w.axis(o.name,k);var C={label:{autoRotate:!1,textStyle:{fill:s.color||"#888"}},grid:{type:"line",lineStyle:{stroke:"rgba(255,255,255,0.4)",lineWidth:.5,lineDash:!1}}};w.axis(s.name,C),p&&"transpose"==p&&w.coord().transpose();var I=s.title||s.name;w.scale(s.name,{alias:I,type:"linear",min:d,max:m,tickInterval:h});var S={line:function(){var t=w.line().position(j);return w.point().position(j).size(4).shape("circle").style({stroke:"#fff",lineWidth:1}),t},interval:function(){return w.interval().position(j)},intervalDodge:function(){return w.interval().position(j).adjust([{type:"dodge",marginRatio:1/32}])},intervalStack:function(t){return w.intervalStack().position(t)}}[i];S=S||function(t){return w.interval().position(t)};var j="".concat(o.name,"*").concat(s.name),O=S(j);return c&&O.color(c),l&&O.animate(l),w.render(),w}(this)},drawAll:function(){var t=this;this.$nextTick(function(){t.redrawChart()})}},mounted:function(){var t=this;this.drawAll(),this.debounceRedrawChart=_.debounce(function(){t.redrawChart()},500),this.debounceRedrawAll=_.debounce(function(){t.drawAll()},500)},beforeDestroy:function(){this.__g2_chart&&this.__g2_chart.destroy()}};Ti.Preload("ti/com/ti/chart/simple/ti-chart-simple.mjs",t)}(),Ti.Preload("ti/com/ti/chart/simple/_com.json",{name:"ti-chart-simple",globally:!0,template:"./ti-chart-simple.html",mixins:["./ti-chart-simple.mjs"],components:[],deps:[]}),Ti.Preload("ti/com/ti/color/ti-color.html",'<div class="ti-color" >\n  \x3c!--\n    Color Matrix Table\n  --\x3e\n  <div class="as-table">\n    <table>\n      <thead>\n        <tr>\n          <th v-for="color in colorGrays">\n            <span \n              :style="colorItemStyle(color)" \n              @click="onColorClicked(color)"></span>\n          </th>\n        </tr>\n        <tr>\n            <th v-for="color in colorMajors">\n              <span \n                :style="colorItemStyle(color)" \n                @click="onColorClicked(color)"></span>\n            </th>\n          </tr>\n      </thead>\n      \x3c!--Matrix--\x3e\n      <tbody>\n        <tr v-for="row in colorMatrix"\n          class="as-row">\n          <td v-for="color in row">\n            <span \n              :style="colorItemStyle(color)" \n              @click="onColorClicked(color)"></span>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div> \x3c!-- End Matrix--\x3e\n  \x3c!--\n    Color Input\n  --\x3e\n  <div class="as-input">\n    <div class="as-hex">\n        <input class="as-value" \n          spellcheck="false"\n          :value="theHex"\n          @change="onHexChanged"/>\n    </div>\n    <div class="as-alpha">\n      <ti-input-num \n        :value="theAlpha"\n        :max-value="100"\n        :min-value="0"\n        :step="10"\n        @change="onAlphaChanged"/>\n    </div>\n  </div>\n  \x3c!--\n    Color Preview\n  --\x3e\n  <div class="as-preview">\n    <span>{{theColorValue}}</span>\n  </div>\n</div>'),function(){var t={inheritAttrs:!1,props:{value:{type:[String,Number],default:null},majorColors:{type:Array,default:function(){return["#980000","#ff0000","#ff9900","#ffff00","#00ff00","#00ffff","#4a86e8","#0000ff","#9900ff","#ff00ff"]}},topColors:{type:Array,default:function(){return["#e6b8af","#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#c9daf8","#cfe2f3","#d9d2e9","#ead1dc"]}},bottomColors:{type:Array,default:function(){return["#5b0f00","#660000","#783f04","#7f6000","#274e13","#0c343d","#1c4587","#073763","#20124d","#4c1130"]}},middleDegree:{type:Number,default:5}},computed:{theColor:function(){return Ti.Types.toColor(this.value,null)},theHex:function(){if(this.theColor)return this.theColor.hex},theAlpha:function(){if(this.theColor)return Math.round(100*this.theColor.alpha)},theColorValue:function(){return this.theColor?this.theColor.rgba:Ti.I18n.get("empty")},colCount:function(){return this.topColors.length},colorGrays:function(){for(var t=[],e=255/this.colCount,n=0;n<this.colCount;n++){var i=Math.round((n+1)*e);t.push(Ti.Types.toColor(i))}return t},colorMajors:function(){var t,e=[],n=_createForOfIteratorHelper(this.majorColors);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.push(Ti.Types.toColor(i))}}catch(t){n.e(t)}finally{n.f()}return e},colorMatrix:function(){var t,e=[],n=_createForOfIteratorHelper(this.topColors);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.push(Ti.Types.toColor(i))}}catch(t){n.e(t)}finally{n.f()}var a,r=[],o=_createForOfIteratorHelper(this.bottomColors);try{for(o.s();!(a=o.n()).done;){var s=a.value;r.push(Ti.Types.toColor(s))}}catch(t){o.e(t)}finally{o.f()}for(var c=[e],l=0;l<this.middleDegree-1;l++){for(var u=[],d=0;d<this.colCount;d++){var m=e[d],h=r[d],p=(l+1)/this.middleDegree,f=m.between(h,p);f.adjustByHSL({s:.5}),u.push(f)}c.push(u)}return c.push(r),c}},methods:{colorItemStyle:function(t){return{"background-color":t.rgb}},onHexChanged:function(t){var e=_.trim(t.target.value);/^[0-9a-f]{3,6}$/i.test(e)&&(e="#"+e);var n=Ti.Types.toColor(e);this.$notify("change",n)},onAlphaChanged:function(t){var e=this.theColor?this.theColor.clone():Ti.Types.toColor("black");e.alpha=t/100,this.$notify("change",e)},onColorClicked:function(t){var e=t.clone();_.isNumber(this.theAlpha)&&(e.alpha=this.theAlpha/100),this.$notify("change",e)}}};Ti.Preload("ti/com/ti/color/ti-color.mjs",t)}(),Ti.Preload("ti/com/ti/color/_com.json",{name:"ti-color",globally:!0,template:"./ti-color.html",mixins:["./ti-color.mjs"]}),Ti.Preload("ti/com/ti/combo/box/ti-combo-box.html",'<div class="ti-combo-box" \n  :class="topClass"\n  :style="topStyle">\n  \x3c!--\n    Box: Component\n  --\x3e\n  <div class="as-box" ref="box" :style="theBoxStyle">\n    <slot name="box"><div>ComboBox</div></slot>\n  </div>\n  \x3c!--\n    Mask & Drop\n  --\x3e\n  <template v-if="\'extended\'==status">\n    \x3c!--Mask--\x3e\n    <div class="as-mask" @click.left="notifyCollapse()"></div>\n    \x3c!--Drop--\x3e\n    <div class="as-drop" ref="drop" :style="theDropStyle">\n      <slot name="drop"><div>ComboBox Dropdown</div></slot>\n    </div>\n  </template>\n</div>'),function(){var t={data:function(){return{box:{position:null,width:null,height:null,top:null,left:null},myDropDockReady:!1}},props:{width:{type:[Number,String],default:null},height:{type:[Number,String],default:null},dropFloat:{type:Boolean,default:!0},dropWidth:{type:[Number,String],default:"box"},dropHeight:{type:[Number,String],default:null},dropOverflow:{type:[String,Array],default:"auto",validator:function(t){if(Ti.Util.isNil(t))return!0;if(_.isString(t)&&(t=t.split(" ")),_.isArray(t)){if(t.length>2||0==t.length)return!1;var e,n=_createForOfIteratorHelper(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(!/^(auto|hidden|visible|scroll)$/.test(i))return!1}}catch(t){n.e(t)}finally{n.f()}return!0}return!1}},status:{type:String,default:"collapse",validator:function(t){return/^(collapse|extended)$/.test(t)}}},computed:{topClass:function(){return this.getTopClass("is-".concat(this.status))},topStyle:function(){return Ti.Css.toStyle({height:this.box.height})},theBoxStyle:function(){if(this.dropFloat)return Ti.Css.toStyle(this.box)},theDropStyle:function(){return Ti.Css.toStyle({overflow:this.dropOverflow,visibility:this.myDropDockReady?"visible":"hidden"})}},methods:{notifyCollapse:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$notify("collapse",{escaped:t})},dockDrop:function(){var t=this,e=this.$refs.drop,n=this.$refs.box;_.isElement(e)&&_.isElement(n)&&"extended"==this.status&&_.delay(function(){var i=Ti.Rects.createBy(n),a=Ti.Rects.createBy(e);_.assign(t.box,{position:"fixed"},i.raw());var r={};"box"==t.dropWidth?r.width=Math.max(i.width,a.width):Ti.Util.isNil(t.dropWidth)||(t.dropWidth<0?r.width=Math.max(i.width,Math.abs(t.dropWidth)):r.width=t.dropWidth),Ti.Util.isNil(t.dropHeight)||(r.height=t.dropHeight),Ti.Dom.setStyle(e,Ti.Css.toStyle(r)),Ti.Dom.dockTo(e,n,{space:{y:2}}),_.delay(function(){t.myDropDockReady=!0},1)},1)},reDockDrop:function(){var t=this;this.resetBoxStyle(),this.$nextTick(function(){t.dockDrop()})},resetBoxStyle:function(){_.assign(this.box,{position:null,top:null,left:null,width:this.width,height:this.height}),this.myDropDockReady=!1},__ti_shortcut:function(t){"ESCAPE"==t&&this.notifyCollapse(!0)}},watch:{status:function(t){var e=this;this.$nextTick(function(){"collapse"==t?e.resetBoxStyle():e.dockDrop()})}},mounted:function(){var t=this;this.dropOpened=this.autoOpenDrop,this.box.width=this.width,this.box.height=this.height,this.dockDrop(),Ti.Viewport.watch(this,{scroll:function(){return t.notifyCollapse()},resize:function(){return t.notifyCollapse()}})},beforeDestroy:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/combo/box/ti-combo-box.mjs",t)}(),Ti.Preload("ti/com/ti/combo/box/_com.json",{name:"ti-combo-box",globally:!0,template:"./ti-combo-box.html",mixins:["./ti-combo-box.mjs"]}),function(){var t={form:{type:Object,default:null},autoCollapse:{type:Boolean,default:!1},statusIcons:{type:Object,default:function(){return{collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"}}},autoFocusExtended:{type:Boolean,default:!0},spacing:{type:String,default:"tiny",validator:function(t){return/^(none|comfy|tiny)$/.test(t)}},dropWidth:{type:[Number,String],default:"box"},dropHeight:{type:[Number,String],default:null}};Ti.Preload("ti/com/ti/combo/filter/ti-combo-filter-props.mjs",t)}(),Ti.Preload("ti/com/ti/combo/filter/ti-combo-filter.html",'<div class="ti-combo-filter"\n  :class="TopClass">\n  \x3c!--\n    Marjor type\n  --\x3e\n\n  \x3c!--\n    Filter input box\n  --\x3e\n  <ti-combo-box\n    class="as-filter"\n    :drop-width="dropWidth"\n    :drop-height="dropHeight"\n    :status="myDropStatus"\n    @collapse="OnCollapse"\n    v-ti-activable>\n    \x3c!--\n      Box\n    --\x3e\n    <template v-slot:box>\n      <ti-input \n        v-bind="TheInputProps"\n\n        :value="InputValue"\n        :prefix-icon="ThePrefixIcon"\n        :suffix-icon="TheSuffixIcon"\n\n        @change="OnInputChanged"\n        @input:focus="OnInputFocused"\n        @prefix:icon="$notify(\'prefix:icon\')"\n        @suffix:icon="OnClickStatusIcon"/>\n    </template>\n    \x3c!--\n      Drop\n    --\x3e\n    <template v-slot:drop="slotProps">\n      <ti-form\n        v-bind="form"\n        :data="myFormData"\n        @change="OnFormChange"/>\n    </template>\n  </ti-combo-box>\n  \x3c!--\n    Sorter\n  --\x3e\n</div>'),function(){var t={data:function(){return{myDropStatus:"collapse",myFreeValue:null,myFormData:{}}},computed:{TopClass:function(){return this.getTopClass({"is-enabled":this.isFilterEnabled},"as-spacing-".concat(this.spacing))},isCollapse:function(){return"collapse"==this.myDropStatus},isExtended:function(){return"extended"==this.myDropStatus},hasForm:function(){return!_.isEmpty(this.form)},isFilterEnabled:function(){return!_.isEmpty(this.myFreeValue)||!_.isEmpty(this.myFormData)},TheInputProps:function(){return _.assign({},this,{autoI18n:this.autoI18n,placeholder:this.placeholder})},InputValue:function(){return this.myFreeValue},ThePrefixIcon:function(){return this.prefixIcon||"im-filter"},TheSuffixIcon:function(){if(this.hasForm)return this.statusIcons[this.myDropStatus]}},methods:{OnCollapse:function(){this.doCollapse()},OnInputChanged:function(t){this.myFreeValue=t,this.myDropStatus="collapse",Ti.Util.isNil(t)&&(this.myFormData={}),this.tryNotifyChanged()},OnInputFocused:function(){this.autoFocusExtended&&!this.isExtended&&this.doExtend()},OnClickStatusIcon:function(){this.isExtended?this.doCollapse():this.doExtend()},OnFormChange:function(t){this.myFormData=t},doExtend:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.hasForm&&!this.isExtended&&(this.myDropStatus="extended")},doCollapse:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).escaped,e=void 0!==t&&t;this.isCollapse||(e||this.tryNotifyChanged(),this.myDropStatus="collapse")},tryNotifyChanged:function(){var t=this.genValue();_.isEqual(t,this.value)||this.$notify("change",t)},genValue:function(){return{keyword:this.myFreeValue,match:this.myFormData}},evalMyValue:function(){var t=_.assign({},this.value);this.myFreeValue=t.keyword,this.myFormData=t.match},__ti_shortcut:function(t){if("ESCAPE"==t)return this.doCollapse({escaped:!0}),{prevent:!0,stop:!0,quit:!0};"ARROWDOWN"!=t?"ARROWUP"!=t||this.doCollapse():this.doExtend()}},watch:{value:{handler:"evalMyValue",immediate:!0}}};Ti.Preload("ti/com/ti/combo/filter/ti-combo-filter.mjs",t)}(),Ti.Preload("ti/com/ti/combo/filter/_com.json",{name:"ti-combo-filter",globally:!0,template:"./ti-combo-filter.html",props:["@com:ti/input/ti-input-props.mjs","@com:ti/combo/filter/ti-combo-filter-props.mjs"],mixins:"./ti-combo-filter.mjs",components:["@com:ti/form","@com:ti/combo/sorter"]}),function(){var t={options:{type:[String,Array,Function,Ti.Dict],default:function(){return[]}},valueBy:{type:[String,Function],default:void 0},textBy:{type:[String,Function],default:void 0},iconeBy:{type:[String,Function],default:void 0},childrenBy:{type:[String,Function],default:void 0},dropComType:{type:String,default:void 0},dropComConf:{type:Object,default:void 0},mustInList:{type:Boolean,default:!1},autoFocusExtended:{type:Boolean,default:!0},filter:{type:Boolean,default:!0},delay:{type:Number,default:800},statusIcons:{type:Object,default:function(){return{collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"}}},dropDisplay:{type:[Object,String,Array],default:void 0},dropItemBorder:{type:Boolean,default:!0},dropWidth:{type:[Number,String],default:"box"},dropHeight:{type:[Number,String],default:null}};Ti.Preload("ti/com/ti/combo/input/ti-combo-input-props.mjs",t)}(),Ti.Preload("ti/com/ti/combo/input/ti-combo-input.html",'<ti-combo-box \n  class="ti-combo-input"\n  :class="TopClass"\n  :drop-width="dropWidth"\n  :drop-height="dropHeight"\n  :status="myDropStatus"\n  @collapse="OnCollapse"\n  v-ti-activable>\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <ti-input \n      v-bind="TheInputProps"\n\n      :value="InputValue"\n      :prefix-icon="ThePrefixIcon"\n      :suffix-icon="TheSuffixIcon"\n\n      @change="OnInputChanged"\n      @inputing="OnInputInputing"\n      @input:focus="OnInputFocused"\n      @prefix:icon="$notify(\'prefix:icon\')"\n      @suffix:icon="OnClickStatusIcon"/>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop="slotProps">\n    <component \n      :is="DropComType"\n      class="ti-fill-parent"\n      blank-class="mid-tip"\n      v-bind="DropComConf"\n      :on-init="OnDropListInit"\n      @select="OnDropListSelected"/>\n  </template>\n</ti-combo-box>'),function(){var t={data:function(){return{myDropStatus:"collapse",myItem:null,myFreeValue:null,myFilterValue:null,myOptionsData:[],myCurrentId:null,myCheckedIds:{},myOldValue:void 0,loading:!1}},props:{canInput:{type:Boolean,default:!0},autoCollapse:{type:Boolean,default:!1}},computed:{isCollapse:function(){return"collapse"==this.myDropStatus},isExtended:function(){return"extended"==this.myDropStatus},TopClass:function(){return this.getTopClass()},TheInputProps:function(){return _.assign({},this,{readonly:!this.canInput||this.readonly,autoI18n:this.autoI18n,placeholder:this.placeholder})},InputValue:function(){return Ti.Util.isNil(this.myFilterValue)?this.myItem?this.Dict.getText(this.myItem)||this.Dict.getValue(this.myItem):this.myFreeValue:this.myFilterValue},GetValueBy:function(){var t=this;return function(e){return t.Dict.getValue(e)}},ThePrefixIcon:function(){if(this.loading)return"zmdi-settings zmdi-hc-spin";var t=this.prefixIcon;return this.myItem&&(t=this.Dict.getIcon(this.myItem)||t),t||"zmdi-minus"},TheSuffixIcon:function(){return this.statusIcons[this.myDropStatus]},DropComType:function(){return this.dropComType||"ti-list"},DropComConf:function(){return _.assign({display:this.dropDisplay||"text",border:this.dropItemBorder},this.dropComConf,{data:this.myOptionsData,currentId:this.myCurrentId,checkedIds:this.myCheckedIds,idBy:this.GetValueBy,multi:!1,hoverable:!0,checkable:!1,autoCheckCurrent:!0})},Dict:function(){var t=this;if(this.options instanceof Ti.Dict)return this.options;if(_.isString(this.options)){var e=Ti.DictFactory.DictReferName(this.options);if(e)return Ti.DictFactory.CheckDict(e,function(e){var n=e.loading;t.loading=n})}return Ti.DictFactory.CreateDict({data:this.options,getValue:Ti.Util.genGetter(this.valueBy||"value"),getText:Ti.Util.genGetter(this.textBy||"text|name"),getIcon:Ti.Util.genGetter(this.iconBy||"icon")})}},methods:{OnDropListInit:function(t){this.$dropList=t},OnCollapse:function(){this.doCollapse()},OnInputInputing:function(t){this.filter&&(this.myFilterValue=t,this.autoFocusExtended&&(this.isExtended||this.doExtend(!1)),this.isExtended&&this.debReload())},OnInputChanged:function(t,e){var n=this;return _asyncToGenerator(regeneratorRuntime.mark(function i(){var a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n.myFilterValue=null,t){i.next=8;break}n.myItem=null,n.myFreeValue=null,n.myCheckedIds={},n.myCurrentId=null,i.next=12;break;case 8:return i.next=10,n.Dict.getItem(t);case 10:(a=i.sent)?(n.myItem=a,n.myFreeValue=null):n.mustInList||(n.myItem=null,n.myFreeValue=t);case 12:e||n.tryNotifyChanged();case 13:case"end":return i.stop()}},i)}))()},OnInputFocused:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.autoFocusExtended||t.isExtended){e.next=3;break}return e.next=3,t.doExtend();case 3:case"end":return e.stop()}},e)}))()},OnClickStatusIcon:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isExtended){e.next=5;break}return e.next=3,t.doCollapse();case 3:e.next=7;break;case 5:return e.next=7,t.doExtend();case 7:case"end":return e.stop()}},e)}))()},OnDropListSelected:function(){var t=arguments,e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:{},a=i.currentId,r=i.byKeyboardArrow,e.myCurrentId=a,n.next=4,e.OnInputChanged(a,r);case 4:if(!e.autoCollapse||r){n.next=7;break}return n.next=7,e.doCollapse({escaped:!0});case 7:case"end":return n.stop()}},n)}))()},doExtend:function(){var t=arguments,e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=!(t.length>0&&void 0!==t[0])||t[0],e.myOldValue=e.evalMyValue(),!i||!_.isEmpty(e.myOptionsData)){n.next=5;break}return n.next=5,e.reloadMyOptionData(!0);case 5:e.$nextTick(function(){e.myDropStatus="extended"});case 6:case"end":return n.stop()}},n)}))()},doCollapse:function(){var t=arguments,e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=t.length>0&&void 0!==t[0]?t[0]:{},a=i.escaped,(r=void 0!==a&&a)?e.evalMyItem(e.myOldValue):e.tryNotifyChanged(),e.myDropStatus="collapse",e.myOldValue=void 0;case 4:case"end":return n.stop()}},n)}))()},tryNotifyChanged:function(){var t=this.evalMyValue();_.isEqual(t,this.value)||this.$notify("change",t)},evalMyValue:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.myItem,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.myFreeValue;return t?this.Dict.getValue(t):this.mustInList?null:e},evalMyItem:function(){var t=arguments,e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:e.value,n.next=3,e.Dict.getItem(i);case 3:(a=n.sent)?(r=e.Dict.getValue(a),e.myItem=a,e.myFreeValue=null,e.myCurrentId=r,e.myCheckedIds=_defineProperty({},r,!0)):(e.myItem=null,e.myFreeValue=e.mustInList?null:i,e.myCurrentId=null,e.myCheckedIds={});case 5:case"end":return n.stop()}},n)}))()},reloadMyOptionData:function(){var t=arguments,e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(i=t.length>0&&void 0!==t[0]&&t[0])&&!e.isExtended){n.next=7;break}return n.next=4,e.Dict.queryData(e.myFilterValue);case 4:e.myOptionsData=n.sent,n.next=8;break;case 7:e.myOptionsData=[];case 8:case"end":return n.stop()}},n)}))()},__ti_shortcut:function(t){return"ESCAPE"==t?(this.doCollapse({escaped:!0}),{prevent:!0,stop:!0,quit:!0}):"ENTER"==t?(this.doCollapse(),{stop:!0,quit:!1}):"ARROWUP"==t?(this.$dropList&&this.$dropList.selectPrevRow({payload:{byKeyboardArrow:!0}}),{prevent:!0,stop:!0,quit:!0}):"ARROWDOWN"==t?(this.$dropList&&this.isExtended?this.$dropList.selectNextRow({payload:{byKeyboardArrow:!0}}):this.doExtend(),{prevent:!0,stop:!0,quit:!0}):void 0}},watch:{value:{handler:"evalMyItem",immediate:!0},options:function(){this.myOptionsData=[]}},created:function(){var t=this;this.debReload=_.debounce(function(e){t.reloadMyOptionData()},this.delay)}};Ti.Preload("ti/com/ti/combo/input/ti-combo-input.mjs",t)}(),Ti.Preload("ti/com/ti/combo/input/_com.json",{name:"ti-combo-input",globally:!0,template:"./ti-combo-input.html",props:["@com:ti/input/ti-input-props.mjs","./ti-combo-input-props.mjs"],mixins:"./ti-combo-input.mjs",components:["@com:ti/combo/box"]}),Ti.Preload("ti/com/ti/combo/multi-input/ti-combo-multi-input.html",'<ti-combo-box \n  class="ti-combo-multi-input"\n  :class="TopClass"\n  :drop-width="dropWidth"\n  :drop-height="dropHeight"\n  :status="myDropStatus"\n  @collapse="OnCollapse"\n  v-ti-activable>\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <ti-input-tags\n      :input-value="myFilterValue"\n      :value="InputTagValues"\n      :value-case="valueCase"\n      :trimed="trimed"\n        :max-value-len="maxValueLen"\n        :value-unique="valueUnique"\n        :tag-options="tagOptions"\n        :tag-mapping="tagMapping"\n\n      :readonly="readonly"\n      :focused="focused"\n      :hover="hover"\n      :auto-select="autoSelect"\n        :can-input="canInput"\n        :cancel-tag-bubble="cancelTagBubble"\n\n      :placeholder="placeholder"\n      :hide-border="hideBorder"\n      :prefix-icon="prefixIcon"\n      :prefix-hover-icon="prefixHoverIcon"\n      :prefix-icon-for-clean="prefixIconForClean"\n      :prefix-text="prefixText"\n      :suffix-icon="TheSuffixIcon"\n      :suffix-text="suffixText"\n        :tag-item-icon-by="tagItemIconBy"\n        :tag-item-default-icon="tagItemDefaultIcon"\n        :tag-option-default-icon="tagOptionDefaultIcon"\n      \n      :width="width"\n      :height="height"\n\n      :input-change="OnInputChanged"\n\n      @inputing="OnInputInputing"\n      @input:focus="OnInputFocused"\n      @change="OnTagListChanged"\n      @prefix:icon="$notify(\'prefix:icon\')"\n      @suffix:icon="OnClickStatusIcon"/>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <component class="ti-fill-parent"\n      :is="DropComType"\n      blank-class="mid-tip"\n      v-bind="DropComConf"\n      :on-init="OnDropListInit"\n      @select="OnDropListSelected"/>\n  </template>\n</ti-combo-box>'),function(){var t={inheritAttrs:!1,data:function(){return{myDropStatus:"collapse",myTags:[],myFreeValues:[],myFilterValue:null,myOptionsData:[],myCurrentId:null,myCheckedIds:{},myOldValue:void 0}},computed:{isCollapse:function(){return"collapse"==this.myDropStatus},isExtended:function(){return"extended"==this.myDropStatus},TopClass:function(){return this.getTopClass()},Values:function(){return Ti.S.toArray(this.value)},InputTagValues:function(){return _.concat(this.myTags,this.myFreeValues)},GetValueBy:function(){var t=this;return function(e){return t.Dict.getValue(e)}},TheSuffixIcon:function(){return this.statusIcons[this.myDropStatus]},DropComType:function(){return this.dropComType||"ti-list"},DropComConf:function(){return _.assign({display:this.dropDisplay||"text",border:this.dropItemBorder},this.dropComConf,{data:this.myOptionsData,currentId:this.myCurrentId,checkedIds:this.myCheckedIds,idBy:this.GetValueBy,multi:!0,hoverable:!0,checkable:!0,autoCheckCurrent:!1})},Dict:function(){var t=this;if(this.options instanceof Ti.Dict)return this.options;if(_.isString(this.options)){var e=Ti.DictFactory.DictReferName(this.options);if(e)return Ti.DictFactory.CheckDict(e,function(e){var n=e.loading;t.loading=n})}return Ti.DictFactory.CreateDict({data:this.options,getValue:Ti.Util.genGetter(this.valueBy||"value"),getText:Ti.Util.genGetter(this.textBy||"text|name"),getIcon:Ti.Util.genGetter(this.iconBy||"icon")})}},methods:{OnDropListInit:function(t){this.$dropList=t},OnCollapse:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.doCollapse();case 1:case"end":return e.stop()}},e)}))()},OnInputInputing:function(t){this.filter&&(this.myFilterValue=t,this.debReload())},OnInputChanged:function(t){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.myFilterValue=null,!e.valueUnique){n.next=22;break}if(!(_.indexOf(e.myFreeValues,t)>=0)){n.next=4;break}return n.abrupt("return");case 4:i=_createForOfIteratorHelper(e.myTags),n.prev=5,i.s();case 7:if((a=i.n()).done){n.next=14;break}if(r=a.value,(o=e.Dict.getValue(r))!=t){n.next=12;break}return n.abrupt("return");case 12:n.next=7;break;case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(5),i.e(n.t0);case 19:return n.prev=19,i.f(),n.finish(19);case 22:return n.next=24,e.Dict.getItem(t);case 24:(s=n.sent)?e.myTags.push(s):t&&!e.mustInList&&e.myFreeValues.push(t),e.tryNotifyChanged();case 27:case"end":return n.stop()}},n,null,[[5,16,19,22]])}))()},OnInputFocused:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.autoFocusExtended||t.isExtended){e.next=3;break}return e.next=3,t.doExtend();case 3:case"end":return e.stop()}},e)}))()},OnTagListChanged:function(){var t=arguments,e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:[],n.next=3,e.evalMyTags(i);case 3:e.tryNotifyChanged();case 4:case"end":return n.stop()}},n)}))()},OnClickStatusIcon:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isExtended){e.next=4;break}t.doCollapse(),e.next=6;break;case 4:return e.next=6,t.doExtend();case 6:case"end":return e.stop()}},e)}))()},OnDropListSelected:function(){var t=arguments,e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:{},a=i.currentId,r=i.checkedIds,e.myCurrentId=a,e.myCheckedIds=r,o=Ti.Util.truthyKeys(r),n.next=6,e.evalMyTags(_.concat(o,e.myFreeValues));case 6:e.tryNotifyChanged();case 7:case"end":return n.stop()}},n)}))()},doExtend:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.myOldValue=t.evalMyValues(),!_.isEmpty(t.myOptionsData)){e.next=4;break}return e.next=4,t.reloadMyOptionData(!0);case 4:t.$nextTick(function(){t.myDropStatus="extended"});case 5:case"end":return e.stop()}},e)}))()},doCollapse:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).escaped;void 0!==t&&t&&this.$notify("change",this.myOldValue),this.myDropStatus="collapse",this.myOldValue=void 0},tryNotifyChanged:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.evalMyValues();t||_.isEqual(e,this.Values)||this.$notify("change",e)},evalMyValues:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.myTags,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.myFreeValues,i=[];return _.forEach(e,function(e){var n=t.Dict.getValue(e);Ti.Util.isNil(n)?t.mustInList||i.push(e):i.push(n)}),this.mustInList||_.isEmpty(n)?i:_.concat(i,n)},evalMyTags:function(){var t=arguments,e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=t.length>0&&void 0!==t[0]?t[0]:e.value,i=Ti.S.toArray(i),a=[],r={},o=[],s=_createForOfIteratorHelper(i),n.prev=6,s.s();case 8:if((c=s.n()).done){n.next=16;break}return l=c.value,n.next=12,e.Dict.getItem(l);case 12:(u=n.sent)?(a.push(u),r[l]=!0):o.push(l);case 14:n.next=8;break;case 16:n.next=21;break;case 18:n.prev=18,n.t0=n.catch(6),s.e(n.t0);case 21:return n.prev=21,s.f(),n.finish(21);case 24:e.myTags=a,e.myFreeValues=o,e.myCheckedIds=r;case 27:case"end":return n.stop()}},n,null,[[6,18,21,24]])}))()},reloadMyOptionData:function(){var t=arguments,e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(i=t.length>0&&void 0!==t[0]&&t[0])&&!e.isExtended){n.next=7;break}return n.next=4,e.Dict.queryData(e.myFilterValue);case 4:e.myOptionsData=n.sent,n.next=8;break;case 7:e.myOptionsData=[];case 8:case"end":return n.stop()}},n)}))()},__ti_shortcut:function(t){return"ESCAPE"==t?(this.doCollapse({escaped:!0}),{prevent:!0,stop:!0,quit:!0}):"ENTER"==t&&this.$dropList&&this.$dropList.isActived?(this.doCollapse(),{stop:!0,quit:!0}):"ARROWUP"==t?(this.$dropList&&this.$dropList.selectPrevRow({payload:{byKeyboardArrow:!0}}),{prevent:!0,stop:!0,quit:!0}):"ARROWDOWN"==t?(this.$dropList&&this.isExtended?this.$dropList.selectNextRow({payload:{byKeyboardArrow:!0}}):this.doExtend(),{prevent:!0,stop:!0,quit:!0}):void 0}},watch:{value:{handler:"evalMyTags",immediate:!0}},created:function(){var t=this;this.debReload=_.debounce(function(e){t.reloadMyOptionData()},this.delay)}};Ti.Preload("ti/com/ti/combo/multi-input/ti-combo-multi-input.mjs",t)}(),Ti.Preload("ti/com/ti/combo/multi-input/_com.json",{name:"ti-combo-multi-input",globally:!0,template:"./ti-combo-multi-input.html",props:["@com:ti/input/ti-input-props.mjs","@com:ti/input/tags/ti-input-tags-props.mjs","@com:ti/combo/input/ti-combo-input-props.mjs"],mixins:["./ti-combo-multi-input.mjs"],components:["@com:ti/combo/box"]}),function(){var t={placeholder:{type:String,default:"i18n:no-title"},options:{type:Array,default:function(){return[]}},value:{type:Object,default:null},width:{type:[Number,String],default:void 0},height:{type:[Number,String],default:void 0},dropWidth:{type:[Number,String],default:"box"},dropHeight:{type:[Number,String],default:null},sortIcons:{type:Object,default:function(){return{asc:"fas-long-arrow-alt-up",desc:"fas-long-arrow-alt-down"}}},suffixIcon:{type:String,default:"im-menu-list"}};Ti.Preload("ti/com/ti/combo/sorter/ti-combo-sorter-props.mjs",t)}(),Ti.Preload("ti/com/ti/combo/sorter/ti-combo-sorter.html",'<div class="ti-combo-sorter"\n  :class="TopClass"\n  :style="TopStyle">\n  \x3c!--\n    sorter box\n  --\x3e\n  <ti-combo-box\n    class="as-sorter"\n    :drop-width="dropWidth"\n    :drop-height="dropHeight"\n    :drop-float="false"\n    :status="myDropStatus"\n    @collapse="OnCollapse"\n    v-ti-activable>\n    \x3c!--\n      Box\n    --\x3e\n    <template v-slot:box>\n      \x3c!--\n        Current Sort Box\n      --\x3e\n      <div class="as-sort-box"\n        @click.left="OnClickBox">\n        \x3c!--Sort Icon--\x3e\n        <ti-icon\n          v-if="TheSortIcon"\n          class="as-sort-icon"\n            :value="TheSortIcon"/>\n        \x3c!--Preifx Icon--\x3e\n        <ti-icon \n          v-if="ThePrefixIcon"\n            class="at-prefix"\n            :value="ThePrefixIcon"/>\n        \x3c!--Title--\x3e\n        <div class="as-title">{{SortTitle|i18n}}</div>\n      </div>\n      \x3c!--Status Icon--\x3e\n      <div  \n        v-if="TheSuffixIcon"\n          class="as-sort-btn"\n          @click.left="OnClickSuffixIcon">\n            <ti-icon :value="TheSuffixIcon"/>\n      </div>\n    </template>\n    \x3c!--\n      Drop\n    --\x3e\n    <template v-slot:drop="slotProps">\n      <ti-list\n        id-by="value"\n        :data="myListData"\n        :display="[\'<icon>\', \'text\']"\n        :hoverable="true"\n        :current-id="SortBy"\n        @select="OnDropListSelected"/>\n    </template>\n  </ti-combo-box>\n  \x3c!--\n    Sorter\n  --\x3e\n</div>'),function(){var t={data:function(){return{myDropStatus:"collapse",myItem:null,isASC:!0,myListData:[]}},computed:{isCollapse:function(){return"collapse"==this.myDropStatus},isExtended:function(){return"extended"==this.myDropStatus},TopClass:function(){return this.getTopClass()},TopStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})},SortTitle:function(){return Ti.Util.getOrPick(this.myItem,"text|value",this.placeholder)},SortBy:function(){return _.first(_.keys(this.value))},SortAs:function(){return _.get(this.value,this.SortBy)||1},ThePrefixIcon:function(){return _.get(this.myItem,"icon")},TheSortIcon:function(){return this.isASC?this.sortIcons.asc:this.sortIcons.desc},TheSuffixIcon:function(){if(!_.isEmpty(this.myListData)&&this.myListData.length>1)return this.suffixIcon},Dict:function(){var t=this;if(this.options instanceof Ti.Dict)return this.options;if(_.isString(this.options)){var e=Ti.DictFactory.DictReferName(this.options);if(e)return Ti.DictFactory.CheckDict(e,function(e){var n=e.loading;t.loading=n})}return Ti.DictFactory.CreateDict({data:this.options,getValue:Ti.Util.genGetter(this.valueBy||"value"),getText:Ti.Util.genGetter(this.textBy||"text|name"),getIcon:Ti.Util.genGetter(this.iconBy||"icon")})}},methods:{OnCollapse:function(){this.doCollapse()},OnClickBox:function(){this.isASC=!this.isASC,this.tryNotifyChanged()},OnClickSuffixIcon:function(){this.isExtended?this.doCollapse():this.doExtend()},OnDropListSelected:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).current;this.myItem=t,this.doCollapse()},doExtend:function(){this.myDropStatus="extended"},doCollapse:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).escaped,e=void 0!==t&&t;this.myDropStatus="collapse",e||this.tryNotifyChanged()},tryNotifyChanged:function(){var t=this.genValue();_.isEqual(t,this.value)||this.$notify("change",t)},genValue:function(){return _defineProperty({},_.get(this.myItem,"value"),this.isASC?1:-1)},evalMyValue:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={by:null,as:1},_.isString(t.value)?(i=t.value.split(":"),n.by=_.nth(i,0),n.as="1"==_.nth(i,1)?1:-1):_.isArray(t.value)?(n.by=_.nth(t.value,0),n.as=_.nth(t.value,1)>0?1:-1):(n.by=t.SortBy,n.as=t.SortAs),e.next=4,t.Dict.getItem(n.by);case 4:a=e.sent,t.myItem=a||{text:t.text||n.by,value:n.by},t.isASC=1==n.as;case 7:case"end":return e.stop()}},e)}))()},__ti_shortcut:function(t){if("ESCAPE"==t)return this.doCollapse({escaped:!0}),{prevent:!0,stop:!0,quit:!0}}},watch:{value:{handler:"evalMyValue",immediate:!0}},mounted:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.Dict.getData();case 2:this.myListData=t.sent;case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()};Ti.Preload("ti/com/ti/combo/sorter/ti-combo-sorter.mjs",t)}(),Ti.Preload("ti/com/ti/combo/sorter/_com.json",{name:"ti-combo-sorter",globally:!0,template:"./ti-combo-sorter.html",props:"@com:ti/combo/sorter/ti-combo-sorter-props.mjs",mixins:"./ti-combo-sorter.mjs",components:["@com:ti/combo/box"]}),Ti.Preload("ti/com/ti/crumb/com/crumb-item/crumb-item.html",'<div class="ti-crumb-item" \n  :class="topClass"\n  @click.left="onClickTop">\n  \x3c!--\n    Icon\n  --\x3e\n  <ti-icon v-if="icon" \n    class="as-icon"\n    :value="icon"/>\n  \x3c!--\n    Text\n  --\x3e\n  <template v-if="text">\n    <a v-if="href"\n      class="as-text"\n      @click.prevent\n      :href="href"\n      :class="textClass">{{text|i18n}}</a>\n    <span v-else\n      class="as-text"\n      :class="textClass">{{text|i18n}}</span>\n  </template>\n  \x3c!--\n    Asterisk\n  --\x3e\n  <span v-if="asterisk"\n    class="as-asterisk"\n    ></span>\n  \x3c!--\n    Path Icon\n  --\x3e\n  <ti-icon v-if="!atLast"\n    class="as-path-icon"\n    :value="pathIcon"/>\n</div>'),function(){var t={inheritAttrs:!1,props:{index:{type:Number,default:-1},atLast:{type:Boolean,default:!1},icon:{type:[String,Object],default:null},text:{type:String,default:null},href:{type:String,default:null},value:{type:[String,Number,Boolean,Object],default:null},pathIcon:{type:String,default:null},asterisk:{type:Boolean,default:!1},cancelBubble:{type:Boolean,default:!0}},computed:{topClass:function(){return Ti.Css.mergeClassName({"at-tail":this.atLast,"at-path":!this.atLast,"is-asterisk":this.asterisk},this.className)},textClass:function(){return{"without-icon":!this.hasIcon&&!this.removeIcon}},hasIcon:function(){return!!this.icon},theData:function(){return{index:this.index,icon:this.icon,text:this.text,value:this.value,href:this.href,atLast:this.atLast,asterisk:this.asterisk}}},methods:{onClickTop:function(t){this.hasOptions?(t.stopPropagation(),this.openDrop()):this.cancelBubble&&t.stopPropagation(),this.href&&this.$notify("item:active",this.theData)}}};Ti.Preload("ti/com/ti/crumb/com/crumb-item/crumb-item.mjs",t)}(),Ti.Preload("ti/com/ti/crumb/com/crumb-item/_com.json",{name:"crumb-item",globally:!1,template:"./crumb-item.html",mixins:["./crumb-item.mjs"]}),Ti.Preload("ti/com/ti/crumb/ti-crumb.html",'<div class="ti-crumb"\n  :class="topClass">\n  \x3c!--\n    Loop items\n  --\x3e\n  <crumb-item v-for="it in theData"\n    :key="it.index"\n    :path-icon="pathIcon"\n    :cancel-bubble="cancelItemBubble"\n    v-bind="it"/>\n</div>'),function(){var t={inheritAttrs:!1,props:{data:{type:Array,default:function(){return[]}},itemIcon:{type:String,default:null},pathIcon:{type:String,default:"zmdi-chevron-right"},cancelItemBubble:{type:Boolean,default:!0}},computed:{topClass:function(){if(this.className)return this.className},theData:function(){var t=this,e=[];return _.isArray(this.data)&&_.forEach(this.data,function(n,i){e.push(_.assign({icon:t.itemIcon},n,{index:i,atLast:i==t.data.length-1}))}),e},theDataValues:function(){var t,e=[],n=_createForOfIteratorHelper(this.theData);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.push(Ti.Util.fallback(i.value,null))}}catch(t){n.e(t)}finally{n.f()}return e}}};Ti.Preload("ti/com/ti/crumb/ti-crumb.mjs",t)}(),Ti.Preload("ti/com/ti/crumb/_com.json",{name:"ti-crumb",globally:!0,template:"./ti-crumb.html",mixins:["./ti-crumb.mjs"],components:["./com/crumb-item"]}),Ti.Preload("ti/com/ti/datetime/ti-datetime.html",'<div class="ti-datetime">\n  \x3c!--Date--\x3e\n  <ti-calendar class="is-date"\n    :value="theDate"\n    :month-format="monthFormat"\n    :begin-year="beginYear"\n    :end-year="endYear"\n    @change="onDateChanged"/>\n  \x3c!--Time--\x3e\n  <div class="is-time">\n    <div class="as-time-text">{{theTimeText}}</div>\n    <div class="as-time-cols">\n      <ti-time\n        :value="theTime"\n        :mode="timeMode"\n        width="100%"\n        height="none"\n        @change="onTimeChanged"/>\n    </div>\n  </div>\n</div>'),function(){var t={inheritAttrs:!1,props:{value:{type:[String,Number,Date],default:null},timeMode:{type:String,default:"sec",validator:function(t){return/^(sec|min|auto)$/.test(t)}},monthFormat:{type:String,default:"yyyy-MM"},beginYear:{type:[Number,String],default:1970},endYear:{type:[Number,String],default:(new Date).getFullYear()+1}},computed:{topClass:function(){return this.className},theDate:function(){return Ti.Types.toDate(this.value,null)},theTime:function(){return Ti.Types.toTime(this.theDate)},theTimeFormat:function(){return{sec:"HH:mm:ss",min:"HH:mm",auto:"auto"}[this.timeMode]},theTimeText:function(){return this.getTimeText(this.theTime)}},methods:{onDateChanged:function(t){this.theDate||new Date;var e=Ti.Types.toTime(this.theTime||0);(t=new Date(t)).setHours(e.hours),t.setMinutes(e.minutes),t.setSeconds(e.seconds),t.setMilliseconds(e.milliseconds),this.$notify("change",t)},onTimeChanged:function(t){var e=this.theDate||new Date,n=new Date(e);n.setHours(t.hours),n.setMinutes(t.minutes),n.setSeconds(t.seconds),n.setMilliseconds(t.milliseconds),this.$notify("change",n)},getTimeText:function(t){if(t instanceof Ti.Types.Time)return t.toString(this.theTimeFormat)}}};Ti.Preload("ti/com/ti/datetime/ti-datetime.mjs",t)}(),Ti.Preload("ti/com/ti/datetime/_com.json",{name:"ti-datetime",globally:!0,template:"./ti-datetime.html",mixins:["./ti-datetime.mjs"],components:["@com:ti/time","@com:ti/calendar"]}),Ti.Preload("ti/com/ti/droplist/ti-droplist.html",'<component \n  :is="ComType"\n  v-bind="this"\n  :can-input="false"\n  :must-in-list="true"\n  :auto-collapse="true"\n  @change="$notify(\'change\', $event)"/>'),function(){var t={inheritAttrs:!1,props:{multi:{type:Boolean,default:!1}},computed:{ComType:function(){return this.multi?"ti-combo-multi-input":"ti-combo-input"}}};Ti.Preload("ti/com/ti/droplist/ti-droplist.mjs",t)}(),Ti.Preload("ti/com/ti/droplist/_com.json",{name:"ti-droplist",globally:!0,template:"./ti-droplist.html",props:["@com:ti/input/ti-input-props.mjs","@com:ti/input/tags/ti-input-tags-props.mjs","@com:ti/combo/input/ti-combo-input-props.mjs"],mixins:["./ti-droplist.mjs"],components:["@com:ti/combo/input","@com:ti/combo/multi-input"]}),function(){var t={type:{type:String,default:"String"},disabled:{type:Boolean,default:!1},uniqKey:{type:String,default:null},name:{type:[String,Array],default:null},icon:{type:String,default:null},fieldStatus:{type:Object,default:function(){return{}}},message:{type:String,default:null},title:{type:String,default:null},tip:{type:String,default:null},width:{type:[String,Number],default:"stretch"},height:{type:[String,Number],default:void 0},checkEquals:{type:Boolean,default:!0},undefinedAs:{default:void 0},nullAs:{default:void 0},nanAs:{type:Number,default:void 0},emptyAs:{type:String,default:void 0},defaultAs:{default:void 0},display:{type:[String,Object,Boolean],default:!1},comType:{type:String,default:"ti-label"},comConf:{type:Object,default:function(){return{}}},autoValue:{type:String,default:"value"},serializer:{type:Function,default:_.identity},transformer:{type:Function,default:_.identity},data:{type:Object,default:null},statusIcons:{type:Object,default:function(){return{spinning:"fas-spinner fa-spin",error:"zmdi-alert-polygon",warn:"zmdi-alert-triangle",ok:"zmdi-check-circle"}}}};Ti.Preload("ti/com/ti/form/com/form-field/form-field-props.mjs",t)}(),Ti.Preload("ti/com/ti/form/com/form-field/form-field.html",'<div class="form-field"\n  :class="TopClass"\n  :style="ConStyle"\n  v-ti-activable>\n  \x3c!--========================================\n    Field Name\n  --\x3e\n  <div \n    v-if="isShowTitle"\n      class="field-name"\n      :title="StatusText">\n        \x3c!--Status Icon--\x3e\n        <span \n          v-if="StatusIcon"\n            class="name-status">\n            <ti-icon :value="StatusIcon"/>\n        </span>\n        \x3c!--Title Text--\x3e\n        <span class="name-title">{{TheTitle|i18n}}</span>\n        \x3c!--Field Icon--\x3e\n        <span \n          v-if="isShowIcon" \n            class="name-icon">\n            <ti-icon :value="icon"/>\n        </span>\n  </div>\n  \x3c!--========================================\n    Field Value\n  --\x3e\n  <div class="field-value"\n    :style="ConStyle">\n    \x3c!--\n      UI Component\n    --\x3e\n    <div v-if="isComReady"\n      class="field-component"\n      :class="ComClass"\n      :style="ComStyle">\n      <component \n        :is="myComType"\n          v-bind="myComConf"\n          @change="OnChange"/>\n    </div>\n    \x3c!--\n      Tips\n    --\x3e\n    <div \n      v-if="isShowTip"\n        class="field-tip">{{tip|i18n}}</div>\n  </div>\n</div>'),function(){var t={data:function(){return{isComReady:!1,myComType:null,myComConf:null}},computed:{TopClass:function(){return this.getTopClass({"no-status-icons":!this.hasStatusIcons,"has-status-icons":this.hasStatusIcons,"is-disabled":this.disabled},"as-".concat(this.viewportMode),this.StatusType?"is-".concat(this.StatusType):null)},isShowTitle:function(){return!Ti.Util.isNil(this.title)},isShowIcon:function(){return!Ti.Util.isNil(this.icon)},isShowTip:function(){return!Ti.Util.isNil(this.tip)},hasStatusIcons:function(){return!_.isEmpty(this.statusIcons)},isNumberType:function(){return/^(Number|Integer|Float)$/.test(this.type)},UniqName:function(){return _.isArray(this.name)?this.name.join("-"):this.name},TheTitle:function(){return this.title||this.UniqName},ComClass:function(){var t="auto"==this.width,e="full"==this.width,n="stretch"==this.width;return{"is-size-auto":t,"is-size-full":e,"is-size-stretch":n,"is-size-fixed":!(t||e||n||Ti.Util.isNil(this.width))}},ConStyle:function(){return Ti.Css.toStyle({height:this.height})},ComStyle:function(){var t={height:this.height};return this.width&&!/^(auto|stretch)$/.test(this.width)&&(t.width=Ti.Css.toSize(this.width)),Ti.Css.toStyle(t)},TheDisplay:function(){if(this.display)return!_.isBoolean(this.display)&&this.display?this.evalFieldDisplayItem(this.display,{defaultKey:this.name}):{comType:"ti-label",comConf:{}}},CurrentDisplayItem:function(){var t=this.TheDisplay||{};return!this.isActived&&this.display||(t={defaultAs:this.defaultAs,comType:this.comType,comConf:this.comConf}),_.defaults(_.cloneDeep(t),{comType:"ti-label",key:this.name,type:this.type,dict:this.dict,transformer:this.transformer})},Status:function(){return _.get(this.fieldStatus,this.uniqKey)},StatusType:function(){return _.get(this.Status,"type")},StatusText:function(){return _.get(this.Status,"text")},StatusIcon:function(){if(this.Status&&this.hasStatusIcons)return this.statusIcons[this.Status.type]}},methods:{__before_bubble:function(t){var e=t.name,n=t.args;if(this.name)return{name:"".concat(this.UniqName,"::").concat(e),args:n}},OnChange:function(t){var e=t;try{e=this.serializer(t)}catch(e){return void this.$notify("invalid",{errMessage:""+e,name:this.name,value:t})}e=this.evalInputValue(e),this.checkEquals&&_.isEqual(e,this.fieldValue)||this.$notify("change",{name:this.name,value:e})},evalTheCom:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.evalDataForFieldDisplayItem({itemData:t.data,displayItem:t.CurrentDisplayItem,vars:{isActived:t.isActived,disabled:t.disabled},autoIgnoreNil:!1,autoValue:t.autoValue});case 2:n=e.sent,t.myComType=n.comType,t.myComConf=n.comConf,t.isComReady=!0;case 6:case"end":return e.stop()}},e)}))()},evalInputValue:function(t){return _.isUndefined(t)?_.cloneDeep(Ti.Util.fallback(this.undefinedAs,this.defaultAs)):_.isNull(t)?_.cloneDeep(Ti.Util.fallback(this.nullAs,this.defaultAs,null)):this.isNumberType&&isNaN(t)?_.cloneDeep(Ti.Util.fallback(this.nanAs,this.defaultAs,NaN)):_.isEmpty(t)&&_.isString(t)?_.cloneDeep(Ti.Util.fallback(this.emptyAs,this.defaultAs,"")):t}},watch:{CurrentDisplayItem:"evalTheCom",data:{handler:"evalTheCom",immediate:!0}}};Ti.Preload("ti/com/ti/form/com/form-field/form-field.mjs",t)}(),Ti.Preload("ti/com/ti/form/com/form-field/_com.json",{name:"ti-form-field",globally:!0,template:"./form-field.html",methods:"@com:ti/support/field_display.mjs",props:"./form-field-props.mjs",mixins:["./form-field.mjs"]}),function(){var t={type:{type:String,default:"Group"},icon:{type:String,default:null},title:{type:String,default:null},fields:{type:Array,default:function(){return[]}},data:{type:Object,default:null},fieldStatus:{type:Object,default:function(){return{}}},statusIcons:{spinning:"fas-spinner fa-spin",error:"zmdi-alert-polygon",warn:"zmdi-alert-triangle",ok:"zmdi-check-circle"}};Ti.Preload("ti/com/ti/form/com/form-group/form-group-props.mjs",t)}(),Ti.Preload("ti/com/ti/form/com/form-group/form-group.html",'<div class="form-group"\n  :class="topClass">\n  <div class="group-title">\n    <ti-icon\n      v-if="show.icon" \n      :value="icon"/>\n    <span\n      v-if="show.title"\n      class="name-title">{{title|i18n}}</span>\n  </div>\n  <div class="group-fields">\n      <ti-form-field v-for="fld in fields"\n        :key="fld.key"\n        v-bind="fld"\n        :data="data"\n        :field-status="fieldStatus"\n        :status-icons="statusIcons"/>\n  </div>\n</div>'),Ti.Preload("ti/com/ti/form/com/form-group/form-group.mjs",{inheritAttrs:!1,computed:{topClass:function(){var t=["as-".concat(this.viewportMode)];return this.className&&t.push(this.className),t},show:function(){return{title:!!this.title,icon:!!this.icon}}}}),Ti.Preload("ti/com/ti/form/com/form-group/_com.json",{name:"form-group",globally:!1,template:"./form-group.html",props:"./form-group-props.mjs",mixins:["./form-group.mjs"]}),function(){var t={data:{type:Object,default:void 0},fields:{type:Array,default:function(){return[]}},fieldStatus:{type:Object,default:function(){return{}}},onlyFields:{type:Boolean,default:!0},fixed:{type:Object,default:void 0},keepTabIndexBy:{type:String,default:null},defaultComType:{type:String,default:"ti-label"},autoShowBlank:{type:Boolean,default:void 0},currentTab:{type:Number,default:0},adjustDelay:{type:Number,default:0},mode:{type:String,default:"all",validator:function(t){return/^(all|tab)$/.test(t)}},tabAt:{type:String,default:"top-center",validator:function(t){return/^(top|bottom)-(left|center|right)$/.test(t)}},blankAs:{type:Object,default:function(){return{icon:"fas-dna",text:null}}},icon:{type:String,default:null},title:{type:String,default:null},statusIcons:{type:Object,default:function(){return{spinning:"fas-spinner fa-spin",error:"zmdi-alert-polygon",warn:"zmdi-alert-triangle",ok:"zmdi-check-circle"}}},spacing:{type:String,default:"comfy",validator:function(t){return/^(comfy|tiny)$/.test(t)}},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null}};Ti.Preload("ti/com/ti/form/ti-form-props.mjs",t)}(),Ti.Preload("ti/com/ti/form/ti-form.html",'<div class="ti-form"\n  :class="TopClass"\n  :style="TopStyle"\n  v-ti-activable>\n  <template v-if="hasData || !isAutoShowBlank">\n    \x3c!--\n      Form Header\n    --\x3e\n    <header class="form-header" v-if="hasHeader">\n      <span v-if="icon"\n        class="it-icon"><ti-icon :value="icon"/></span>\n      <span v-if="title"\n        class="it-text">{{title}}</span>\n    </header>\n    \x3c!--\n      Tabs for display:"tab"\n    --\x3e\n    <div class="form-tab" v-if="isTabMode">\n      <ul>\n        <li v-for="tab in TabItems" \n          :class="tab.className"\n          @click.left="OnClickTab(tab)">\n          <ti-icon \n            class="tab-icon" v-if="tab.icon" :value="tab.icon"/>\n          <span \n            class="tab-text" v-if="tab.title">{{tab.title|i18n}}</span>\n        </li>\n      </ul>\n    </div>\n    \x3c!--\n      Form Fields\n    --\x3e\n    <div class="form-body">\n      <template v-for="fld in FieldsInCurrentTab">\n        \x3c!--\n          For Group\n        --\x3e\n        <form-group v-if="\'Group\' == fld.type"\n          v-bind="fld"\n          :data="data"\n          :field-status="fieldStatus"\n          :status-icons="statusIcons"\n          @change="OnFieldChange"/>\n        \x3c!--\n          For field\n        --\x3e\n        <ti-form-field v-else\n          :key="fld.key"\n          v-bind="fld"\n          :data="data"\n          :field-status="fieldStatus"\n          :status-icons="statusIcons"\n          @change="OnFieldChange"/>\n      </template>\n    </div>\n  </template>\n  \x3c!--\n    Show Blank\n  --\x3e\n  <ti-loading \n    v-else\n      class="nil-data as-big-mask"\n      v-bind="blankAs"/>\n</div>'),function(){var t={model:{prop:"data",event:"change"},data:function(){return{myKeysInFields:[],currentTabIndex:0}},computed:{TopClass:function(){var t;return this.getTopClass((t={"is-tab-mode":this.isTabMode,"is-all-mode":this.isAllMode},_defineProperty(t,"tab-at-".concat(this.tabAt),this.isTabMode),_defineProperty(t,"tab-at-".concat(this.TheTabAtX),this.isTabMode),_defineProperty(t,"tab-at-".concat(this.TheTabAtY),this.isTabMode),t),"as-".concat(this.viewportMode),"as-spacing-".concat(this.spacing||"comfy"))},TopStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})},hasHeader:function(){return!(!this.title&&!this.icon)},hasData:function(){return!Ti.Util.isNil(this.data)},isTabMode:function(){return"tab"==this.mode},isAllMode:function(){return"all"==(this.mode||"all")},isAutoShowBlank:function(){return Ti.Util.fallback(this.autoShowBlank,!1)},TheTabAt:function(){return this.tabAt.split("-")},TheTabAtX:function(){return this.TheTabAt[1]},TheTabAtY:function(){return this.TheTabAt[0]},TheFields:function(){var t=this,e=[],n=[];return _.forEach(this.fields,function(i,a){var r=t.evalFormField(i,[a]);r&&(e.push(r),r.disabled||("Group"==r.type?_.forEach(r.fields,function(t){var e=t.disabled,i=t.name;e||n.push(i)}):n.push(r.name)))}),this.myKeysInFields=_.flattenDeep(n),e},TabList:function(){var t=[],e=[];if(this.isTabMode){var n,i=_createForOfIteratorHelper(this.TheFields);try{for(i.s();!(n=i.n()).done;){var a=n.value;"Group"==a.type?t.push(a):e.push(a)}}catch(t){i.e(t)}finally{i.f()}_.isEmpty(e)||t.push({type:"Group",title:"i18n:others",fields:e})}return t},TabItems:function(){var t=this,e=[];return _.forEach(this.TabList,function(n,i){var a=i==t.currentTabIndex;e.push(_.assign({},n,{index:i,isCurrent:a,className:{"is-current":a}}))}),e},CurrentTab:function(){var t,e=_createForOfIteratorHelper(this.TabItems);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(n.isCurrent)return n}}catch(t){e.e(t)}finally{e.f()}},FieldsInCurrentTab:function(){return this.isTabMode?this.CurrentTab?this.CurrentTab.fields||[]:[]:this.TheFields},TheData:function(){return this.data?this.onlyFields?_.pick(this.data,this.myKeysInFields):this.data:{}}},methods:{OnClickTab:function(t){this.currentTabIndex=t.index,this.$notify("tab:change",t)},OnFieldChange:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.name,i=e.value;this.$notify("field:change",{name:n,value:i}),this.$nextTick(function(){var e=t.getData({name:n,value:i});t.$notify("change",e)})},getData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.name,n=t.value,i=_.cloneDeep(this.TheData);if(e&&_.isString(e))if(".."==e)_.assign(i,n);else{if(/^'[^']+'$/.test(e))return;_.set(i,e,n)}else if(_.isArray(e)){var a,r={},o=_createForOfIteratorHelper(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;r[s]=_.get(n,s)}}catch(t){o.e(t)}finally{o.f()}_.assign(i,r)}return this.fixed&&_.assign(i,fixed),i},isGroup:function(t){return"Group"==t.type||_.isArray(t.fields)},evalFormField:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e.hidden||!Ti.Validate.match(this.data,e.hidden)){var i=!1;e.disabled&&(i=Ti.Validate.match(this.data,e.disabled));var a=Ti.Util.anyKey(e.name||n,"ti-fld");if(this.isGroup(e)){var r={disabled:i,type:"Group",key:a,className:e.className,icon:e.icon,title:e.title,fields:[]};return _.forEach(e.fields,function(e,i){var a=t.evalFormField(e,[].concat(_toConsumableArray(n),[i]));a&&r.fields.push(a)}),_.isEmpty(r.fields)?null:r}if(e.name){var o=_.defaults(_.omit(e,"disabled"),{type:"String",comType:this.defaultComType,disabled:i});if(o.uniqKey=_.concat(o.name).join("-"),!o.serializer){var s=Ti.Types.getFuncByType(o.type||"String","serializer");o.serializer="Ti.Types.".concat(s)}if(!o.transformer){var c=Ti.Types.getFuncByType(o.type||"String","transformer");o.transformer="Ti.Types.".concat(c)}var l={context:this,partialRight:!0};return o.serializer=Ti.Util.genInvoking(o.serializer,l),o.transformer=Ti.Util.genInvoking(o.transformer,l),o}}},__adjust_fields_width:function(){if(_.isElement(this.$el)){var t,e=Ti.Dom.findAll(".form-field > .field-name",this.$el),n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;Ti.Dom.setStyle(i,{width:""})}}catch(t){n.e(t)}finally{n.f()}var a,r=0,o=_createForOfIteratorHelper(e);try{for(o.s();!(a=o.n()).done;){var s=a.value,c=Ti.Rects.createBy(s);r=Math.ceil(Math.max(c.width,r))}}catch(t){o.e(t)}finally{o.f()}var l,u=_createForOfIteratorHelper(e);try{for(u.s();!(l=u.n()).done;){var d=l.value;Ti.Dom.setStyle(d,{width:r})}}catch(t){u.e(t)}finally{u.f()}}},adjustFieldsWidth:function(){var t=this;this.adjustDelay>0?_.delay(function(){t.__adjust_fields_width()},this.adjustDelay):this.$nextTick(function(){t.__adjust_fields_width()})},__ti_shortcut:function(t){var e=this;"ENTER"==t&&_.delay(function(){e.$notify("submit")},100)}},watch:{TheFields:function(){this.adjustFieldsWidth()},currentTab:function(t){this.currentTabIndex=t},currentTabIndex:function(t){this.keepTabIndexBy&&Ti.Storage.session.set(this.keepTabIndexBy,t),this.adjustFieldsWidth()}},created:function(){var t=this;this.__debounce_adjust_fields_width=_.debounce(function(){t.__adjust_fields_width()},500)},mounted:function(){var t=this;this.currentTabIndex=Ti.Storage.session.getInt(this.keepTabIndexBy,this.currentTab),Ti.Viewport.watch(this,{resize:function(){t.__debounce_adjust_fields_width()}}),this.adjustFieldsWidth()},beforeDestroy:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/form/ti-form.mjs",t)}(),Ti.Preload("ti/com/ti/form/_com.json",{name:"ti-form",globally:!0,template:"./ti-form.html",methods:"@com:ti/support/field_display.mjs",props:"./ti-form-props.mjs",mixins:["./ti-form.mjs"],components:["./com/form-group","./com/form-field","@com:ti/input","@com:ti/input/num","@com:ti/input/tags","@com:ti/input/color","@com:ti/input/icon","@com:ti/input/date","@com:ti/input/time","@com:ti/input/timerange","@com:ti/input/month","@com:ti/input/datetime","@com:ti/input/daterange","@com:ti/input/text","@com:ti/combo/input","@com:ti/combo/multi-input","@com:ti/label","@com:ti/toggle","@com:ti/switcher","@com:ti/droplist"]}),Ti.Preload("ti/com/ti/form/_hmaker.json",{icon:"im-task-o",title:"i18n:com-form",scenes:["desktop","tablet"],editComType:"hmaker-edit-com-form",editComConf:{value:"=comConf"}}),Ti.Preload("ti/com/ti/gui/block/ti-gui-block.html",'<div class="ti-gui-block" \n  :class="TopClass"\n  :style="TopStyle">\n  \x3c!--\n    Header\n  --\x3e\n  <div class="block-head" v-if="isShowHeader">\n    \x3c!--Icon--\x3e\n    <div class="as-icon" v-if="icon">\n      <ti-icon :value="icon"/>\n    </div>\n    \x3c!--Title--\x3e\n    <div class="as-title">\n      <span v-if="title">{{title|i18n}}</span>\n    </div>\n    \x3c!--Actions--\x3e\n    <div class="as-actions" v-if="hasActions">\n      <ti-actionbar \n        :items="actions"\n        :status="actionStatus"/>\n    </div>\n  </div>\n  \x3c!--\n    Content\n  --\x3e\n  <div class="block-main" v-if="TheCom">\n    <div class="block-main-con"\n      :class="MainConClass">\n      <component \n        class="ti-fill-parent"\n        :is="TheCom.comType"\n        v-bind="TheCom.comConf"/>\n    </div>\n  </div>\n  \x3c!--Blank--\x3e\n  </div>'),function(){var t={inject:["$gui"],props:{type:{type:String,default:null,validator:function(t){return Ti.Util.isNil(t)||/^(cols|rows|tabs)$/.test(t)}},title:{type:String,default:null},icon:{type:[String,Object],default:null},hideTitle:{type:Boolean,default:!1},actions:{type:Array,default:function(){return[]}},actionStatus:{type:Object,default:function(){return{}}},name:{type:String,default:null},blocks:{type:Array,default:function(){return[]}},body:{type:[String,Object],default:null},embedIn:{type:String,default:null,validator:function(t){return/^(panel|rows|cols|tabs)$/.test(t)}},size:{type:[String,Number],default:null},overflow:{type:String,default:null},flex:{type:String,default:void 0,validator:function(t){return _.isUndefined(t)||/^(auto|grow|shrink|both|none)$/.test(t)}},schema:{type:Object,default:function(){return{}}},shown:{type:Object,default:function(){return{}}},captureEvents:{type:Object,default:function(){return{}}},tabAt:void 0,adjustable:void 0,border:void 0},computed:{TopClass:function(){var t;return this.getTopClass((t={},_defineProperty(t,"gui-block-".concat(this.name),!!this.name),_defineProperty(t,"is-show-header",this.isShowHeader),_defineProperty(t,"is-hide-header",!this.isShowHeader),_defineProperty(t,"ti-fill-parent",/^(tabs|panel)$/.test(this.embedIn)),t),"is-flex-".concat(this.FlexName))},TopStyle:function(){var t=this;return Ti.Css.toStyle({rows:function(){return{height:t.BlockSize}},cols:function(){return{width:t.BlockSize}},tabs:function(){return{}},panel:function(){return{}}}[this.embedIn]())},MainConClass:function(){return{"can-flex-none":this.isFlexNone,"can-flex-shrink":!this.isFlexNone}},BlockSize:function(){var t=this.size;return/^(auto|stretch)$/.test(t)?null:t},FlexName:function(){var t=this.flex||this.$gui.defaultFlex||"auto";return"auto"==t?"stretch"==this.size||Ti.Util.isNil(this.size)?"both":"none":t||"both"},isFlexNone:function(){return"none"==this.FlexName},isShowHeader:function(){return!this.hideTitle&&"tabs"!=this.embedIn&&!(!this.title&&!this.hasActions)},hasActions:function(){return!_.isEmpty(this.actions)},TheCom:function(){if(this.body){var t=_.isString(this.body)?this.schema[this.body]:this.body;if(t){var e=this.schema[t.extends],n=_.omit(t,"extends");return t=_.merge({},e,n),_.defaults(t,{comType:"ti-label",comConf:{}})}}if(!_.isEmpty(this.blocks)){return{comType:"ti-gui-".concat(this.type||"cols"),comConf:{tabAt:this.tabAt,border:this.border,adjustable:this.adjustable,blocks:this.blocks,schema:this.schema,actionStatus:this.actionStatus,shown:this.shown,defaultFlex:this.defaultFlex}}}}},methods:{__before_bubble:function(t){var e=t.name,n=t.args;if(this.name)return{name:"".concat(this.name,"::").concat(e),args:n}}}};Ti.Preload("ti/com/ti/gui/block/ti-gui-block.mjs",t)}(),Ti.Preload("ti/com/ti/gui/block/_com.json",{name:"ti-gui-block",globally:!0,template:"./ti-gui-block.html",mixins:["./ti-gui-block.mjs"]}),Ti.Preload("ti/com/ti/gui/cols/ti-gui-cols.html",'<div class="ti-gui-cols" :class="topClass">\n  <template v-if="hasBlocks">\n    <template v-for="(block, index) in blocks">\n      <ti-gui-block v-if="!block.hide"\n        :key="index"\n        embed-in="cols"\n        v-bind="block"\n        :schema="schema"\n        :action-status="actionStatus"\n        :shown="shown"/>\n      </template>\n  </template>\n</div>'),function(){var t={inheritAttrs:!1,props:{blocks:{type:Array,default:function(){return[]}},adjustable:{type:Boolean,default:!0},border:{type:Boolean,default:!1},schema:{type:Object,default:function(){return{}}},actionStatus:{type:Object,default:function(){return{}}},shown:{type:Object,default:function(){return{}}}},computed:{topClass:function(){return Ti.Css.mergeClassName({"is-adjustable":this.adjustable,"show-border":this.border},this.className)},hasBlocks:function(){return!_.isEmpty(this.blocks)}},methods:{}};Ti.Preload("ti/com/ti/gui/cols/ti-gui-cols.mjs",t)}(),Ti.Preload("ti/com/ti/gui/cols/_com.json",{name:"ti-gui-cols",globally:!0,template:"./ti-gui-cols.html",mixins:["./ti-gui-cols.mjs"],components:["@com:ti/gui/block"]}),Ti.Preload("ti/com/ti/gui/panel/ti-gui-panel.html",'<div class="ti-gui-panel"\n  :class="TopClass"\n  @click.left="OnClickMask">\n  <div class="panel-con"\n    :style="ConStyle"\n    @click.left.stop>\n    \x3c!--\n      Block\n    --\x3e\n    <ti-gui-block\n      embed-in="panel"\n      flex="none"\n      :type="type"\n      :title="title"\n      :icon="icon"\n      :hide-title="hideTitle"\n      :actions="actions"\n      :action-status="actionStatus"\n      :name="name"\n      :blocks="blocks"\n      :body="body"\n      :overflow="overflow"\n      :schema="schema"\n      :shown="shown"\n      :capture-events="captureEvents"/>\n    \x3c!--\n      Closer\n    --\x3e\n    <div\n      v-if="hasCloser"\n        class="panel-closer"\n        :class="CloserClass">\n        <ti-icon\n          value="zmdi-close"\n          @click.native="OnClose"/>\n    </div>\n  </div>\n</div>'),function(){var t={inject:["$gui"],props:{captureEvents:void 0,title:{type:String,default:null},icon:{type:[String,Object],default:null},hideTitle:{type:Boolean,default:!1},actions:{type:Array,default:function(){return[]}},actionStatus:{type:Object,default:function(){return{}}},name:{type:String,default:null},type:{type:String,default:null,validator:function(t){return Ti.Util.isNil(t)||/^(cols|rows|tabs)$/.test(t)}},blocks:{type:Array,default:function(){return[]}},body:{type:[String,Object],default:null},adjustable:{type:[Boolean,String],default:!0,validator:function(t){return _.isBoolean(t)||/^(x|y)$/.test(t)}},overflow:{type:String,default:null},width:{type:[String,Number],default:-1},height:{type:[String,Number],default:-1},viewportWidth:{type:[String,Number],default:0},viewportHeight:{type:[String,Number],default:0},position:{type:String,default:"center",validator:function(t){return/^(left|right|top|bottom|center)$/.test(t)||/^((left|right)-top|bottom-(left|right))$/.test(t)}},closer:{type:String,default:"default",validator:function(t){return _.isNull(t)||/^(default|bottom|top|left|right)$/.test(t)}},mask:{type:Boolean,default:!1},transparent:{type:Boolean,default:!1},clickMaskToClose:{type:Boolean,default:!1},schema:{type:Object,default:function(){return{}}},shown:{type:Object,default:function(){return{}}}},computed:{TopClass:function(){return this.getTopClass({"show-mask":this.mask,"no-mask":!this.mask,"is-bg-transparent":this.transparent,"is-bg-opaque":!this.transparent,"is-closer-default":this.isCloserDefault},"at-".concat(this.position))},ConStyle:function(){var t=Ti.Css.toPixel(this.width,this.viewportWidth,this.width),e=Ti.Css.toPixel(this.height,this.viewportHeight,this.height);return Ti.Css.toStyle({width:t,height:e})},hasCloser:function(){return!!this.closer},isCloserDefault:function(){return!0===this.closer||"default"==this.closer},CloserClass:function(){return Ti.Css.mergeClassName(_defineProperty({"as-lamp-cord":!this.isCloserDefault,"as-default":this.isCloserDefault},"at-".concat(this.closer),!this.isCloserDefault))}},methods:{OnClose:function(){this.$gui.onBlockHide(this.name)},OnClickMask:function(){this.clickMaskToClose&&this.$gui.onBlockHide(this.name)}}};Ti.Preload("ti/com/ti/gui/panel/ti-gui-panel.mjs",t)}(),Ti.Preload("ti/com/ti/gui/panel/_com.json",{name:"ti-gui-panel",globally:!0,template:"./ti-gui-panel.html",mixins:["./ti-gui-panel.mjs"],components:["@com:ti/gui/block"]}),Ti.Preload("ti/com/ti/gui/rows/ti-gui-rows.html",'<div class="ti-gui-rows" :class="topClass">\n  <template v-if="hasBlocks">\n    <template v-for="(block, index) in blocks">\n      <ti-gui-block v-if="!block.hide"\n        :key="index"\n        embed-in="rows"\n        v-bind="block"\n        :schema="schema"\n        :action-status="actionStatus"\n        :shown="shown"/>\n    </template>\n  </template>\n</div>'),function(){var t={inheritAttrs:!1,props:{blocks:{type:Array,default:function(){return[]}},adjustable:{type:Boolean,default:!0},border:{type:Boolean,default:!1},schema:{type:Object,default:function(){return{}}},actionStatus:{type:Object,default:function(){return{}}},shown:{type:Object,default:function(){return{}}}},computed:{topClass:function(){return Ti.Css.mergeClassName({"is-adjustable":this.adjustable,"show-border":this.border},this.className)},hasBlocks:function(){return!_.isEmpty(this.blocks)}},methods:{}};Ti.Preload("ti/com/ti/gui/rows/ti-gui-rows.mjs",t)}(),Ti.Preload("ti/com/ti/gui/rows/_com.json",{name:"ti-gui-rows",globally:!0,template:"./ti-gui-rows.html",mixins:["./ti-gui-rows.mjs"],components:["@com:ti/gui/block"]}),Ti.Preload("ti/com/ti/gui/tabs/ti-gui-tabs.html",'<div class="ti-gui-tabs" :class="topClass">\n  \x3c!--\n    Tab title bar\n  --\x3e\n  <header :class="tabClass">\n    <ul>\n      <li v-for="it in theTabItems"\n        :key="it.key"\n        :class="it.className"\n        @click="onSetCurrentTabItem(it)">\n        \x3c!--Icon--\x3e\n        <ti-icon\n          v-if="it.icon"\n            class="it-icon"\n            :value="it.icon"/>\n        \x3c!--Text--\x3e\n        <span class="it-text">{{it.title|i18n}}</span>\n      </li>\n    </ul>\n  </header>\n  \x3c!--\n    Current Block\n  --\x3e\n  <section v-if="theCurrentBlock">\n    <ti-gui-block \n      embed-in="tabs"\n      v-bind="theCurrentBlock"\n      :action-status="actionStatus"\n      :schema="schema"\n      :shown="shown"/>\n  </section>\n</div>'),function(){var t={inject:["$gui"],data:function(){return{myCurrentTab:0}},props:{tabAt:{type:String,default:"top-left",validator:function(t){return/^(top|bottom)-(left|center|right)$/.test(t)}},blocks:{type:Array,default:function(){return[]}},schema:{type:Object,default:function(){return{}}},actionStatus:{type:Object,default:function(){return{}}},shown:{type:Object,default:function(){return{}}}},computed:{topClass:function(){return Ti.Css.mergeClassName(["at-".concat(this.theTabAt[0])],this.className)},theTabAt:function(){return this.tabAt.split("-")},tabClass:function(){return"as-".concat(this.theTabAt[1])},theSchema:function(){return this.schema},theBlockWrapList:function(){for(var t=[],e=0;e<this.blocks.length;e++){var n=this.blocks[e],i=n.name||"tab-".concat(e);t.push({index:e,key:i,block:n})}return t},theTabItems:function(){var t,e=[],n=_createForOfIteratorHelper(this.theBlockWrapList);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=this.myCurrentTab==i.key,r={current:a,key:i.key,index:i.index,name:i.block.name,icon:i.block.icon,title:i.block.title,className:{"is-current":a}};r.icon||r.title||(r.title=Ti.Util.fallback(r.name,r.key)),e.push(r)}}catch(t){n.e(t)}finally{n.f()}return e},theCurrentTabItem:function(){var t,e=_createForOfIteratorHelper(this.theTabItems);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(n.current)return n}}catch(t){e.e(t)}finally{e.f()}},theCurrentBlock:function(){var t,e=_createForOfIteratorHelper(this.theBlockWrapList);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(this.myCurrentTab==n.key)return n.block}}catch(t){e.e(t)}finally{e.f()}}},methods:{onSetCurrentTabItem:function(t){var e;this.$gui.onBlockShownUpdate((e={},_defineProperty(e,t.key,!0),_defineProperty(e,this.theCurrentTabItem.key,!1),e))},syncCurrentTabFromShown:function(){var t,e=_createForOfIteratorHelper(this.theBlockWrapList);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(this.shown[n.key])return void(this.myCurrentTab=n.key)}}catch(t){e.e(t)}finally{e.f()}this.theBlockWrapList.length>0&&(this.myCurrentTab=this.theBlockWrapList[0].key)}},watch:{shown:function(){this.syncCurrentTabFromShown()},blocks:function(){this.syncCurrentTabFromShown()}},mounted:function(){this.syncCurrentTabFromShown()}};Ti.Preload("ti/com/ti/gui/tabs/ti-gui-tabs.mjs",t)}(),Ti.Preload("ti/com/ti/gui/tabs/_com.json",{name:"ti-gui-tabs",globally:!0,template:"./ti-gui-tabs.html",mixins:["./ti-gui-tabs.mjs"],components:["@com:ti/gui/block"]}),function(){var t={formatGuiBlock:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=["at-".concat(t.position||"center")],a=e[t.name];_.isUndefined(a)&&(a=!n),t.mask?i.push("show-mask"):i.push("no-mask");var r=t.position?"gui-panel-".concat(t.position):null,o=["className","actionDisplayMode","flex","icon","title","actions","name","adjustable","closer","position","overflow","status"],s={};!n||t.mask?(o.push("width"),o.push("height")):/^(left|right)$/.test(t.position)?(o.push("height"),s.width=t.width):/^(top|bottom)$/.test(t.position)?(o.push("width"),s.height=t.height):"center"==t.position?(o.push("width"),o.push("height")):(s.width=t.width,s.height=t.height);var c=_.pick(t,o);t.size&&"stretch"!=t.size&&("cols"==this.type?c.width=t.size:"rows"==this.type&&(c.height=t.size));var l,u;if(t.body){var d=t.body||{};if(_.isString(d)){var m=this.schema[d];if(_.isPlainObject(m)){if((d=m).extends){var h=this.schema[d.extends],p=_.omit(d,["extends"]);d=_.merge({},h,p)}}else d={comType:d,comConf:{}}}l=d.comType||"ti-label",u=d.comConf||{value:t.name||"GUI"}}else _.isEmpty(t.blocks)||(l="ti-gui",u=_.pick(t,["type","blocks","adjustable","border"]),_.defaults(u,{type:"cols",schema:this.schema,shown:this.shown}));return{className:i.join(" "),panelStyle:Ti.Css.toStyle(s),name:t.name,isShown:a,transName:r,info:c,comType:l,comConf:u}},getFormedBlockList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[];if(_.isArray(t)){var a,r=_createForOfIteratorHelper(t);try{for(r.s();!(a=r.n()).done;){var o=a.value,s=this.formatGuiBlock(o,e,n);i.push(s)}}catch(t){r.e(t)}finally{r.f()}}return i},createGuiBlockShown:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=_objectSpread({},t);if(_.isString(e))i[e]=n;else if(_.isArray(e)){var a,r=_createForOfIteratorHelper(e);try{for(r.s();!(a=r.n()).done;){i[a.value]=n}}catch(t){r.e(t)}finally{r.f()}}else _.isPlainObject(e)&&_.assign(i,e);return i}};Ti.Preload("ti/com/ti/gui/ti-gui-methods.mjs",t)}(),Ti.Preload("ti/com/ti/gui/ti-gui.html",'<div class="ti-gui" :class="TopClass">\n  \x3c!--===========================================\n    All normal layout\n  --\x3e\n  <div class="gui-con">\n    \x3c!--\n      Layout as rows\n    --\x3e\n    <ti-gui-rows v-if="isRowsLayout"\n      class="ti-fill-parent"\n      v-bind="TheLayout"\n      :schema="schema"\n      :shown="TheShown"\n      :default-flex="defaultFlex"\n      :action-status="actionStatus"/>\n    \x3c!--\n      Layout as cols\n    --\x3e\n    <ti-gui-cols v-else-if="isColsLayout"\n      class="ti-fill-parent"\n      v-bind="TheLayout"\n      :schema="schema"\n      :shown="TheShown"\n      :default-flex="defaultFlex"\n      :action-status="actionStatus"/>\n    \x3c!--\n      Layout as tabs\n    --\x3e\n    <ti-gui-tabs v-else-if="isTabsLayout"\n      class="ti-fill-parent"\n      v-bind="TheLayout"\n      :schema="schema"\n      :shown="TheShown"\n      :default-flex="defaultFlex"\n      :action-status="actionStatus"/>\n  </div>\n  \x3c!--===========================================\n    All float panels\n  --\x3e\n  <template v-for="pan in ThePanels">\n    <transition :name="pan.transName">\n      <ti-gui-panel\n        v-if="pan.visible"\n          :key="pan.key"\n          v-bind="pan.panel"\n          :viewport-width="myViewportWidth"\n          :viewport-height="myViewportHeight"\n          :schema="schema"\n          :shown="TheShown"\n          :default-flex="defaultFlex"\n          :action-status="actionStatus"/>\n    </transition>\n  </template>\n  \x3c!--===========================================\n    Loading\n  --\x3e\n  <div v-if="isLoading"\n    class="ti-mask-loading">\n    <ti-loading v-bind="TheLoading"/>\n  </div>\n</div>'),function(){var t={provide:function(){return{$gui:this}},data:function(){return{myShown:{},myViewportWidth:0,myViewportHeight:0}},props:{defaultFlex:{type:String,default:void 0,validator:function(t){return _.isUndefined(t)||/^(auto|grow|shrink|both|none)$/.test(t)}},layout:{type:Object,default:function(){return{desktop:{},tablet:"desktop",phone:"desktop"}}},schema:{type:Object,default:function(){return{}}},keepShownTo:{type:String,default:null},actionStatus:{type:Object,default:function(){return{}}},shown:{type:Object,default:function(){return{}}},canLoading:{type:Boolean,default:!1},loadingAs:{type:[Boolean,Object],default:null}},computed:{TopClass:function(){return this.getTopClass({"is-loading":this.isLoading})},TheLayout:function(){if(_.isEmpty(this.layout))return{};if(/^(rows|cols|tabs)$/.test(this.layout.type))return this.layout;var t=this.layout[this.viewportMode];return _.isString(t)&&(t=this.layout[t]),_.isString(t)&&(t=this.layout[t]),t||{}},isRowsLayout:function(){return"rows"==this.TheLayout.type},isColsLayout:function(){return"cols"==this.TheLayout.type},isTabsLayout:function(){return"tabs"==this.TheLayout.type},ThePanels:function(){var t=[];return this.joinThePanels(t,this.layout.panels,"G"),this.layout!=this.TheLayout&&this.joinThePanels(t,this.TheLayout.panels,this.viewportMode),t},TheShown:function(){return this.keepShownTo?this.myShown:this.shown},isLoading:function(){return!(!this.canLoading||!this.loadingAs)},TheLoading:function(){return _.isPlainObject(this.loadingAs)?this.loadingAs:{}}},methods:{isShown:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var i=0,a=e;i<a.length;i++){var r=a[i];if(this.TheShown[r])return!0}return!1},joinThePanels:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(_.isArray(e)&&e.length>0)for(var i=0;i<e.length;i++){var a=e[i],r=Ti.Util.fallback(a.position,"center"),o=t.length;t.push({index:o,visible:this.isShown(a.name),key:a.name||"panel-".concat(n,"-").concat(o),transName:"ti-gui-panel-".concat(r),panel:a})}},updateShown:function(t){this.syncMyShown(t),this.persistMyStatus()},onBlockShow:function(t){this.keepShownTo?this.updateShown(_defineProperty({},t,!0)):this.$notify("block:show",t)},onBlockHide:function(t){this.keepShownTo?this.updateShown(_defineProperty({},t,!1)):this.$notify("block:hide",t)},onBlockShownUpdate:function(t){this.keepShownTo?this.updateShown(t):this.$notify("block:shown",t)},syncMyShown:function(){if(this.keepShownTo){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];this.myShown=(t=_).assign.apply(t,[{},this.myShown].concat(n))}},persistMyStatus:function(){if(this.keepShownTo){var t=_.omitBy(this.myShown,function(t){return!t});Ti.Storage.session.setObject(this.keepShownTo,t)}},loadMyStatus:function(){if(this.keepShownTo){var t=Ti.Storage.session.getObject(this.keepShownTo);this.syncMyShown(this.shown,t)}},syncViewportMeasure:function(){var t=Ti.Rects.createBy(this.$el);this.myViewportWidth=t.width,this.myViewportHeight=t.height}},watch:{shown:function(t){this.syncMyShown(t)}},mounted:function(){var t=this;Ti.Viewport.watch(this,{resize:_.debounce(function(){return t.syncViewportMeasure()},100)}),this.syncViewportMeasure(),this.loadMyStatus()},beforeDestroy:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/gui/ti-gui.mjs",t)}(),Ti.Preload("ti/com/ti/gui/_com.json",{name:"ti-gui",globally:!0,template:"./ti-gui.html",methods:"./ti-gui-methods.mjs",mixins:["./ti-gui.mjs"],components:["@com:ti/gui/cols","@com:ti/gui/rows","@com:ti/gui/tabs","@com:ti/gui/panel"]}),Ti.Preload("ti/com/ti/icon/text/ti-icon-text.html",'<div class="ti-icon-text" \n  :class="className">\n  \x3c!--Icon--\x3e\n  <ti-icon v-if="icon" class="as-icon" :value="icon"/>\n  \x3c!--Text--\x3e\n  <div v-if="text" class="as-text">{{text|i18n}}</div>\n</div>'),function(){var t={inheritAttrs:!1,props:{icon:{type:[String,Object],default:""},text:{type:String,default:null}}};Ti.Preload("ti/com/ti/icon/text/ti-icon-text.mjs",t)}(),Ti.Preload("ti/com/ti/icon/text/_com.json",{name:"ti-icon-text",globally:!0,template:"./ti-icon-text.html",mixins:["./ti-icon-text.mjs"]}),Ti.Preload("ti/com/ti/icon/ti-icon.html",'<div \n  class="ti-icon" \n  :class="TopClass">\n  <div class="icon-icon"\n    :style="Icon.outerStyle">\n    \x3c!--Font icon--\x3e\n    <i v-if="\'font\'==Icon.type"\n      :class="Icon.className"\n      :style="Icon.innerStyle">\n      \x3c!--ligature font --\x3e\n      <template v-if="Icon.text">{{Icon.text}}</template>\n    </i>\n    \x3c!--Svg/Image--\x3e\n    <img v-else-if="\'svg\'==Icon.type || \'image\'==Icon.type"\n        :src="Icon.value"\n        :style="Icon.innerStyle"/>\n    \x3c!--\n      Default output the value\n    --\x3e\n    <em v-else>{{value}}</em>\n  </div>\n</div>'),function(){var t={inheritAttrs:!1,data:function(){return{myValue:null}},props:{base:{type:String,default:null},value:{type:[String,Object,Number],default:null},dict:{type:[String,Ti.Dict],default:null},defaultValue:{type:[String,Object],default:null},fontSize:{type:[Number,String],default:null},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null},color:{type:String,default:""},opacity:{type:Number,default:-1}},computed:{TopClass:function(){return this.getTopClass("is-".concat(this.Icon.type))},Dict:function(){if(this.dict){if(this.dict instanceof Ti.Dict)return this.dict;var t=Ti.DictFactory.explainDictName(this.dict).name;return Ti.DictFactory.CheckDict(t)}},Icon:function(){var t;if(_.isPlainObject(this.myValue)?t=this.myValue.type&&this.myValue.value?this.myValue:{type:"font",value:Ti.Icons.get(this.myValue)}:(t={type:"font",value:this.myValue},_.isString(this.myValue)&&(t.type=Ti.Util.getSuffixName(this.myValue)||"font"),/^(jpe?g|gif|png)$/i.test(t.type)&&(t.type="image")),"font"==t.type){var e=Ti.Icons.getByName(t.value,t.value);_.assign(t,Ti.Icons.parseFontIcon(e))}else"image"==t.type&&(Ti.Util.isBlank(this.base)||(t.value=Ti.Util.appendPath(this.base,t.value)));return t.outerStyle=Ti.Css.toStyle({width:this.width,height:this.height,color:this.color,opacity:this.opacity>=0?this.opacity:void 0}),"image"==t.type?t.innerStyle={width:this.width?"100%":void 0,height:this.height?"100%":void 0}:"font"==t.type&&(t.innerStyle={"font-size":this.fontSize?Ti.Css.toSize(this.fontSize):void 0}),t}},methods:{evalMyValue:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Ti.Util.fallbackNil(t.value,t.defaultValue),!t.Dict){e.next=7;break}return e.next=4,t.Dict.getItemIcon(n);case 4:t.myValue=e.sent,e.next=8;break;case 7:t.myValue=n;case 8:case"end":return e.stop()}},e)}))()}},watch:{value:{handler:"evalMyValue",immediate:!0}}};Ti.Preload("ti/com/ti/icon/ti-icon.mjs",t)}(),Ti.Preload("ti/com/ti/icon/_com.json",{name:"ti-icon",globally:!0,template:"./ti-icon.html",mixins:["./ti-icon.mjs"]}),Ti.Preload("ti/com/ti/imgfile/ti-imgfile.html",'<div class="ti-imgfile"\n  :class="TopClass">\n  \x3c!--\n    Hidden input file to choose files\n  --\x3e\n  <input \n    type="file" \n    ref="file" \n    class="ti-hide"\n    @change.stop.seft="OnSelectLocalFilesToUpload">\n  \x3c!--\n    Major preview zone\n  --\x3e\n  <div class="thumb-con"\n    :style="ThumbStyle"\n    @click="OnClickToEdit"\n    v-drop-files.mask="OnDropFiles">\n    \x3c!--\n      Preview\n    --\x3e\n    <ti-obj-thumb \n      :preview="PreviewThumb"\n      :progress="progress"\n      :footer="false"/>\n  </div>\n  \x3c!--\n    Remove\n  --\x3e\n  <div v-if="isShowRemoveIcon"\n    class="thumb-actions">\n    \x3c!--remove--\x3e\n    <div class="thumb-opt as-del"\n      @click="OnRemove">\n      <ti-icon value="zmdi-delete"/>\n      <span class="it-text">{{\'clear\'|i18n}}</span>\n    </div>\n    \x3c!--open--\x3e\n    <div class="thumb-opt as-open"\n      @click="OnOpen">\n      <ti-icon value="zmdi-open-in-new"/>\n      <span class="it-text">{{\'open\'|i18n}}</span>\n    </div>\n    \x3c!--//////--\x3e\n  </div>\n</div>'),function(){var t={props:{src:{type:String,default:null},uploadFile:{type:File,default:null},progress:{type:Number,default:-1},width:{type:[String,Number],default:100},height:{type:[String,Number],default:100},removable:{type:Boolean,default:!0}},computed:{TopClass:function(){return this.getTopClass()},ThumbStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})},isShowRemoveIcon:function(){return!(this.uploadFile||!this.src)},PreviewThumb:function(){return this.uploadFile?{type:"localFile",value:this.uploadFile}:this.src?{type:"image",value:this.src}:{type:"font",value:"zmdi-plus"}}},methods:{OnClickToEdit:function(){this.$refs.file.click()},OnDropFiles:function(t){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:(i=_.get(t,0))&&e.$notify("upload",i);case 2:case"end":return n.stop()}},n)}))()},OnSelectLocalFilesToUpload:function(t){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.OnDropFiles(t.target.files);case 2:e.$refs.file.value="";case 3:case"end":return n.stop()}},n)}))()},OnRemove:function(){this.$notify("remove")},OnOpen:function(){this.$notify("open")}}};Ti.Preload("ti/com/ti/imgfile/ti-imgfile.mjs",t)}(),Ti.Preload("ti/com/ti/imgfile/_com.json",{name:"ti-imgfile",globally:!0,template:"./ti-imgfile.html",mixins:["./ti-imgfile.mjs"],components:["@com:ti/obj/thumb"]}),Ti.Preload("ti/com/ti/input/color/ti-input-color.html",'<ti-combo-box class="ti-input-color"\n  :class="topClass"\n  :drop-width="null"\n  :status="status"\n  @collapse="doCollapse">\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <span class="as-color"\n      @click.left="onToggleDrop">\n        <u class="as-bg"></u>\n        <u class="as-fr" :style="colorStyle"></u>\n    </span>\n    <span class="as-clear" @click="onClearColor">\n      <ti-icon value="zmdi-close"/>\n    </span>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <ti-color \n      :value="value"\n      @change="onColorChanged"/>\n  </template>\n</ti-combo-box>'),function(){var t={inheritAttrs:!1,data:function(){return{hideBorder:!1,status:"collapse"}},props:{value:{type:[String,Number],default:null}},computed:{topClass:function(){return Ti.Css.mergeClassName({"is-empty":!this.hasValue,"is-valued":this.hasValue,"show-border":!this.hideBorder,"hide-border":this.hideBorder},this.className)},colorStyle:function(){var t=Ti.Types.toColor(this.value,null);if(t)return{background:t.rgba}},isCollapse:function(){return"collapse"==this.status},isExtended:function(){return"extended"==this.status},hasValue:function(){return!Ti.Util.isNil(this.value)}},methods:{onToggleDrop:function(){this.status={collapse:"extended",extended:"collapse"}[this.status]},onClearColor:function(){this.$notify("change",null)},onColorChanged:function(t){var e=Ti.Types.toColor(t);this.$notify("change",e?e.toString():null)},doCollapse:function(){this.status="collapse"}}};Ti.Preload("ti/com/ti/input/color/ti-input-color.mjs",t)}(),Ti.Preload("ti/com/ti/input/color/_com.json",{name:"ti-input-color",globally:!0,template:"./ti-input-color.html",mixins:["./ti-input-color.mjs"],components:["@com:ti/color"]}),Ti.Preload("ti/com/ti/input/date/ti-input-date.html",'<ti-combo-box class="as-date"\n  :class="topClass"\n  :width="width"\n  :drop-width="null"\n  :status="status"\n  @collapse="doCollapse">\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <ti-input \n      :readonly="!canInput"\n      :hide-border="hideBorder"\n      :placeholder="placeholder|i18n"\n      :prefix-icon="icon"\n      :suffix-icon="theStatusIcon"\n      :value="theInputValue"\n      :height="height"\n      :focus="isExtended"\n      @change="onChanged"\n      @input:focus="onInputFocused"\n      @suffix:icon="onClickStatusIcon"/>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <ti-calendar\n      :value="theDropDate"\n      :month-format="monthFormat"\n      :begin-year="beginYear"\n      :end-year="endYear"\n      @change="onDateChanged"/>\n  </template>\n</ti-combo-box>'),function(){var t={data:function(){return{runtime:null,status:"collapse"}},props:{canInput:{type:Boolean,default:!0},value:{type:[String,Number,Date],default:null},icon:{type:String,default:"far-calendar-alt"},format:{type:String,default:"yyyy-MM-dd"},placeholder:{type:[String,Number],default:"i18n:blank-date"},hideBorder:{type:Boolean,default:!1},autoCollapse:{type:Boolean,default:!0},width:{type:[Number,String],default:"2rem"},height:{type:[Number,String],default:void 0},monthFormat:{type:String,default:"yyyy-MM"},beginYear:{type:[Number,String],default:1970},endYear:{type:[Number,String],default:(new Date).getFullYear()+1},statusIcons:{type:Object,default:function(){return{collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"}}}},computed:{topClass:function(){return Ti.Css.mergeClassName(this.className)},isCollapse:function(){return"collapse"==this.status},isExtended:function(){return"extended"==this.status},theDate:function(){return Ti.Types.toDate(this.value,null)},theDropDate:function(){return this.runtime||this.theDate},theInputValue:function(){return this.isExtended?this.getDateText(this.theDropDate):this.getDateText(this.theDropDate,this.format)},theStatusIcon:function(){return this.statusIcons[this.status]}},methods:{applyRuntime:function(){if(this.runtime){var t=this.runtime;this.runtime=null;var e=this.getDateText(t);this.$notify("change",e)}},doExtend:function(){this.status="extended"},doCollapse:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).escaped,e=void 0!==t&&t;this.status="collapse",e?this.runtime=null:this.applyRuntime()},onInputFocused:function(){this.doExtend()},onChanged:function(t){if(_.isEmpty(t))this.$notify("change",null);else{var e=Ti.Types.toDate(t),n=this.getDateText(e);this.$notify("change",n)}},onClickStatusIcon:function(){this.isExtended?this.doCollapse():this.doExtend()},onDateChanged:function(t){this.runtime=t,this.autoCollapse&&this.doCollapse()},getDateText:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd",n=Ti.Types.toDate(t,null);return Ti.Types.formatDate(n,e)}}};Ti.Preload("ti/com/ti/input/date/ti-input-date.mjs",t)}(),Ti.Preload("ti/com/ti/input/date/_com.json",{name:"ti-input-date",globally:!0,template:"./ti-input-date.html",mixins:["./ti-input-date.mjs"],components:["@com:ti/combo/input","@com:ti/calendar"]}),Ti.Preload("ti/com/ti/input/daterange/ti-input-daterange.html",'<ti-combo-box class="as-daterange"\n  :class="topClass"\n  :drop-width="null"\n  :status="status"\n  @collapse="doCollapse">\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <ti-input \n      :readonly="!canInput"\n      :hide-border="hideBorder"\n      :placeholder="placeholder|i18n"\n      :prefix-icon="icon"\n      :suffix-icon="theStatusIcon"\n      :value="theInputValue"\n      :width="width"\n      :height="height"\n      :focus="isExtended"\n      @change="onChanged"\n      @input:focus="onInputFocused"\n      @suffix:icon="onClickStatusIcon"/>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <ti-calendar\n      :value="theDropRange"\n      :range="true"\n      :matrix-count="matrixCount"\n      :month-format="monthFormat"\n      :begin-year="beginYear"\n      :end-year="endYear"\n      @change="onDateRangeChanged"/>\n  </template>\n</ti-combo-box>'),function(){var t={data:function(){return{runtime:null,status:"collapse"}},props:{canInput:{type:Boolean,default:!0},value:{type:[String,Number,Date,Array],default:null},icon:{type:String,default:"fas-calendar-alt"},format:{type:String,default:"yyyy-MM-dd HH:mm:ss"},valueType:{type:String,default:"ms-range",validator:function(t){return/^(ms-(array|range)|ds-(array|range)|date-array)$/.test(t)}},placeholder:{type:String,default:"i18n:blank-date-range"},hideBorder:{type:Boolean,default:!1},width:{type:[Number,String],default:"3rem"},height:{type:[Number,String],default:void 0},matrixCount:{type:Number,default:2},monthFormat:{type:String,default:"yyyy-MM-dd"},beginYear:{type:[Number,String],default:1970},endYear:{type:[Number,String],default:(new Date).getFullYear()+1},statusIcons:{type:Object,default:function(){return{collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"}}}},computed:{topClass:function(){return Ti.Css.mergeClassName(this.className)},isCollapse:function(){return"collapse"==this.status},isExtended:function(){return"extended"==this.status},theValue:function(){if(_.isEmpty(this.value))return null;if(_.isString(this.value)){var t=_.trim(this.value),e=/^[[(](.+)[\])]$/.exec(t);e&&(t=_.trim(e[1]));var n=Ti.S.toArray(t,{sep:","});if(n.length>0)return Ti.Types.toDate(n)}return _.isString(this.value)?Ti.Types.toDate(this.value):void 0},theDate:function(){return _.isArray(this.theValue)&&!_.isEmpty(this.theValue)?Ti.Types.toDate(this.theValue[0]):this.theValue?Ti.Types.toDate(this.theValue):void 0},theRangeInMs:function(){if(!this.theDate)return[];var t,e=new Date(this.theDate);t=_.isArray(this.theValue)&&this.theValue.length>1?Ti.Types.toDate(this.theValue[1]):new Date(e);var n=[e.getTime(),t.getTime()].sort();return e=Ti.DateTime.setTime(new Date(n[0])),t=Ti.DateTime.setDayLastTime(new Date(n[1])),[e.getTime(),t.getTime()]},theRange:function(){return _.isEmpty(this.theRangeInMs)?[]:[new Date(this.theRangeInMs[0]),new Date(this.theRangeInMs[1])]},theDropRange:function(){return this.runtime||this.theRange},theRangeValue:function(){return this.formatRangeValue(this.theRange,{valueType:"ds-array",format:"yyyy-MM-dd",collapse:!0}).join(", ")},theRangeText:function(){if(!_.isEmpty(this.theRange)){var t=this.theRange[0],e=this.theRange[1],n=t.getFullYear(),i=t.getMonth(),a=t.getDate(),r=e.getFullYear(),o=e.getMonth(),s=e.getDate(),c=Ti.DateTime.getMonthAbbr(i),l=Ti.DateTime.getMonthAbbr(o),u={yy0:n,yy1:r,MM0:++i,MM1:++o,dd0:a,dd1:s,MA0:c,MA1:l,MT0:Ti.I18n.get(c),MT1:Ti.I18n.get(l)};return n!=r?Ti.I18n.getf("cal.d-range-beyond-years",u):i!=o?Ti.I18n.getf("cal.d-range-beyond-months",u):a!=s?Ti.I18n.getf("cal.d-range-beyond-days",u):Ti.I18n.getf("cal.d-range-in-same-day",u)}},theInputValue:function(){return this.isExtended?this.theRangeValue:this.theRangeText},theStatusIcon:function(){return this.statusIcons[this.status]}},methods:{applyRuntime:function(){if(this.runtime){var t=this.runtime;this.runtime=null;var e=this.formatRangeValue(t);this.$notify("change",e)}},doExtend:function(){this.status="extended"},doCollapse:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).escaped,e=void 0!==t&&t;this.status="collapse",e?this.runtime=null:this.applyRuntime()},onInputFocused:function(){this.doExtend()},onChanged:function(t){var e=this.parseDateRange(t);if(_.isEmpty(e))this.$notify("change",null);else{var n=this.formatRangeValue(e);this.$notify("change",n)}},onClickStatusIcon:function(){this.isExtended?this.doCollapse():this.doExtend()},onDateRangeChanged:function(t){this.runtime=t},parseDateRange:function(t){if(_.isEmpty(t))return[];var e=t.split(",");if(_.isEmpty(e))return[];if(1==e.length){var n=Ti.Types.toDate(e[0]);Ti.DateTime.setTime(n);var i=new Date(n.getTime());return Ti.DateTime.setDayLastTime(i),[n,i]}var a=Ti.Types.toDate(e[0]);Ti.DateTime.setTime(a);var r=Ti.Types.toDate(e[1]);return Ti.DateTime.setDayLastTime(r),[a,r].sort(function(t,e){return t.getTime()-e.getTime()})},formatRangeValue:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.valueType,i=e.format,a=e.collapse,r=void 0!==a&&a,o=_slicedToArray(t||[],2),s=o[0],c=o[1];if(!s)return[];c||(c=new Date(s),Ti.DateTime.setDayLastTime(c)),n=n||this.valueType,i=i||this.format;var l=(0,{"ms-range":function(){return"[".concat(s.getTime(),",").concat(c.getTime(),"]")},"ms-array":function(){return[s.getTime(),c.getTime()]},"ds-range":function(){return"["+[Ti.Types.formatDate(s,i),Ti.Types.formatDate(c,i)].join(",")+"]"},"ds-array":function(){return[Ti.Types.formatDate(s,i),Ti.Types.formatDate(c,i)]},"date-array":function(){return[s,c]}}[n])();return r&&l[0]==l[1]?[l[0]]:l}}};Ti.Preload("ti/com/ti/input/daterange/ti-input-daterange.mjs",t)}(),Ti.Preload("ti/com/ti/input/daterange/_com.json",{name:"ti-input-daterange",globally:!0,template:"./ti-input-daterange.html",mixins:["./ti-input-daterange.mjs"],components:["@com:ti/combo/input","@com:ti/calendar"]}),Ti.Preload("ti/com/ti/input/datetime/ti-input-datetime.html",'<ti-combo-box class="as-datetime"\n  :class="topClass"\n  :width="width"\n  :drop-width="\'box\'"\n  :drop-overflow="\'hidden\'"\n  :status="status"\n  @collapse="doCollapse">\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <ti-input \n      :readonly="!canInput"\n      :hide-border="hideBorder"\n      :placeholder="placeholder|i18n"\n      :prefix-icon="icon"\n      :suffix-icon="theStatusIcon"\n      :value="theInputValue"\n      :height="height"\n      :focus="isExtended"\n      @change="onChanged"\n      @input:focus="onInputFocused"\n      @suffix:icon="onClickStatusIcon"/>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <ti-datetime\n      :value="theDropDate"\n      :month-format="monthFormat"\n      :begin-year="beginYear"\n      :end-year="endYear"\n      @change="onDateChanged"/>\n  </template>\n</ti-combo-box>'),function(){var t={inheritAttrs:!1,data:function(){return{runtime:null,status:"collapse"}},props:{canInput:{type:Boolean,default:!0},value:{type:[String,Number,Date],default:null},icon:{type:String,default:"fas-clock"},format:{type:String,default:"yyyy-MM-dd HH:mm:ss"},placeholder:{type:[String,Number],default:"i18n:blank-datetime"},hideBorder:{type:Boolean,default:!1},autoCollapse:{type:Boolean,default:!1},width:{type:[Number,String],default:"2.4rem"},height:{type:[Number,String],default:void 0},monthFormat:{type:String,default:"yyyy-MM"},beginYear:{type:[Number,String],default:1970},endYear:{type:[Number,String],default:(new Date).getFullYear()+1},statusIcons:{type:Object,default:function(){return{collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"}}}},computed:{topClass:function(){return Ti.Css.mergeClassName(this.className)},isCollapse:function(){return"collapse"==this.status},isExtended:function(){return"extended"==this.status},theDate:function(){return Ti.Types.toDate(this.value,null)},theDropDate:function(){return this.runtime||this.theDate},theInputValue:function(){return this.isExtended?this.getDateText(this.theDropDate):this.getDateText(this.theDropDate,this.format)},theStatusIcon:function(){return this.statusIcons[this.status]}},methods:{applyRuntime:function(){if(this.runtime){var t=this.runtime;this.runtime=null;var e=this.getDateText(t);this.$notify("change",e)}},doExtend:function(){this.status="extended"},doCollapse:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).escaped,e=void 0!==t&&t;this.status="collapse",e?this.runtime=null:this.applyRuntime()},onInputFocused:function(){this.doExtend()},onChanged:function(t){if(_.isEmpty(t))this.$notify("change",null);else{var e=Ti.Types.toDate(t),n=this.getDateText(e);this.$notify("change",n)}},onClickStatusIcon:function(){this.isExtended?this.doCollapse():this.doExtend()},onDateChanged:function(t){this.runtime=t,this.autoCollapse&&this.doCollapse()},getDateText:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd HH:mm:ss",n=Ti.Types.toDate(t,null);return Ti.Types.formatDate(n,e)}}};Ti.Preload("ti/com/ti/input/datetime/ti-input-datetime.mjs",t)}(),Ti.Preload("ti/com/ti/input/datetime/_com.json",{name:"ti-input-datetime",globally:!0,template:"./ti-input-datetime.html",mixins:["./ti-input-datetime.mjs"],components:["@com:ti/combo/input","@com:ti/datetime"]}),function(){var t={options:{type:Array,default:function(){return["im-spotify","im-newsletter","im-award","im-headphones","im-megaphone","im-barcode","im-google-play","im-facebook-messenger","im-wechat","im-line","im-git","im-first-aid","im-ribbon","im-plane","im-idea","im-data","im-data-delete","im-data-validate","im-folder-add","im-radar","im-pizza","im-truck","im-support","im-reset","im-import","im-export","im-color-fan","im-cookie","im-gift-card","im-factory","im-pulse","im-accessibility","im-apartment","im-plugin","im-layer","im-direction","im-dribbble","im-radio","im-bank","im-battery-empty","im-battery","im-battery-full","im-x-mark-circle-o","im-timer","im-hashtag","im-server","im-flask","im-anchor","im-umbrella","im-cc-amex","im-cc-visa","im-cc-mastercard","im-cc-paypal","im-cc-amazon","im-cc-bitcoin","im-car","im-paintbrush","im-cube","im-cubes","im-language","im-calculator","im-user-settings","im-trophy","im-pointer","im-edit","im-warning-circle","im-check-mark-circle-o","im-date-o","im-newspaper-o","im-wrench","im-binoculars","im-gamepad","im-history","im-bell-active","im-coffee","im-leaf","im-gift","im-flip-chart-o","im-clock","im-line-chart-up","im-laptop-o","im-monitor-o","im-cursor","im-keyboard","im-pin","im-store","im-graduation-hat","im-certificate-o","im-sun","im-diamond-o","im-drop","im-paperplane","im-fingerprint","im-lifebuoy","im-power","im-target","im-navigation","im-bug","im-network","im-pie-chart","im-note-o","im-id-card","im-tags","im-floppy-disk","im-dashboard","im-tools","im-users","im-trash-can","im-x-mark-circle","im-x-mark","im-shield","im-mobile","im-inbox","im-crown","im-check-square","im-check-square-o","im-check-mark-circle","im-check-mark","im-redo","im-undo","im-map-o","im-task-o","im-menu-dot-v","im-edit-off","im-facebook","im-sitemap","im-save","im-volume-off","im-volume","im-sign-out","im-sign-in","im-shopping-cart","im-rocket","im-banknote","im-fullscreen","im-minimize","im-maximize","im-light-bulb","im-filter","im-picture-o","im-eye-off","im-eye","im-external-link","im-random","im-loop","im-next","im-previous","im-eject","im-stop","im-pause","im-play","im-credit-card","im-bookmark","im-upload","im-download","im-video-camera","im-photo-camera","im-care-up","im-care-down","im-care-left","im-arrow-up-circle","im-arrow-down-circle","im-arrow-left-circle","im-arrow-right-circle","im-arrow-up","im-arrow-down","im-arrow-left","im-arrow-right","im-angle-up-circle","im-angle-down-circle","im-angle-left-circle","im-angle-right-circle","im-angle-up","im-angle-down","im-angle-left","im-angle-right","im-twitch","im-reddit","im-edge","im-whatsapp","im-amazon","im-snapchat","im-instagram","im-fire","im-sync","im-toggle","im-control-panel","im-archive","im-bell","im-bell-off","im-youtube","im-spinner","im-smiley-o","im-frown-o","im-code","im-android-os","im-linux-os","im-apple-os","im-menu","im-menu-list","im-menu-dot-h","im-windows-os","im-square-o","im-check-square-i","im-radio-button-circle","im-radio-button-circle-o","im-flag","im-opera","im-thumb-up","im-thumb-down","im-safari","im-paper-clip","im-firefox","im-copy","im-chrome","im-quote-left","im-quote-right","im-ie","im-briefcase","im-forbidden","im-vk","im-wizard","im-location","im-paypal","im-coin","im-key","im-lock","im-lock-open","im-share","im-flash","im-cloud","im-database","im-wifi","im-book","im-audio","im-video","im-microphone","im-printer","im-computer","im-phone","im-user-male","im-user-female","im-user-circle","im-clock-o","im-calendar","im-pencil","im-question","im-bar-chart","im-info","im-folder","im-folder-open","im-file","im-file-o","im-files-o","im-warning","im-link","im-unlink","im-tag","im-heart","im-cloud-upload","im-cloud-download","im-speech-bubble","im-speech-bubble-comment","im-speech-bubble-comments","im-mail","im-globe","im-home","im-window-o","im-table","im-windows-o","im-gear","im-twitter","im-magnifier","im-magnifier-plus","im-magnifier-minus","im-minus","im-minus-circle","im-plus","im-plus-circle","im-care-right","im-star","im-star-half","im-star-o","im-circle-o","im-xing","im-vimeo","im-tumblr","im-stumbleupon","im-stackoverflow","im-soundcloud","im-skype","im-pinterest","im-linkedin","im-google-plus","im-github","im-flickr","im-facebook-like","im-blogger","im-behance"]}}};Ti.Preload("ti/com/ti/input/icon/ti-input-icon-props.mjs",t)}(),Ti.Preload("ti/com/ti/input/icon/ti-input-icon.html",'<ti-combo-box class="ti-input-icon"\n  :class="topClass"\n  :drop-width="dropWidth"\n  :drop-height="dropHeight"\n  :status="status"\n  @collapse="doCollapse">\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <span class="as-value"\n      :style="theValueStyle"\n      @click.left="onToggleDrop">\n      \x3c!--Show Icon--\x3e\n      <ti-icon \n        v-if="hasValue"\n          :value="value"/>\n      \x3c!--No Icon--\x3e\n      <span \n        v-else\n          class="no-icon"><i class="zmdi zmdi-cake"></i></span>\n    </span>\n    <span class="as-clear" @click="onClearIcon">\n      <ti-icon value="zmdi-close"/>\n    </span>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <div class="icon-input">\n      <input ref="input"\n        :placeholder="\'i18n:icon-code-tip\'|i18n"\n        @change="onChangedIcon">\n    </div>\n    <div class="icon-options">\n      <ul>\n        <li v-for="li of theOptionIcons"\n          @click.left="onSelectIcon(li)"\n          @dblclick.left="onSelectIconAndCollapse(li)"\n          @mouseenter="onHoverIcon(li)"\n          @mouseleave="onLeaveIcon(li)">\n          <ti-icon :value="li.value"/>\n        </li>\n      </ul>\n    </div>\n    <div class="icon-tip">\n      <template v-if="theTipIcon">\n        <ti-icon :value="theTipIcon"/>\n        <span>{{theTipIcon}}</span>\n      </template>\n      <template v-else>\n        <span>...</span>\n      </template>\n    </div>\n  </template>\n</ti-combo-box>'),function(){var t={inheritAttrs:!1,data:function(){return{hideBorder:!1,myHoverIcon:null,status:"collapse"}},props:{value:{type:[String,Object],default:null},iconSize:{type:[Number,String],default:null},dropWidth:{type:[Number,String],default:"4rem"},dropHeight:{type:[Number,String],default:"4rem"}},computed:{topClass:function(){return Ti.Css.mergeClassName({"show-border":!this.hideBorder,"hide-border":this.hideBorder},this.className)},theValueStyle:function(){return{"font-size":Ti.Css.toSize(this.iconSize)}},isCollapse:function(){return"collapse"==this.status},isExtended:function(){return"extended"==this.status},hasValue:function(){return!Ti.Util.isNil(this.value)},theTipIcon:function(){return this.myHoverIcon||this.value},theOptionIcons:function(){var t=[];return _.forEach(this.options,function(e,n){var i=/^([a-z]+)-(.+)$/.exec(e);t.push({value:e,index:n,type:i[1],name:i[2]})}),t}},methods:{onToggleDrop:function(){this.status={collapse:"extended",extended:"collapse"}[this.status]},onSelectIcon:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;this.$notify("change",t)},onSelectIconAndCollapse:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;this.$notify("change",t),this.status="collapse"},onChangedIcon:function(){var t=_.trim(this.$refs.input.value);console.log("haha",t),this.$notify("change",t)},onHoverIcon:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;this.myHoverIcon=t},onLeaveIcon:function(){this.myHoverIcon=null},onClearIcon:function(){this.$notify("change",null)},doCollapse:function(){this.status="collapse"}}};Ti.Preload("ti/com/ti/input/icon/ti-input-icon.mjs",t)}(),Ti.Preload("ti/com/ti/input/icon/_com.json",{name:"ti-input-icon",globally:!0,template:"./ti-input-icon.html",props:"./ti-input-icon-props.mjs",mixins:["./ti-input-icon.mjs"]}),Ti.Preload("ti/com/ti/input/month/ti-input-month.html",'<ti-combo-box class="as-month"\n  :class="topClass"\n  :width="width"\n  :drop-width="dropWidth"\n  :drop-height="dropHeight"\n  :drop-overflow="\'hidden\'"\n  :status="status"\n  @collapse="doCollapse">\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <ti-input \n      :readonly="!canInput"\n      :hide-border="hideBorder"\n      :placeholder="placeholder|i18n"\n      :prefix-icon="icon"\n      :suffix-icon="theStatusIcon"\n      :value="theInputValue"\n      :height="height"\n      :focus="isExtended"\n      @change="onChanged"\n      @input:focus="onInputFocused"\n      @suffix:icon="onClickStatusIcon"/>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <ti-month\n      :value="theDropDate"\n      :height="dropHeight"\n      :begin-year="beginYear"\n      :end-year="endYear"\n      @change="onMonthChanged"/>\n  </template>\n</ti-combo-box>'),function(){var t={inheritAttrs:!1,data:function(){return{runtime:null,status:"collapse"}},props:{canInput:{type:Boolean,default:!0},value:{type:[String,Number,Date],default:null},icon:{type:String,default:"far-calendar"},format:{type:String,default:"yyyy-MM"},placeholder:{type:[String,Number],default:"i18n:blank-month"},hideBorder:{type:Boolean,default:!1},width:{type:[Number,String],default:"1.4rem"},height:{type:[Number,String],default:void 0},dropWidth:{type:[Number,String],default:"box"},dropHeight:{type:[Number,String],default:200},beginYear:{type:[Number,String],default:1970},endYear:{type:[Number,String],default:(new Date).getFullYear()+1},statusIcons:{type:Object,default:function(){return{collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"}}}},computed:{topClass:function(){return Ti.Css.mergeClassName(this.className)},isCollapse:function(){return"collapse"==this.status},isExtended:function(){return"extended"==this.status},theDate:function(){return Ti.Types.toDate(this.value,null)},theDropDate:function(){return this.runtime||this.theDate},theInputValue:function(){return this.isExtended?this.getDateText(this.theDropDate):this.getDateText(this.theDropDate,this.format)},theStatusIcon:function(){return this.statusIcons[this.status]}},methods:{applyRuntime:function(){if(this.runtime){var t=this.runtime;this.runtime=null;var e=this.getDateText(t);this.$notify("change",e)}},doExtend:function(){this.status="extended"},doCollapse:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).escaped,e=void 0!==t&&t;this.status="collapse",e?this.runtime=null:this.applyRuntime()},onInputFocused:function(){this.doExtend()},onChanged:function(t){if(_.isEmpty(t))this.$notify("change",null);else{var e=Ti.Types.toDate(t),n=this.getDateText(e);this.$notify("change",n)}},onClickStatusIcon:function(){this.isExtended?this.doCollapse():this.doExtend()},onMonthChanged:function(t){this.runtime=t},getDateText:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM",n=Ti.Types.toDate(t,null);return Ti.Types.formatDate(n,e)}}};Ti.Preload("ti/com/ti/input/month/ti-input-month.mjs",t)}(),Ti.Preload("ti/com/ti/input/month/_com.json",{name:"ti-input-month",globally:!0,template:"./ti-input-month.html",mixins:["./ti-input-month.mjs"],components:["@com:ti/combo/input","@com:ti/month"]}),Ti.Preload("ti/com/ti/input/num/ti-input-num.html",'<div\n  class="ti-input-num ti-fill-parent"\n  :class="TopClass"\n  :style="TopStyle">\n  \x3c!--\n    Button: -\n  --\x3e\n  <div class="as-btn is-decrease"\n    :class="DesreaseClass"\n    @click="changeByStep(-1)">\n    <ti-icon value="zmdi-minus"/>\n  </div>\n  \x3c!--\n    Input\n  --\x3e\n  <div class="as-input">\n    <input \n      spellcheck="false" \n      :value="TheValue"\n      @change="onChanged">\n  </div>\n  \x3c!--\n    Button: +\n  --\x3e\n  <div class="as-btn is-increase"\n    :class="IncreaseClass"\n    @click="changeByStep(1)">\n    <ti-icon value="zmdi-plus"/>\n  </div>\n</div>'),function(){var t={props:{value:null,defaultValue:{type:Number,default:0},maxValue:{type:Number,default:void 0},minValue:{type:Number,default:void 0},step:{type:Number,default:1},width:{type:[Number,String],default:200}},computed:{TopClass:function(){return this.getTopClass()},TopStyle:function(){return Ti.Css.toStyleRem100({width:this.width})},DesreaseClass:function(){return!_.isUndefined(this.minValue)&&this.value<=this.minValue?"is-disabled":"is-enabled"},IncreaseClass:function(){return!_.isUndefined(this.maxValue)&&this.value>=this.maxValue?"is-disabled":"is-enabled"},TheValue:function(){if(!isNaN(this.value)&&_.isNumber(this.value))return this.getValue(this.value)}},methods:{getValue:function(t){return isNaN(t)||!_.isNumber(t)?this.defaultValue:!_.isUndefined(this.minValue)&&t<this.minValue?this.minValue:!_.isUndefined(this.maxValue)&&t>this.maxValue?this.maxValue:t},changeByStep:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.TheValue;_.isUndefined(e)?e=this.defaultValue:e+=t*this.step,(e=this.getValue(e))!=this.value&&this.$notify("change",e)},onChanged:function(t){var e=t.target;if(_.isElement(e)){var n=_.trim(e.value);if(_.isEmpty(n))this.$notify("change",null);else{var i=n?1*n:this.defaultValue;isNaN(i)||this.$notify("change",i)}}}}};Ti.Preload("ti/com/ti/input/num/ti-input-num.mjs",t)}(),Ti.Preload("ti/com/ti/input/num/_com.json",{name:"ti-input-num",globally:!0,template:"./ti-input-num.html",mixins:["./ti-input-num.mjs"]}),function(){var t={dict:{type:[String,Ti.Dict],default:null},inputValue:null,maxValueLen:{type:Number,default:0},valueUnique:{type:Boolean,default:!0},tagOptions:{type:[Array,Function],default:function(){return[]}},tagMapping:{type:Object,default:void 0},canInput:{type:Boolean,default:!0},cancelTagBubble:{type:Boolean,default:!1},tagItemIconBy:{type:[String,Function],default:void 0},tagItemDefaultIcon:{type:String,default:void 0},tagOptionDefaultIcon:{type:String,default:void 0}};Ti.Preload("ti/com/ti/input/tags/ti-input-tags-props.mjs",t)}(),Ti.Preload("ti/com/ti/input/tags/ti-input-tags.html",'<ti-input\n  class="ti-input-tags"\n  :class-name="className"\n  :value="inputValue"\n  :value-case="valueCase"\n  :trimed="trimed"\n\n  :readonly="!canInput || readonly"\n  :focused="focused"\n  :hover="hover"\n  :auto-select="autoSelect"\n\n  :placeholder="thePlaceholder"\n  :auto-i18n="autoI18n"\n  :hide-border="hideBorder"\n  :prefix-icon="prefixIcon"\n  :prefix-hover-icon="prefixHoverIcon"\n  :prefix-icon-for-clean="prefixIconForClean"\n  :prefix-text="prefixText"\n  :suffix-icon="suffixIcon"\n  :suffix-text="suffixText"\n  \n  :width="width"\n  :height="height"\n\n  :on-init="onInputInit"\n  \n  @inputing="onInputInputing"\n  @change="onInputChanged"\n  @input:focus="$notify(\'input:focus\')"\n  @prefix:icon="$notify(\'prefix:icon\')"\n  @input:blur="$notify(\'input:blur\')"\n  @suffix:icon="$notify(\'suffix:icon\')">\n  \x3c!--\n    Tag List\n  --\x3e\n  <div v-if="hasTags"\n    class="as-tags">\n    <ti-tags\n      :value="theTags"\n      :dict="dict"\n      :removable="true"\n      :item-options="tagOptions"\n      :item-icon-by="tagItemIconBy"\n      :item-default-icon="tagItemDefaultIcon"\n      :option-default-icon="tagOptionDefaultIcon"\n      :mapping="tagMapping"\n      :cancel-item-bubble="cancelTagBubble"\n      @change="$notify(\'change\', $event)"/>\n  </div>\n</ti-input>'),function(){var t={data:function(){return{}},props:{inputChange:{type:Function,default:void 0}},computed:{theTags:function(){return this.evalTagList(this.value)},hasTags:function(){return!_.isEmpty(this.theTags)},thePlaceholder:function(){return this.placeholder?this.placeholder:this.readonly||!this.canInput?"":"i18n:input-tags"}},methods:{onInputInit:function(t){this.$input=t},evalTagList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=_.filter(_.concat(t),function(t){return!Ti.Util.isNil(t)});if(Ti.Util.isNil(e)||n.push(e),this.valueUnique&&(n=_.uniq(n)),this.maxValueLen>0)n=_.slice(n,0,this.maxValueLen);else if(this.maxValueLen<0){var i=Math.max(0,n.length+this.maxValueLen);n=_.slice(n,i)}var a,r=[],o=_createForOfIteratorHelper(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;_.isPlainObject(s)?r.push(_.assign({icon:this.tagIcon,options:this.tagOptions},s)):r.push(s)}}catch(t){o.e(t)}finally{o.f()}return r},getTagValues:function(){var t,e=[],n=_createForOfIteratorHelper(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=_.isPlainObject(i)?i.value:i;Ti.Util.isNil(a)||e.push(a)}}catch(t){n.e(t)}finally{n.f()}return e},onInputInputing:function(t){this.$notify("inputing",t)},onInputChanged:function(t){if(_.isNull(t))this.$notify("change",[]);else if(_.isFunction(this.inputChange))this.inputChange(t);else if(t){var e=this.evalTagList(this.value,t),n=this.getTagValues(e);this.$notify("change",n)}}}};Ti.Preload("ti/com/ti/input/tags/ti-input-tags.mjs",t)}(),Ti.Preload("ti/com/ti/input/tags/_com.json",{name:"ti-input-tags",globally:!0,template:"./ti-input-tags.html",props:["@com:ti/input/ti-input-props.mjs","./ti-input-tags-props.mjs"],mixins:["./ti-input-tags.mjs"],components:["@com:ti/tags"]}),Ti.Preload("ti/com/ti/input/text/ti-input-text.html",'<div class="ti-input-text" \n  :class="topClass" \n  :style="topStyle"\n  v-ti-activable>\n  \x3c!--\n    Prefix\n  --\x3e\n  <div class="as-bar is-prefix">\n    \x3c!--prefix:icon--\x3e\n    <div v-if="prefixIcon"\n      class="as-icon at-prefix"\n      :class="getHoverClass(\'prefixIcon\')"\n      @click.left.stop="onClickPrefixIcon"\n      @mouseenter="pointerHover=\'prefixIcon\'"\n      @mouseleave="pointerHover=null">\n      <ti-icon :value="thePrefixIcon"/>\n    </div>\n    \x3c!--prefix:text--\x3e\n    <div v-if="prefixText" \n      class="as-text at-prefix"\n      :class="getHoverClass(\'prefixText\')"\n      @click.left.stop="onClickPrefixText"\n      @mouseenter="pointerHover=\'prefixText\'"\n      @mouseleave="pointerHover=null">\n      <span>{{prefixText|i18n}}</span>\n    </div>\n  </div>\n  \x3c!--input--\x3e\n  <textarea ref="input"\n    spellcheck="false" \n    :readonly="readonly"\n    :value="theValue"\n    :placeholder="placeholder"\n    @compositionstart="onInputCompositionStart"\n    @compositionend="onInputCompositionEnd"\n    @input="onInputing"\n    @keydown="onInputKeyDown"\n    @change="onInputChanged"\n    @focus="onInputFocus"\n    @blur="onInputBlur"></textarea>\n  \x3c!--\n    Suffox\n  --\x3e\n  <div class="as-bar is-suffix">\n    \x3c!--suffix:text--\x3e\n    <div v-if="suffixText"\n      class="as-text at-suffix"\n      :class="getHoverClass(\'suffixText\')"\n      @click.left.stop="onClickSuffixIcon"\n      @mouseenter="pointerHover=\'suffixText\'"\n      @mouseleave="pointerHover=null">\n      <span>{{suffixText|i18n}}</span>\n    </div>\n    \x3c!--suffix:icon--\x3e\n    <div v-if="suffixIcon"\n      class="as-icon at-suffix"\n      :class="getHoverClass(\'suffixIcon\')"\n      @click.left.stop="onClickSuffixIcon"\n      @mouseenter="pointerHover=\'suffixIcon\'"\n      @mouseleave="pointerHover=null">\n      <ti-icon :value="suffixIcon"/>\n    </div>\n  </div>\n</div>'),function(){var t,e=(t={inheritAttrs:!1,data:function(){return{inputCompositionstart:!1,isFocused:!1,pointerHover:null}},watch:{focus:function(t){this.isFocused=t}},props:{value:null,format:{type:[String,Array,Object],default:void 0},readonly:{type:Boolean,default:!1},valueCase:{type:String,default:null,validator:function(t){return Ti.Util.isNil(t)||Ti.S.isValidCase(t)}},placeholder:{type:[String,Number],default:null},trimed:{type:Boolean,default:!0},autoJsValue:{type:Boolean,default:!1},hideBorder:{type:Boolean,default:!1},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null},prefixHoverIcon:{type:String,default:"zmdi-close-circle"},prefixIconForClean:{type:Boolean,default:!0},prefixIcon:{type:String,default:null},prefixText:{type:String,default:null},suffixText:{type:String,default:null},suffixIcon:{type:String,default:null},focus:{type:Boolean,default:!1},hover:{type:[Array,String],default:function(){return["prefixIcon","suffixIcon"]}},autoSelect:{type:Boolean,default:!1}},computed:{topClass:function(){return Ti.Css.mergeClassName(this.className,{"is-self-actived":this.isSelfActived,"is-actived":this.isActived,"is-focused":this.isFocused,"is-blurred":!this.isFocused,"is-readonly":this.readonly,"show-border":!this.hideBorder,"hide-border":this.hideBorder,"has-prefix-icon":this.thePrefixIcon,"has-prefix-text":this.prefixText,"has-suffix-icon":this.suffixIcon,"has-suffix-text":this.suffixText})},topStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})},theValue:function(){return Ti.Types.toStr(this.value,this.format)},thePrefixIcon:function(){return"prefixIcon"==this.pointerHover&&this.isCanHover("prefixIcon")?this.prefixHoverIcon||this.prefixIcon:this.prefixIcon},theHover:function(){var t,e={},n=_createForOfIteratorHelper(_.concat(this.hover));try{for(n.s();!(t=n.n()).done;){var i=t.value;i&&(e[i]=!0)}}catch(t){n.e(t)}finally{n.f()}return e}},methods:{isCanHover:function(t){return!!this.theHover[t]},getHoverClass:function(t){var e=this.isCanHover(t);return{"can-hover":e,"for-look":!e}},onInputCompositionStart:function(){this.inputCompositionstart=!0},onInputCompositionEnd:function(){this.inputCompositionstart=!1,this.doWhenInput()},onInputing:function(t){this.inputCompositionstart||this.doWhenInput()},doWhenInput:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"inputing",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(_.isElement(this.$refs.input)){var n=this.$refs.input.value;e?n=Ti.S.toJsValue(n,{autoNil:!0,autoDate:!1,trimed:this.trimed}):this.trimed&&(n=_.trim(n)),n=Ti.S.toCase(n,this.valueCase),this.$notify(t,n)}},onInputKeyDown:function(t){var e=_.pick(t,"code","key","keyCode","altKey","ctrlKey","metaKey","shiftKey");e.uniqueKey=Ti.Shortcut.getUniqueKey(e),e.$event=t,this.$notify("keypress",e)},onInputChanged:function(){this.doWhenInput("change",this.autoJsValue)},onInputFocus:function(){this.readonly||(this.autoSelect?this.$refs.input.select():this.$refs.input.focus()),this.isFocused=!0,this.$notify("input:focus"),this.isActived||this.setActived()},onInputBlur:function(){this.isFocused=!1,this.$notify("input:blur")},onClickPrefixIcon:function(){this.prefixIconForClean&&this.$notify("change",null),this.$notify("prefix:icon")},onClickPrefixText:function(){this.$notify("prefix:text")},onClickSuffixIcon:function(){this.$notify("suffix:icon")},onClickSuffixText:function(){this.$notify("suffix:text")},doAutoFocus:function(){this.focus&&!this.isFocused&&this.onInputFocus()}}},_defineProperty(t,"watch",{focus:function(){this.doAutoFocus()}}),_defineProperty(t,"mounted",function(){this.doAutoFocus()}),t);Ti.Preload("ti/com/ti/input/text/ti-input-text.mjs",e)}(),Ti.Preload("ti/com/ti/input/text/_com.json",{name:"ti-input-text",globally:!0,template:"./ti-input-text.html",mixins:["./ti-input-text.mjs"],components:[]}),function(){var t={value:null,format:void 0,valueCase:{type:String,default:null,validator:function(t){return Ti.Util.isNil(t)||Ti.S.isValidCase(t)}},trimed:{type:Boolean,default:!0},autoJsValue:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},focused:{type:Boolean,default:!1},hover:{type:[Array,String],default:function(){return["prefixIcon","suffixIcon"]}},autoSelect:{type:Boolean,default:!1},placeholder:{type:[String,Number],default:null},autoI18n:{type:Boolean,default:!1},hideBorder:{type:Boolean,default:!1},prefixIcon:{type:[String,Object],default:null},prefixHoverIcon:{type:String,default:"zmdi-close-circle"},prefixIconForClean:{type:Boolean,default:!0},prefixText:{type:String,default:null},suffixIcon:{type:[String,Object],default:null},suffixText:{type:String,default:null},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null}};Ti.Preload("ti/com/ti/input/ti-input-props.mjs",t)}(),Ti.Preload("ti/com/ti/input/ti-input.html",'<div class="ti-input" \n  :class="TopClass" \n  :style="TopStyle"\n  v-ti-activable>\n  \x3c!--prefix:icon--\x3e\n  <div v-if="prefixIcon"\n    class="as-input-icon at-prefix"\n    :class="getHoverClass(\'prefixIcon\')"\n    @click.left="OnClickPrefixIcon"\n    @mouseenter="pointerHover=\'prefixIcon\'"\n    @mouseleave="pointerHover=null">\n    <ti-icon :value="ThePrefixIcon"/>\n  </div>\n  \x3c!--prefix:text--\x3e\n  <div v-if="prefixText" \n    class="as-input-text at-prefix"\n    :class="getHoverClass(\'prefixText\')"\n    @click.left="OnClickPrefixText"\n    @mouseenter="pointerHover=\'prefixText\'"\n    @mouseleave="pointerHover=null">\n    <span>{{prefixText|i18n}}</span>\n  </div>\n  \x3c!--PreSlot--\x3e\n  <slot></slot>\n  \x3c!--\n    Input Box\n  --\x3e\n  <div class="as-input">\n    <input ref="input"\n      spellcheck="false" \n      :readonly="readonly"\n      :value="TheValue"\n      :placeholder="placeholder|i18n"\n      @compositionstart="OnInputCompositionStart"\n      @compositionend="OnInputCompositionEnd"\n      @input="OnInputing"\n      @change="OnInputChanged"\n      @focus="OnInputFocus"\n      @blur="OnInputBlur">\n    \x3c!--suffix:text--\x3e\n    <div v-if="suffixText"\n      class="as-input-text at-suffix"\n      :class="getHoverClass(\'suffixText\')"\n      @click.left="OnClickSuffixIcon"\n      @mouseenter="pointerHover=\'suffixText\'"\n      @mouseleave="pointerHover=null">\n      <span>{{suffixText|i18n}}</span>\n    </div>\n    \x3c!--suffix:icon--\x3e\n    <div v-if="suffixIcon"\n      class="as-input-icon at-suffix"\n      :class="getHoverClass(\'suffixIcon\')"\n      @click.left="OnClickSuffixIcon"\n      @mouseenter="pointerHover=\'suffixIcon\'"\n      @mouseleave="pointerHover=null">\n      <ti-icon :value="suffixIcon"/>\n    </div>\n  </div>\n</div>'),function(){var t={model:{prop:"value",event:"change"},data:function(){return{inputCompositionstart:!1,isFocused:!1,pointerHover:null}},computed:{TopClass:function(){return this.getTopClass({"is-focused":this.isFocused,"is-blurred":!this.isFocused,"is-readonly":this.readonly,"show-border":!this.hideBorder,"hide-border":this.hideBorder,"has-prefix-icon":this.thePrefixIcon,"has-prefix-text":this.prefixText,"has-suffix-icon":this.suffixIcon,"has-suffix-text":this.suffixText})},TopStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})},TheValue:function(){var t=Ti.Types.toStr(this.value,this.format);return this.autoI18n?Ti.I18n.text(t):t},ThePrefixIcon:function(){return"prefixIcon"==this.pointerHover&&this.isCanHover("prefixIcon")?this.prefixHoverIcon||this.prefixIcon:this.prefixIcon},TheHover:function(){var t,e={},n=_createForOfIteratorHelper(_.concat(this.hover));try{for(n.s();!(t=n.n()).done;){var i=t.value;i&&(e[i]=!0)}}catch(t){n.e(t)}finally{n.f()}return e}},methods:{isCanHover:function(t){return!!this.TheHover[t]},getHoverClass:function(t){var e=this.isCanHover(t);return{"can-hover":e,"for-look":!e,"is-prefix-icon-hover":"prefixIcon"==t}},OnInputCompositionStart:function(){this.inputCompositionstart=!0},OnInputCompositionEnd:function(){this.inputCompositionstart=!1,this.doWhenInput()},OnInputing:function(t){this.inputCompositionstart||this.doWhenInput()},doWhenInput:function(){var t=this.getInputValue(!1);Ti.Util.isNil(t)||this.$notify("inputing",t)},OnInputChanged:function(){var t=this.getInputValue(this.autoJsValue);this.$notify("change",t)},OnInputFocus:function(){this.readonly||(this.autoSelect?this.$refs.input.select():this.$refs.input.focus()),this.isFocused=!0,this.$notify("input:focus"),this.isActived||this.setActived()},OnInputBlur:function(){this.isFocused=!1,this.$notify("input:blur")},OnClickPrefixIcon:function(){this.prefixIconForClean&&this.$notify("change",null),this.$notify("prefix:icon")},OnClickPrefixText:function(){this.$notify("prefix:text")},OnClickSuffixIcon:function(){this.$notify("suffix:icon")},OnClickSuffixText:function(){this.$notify("suffix:text")},getInputValue:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(_.isElement(this.$refs.input)){var e=this.$refs.input.value;return t?e=Ti.S.toJsValue(e,{autoNil:!0,autoDate:!1,trimed:this.trimed}):this.trimed&&(e=_.trim(e)),e=Ti.S.toCase(e,this.valueCase)}},doAutoFocus:function(){this.focused&&!this.isFocused&&this.OnInputFocus()}},watch:{focused:"doAutoFocus"},mounted:function(){this.doAutoFocus()}};Ti.Preload("ti/com/ti/input/ti-input.mjs",t)}(),Ti.Preload("ti/com/ti/input/time/ti-input-time.html",'<ti-combo-box class="as-time"\n  :class="topClass"\n  :width="width"\n  :drop-width="dropWidth"\n  :drop-height="dropHeight"\n  :drop-overflow="\'hidden\'"\n  :status="status"\n  @collapse="doCollapse">\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <ti-input \n      :readonly="!canInput"\n      :hide-border="hideBorder"\n      :placeholder="placeholder|i18n"\n      :prefix-icon="icon"\n      :suffix-icon="theStatusIcon"\n      :value="theTimeText"\n      :height="height"\n      :focus="isExtended"\n      @change="onChanged"\n      @input:focus="onInputFocused"\n      @suffix:icon="onClickStatusIcon"/>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <ti-time\n      :value="theDropTime"\n      :height="dropHeight"\n      :mode="mode"\n      @change="onTimeChanged"/>\n  </template>\n</ti-combo-box>'),function(){var t={inheritAttrs:!1,data:function(){return{runtime:null,status:"collapse"}},props:{canInput:{type:Boolean,default:!0},value:{type:[String,Number,Ti.Types.Time],default:null},icon:{type:String,default:"far-clock"},valueUnit:{type:String,default:"s",validator:function(t){return/^(ms|s|min|hr)$/.test(t)}},mode:{type:String,default:"auto",validator:function(t){return/^(sec|min|auto)$/.test(t)}},placeholder:{type:[String,Number],default:"i18n:blank-time"},hideBorder:{type:Boolean,default:!1},width:{type:[Number,String],default:"1.4rem"},height:{type:[Number,String],default:void 0},dropWidth:{type:[Number,String],default:"box"},dropHeight:{type:[Number,String],default:400},statusIcons:{type:Object,default:function(){return{collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"}}}},computed:{topClass:function(){return Ti.Css.mergeClassName(this.className)},isCollapse:function(){return"collapse"==this.status},isExtended:function(){return"extended"==this.status},theTime:function(){return Ti.Types.toTime(this.value,this.valueUnit)},theDropTime:function(){return this.runtime||this.theTime},theTimeFormat:function(){return{sec:"HH:mm:ss",min:"HH:mm",auto:"auto"}[this.mode]},theTimeText:function(){return this.getTimeText(this.theDropTime)},theStatusIcon:function(){return this.statusIcons[this.status]}},methods:{applyRuntime:function(){if(this.runtime){var t=this.runtime;this.runtime=null;var e=this.getTimeText(t);this.$notify("change",e)}},doExtend:function(){this.status="extended"},doCollapse:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).escaped,e=void 0!==t&&t;this.status="collapse",e?this.runtime=null:this.applyRuntime()},onInputFocused:function(){this.doExtend()},onChanged:function(t){if(_.isEmpty(t))this.$notify("change",null);else{var e=Ti.Types.toTime(t),n=this.getTimeText(e);this.$notify("change",n)}},onClickStatusIcon:function(){this.isExtended?this.doCollapse():this.doExtend()},onTimeChanged:function(t){this.runtime=t},getTimeText:function(t){if(t instanceof Ti.Types.Time)return t.toString(this.theTimeFormat)}}};Ti.Preload("ti/com/ti/input/time/ti-input-time.mjs",t)}(),Ti.Preload("ti/com/ti/input/time/_com.json",{name:"ti-input-time",globally:!0,template:"./ti-input-time.html",mixins:["./ti-input-time.mjs"],components:["@com:ti/combo/input","@com:ti/time"]}),Ti.Preload("ti/com/ti/input/timerange/ti-input-timerange.html",'<ti-combo-box class="as-timerange"\n  :class="topClass"\n  :width="width"\n  :drop-width="null"\n  :status="status"\n  @collapse="doCollapse">\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <ti-input \n      :readonly="!canInput"\n      :hide-border="hideBorder"\n      :placeholder="placeholder|i18n"\n      :prefix-icon="icon"\n      :suffix-icon="theStatusIcon"\n      :value="theRangeText"\n      :height="height"\n      :focus="isExtended"\n      @change="onChanged"\n      @input:focus="onInputFocused"\n      @suffix:icon="onClickStatusIcon"/>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <ti-form\n      :data="theDropRange"\n      v-bind="theFormConfig"\n      @change="onFormChanged"/>\n  </template>\n</ti-combo-box>'),function(){var t={inheritAttrs:!1,data:function(){return{runtime:null,status:"collapse"}},props:{canInput:{type:Boolean,default:!0},value:{type:[String,Object,Number,Array],default:null},rangeKeys:{type:Array,default:function(){return["beginTime","endTime"]}},valueMode:{type:String,default:"Array"},dftValue:{type:Array,default:function(){return["09:00","17:00"]}},icon:{type:String,default:"zmdi-time-interval"},format:{type:String,default:"HH:mm"},placeholder:{type:String,default:"i18n:blank-time-range"},hideBorder:{type:Boolean,default:!1},width:{type:[Number,String],default:"2rem"},height:{type:[Number,String],default:void 0},statusIcons:{type:Object,default:function(){return{collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"}}}},computed:{topClass:function(){return Ti.Css.mergeClassName(this.className)},isCollapse:function(){return"collapse"==this.status},isExtended:function(){return"extended"==this.status},theFormConfig:function(){var t=_slicedToArray(this.rangeKeys,2);return{fields:[{name:t[0],type:"Time",title:"i18n:time-begin",comType:"ti-input-time"},{name:t[1],type:"Time",title:"i18n:time-end",comType:"ti-input-time"}],spacing:"tiny",statusIcons:null}},theRange:function(){return this.parseTimeRange(this.value)},theRangeText:function(){var t=this,e=_slicedToArray(this.rangeKeys,2),n=(e[0],e[1],[]);return _.forEach(this.theRange,function(e){e?n.push(e.toString(t.format)):n.push(Ti.Types.formatTime(0,t.format))}),n.join(" ~ ")},theRangeValue:function(){return this.formatRangeValue(this.theRange)},theDropRange:function(){return this.runtime||this.theRangeValue},theStatusIcon:function(){return this.statusIcons[this.status]}},methods:{applyRuntime:function(){if(this.runtime){var t=this.parseTimeRange(this.runtime);this.runtime=null;var e=this.formatRangeValue(t),n=this.formatEmitRangeValue(e);this.$notify("change",n)}},doExtend:function(){this.status="extended"},doCollapse:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).escaped,e=void 0!==t&&t;this.status="collapse",e?this.runtime=null:this.applyRuntime()},onInputFocused:function(){this.doExtend()},onChanged:function(t){var e=this.parseTimeRange(t);if(_.isEmpty(e))this.$notify("change",null);else{var n=this.formatRangeValue(e),i=this.formatEmitRangeValue(n);this.$notify("change",i)}},onClickStatusIcon:function(){this.isExtended?this.doCollapse():this.doExtend()},formatEmitRangeValue:function(t){var e=_slicedToArray(this.rangeKeys,2),n=e[0],i=e[1];if(t&&"Array"==this.valueMode){var a=[t[n],t[i]];return _.filter(a,function(t){return t&&_.isString(t)})}return t},onFormChanged:function(t){var e=_.assign({},this.theRangeValue,this.runtime);e[t.name]=t.value,this.runtime=e},parseTimeRange:function(t){var e=_slicedToArray(this.rangeKeys,2),n=e[0],i=e[1];t=Ti.Util.fallback(t,this.dftValue,{});var a={};if(_.isNumber(t)){a=_defineProperty({},n,Ti.Types.toTime(t))}else if(_.isString(t)){var r,o=_.trim(t),s=_.split(o,/[\t ,\/~-]+/),c=Ti.Types.toTime(s[0]),l=Ti.Types.toTime(s[1]);_defineProperty(r={},n,c),_defineProperty(r,i,l),a=r}else if(_.isArray(t)){var u;_defineProperty(u={},n,Ti.Types.toTime(t[0])),_defineProperty(u,i,Ti.Types.toTime(t[1])),a=u}else _.isPlainObject(t)&&(a=_.pick(t,this.rangeKeys));return this.normalizeRange(a)},normalizeRange:function(t){var e=_slicedToArray(this.rangeKeys,2),n=e[0],i=e[1];if(t&&t[n]&&t[i]){var a=Ti.Types.toTime(t[n]),r=Ti.Types.toTime(t[i]);if(a.valueInMilliseconds>r.valueInMilliseconds){t[n];t[n]=r,t[i]=a}}return t},formatRangeValue:function(t){var e=_.assign({},t);return _.forEach(e,function(t,n){e[n]=t?t.toString():Ti.Types.formatTime(0)}),e}}};Ti.Preload("ti/com/ti/input/timerange/ti-input-timerange.mjs",t)}(),Ti.Preload("ti/com/ti/input/timerange/_com.json",{name:"ti-input-timerange",globally:!0,template:"./ti-input-timerange.html",mixins:["./ti-input-timerange.mjs"],components:["@com:ti/combo/input"]}),Ti.Preload("ti/com/ti/input/_com.json",{name:"ti-input",globally:!0,template:"./ti-input.html",props:"./ti-input-props.mjs",mixins:["./ti-input.mjs"],components:[]}),function(){var t={value:null,dict:{type:[String,Ti.Dict],default:void 0},trimed:{type:Boolean,default:!0},format:void 0,href:{type:String,default:void 0},newTab:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},hover:{type:[Array,String],default:function(){return["suffixIcon"]}},placeholder:{type:String,default:"i18n:nil"},autoI18n:{type:Boolean,default:!0},prefixIcon:{type:String,default:void 0},prefixText:{type:String,default:void 0},suffixText:{type:String,default:void 0},suffixIcon:{type:String,default:void 0},width:{type:[Number,String],default:void 0},height:{type:[Number,String],default:void 0},valueMaxWidth:{type:[Number,String],default:void 0}};Ti.Preload("ti/com/ti/label/ti-label-props.mjs",t)}(),Ti.Preload("ti/com/ti/label/ti-label.html",'<div class="ti-label"\n  :class="TopClass"\n  :style="TopStyle"\n  @dblclick.left="OnDblClick">\n  \x3c!--prefix:icon--\x3e\n  <div v-if="ThePrefixIcon"\n    class="as-icon at-prefix"\n    :class="getHoverClass(\'prefixIcon\')"\n    @click.left="OnClickPrefixIcon">\n    <ti-icon :value="ThePrefixIcon"/>\n  </div>\n  \x3c!--prefix:text--\x3e\n  <div v-if="prefixText" \n    class="as-text at-prefix"\n    :class="getHoverClass(\'prefixText\')"\n    @click.left="OnClickPrefixText">\n    <span>{{prefixText|i18n}}</span>\n  </div>\n  \x3c!--Text--\x3e\n  <div class="as-value"\n    :style="ValueStyle"\n    @click.left="OnClickValue">\n    \x3c!--Link--\x3e\n    <a v-if="href"\n        :href="href"\n        :taget="newTab ? \'_blank\' : undefined"\n        @click.left.prevent>{{myDisplayText}}</a>\n    \x3c!--Normal Text--\x3e\n    <span v-else>{{myDisplayText}}</span>\n  </div>\n  \x3c!--suffix:text--\x3e\n  <div v-if="suffixText"\n    class="as-text at-suffix"\n    :class="getHoverClass(\'suffixText\')"\n    @click.left="OnClickSuffixIcon">\n    <span>{{suffixText|i18n}}</span>\n  </div>\n  \x3c!--suffix:icon--\x3e\n  <div v-if="suffixIcon"\n    class="as-icon at-suffix"\n    :class="getHoverClass(\'suffixIcon\')"\n    @click.left="OnClickSuffixIcon">\n    <ti-icon :value="suffixIcon"/>\n  </div>\n</div>'),function(){var t={data:function(){return{myDisplayIcon:void 0,myDisplayText:void 0,myDictValKey:void 0}},computed:{TopClass:function(){return this.getTopClass({"is-blank":!_.isNumber(this.TheValue)&&_.isEmpty(this.TheValue),"is-nowrap":this.valueMaxWidth>0})},TopStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})},ValueStyle:function(){return Ti.Css.toStyle({maxWidth:this.valueMaxWidth})},ThePrefixIcon:function(){return null===this.prefixIcon?null:this.myDisplayIcon||this.prefixIcon},TheHover:function(){var t,e={},n=_createForOfIteratorHelper(_.concat(this.hover));try{for(n.s();!(t=n.n()).done;){var i=t.value;i&&(e[i]=!0)}}catch(t){n.e(t)}finally{n.f()}return e},TheValue:function(){var t=this.value;return this.trim&&_.isString(t)?_.trim(t):t},Dict:function(){if(this.dict){if(this.dict instanceof Ti.Dict)return this.myDictValKey=".text",this.dict;var t=Ti.DictFactory.explainDictName(this.dict),e=t.name,n=t.vKey;return this.myDictValKey=n||".text",Ti.DictFactory.CheckDict(e)}}},methods:{isCanHover:function(t){return!!this.TheHover[t]},getHoverClass:function(t){var e=this.isCanHover(t);return{"can-hover":e,"for-look":!e,"is-prefix-icon-hover":"prefixIcon"==t}},OnDblClick:function(){var t=this;this.editable&&Ti.Be.EditIt(this.$el,{text:this.TheValue,ok:function(e){t.$notify("change",e)}})},OnClickPrefixIcon:function(){this.$notify("prefix:icon")},OnClickPrefixText:function(){this.$notify("prefix:text")},OnClickValue:function(){this.$notify("click:value")},OnClickSuffixIcon:function(){this.$notify("suffix:icon")},OnClickSuffixText:function(){this.$notify("suffix:text")},evalDisplay:function(t){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.Dict){n.next=5;break}return n.next=3,e.Dict.getItem(t);case 3:(i=n.sent)?(e.myDisplayIcon=e.Dict.getIcon(i),t=e.Dict.getBy(e.myDictValKey,i,t)):e.myDisplayIcon=null;case 5:if(!_.isNumber(t)){n.next=9;break}if(!e.format){n.next=8;break}return n.abrupt("return",Ti.Types.toStr(t,e.format));case 8:return n.abrupt("return",t);case 9:if(!_.isArray(t)&&!_.isPlainObject(t)){n.next=11;break}return n.abrupt("return",JSON.stringify(t,null,"  "));case 11:if(!Ti.Util.isNil(t)){n.next=13;break}return n.abrupt("return",Ti.I18n.text(e.placeholder));case 13:if(!_.isDate(t)){n.next=15;break}return n.abrupt("return",Ti.Types.toStr(t,e.format));case 15:return e.format&&(t=Ti.Types.toStr(t,e.format)),n.abrupt("return",e.autoI18n?Ti.I18n.text(t):t);case 17:case"end":return n.stop()}},n)}))()},reloadMyDisplay:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.myDisplayIcon=null,e.next=3,t.evalDisplay(t.TheValue);case 3:t.myDisplayText=e.sent;case 4:case"end":return e.stop()}},e)}))()}},watch:{value:{handler:"reloadMyDisplay",immediate:!0}}};Ti.Preload("ti/com/ti/label/ti-label.mjs",t)}(),Ti.Preload("ti/com/ti/label/_com.json",{name:"ti-label",globally:!0,template:"./ti-label.html",props:"./ti-label-props.mjs",mixins:["./ti-label.mjs"]}),Ti.Preload("ti/com/ti/label/_hmaker.json",{icon:"im-tag",title:"i18n:com-label",scenes:["desktop","tablet","phone"],editComType:"ti-form",editComConf:{mode:"tab",data:"=comConf",fields:[{title:"i18n:hmk-aspect",fields:[{title:"i18n:hmk-placeholder",name:"placeholder",comType:"ti-input"},{title:"i18n:hmk-autoI18n",name:"autoI18n",type:"Boolean",defaultAs:!0,comType:"ti-toggle"},{title:"i18n:hmk-prefixIcon",name:"prefixIcon",comType:"ti-input-icon"},{title:"i18n:hmk-prefixText",name:"prefixText",comType:"ti-input"},{title:"i18n:hmk-suffixIcon",name:"suffixIcon",comType:"ti-input-icon"},{title:"i18n:hmk-suffixText",name:"suffixText",comType:"ti-input"}]},{title:"i18n:hmk-behavior",fields:[{title:"i18n:hmk-href",name:"href",comType:"ti-input"},{title:"i18n:hmk-newTab",name:"newTab",type:"Boolean",hidden:{href:"NoEmpty"},comType:"ti-toggle"},{title:"i18n:hmk-breakLine",name:"breakLine",type:"Boolean",defaultAs:!0,comType:"ti-toggle"},{title:"i18n:hmk-editable",name:"editable",type:"Boolean",comType:"ti-toggle"}]},{title:"i18n:hmk-data",fields:[{title:"i18n:hmk-value",name:"value",comType:"ti-input"},{title:"i18n:hmk-dict",name:"dict",comType:"ti-input"},{title:"i18n:hmk-trimed",name:"trimed",type:"Boolean",comType:"ti-toggle"},{title:"i18n:hmk-format",name:"format",comType:"ti-input",comConf:{autoJsValue:!0}}]},{title:"i18n:hmk-measure",fields:[{title:"i18n:hmk-width",name:"width",comType:"ti-input"},{title:"i18n:hmk-height",name:"height",comType:"ti-input"},{title:"i18n:hmk-valueMaxWidth",name:"valueMaxWidth",comType:"ti-input"}]}]}}),Ti.Preload("ti/com/ti/lbs/map/baidu/ti-lbs-map-baidu.html",'<div class="ti-lbs-map by-baidu ti-fill-parent">\n  <div ref="arena" class="map-arena ti-fill-parent"></div>\n</div>'),function(){var t={inheritAttrs:!1,data:function(){return{valueMarker:null}},props:{mapType:{type:String,default:"ROADMAP"},center:{type:Object,default:null},zoom:{type:Number,default:8},value:{type:Object,default:null},valueOptions:{type:Object,default:function(){return{icon:null,title:"UserMarker",animation:"DOWN"}}}},computed:{mapCenterLatLng:function(){return _.isEmpty(this.center)?_.isEmpty(this.value)?this.genLatLng({lat:39.9042,lng:116.4074}):this.genLatLng(this.value):this.genLatLng(this.center)},mapTypeId:function(){return{ROADMAP:BMAP_NORMAL_MAP,SATELLITE:BMAP_SATELLITE_MAP,HYBRID:BMAP_HYBRID_MAP}[this.mapType]||BMAP_NORMAL_MAP}},methods:{genLatLng:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.lat,n=t.lng;return new BMap.Point(n,e)},drawValue:function(){var t=this.__map;this.valueOptions;if(this.value){var e=this.genLatLng(this.value),n=new BMap.Marker(e);t.addOverlay(n),this.valueMarker=n}}},watch:{value:function(){this.drawValue()}},mounted:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(e=new BMap.Map(this.$refs.arena,{mapType:this.mapTypeId})).centerAndZoom(this.mapCenterLatLng,this.zoom),e.addControl(new BMap.MapTypeControl({mapTypes:[BMAP_NORMAL_MAP,BMAP_SATELLITE_MAP,BMAP_HYBRID_MAP]})),e.enableScrollWheelZoom(!0),this.__map=e,this.drawValue();case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()};Ti.Preload("ti/com/ti/lbs/map/baidu/ti-lbs-map-baidu.mjs",t)}(),Ti.Preload("ti/com/ti/lbs/map/baidu/_com.json",{name:"ti-lbs-map-baidu",globally:!0,template:"./ti-lbs-map-baidu.html",mixins:["./ti-lbs-map-baidu.mjs"],components:[]}),Ti.Preload("ti/com/ti/lbs/map/tencent/ti-lbs-map-tencent.html",'<div class="ti-lbs-map by-tencent ti-fill-parent">\n  <div ref="arena" class="map-arena ti-fill-parent"></div>\n</div>'),function(){var t={inheritAttrs:!1,data:function(){return{valueMarker:null}},props:{mapType:{type:String,default:"ROADMAP"},center:{type:Object,default:null},zoom:{type:Number,default:8},value:{type:Object,default:null},valueOptions:{type:Object,default:function(){return{icon:null,title:"UserMarker",animation:"DOWN"}}}},computed:{mapCenterLatLng:function(){return _.isEmpty(this.center)?_.isEmpty(this.value)?this.genLatLng({lat:39.9042,lng:116.4074}):this.genLatLng(this.value):this.genLatLng(this.center)},mapTypeId:function(){return qq.maps.MapTypeId[this.mapType]||qq.maps.MapTypeId.ROADMAP}},methods:{genLatLng:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.lat,n=t.lng;return new qq.maps.LatLng(e,n)},drawValue:function(){var t=this.__map,e=this.valueOptions;if(this.value){var n=this.genLatLng(this.value),i=new qq.maps.Marker({position:n,animation:qq.maps.MarkerAnimation[e.animation],map:t,draggable:!0,title:e.title,visible:!0});this.valueMarker=i}}},watch:{value:function(){this.drawValue()}},mounted:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=new qq.maps.Map(this.$refs.arena,{zoom:this.zoom,center:this.mapCenterLatLng,mapTypeId:this.mapTypeId}),this.__map=e,this.drawValue();case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()};Ti.Preload("ti/com/ti/lbs/map/tencent/ti-lbs-map-tencent.mjs",t)}(),Ti.Preload("ti/com/ti/lbs/map/tencent/_com.json",{name:"ti-lbs-map-tencent",globally:!0,template:"./ti-lbs-map-tencent.html",mixins:["./ti-lbs-map-tencent.mjs"],components:[]}),Ti.Preload("ti/com/ti/lbs/map/ti-lbs-map.html",'<div class="ti-lbs-map" \n  :class="topClass"\n  :style="topStyle">\n  <div class="map-con">\n    \x3c!--\n      Map Main\n    --\x3e\n    <div class="as-main">\n      <component \n        :is="mapComType"\n        v-bind="mapComConf"/>\n    </div>\n    \x3c!--\n      Map Info\n    --\x3e\n    <div class="as-info">\n      <div class="as-toggle" @click="fullScreen=!fullScreen">\n        <ti-icon :value="toggleIcon"/>\n      </div>\n      <ul class="as-laln">\n        <li><span>{{\'lat\'|i18n}}:</span><em>{{lalnCenter.lat|float(8)}}</em></li>\n        <li><span>{{\'lng\'|i18n}}:</span><em>{{lalnCenter.lng|float(8)}}</em></li>\n      </ul>\n    </div>\n  </div>\n</div>'),function(){var t={inheritAttrs:!1,data:function(){return{fullScreen:!1}},props:{by:{type:String,default:"tencent"},mapType:{type:String,default:"ROADMAP"},center:{type:Object,default:null},autoFloat:{type:Number,default:1e7},width:{type:[String,Number],default:400},height:{type:[String,Number],default:400},zoom:{type:Number,default:8},coordinate:{type:String,default:"WGS84"},value:{type:Object,default:null},layers:{type:Object,default:function(){return{}}}},computed:{topClass:function(){var t=[];return this.fullScreen&&t.push("is-fullscreen"),this.className&&t.push(this.className),t},topStyle:function(){if(!this.fullScreen)return Ti.Css.toStyle({width:this.width,height:this.height})},toggleIcon:function(){return this.fullScreen?"zmdi-fullscreen-exit":"zmdi-fullscreen"},mapComType:function(){return"ti-lbs-map-".concat(this.by)},mapComConf:function(){return{mapType:this.mapType,center:this.lalnCenter,zoom:this.zoom,value:this.lalnValue,valueOptions:this.valueOptions}},targetCoordinate:function(){return{tencent:"GCJ02",baidu:"BD09",ali:"GCJ02"}[this.by]||"WGS84"},arenaStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})},lalnValue:function(){return _.isEmpty(this.center)?_.isEmpty(this.value)?new qq.maps.LatLng({lat:39.9042,lng:116.4074}):this.genLatLng(this.value):this.genLatLng(this.center)},lalnCenter:function(){return _.isEmpty(this.center)?_.isEmpty(this.value)?new qq.maps.LatLng({lat:39.9042,lng:116.4074}):this.genLatLng(this.value):this.genLatLng(this.center)}},methods:{autoLatLng:function(t){return t>360?t/this.autoFloat:t},genLatLng:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.lat,n=t.lng;e=this.autoLatLng(e),n=this.autoLatLng(n);var i=this.coordinate,a=this.targetCoordinate;if(i==a)return{lat:e,lng:n};var r="".concat(i,"_TO_").concat(a);return(0,Ti.GPS[r])(e,n)}}};Ti.Preload("ti/com/ti/lbs/map/ti-lbs-map.mjs",t)}(),Ti.Preload("ti/com/ti/lbs/map/_com.json",{name:"ti-lbs-map",globally:!0,template:"./ti-lbs-map.html",mixins:["./ti-lbs-map.mjs"],components:["./tencent/_com.json","./baidu/_com.json"]}),Ti.Preload("ti/com/ti/list/com/list-row/list-row.html",'<div class="list-row"\n  :class="TopClass">\n  \x3c!--current actived row indicator--\x3e\n  <div class="row-actived-indicator"></div>\n  \x3c!-- Indents --\x3e\n  <div v-for="n in indent"\n  class="row-indent"></div>\n  \x3c!--ICON: Handler--\x3e\n  <template v-if="icon">\n    <ti-icon\n      v-if="hasRealIcon"\n        class="row-icon"\n        :value="icon"\n        @click.native.left.stop="OnClickIcon"/>\n    <div v-else\n      class="row-icon"></div>\n  </template>\n  \x3c!--ICON: Checker--\x3e\n  <ti-icon v-if="checkable"\n      class="row-checker"\n      :value="theCheckIcon"\n      @click.native.left.stop="OnClickChecker"/>\n  \x3c!-- Content --\x3e\n  <div\n    class="row-con"\n    @click.left="OnClickRow"\n    @dblclick.left="OnDblClickRow"\n    v-ti-activable>\n    <component \n      v-for="(it, index) in myDisplayItems"\n        :class="\'item-\'+index"\n        :key="it.uniqueKey"\n        :is="it.comType"\n        v-bind="it.comConf"\n        @change="onItemChanged(it, $event)"/>\n  </div>\n\n</div>'),function(){var t={inheritAttrs:!1,data:function(){return{myDisplayItems:[]}},props:{indent:{type:Number,default:0},icon:{type:[Boolean,String],default:null},display:{type:Array,default:function(){return[]}}},computed:{TopClass:function(){return this.getListItemClass("row-indent-".concat(this.indent))},hasRealIcon:function(){return this.icon&&_.isString(this.icon)}},methods:{evalMyDisplayItems:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[],i=_createForOfIteratorHelper(t.display),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=12;break}return r=a.value,e.next=8,t.evalDataForFieldDisplayItem({itemData:t.data,displayItem:r,vars:{isCurrent:t.isCurrent,isChecked:t.isChecked,isChanged:t.isChanged,isActived:t.isActived,rowId:t.rowId}});case 8:(o=e.sent)&&n.push(o);case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),i.e(e.t0);case 17:return e.prev=17,i.f(),e.finish(17);case 20:t.myDisplayItems=n;case 21:case"end":return e.stop()}},e,null,[[2,14,17,20]])}))()},onItemChanged:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.name,n=t.value;this.$notify("item:changed",{name:e,value:n,rowId:this.rowId,data:this.data})},OnClickIcon:function(t){this.$notify("icon",{rowId:this.rowId,shift:t.shiftKey,toggle:t.ctrlKey||t.metaKey})},__ti_shortcut:function(t){if(!_.isEmpty(this.rowToggleKey)&&this.isRowToggleKey(t))return this.onClickChecker({}),{prevent:!0,stop:!0,quit:!0}}},watch:{display:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.evalMyDisplayItems();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),data:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.evalMyDisplayItems();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),isCurrent:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.evalMyDisplayItems();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),isChecked:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.evalMyDisplayItems();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},mounted:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.evalMyDisplayItems();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()};Ti.Preload("ti/com/ti/list/com/list-row/list-row.mjs",t)}(),Ti.Preload("ti/com/ti/list/com/list-row/_com.json",{name:"list-row",globally:!1,template:"./list-row.html",methods:"@com:ti/support/field_display.mjs",mixins:["@com:ti/support/list_item_mixins.mjs","./list-row.mjs"]}),Ti.Preload("ti/com/ti/list/ti-list.html",'<div class="ti-list"\n  :class="TopClass"\n  @click="OnClickTop"\n  v-ti-activable>\n  \x3c!--\n    Blank\n  --\x3e\n  <ti-loading \n    v-if="isDataEmpty"\n      class="nil-data"\n      :class="\'as-\'+blankClass"\n      v-bind="blankAs"/>\n  \x3c!--\n    Show Items\n  --\x3e\n  <template v-else>\n    <list-row\n      v-for="row in TheData"\n        :key="row.id"\n        :row-id="row.id"\n        :index="row.index"\n        :icon="row.icon"\n        :indent="row.indent"\n        :data="row.rawData"\n        :display="DisplayItems"\n        :current-id="theCurrentId"\n        :checked-ids="theCheckedIds"\n        :changed-id="changedId"\n        :checkable="checkable"\n        :selectable="selectable"\n        :openable="openable"\n        :row-toggle-key="TheRowToggleKey"\n        :class-name="itemClassName"\n        @checker="OnRowCheckerClick"\n        @select="OnRowSelect"\n        @open="OnRowOpen"/>\n  </template>\n</div>'),function(){var t={data:function(){return{myData:[]}},props:{iconBy:{type:[String,Function],default:null},indentBy:{type:[String,Function],default:null},itemClassName:void 0,display:{type:[Object,String,Array],default:function(){return{key:"..",comType:"ti-label"}}},border:{type:Boolean,default:!0},autoScrollIntoView:{type:Boolean,default:!0}},computed:{TopClass:function(){return this.getTopClass({"is-hoverable":this.hoverable,"show-border":this.border})},getRowIndent:function(){var t=this;return _.isFunction(this.indentBy)?function(e){return t.indentBy(e)}:_.isString(this.indentBy)?function(e){return _.get(e,t.indentBy)}:function(t){return 0}},getRowIcon:function(){var t=this;return _.isFunction(this.iconBy)?function(e){return t.iconBy(e)}:_.isString(this.iconBy)?function(e){return _.get(e,t.iconBy)}:function(t){return null}},DisplayItems:function(){var t,e=[],n=_createForOfIteratorHelper(_.concat(this.display));try{for(n.s();!(t=n.n()).done;){var i=t.value,a=this.evalFieldDisplayItem(i);a&&e.push(a)}}catch(t){n.e(t)}finally{n.f()}return e},TheData:function(){return this.myData}},methods:{OnClickTop:function(t){this.cancelable&&Ti.Dom.hasOneClass(t.target,"ti-list","list-item")&&this.cancelRow()},scrollCurrentIntoView:function(){if(this.autoScrollIntoView&&this.myLastIndex>=0){var t=_slicedToArray(Ti.Dom.findAll(".list-row.is-current",this.$el),1)[0];if(t){var e=Ti.Rects.createBy(t),n=Ti.Rects.createBy(this.$el);n.contains(e)||(this.$el.scrollTop+=e.top-n.top)}}},__ti_shortcut:function(t){return"ARROWUP"==t?(this.selectPrevRow({payload:{byKeyboardArrow:!0}}),this.scrollCurrentIntoView(),{prevent:!0,stop:!0,quit:!0}):"ARROWDOWN"==t?(this.selectNextRow({payload:{byKeyboardArrow:!0}}),this.scrollCurrentIntoView(),{prevent:!0,stop:!0,quit:!0}):void 0}},watch:{data:{handler:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(e,n){var i,a=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=_.isEqual(e,n)){t.next=5;break}return t.next=4,this.evalData(function(t){t.icon=a.getRowIcon(t.item),t.indent=a.getRowIndent(t.item)});case 4:this.myData=t.sent;case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),immediate:!0}},mounted:function(){var t=this;this.autoScrollIntoView&&this.$nextTick(function(){t.scrollCurrentIntoView()})}};Ti.Preload("ti/com/ti/list/ti-list.mjs",t)}(),Ti.Preload("ti/com/ti/list/_com.json",{name:"ti-list",globally:!0,template:"./ti-list.html",props:"@com:ti/support/list_props.mjs",methods:"@com:ti/support/field_display.mjs",mixins:["@com:ti/support/list_mixins.mjs","./ti-list.mjs"],components:["./com/list-row","@com:ti/label"]}),Ti.Preload("ti/com/ti/list/_hmaker.json",{icon:"im-data",title:"i18n:com-list",screen:["desktop","tablet"],manual:!0,tutorial:!0,video:!0,editComType:"ti-form",editComConf:{fields:[]}}),Ti.Preload("ti/com/ti/loading/ti-loading.html",'<div class="ti-loading">\n  <ti-icon class="as-icon" :value="icon"/>\n  <div class="as-text">{{text|i18n}}</div>\n</div>'),function(){var t={props:{icon:{type:String,default:"fas-spinner fa-spin"},text:{type:String,default:"i18n:loading"}}};Ti.Preload("ti/com/ti/loading/ti-loading.mjs",t)}(),Ti.Preload("ti/com/ti/loading/_com.json",{name:"ti-loading",globally:!0,template:"./ti-loading.html",mixins:["./ti-loading.mjs"]}),Ti.Preload("ti/com/ti/logging/ti-logging.html",'<div class="ti-logging"\n  :class="TopClass"\n  :style="TopStyle">\n  <pre ref="pre"><div \n    v-for="(line, index) in lines"\n      :data-index="index"\n      >{{line || \'&nbsp;\'}}</div></pre>    \n</div>'),function(){var t={props:{lines:{type:Array,default:function(){return[]}},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null}},computed:{TopClass:function(){return this.getTopClass()},TopStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})}},methods:{scrollToBottom:function(){var t=this.$refs.pre;t.scrollTop=t.scrollHeight}},watch:{lines:function(){var t=this;this.$nextTick(function(){t.scrollToBottom()})}}};Ti.Preload("ti/com/ti/logging/ti-logging.mjs",t)}(),Ti.Preload("ti/com/ti/logging/_com.json",{name:"ti-logging",globally:!0,template:"./ti-logging.html",mixins:["./ti-logging.mjs"]}),Ti.Preload("ti/com/ti/media/binary/ti-media-binary.html",'<div class="ti-media-binary">\n  <div class="tob-icon">\n    <ti-icon v-if="icon" :value="icon" size="1.28rem"/>\n  </div>\n  <div class="tob-title">\n    {{title}}\n  </div>\n  <div class="tob-actions">\n    <a :href="src">\n      <ti-icon value="download"/>\n      <span>{{\'download\'|i18n}}</span>\n    </a>\n  </div>\n</div>'),function(){var t={inheritAttrs:!1,props:{icon:{type:[String,Object],default:null},title:{type:String,default:null},src:{type:String,default:null},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""}},computed:{},methods:{}};Ti.Preload("ti/com/ti/media/binary/ti-media-binary.mjs",t)}(),Ti.Preload("ti/com/ti/media/binary/_com.json",{name:"ti-media-binary",globally:!0,template:"./ti-media-binary.html",mixins:["./ti-media-binary.mjs"]}),Ti.Preload("ti/com/ti/media/image/ti-media-image.html",'<div class="ti-media-image" \n     :class="topClass"\n     :style="topStyle"\n     :fit-mode="fitMode"\n     v-drag-off>\n  <div class="as-con" ref="con">\n    <img ref="the_image"\n      :src="src"\n      :style="theImageStyle"\n      @load="onImageLoaded"\n      @dblclick.stop="onToggleImageFitMode">\n  </div>\n</div>'),function(){var t={inheritAttrs:!1,data:function(){return{naturalWidth:-1,naturalHeight:-1,viewportWidth:-1,viewportHeight:-1,fitMode:"contain",imgLoading:!0,inViewport:!1}},props:{src:{type:String,default:null},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""}},computed:{topClass:function(){return Ti.Css.mergeClassName({"as-fitmode-cover":"cover"==this.fitMode,"as-fitmode-contain":"contain"==this.fitMode,"is-img-loading":this.imgLoading,"is-in-viewport":this.inViewport},this.className)},topStyle:function(){return{width:this.width,height:this.height}},theImageStyle:function(){var t={visibility:"hidden",position:"relative"};if(this.naturalWidth>0&&this.naturalHeight>0){var e=Ti.Rects.create({top:0,left:0,width:this.viewportWidth,height:this.viewportHeight}),n=Ti.Rects.create({top:2,left:2,width:this.naturalWidth,height:this.naturalHeight}).zoomTo({width:e.width,height:e.height,mode:this.fitMode});this.inViewport=e.contains(n,2),t.width=n.width,t.height=n.height,t.left=(e.width-n.width)/2,t.top=(e.height-n.height)/2,t.visibility="visible"}return Ti.Css.toStyle(t)}},methods:{onImageLoaded:function(){var t=this.$refs.the_image;t&&(this.naturalWidth=t.naturalWidth,this.naturalHeight=t.naturalHeight,this.imgLoading=!1)},onResizeViewport:function(){var t=Ti.Rects.createBy(this.$refs.con);this.viewportWidth=t.width,this.viewportHeight=t.height},onToggleImageFitMode:function(){this.fitMode={contain:"cover",cover:"contain"}[this.fitMode]}},mounted:function(){var t=this;Ti.Viewport.watch(this,{resize:function(){t.onResizeViewport()}}),this.onResizeViewport()},beforeDestroy:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/media/image/ti-media-image.mjs",t)}(),Ti.Preload("ti/com/ti/media/image/_com.json",{name:"ti-media-image",globally:!0,template:"./ti-media-image.html",mixins:["./ti-media-image.mjs"]}),Ti.Preload("ti/com/ti/media/video/ti-media-video.html",'<div class="ti-media-video"\n    :class="topClass"\n    :style="topStyle"\n    v-drag-off>\n    <video ref="the_video"\n      :src="src"\n      controls\n      @loadeddata="onVideoLoaded"/>\n    <div class="tov-loading" v-if="loading">\n      <ti-loading/>\n    </div>\n</div>'),function(){var t=function(t){this.doResizeVideo()},e={inheritAttrs:!1,data:function(){return{naturalWidth:-1,naturalHeight:-1,fitMode:"none",loading:!0}},props:{src:{type:String,default:null},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""}},computed:{topClass:function(){return{"as-none":"none"==this.fitMode,"as-contain":"contain"==this.fitMode,"as-loading":this.loading}},topStyle:function(){return{width:this.width,height:this.height}}},methods:{onVideoLoaded:function(){var t=this.$refs.the_video;this.naturalWidth=t.videoWidth,this.naturalHeight=t.videoHeight,this.loading=!1,this.doResizeVideo()},isContainsByViewport:function(){var t=Ti.Rects.createBy(this.$el),e=Ti.Rects.create(_objectSpread({},t.raw("tl"),{width:this.naturalWidth,height:this.naturalHeight}));return t.contains(e)},doResizeVideo:function(){this.isContainsByViewport()?this.fitMode="none":this.fitMode="contain"}},mounted:function(){Ti.Viewport.watch(this,{resize:t})},beforeDestroy:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/media/video/ti-media-video.mjs",e)}(),Ti.Preload("ti/com/ti/media/video/_com.json",{name:"ti-media-video",globally:!0,template:"./ti-media-video.html",mixins:["./ti-media-video.mjs"]}),Ti.Preload("ti/com/ti/month/ti-month.html",'<div class="ti-col-data as-month" \n  :class="topClass" \n  :style="topStyle">\n  <ti-list v-for="list in theListGroup"\n    :key="list.key"\n    :data="list.data"\n    :display="\'text\'"\n    :current-id="list.currentId"\n    :cancelable="false"\n    @select="onListSelected(list.key, $event)"/>\n</div>'),function(){var t={inheritAttrs:!1,props:{value:{type:[String,Number,Date],default:null},height:{type:[Number,String],default:200},beginYear:{type:[Number,String],default:1970},endYear:{type:[Number,String],default:(new Date).getFullYear()+1}},computed:{topClass:function(){return this.getTopClass()},topStyle:function(){return{height:Ti.Css.toSize(this.height)}},theDate:function(){return Ti.Types.toDate(this.value,null)},theListGroup:function(){return[this.createList("year",1*this.beginYear,1*this.endYear,this.theDate?this.theDate.getFullYear():null,{reverse:!0}),this.createList("month",0,12,this.theDate?this.theDate.getMonth():null,{getText:function(t){var e=Ti.DateTime.getMonthAbbr(t);return Ti.I18n.get(e)}})]}},methods:{createList:function(t,e,n,i){for(var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=a.reverse,o=void 0!==r&&r,s=a.getText,c=void 0===s?function(t){return t}:s,l={key:t,currentId:"R-".concat(i),data:[]},u=e;u<n;u++)l.data.push({id:"R-".concat(u),value:u,text:c(u)});return o&&l.data.reverse(),l},onListSelected:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).current,n=_.get(e,"value")||0,i=this.theDate||new Date,a={month:function(t){return new Date(i.getFullYear(),t)},year:function(t){return new Date(t,i.getMonth())}}[t](n);this.$notify("change",a)}}};Ti.Preload("ti/com/ti/month/ti-month.mjs",t)}(),Ti.Preload("ti/com/ti/month/_com.json",{name:"ti-month",globally:!0,template:"./ti-month.html",mixins:["./ti-month.mjs"],components:["@com:ti/list"]}),Ti.Preload("ti/com/ti/obj/creation/ti-obj-creation.html",'<div class="ti-obj-creation">\n  <div class="toc-types"\n    v-if="hasTypes">\n    <ul>\n      <li v-if="freeCreate"\n        @click="setCurrentType(null)">\n        <span class="ti-icon"></span>\n        <span class="ti-text">{{\'toc-auto-type\'|i18n}}</span>\n      </li>\n      <li v-for="tp of types"\n        :class="getTypeItemClassName(tp)"\n        @click="setCurrentType(tp)">\n        <ti-icon :value="tp.icon"/>\n        <span class="ti-text">{{tp.text}}</span>\n        <em v-if="\'DIR\' != tp.race">(*.{{tp.name}})</em>\n      </li>\n    </ul>\n  </div>\n  <div class="toc-main">\n    <div v-if="hasCurrentType"\n      class="toc-info">\n      <div class="toc-thumb">\n        <ti-icon :value="currentType.thumb"/>\n      </div>\n      <div class="toc-text">{{currentType.text}}</div>\n      <div v-if="!currentIsDir"\n        class="toc-name">*.{{currentType.name}}</div>\n      <div class="toc-brief"\n        v-if="currentType.brief">{{currentType.brief}}</div>\n    </div>\n    <div v-else\n      class="toc-free">\n      <span>{{\'toc-free\'|i18n}}</span>\n    </div>\n    <div class="toc-input">\n      <input\n        ref="input" \n        :value="value.name"\n        :placeholder="\'toc-tip\'|i18n" \n        @change="onChange" \n        spellcheck="false">\n    </div>\n  </div>\n</div>'),function(){var t={props:{types:{type:Array,default:function(){return[]}},value:{type:Object,default:function(){return{name:"",type:"",race:""}}},trimed:{type:Boolean,default:!0},freeCreate:{type:Boolean,default:!1}},computed:{hasTypes:function(){return!_.isEmpty(this.types)},currentIsDir:function(){return"DIR"==this.value.race},hasCurrentType:function(){return this.value.type&&this.value.race},currentType:function(){var t,e=_createForOfIteratorHelper(this.types);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(n.name==this.value.type)return n}}catch(t){e.e(t)}finally{e.f()}}},methods:{isCurrent:function(t){return this.value.type==t.name},getTypeItemClassName:function(t){return this.isCurrent(t)?"as-current":""},setCurrentType:function(t){t?(this.value.type=t.name,this.value.race=t.race):(this.value.type="",this.value.race=""),this.$notify("change",this.value)},onChange:function(){var t=this.$refs.input.value;if(this.trimed&&(t=_.trim(t)),this.value.name=t,"DIR"!=this.value.race&&this.value.type&&this.value.name){var e=".".concat(this.value.type);if(!this.value.name.endsWith(e)){var n=Ti.Util.getMajorName(this.value.name);this.value.name=n+e}}this.$notify("change",this.value)}},mounted:function(){this.hasTypes&&this.setCurrentType(this.types[0]),this.$refs.input.focus()}};Ti.Preload("ti/com/ti/obj/creation/ti-obj-creation.mjs",t)}(),Ti.Preload("ti/com/ti/obj/creation/_com.json",{name:"ti-obj-creation",globally:!0,i18n:"@i18n:ti-obj-creation",template:"./ti-obj-creation.html",mixins:["./ti-obj-creation.mjs"]}),Ti.Preload("ti/com/ti/obj/thumb/ti-obj-thumb.html",'<div class="ti-obj-thumb" \n    :class="TopClass">\n  \x3c!--\n    Preview && Process Bar\n  --\x3e\n  <header>\n    \x3c!--Preview Part--\x3e\n    <div class="as-preview">\n      \x3c!-- Local Image --\x3e\n      <template v-if="isLocalImage">\n        <img ref="localImage" is-local-file>\n      </template>\n      \x3c!-- Local File --\x3e\n      <template v-else-if="isLocalFile">\n        <ti-icon :value="LocalFileIcon"/>\n      </template>\n      \x3c!-- Remote Image --\x3e\n      <template v-else-if="\'image\'==preview.type">\n        <img :src="preview.value">\n      </template>\n      \x3c!-- Icon --\x3e\n      <template v-else>\n        <ti-icon :value="preview"/>\n      </template>\n      \x3c!--Badge--\x3e\n      <template v-if="badges">\n        <div v-if="badges.NW" class="as-badge at-nw"><ti-icon :value="badges.NW"/></div>\n        <div v-if="badges.NE" class="as-badge at-ne"><ti-icon :value="badges.NE"/></div>\n        <div v-if="badges.SW" class="as-badge at-sw"><ti-icon :value="badges.SW"/></div>\n        <div v-if="badges.SE" class="as-badge at-se"><ti-icon :value="badges.SE"/></div>\n      </template>\n    </div>\n    \x3c!--Process bar--\x3e\n    <div v-if="isShowProgress"\n      class="as-progress ti-progress-bar">\n      <span class="bar-tip">{{ProgressTip}}</span>\n      <b class="bar-outer">\n        <em class="bar-inner" \n            :style="ProgressStyle"></em>\n      </b>\n    </div>\n  </header>\n  \x3c!--\n    Status Mask\n  --\x3e\n  <section class="as-status" v-if="status">\n    <ti-icon \n      :value="status"\n      font-size="2em"\n      width="3em"\n      height="3em"/>\n  </section>\n  \x3c!--\n    Footer for item title text\n  --\x3e\n  <footer v-if="showFooter">\n    <div class="as-title">\n      <a v-if="hasHref"\n        :href="TheHref"\n        @click.prevent>{{title}}</a>\n      <span v-else>{{title}}</span>\n    </div>\n  </footer>\n</div>'),function(){var t={props:{index:{type:Number,default:-1},id:{type:String,default:null},title:{type:String,default:null},preview:{type:[String,Object],default:"broken_image"},href:{type:String,default:null},status:{type:[String,Object],default:null},progress:{type:Number,default:-1},visibility:{type:String,default:"show"},showFooter:{type:Boolean,default:!0},badges:{type:Object,default:function(){return{NW:null,NE:null,SW:null,SE:null}}}},watch:{preview:function(){this.renderLocalFile()}},computed:{TopClass:function(){var t=this;return this.getTopClass({"is-hide":"hide"==this.visibility,"is-weak":"weak"==this.visibility},function(){return t.status?"is-status-".concat(t.status):null})},PreviewType:function(){return _.get(this.preview,"type")||"auto"},isLocalFile:function(){return"localFile"==this.PreviewType},isLocalImage:function(){return this.isLocalFile&&/^image\//.test(this.LocalFile.type)},LocalFile:function(){if(this.isLocalFile)return this.preview.value},LocalFileIcon:function(){if(this.isLocalFile){var t=this.LocalFile,e={type:Ti.Util.getSuffixName(t.name),mime:t.type,race:Ti.Util.isNil(t.type)?"DIR":"FILE"};return Ti.Icons.get(e)}},isShowProgress:function(){return this.progress>=0},ProgressTip:function(){return Ti.S.toPercent(this.progress,{fixed:1,auto:!1})},ProgressStyle:function(){return{width:this.ProgressTip}},hasHref:function(){return!!this.href},TheHref:function(){return encodeURI(this.href)}},methods:{renderLocalFile:function(){var t=this;if(this.isLocalImage){var e=new FileReader;e.onload=function(e){t.$refs.localImage&&(t.$refs.localImage.src=e.target.result)},e.readAsDataURL(this.preview.value)}}},mounted:function(){this.renderLocalFile()}};Ti.Preload("ti/com/ti/obj/thumb/ti-obj-thumb.mjs",t)}(),Ti.Preload("ti/com/ti/obj/thumb/_com.json",{name:"ti-obj-thumb",globally:!0,template:"./ti-obj-thumb.html",mixins:["./ti-obj-thumb.mjs"]}),Ti.Preload("ti/com/ti/obj/tile/ti-obj-tile.html",'<div class="ti-obj-tile" \n    :class="topClass">\n  \x3c!--\n    Preview Image\n  --\x3e\n  <div class="as-preview">\n    <a v-if="hasHref"\n      :href="href"\n      @click="onClick"\n      ><ti-icon \n        :value="preview"\n        :height="previewHeight"/></a>\n    <ti-icon v-else\n      :value="preview"\n      :height="previewHeight"/>\n  </div>\n  \x3c!--\n    Title\n  --\x3e\n  <div class="as-title">\n    <a v-if="hasHref"\n      :href="href"\n      @click="onClick"\n    >{{title}}</a>\n    \x3c!--\n      Without Href\n    --\x3e\n    <span v-else>{{title}}</span>\n  </div>\n  \x3c!--\n    Footer\n  --\x3e\n  <div v-if="hasBrief"\n    class="as-brief">\n    <span>{{brief}}</span>\n  </div>\n</div>'),function(){var t={inheritAttrs:!1,props:{index:{type:Number,default:-1},id:{type:String,default:null},preview:{type:[Object,String],default:function(){return{type:"font",value:"broken_image"}}},previewHeight:{type:[String,Number],default:null},hover:{type:String,default:null,validator:function(t){return!t||/^(up|down|left|right|zoom)$/.test(t)}},title:{type:String,default:null},href:{type:String,default:null},brief:{type:String,default:null},emitBy:{type:Object,default:function(){return{evantName:null,payload:{}}}}},computed:{topClass:function(){var t=[this.className];return this.hover&&(t.push("on-hover"),t.push("on-hover-".concat(this.hover))),t},hasHref:function(){return!!this.href},hasBrief:function(){return!!this.brief}},methods:{onClick:function(t){if(this.emitBy.eventName){t.preventDefault();var e=this.emitBy.eventName,n=this.emitBy.payload||{};console.log("onClick",e,n),this.$notify(e,n)}}}};Ti.Preload("ti/com/ti/obj/tile/ti-obj-tile.mjs",t)}(),Ti.Preload("ti/com/ti/obj/tile/_com.json",{name:"ti-obj-tile",globally:!0,template:"./ti-obj-tile.html",mixins:["./ti-obj-tile.mjs"]}),Ti.Preload("ti/com/ti/paging/jumper/ti-paging-jumper.html",'<div class="ti-paging-jumper">\n  <div \n    class="pj-btn"\n    :class="getBtnClass(1)"\n    @click="OnJumpTo(1)">\n      <ti-icon value="zmdi-skip-previous"/>\n      <span class="it-text">{{\'paging-first\'|i18n}}</span></div>\n  <div \n    class="pj-btn"\n    :class="getBtnClass(value.pn-1)"\n    @click="OnJumpTo(value.pn-1)">\n      <ti-icon value="zmdi-chevron-left"/>\n      <span class="it-text">{{\'paging-prev\'|i18n}}</span></div>\n  <div \n    class="pj-current"\n    :class="PageNumberClass"\n    @click="OnClickCurrent">\n    <b>{{value.pn}}</b>\n  </div>\n  <div \n    class="pj-btn"\n    :class="getBtnClass(value.pn+1)"\n    @click="OnJumpTo(value.pn+1)">\n      <span class="it-text">{{\'paging-next\'|i18n}}</span>\n      <ti-icon value="zmdi-chevron-right"/></div>\n  <div \n    class="pj-btn"\n    :class="getBtnClass(value.pgc)"\n    @click="OnJumpTo(value.pgc)">\n      <span class="it-text">{{\'paging-last\'|i18n}}</span>\n      <ti-icon value="zmdi-skip-next"/></div>\n  <div\n    class="pj-sum"\n    :class="SumClass"\n    @click="OnClickSum">{{\'paging-sum\'|i18n(value)}}</div>\n</div>'),function(){var t={props:{value:{type:Object,default:function(){return{pn:0,pgsz:0,pgc:0,sum:0,count:0}}}},computed:{PageNumberClass:function(){return this.value.pgc>1?"is-enabled":"is-disabled"},SumClass:function(){return this.value.pgsz>0?"is-enabled":"is-disabled"}},methods:{isInvalidPageNumber:function(t){return t<=0||t>this.value.pgc||t==this.value.pn},getBtnClass:function(t){return this.isInvalidPageNumber(t)?"is-disabled":"is-enabled"},OnJumpTo:function(t){this.isInvalidPageNumber(t)||this.$notify("change",{pn:t,pgsz:this.value.pgsz})},OnClickCurrent:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.value.pgc<=1)){e.next=2;break}return e.abrupt("return");case 2:return n=Ti.I18n.getf("paging-change-pn",t.value),e.next=5,Ti.Prompt(n,{value:t.value.pn});case 5:if((i=e.sent)&&i!=t.value.pn){e.next=8;break}return e.abrupt("return");case 8:if(a=parseInt(i),!(isNaN(a)||a<=0||a>t.value.pgc)){e.next=14;break}return n=Ti.I18n.getf("paging-change-pn-invalid",t.value),e.next=13,Ti.Alert(n,{title:"i18n:warn",type:"warn",icon:"im-warning",width:420});case 13:return e.abrupt("return");case 14:t.$notify("change",{pn:a,pgsz:t.value.pgsz});case 15:case"end":return e.stop()}},e)}))()},OnClickSum:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ti.I18n.getf("paging-change-pgsz",t.value),e.next=3,Ti.Prompt(n,{value:t.value.pgsz});case 3:if((i=e.sent)&&i!=t.value.pgsz){e.next=6;break}return e.abrupt("return");case 6:if(a=parseInt(i),!(isNaN(a)||a<=0)){e.next=11;break}return e.next=10,Ti.Alert("i18n:paging-change-pgsz-invalid",{title:"i18n:warn",type:"warn",icon:"im-warning",width:420});case 10:return e.abrupt("return");case 11:t.$notify("change:pgsz",a),t.$notify("change",{pn:1,pgsz:a});case 13:case"end":return e.stop()}},e)}))()}}};Ti.Preload("ti/com/ti/paging/jumper/ti-paging-jumper.mjs",t)}(),Ti.Preload("ti/com/ti/paging/jumper/_com.json",{name:"ti-paging-jumper",globally:!0,template:"./ti-paging-jumper.html",mixins:["./ti-paging-jumper.mjs"]}),Ti.Preload("ti/com/ti/roadblock/ti-roadblock.html",'<div class="ti-roadblock">\n  <div class="as-main">\n    <div v-if="icon" class="as-icon">\n      <ti-icon :value="icon"/>\n    </div>\n    <div v-if="text" class="as-text">\n      <span>{{text | i18n}}</span>\n    </div>\n  </div>\n</div>'),function(){var t={inheritAttrs:!1,props:{icon:{type:String,default:"fas-exclamation-triangle"},text:{type:String,default:null}},computed:{}};Ti.Preload("ti/com/ti/roadblock/ti-roadblock.mjs",t)}(),Ti.Preload("ti/com/ti/roadblock/_com.json",{name:"ti-roadblock",globally:!0,template:"./ti-roadblock.html",mixins:["./ti-roadblock.mjs"],components:[]}),Ti.Preload("ti/com/ti/session/badge/ti-session-badge.html",'<div class="ti-session-badge"\n  :class="TopClass">\n  \x3c!--\n    Has Session, show account info\n  --\x3e\n  <template v-if="hasSession">\n    \x3c!--Avatar--\x3e\n    <div v-if="hasAvatar"\n      class="as-avatar">\n      <img :src="myAvatar"/>\n    </div>\n    \x3c!--User Icon--\x3e\n    <div v-else\n      class="as-icon">\n      <ti-icon :value="myIcon"/>\n    </div>\n    \x3c!--User Name--\x3e\n    <div class="as-name">\n      \x3c!--Name Event--\x3e\n      <a\n        v-if="nameEvent"\n          @click.left="$notify(nameEvent)">{{myName}}</a>\n      \x3c!--Name display--\x3e\n      <span\n        v-else>{{myName}}</span>\n    </div>\n    \x3c!--Links--\x3e\n    <div v-for="li in theLinks"\n      class="as-link">\n      \x3c!--Icon--\x3e\n      <ti-icon\n        v-if="li.icon"\n          class="it-icon"\n          :value="li.icon"/>\n      \x3c!--Text--\x3e\n      <a\n        @click.left="OnClickLink(li, $event)"\n        :href="li.href"\n        :target="li.newtab?\'_blank\':null">{{li.text|i18n}}</a>\n    </div>\n  </template>\n  \x3c!--\n    Without session, show login link\n  --\x3e\n  <template v-else>\n    <div v-if="loginIcon"\n      class="as-icon">\n      <ti-icon :value="loginIcon"/>\n    </div>\n    <div class="as-link">\n      <a @click="$notify(loginEvent)">{{\'login\'|i18n}}</a>\n    </div>\n  </template>\n</div>'),function(){var t={props:{me:{type:Object,default:null},avatarKey:{type:String,default:null},avatarSrc:{type:String,default:null},loginIcon:{type:String,default:"zmdi-account-circle"},nameKeys:{type:[String,Array],default:"name"},nameEvent:{type:String,default:"go:dashboard"},loginEvent:{type:String,default:"do:login"},logoutEvent:{type:String,default:"do:logout"},links:{type:Array,default:function(){return[]}}},computed:{TopClass:function(){return this.getTopClass()},theLinks:function(){var t,e=[],n=_createForOfIteratorHelper(this.links);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.inSession&&!this.hasSession||e.push(i)}}catch(t){n.e(t)}finally{n.f()}return this.hasSession?e.push({text:"i18n:logout",emit:this.logoutEvent}):e.push({text:"i18n:login",emit:this.loginEvent}),e},myName:function(){if(this.me)return Ti.Util.getOrPick(this.me,this.nameKeys)||Ti.I18n.get("mine")},myIcon:function(){return this.me?2==this.me.sex?"im-user-female":"im-user-male":"far-user"},myAvatar:function(){if(this.avatarSrc)return Ti.S.renderBy(this.avatarSrc,this.me)},hasAvatar:function(){return this.avatarSrc&&this.avatarKey&&this.me&&this.me[this.avatarKey]},hasSession:function(){return!!this.me}},methods:{OnClickLink:function(t,e){t.emit&&(e.preventDefault(),this.$notify(t.emit))}}};Ti.Preload("ti/com/ti/session/badge/ti-session-badge.mjs",t)}(),Ti.Preload("ti/com/ti/session/badge/_com.json",{name:"ti-session-badge",globally:!0,template:"./ti-session-badge.html",mixins:["./ti-session-badge.mjs"]}),function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.varName,n=t.vars,i=t.matched;if(i.startsWith("$$"))return i.substring(1);var a=/^(=)?([^?]+)(\?(.*))?$/.exec(e),r="="==a[1]?n.vars:n.itemData,o=_.trim(a[2]),s=Ti.Util.fallbackNil(_.trim(a[4]),i),c=Ti.Util.getOrPick(r,o);return Ti.Util.fallback(c,s)}function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_.isString(n)){var a=/^=>(.+)$/.exec(n);if(a){return Ti.Util.genInvoking(a[1],{context:_objectSpread({},i,{item:i.itemData})})()}if(a=/^\$\{=([^${}=]+)\}$/.exec(n)){var r=_.trim(a[1]);return".."==r?i.itemData:"value"==r?i.value:Ti.Util.fallback(_.get(i.vars,r),n)}if(a=/^(\((.+)\)\?)?(.+)$/.exec(n)){var o=_.trim(a[2]),s=_.trim(a[3]);return o?_.get(i.itemData,o)?Ti.S.renderBy(s,i,{iteratee:t}):null:Ti.S.renderBy(s,i,{iteratee:t})}return n}if(_.isPlainObject(n)){var c={};return _.forEach(n,function(t,n){var a=e(t,i);"..."==n?_.assign(c,a):c[n]=a}),c}if(_.isArray(n)){var l,u=[],d=_createForOfIteratorHelper(n);try{for(d.s();!(l=d.n()).done;){var m=e(l.value,i);u.push(m)}}catch(t){d.e(t)}finally{d.f()}return u}return n}var n={evalFieldDisplayItem:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).defaultKey,i=function(){if(Ti.Util.isNil(e))return n?{key:n,comType:"ti-label"}:null;if(_.isPlainObject(e)){var i=_.assign({key:n,comType:"ti-label"},e);if(i.transformer){var a={context:t,partialRight:!0};i.transformer=Ti.Util.genInvoking(i.transformer,a)}return i}if(_.isArray(e))return{key:e,comType:"ti-label"};if(!0===e)return{key:n,comType:"ti-label"};if(_.isString(e)){var r=/^<([^:>=]*)(:([^>]+))?>$/.exec(e);if(r)return{key:r[1]||n||":ti-icon",defaultAs:r[3]||void 0,comType:"ti-icon"};if(r=/^[@#]([^\(]+)\(([^)]+)\)(:(.+))?$/.exec(e))return{key:r[2]||n,comType:"ti-label",comConf:{dict:r[1],className:"is-nowrap",format:r[4]}};if(r=/^<=([^:]+)(:(.+))?>$/.exec(e))return{key:r[3]||n||Symbol(e),comType:r[1]};if(r=/^([^+-:>]+)(:([^+-]+))?(([+-])>([^%]*))?$/.exec(e)){var o=_.trim(r[1]||r[0]),s=r[3];return{key:o,comType:"ti-label",comConf:{className:"is-nowrap",newTab:"+"==r[5],href:_.trim(r[6]),format:s}}}return{key:e,comType:"ti-label"}}return e}();if(i.dict){var a=Ti.DictFactory.explainDictName(i.dict),r=a.name,o=a.vKey;i.$dict=Ti.DictFactory.CheckDict(r),i.$dictValueKey=o||".text"}return i},evalDataForFieldDisplayItem:function(){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g,v;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:{},a=i.itemData,r=void 0===a?{}:a,o=i.displayItem,s=void 0===o?{}:o,c=i.vars,l=void 0===c?{}:c,u=i.autoIgnoreNil,d=void 0===u||u,m=i.autoValue,h=void 0===m?"value":m,p=i.uniqueKey,f=s,y=f.defaultAs,_.isArray(f.key)?y=_.pick(r,f.key):_.isString(f.key)&&(y=".."==f.key?r:/^'[^']+'$/.test(f.key)?f.key.substring(1,f.key.length-1):/^->(.+)$/.test(f.key)?Ti.S.renderBy(f.key.substring(2),r):Ti.Util.fallback(Ti.Util.getOrPick(r,f.key),y)),_.isFunction(f.transformer)&&(Ti.Util.isNil(y)&&!f.transNil||(y=f.transformer(y))),!d||!Ti.Util.isNil(y)){n.next=8;break}if(!Ti.Util.fallback(f.ignoreNil,!0)){n.next=8;break}return n.abrupt("return");case 8:if(!f.$dict){n.next=12;break}return n.next=11,f.$dict.getItemAs(f.$dictValueKey,y);case 11:y=n.sent;case 12:return g=_.cloneDeep(f),v={},_.isFunction(f.comConf)?v=_.assign({},f.comConf(r)):f.comConf&&(v=e(f.comConf,{vars:l,itemData:r,value:y})),h&&_.isUndefined(v[h])&&(v[h]=y),g.comConf=v,g.uniqueKey=p||_.concat(g.key,g.comType).join("-"),n.abrupt("return",g);case 19:case"end":return n.stop()}},n)}))()}};Ti.Preload("ti/com/ti/support/field_display.mjs",n)}(),function(){var t={isSelectedItem:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.value,i=void 0===n?null:n,a=e.multi;return void 0!==a&&a?_.isArray(i)&&_.indexOf(i,t.value)>=0:_.isEqual(i,t.value)},normalizeData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.emptyItem,i=void 0===n?null:n,a=e.multi,r=void 0!==a&&a,o=e.value,s=void 0===o?null:o,c=e.focusIndex,l=void 0===c?-1:c,u=e.mapping,d=void 0===u?null:u,m=e.defaultIcon,h=void 0===m?null:m,p=e.iteratee,f=void 0===p?null:p,y=e.defaultTipKey,g=void 0===y?null:y,v=0,b=[];if(!r&&i){var x=_.cloneDeep(i);x.selected=_.isUndefined(x.value)||_.isNull(x.value)?_.isNull(s):this.isSelectedItem(x,{value:s,multi:r}),_.isFunction(f)&&(x=f(x,v)||x),b.push(x),v++}var T=[];if(_.isArray(t)){var w,k=d?_.defaults(_objectSpread({},d),{icon:"icon",text:"text",value:"value",tip:"tip"}):null,C=_createForOfIteratorHelper(t);try{for(C.s();!(w=C.n()).done;){var I=w.value;if(_.isPlainObject(I)){var S=void 0;!(S=k?Ti.Util.translate(I,k):_.cloneDeep(I)).tip&&g&&(S.tip=I[g]),T.push(S)}else T.push({icon:h,text:Ti.Types.toStr(I),value:I})}}catch(t){C.e(t)}finally{C.f()}}for(var j=0;j<T.length;j++){var O=T[j];O.index=j,O.focused=j==l,O.icon=O.icon||h,O.selected=this.isSelectedItem(O,{value:s,multi:r}),_.isFunction(f)&&(T[j]=f(O,j)||O)}return T},matchItemByKey:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"equal",i=arguments.length>3?arguments[3]:void 0,a=t[e],r={equal:function(){return _.isEqual(a,i)},starts:function(){return _.startsWith(a,i)},contains:function(){if(_.isString(a))return a.indexOf(i+"")>=0;_.indexOf(a,i)}}[n];return!!_.isFunction(r)&&r()},findItemInList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.list,i=void 0===n?[]:n,a=e.matchValue,r=void 0===a?"equal":a,o=e.matchText,s=void 0===o?"off":o;if(_.isArray(i)&&!_.isEmpty(i)){var c,l=_createForOfIteratorHelper(i);try{for(l.s();!(c=l.n()).done;){var u=c.value;if(this.matchItemByKey(u,"value",r,t))return u;if(this.matchItemByKey(u,"text",s,t))return u}}catch(t){l.e(t)}finally{l.f()}}return null},getSelectedItemIndex:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.value,i=void 0===n?null:n,a=e.multi,r=void 0!==a&&a,o=[],s={value:i,multi:r},c=0;c<t.length;c++){var l=t[c];if(this.isSelectedItem(l,s)){if(!this.multi)return c;o.push(c)}}return _.isEmpty(o)&&!r?-1:o}};Ti.Preload("ti/com/ti/support/formed_list_methods.mjs",t)}(),function(){var t={inject:["$vars"],props:{index:{type:Number,default:-1},rowId:{type:String,default:null},data:null,changedId:{type:String,default:null},currentId:{type:String,default:null},checkedIds:{type:Object,default:function(){return{}}},checkable:{type:Boolean,default:!1},selectable:{type:Boolean,default:!0},openable:{type:Boolean,default:!0},rowToggleKey:{type:Array,default:function(){return[]}},checkIcons:{type:Object,default:function(){return{on:"fas-check-square",off:"far-square"}}}},computed:{getListItemClass:function(){var t=this;return function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.getTopClass({"is-current":t.isCurrent,"is-checked":t.isChecked,"is-changed":t.isChanged},n)}},isCurrent:function(){return this.rowId==this.currentId},isChanged:function(){return this.rowId==this.changedId},isChecked:function(){return!!this.checkedIds[this.rowId]},theCheckIcon:function(){return this.checkedIds[this.rowId]?this.checkIcons.on:this.checkIcons.off}},methods:{isRowToggleKey:function(t){return _.indexOf(this.rowToggleKey,t)>=0},OnClickChecker:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.checkable&&this.$notify("checker",{rowId:this.rowId,shift:t.shiftKey,toggle:t.ctrlKey||t.metaKey})},OnClickRow:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.ctrlKey||t.metaKey;!this.selectable||this.isCurrent&&this.isChecked&&!e||this.$notify("select",{rowId:this.rowId,shift:t.shiftKey,toggle:e})},OnDblClickRow:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.openable&&(t.stopPropagation(),this.$notify("open",{rowId:this.rowId}))},doAutoActived:function(){!this.isActived&&this.isCurrent&&this.setActived()}},watch:{isCurrent:function(){this.doAutoActived()}},mounted:function(){this.doAutoActived()}};Ti.Preload("ti/com/ti/support/list_item_mixins.mjs",t)}(),function(){var t={provide:function(){return{$vars:this.vars||{}}},data:function(){return{myLastIndex:-1,myCurrentId:null,myCheckedIds:{}}},computed:{TopStyle:function(){var t=this.width,e=this.height;return Ti.Css.toStyle({width:t,height:e})},hasRowToggleKey:function(){return!_.isEmpty(this.rowToggleKey)},TheRowToggleKey:function(){return _.without(_.concat(this.rowToggleKey),void 0)},getRowId:function(){return Ti.Util.genRowIdGetter(this.idBy)},getRowData:function(){return Ti.Util.genRowDataGetter(this.rawDataBy)},isDataEmpty:function(){return!_.isArray(this.data)||_.isEmpty(this.data)},isAllChecked:function(){if(this.isDataEmpty)return!1;var t,e=_createForOfIteratorHelper(this.TheData);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(!this.theCheckedIds[n.id])return!1}}catch(t){e.e(t)}finally{e.f()}return!0},hasChecked:function(){var t,e=_createForOfIteratorHelper(this.data);try{for(e.s();!(t=e.n()).done;){var n=t.value,i=this.getRowId(n);if(this.theCheckedIds[i])return!0}}catch(t){e.e(t)}finally{e.f()}return!1},theCurrentRowId:function(){return this.wrapRowId(this.currentId)},theCurrentId:function(){return this.puppetMode?this.theCurrentRowId:this.myCurrentId},theCheckedIds:function(){return this.puppetMode?this.getCheckedIdsMap(this.checkedIds):this.myCheckedIds},Dict:function(){if(this.dict){if(this.dict instanceof Ti.Dict)return this.dict;var t=Ti.DictFactory.explainDictName(this.dict).name;return Ti.DictFactory.CheckDict(t)}}},methods:{wrapRowId:function(t){return _.isNumber(t)?""+t:t},evalData:function(){var t=arguments,e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:_.identity,a=e.data,!e.Dict){n.next=31;break}if(!_.isString(a)){n.next=9;break}return n.next=6,e.Dict.queryData(a);case 6:a=n.sent,n.next=31;break;case 9:if(!_.isArray(a)){n.next=28;break}r=[],o=0;case 12:if(!(o<a.length)){n.next=25;break}if(s=a[o],!_.isString(s)){n.next=21;break}return n.next=17,e.Dict.getItem(s);case 17:(c=n.sent)&&r.push(c),n.next=22;break;case 21:r.push(s);case 22:o++,n.next=12;break;case 25:a=r,n.next=31;break;case 28:return n.next=30,e.Dict.getData();case 30:a=n.sent;case 31:return l=[],_.forEach(a,function(t,n){var a={index:n,id:e.getRowId(t,n),rawData:e.getRowData(t),item:t};a=i(a)||a,l.push(a)}),n.abrupt("return",l);case 34:case"end":return n.stop()}},n)}))()},findRowIndexById:function(t){var e,n=_createForOfIteratorHelper(this.TheData);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.id==t)return i.index}}catch(t){n.e(t)}finally{n.f()}return-1},findRowById:function(t){var e,n=_createForOfIteratorHelper(this.TheData);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.id==t)return i}}catch(t){n.e(t)}finally{n.f()}},getCurrentRow:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.theCurrentId;return this.findRowById(t)},getCurrent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.theCurrentId,e=this.getCurrentRow(t);return e?e.rawData:null},getCheckedRow:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.theCheckedIds,n=[],i=_createForOfIteratorHelper(this.TheData);try{for(i.s();!(t=i.n()).done;){var a=t.value;e[a.id]&&n.push(a)}}catch(t){i.e(t)}finally{i.f()}return n},getChecked:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.theCheckedIds,e=this.getCheckedRow(t);return _.map(e,function(t){return t.rawData})},getEmitContext:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=[],a=null,r=-1,o=_createForOfIteratorHelper(this.TheData);try{for(o.s();!(e=o.n()).done;){var s=e.value;s.id==t&&(a=s.rawData,r=s.index),n[s.id]&&i.push(s.rawData)}}catch(t){o.e(t)}finally{o.f()}return{current:a,currentId:t,currentIndex:r,checked:i,checkedIds:n}},selectRow:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.quiet,i=void 0!==n&&n,a=e.payload,r={},o=null;this.autoCheckCurrent?(r=t?_defineProperty({},t,!0):{},o=t||null):(r=_.cloneDeep(this.myCheckedIds),o=t);var s=this.getEmitContext(o,r);this.puppetMode||(this.myCheckedIds=r,this.myCurrentId=o,this.myLastIndex=this.findRowIndexById(t)),i||(_.defaults(s,a),this.$notify("select",s))},selectRowByIndex:function(t,e){var n=t;if(this.scrollIndex&&(n=Ti.Num.scrollIndex(t,this.TheData.length)),_.inRange(n,0,this.TheData.length)){var i=this.TheData[n];this.selectRow(i.id,e)}},selectPrevRow:function(t){this.selectRowByIndex(Math.max(-1,this.myLastIndex-1),t)},selectNextRow:function(t){this.selectRowByIndex(this.myLastIndex+1,t)},selectRowsToCurrent:function(t){var e=_.cloneDeep(this.theCheckedIds),n=this.theCurrentId,i=this.findRowIndexById(t);if(i>=0){var a=Math.min(i,this.myLastIndex),r=Math.max(i,this.myLastIndex);a<0&&(a=0);for(var o=a;o<=r;o++){e[this.TheData[o].id]=!0}var s=this.getEmitContext(n,e);this.puppetMode||(this.myCheckedIds=e,this.myCurrentId=n,this.myLastIndex=i),this.$notify("select",s)}},checkRow:function(t){var e=_.cloneDeep(this.theCheckedIds),n=this.theCurrentId,i=this.myLastIndex;if(_.isUndefined(t))e={},_.forEach(this.TheData,function(t){e[t.id]=!0});else if(_.isArray(t)){var a=_.last(t);_.forEach(t,function(t){e[t]=!0}),this.autoCheckCurrent&&(i=this.findRowIndexById(a))}else e[t]=!0,this.autoCheckCurrent&&(i=this.findRowIndexById(t));var r=this.getEmitContext(n,e);this.puppetMode||(this.myCheckedIds=e,this.myCurrentId=n,this.myLastIndex=i),this.$notify("select",r)},cancelRow:function(t){var e=_.cloneDeep(this.theCheckedIds),n=this.theCurrentId,i=-1;_.isUndefined(t)?(e={},n=null):(i=this.findRowIndexById(t),e[t]=!1,this.autoCheckCurrent&&n==t&&(n=null));var a=this.getEmitContext(n,e);this.puppetMode||(this.myCheckedIds=e,this.myCurrentId=n,this.myLastIndex=i),this.$notify("select",a)},toggleRow:function(t){this.theCheckedIds[t]?this.cancelRow(t):this.checkRow(t)},OnRowCheckerClick:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.rowId,n=t.shift;this.multi?n?this.selectRowsToCurrent(e):this.toggleRow(e):this.selectRow(e)},OnRowSelect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.rowId,n=t.shift,i=t.toggle;n&&this.multi?this.selectRowsToCurrent(e):i&&this.multi?this.toggleRow(e):Ti.Util.isNil(e)||this.autoCheckCurrent?this.selectRow(e):this.toggleRow(e)},OnRowOpen:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).rowId,e=this.findRowById(t);e&&this.$notify("open",e)},getCheckedIdsMap:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={};return _.isArray(t)?_.forEach(t,function(t){e[t]=!0}):_.forEach(t,function(t,n){t&&(e[n]=!0)}),this.autoCheckCurrent&&!Ti.Util.isNil(this.theCurrentId)&&(e[this.theCurrentId]=!0),e},syncCurrentId:function(){this.puppetMode||this.theCurrentId==this.theCurrentRowId?this.myLastIndex=this.findRowIndexById(this.theCurrentRowId):this.selectRow(this.theCurrentRowId,{quiet:!0})},syncCheckedIds:function(){this.puppetMode||(this.myCheckedIds=this.getCheckedIdsMap(this.checkedIds))}},watch:{currentId:function(){this.syncCurrentId()},checkedIds:function(){this.syncCheckedIds()},data:function(){this.theCurrentId&&(this.myLastIndex=this.findRowIndexById(this.theCurrentId))}},mounted:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.syncCheckedIds(),this.syncCurrentId();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()};Ti.Preload("ti/com/ti/support/list_mixins.mjs",t)}(),function(){var t={data:{type:[Array,String],default:function(){return[]}},dict:{type:[String,Ti.Dict],default:null},idBy:{type:[String,Function],default:"id"},rawDataBy:{type:[Object,String,Function],default:_.identity},currentId:{type:[String,Number],default:null},checkedIds:{type:[Array,Object],default:function(){return[]}},changedId:{type:String,default:null},vars:{type:Object,default:function(){return{}}},multi:{type:Boolean,default:!1},autoCheckCurrent:{type:Boolean,default:!0},rowToggleKey:{type:[String,Array],default:function(){return["SPACE"]}},checkable:{type:Boolean,default:!1},selectable:{type:Boolean,default:!0},openable:{type:Boolean,default:!0},cancelable:{type:Boolean,default:!0},hoverable:{type:Boolean,default:!1},puppetMode:{type:Boolean,default:!1},scrollIndex:{type:Boolean,default:!1},blankAs:{type:Object,default:function(){return{icon:"fas-disease",text:"empty-data"}}},blankClass:{type:String,default:"big-mask",validator:function(t){return/^(big-mask|mid-tip)$/.test(t)}},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null}};Ti.Preload("ti/com/ti/support/list_props.mjs",t)}(),function(){var t={value:null,options:{type:[Array,Function,String,Ti.Dict],default:function(){return[]}},valueBy:{type:[String,Function],default:void 0},textBy:{type:[String,Function],default:void 0},iconeBy:{type:[String,Function],default:void 0},multi:!1,allowEmpty:{type:Boolean,default:!0},autoSplitValue:{type:[Boolean,String],default:!0},defaultIcon:{type:String,default:null},emptylAs:{default:null},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null}};Ti.Preload("ti/com/ti/switcher/ti-switcher-props.mjs",t)}(),Ti.Preload("ti/com/ti/switcher/ti-switcher.html",'<div class="ti-switcher"\n  :class="TopClass">\n  \x3c!--\n    Show Loading\n  --\x3e\n  <ti-icon\n    v-if="loading"\n    value="zmdi-settings zmdi-hc-spin"/>\n  \x3c!--\n    Options\n  --\x3e\n  <div v-else\n    class="switcher-con">\n    <ul>\n      <li v-for="it in TheItems" \n        :key="it.value"\n        :class="it.className"\n        @click="OnClickItem(it, $event)"\n        @mousedown="myFocusIndex=it.index;">\n        <ti-icon class="it-icon"\n          size=".8em"\n          v-if="it.icon" \n          :value="it.icon"/>\n        <span\n          class="it-text">{{it.text|i18n}}</span>\n      </li>\n    </ul>\n  </div>\n</div>'),function(){var t={data:function(){return{loading:!1,myOptionsData:[],myValueMap:{},myLastIndex:0,myFocusIndex:-1}},computed:{TopClass:function(){return this.getTopClass()},Dict:function(){var t=this;if(this.options instanceof Ti.Dict)return this.options;if(_.isString(this.options)){var e=Ti.DictFactory.DictReferName(this.options);if(e)return Ti.DictFactory.CheckDict(e,function(e){var n=e.loading;t.loading=n})}return Ti.DictFactory.GetOrCreate({data:this.options,getValue:Ti.Util.genGetter(this.valueBy||"value"),getText:Ti.Util.genGetter(this.textBy||"text|name"),getIcon:Ti.Util.genGetter(this.iconBy||"icon")},{hooks:function(e){var n=e.loading;return t.loading=n}})},TheItems:function(){var t=this;return _.map(this.myOptionsData,function(e,n){var i=t.Dict.getValue(e);return{index:n,className:{"is-selected":t.myValueMap[i],"is-focused":n==t.myFocusIndex},text:t.Dict.getText(e),value:i,icon:t.Dict.getIcon(e)||t.defaultIcon}})}},methods:{OnClickItem:function(t,e){var n=t.value,i=t.index,a=e.ctrlKey||e.metaKey;e.shiftKey&&this.multi?this.selectItemsToCurrent(n,i):a&&this.multi?this.toggleItem(n):this.allowEmpty?this.toggleItem(n):this.myValueMap=_defineProperty({},n,!0),this.myLastIndex=i,this.tryNotifyChanged()},findItemIndexByValue:function(t){var e,n=_createForOfIteratorHelper(this.TheItems);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.value==t)return i.index}}catch(t){n.e(t)}finally{n.f()}return-1},selectItemsToCurrent:function(t){var e=_.cloneDeep(this.myValueMap),n=this.findItemIndexByValue(t);if(n>=0){var i=Math.min(n,this.myLastIndex),a=Math.max(n,this.myLastIndex);i<0&&(i=0);for(var r=i;r<=a;r++){e[this.TheItems[r].value]=!0}}this.myValueMap=e},toggleItem:function(t){var e=this.myValueMap[t];this.multi?this.myValueMap=_.assign({},this.myValueMap,_defineProperty({},t,!e)):this.myValueMap=_defineProperty({},t,!e)},tryNotifyChanged:function(){var t=Ti.Util.truthyKeys(this.myValueMap);if(!_.isEqual(t,this.Values)){var e=this.multi?t:t.join(",");this.$notify("change",e)}},reloadMyOptionsData:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.Dict.getData();case 2:t.myOptionsData=e.sent;case 3:case"end":return e.stop()}},e)}))()},reloadMyValueMap:function(){var t=null;this.autoSplitValue&&(t=_.isBoolean(this.autoSplitValue)?/[:,;\t\n\/]+/g:this.autoSplitValue);var e=Ti.S.toArray(this.value,{sep:t}),n={};_.forEach(e,function(t){return n[t]=!0}),this.myValueMap=n}},watch:{options:{handler:"reloadMyOptionsData",immediate:!0},value:{handler:"reloadMyValueMap",immediate:!0}},mounted:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Ti.Dom.watchDocument("mouseup",function(){return e.myFocusIndex=-1});case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),beforeDestroy:function(){Ti.Dom.unwatchDocument("mouseup",this.__on_mouseup)}};Ti.Preload("ti/com/ti/switcher/ti-switcher.mjs",t)}(),Ti.Preload("ti/com/ti/switcher/_com.json",{name:"ti-switcher",globally:!0,template:"./ti-switcher.html",props:"./ti-switcher-props.mjs",mixins:["./ti-switcher.mjs"]}),Ti.Preload("ti/com/ti/table/com/table-row/com/table-cell/table-cell.html",'<div class="table-cell"\n  :class="TopClass"\n  :style="TopStyle"\n  :col-index="index"\n  v-ti-activable>\n  <div class="cell-wrapper"\n    :class="WrapperClass">\n    \x3c!--Slot for first column--\x3e\n    <slot></slot>\n    \x3c!--Fields--\x3e\n    <div class="cell-con">\n      <component \n        v-for="(it, index) in cellItems"\n          :class="\'item-\'+index"\n          :key="it.uniqueKey"\n          :is="it.comType"\n          v-bind="it.comConf"\n          @change="OnItemChanged(it, $event)"/>\n    </div>\n  </div>\n</div>'),function(){var t={inject:["$table"],data:function(){return{isEditingMode:!1,cellItems:[],myCellSize:-1}},props:{index:{type:Number,default:-1},rowId:{type:String,default:null},rowIndex:{type:Number,default:-1},cellSize:{type:Number,default:0},title:{type:String,default:null},nowrap:{type:Boolean,default:!0},display:{type:Array,default:function(){return[]}},name:{type:[String,Array],default:null},type:{type:String,default:"String"},dict:{type:String,default:"String"},comType:{type:String,default:null},comConf:{type:Object,default:function(){return{}}},serializer:{type:Function,default:_.identity},transformer:{type:Function,default:_.identity},data:{type:Object,default:function(){return{}}},isCurrent:{type:Boolean,default:!1},isHover:{type:Boolean,default:!1},isChecked:{type:Boolean,default:!1},ignoreNil:{type:Boolean,default:!0},focusBy:{type:String,default:"focus"},widthBy:{type:String,default:"width"}},computed:{TopClass:function(){return this.getTopClass()},TopStyle:function(){if(this.cellSize>0)return Ti.Css.toStyle({width:this.cellSize})},WrapperClass:function(){return{"is-nowrap":this.nowrap,"is-editing-mode":this.isEditingMode}},theCurrentDisplayItems:function(){if(this.isActived&&this.comType||_.isEmpty(this.display)){this.isEditingMode=!0;var t=_.assign({},this.comConf);return this.focusBy&&(t[this.focusBy]="${=isActived}"),this.widthBy&&(t[this.widthBy]="${=cellSize}"),[{comType:this.comType,comConf:t,key:this.name,type:this.type,dict:this.dict,transformer:this.transformer,ignoreNil:!1}]}return this.isEditingMode=!1,this.display}},methods:{evalCellDisplayItems:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$table.reportReady(t.rowIndex,t.index,!_.isEmpty(t.cellItems)),n=[],i=0;case 3:if(!(i<t.theCurrentDisplayItems.length)){e.next=12;break}return a=t.theCurrentDisplayItems[i],e.next=7,t.evalDataForFieldDisplayItem({itemData:t.data,displayItem:a,vars:{isCurrent:t.isCurrent,isChecked:t.isChecked,isHover:t.isHover,isActived:t.isActived,rowId:t.rowId,cellSize:t.cellSize},autoIgnoreNil:!0,uniqueKey:"row".concat(t.rowId,"-cell").concat(t.index,"-").concat(i)});case 7:(r=e.sent)&&n.push(r);case 9:i++,e.next=3;break;case 12:o=Ti.Util.pureCloneDeep(t.cellItems),s=Ti.Util.pureCloneDeep(n),_.isEqual(o,s)||(t.cellItems=n),t.$table.reportReady(t.rowIndex,t.index,!0);case 16:case"end":return e.stop()}},e)}))()},OnItemChanged:function(t,e){this.$table.$notify("cell:item:change",{rowId:this.rowId,cellIndex:this.index,index:this.rowIndex,name:t.key,value:e})}},watch:{data:{handler:"evalCellDisplayItems",immediate:!0},isCurrent:"evalCellDisplayItems",isChecked:"evalCellDisplayItems",isHover:"evalCellDisplayItems",isActived:"evalCellDisplayItems"}};Ti.Preload("ti/com/ti/table/com/table-row/com/table-cell/table-cell.mjs",t)}(),Ti.Preload("ti/com/ti/table/com/table-row/com/table-cell/_com.json",{name:"table-cell",globally:!1,template:"./table-cell.html",methods:"@com:ti/support/field_display.mjs",mixins:["./table-cell.mjs"],components:["@com:ti/label"]}),Ti.Preload("ti/com/ti/table/com/table-row/table-row.html",'<div class="table-row"\n  :class="TopClass"\n  @click.left="OnClickRow"\n  @dblclick.left="OnDblClickRow"\n  @mouseenter="OnMouseEnter"\n  @mouseleave="OnMouseLeave"\n  v-ti-activable>\n  \x3c!--\n    Cells\n  --\x3e\n  <table-cell v-for="fld in fields"\n    :key="fld.index"\n    v-bind="fld"\n    :row-id="rowId"\n    :row-index="index"\n    :cell-size="getCellSize(fld.index)"\n    :is-current="isCurrent"\n    :is-hover="isHover"\n    :is-checked="isChecked"\n    :data="data">\n    <template v-if="fld.index == 0">\n      <div class="table-row-head">\n        \x3c!--current actived row indicator--\x3e\n        <div class="row-actived-indicator"></div>\n        \x3c!-- Indents --\x3e\n        <div v-for="n in indent"\n            class="row-indent"></div>\n        \x3c!--ICON: Handler--\x3e\n        <template v-if="icon">\n          <ti-icon\n            v-if="hasRealIcon"\n              class="row-icon"\n              :value="icon"\n              @click.native.left.stop="OnClickIcon"/>\n          <div v-else\n            class="row-icon"></div>\n        </template>\n        \x3c!--ICON: Checker--\x3e\n        <ti-icon v-if="checkable"\n            class="row-checker"\n            :value="theCheckIcon"\n            @click.native.left.stop="OnClickChecker"/>\n      </div>\n    </template>\n  </table-cell>\n</div>'),function(){var t={props:{indent:{type:Number,default:0},icon:{type:[Boolean,String],default:null},fields:{type:Array,default:function(){return[]}},sizes:{type:Array,default:function(){return[]}},hoverId:{type:String,default:null}},computed:{TopClass:function(){return this.getListItemClass({"is-hover":this.isHover},"row-indent-".concat(this.indent))},isHover:function(){return this.hoverId&&this.rowId==this.hoverId},hasRealIcon:function(){return this.icon&&_.isString(this.icon)}},methods:{getCellSize:function(t){if(this.sizes.length>t)return this.sizes[t]},OnClickIcon:function(t){this.$notify("icon",{rowId:this.rowId,shift:t.shiftKey,toggle:t.ctrlKey||t.metaKey})},OnMouseEnter:function(){this.$notify("enter",{rowId:this.rowId})},OnMouseLeave:function(){this.$notify("leave",{rowId:this.rowId})}}};Ti.Preload("ti/com/ti/table/com/table-row/table-row.mjs",t)}(),Ti.Preload("ti/com/ti/table/com/table-row/_com.json",{name:"table-row",globally:!1,template:"./table-row.html",mixins:["@com:ti/support/list_item_mixins.mjs","./table-row.mjs"],components:["./com/table-cell"]}),function(){var t={iconBy:{type:[String,Function],default:null},indentBy:{type:[String,Function],default:null},fields:{type:Array,default:function(){return[]}},head:{type:String,default:"frozen",validator:function(t){return Ti.Util.isNil(t)||/^(frozen|none|normal)$/.test(t)}},border:{type:String,default:"cell",validator:function(t){return/^(row|column|cell|none)$/.test(t)}},autoScrollIntoView:{type:Boolean,default:!0}};Ti.Preload("ti/com/ti/table/ti-table-props.mjs",t)}(),function(){var t={data:function(){return{myViewportWidth:0,myTableWidth:0,myColSizes:{priHead:[],priBody:[],primary:[],fixeds:[],amended:[]},myCellsReady:!1,myCellsReport:{},I_am_in_resizing:!1}},methods:{reportReady:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a="R".concat(e,"-C").concat(n);i?delete this.myCellsReport[a]:this.myCellsReport[a]=i,_.delay(function(){t.myCellsReady=_.isEmpty(t.myCellsReport),t.myCellsReady&&t.evalEachColumnSize()})},evalEachColumnSize:function(){var t=this;if(!this.I_am_in_resizing){var e=_.get(this.$refs.body,"scrollTop");this.I_am_in_resizing=!0,this.myTableWidth=0,this.myColSizes={priHead:[],priBody:[],primary:[],fixeds:[],amended:[]};var n,i=_createForOfIteratorHelper(this.TableFields);try{for(i.s();!(n=i.n()).done;){var a=n.value.width||"stretch";/^(stretch|auto)$/.test(a)?this.myColSizes.fixeds.push(a):this.myColSizes.fixeds.push(Ti.Css.toPixel(a,1))}}catch(t){i.e(t)}finally{i.f()}this.$nextTick(function(){var n,i=_createForOfIteratorHelper(Ti.Dom.findAll(".table-head ul li",t.$el));try{for(i.s();!(n=i.n()).done;){var a=n.value,r=Ti.Rects.createBy(a);t.myColSizes.priHead.push(r.width)}}catch(t){i.e(t)}finally{i.f()}var o,s=_createForOfIteratorHelper(Ti.Dom.findAll(".table-body .table-row",t.$el));try{for(s.s();!(o=s.n()).done;)for(var c=o.value,l=Ti.Dom.findAll(":scope > div",c),u=0;u<l.length;u++){var d=l[u],m=Ti.Rects.createBy(d);u>=t.myColSizes.priBody.length?t.myColSizes.priBody[u]=m.width:t.myColSizes.priBody[u]=Math.max(m.width,t.myColSizes.priBody[u])}}catch(t){s.e(t)}finally{s.f()}for(var h=0;h<t.myColSizes.priHead.length;h++){var p=t.myColSizes.priHead[h],f=t.myColSizes.priBody[h],y=Math.max(p,f);t.myColSizes.primary.push(y)}t.onTableResize(),_.delay(function(){t.I_am_in_resizing=!1,t.$refs.body&&(t.$refs.body.scrollTop=e)},10)})}},onTableResize:function(){if(!(this.myColSizes.primary.length<=0)){for(var t=Ti.Rects.createBy(this.$el).width,e=[],n=[],i=0;i<this.myColSizes.fixeds.length;i++){var a=this.myColSizes.fixeds[i],r=this.myColSizes.primary[i];if("stretch"==a)e.push(i),n.push(r);else if("auto"==a)n.push(r);else if(a<=1&&a>0)n.push(a*t);else if(a<0&&a>=-1){var o=Math.abs(a*t);n.push(Math.max(o,r))}else if(a<-1){var s=Math.abs(a);n.push(Math.max(s,r))}else n.push(a)}var c=_.sum(n),l=Math.max(t,c);if(this.myTableWidth=l,e.length>0){var u=l-c;if(u>0){var d,m=u/e.length,h=_createForOfIteratorHelper(e);try{for(h.s();!(d=h.n()).done;){n[d.value]+=m}}catch(t){h.e(t)}finally{h.f()}}}this.myColSizes.amended=n}}},mounted:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Ti.Viewport.watch(this,{resize:_.debounce(function(){return e.onTableResize()},10)});case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),beforeDestroy:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/table/ti-table-resizes.mjs",t)}(),Ti.Preload("ti/com/ti/table/ti-table.html",'<div class="ti-table"\n  :class="TopClass"\n  @click="OnClickTop"\n  v-ti-activable>\n  \x3c!--\n    Blank\n  --\x3e\n  <ti-loading \n    v-if="isDataEmpty"\n      class="nil-data"\n      :class="\'as-\'+blankClass"\n      v-bind="blankAs"/>\n  \x3c!--\n    Show thead/tbody\n  --\x3e\n  <template v-else>\n    \x3c!--\n      Head\n    --\x3e\n    <div v-if="isShowHead"\n      class="table-head"\n      :style="TableStyle">\n      \x3c!--checker--\x3e\n      <div\n          v-if="checkable && multi"\n            class="as-checker"\n            @click.left="OnClickHeadChecker">\n            <ti-icon :value="HeadCheckerIcon"/>\n      </div>\n      \x3c!--field titles--\x3e\n      <ul>\n        <li\n          v-for="fld in TableFields"\n            class="table-head-cell"\n            :style="getHeadCellStyle(fld.index)"\n            :col-index="fld.index">\n          <span class="table-head-cell-text">{{fld.title|i18n}}</span>\n        </li>\n      </ul>\n    </div\n    \x3c!--\n      Body\n    --\x3e\n    <div ref="body"\n      class="table-body"\n      :style="TableStyle">\n      <table-row\n        v-for="row in myData"\n          :key="row.id"\n          :row-id="row.id"\n          :index="row.index"\n          :icon="row.icon"\n          :indent="row.indent"\n          :data="row.rawData"\n          :fields="TableFields"\n          :sizes="myColSizes.amended"\n          :current-id="theCurrentId"\n          :checked-ids="theCheckedIds"\n          :hover-id="myHoverId"\n          :changed-id="changedId"\n          :checkable="checkable"\n          :selectable="selectable"\n          :openable="openable"\n          @icon="$notify(\'icon\', $event)"\n          @checker="OnRowCheckerClick"\n          @select="OnRowSelect"\n          @open="OnRowOpen"\n          @enter="OnRowEnter"\n          @leave="OnRowLeave"/>\n    </div>\n  </template>\n</div>'),function(){var t={provide:function(){return{$table:this}},data:function(){return{myData:[],myHoverId:null}},computed:{TopClass:function(){return this.getTopClass({"is-cells-no-ready":!this.myCellsReady,"is-layout-ready":this.myCellsReady,"is-hoverable":this.hoverable},["is-border-".concat(this.border),"is-head-".concat(this.head||"none")])},TableStyle:function(){if(this.myTableWidth>0)return Ti.Css.toStyle({width:this.myTableWidth})},getRowIndent:function(){var t=this;return _.isFunction(this.indentBy)?function(e){return t.indentBy(e)}:_.isString(this.indentBy)?function(e){return _.get(e,t.indentBy)}:function(t){return 0}},getRowIcon:function(){var t=this;return _.isFunction(this.iconBy)?function(e){return t.iconBy(e)}:_.isString(this.iconBy)?function(e){return _.get(e,t.iconBy)}:function(t){return null}},TheData:function(){return this.myData},isShowHead:function(){return/^(frozen|normal)$/.test(this.head)},HeadCheckerIcon:function(){return this.isAllChecked?"fas-check-square":this.hasChecked?"fas-minus-square":"far-square"},TableFields:function(){for(var t=[],e=0;e<this.fields.length;e++){var n=this.fields[e],i=this.evalFieldDisplay(n.display,n.name),a=Ti.Util.fallbackNil(n.width,"stretch");_.isString(a)?/^\d+(\.\d+)?%$/.test(a)?a=a.substring(0,a.length-1)/100:/^(auto|stretch)$/.test(a)||(a="stretch"):_.isNumber(a)||(a="stretch"),t.push({index:e,title:n.title,nowrap:n.nowrap,width:a,name:n.name,display:i,type:n.type,comType:n.comType,comConf:n.comConf,transformer:n.transformer,serializer:n.serializer})}return t}},methods:{OnRowEnter:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).rowId;this.hoverable&&(this.myHoverId=t)},OnRowLeave:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).rowId;this.hoverable&&this.myHoverId==t&&(this.myHoverId=null)},OnClickHeadChecker:function(){this.isAllChecked?this.cancelRow():this.checkRow()},OnClickTop:function(t){this.cancelable&&Ti.Dom.hasOneClass(t.target,"ti-table","table-body","table-head-cell","table-head-cell-text")&&this.cancelRow()},onItemChanged:function(t){this.$notify("item:change",t)},getHeadCellStyle:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(this.myColSizes.amended.length>t)return Ti.Css.toStyle({width:this.myColSizes.amended[t]})},evalFieldDisplay:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,i=[],a=_createForOfIteratorHelper(e=_.concat(e));try{for(a.s();!(t=a.n()).done;){var r=t.value,o=this.evalFieldDisplayItem(r,{defaultKey:n});o&&i.push(o)}}catch(t){a.e(t)}finally{a.f()}return i},scrollCurrentIntoView:function(){if(this.autoScrollIntoView&&this.myLastIndex>=0){console.log("scroll");var t=this.$refs.body,e=Ti.Dom.find(".table-row:nth-child(".concat(this.myLastIndex+1,")"),t),n=Ti.Rects.createBy(t),i=Ti.Rects.createBy(e);n.contains(i)||(i.bottom>n.bottom?t.scrollTop+=i.bottom-n.bottom:t.scrollTop+=i.top-n.top)}},__ti_shortcut:function(t){return"ARROWUP"==t?(this.selectPrevRow({payload:{byKeyboardArrow:!0}}),this.scrollCurrentIntoView(),{prevent:!0,stop:!0,quit:!0}):"ARROWDOWN"==t?(this.selectNextRow({payload:{byKeyboardArrow:!0}}),this.scrollCurrentIntoView(),{prevent:!0,stop:!0,quit:!0}):void 0}},watch:{data:{handler:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(e,n){var i,a=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=_.isEqual(e,n)){t.next=5;break}return t.next=4,this.evalData(function(t){t.icon=a.getRowIcon(t.item),t.indent=a.getRowIndent(t.item)});case 4:this.myData=t.sent;case 5:_.isEmpty(this.data)&&(this.myCellsReady=!0);case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),immediate:!0}}};Ti.Preload("ti/com/ti/table/ti-table.mjs",t)}(),Ti.Preload("ti/com/ti/table/_com.json",{name:"ti-table",globally:!0,template:"./ti-table.html",props:["@com:ti/support/list_props.mjs","./ti-table-props.mjs"],methods:"@com:ti/support/field_display.mjs",mixins:["@com:ti/support/list_mixins.mjs","./ti-table-resizes.mjs","./ti-table.mjs"],components:["./com/table-row"]}),Ti.Preload("ti/com/ti/tags/com/tags-item/tags-item.html",'<div class="ti-tags-item" \n  :class="topClass"\n  @mouseenter="mouseEnter=\'top\'"\n  @mouseleave="mouseEnter=null"\n  @click.left="onClickTop">\n  \x3c!--\n    Deleter\n  --\x3e\n  <ti-icon v-if="removable"\n    class="as-del"\n    :value="removeIcon"\n    @mouseenter.native="mouseEnter=\'del\'"\n    @mouseleave.native="mouseEnter=\'top\'"\n    @click.native.stop="onClickDel"/>\n  \x3c!--\n    Icon\n  --\x3e\n  <ti-icon v-if="icon" \n    class="as-icon"\n    :value="icon"/>\n  \x3c!--\n    Text\n  --\x3e\n  <template v-if="text">\n    <a v-if="href"\n      class="as-text"\n      @click.prevent\n      :href="href"\n      :class="textClass">{{text|i18n}}</a>\n    <span v-else\n      class="as-text"\n      :class="textClass">{{text|i18n}}</span>\n  </template>\n  \x3c!--\n    Status Icon\n  --\x3e\n  <ti-icon v-if="hasOptions"\n    class="as-status"\n    :value="theStatusIcon"/>\n  \x3c!--\n    Drop & Mask\n  --\x3e\n  <template v-if="\'extended\' == status">\n    <div class="as-mask" @click.stop="closeDrop"></div>\n    <div class="as-drop" ref="drop"\n      @click.stop>\n      <ti-icon-text v-for="it in theOptions"\n        :key="it.index"\n        v-bind="it"\n        @click.native="onClickOption(it)"/>\n    </div>\n  </template>\n</div>'),function(){var t={inheritAttrs:!1,data:function(){return{mouseEnter:null,status:"collapse"}},props:{index:{type:Number,default:-1},atLast:{type:Boolean,default:!1},icon:{type:[String,Object],default:null},text:{type:String,default:null},href:{type:String,default:null},value:{type:[String,Number,Boolean,Object],default:null},options:{type:Array,default:function(){return[]}},optionDefaultIcon:{type:String,default:null},cancelBubble:{type:Boolean,default:!1},removable:{type:Boolean,default:!1},removeIcon:{type:String,default:null},statusIcons:{type:Object,default:function(){return{collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"}}}},computed:{topClass:function(){return Ti.Css.mergeClassName({"has-options":this.hasOptions,"is-enter-top":"top"==this.mouseEnter&&this.hasOptions,"is-enter-del":"del"==this.mouseEnter},this.className)},textClass:function(){return{"without-icon":!this.hasIcon&&!this.removable,"without-options":!this.hasOptions}},hasIcon:function(){return!!this.icon},hasOptions:function(){return _.isArray(this.options)&&this.options.length>0},theOptions:function(){var t=this,e=_.filter(_.concat(this.options),function(t){return!Ti.Util.isNil(t)}),n=[];return _.forEach(e,function(e,i){var a;a=_.isPlainObject(e)?_.assign({icon:t.optionDefaultIcon},e,{index:i}):{index:i,icon:t.optionDefaultIcon,text:Ti.Types.toStr(e),value:e},_.isEqual(a.value,t.value)||n.push(a)}),n},theStatusIcon:function(){return this.statusIcons[this.status]},theData:function(){return{index:this.index,icon:this.icon,text:this.text,value:this.value,href:this.href,atLast:this.atLast,asterisk:this.asterisk}}},methods:{onClickDel:function(){this.$notify("remove",this.theData)},onClickOption:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.value,n=t.text,i=t.icon;this.$notify("change",{value:e,text:n,icon:i,index:this.index}),this.closeDrop()},onClickTop:function(t){this.hasOptions?(t.stopPropagation(),this.openDrop()):this.cancelBubble&&t.stopPropagation(),this.href&&this.$notify("fire",this.theData)},openDrop:function(){var t=this;this.hasOptions&&(this.status="extended",this.$nextTick(function(){t.dockDrop()}))},closeDrop:function(){this.status="collapse",this.mouseEnter=null},dockDrop:function(){var t=this.$refs.drop,e=this.$el;if(_.isElement(t)&&_.isElement(e)&&"extended"==this.status){var n=Ti.Rects.createBy(e);Ti.Dom.setStyle(t,{"min-width":"".concat(n.width,"px")}),Ti.Dom.dockTo(t,e,{space:{y:2},posListX:["left","right"]})}}},mounted:function(){this.dockDrop()}};Ti.Preload("ti/com/ti/tags/com/tags-item/tags-item.mjs",t)}(),Ti.Preload("ti/com/ti/tags/com/tags-item/_com.json",{name:"tags-item",globally:!1,template:"./tags-item.html",mixins:["./tags-item.mjs"],components:["@com:ti/icon/text"]}),Ti.Preload("ti/com/ti/tags/ti-tags.html",'<div class="ti-tags"\n  :class="TopClass">\n  \x3c!--\n    Loop piece\n  --\x3e\n  <tags-item v-for="tag in myTags"\n    :key="tag.index"\n    v-bind="tag"\n    :cancel-bubble="cancelItemBubble"\n    :option-default-icon="optionDefaultIcon"\n    :removable="removable"\n    :remove-icon="removeIcon"\n    :status-icons="statusIcons"\n    @change="OnItemChanged"\n    @remove="OnItemRemoved"\n    @fire="OnItemFired"/>\n</div>'),function(){var t={data:function(){return{myTags:[],myValues:[]}},props:{value:{type:Array,default:function(){return[]}},dict:{type:[String,Ti.Dict],default:null},mapping:{type:Object,default:void 0},itemOptions:{type:Array,default:function(){return[]}},cancelItemBubble:{type:Boolean,default:!1},removable:{type:Boolean,default:!1},itemIconBy:{type:[String,Function],default:void 0},optionDefaultIcon:{type:String,default:void 0},itemDefaultIcon:{type:String,default:void 0},removeIcon:{type:String,default:"zmdi-close"},statusIcons:{type:Object,default:function(){return{collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"}}}},computed:{TopClass:function(){if(this.className)return this.className},getTagItemIcon:function(){var t=this;return _.isFunction(this.itemIconBy)?function(e){return t.itemIconBy(e)}:_.isString(this.itemIconBy)?function(e){return _.get(e,t.itemIconBy)}:function(t){return null}},Dict:function(){if(this.dict){if(this.dict instanceof Ti.Dict)return this.dict;var t=Ti.DictFactory.explainDictName(this.dict).name;return Ti.DictFactory.CheckDict(t)}}},methods:{OnItemChanged:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.index,n=t.value;if(e>=0){var i=this.getMyValues();i[e]=Ti.Util.fallback(n,null),this.$notify("change",i)}},OnItemRemoved:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).index;if(t>=0){var e=this.getMyValues();_.pullAt(e,t),this.$notify("change",e)}},OnItemFired:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).index,e=void 0===t?-1:t;if(e>=0){var n=_.nth(this.theData,e);n&&this.$notify("item:actived",n)}},evalMyData:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],!_.isArray(t.value)){e.next=26;break}i=t.value.length-1,a=0;case 4:if(!(a<t.value.length)){e.next=25;break}if(r=t.value[a],o=void 0,!_.isPlainObject(r)){e.next=12;break}(o=t.mapping?Ti.Util.translate(r,t.mapping):_.cloneDeep(r)).icon||(o.icon=t.getTagItemIcon(r)),e.next=20;break;case 12:if(!t.Dict){e.next=19;break}return e.next=15,t.Dict.getItem(r);case 15:s=e.sent,o=_.defaults({icon:t.Dict.getIcon(s),text:t.Dict.getText(s)||r,value:r}),e.next=20;break;case 19:o={text:r,value:r};case 20:_.defaults(o,{index:a,icon:t.itemDefaultIcon,options:t.itemOptions,atLast:a==i}),n.push(o);case 22:a++,e.next=4;break;case 25:case 26:t.myTags=n;case 27:case"end":return e.stop()}},e)}))()},getMyValues:function(){var t,e=[],n=_createForOfIteratorHelper(this.myTags);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.push(Ti.Util.fallback(i.value,null))}}catch(t){n.e(t)}finally{n.f()}return e}},watch:{value:{handler:"evalMyData",immediate:!0}}};Ti.Preload("ti/com/ti/tags/ti-tags.mjs",t)}(),Ti.Preload("ti/com/ti/tags/_com.json",{name:"ti-tags",globally:!0,template:"./ti-tags.html",mixins:["./ti-tags.mjs"],components:["./com/tags-item"]}),Ti.Preload("ti/com/ti/text/json/ti-text-json.html",'<ti-gui\n  class="ti-text-json"\n  :class="className"\n  keep-shown-to="ti-text-json-editor"\n  :layout="TheLayout"\n  :schema="TheSchema"\n  :can-loading="true"\n  @change="OnChange"/>'),function(){var t={props:{tabAt:{type:String,default:"bottom-left",validator:function(t){return/^(top|bottom)-(left|center|right)$/.test(t)}},value:void 0,tree:{type:Object,default:function(){return{}}}},computed:{TheContent:function(){return Ti.Util.isNil(this.value)?"":this.value},TheData:function(){return Ti.Util.isNil(this.value)?null:Ti.Types.safeParseJson(this.value,null)},TheLayout:function(){return{type:"tabs",tabAt:this.tabAt,blocks:[{title:"i18n:structure",name:"tree",body:"desktop-tree"},{title:"i18n:source-code",name:"source",body:"desktop-source"}]}},TheSchema:function(){return{"desktop-tree":{comType:"ti-text-json-tree",comConf:_.assign({},this.tree,{value:this.TheData})},"desktop-source":{comType:"ti-text-raw",comConf:{showTitle:!1,value:this.value}}}}},methods:{OnChange:function(t){this.$notify("change",t)}}};Ti.Preload("ti/com/ti/text/json/ti-text-json.mjs",t)}(),Ti.Preload("ti/com/ti/text/json/tree/item/json-tree-item.html",'<div class="json-value"\n  :class="topClass"\n  v-ti-activable>\n  \x3c!--\n  //  - Label   : Readonly\n  --\x3e\n  <span v-if="isLabel"\n    class="as-editing as-label">{{theLabelDisplayText}}</span>\n  \x3c!--\n  //  - Boolean : Editable boolean value\n  --\x3e\n  <ti-toggle v-else-if="\'Boolean\' == valueType"\n    class="as-editing"\n    :value="value"\n    @change="$notify(\'change\', $event)"/>\n  \x3c!--\n  //  - Integer : Editable integer value\n  //  - Float   : Editable float value\n  //  - String  : Editable string value\n  //  - Nil     : Edtiable any value\n  --\x3e\n  <ti-label v-else\n    class="as-editing"\n    :value="value"\n    :class-name="theValueClassName"\n    :format="theValueFormat"\n    :editable="true"\n    @change="$notify(\'change\', $event)"/>\n  \x3c!--\n    Action Menu\n  --\x3e\n  <ti-actionbar v-if="showActions"\n    class="as-actions"\n    :items="theActionMenuData"\n    :status="theActionMenuStatus"/>\n</div>'),function(){var t={inheritAttrs:!1,data:function(){return{}},props:{value:null,valueType:{type:String,default:"Nil"},valuePath:{type:[String,Array],default:function(){return[]}},showActions:{type:Boolean,default:!1}},computed:{topClass:function(){return Ti.Css.mergeClassName({"is-self-actived":this.isSelfActived,"is-actived":this.isActived})},isLabel:function(){return/^(Array|Object)$/.test(this.valueType)},isTop:function(){return 0==this.theValuePath.length},theLabelDisplayText:function(){return"Array"==this.valueType?"[..]":"Object"==this.valueType?"{..}":"???"},theValuePath:function(){return _.isArray(this.valuePath)?this.valuePath:_.isString(this.valuePath)?_.without(this.valuePath.split(/[\/.]/g),""):[]},theValueClassName:function(){return _.kebabCase("is".concat(this.valueType))},theValueFormat:function(){if("String"==this.valueType)return function(t){return t?'"'.concat(t,'"'):'""'}},theActionMenuData:function(){var t=this,e=[{name:"jvTypeArray",text:"i18n:json-Array",type:"action",altDisplay:{icon:"zmdi-check",capture:!1},action:function(){t.$notify("change",{jsonMutate:"ChangeValueType",args:"Array"})}},{name:"jvTypeObject",text:"i18n:json-Object",type:"action",altDisplay:{icon:"zmdi-check",capture:!1},action:function(){t.$notify("change",{jsonMutate:"ChangeValueType",args:"Object"})}}],n=[{name:"jv-add",type:"action",icon:"zmdi-plus",action:function(){t.$notify("change",{jsonMutate:"Add"})}}];return this.isTop||(n.push({type:"line"}),n.push({name:"jv-remove",type:"action",icon:"zmdi-delete",action:function(){t.$notify("change",{jsonMutate:"Remove"})}}),e.push({type:"line"}),e.push({name:"jvTypeBoolean",text:"i18n:json-Boolean",type:"action",altDisplay:{icon:"zmdi-check",capture:!1},action:function(){t.$notify("change",{jsonMutate:"ChangeValueType",args:"Boolean"})}}),e.push({name:"jvTypeNumber",text:"i18n:json-Number",type:"action",altDisplay:{icon:"zmdi-check",capture:!1},action:function(){t.$notify("change",{jsonMutate:"ChangeValueType",args:"Number"})}}),e.push({name:"jvTypeString",text:"i18n:json-String",type:"action",altDisplay:{icon:"zmdi-check",capture:!1},action:function(){t.$notify("change",{jsonMutate:"ChangeValueType",args:"String"})}}),e.push({name:"jvTypeNil",text:"i18n:json-Nil",type:"action",altDisplay:{icon:"zmdi-check",capture:!1},action:function(){t.$notify("change",{jsonMutate:"ChangeValueType",args:"Nil"})}})),n.push({type:"line"}),n.push({key:"jv-types",type:"group",icon:"zmdi-more",items:e}),n},theActionMenuStatus:function(){return{jvTypeBoolean:"Boolean"==this.valueType,jvTypeInteger:"Integer"==this.valueType,jvTypeFloat:"Float"==this.valueType,jvTypeNumber:"Number"==this.valueType,jvTypeString:"String"==this.valueType,jvTypeArray:"Array"==this.valueType,jvTypeObject:"Object"==this.valueType,jvTypeNil:"Nil"==this.valueType}}},methods:{},watch:{},mounted:function(){}};Ti.Preload("ti/com/ti/text/json/tree/item/json-tree-item.mjs",t)}(),Ti.Preload("ti/com/ti/text/json/tree/item/_com.json",{name:"ti-text-json-tree-item",globally:!0,template:"./json-tree-item.html",mixins:["./json-tree-item.mjs"]}),Ti.Preload("ti/com/ti/text/json/tree/ti-text-json-tree.html",'<ti-tree class="ti-text-json-tree"\n  title="i18n:name"\n  :main-width="mainWidth"\n  :class="className"\n  :border="border"\n  :keep-open-by="keepOpenBy"\n  :multi="true"\n  :data="myTreeRoot"\n  :display="TreeDisplay"\n  :auto-open="autoOpen"\n  :current-id="myTreeCurrentPathId"\n  :default-open-depth="2"\n  :fields="TreeFields"\n  @select\n  @node:item:change="OnNodeItemChange"\n  @opened-status:changed="OnOpenedStatusChanged"/>'),function(){var t={data:function(){return{myTreeRoot:[],myTreeCurrentPathId:null,myTreeOpenedStatus:{}}},props:{value:null,mainWidth:{type:[String,Number],default:.372},border:{type:String,default:"cell",validator:function(t){return/^(row|column|cell|none)$/.test(t)}},keepOpenBy:{type:String,default:null},autoOpen:{type:Boolean,default:!1},showRoot:{type:Boolean,default:!0},editing:{type:Object,default:function(){return{}}}},computed:{TreeDisplay:function(){return{key:"name",comType:"ti-label",comConf:function(t){return{className:_.kebabCase("is-".concat(t.nameType)),editable:"Key"==t.nameType,format:{Index:"[${val}]",Label:"i18n:json-${val}"}[t.nameType]}}}},TreeFields:function(){return[{title:"i18n:value",width:.618,display:{key:"value",ignoreNil:!1,comType:"ti-text-json-tree-item",comConf:{valueType:"${valueType}",valuePath:"${=rowId}",showActions:"${=isCurrent}"}}}]}},methods:{evalTreeData:function(){var t=[];this.joinTreeTableRow(t,this.value),this.myTreeRoot=_.first(t)},getJsValueType:function(t){return Ti.Util.isNil(t)?"Nil":_.isArray(t)?"Array":_.isNumber(t)?"Number":_.upperFirst(_typeof(t))},joinTreeTableRow:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,r=this.getJsValueType(i);if(_.isUndefined(a)?(a=r,t="Label"):t=_.isNumber(a)?"Index":"Key",_.isUndefined(i)?n.push({nameType:t,valueType:r,name:a,value:void 0}):_.isNull(i)&&n.push({nameType:t,valueType:r,name:a,value:null}),_.isArray(i)){for(var o={nameType:t,valueType:"Array",name:a,value:i,children:[]},s=0;s<i.length;s++){var c=i[s];this.joinTreeTableRow(o.children,c,s)}n.push(o)}else if(_.isPlainObject(i)){var l={nameType:t,valueType:"Object",name:a,value:i,children:[]};_.forEach(i,function(t,n){e.joinTreeTableRow(l.children,t,n)}),n.push(l)}else _.isBoolean(i)?n.push({nameType:t,valueType:r,name:a,value:!!i}):_.isNumber(i)?n.push({nameType:t,valueType:r,name:a,value:1*i}):_.isString(i)&&n.push({nameType:t,valueType:r,name:a,value:i+""})},doAdd:function(){var t=arguments,e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:{},a=t.length>1&&void 0!==t[1]?t[1]:[],r=Ti.Trees.getByPath(e.myTreeRoot,a),o=_.isEmpty(a)?i:_.get(i,a),s=e.myTreeOpenedStatus[a.join("/")],r){n.next=7;break}return n.abrupt("return");case 7:if(!s||!_.isArray(o)){n.next=11;break}o.push(null),n.next=39;break;case 11:if(!s||!_.isPlainObject(o)){n.next=20;break}return n.next=14,Ti.Prompt("i18n:json-new-key");case 14:if(c=n.sent,!Ti.Util.isNil(c)){n.next=17;break}return n.abrupt("return");case 17:o[c]=null,n.next=39;break;case 20:if(!(a.length>0)){n.next=39;break}if(l=a.slice(0,a.length-1),u=_.isEmpty(l)?i:_.get(i,l),d=_.last(a),!_.isArray(u)){n.next=29;break}m=u,Ti.Util.insertToArray(u,d+1,null),n.next=36;break;case 29:if(!_.isPlainObject(u)){n.next=36;break}return n.next=32,Ti.Prompt("i18n:json-new-key");case 32:if(h=n.sent,!Ti.Util.isNil(h)){n.next=35;break}return n.abrupt("return");case 35:m=Ti.Util.appendToObject(u,d,_defineProperty({},h,null));case 36:if(0!=l.length){n.next=38;break}return n.abrupt("return",m);case 38:_.set(i,l,m);case 39:return n.abrupt("return",i);case 40:case"end":return n.stop()}},n)}))()},doRemove:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!_.isEmpty(n)){var i,a=Ti.Trees.getByPath(this.myTreeRoot,n),r=Ti.Trees.nextCandidate(a),o=n.slice(0,n.length-1),s=_.isEmpty(o)?e:_.get(e,o),c=_.last(n);if(_.isArray(s)?(i=[],_.forEach(s,function(t,e){e!=c&&i.push(t)})):_.isPlainObject(s)&&(i={},_.forEach(s,function(t,e){e!=c&&(i[e]=t)})),r&&r.node){var l=_.concat(r.path,r.node.name).join("/");this.$nextTick(function(){t.myTreeCurrentPathId=l})}return 0==o.length?i:(_.set(e,o,i),e)}},doChangeValueType:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=_.isEmpty(e),a=i?t:_.get(t,e),r={Boolean:function(t){return!!t},Number:function(t){var e=1*t;return isNaN(e)?-1:e},Integer:function(t){var e=parseInt(t);return isNaN(e)?-1:e},Float:function(t){var e=1*t;return isNaN(e)?-1:e},String:function(t){return _.isArray(t)||_.isObject(t)?JSON.stringify(t):t+""},Array:function(t){return _.isArray(t)?void 0:Ti.Util.isNil(t)?[]:[t]},Object:function(t){if(_.isArray(t)){var e=_.fromPairs(t),n={};return _.forEach(e,function(t,e){Ti.Util.isNil(e)||_.isUndefined(t)||(n[e]=t)}),_.isEmpty(n)&&!_.isEmpty(t)&&Ti.Util.merge(n,t),n}if(!_.isPlainObject(t))return _.isString(t)?Ti.Types.safeParseJson(t,{value:t}):{value:t}},Nil:function(t){return null}}[n];if(_.isFunction(r)){var o=r(a);if(_.isUndefined(o))return;return i?o:(_.set(t,e,o),t)}},OnNodeItemChange:function(){var t=arguments,e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:{},a=i.name,r=i.value,o=i.data,s=i.node,c=i.nodeId,s.id){n.next=3;break}return n.abrupt("return");case 3:if(l=_.cloneDeep(e.value),u=s.path,!r||!r.jsonMutate){n.next=14;break}return d={Add:e.doAdd,Remove:e.doRemove,ChangeValueType:e.doChangeValueType}[r.jsonMutate],n.next=9,Ti.DoInvoke(d,_.concat([l,u],r.args),e);case 9:if(l=n.sent,!_.isUndefined(l)){n.next=12;break}return n.abrupt("return");case 12:n.next=15;break;case 14:"name"==a?l=Ti.Util.setKey(l,u,r):"value"==a&&(m={Integer:function(t){var e=parseInt(t);return isNaN(e)?t:e},Float:function(t){var e=1*t;return isNaN(e)?t:e},Number:function(t){var e=1*t;return isNaN(e)?t:e},Nil:function(t){return Ti.S.toJsValue(t,{autoDate:!1})}}[o.valueType],h=_.isFunction(m)?m(r):r,_.set(l,u,h));case 15:e.$notify("change",l);case 16:case"end":return n.stop()}},n)}))()},OnOpenedStatusChanged:function(t){this.myTreeOpenedStatus=t}},watch:{value:function(){this.evalTreeData()}},mounted:function(){this.evalTreeData()}};Ti.Preload("ti/com/ti/text/json/tree/ti-text-json-tree.mjs",t)}(),Ti.Preload("ti/com/ti/text/json/tree/_com.json",{name:"ti-text-json-tree",globally:!0,i18n:"@i18n:ti-text-json",template:"./ti-text-json-tree.html",mixins:["./ti-text-json-tree.mjs"],components:["@com:ti/tree","@com:ti/text/json/tree/item"]}),Ti.Preload("ti/com/ti/text/json/_com.json",{name:"ti-text-json",globally:!0,i18n:"@i18n:ti-text-json",template:"./ti-text-json.html",mixins:["./ti-text-json.mjs"],components:["@com:ti/gui","@com:ti/text/raw","@com:ti/toggle","@com:ti/text/json/tree"]}),Ti.Preload("ti/com/ti/text/markdown/preview/markdown-preview.html",'<div class="ti-markdown-preview"\n  :class="TopClass">\n  <article \n    :class="ThemeClass"\n    v-html="myHtml"></article>\n  \x3c!--pre>{{myHtml}}</pre--\x3e\n</div>'),function(){var t={data:function(){return{myHtml:null,myTheme:null}},props:{previewMediaSrc:{type:[String,Function],default:void 0},value:{type:String,default:""},placeholder:{type:String,default:"i18n:blank"},theme:{type:String,default:"nice"}},computed:{TopClass:function(){return this.getTopClass()},ThemeClass:function(){if(this.myTheme)return"ti-markdown-theme-".concat(this.myTheme)},ThePreviewMediaSrc:function(){var t=this,e=_.identity;return _.isString(this.previewMediaSrc)?e=function(e){return Ti.S.renderBy(t.previewMediaSrc,{src:e})}:_.isFunction(this.previewMediaSrc)&&(e=this.previewMediaSrc),function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!/^(https?:)(\/\/)/.test(n)){t.next=2;break}return t.abrupt("return",n);case 2:return t.abrupt("return",e(n));case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}},methods:{renderMarkdown:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Ti.Util.isBlank(t.value)){e.next=9;break}return n=Cheap.parseMarkdown(t.value),console.log(n.toString()),e.next=5,n.toBodyInnerHtml({mediaSrc:t.ThePreviewMediaSrc});case 5:t.myHtml=e.sent,t.myTheme=n.getMeta("theme",t.theme),e.next=11;break;case 9:t.myHtml=Ti.I18n.text(t.placeholder),t.myTheme=t.theme;case 11:case"end":return e.stop()}},e)}))()}},watch:{value:{handler:"renderMarkdown",immediate:!0}}};Ti.Preload("ti/com/ti/text/markdown/preview/markdown-preview.mjs",t)}(),Ti.Preload("ti/com/ti/text/markdown/preview/_com.json",{name:"ti-text-markdown-preview",globally:!0,template:"./markdown-preview.html",mixins:["./markdown-preview.mjs"]}),Ti.Preload("ti/com/ti/text/markdown/richeditor/ti-markdown-richeditor-delegate-methods.mjs",{getSelection:function(){var t;return(t=this.$editor).getSelection.apply(t,arguments)},setSelection:function(){var t;return(t=this.$editor).setSelection.apply(t,arguments)},updateContents:function(){var t;return(t=this.$editor).updateContents.apply(t,arguments)}}),function(){var t={mediaBase:{type:String,default:void 0},value:{type:String,default:""},actions:{type:Object,default:function(){return{}}},markdownMediaSrc:{type:[String,Function],default:void 0},previewMediaSrc:{type:[String,Function],default:void 0},placeholder:{type:String,default:"i18n:blank"},theme:{type:String,default:"nice"},toolbar:{type:Array,default:function(){return["Heading","|","B","I","|","Link","Code","|","BlockQuote","CodeBlock","|","Outdent","Indent","|","UL","OL"]}},toolbarAlign:{type:String,default:"left",validator:function(t){return/^(left|right|center)$/.test(t)}},blankAs:{type:Object,default:function(){return{icon:"fas-coffee",text:null}}}};Ti.Preload("ti/com/ti/text/markdown/richeditor/ti-markdown-richeditor-props.mjs",t)}(),Ti.Preload("ti/com/ti/text/markdown/richeditor/ti-markdown-richeditor.html",'<div class="ti-markdown-richeditor"\n  :class="TopClass">\n  \x3c!--\n    Toolbar\n  --\x3e\n  <ti-actionbar \n    v-if="hasToolbar"\n      class="as-toolbar"\n      :items="ToolbarMenuData" \n      :align="toolbarAlign"\n      :status="myToolbarStatus"\n      @change="OnToolbarChange"/>\n  \x3c!--\n    Stage\n  --\x3e\n  <div ref="stage"\n    class="as-stage"\n    spellcheck="false"\n    :class="ThemeClass"></div>\n  \x3c!--\n    Cover when nil\n  --\x3e\n  <ti-loading\n    v-if="isNilContent"\n      class="as-nil-mask as-big-mask"\n      v-bind="blankAs"/>\n</div>'),function(){var t={"|":{type:"line"},B:{icon:"fas-bold",notify:"bold",highlight:"bold",disabled:"italic"},I:{icon:"fas-italic",notify:"italic",highlight:"italic",disabled:"bold"},Link:{icon:"fas-link",notify:"link",highlight:"link"},Code:{icon:"zmdi-code",notify:"code",highlight:"code"},Heading:{type:"group",icon:"fas-hashtag",text:"i18n:wordp-heading",items:[{text:"i18n:wordp-h1",notify:"header",highlight:"h1",value:1},{text:"i18n:wordp-h2",notify:"header",highlight:"h2",value:2},{text:"i18n:wordp-h3",notify:"header",highlight:"h3",value:3},{text:"i18n:wordp-h4",notify:"header",highlight:"h4",value:4},{text:"i18n:wordp-h5",notify:"header",highlight:"h5",value:5},{text:"i18n:wordp-h6",notify:"header",highlight:"h6",value:6},{text:"i18n:wordp-h0",notify:"header",highlight:"h0",value:0}]},BlockQuote:{icon:"fas-quote-right",notify:"blockquote",highlight:"blockquote"},CodeBlock:{icon:"fas-code",notify:"code_block",highlight:"code-block"},Indent:{icon:"fas-indent",notify:"indent"},Outdent:{icon:"fas-outdent",notify:"outdent"},UL:{icon:"fas-list-ul",notify:"list",value:"bullet",highlight:{list:"bullet"}},OL:{icon:"fas-list-ol",notify:"list",value:"ordered",highlight:{list:"ordered"}}},e={data:function(){return{myMeta:{},syncForbid:0,myToolbarStatus:{}}},computed:{TopClass:function(){return this.getTopClass({"nil-content":this.isNilContent,"has-content":!this.isNilContent})},ThemeClass:function(){if(this.ThemeName)return"ti-markdown-theme-".concat(this.ThemeName)},ThemeName:function(){return _.get(this.myMeta,"theme")||this.theme},hasToolbar:function(){return!_.isEmpty(this.ToolbarMenuData)},isNilContent:function(){return Ti.Util.isNil(this.value)},ToolbarActions:function(){return _.merge({},t,this.actions)},ToolbarMenuData:function(){var t=this,e=[];return _.forEach(this.toolbar,function(n){var i=_.get(t.ToolbarActions,n);i&&e.push(i)}),e},TheMarkdownMediaSrc:function(){return _.isFunction(this.markdownMediaSrc)?this.markdownMediaSrc:_.isString(this.markdownMediaSrc)?Ti.Util.genInvoking(this.markdownMediaSrc,{partialRight:!0}):void 0},ThePreviewMediaSrc:function(){return _.isFunction(this.previewMediaSrc)?this.previewMediaSrc:_.isString(this.previewMediaSrc)?Ti.Util.genInvoking(this.previewMediaSrc,{partialRight:!0}):void 0}},methods:{OnToolbarChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.name,n=t.value,i={bold:function(t,e){t.format("bold",e)},italic:function(t,e){t.format("italic",e)},code:function(t,e){t.format("code",e)},header:function(t,e){t.format("header",e)},blockquote:function(t,e){t.format("blockquote",e)},code_block:function(t,e){t.format("code-block",e)},link:function(t,e){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.getSelection()){n.next=5;break}return n.next=4,Ti.Toast.Open("i18n:wordp-nil-sel","warn");case 4:return n.abrupt("return",n.sent);case 5:if(!e){n.next=18;break}if(!(i.length>0)){n.next=13;break}return n.next=9,Ti.Prompt("i18n:wordp-link");case 9:a=n.sent,Ti.Util.isNil(a)||(r=t.format("link",a)),n.next=16;break;case 13:return n.next=15,Ti.Toast.Open("i18n:wordp-nil-sel","warn");case 15:return n.abrupt("return",n.sent);case 16:n.next=19;break;case 18:t.format("link",!1);case 19:case"end":return n.stop()}},n)}))()},indent:function(t){t.format("indent","+1")},outdent:function(t){t.format("indent","-1")},list:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bullet";t.format("list",e)}}[e];_.isFunction(i)&&(i(this.$editor,n),this.quillUpdateFormat())},renderMarkdown:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("!!!!!!!!!!!!!!!!!!!!!! renderMarkdown"),Ti.Util.isBlank(t.value)){e.next=13;break}return n=Cheap.parseMarkdown(t.value),console.log(n.toString()),window.MdDoc=n,t.myMeta=_.cloneDeep(n.getMeta()),e.next=8,n.toDelta({mediaSrc:t.ThePreviewMediaSrc});case 8:i=e.sent,console.log(JSON.stringify(i,null,"   ")),t.$editor.setContents(i),e.next=15;break;case 13:t.myMeta={},t.$editor.setContents([]);case 15:case"end":return e.stop()}},e)}))()},syncMarkdown:function(){if(this.syncForbid>0)return console.log("!forbid! syncMarkdown",this.syncForbid),void this.syncForbid--;this.renderMarkdown()},quillChanged:function(t){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.isNilContent){n.next=2;break}return n.abrupt("return");case 2:return(i=Cheap.parseDelta(t)).setDefaultMeta(e.myMeta),e.myMeta=i.getMeta(),n.next=7,i.toMarkdown({mediaSrc:e.TheMarkdownMediaSrc});case 7:(a=n.sent)!=e.value&&(e.syncForbid=1,e.$notify("change",a));case 9:case"end":return n.stop()}},n)}))()},quillSelectionChanged:function(t){if(t){var e=[t.index];t.length>0&&e.push(t.length),this.$notify("indicate",e.join(":")),this.quillUpdateFormat(t)}},quillUpdateFormat:function(t){var e=this.$editor.getFormat(t);e.header?e["h".concat(e.header)]=!0:e.h0=!0,_.isEqual(this.myToolbarStatus,e)||(this.myToolbarStatus=e)},installQuillEditor:function(){var t=this;this.$editor||(!function(t){if(!t.__has_been_reset){var e=t.import("formats/indent");e.keyName="li-indent",e.whitelist=[1,2,3,4,5,6],t.__has_been_reset=!0}}(Quill),this.$editor=new Quill(this.$refs.stage,{modules:{syntax:!1},bounds:this.$refs.stage,placeholder:Ti.I18n.text(this.placeholder)}),this.debounceQuillChanged=_.debounce(function(e,n){var i=n.compose(e);t.quillChanged(i)},1e3),this.$editor.on("text-change",function(e,n,i){t.isNilContent||t.debounceQuillChanged(e,n)}),this.$editor.on("selection-change",function(e,n,i){t.quillSelectionChanged(e)}))}},watch:{value:{handler:"syncMarkdown"},isNilContent:function(t,e){t&&(this.syncForbid=0)}},mounted:function(){this.syncForbid=0,this.installQuillEditor(),this.syncMarkdown()},beforeDestroy:function(){this.syncForbid=0}};Ti.Preload("ti/com/ti/text/markdown/richeditor/ti-markdown-richeditor.mjs",e)}(),Ti.Preload("ti/com/ti/text/markdown/richeditor/_com.json",{name:"ti-text-markdown-richeditor",globally:!0,i18n:"@i18n:ti-text-editor",css:"@deps:highlight/default.css",template:"./ti-markdown-richeditor.html",props:"./ti-markdown-richeditor-props.mjs",methods:"./ti-markdown-richeditor-delegate-methods.mjs",mixins:["./ti-markdown-richeditor.mjs"],components:["@com:wn/adaptlist"],deps:["@deps:quill/quill.js","@deps:highlight/highlight.js"]}),Ti.Preload("ti/com/ti/text/raw/ti-text-raw.html",'<div class="ti-text-raw"\n  :class="TopClass"\n  v-ti-activable>\n  \x3c!--\n    Header\n  --\x3e\n  <div\n    v-if="isShowHead"\n      class="as-head">\n      <ti-icon :value="icon"/>\n      <span>{{title}}</span>\n  </div>\n  \x3c!--\n    Main\n  --\x3e\n  <div class="as-main">\n    <textarea ref="text" \n      spellcheck="false"\n      :placeholder="placeholder | i18n"\n      :value="myContent"\n      @compositionstart="OnInputCompositionStart"\n      @compositionend="OnInputCompositionEnd"\n      @input="OnInputing"\n      @change="OnTextChanged"></textarea>\n  </div>\n</div>'),function(){var t={data:function(){return{myContent:null,inputCompositionstart:!1}},props:{icon:{type:[String,Object],default:void 0},title:{type:String,default:void 0},trimed:{type:Boolean,default:!1},value:{type:String,default:""},placeholder:{type:String,default:"i18n:blank"},status:{type:Object,default:function(){return{}}}},computed:{TopClass:function(){return this.getTopClass({"show-title":this.showTitle,"hide-title":!this.showTitle,"is-changed":_.get(this.status,"changed")})},isShowHead:function(){return this.title||this.icon},hasContent:function(){return!Ti.Util.isNil(this.value)}},methods:{OnInputCompositionStart:function(){this.inputCompositionstart=!0},OnInputCompositionEnd:function(){this.inputCompositionstart=!1,this.OnTextChanged()},OnInputing:function(t){this.inputCompositionstart||this.OnTextChanged()},OnTextChanged:function(){var t=_.get(this.$refs.text,"value");this.trimed&&(t=_.trim(t)),this.myContent=t},syncMyContent:function(){this.myContent=this.value},checkMyContent:function(){this.myContent!=this.value&&this.$notify("change",this.myContent)},__ti_shortcut:function(t){if("CTRL+ENTER"==t)return this.myContent!=this.value&&this.$notify("change",this.myContent),{prevent:!0}}},watch:{value:"syncMyContent",myContent:function(){this.debCheckChange()}},created:function(){var t=this;this.debCheckChange=_.debounce(function(){t.checkMyContent()},500)},mounted:function(){this.syncMyContent()}};Ti.Preload("ti/com/ti/text/raw/ti-text-raw.mjs",t)}(),Ti.Preload("ti/com/ti/text/raw/_com.json",{name:"ti-text-raw",globally:!0,template:"./ti-text-raw.html",mixins:["./ti-text-raw.mjs"]}),Ti.Preload("ti/com/ti/time/ti-time.html",'<div class="ti-col-data as-time" \n  :class="topClass" \n  :style="topStyle">\n  <ti-list v-for="list in theListGroup"\n    :key="list.key"\n    :data="list.data"\n    :display="\'text\'"\n    :current-id="list.currentId"\n    :cancelable="false"\n    @select="onListSelected(list.key, $event)"/>\n</div>'),function(){var t={inheritAttrs:!1,props:{value:{type:[String,Number,Date,Ti.Types.Time],default:null},valueUnit:{type:String,default:"s",validator:function(t){return/^(ms|s|min|hr)$/.test(t)}},mode:{type:String,default:"auto",validator:function(t){return/^(sec|min|auto)$/.test(t)}},width:{type:[Number,String],default:null},height:{type:[Number,String],default:200}},computed:{topClass:function(){return this.getTopClass()},topStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})},theTime:function(){return Ti.Types.toTime(this.value||0,{unit:this.valueUnit})},theListGroup:function(){var t=[this.createList("hours",0,24,this.theTime.hours),this.createList("minutes",0,60,this.theTime.minutes)];return/^(auto|sec)$/.test(this.mode)&&t.push(this.createList("seconds",0,60,this.theTime.seconds)),t}},methods:{createList:function(t,e,n){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a={key:t,currentId:"R-".concat(i),data:[]},r=e;r<n;r++)a.data.push({id:"R-".concat(r),value:r,text:_.padStart(r,2,"0")});return a},onListSelected:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).current,n=this.theTime.clone();n[t]=_.get(e,"value")||0,this.$notify("change",n)}}};Ti.Preload("ti/com/ti/time/ti-time.mjs",t)}(),Ti.Preload("ti/com/ti/time/_com.json",{name:"ti-time",globally:!0,template:"./ti-time.html",mixins:["./ti-time.mjs"],components:["@com:ti/list"]}),Ti.Preload("ti/com/ti/toggle/ti-toggle.html",'<div class="ti-toggle"\n  :class="topClass">\n  <aside @click.left="onClick"><b></b></aside>\n</div>'),function(){var t={data:function(){return{isOn:!1}},props:{value:!1,readonly:!1,options:{type:Array,default:function(){return[!1,!0]}}},computed:{topClass:function(){return Ti.Css.mergeClassName({"is-off":!this.isOn,"is-on":this.isOn},this.className)}},methods:{onClick:function(){if(!this.readonly){var t=this.isOn?0:1;this.$notify("change",this.options[t])}}},watch:{value:function(){this.isOn=!!this.value}},mounted:function(){this.isOn=!!this.value}};Ti.Preload("ti/com/ti/toggle/ti-toggle.mjs",t)}(),Ti.Preload("ti/com/ti/toggle/_com.json",{name:"ti-toggle",globally:!0,template:"./ti-toggle.html",mixins:["./ti-toggle.mjs"]}),function(){var t={options:{type:[String,Array,Function,Ti.Dict],default:function(){return[]}},valueBy:{type:[String,Function],default:void 0},textBy:{type:[String,Function],default:void 0},iconeBy:{type:[String,Function],default:void 0},value:void 0,canComType:{type:String,default:void 0},canComConf:{type:Object,default:void 0},selComType:{type:String,default:void 0},selComConf:{type:Object,default:void 0},filter:{type:Boolean,default:!0},fltComType:{type:String,default:"ti-input"},fltComConf:{type:Object,default:void 0},display:{type:[Object,String,Array],default:void 0},assignButtons:{type:Object,default:function(){return{add:"fas-angle-double-right",remove:"fas-angle-double-left"}}},canTitle:{type:String,default:"i18n:candidate"},selTitle:{type:String,default:"i18n:checked"},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null}};Ti.Preload("ti/com/ti/transfer/ti-transfer-props.mjs",t)}(),Ti.Preload("ti/com/ti/transfer/ti-transfer.html",'<div class="ti-transfer"\n  :class="TopClass"\n  :style="TopStyle">\n  \x3c!--=========================================\n    Left: Candidates\n  --\x3e\n  <div class="as-box as-can-list">\n    \x3c!--\n      Head\n    --\x3e\n    <div class="as-box-head">\n      <div class="as-list-checker"\n        @click.left="OnClickHeadChecker(can)">\n        <ti-icon :value="GetHeadCheckerIcon(can)"/>\n      </div>\n      \x3c!--Title--\x3e\n      <div class="as-title">{{canTitle|i18n}}</div>\n      \x3c!--Filter--\x3e\n      <div v-if="filter"\n        class="as-filter">\n          <component \n            :is="fltComType"\n            v-bind="FilterComConf"\n            :value="myFilterValue"\n            @change="OnFilterChanged"\n            /></div>\n    </div>\n    \x3c!--\n      component\n    --\x3e\n    <component :is="CanListComType"\n      class="as-box-main ti-fill-parent"\n      v-bind="CanListComConf"\n      @select="OnCanListSelected"/>\n    \x3c!--\n      Foot\n    --\x3e\n    <div class="as-box-foot">\n      <span>{{\'total-count\'|i18n({nb:can.data.length})}}</span>\n    </div>\n  </div>\n  \x3c!--=========================================\n    Buttons\n  --\x3e\n  <div class="as-buttons">\n    \x3c!--Add--\x3e\n    <div class="as-btn is-add"\n      @click.left="canListToSel">\n      <ti-icon :value="assignButtons.add"/>\n    </div>\n    \x3c!--Remove--\x3e\n    <div class="as-btn is-remove"\n      @click.left="selListToCan">\n      <ti-icon :value="assignButtons.remove"/>\n    </div>\n  </div>\n  \x3c!--=========================================\n    Right: Checked\n  --\x3e\n  <div class="as-box as-sel-list">\n    \x3c!--\n      Head\n    --\x3e\n    <div class="as-box-head">\n      <div class="as-list-checker"\n        @click.left="OnClickHeadChecker(sel)">\n        <ti-icon :value="GetHeadCheckerIcon(sel)"/>\n      </div>\n      <div class="as-title">{{selTitle|i18n}}</div>\n    </div>\n    \x3c!--\n      component\n    --\x3e\n    <component :is="SelListComType"\n      class="as-box-main ti-fill-parent"\n      v-bind="SelListComConf"\n      @select="OnSelListSelected"/>\n    \x3c!--\n      Foot\n    --\x3e\n    <div class="as-box-foot">\n      <span>{{\'total-count\'|i18n({nb:sel.data.length})}}</span>\n    </div>\n  </div>\n</div>'),function(){var t={inheritAttrs:!1,data:function(){return{myFilterValue:null,myOptionsData:[],can:{data:[],checkedIds:[]},sel:{data:[],checkedIds:[]},selIdMap:{}}},computed:{TopClass:function(){return this.getTopClass()},TopStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})},Values:function(){return Ti.S.toArray(this.value)},CanListComType:function(){return this.canComType||"ti-list"},SelListComType:function(){return this.selComType||"ti-list"},CanListComConf:function(){return this.genComConf(this.canComConf,this.can)},SelListComConf:function(){return this.genComConf(this.selComConf,this.sel)},FilterComConf:function(){return _.assign({trimed:!0,width:"100%",prefixIcon:"zmdi-filter-list",placeholder:"i18n:filter",hover:["prefixIcon","suffixText","suffixIcon"]},this.fltComConf)},GetValueBy:function(){var t=this;return function(e){return t.Dict.getValue(e)}},Dict:function(){var t=this;if(this.options instanceof Ti.Dict)return this.options;if(_.isString(this.options)){var e=Ti.DictFactory.DictReferName(this.options);if(e)return Ti.DictFactory.CheckDict(e,function(e){var n=e.loading;t.loading=n})}return Ti.DictFactory.CreateDict({data:this.options,getValue:Ti.Util.genGetter(this.valueBy||"value"),getText:Ti.Util.genGetter(this.textBy||"text|name"),getIcon:Ti.Util.genGetter(this.textBy||"icon")})}},methods:{OnCanListSelected:function(t){var e=t.checkedIds;this.can.checkedIds=this.getIds(e)},OnSelListSelected:function(t){var e=t.checkedIds;this.sel.checkedIds=this.getIds(e)},OnClickHeadChecker:function(t){var e=t.data,n=t.checkedIds;if(e.length==n.length)t.checkedIds=[];else{var i=this.rebuildIdMap(e);t.checkedIds=this.getIds(i)}},OnFilterChanged:function(t){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.myFilterValue=t,n.next=3,e.Dict.queryData(t);case 3:e.myOptionsData=n.sent,e.evalShownCanList();case 5:case"end":return n.stop()}},n)}))()},GetHeadCheckerIcon:function(t){var e=t.data,n=t.checkedIds;if(e.length>0){if(e.length==n.length)return"fas-check-square";if(n.length>0)return"fas-minus-square"}return"far-square"},canListToSel:function(){if(!_.isEmpty(this.can.checkedIds)){var t=this.assignToList(this.can,this.sel),e=t.src,n=t.tag;this.can=e,this.sel=n}},selListToCan:function(){if(!_.isEmpty(this.sel.checkedIds)){var t=this.assignToList(this.sel,this.can),e=t.src,n=t.tag;this.can=n,this.sel=e}},assignToList:function(t,e){var n=this,i=t.data,a=t.checkedIds,r={};_.forEach(a,function(t){return r[t]=!0});var o=[],s=[];return _.forEach(i,function(t){var e=n.Dict.getValue(t);r[e]?s.push(t):o.push(t)}),_.forEach(e.checkedIds,function(t){return r[t]=!0}),{src:{data:o,checkedIds:[]},tag:{data:_.concat(e.data,s),checkedIds:_.keys(r)}}},genComConf:function(t,e){var n=e.data,i=e.checkedIds;return _.assign({idBy:this.GetValueBy,display:this.display||"text"},t,{data:n,checkedIds:i,multi:!0,checkable:!0,puppetMode:!0,autoCheckCurrent:!1})},evalShownCanList:function(){var t=this,e=[];_.forEach(this.myOptionsData,function(n){var i=t.Dict.getValue(n);t.selIdMap[i]||e.push(n)}),this.can.data=e,this.can.checkedIds=[]},reloadCanList:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.Dict.queryData(t.myFilterValue);case 2:t.myOptionsData=e.sent,t.evalShownCanList();case 4:case"end":return e.stop()}},e)}))()},reloadSelList:function(){var t=arguments,e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=t.length>0&&void 0!==t[0]?t[0]:e.Values,a=[],r=_createForOfIteratorHelper(i),n.prev=3,r.s();case 5:if((o=r.n()).done){n.next=13;break}return s=o.value,n.next=9,e.Dict.getItem(s);case 9:(c=n.sent)?a.push(c):a.push(s);case 11:n.next=5;break;case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(3),r.e(n.t0);case 18:return n.prev=18,r.f(),n.finish(18);case 21:e.sel={data:a,checkedIds:[]};case 22:case"end":return n.stop()}},n,null,[[3,15,18,21]])}))()},rebuildIdMap:function(t){var e=this,n={};return _.forEach(t,function(t){var i=e.Dict.getValue(t);n[i]=!0}),n},rebuildSelIdMap:function(){this.selIdMap=this.rebuildIdMap(this.sel.data)},getIds:function(t){var e=[];return _.forEach(t,function(t,n){t&&e.push(n)}),e}},watch:{value:function(t,e){_.isEqual(t,e)||this.reloadSelList()},options:function(t,e){_.isEqual(t,e)||this.reloadCanList()},"sel.data":function(){this.rebuildSelIdMap();var t=_.keys(this.selIdMap);_.isEqual(t,this.Values)||this.$notify("change",t)}},mounted:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.reloadSelList();case 2:return t.next=4,this.reloadCanList();case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()};Ti.Preload("ti/com/ti/transfer/ti-transfer.mjs",t)}(),Ti.Preload("ti/com/ti/transfer/_com.json",{name:"ti-transfer",globally:!0,template:"./ti-transfer.html",props:"./ti-transfer-props.mjs",mixins:["./ti-transfer.mjs"]}),Ti.Preload("ti/com/ti/tree/ti-tree.html",'<ti-table\n  class="ti-tree"\n  :class="TopClass"\n  id-by="id"\n  icon-by="icon"\n  indent-by="indent"\n  raw-data-by="rawData"\n  :fields="TableFields"\n  :data="myTreeTableData"\n  :changed-id="changedId"\n  :current-id="currentId"\n  :checked-ids="checkedIds"\n  :multi="multi"\n  :checkable="checkable"\n  :selectable="selectable"\n  :cancelable="cancelable"\n  :hoverable="hoverable"\n  :puppet-mode="puppetMode"\n  :width="width"\n  :height="height"\n  :head="TableHead"\n  :border="border"\n  :blank-as="blankAs"\n  :auto-scroll-into-view="autoScrollIntoView"\n  @icon="OnRowIconClick"\n  @open="OnRowOpen"\n  @select="OnRowSelect"\n  @cell:item:change="OnCellItemChange"/>\n  '),function(){var t,e=(t={data:function(){return{myTreeTableData:[],myOpenedNodePaths:{},myCurrentId:null}},props:{nodeClassName:{type:String,default:null},data:{type:[Object,Array],default:null},idBy:{type:[String,Function],default:"id"},nameBy:{type:[String,Function],default:"name"},childrenBy:{type:[String,Function],default:"children"},leafBy:{type:[String,Function],default:"!children"},title:{type:String,default:"i18n:title"},mainWidth:{type:[String,Number],default:"stretch"},display:{type:[String,Object,Array],default:"name"},defaultOpenDepth:{type:Number,default:0},keepOpenBy:{type:String,default:null},keepCurrentBy:{type:String,default:null},changedId:{type:String,default:null},currentId:{type:String,default:null},checkedIds:{type:Array,default:function(){return[]}},openedNodePaths:{type:Object,default:function(){return{}}},multi:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},selectable:{type:Boolean,default:!0},cancelable:{type:Boolean,default:!0},hoverable:{type:Boolean,default:!1},width:{type:[String,Number],default:null},puppetMode:{type:Boolean,default:!1},height:{type:[String,Number],default:null},autoScrollIntoView:{type:Boolean,default:!0},autoOpen:{type:Boolean,default:!1},showRoot:{type:Boolean,default:!0},nodeHandleIcons:{type:Array,default:function(){return["zmdi-chevron-right","zmdi-chevron-down"]}},border:{type:String,default:"column",validator:function(t){return/^(row|column|cell|none)$/.test(t)}},fields:{type:Array,default:function(){return[]}},blankAs:void 0},watch:{},computed:{TopClass:function(){return Ti.Css.mergeClassName({"is-selectable":this.selectable,"is-hoverable":this.hoverable},this.className)},getNodeId:function(){var t=this;return _.isFunction(this.idBy)?function(e){return t.idBy(e)}:function(e){return _.get(e,t.idBy)}},getNodeName:function(){var t=this;return _.isFunction(this.nameBy)?function(e){return t.nameBy(e)}:function(e){return _.get(e,t.nameBy)}},isNodeLeaf:function(){var t=this;if(_.isFunction(this.leafBy))return function(e){return!!t.leafBy(e)};var e=/^(!)?(.+)$/.exec(this.leafBy),n=!!e[1],i=_.trim(e[2]);return function(t){return _.get(t,i)?!n:n}},getNodeChildren:function(){var t=this;return _.isFunction(this.childrenBy)?function(e){return t.childrenBy(e)}:function(e){return _.get(e,t.childrenBy)}},isTable:function(){return _.isArray(this.fields)&&!_.isEmpty(this.fields)},TableHead:function(){return this.isTable?"frozen":"none"},TableFields:function(){var t={title:this.title,width:this.mainWidth,nowrap:!0,display:this.display};return this.isTable?_.concat(t,this.fields):[t]}},methods:{evalTreeTableData:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],!_.isArray(t.data)){e.next=6;break}return e.next=4,t.joinTreeTableRow(n,{},null,t.data);case 4:e.next=9;break;case 6:if(!t.data){e.next=9;break}return e.next=9,t.joinTreeTableRow(n,t.data,null);case 9:t.myTreeTableData=n;case 10:case"end":return e.stop()}},e)}))()},joinTreeTableRow:function(){var t=arguments,e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:[],a=t.length>1&&void 0!==t[1]?t[1]:{},r=t.length>2&&void 0!==t[2]?t[2]:[],o=t.length>3?t[3]:void 0,s={},r?(s.name=e.getNodeName(a),s.path=_.concat(r,s.name),s.pathId=s.path.join("/"),s.id=Ti.Util.fallbackNil(e.getNodeId(a),s.pathId),s.indent=s.path.length,s.leaf=e.isNodeLeaf(a),s.opened=Ti.Util.fallback(e.myOpenedNodePaths[s.pathId],s.indent<e.defaultOpenDepth),s.icon=!!s.leaf||e.nodeHandleIcons[s.opened?1:0]):(s.name=e.getNodeName(a)||"$ROOT$",s.path=[],s.pathId="/",s.id=Ti.Util.fallbackNil(e.getNodeId(a),s.pathId),s.indent=0,s.leaf=!1,s.opened=!e.showRoot||Ti.Util.fallback(e.myOpenedNodePaths[s.pathId],s.indent<e.defaultOpenDepth),s.icon=!!s.leaf||e.nodeHandleIcons[s.opened?1:0]),s.rawData=a,e.showRoot?i.push(s):(s.indent--,s.indent>=0&&i.push(s)),!s.opened||s.leaf){n.next=31;break}if(o){n.next=13;break}return n.next=12,e.getNodeChildren(a);case 12:o=n.sent;case 13:if(!_.isArray(o)){n.next=31;break}c=_createForOfIteratorHelper(o),n.prev=15,c.s();case 17:if((l=c.n()).done){n.next=23;break}return u=l.value,n.next=21,e.joinTreeTableRow(i,u,s.path);case 21:n.next=17;break;case 23:n.next=28;break;case 25:n.prev=25,n.t0=n.catch(15),c.e(n.t0);case 28:return n.prev=28,c.f(),n.finish(28);case 31:case"end":return n.stop()}},n,null,[[15,25,28,31]])}))()},findTableRow:function(t){if(!Ti.Util.isNil(t)){var e,n=_createForOfIteratorHelper(this.myTreeTableData);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.id==t)return i}}catch(t){n.e(t)}finally{n.f()}}},OnCellItemChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.name,n=t.value,i=t.rowId,a=this.findTableRow(i);a&&this.$notify("node:item:change",{name:e,value:n,node:a,nodeId:i,data:a.rawData})},OnRowSelect:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.currentId,a=n.checkedIds,r=void 0===a?{}:a,o=[];if(i){var s,c,l=_createForOfIteratorHelper(this.myTreeTableData);try{for(l.s();!(c=l.n()).done;){var u=c.value;u.id==i&&(s=u,t=u.rawData),r[u.id]&&o.push(u.rawData)}}catch(t){l.e(t)}finally{l.f()}s&&this.autoOpen&&this.openRow(s),this.myCurrentId=_.get(s,"id"),e=s}else this.myCurrentId=null;this.keepCurrentBy&&(this.puppetMode||Ti.Storage.session.set(this.keepCurrentBy,this.myCurrentId)),this.$notify("select",{node:e,current:t,selected:o,currentId:i,checkedIds:r})},OnRowIconClick:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).rowId,e=this.findTableRow(t);!e||e.leaf||e.opened?this.closeRow(e):this.openRow(e)},OnRowOpen:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id,e=this.findTableRow(t);!e||e.leaf||e.opened||this.openRow(e)},openRow:function(t){var e=_.isString(t)?this.findTableRow(t):t;!e||e.leaf||e.opened||(this.$set(this.myOpenedNodePaths,e.pathId,!0),this.$notify("opened",e),this.saveNodeOpenStatus())},isOpened:function(t){var e=_.isString(t)?this.findTableRow(t):t;return!!e&&e.opened},closeRow:function(t){var e=_.isString(t)?this.findTableRow(t):t;e&&!e.leaf&&e.opened&&(this.$set(this.myOpenedNodePaths,e.pathId,!1),this.$notify("closed",e),this.saveNodeOpenStatus())},saveNodeOpenStatus:function(){this.keepOpenBy&&Ti.Storage.session.setObject(this.keepOpenBy,this.myOpenedNodePaths),this.$notify("opened-status:changed",this.myOpenedNodePaths)},syncOpenedNodePaths:function(){this.myOpenedNodePaths=_.assign({},this.openedNodePaths)},__ti_shortcut:function(t){"ARROWLEFT"==t&&this.closeRow(this.myCurrentId),"ARROWRIGHT"==t&&this.openRow(this.myCurrentId)}}},_defineProperty(t,"watch",{data:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(_.isEqual(e,n)){t.next=3;break}return t.next=3,this.evalTreeTableData();case 3:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),openedNodePaths:function(t,e){_.isEqual(t,e)||this.syncOpenedNodePaths()}}),_defineProperty(t,"mounted",function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.syncOpenedNodePaths(),this.keepOpenBy&&(this.myOpenedNodePaths=Ti.Storage.session.getObject(this.keepOpenBy),this.puppetMode||this.$notify("opened-status:changed",this.myOpenedNodePaths)),t.next=4,this.evalTreeTableData();case 4:this.$watch("myOpenedNodePaths",function(){n.evalTreeTableData()},{deep:!0}),this.keepCurrentBy&&(e=Ti.Storage.session.get(this.keepCurrentBy),Ti.Util.isNil(e)||this.$nextTick(function(){n.$children[0].selectRow(e)}));case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()),_defineProperty(t,"beforeDestroy",function(){}),t);Ti.Preload("ti/com/ti/tree/ti-tree.mjs",e)}(),Ti.Preload("ti/com/ti/tree/_com.json",{name:"ti-tree",globally:!0,template:"./ti-tree.html",mixins:["./ti-tree.mjs"],components:["@com:ti/table"]}),Ti.Preload("ti/com/ti/upload/file/ti-upload-file.html",'<div class="ti-upload-file"\n  :class="TopClass">\n  \x3c!--\n    Hidden input file to choose files\n  --\x3e\n  <input \n    type="file" \n    ref="file" \n    class="ti-hide"\n    @change.stop.seft="OnSelectLocalFilesToUpload">\n  \x3c!--\n    Major preview zone\n  --\x3e\n  <div ref="thumb"\n    class="thumb-con"\n    :style="ThumbStyle"\n    @click="OnClickToEdit"\n    v-drop-files.mask="OnDropFiles">\n    \x3c!--\n      Preview\n    --\x3e\n    <ti-obj-thumb \n      :preview="PreviewIcon"\n      :progress="progress"\n      :show-footer="false"/>\n    \x3c!--\n      Remove\n    --\x3e\n    <div ref="actions"\n      v-if="isShowRemoveIcon"\n        class="thumb-actions"\n        :style="ActionsStyle">\n        \x3c!--remove--\x3e\n        <div class="thumb-opt as-del"\n          @click.left.stop="OnRemove">\n          <ti-icon value="zmdi-delete"/>\n          <span class="it-text">{{\'clear\'|i18n}}</span>\n        </div>\n        \x3c!--open--\x3e\n        <div class="thumb-opt as-open"\n          @click.left.stop="OnOpen">\n          <ti-icon value="zmdi-open-in-new"/>\n          <span class="it-text">{{\'open\'|i18n}}</span>\n        </div>\n    </div>\n    \x3c!--//////--\x3e\n  </div>\n</div>'),function(){var t={data:function(){return{myArea:0,myActionsWidth:0}},props:{preview:{type:[String,Object],default:null},uploadFile:{type:File,default:null},progress:{type:Number,default:-1},width:{type:[String,Number],default:120},height:{type:[String,Number],default:120},removable:{type:Boolean,default:!0},areaSize:{type:Object,default:function(){return{xs:1e4,sm:4e4,md:16e4,lg:36e4}}}},computed:{TopClass:function(){return this.getTopClass("is-area-".concat(this.AreaType))},AreaType:function(){var t=this.areaSize,e=this.myArea;return e<=0?"nil":_.inRange(e,0,t.xs+1)?"xs":_.inRange(e,t.xs,t.sm+1)?"sm":_.inRange(e,t.sm,t.md+1)?"md":_.inRange(e,t.md,t.lg+1)?"lg":"xl"},ThumbStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})},ActionsStyle:function(){if(/^(xs|sm)$/.test(this.AreaType))return{right:Ti.Css.toSize(-1*this.myActionsWidth)}},hasPreview:function(){return!!this.preview},isShowRemoveIcon:function(){return!(this.uploadFile||!this.hasPreview)},PreviewIcon:function(){return this.uploadFile?{type:"localFile",value:this.uploadFile}:this.preview?this.preview:"zmdi-plus"}},methods:{OnClickToEdit:function(){this.$refs.file.click()},OnDropFiles:function(t){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:(i=_.get(t,0))&&e.$notify("upload",i);case 2:case"end":return n.stop()}},n)}))()},OnSelectLocalFilesToUpload:function(t){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.OnDropFiles(t.target.files);case 2:e.$refs.file.value="";case 3:case"end":return n.stop()}},n)}))()},OnRemove:function(){this.$notify("remove")},OnOpen:function(){this.$notify("open")},recountArea:function(){var t=Ti.Rects.createBy(this.$refs.thumb);this.myArea=t.width*t.height,this.$refs.actions?this.myActionsWidth=this.$refs.actions.getBoundingClientRect().width:this.myActionsWidth=0}},watch:{preview:function(){var t=this;this.$nextTick(function(){return t.recountArea()})}},mounted:function(){var t=this;this.$nextTick(function(){return t.recountArea()})}};Ti.Preload("ti/com/ti/upload/file/ti-upload-file.mjs",t)}(),Ti.Preload("ti/com/ti/upload/file/_com.json",{name:"ti-upload-file",globally:!0,template:"./ti-upload-file.html",mixins:["./ti-upload-file.mjs"]}),Ti.Preload("ti/com/ti/wall/com/wall-tile/wall-tile.html",'<div class="wall-tile"\n  :class="TopClass"\n  :style="TopStyle">\n  <div v-if="myCom"\n    class="tile-con"\n    @click.left="OnClickRow"\n    @dblclick.left="OnDblClickRow"\n    v-ti-activable>\n    <component   \n      :is="myCom.comType" \n      v-bind="myCom.comConf"/>\n  </div>\n</div>'),function(){var t={inject:["$wall"],data:function(){return{myCom:null}},props:{display:{type:Object,default:null},width:{type:[String,Number],default:null},height:{type:[String,Number],default:null}},computed:{TopClass:function(){return this.getListItemClass()},TopStyle:function(){var t={};return this.width&&(t.width=this.width),this.height&&(t.height=this.height),Ti.Css.toStyle(t)}},methods:{evalMyDisplayCom:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$wall.reportReady(t.index,!Ti.Util.isNil(t.myCom)),e.next=3,t.evalDataForFieldDisplayItem({itemData:t.data,displayItem:t.display,vars:_objectSpread({isCurrent:t.isCurrent,isChecked:t.isChecked,isChanged:t.isChanged,isActived:t.isActived,rowId:t.rowId},t.$vars)});case 3:n=e.sent,i=Ti.Util.pureCloneDeep(t.myCom),a=Ti.Util.pureCloneDeep(n),_.isEqual(i,a)||(t.myCom=n),t.$wall.reportReady(t.index,!0);case 8:case"end":return e.stop()}},e)}))()}},watch:{data:{handler:"evalMyDisplayCom",immediate:!0},isCurrent:"evalMyDisplayCom",isChecked:"evalMyDisplayCom"}};Ti.Preload("ti/com/ti/wall/com/wall-tile/wall-tile.mjs",t)}(),Ti.Preload("ti/com/ti/wall/com/wall-tile/_com.json",{name:"wall-tile",globally:!1,template:"./wall-tile.html",methods:"@com:ti/support/field_display.mjs",mixins:["@com:ti/support/list_item_mixins.mjs","./wall-tile.mjs"]}),Ti.Preload("ti/com/ti/wall/ti-wall.html",'<div class="ti-wall" \n  :class="TopClass"\n  @click="OnClickTop"\n  v-ti-activable>\n  \x3c!--\n    Blank\n  --\x3e\n  <ti-loading \n    v-if="isDataEmpty"\n      class="nil-data"\n      :class="\'as-\'+blankClass"\n      v-bind="blankAs"/>\n  \x3c!--\n    Show tiles\n  --\x3e\n  <template v-else>\n    \x3c!--tiles--\x3e\n    <wall-tile\n      v-for="row in TheData"\n        :key="row.id"\n        :row-id="row.id"\n        :index="row.index"\n        :display="ItemDisplay"\n        :data="row.rawData"\n        :current-id="theCurrentId"\n        :checked-ids="theCheckedIds"\n        :changed-id="changedId"\n        :checkable="checkable"\n        :selectable="selectable"\n        :openable="openable"\n        :class-name="itemClassName"\n        :width="itemWidth"\n        :height="itemHeight"\n        @select="OnRowSelect"\n        @open="OnRowOpen"/>\n    \x3c!--Blank Tile--\x3e\n    <div v-for="bc in BlankCols"\n      class="wall-tile"\n      :style="bc">\n    </div>\n  </template>\n</div>'),function(){var t={provide:function(){return{$wall:this}},data:function(){return{myData:[],myColCount:0,myColWidth:0,isOnlyOneRow:!1,myCellsReport:{},myNeedResize:!0}},props:{itemClassName:void 0,display:{type:[Object,String],default:function(){return{key:"..",comType:"ti-label"}}},border:{type:Boolean,default:!0},spacing:{type:String,default:"sm"},itemWidth:{type:[String,Number],default:null},itemHeight:{type:[String,Number],default:null},resizeDelay:{type:Number,default:0}},computed:{TopClass:function(){return this.getTopClass({"is-hoverable":this.hoverable,"show-border":this.border,"is-only-one-row":this.isOnlyOneRow,"is-multi-rows":!this.isOnlyOneRow},["spacing-".concat(this.spacing)])},ItemDisplay:function(){return this.evalFieldDisplayItem(this.display)},TheData:function(){return this.myData},ListRealCount:function(){return this.TheData.length},BlankCols:function(){var t=[];if(!_.isEmpty(this.TheData)&&this.myColCount>0&&this.myColWidth>1&&!this.isOnlyOneRow){var e=this.ListRealCount%this.myColCount;if(e>0)for(var n=this.myColCount-e,i=0;i<n;i++)t.push({width:"".concat(this.myColWidth,"px")})}return t}},methods:{OnClickTop:function(t){this.cancelable&&Ti.Dom.hasOneClass(t.target,"ti-wall","wall-tile")&&this.cancelRow()},OnWallResize:function(){var t=Ti.Dom.findAll(":scope > .wall-tile",this.$el);if(!_.isEmpty(t)){var e,n=0,i=1,a=-1,r=!0,o=_createForOfIteratorHelper(t);try{for(o.s();!(e=o.n()).done;){var s=e.value.getBoundingClientRect();if(a<0&&(a=s.top),a!=s.top){r=!1;break}n++,i=Math.max(s.width,i)}}catch(t){o.e(t)}finally{o.f()}i>1&&(this.myColCount=n,this.myColWidth=i,this.isOnlyOneRow=r)}},reportReady:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i="R".concat(e);n?delete this.myCellsReport[i]:(this.myCellsReport[i]=!1,this.myNeedResize=!0),n&&_.delay(function(){_.isEmpty(t.myCellsReport)&&t.myNeedResize&&(_.delay(function(){t.OnWallResize()},t.resizeDelay),t.myNeedResize=!1)})}},watch:{data:{handler:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(e,n){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=_.isEqual(e,n)){t.next=5;break}return t.next=4,this.evalData();case 4:this.myData=t.sent;case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),immediate:!0}},mounted:function(){var t=this;Ti.Viewport.watch(this,{resize:_.debounce(function(){return t.OnWallResize()},20)})},destroyed:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/wall/ti-wall.mjs",t)}(),Ti.Preload("ti/com/ti/wall/_com.json",{name:"ti-wall",globally:!0,template:"./ti-wall.html",props:"@com:ti/support/list_props.mjs",methods:"@com:ti/support/field_display.mjs",mixins:["@com:ti/support/list_mixins.mjs","./ti-wall.mjs"],components:["./com/wall-tile","@com:ti/label"]}),Ti.Preload("ti/com/ti/wizard/com/wizard-step/wizard-step.html",'<component \n  class="ti-fill-parent"\n  :is="comType"\n  v-bind="comConf"\n  @change="OnChange"/>'),function(){var t={props:{index:{type:Number,default:-1},stepKey:{type:String,default:null},title:{type:String,default:null},serializer:{type:Function,default:null},comType:{type:String,default:"ti-label"},comConf:{type:Object,default:function(){return{}}}},methods:{OnChange:function(t){_.isFunction(this.serializer)&&(t=this.serializer(t)),this.$emit("data:change",t)}},watch:{title:{handler:function(){this.$notify("change:title",this.title)},immediate:!0}}};Ti.Preload("ti/com/ti/wizard/com/wizard-step/wizard-step.mjs",t)}(),Ti.Preload("ti/com/ti/wizard/com/wizard-step/_com.json",{name:"wizard-step",globally:!0,template:"./wizard-step.html",mixins:["./wizard-step.mjs"]}),Ti.Preload("ti/com/ti/wizard/ti-wizard.html",'<div class="ti-wizard ti-fill-parent"\n  :class="TopClass"><div class="wizard-con">\n  \x3c!--\n    Header Indicators\n  --\x3e\n  <div class="as-head">\n    \x3c!--Title--\x3e\n    <div\n      v-if="TheTitle" \n        class="as-title">{{TheTitle | i18n}}</div>\n    \x3c!--Step indicators--\x3e\n    <ul>\n      <li v-for="(step, index) in StepHeads"\n        :key="step.stepKey"\n        :class="step.className"\n        @click.left="OnClickHeadItem(index, step)">\n        <span class="as-indicator">\n          <span class="as-line at-l"></span>\n          <span class="as-dot">{{index+1}}</span>\n          <span class="as-line at-r"></span>\n        </span>\n        <span class="as-text">{{step.title | i18n}}</span>\n      </li>\n    </ul>\n  </div>\n  \x3c!--\n    Current Step Component\n  --\x3e\n  <div class="as-main">\n    <WizardStep \n      v-bind="CurrentStep"\n      @data:change="OnDataChange"\n      @step:change="OnStepChange"\n      @change:title="OnTitleChange"/>\n  </div>\n  \x3c!--\n    Footer Default Buttons\n  --\x3e\n  <div v-if="BtnPrev || BtnNext"\n    class="as-foot">\n      \x3c!--\n        Btn: Prev\n      --\x3e\n      <div\n        v-if="BtnPrev" \n          class="as-btn is-prev"\n          :class="BtnPrev.className"\n          @click="OnClickBtnPrev">\n          <span v-if="BtnPrev.icon"\n            class="as-icon">\n            <ti-icon :value="BtnPrev.icon"/>\n          </span>\n          <span class="as-sep"></span>\n          <span class="as-text">{{BtnPrev.text|i18n}}</span>\n      </div>\n      \x3c!--Sep--\x3e\n      <div class="as-space"></div>\n      \x3c!--\n        Btn: Next\n      --\x3e\n      <div\n        v-if="BtnNext" \n          class="as-btn is-next"\n          :class="BtnNext.className"\n          @click="OnClickBtnNext">\n          <span v-if="BtnNext.icon"\n            class="as-icon">\n            <ti-icon :value="BtnNext.icon"/>\n          </span>\n          <span class="as-sep"></span>\n          <span class="as-text">{{BtnNext.text|i18n}}</span>\n      </div>\n  </div>\n</div></div>'),function(){var t={data:function(){return{myCurrent:void 0,myTitle:void 0}},props:{title:{type:String,default:void 0},steps:{type:Array,default:function(){return[]}},value:{type:Object,default:function(){return{}}},current:{type:[Number,String],default:0},canClickHeadItem:{type:String,default:null}},computed:{TopClass:function(){return this.getTopClass()},StepList:function(){var t=[];if(_.isArray(this.steps))for(var e=0;e<this.steps.length;e++){var n=this.steps[e],i=n.key||"step".concat(e);t.push({index:e,stepKey:i,title:n.title||i,comType:n.comType||"ti-label",comConf:n.comConf,serializer:n.serializer,prev:n.prev,next:n.next})}return t},StepHeads:function(){var t=[];if(_.isArray(this.steps)){var e,n=_createForOfIteratorHelper(this.StepList);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=[];this.CurrentStepIndex==i.index?a.push("is-current"):i.index>this.CurrentStepIndex?a.push("is-future"):a.push("is-passed"),t.push(_.assign({},i,{className:a}))}}catch(t){n.e(t)}finally{n.f()}}return t},CurrentStepIndex:function(){return this.CurrentStep?this.CurrentStep.index:-1},hasCurrentStep:function(){return!!this.CurrentStep},TheTitle:function(){return this.myTitle||this.title},CurrentStep:function(){var t=Ti.Util.fallback(this.myCurrent,this.current),e=_.cloneDeep(this.getStep(t)),n=e.serializer?Ti.Util.genInvoking(e.serializer,{context:this.value,partialRight:!0}):_.identity,i=Ti.Util.explainObj(this.value,e.comConf);return _.assign({},e,{serializer:n,comConf:i})},BtnPrev:function(){var t=_.get(this.CurrentStep,"prev");return this.getStepAction(t,{icon:"zmdi-chevron-left",text:"i18n:prev",enabled:!0})},BtnNext:function(){var t=_.get(this.CurrentStep,"next");return this.getStepAction(t,{icon:"zmdi-chevron-right",text:"i18n:next",enabled:!0,reverse:!_.get(t,"icon")})}},methods:{OnTitleChange:function(t){this.myTitle=t},OnDataChange:function(t){var e=_.assign({},this.value,t);this.$notify("change",e)},OnStepChange:function(t){"@prev"==t?this.gotoFromCurrent(-1):"@next"==t?this.gotoFromCurrent(1):this.gotoStep(t)},OnClickHeadItem:function(t){"passed"==this.canClickHeadItem&&this.CurrentStepIndex>t&&this.gotoStep(t)},OnClickBtnPrev:function(){if(this.BtnPrev&&this.BtnPrev.enabled)if(this.BtnPrev.handler){Ti.Util.genInvoking(this.BtnPrev.handler,{context:this.value}).apply(this)}else this.gotoFromCurrent(-1)},OnClickBtnNext:function(){if(this.BtnNext&&this.BtnNext.enabled)if(this.BtnNext.handler){Ti.Util.genInvoking(this.BtnNext.handler,{context:this.value}).apply(this)}else this.gotoFromCurrent(1)},getStep:function(t){if(_.isNumber(t)){var e=Ti.Num.scrollIndex(t,this.StepList.length);if(e>=0)return this.StepList[e]}else{var n,i=_createForOfIteratorHelper(this.StepList);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.stepKey==t)return a}}catch(t){i.e(t)}finally{i.f()}}},gotoStep:function(t){var e=this.getStep(t);if(e){var n=_.cloneDeep(this.CurrentStep);this.myCurrent=e.index,this.$notify("step:chanage",{index:e.index,step:e,oldStep:n})}},gotoFromCurrent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.CurrentStep){var e=this.CurrentStep.index+t;this.gotoStep(e)}},getStepAction:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t){var n;return _.isBoolean(t)?n={}:_.isString(t)?n={text:t||dftText}:(n=_.assign({},t),_.isPlainObject(n.enabled)?n.enabled=Ti.Validate.match(this.value,n.enabled):_.isFunction(n.enabled)&&(n.enabled=n.enabled())),_.defaults(n,e),n.className=Ti.Css.mergeClassName(n.className),n.enabled&&(n.className["is-enabled"]=!0),n.reverse&&(n.className["is-reverse"]=!0),n}}}};Ti.Preload("ti/com/ti/wizard/ti-wizard.mjs",t)}(),Ti.Preload("ti/com/ti/wizard/_com.json",{name:"ti-wizard",globally:!0,template:"./ti-wizard.html",mixins:["./ti-wizard.mjs"],components:["./com/wizard-step"]}),Ti.Preload("ti/com/web/auth/passwd/auth-passwd.html",'<div \n  class="web-auth-passwd web-simple-form" \n  :class="TopClass">\n  \x3c!--\n    Head text\n  --\x3e\n  <header>{{ModeTitle|i18n}}</header>\n  \x3c!--\n    Main Area\n  --\x3e\n  <section>\n    \x3c!--\n      ===================================================\n      Mode: byVCode\n    --\x3e\n    <template v-if="isByVode">\n      \x3c!--\n        Input: name\n      --\x3e\n      <div class="as-input">\n        <input \n          spellcheck="false"\n          :placeholder="VCodeNameTip|i18n"\n          v-model="myForm.name"></div>\n      \x3c!--\n        Input: vcode\n      --\x3e\n      <div class="as-input">\n        <input \n          spellcheck="false"\n          :placeholder="VCodeCodeTip|i18n"\n          v-model="myForm.vcode">\n        <span>\n          <em v-if="delay>0">{{\'auth-vcode-delay\'|i18n({sec:delay})}}</em>\n          <a v-else\n            @click="OnGetVcode">{{VCodeGetTip|i18n}}</a>\n        </span>\n      </div>\n    </template>\n    \x3c!--\n      ===================================================\n      Mode: byPasswd\n    --\x3e\n    <template v-else>\n      \x3c!--\n        Passwd: old\n      --\x3e\n      <div class="as-input">\n        <input \n          spellcheck="false"\n          :placeholder="\'auth-reset-passwd-old\'|i18n"\n          v-model="myForm.passwd_old"></div>\n    </template>\n    \x3c!--\n      ===================================================\n    --\x3e\n    \x3c!--\n      Passwd: new\n    --\x3e\n    <div class="as-input" :class="PasswdClass">\n      <input \n        spellcheck="false"\n        :placeholder="\'auth-reset-passwd-new\'|i18n"\n        v-model="myForm.passwd_new"></div>\n    \x3c!--\n      Passwd: repeat\n    --\x3e\n    <div class="as-input" :class="PasswdClass">\n      <input \n        spellcheck="false"\n        :placeholder="\'auth-reset-passwd-ren\'|i18n"\n        v-model="myForm.passwd_ren"></div>\n    \x3c!--\n      Submit button\n    --\x3e\n    <div class="as-btn">\n      <button @click="OnSubmit">{{\'auth-reset-passwd-save\'|i18n}}</button>\n    </div>\n    \x3c!--\n      Sublinks: switch mode / passwd-back\n    --\x3e\n    <div \n      v-if="hasAltModes"\n        class="as-links">\n        <div\n          v-for="it in AltModes"\n            class="as-item">\n            <a @click.left="OnChangeMode(it)">{{it.text|i18n}}</a>\n        </div>\n    </div>\n  </section>\n</div>'),function(){var t={data:function(){return{myForm:{name:null,vcode:null,passwd_old:null,passwd_new:null,passwd_ren:null},myMode:"by-passwd",delay:-1}},props:{mode:{type:String,default:"by-passwd"},allowModes:{type:Object,default:function(){return{"by-passwd":!0,"by-phone":!0,"by-email":!0}}},captcha:{type:String,required:!0,default:null},getDelay:{type:Number,default:60}},computed:{TopClass:function(){return this.getTopClass()},PasswdClass:function(){},isByVode:function(){return"by-passwd"!=this.myMode},ModeTitle:function(){return"i18n:auth-reset-passwd-".concat(this.myMode)},VCodeNameTip:function(){return"i18n:auth-reset-passwd-".concat(this.myMode,"-tip")},VCodeCodeTip:function(){return"by-email"==this.myMode?"i18n:auth-email-vcode":"i18n:auth-phone-vcode"},VCodeGetTip:function(){return"by-email"==this.myMode?"i18n:auth-email-vcode-get":"i18n:auth-phone-vcode-get"},TheAllowModes:function(){return Ti.Util.truthyKeys(this.allowModes)},AltModes:function(){var t,e=[],n=_createForOfIteratorHelper(this.TheAllowModes);try{for(n.s();!(t=n.n()).done;){var i=t.value;i!=this.myMode&&e.push({text:"i18n:auth-reset-passwd-".concat(i),mode:i})}}catch(t){n.e(t)}finally{n.f()}return e},hasAltModes:function(){return!_.isEmpty(this.AltModes)}},methods:{OnChangeMode:function(t){var e=t.mode;this.myMode=e},OnSubmit:function(){},OnGetVcode:function(){},evalCurrentMode:function(t){if(!_.get(this.allowModes,t)){if(_.isEmpty(this.TheAllowModes))throw"mode[".concat(t,"] push me to corner!");return _.first(this.TheAllowModes)}return t},syncCurrentMode:function(){this.myMode=this.evalCurrentMode(this.mode)}},watch:{mode:{handler:"syncCurrentMode",immediate:!0}},mounted:function(){var t=this;this.__H=window.setInterval(function(){t.delay>=0&&t.delay--},1e3)},beforeDestroy:function(){this.__H&&window.clearInterval(this.__H)}};Ti.Preload("ti/com/web/auth/passwd/auth-passwd.mjs",t)}(),Ti.Preload("ti/com/web/auth/passwd/_com.json",{name:"web-auth-passwd",globally:!0,template:"./auth-passwd.html",mixins:["./auth-passwd.mjs"]}),Ti.Preload("ti/com/web/auth/signup/auth-signup.html",'<div \n  class="web-auth-signup web-simple-form" \n  :class="TopClass"\n  v-ti-activable>\n  \x3c!--\n    Top Logo\n  --\x3e\n  <div \n    v-if="logo"\n      class="as-logo">\n      <ti-icon :value="logo"/>\n  </div>\n  \x3c!--\n    Head text\n  --\x3e\n  <header>{{Msgs.title|i18n}}</header>\n  \x3c!--\n    Main Area\n  --\x3e\n  <section>\n    \x3c!--\n      Input: Name\n    --\x3e\n    <div class="as-input" :class="NameClass">\n      <input \n        spellcheck="false"\n        :placeholder="Msgs.nameTip|i18n"\n        v-model="data.name"></div>\n    \x3c!--\n      Input: Password\n    --\x3e\n    <div class="as-input" :class="PasswdClass">\n      <input \n        spellcheck="false"\n        :type="PasswdInputType"\n        :placeholder="Msgs.passwdTip|i18n"\n        v-model="data.passwd">\n      <span v-if="Msgs.codeGet">\n        <em v-if="delay>0">{{\'auth-vcode-delay\'|i18n({sec:delay})}}</em>\n        <a v-else\n          @click="OnGetVcode">{{Msgs.codeGet|i18n}}</a>\n      </span>\n    </div>\n    \x3c!--\n      Submit button\n    --\x3e\n    <div class="as-btn">\n      <button @click="OnAuthSubmit">{{Msgs.btnText|i18n}}</button>\n    </div>\n    \x3c!--\n      Sublinks: switch mode / passwd-back\n    --\x3e\n    <ul \n      v-if="hasToggleMode"\n        class="as-links">\n        <li v-if="Msgs.linkLeft"\n          class="at-left">\n          <a @click="OnChangeMode">{{Msgs.linkLeft   |i18n}}</a></li>\n        <li v-if="Msgs.linkRight"\n          class="at-right">\n          <a>{{Msgs.linkRight |i18n}}</a></li>\n    </ul>\n  </section>\n  \x3c!--\n    Bottom link for oauth2\n  --\x3e\n  <template v-if="hasOAuth2">\n    <div class="as-spacing"></div>\n    <footer>\n      <a\n        v-for="it in OAuth2Items"\n          :href="it.href"\n          :title="it.tip">\n          <ti-icon :value="it.icon"/>\n      </a>\n    </footer>\n  </template>\n</div>'),function(){var t={data:function(){return{data:{name:null,passwd:null},guarding:!1,currentMode:"login_by_passwd",invalidField:null,delay:-1}},props:{mode:{type:String,default:"login_by_passwd"},toggleMode:{type:String,default:"login_by_phone"},captcha:{type:String,required:!0,default:null},scenes:{type:Object,default:function(){return{robot:"robot",bind_phone:"auth",bind_email:"auth",login_by_email:"auth",login_by_phone:"auth",login_by_passwd:"auth"}}},getDelay:{type:Number,default:60},logo:{type:String,default:void 0},oauth2:{type:Array,default:function(){return[]}}},computed:{TopClass:function(){return this.getTopClass()},Msgs:function(){if("login_by_passwd"==this.currentMode)return{title:"i18n:auth-passwd-title",nameTip:"login_by_email"==this.toggleMode?"i18n:auth-passwd-name-email-tip":"i18n:auth-passwd-name-phone-tip",passwdTip:"i18n:auth-passwd-tip",btnText:"i18n:auth-login",linkLeft:"login_by_email"==this.toggleMode?"i18n:auth-go-email":"i18n:auth-go-phone",linkRight:"i18n:auth-passwd-getback",blankName:"i18n:auth-blank-name"};if("login_by_phone"==this.currentMode)return{title:"i18n:auth-phone-title",nameTip:"i18n:auth-phone-tip",passwdTip:"i18n:auth-phone-vcode",codeGet:"i18n:auth-phone-vcode-get",btnText:"i18n:auth-login-or-signup",linkLeft:"i18n:auth-go-passwd",linkRight:"i18n:auth-vcode-lost",blankName:"i18n:auth-blank-phone"};if("login_by_email"==this.currentMode)return{title:"i18n:auth-email-title",nameTip:"i18n:auth-email-tip",passwdTip:"i18n:auth-email-vcode",codeGet:"i18n:auth-email-vcode-get",btnText:"i18n:auth-login-or-signup",linkLeft:"i18n:auth-go-passwd",linkRight:"i18n:auth-vcode-lost",blankName:"i18n:auth-blank-email"};if("bind_phone"==this.currentMode)return{title:"i18n:auth-bind-phone-title",nameTip:"i18n:auth-phone-tip",passwdTip:"i18n:auth-phone-vcode",codeGet:"i18n:auth-phone-vcode-get",btnText:"i18n:auth-bind",linkRight:"i18n:auth-vcode-lost",blankName:"i18n:auth-blank-phone"};if("bind_email"==this.currentMode)return{title:"i18n:auth-bind-email-title",nameTip:"i18n:auth-email-tip",passwdTip:"i18n:auth-email-vcode",codeGet:"i18n:auth-email-vcode-get",btnText:"i18n:auth-bind",linkRight:"i18n:auth-vcode-lost",blankName:"i18n:auth-blank-email"};throw Ti.Err.make("e.com.combo.auth.invalid-mode",this.currentMode)},Params:function(){return _.mapValues(this.data,function(t){return _.trim(t)})},isBlankName:function(){return!this.Params.name},isBlankNameOrPasswd:function(){var t=this.Params,e=t.name,n=t.passwd;return!e||!n},Invalid:function(){return{name:this.isInvalid("name"),passwd:this.isInvalid("passwd")}},NameClass:function(){if(this.guarding&&(this.Invalid.name||!this.Params.name))return"is-invalid"},PasswdClass:function(){if(this.guarding&&(this.Invalid.passwd||!this.Params.passwd))return"is-invalid"},PasswdInputType:function(){return"login_by_passwd"==this.currentMode?"password":"text"},OAuth2Items:function(){return _.cloneDeep(this.oauth2)},hasOAuth2:function(){return!_.isEmpty(this.OAuth2Items)},hasToggleMode:function(){return!_.isEmpty(this.toggleMode)},ToggleModeName:function(){return{login_by_phone:"i18n:auth-ta-phone",login_by_email:"i18n:auth-ta-email",bind_phone:"i18n:auth-ta-phone",bind_email:"i18n:auth-ta-email"}[this.toggleMode]},vCodeTargetName:function(){return{login_by_phone:"i18n:auth-ta-phone",login_by_email:"i18n:auth-ta-email",bind_phone:"i18n:auth-ta-phone",bind_email:"i18n:auth-ta-email"}[this.currentMode]},vCodeTargetBy:function(){return{login_by_phone:"i18n:auth-ta-by-phone",login_by_email:"i18n:auth-ta-by-email",bind_phone:"i18n:auth-ta-by-phone",bind_email:"i18n:auth-ta-by-email"}[this.currentMode]},vCodeScene:function(){return _.get(this.scenes,this.currentMode)||"auth"}},methods:{OnChangeMode:function(){"login_by_passwd"==this.currentMode?this.currentMode=this.toggleMode:this.currentMode="login_by_passwd",Ti.Be.BlinkIt(this.$el)},OnAuthSubmit:function(){var t=this;if(this.guarding=!0,this.isBlankNameOrPasswd)return Ti.Toast.Open("i18n:auth-blank-name-passwd","warn");var e=Ti.Toast.Open({icon:"fas-spinner fa-spin",content:"i18n:auth-doing",position:"center",duration:0,closer:!1});this.$notify("auth:send",{type:this.currentMode,name:this.Params.name,passwd:this.Params.passwd,done:function(){e.close(),t.InvalidField=null},ok:function(){Ti.Toast.Open({type:"success",position:"top",content:"i18n:auth-ok",duration:2e3}),t.$notify("auth:ok")},noexist:function(){t.InvalidField="name"},invalid:function(){t.InvalidField="passwd"},others:function(){t.InvalidField=["name","passwd"]},fail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.errCode;e.data;"e.auth.captcha.invalid"==n?Ti.Toast.Open({type:"warn",position:"top",content:"i18n:e-www-invalid-captcha",vars:{ta:Ti.I18n.text(t.vCodeTargetName)},duration:5e3}):"e.auth.login.NoSaltedPasswd"==n?Ti.Alert("i18n:auth-login-NoSaltedPasswd",{title:"i18n:e-auth-login-NoSaltedPasswd",icon:"zmdi-shield-security",textOk:"i18n:i-known",vars:{ta:Ti.I18n.text(t.ToggleModeName)}}):Ti.Toast.Open({type:"warn",position:"top",content:"i18n:".concat(n),duration:5e3})}})},OnGetVcode:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.guarding=!0,!t.isBlankName){e.next=5;break}return t.InvalidField="name",Ti.Toast.Open(t.Msgs.blankName,"warn"),e.abrupt("return");case 5:return t.guarding=!1,t.InvalidField=null,console.log("captcha",t.captcha),n={scene:t.scenes.robot,account:t.Params.name},i=Ti.S.renderBy(t.captcha,n),e.next=12,Ti.Captcha(i);case 12:if(a=e.sent){e.next=15;break}return e.abrupt("return");case 15:r=Ti.Toast.Open({icon:"fas-spinner fa-spin",content:"i18n:auth-sending-vcode",position:"center",duration:0,closer:!1}),t.$notify("get:vcode",{type:t.currentMode,scene:t.vCodeScene,account:t.data.name,captcha:a,done:function(){r.close(),t.InvalidField=null,t.data.passwd=""},ok:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).duInMin,n=void 0===e?60:e;t.delay=t.getDelay,Ti.Toast.Open({type:"success",position:"top",content:"i18n:auth-sent-ok",vars:{ta:Ti.I18n.text(t.vCodeTargetName),by:Ti.I18n.text(t.vCodeTargetBy),min:n},duration:5e3})},fail:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.errCode;t.data;Ti.Toast.Open({type:"warn",position:"top",content:"i18n:".concat(e),duration:5e3})}});case 17:case"end":return e.stop()}},e)}))()},isInvalid:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return _.isArray(this.InvalidField)?_.indexOf(this.InvalidField,t)>=0:t==this.InvalidField},__ti_shortcut:function(t){var e=this;if("ENTER"==t&&!this.isBlankNameOrPasswd)return this.$nextTick(function(){e.OnAuthSubmit()}),{stop:!0,quit:!0}}},watch:{currentMode:function(){this.guarding=!1,this.data.passwd=""}},mounted:function(){var t=this;this.mode&&(this.currentMode=this.mode),this.__H=window.setInterval(function(){t.delay>=0&&t.delay--},1e3)},beforeDestroy:function(){this.__H&&window.clearInterval(this.__H)}};Ti.Preload("ti/com/web/auth/signup/auth-signup.mjs",t)}(),Ti.Preload("ti/com/web/auth/signup/_com.json",{name:"web-auth-signup",globally:!0,template:"./auth-signup.html",mixins:["./auth-signup.mjs"]}),Ti.Preload("ti/com/web/footer/web-footer.html",'<div class="ti-web-footer">\n  I footer\n</div>'),function(){var t={inheritAttrs:!1,props:{logo:{type:[String,Object],default:"zmdi-chevron-down"},brief:{type:String,default:null},copyright:{type:String,default:null}},computed:{}};Ti.Preload("ti/com/web/footer/web-footer.mjs",t)}(),Ti.Preload("ti/com/web/footer/_com.json",{name:"web-footer",globally:!0,template:"./web-footer.html",mixins:["./web-footer.mjs"]}),Ti.Preload("ti/com/web/media/image/web-media-image.html",'<img\n  :class="TopClass"\n  class="web-media-image"\n  :src="ImgSrc"/>'),function(){var t={props:{base:{type:String,default:void 0},src:{type:String,default:void 0}},computed:{TopClass:function(){return this.getTopClass()},ImgSrc:function(){return Ti.Util.appendPath(this.base,this.src)}}};Ti.Preload("ti/com/web/media/image/web-media-image.mjs",t)}(),Ti.Preload("ti/com/web/media/image/_com.json",{name:"web-media-image",globally:!0,template:"./web-media-image.html",mixins:["./web-media-image.mjs"]}),Ti.Preload("ti/com/web/media/player/web-media-player.html",'<div class="ti-web-image">\n  \n</div>'),function(){var t={inheritAttrs:!1,props:{src:{type:String,default:void 0},value:{type:[String,Number],default:void 0},bgColor:{type:[String,Number],default:"#000000"},items:{type:[Array],default:function(){return[]}}},computed:{TheItems:function(){return _.forEach(this.items,function(t){}),[]}}};Ti.Preload("ti/com/web/media/player/web-media-player.mjs",t)}(),Ti.Preload("ti/com/web/media/player/_com.json",{name:"web-media-player",globally:!0,template:"./web-media-player.html",mixins:["./web-media-player.mjs"]}),Ti.Preload("ti/com/web/meta/article/web-meta-article.html",'<div class="web-meta-article"\n  :class="TopClass">\n  \x3c!--\n    Title\n  --\x3e\n  <h1\n    v-if="title"\n      class="as-title">{{title}}</h1>\n  \x3c!--\n    Information\n  --\x3e\n  <div\n    v-if="hasInfo"\n      class="as-info">\n      \x3c!--author--\x3e\n      <div v-if="author" class="as-author">{{author}}</div>\n      \x3c!--PubDateText--\x3e\n      <div v-if="PubDateText" class="as-pub-date">{{PubDateText}}</div>\n      \x3c!--Watch Count--\x3e\n      <div\n        v-if="watchCount > 0"\n          class="as-watch-count">\n            <i class="zmdi zmdi-eye"></i>\n            <span>{{watchCount}}</span></div>\n      \x3c!--PubDateText--\x3e\n      <div v-if="duration" class="as-duration">{{DurationText}}</div>\n  </div>\n  \x3c!--\n    Tags\n  --\x3e\n  <ul \n  v-if="hasTags"\n    class="as-tags">\n    <li\n      v-for="tag in TheTags">{{tag}}</li></ul>\n  \x3c!--\n    Brief\n  --\x3e\n  <blockquote\n    v-if="brief"\n      class="as-brief">{{brief}}</blockquote>\n  \x3c!--\n    Bottom line\n  --\x3e\n  <hr v-if="bottomLine" class="as-bottom-line">\n</div>'),function(){var t={props:{title:{type:String,default:null},brief:{type:String,default:null},pubDate:{type:[String,Number,Date],default:null},tags:{type:[String,Array],default:null},dateFormat:{type:String,default:"yyyy-MM-dd"},author:{type:String,default:null},duration:{type:[String,Number],default:null},watchCount:{type:Number,default:0},align:{type:String,default:"center",validator:function(t){return/^(left|center|right)$/.test(t)}},bottomLine:{type:Boolean,default:!0}},computed:{TopClass:function(){return this.getTopClass("align-".concat(this.align))},TheTags:function(){return Ti.S.toArray(this.tags)},hasTags:function(){return!_.isEmpty(this.TheTags)},DurationText:function(){return _.isNumber(this.duration)?Ti.I18n.getf("du-in-min",{n:this.duration}):this.duration},PubDateText:function(){if(this.pubDate)return Ti.DateTime.format(this.pubDate,this.dateFormat)},hasInfo:function(){return this.author||this.watchCount>0||this.author||this.duration}}};Ti.Preload("ti/com/web/meta/article/web-meta-article.mjs",t)}(),Ti.Preload("ti/com/web/meta/article/_com.json",{name:"web-meta-article",globally:!0,template:"./web-meta-article.html",mixins:["./web-meta-article.mjs"]}),Ti.Preload("ti/com/web/meta/commodity/web-meta-commodity.html",'<div class="web-meta-commodity"\n  :class="TopClass">\n  <div class="as-main">\n    \x3c!--\n      Left: Preview\n    --\x3e\n    <div\n      v-if="previewImageSrc"\n        class="at-left">\n      <WebMediaImage\n        :src="previewImageSrc"/>\n    </div>\n    \x3c!--\n      Right: Information\n    --\x3e\n    <div class="at-right">\n      \x3c!--Title--\x3e\n      <h1>{{MetaTitle}}</h1>\n      <div class="as-form">\n        <ti-form\n          v-bind="form"\n          :data="FormData"\n          @change="OnFormChanged"/>\n      </div>\n      <div class="as-btns">\n        \x3c!--Buy Button--\x3e\n        <a class="ti-btn" @click="OnClickBuyNow">{{actions.buy|i18n}}</a>\n      </div>\n    </div>\n  </div>\n</div>'),function(){var t={props:{meta:{type:Object,default:function(){return{}}},previewSrc:{type:String,default:null},titleKey:{type:String,default:"title"},buyAmount:{type:Number,default:1},form:{type:Object,default:function(){return{}}},actions:{type:Object,default:function(){return{buy:"i18n:buy-now"}}}},computed:{TopClass:function(){return this.getTopClass()},FormData:function(){return _objectSpread({},this.meta,{buyAmount:this.buyAmount})},previewImageSrc:function(){if(this.previewSrc&&this.meta)return Ti.S.renderBy(this.previewSrc,this.meta)},MetaTitle:function(){return this.titleKey?_.get(this.meta,this.titleKey):"NoTitle"}},methods:{OnClickBuyNow:function(){this.$notify("buy:now")},OnFormChanged:function(t){var e=t.name,n=t.value;this.$notify("meta:changed",{name:e,value:n})}}};Ti.Preload("ti/com/web/meta/commodity/web-meta-commodity.mjs",t)}(),Ti.Preload("ti/com/web/meta/commodity/_com.json",{name:"web-meta-commodity",globally:!0,template:"./web-meta-commodity.html",mixins:["./web-meta-commodity.mjs"],components:["@com:web/meta/preview"]}),Ti.Preload("ti/com/web/meta/order/com/order-item/order-item.html",'<div class="as-row order-item">\n  \x3c!--Thumb/Title--\x3e\n  <div class="as-cell">\n    <div class="as-title">\n      <ti-icon \n        :value="thumbObj" \n        width=".32rem" \n        height=".32rem"/>\n      <span class="as-text">{{title}}</span>\n    </div>\n  </div>\n  \x3c!--price--\x3e\n  <div class="as-cell as-price">\n    <span>{{price}}</span>\n  </div>\n  \x3c!--amount--\x3e\n  <div class="as-cell as-amount">\n    <span>{{amount}}</span>\n  </div>\n  \x3c!--Total--\x3e\n  <div class="as-cell as-fee">\n    <em class="ti-num is-md">{{feeText}}</em>\n  </div>\n</div>'),function(){var t={props:{id:{type:String,default:null},thumb:{type:String,default:null},src:{type:String,default:"/api/thumb?id:${id}"},dftIcon:{type:String,default:"fas-cube"},title:{type:String,default:null},price:{type:Number,default:1},currency:{type:String,default:"RMB"},amount:{type:Number,default:1}},computed:{thumbObj:function(){if(this.thumb){return{type:"image",value:Ti.S.renderBy(this.src,this)}}return this.dftIcon},fee:function(){return Ti.WWW.evalFee(this)},feeText:function(){return Ti.WWW.feeText(this.fee,this.currency)}}};Ti.Preload("ti/com/web/meta/order/com/order-item/order-item.mjs",t)}(),Ti.Preload("ti/com/web/meta/order/com/order-item/_com.json",{name:"order-item",globally:!1,template:"./order-item.html",mixins:["./order-item.mjs"]}),Ti.Preload("ti/com/web/meta/order/web-meta-order.html",'<div class="ti-web-meta-order">\n  \x3c!--\n    Title\n  --\x3e\n  <h1>确认订单信息</h1>\n  \x3c!--\n    Item list\n  --\x3e\n  <div class="as-items">\n    <div class="as-table">\n      <div class="as-head">\n        <ul>\n          <li class="as-title">商品</li>\n          <li class="as-price">单价</li>\n          <li class="as-amount">数量</li>\n          <li class="as-fee">小计</li>\n        </ul>\n      </div>\n      <div class="as-body">\n        <order-item v-for="it in items"\n          :key="it.id"\n          v-bind="it"\n          :src="itemThumbSrc"\n          :currency="currency"/>\n      </div>\n    </div>\n  </div>\n  \x3c!--\n    Summary\n  --\x3e\n  <div class="as-summary">\n    <div class="as-sum-fee">\n      <span>实际支付</span>\n      <em class="ti-num is-xl">{{totalFeeText}}</em>\n    </div>\n    <div class="as-btns">\n      <a class="ti-btn" @click="onSubmit">提交订单</a>\n    </div>\n  </div>\n\n</div>'),function(){var t={props:{items:{type:Array,default:function(){return[]}},itemThumbSrc:{type:String,default:"/api/thumb?id:${id}"},currency:{type:String,default:"RMB"}},computed:{totalFee:function(){var t,e=0,n=_createForOfIteratorHelper(this.items);try{for(n.s();!(t=n.n()).done;){var i=t.value;e+=Ti.WWW.evalFee(i)}}catch(t){n.e(t)}finally{n.f()}return e},totalFeeText:function(){return Ti.WWW.feeText(this.totalFee,this.currency)}},methods:{onSubmit:function(){this.$notify("order:submit",{items:this.items,currency:this.currency})}}};Ti.Preload("ti/com/web/meta/order/web-meta-order.mjs",t)}(),Ti.Preload("ti/com/web/meta/order/_com.json",{name:"web-meta-order",globally:!0,template:"./web-meta-order.html",mixins:["./web-meta-order.mjs"],components:["./com/order-item"]}),Ti.Preload("ti/com/web/meta/preview/web-meta-preview.html",'<div class="ti-web-preview ti-fill-parent">\n  \x3c!--\n    Top: Image\n  --\x3e\n  <div class="as-preview">\n    <ti-icon value="zmdi-image"/>\n  </div>\n  \x3c!--\n    Bottom: List\n  --\x3e\n  \n</div>'),function(){var t={inheritAttrs:!1,props:{logo:{type:[String,Object],default:"zmdi-chevron-down"},brief:{type:String,default:null},copyright:{type:String,default:null}},computed:{}};Ti.Preload("ti/com/web/meta/preview/web-meta-preview.mjs",t)}(),Ti.Preload("ti/com/web/meta/preview/_com.json",{name:"web-meta-preview",globally:!0,template:"./web-meta-preview.html",mixins:["./web-meta-preview.mjs"]}),Ti.Preload("ti/com/web/nav/columns/nav-columns.html",'<nav class="web-nav-columns"\n  :class="TopClass">\n  \x3c!--=======================================--\x3e\n  <div v-for="it in TheItems"\n    class="as-column">\n    <div class="item-self">\n      <a\n        :key="it.index"\n        class="link-item"\n        :class="it.className"\n        :href="it.href"\n        :target="it.target"\n        @click.left="OnClickLink($event, it)">\n        \x3c!--Icon--\x3e\n        <ti-icon\n          v-if="it.icon"\n            :value="it.icon"/>\n        \x3c!--Text--\x3e\n        <span\n          v-if="it.title"\n            class="as-text">{{it.title}}</span>\n        </a>\n      </div>\n      \x3c!--===================================--\x3e\n      \x3c!--SubItems--\x3e\n      <div\n        v-if="it.items"\n          class="sub-items">\n          <div class="items-con">\n            <a\n              v-for="sub in it.items"\n                :key="sub.index"\n                class="sub-item"\n                :class="sub.className"\n                :href="sub.href"\n                :target="sub.target"\n                @click.left="OnClickLink($event, sub)">\n                \x3c!--Icon--\x3e\n                <ti-icon\n                  v-if="sub.icon"\n                    :value="sub.icon"/>\n                \x3c!--Text--\x3e\n                <span\n                  v-if="sub.title"\n                    class="as-text">{{sub.title}}</span>\n            </a>\n          </div>\n      </div>\n      \x3c!--===================================--\x3e\n  </div>\n  \x3c!--=======================================--\x3e\n</nav>'),function(){var t={props:{items:{type:Array,default:function(){return[]}},path:{type:String,default:null},align:{type:String,default:"center",validator:function(t){return/^(left|center|right)$/.test(t)}},spacing:{type:String,validator:function(t){return/^(tiny|comfy|wide)$/.test(t)}},border:{type:String,default:"solid",validator:function(t){return/^(none|solid|dashed|dotted)$/.test(t)}}},computed:{TopClass:function(){var t=this;return this.getTopClass("is-spacing-".concat(this.spacing),"is-align-".concat(this.align),function(){if(t.border)return"is-border-".concat(t.border)})},TheItems:function(){return this.evalItems(this.items)}},methods:{OnClickLink:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.type,i=e.value;/^(page|action)$/.test(n)&&(t.preventDefault(),console.log("onClickLink","nav:to",{type:n,value:i}),this.$notify("nav:to",{type:n,value:i}))},evalItems:function(t){var e=this,n=[];return _.forEach(t,function(t,i){var a=_.pick(t,["icon","title","type","href","target","value"]);a.index=i,e.path&&(a.highlight=t.highlightBy(e.path));var r=!!a.href;a.className={"has-href":r,"nil-href":!r,"is-highlight":a.highlight,"is-normal":!a.highlight},t.items&&(a.items=e.evalItems(t.items)),n.push(a)}),n}}};Ti.Preload("ti/com/web/nav/columns/nav-columns.mjs",t)}(),Ti.Preload("ti/com/web/nav/columns/_com.json",{name:"web-nav-columns",globally:!0,template:"./nav-columns.html",mixins:["./nav-columns.mjs"],components:[]}),Ti.Preload("ti/com/web/nav/links/nav-links.html",'<nav class="web-nav-links"\n  :class="TopClass">\n  \x3c!--=======================================--\x3e\n  <a\n    v-for="it in TheItems"\n      :key="it.index"\n      class="link-item"\n      :class="it.className"\n      :href="it.href"\n      :target="it.target"\n      @click.left="OnClickLink($event, it)"\n      @mouseenter="OnItemMouseEnter(it)"\n      @mouseleave="OnItemMouseLeave(it)">\n      \x3c!--Icon--\x3e\n      <ti-icon\n        v-if="it.icon"\n          :value="it.icon"/>\n      \x3c!--Text--\x3e\n      <span\n        v-if="it.title"\n          class="as-text">{{it.title}}</span>\n      \x3c!--===================================--\x3e\n      \x3c!--SubItems--\x3e\n      <div\n        v-if="mySubItems && mySubIndex == it.index"\n          class="sub-items">\n          <div class="items-con">\n            <a\n              v-for="sub in mySubItems"\n                :key="sub.index"\n                class="sub-item"\n                :class="sub.className"\n                :href="sub.href"\n                :target="sub.target"\n                @click.left="OnClickLink($event, sub)">\n                \x3c!--Icon--\x3e\n                <ti-icon\n                  v-if="sub.icon"\n                    :value="sub.icon"/>\n                \x3c!--Text--\x3e\n                <span\n                  v-if="sub.title"\n                    class="as-text">{{sub.title}}</span>\n            </a>\n          </div>\n      </div>\n      \x3c!--===================================--\x3e\n  </a>\n  \x3c!--=======================================--\x3e\n</nav>'),function(){var t={data:function(){return{mySubIndex:-1,mySubItems:null}},props:{items:{type:Array,default:function(){return[]}},path:{type:String,default:null},align:{type:String,default:"left",validator:function(t){return/^(left|center|right)$/.test(t)}},spacing:{type:String,validator:function(t){return/^(tiny|comfy|wide)$/.test(t)}},border:{type:String,default:"solid",validator:function(t){return/^(none|solid|dashed|dotted)$/.test(t)}}},computed:{TopClass:function(){var t=this;return this.getTopClass("is-spacing-".concat(this.spacing),"is-align-".concat(this.align),function(){if(t.border)return"is-border-".concat(t.border)})},TheItems:function(){return this.evalItems(this.items)}},methods:{OnClickLink:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.type,i=e.value;/^(page|action)$/.test(n)&&(t.preventDefault(),console.log("onClickLink","nav:to",{type:n,value:i}),this.$notify("nav:to",{type:n,value:i}))},OnItemMouseEnter:function(t){var e=this,n=t.index,i=t.items;if(_.isEmpty(i))return this.mySubIndex=-1,void(this.mySubItems=null);this.mySubItems=this.evalItems(i),this.mySubIndex=n,this.$nextTick(function(){return e.dockSub()})},OnItemMouseLeave:function(t){var e=t.index;this.mySubIndex==e&&(this.mySubIndex=-1,this.mySubItems=null)},dockSub:function(){var t=Ti.Dom.find(".sub-items",this.$el);if(t){var e=t.parentNode,n=Ti.Rects.createBy(e),i=Ti.Rects.createBy(t),a=Ti.Css.toStyle({top:n.height,left:(n.width-i.width)/2});Ti.Dom.setStyle(t,a)}},evalItems:function(t){var e=this,n=[];return _.forEach(t,function(t,i){var a=_.pick(t,["icon","title","type","href","target","value","items"]);a.index=i,e.path&&(a.highlight=t.highlightBy(e.path));var r=!!a.href;a.className={"has-href":r,"nil-href":!r,"is-highlight":a.highlight,"is-normal":!a.highlight},n.push(a)}),n}}};Ti.Preload("ti/com/web/nav/links/nav-links.mjs",t)}(),Ti.Preload("ti/com/web/nav/links/_com.json",{name:"web-nav-links",globally:!0,template:"./nav-links.html",mixins:["./nav-links.mjs"],components:[]}),Ti.Preload("ti/com/web/nav/side/com/side-item/side-item.html",'<div class="side-item" \n  :class="TopClass">\n  \x3c!--\n    Self Info\n  --\x3e\n  <div class="it-info" >\n    \x3c!--Icon--\x3e\n    <span\n      v-if="icon"\n        class="it-info-icon">\n        <ti-icon :value="icon"/>\n    </span>\n    \x3c!--Group--\x3e\n    <span\n      v-if="isGroup"\n        class="it-info-text">{{title|i18n}}</span>\n    \x3c!--Item--\x3e\n    <a\n      v-else\n        class="it-info-text"\n        :href="href"\n        @click.stop.prevent="OnClickItemInfo">{{title|i18n}}</a>\n  </div>\n  \x3c!--\n    Sub Container\n  --\x3e\n  <div \n    v-if="hasSubItems"\n      class="it-con">\n      <SideItem\n        v-for="subIt in items"\n          :key="subIt.key"\n          v-bind="subIt"/>\n  </div>\n</div>'),function(){var t={props:{depth:{type:Number,default:0},icon:{type:[String,Object],default:void 0},title:{type:String,default:void 0},page:{type:String,default:void 0},href:{type:String,default:void 0},items:{type:Array,default:void 0}},computed:{TopClass:function(){return{"is-top":this.isTop,"is-sub":!this.isTop,"is-group":this.isGroup,"is-item":!this.isGroup,"is-highlight":this.isHighlight}},isTop:function(){return 0==this.depth},isGroup:function(){return _.isArray(this.items)},isHighlight:function(){return this.id&&this.id==this.highlightId},hasSubItems:function(){return!_.isEmpty(this.items)}},methods:{OnClickItemInfo:function(){this.$notify("nav:to",{value:this.page})}}};Ti.Preload("ti/com/web/nav/side/com/side-item/side-item.mjs",t)}(),Ti.Preload("ti/com/web/nav/side/com/side-item/_com.json",{name:"side-item",template:"./side-item.html",mixins:["./side-item.mjs"]}),Ti.Preload("ti/com/web/nav/side/web-nav-side.html",'<div class="web-nav-side"\n  :class="TopClass"\n  v-ti-activable>\n  <SideItem\n    v-for="it in TheItems"\n      :key="it.key"\n        v-bind="it"/>\n</div>'),function(){var t={props:{base:{type:String,default:void 0},items:{type:Array,default:null}},computed:{TopClass:function(){return this.getTopClass()},TheItems:function(){var t=this,e=[];return _.forEach(this.items,function(n,i){e.push(t.evalItem(n,i,0))}),e}},methods:{evalItem:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=void 0;_.isArray(e.items)&&(a=[],_.forEach(e.items,function(e,n){a.push(t.evalItem(e,n,i+1))}),e.items=a);var r=e.href||e.page;return this.base&&!/^(https?)?\/\/?/.test(r)&&(r=Ti.Util.appendPath(this.base,r)),_objectSpread({},e,{index:n,href:r,depth:i,key:"it-".concat(n)})}}};Ti.Preload("ti/com/web/nav/side/web-nav-side.mjs",t)}(),Ti.Preload("ti/com/web/nav/side/_com.json",{name:"web-nav-side",globally:!0,template:"./web-nav-side.html",mixins:["./web-nav-side.mjs"],components:["./com/side-item"]}),function(){var t={tipIcon:{type:String,default:"fas-clipboard-check"},tipText:{type:String,default:"i18n:pay-checkout-tip"},items:{type:Array,default:function(){return[]}},currency:{type:String,default:"RMB"}};Ti.Preload("ti/com/web/pay/checkout/web-pay-checkout-props.mjs",t)}(),Ti.Preload("ti/com/web/pay/checkout/web-pay-checkout.html",'<div class="web-pay-checkout"\n  :class="TopClass">\n  \x3c!--\n    Blank\n  --\x3e\n  <div \n    v-if="isEmpty"\n      class="as-empty">\n    <ti-loading\n      class="as-big"\n      icon="fas-shopping-basket"\n      text="You should pick something to checkout!"/>\n  </div>\n  \x3c!--\n    List table\n  --\x3e\n  <template v-else>\n    \x3c!--\n      Tip\n    --\x3e\n    <div class="as-tip">\n      <ti-icon :value="tipIcon"/>\n      <span>{{tipText | i18n}}</span>\n    </div>\n    \x3c!--\n      List\n    --\x3e\n    <div class="as-list">\n      \x3c!--循环展示商品--\x3e\n      <table>\n        <thead>\n          <tr>\n            <th><span>{{\'pay-checkout-it-name\'     | i18n}}</span></th>\n            <th>\n              <u>{{CurrencyChar}}</u>\n              <span>{{\'pay-checkout-it-price\'      | i18n}}</span>\n            </th>\n            <th><span>{{\'pay-checkout-it-amount\'   | i18n}}</span></th>\n            <th><span>{{\'pay-checkout-it-subtotal\' | i18n}}</span></th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr\n            v-for="it of TheItems"\n              class="as-item">\n              <td class="it-thumb">\n                <a\n                  v-if="it.thumbSrc" \n                    @click.prevent="OnShowProduct(it)" \n                    :href="it.href">\n                    <img :src="it.thumbSrc"/>\n                </a>\n                <div class="it-title">\n                  <a :href="it.href"\n                    @click.prevent="OnShowProduct(it)">{{it.title}}</a>\n                </div>\n              </td>\n              <td class="it-price">\n                <em>{{CurrencyChar}}{{it.price}}</em>\n              </td>\n              <td class="it-amount">\n                <span>{{it.amount}}</span>\n              </td>\n              <td class="it-subtotal">\n                <em>{{CurrencyChar}}{{it.subtotal}}</em>\n              </td>\n            </tr>\n          </tbody>\n      </table>\n    </div> \x3c!--~as-list--\x3e\n    \x3c!--\n      Summary\n    --\x3e\n    <div class="as-summary">\n      <div class="at-left">\n        \x3c!--Maybe Coupon here--\x3e\n      </div>\n      <div class="at-right">\n        <div class="as-total">\n          <span>Total:</span>\n          <em>{{CurrencyChar}}{{TotalFee}}</em>\n        </div>\n      </div>\n    </div>\n  </template>\n</div>'),function(){var t={computed:{TopClass:function(){return this.getTopClass()},isEmpty:function(){return _.isEmpty(this.items)},CurrencyChar:function(){return Ti.Bank.getCurrencyChar(this.currency)},TheItems:function(){var t=[];return _.forEach(this.items,function(e){t.push(_objectSpread({},e,{subtotal:Ti.Num.precise(e.price*e.amount)}))}),t},TotalFee:function(){var t=0;return _.forEach(this.TheItems,function(e){return t+=e.price*e.amount}),Ti.Num.precise(t)}},methods:{OnShowProduct:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;this.$notify("show:product",t)}}};Ti.Preload("ti/com/web/pay/checkout/web-pay-checkout.mjs",t)}(),Ti.Preload("ti/com/web/pay/checkout/_com.json",{name:"web-pay-checkout",globally:!0,template:"./web-pay-checkout.html",props:"./web-pay-checkout-props.mjs",mixins:["./web-pay-checkout.mjs"]}),function(){var t={options:{type:Array,default:function(){return[{icon:"/gu/rs/ti/icons/png/wxpay256.png",value:"wx.qrcode",text:"i18n:pay-wx"},{icon:"/gu/rs/ti/icons/png/alipay256.png",value:"zfb.qrcode",text:"i18n:pay-zfb"}]}}};Ti.Preload("ti/com/web/pay/choose/web-pay-choose-props.mjs",t)}(),Ti.Preload("ti/com/web/pay/choose/web-pay-choose.html",'<div class="web-pay-choose"\n  :class="TopClass">\n  \x3c!--Title--\x3e\n  <div class="as-title">{{\'pay-step-choose-tip\'|i18n}}</div>\n  \x3c!--Choosing--\x3e\n  <div class="as-options">\n    <div\n      v-for="op in options"\n        class="as-pay-type"\n        :class="getOptionClass(op)"\n        @click.left="OnChooseOption(op)">\n        <ti-icon :value="op.icon"/>\n        <div class="as-text">{{op.text | i18n}}</div>\n    </div>\n  </div>\n  <div class="as-tip">{{PayTypeText}}</div>\n</div>'),function(){var t={props:{value:{type:String,default:null}},computed:{TopClass:function(){return this.getTopClass()},hasPayType:function(){return Ti.Bank.isValidPayType(this.value)},PayTypeText:function(){return Ti.Bank.getPayTypeChooseI18nText(this.value,{text:"pay-step-choose-tip2",nil:"pay-step-choose-nil"})}},methods:{OnChooseOption:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;this.$emit("change",{payType:t})},getOptionClass:function(t){return t.value==this.value?"is-enabled":"is-disabled"}},mounted:function(){this.$notify("change:title","pay-step-choose-title2")}};Ti.Preload("ti/com/web/pay/choose/web-pay-choose.mjs",t)}(),Ti.Preload("ti/com/web/pay/choose/_com.json",{name:"web-pay-choose",globally:!0,template:"./web-pay-choose.html",props:"./web-pay-choose-props.mjs",mixins:["./web-pay-choose.mjs"]}),function(){var t={okIcon:{type:String,default:"im-check-mark-circle"},okText:{type:String,default:"i18n:pay-re-ok"},okLinks:{type:Array,default:function(){return[]}},failIcon:{type:String,default:"im-warning"},failText:{type:String,default:"i18n:pay-re-fail"},failLinks:{type:Array,default:function(){return[]}},doneLinks:{type:Array,default:function(){return[]}}};Ti.Preload("ti/com/web/pay/done/web-pay-done-props.mjs",t)}(),Ti.Preload("ti/com/web/pay/done/web-pay-done.html",'<div class="web-pay-done"\n  :class="TopClass">\n  \x3c!--\n    Icon\n  --\x3e\n  <div class="as-icon"><ti-icon :value="TheIcon"/></div>\n  \x3c!--\n    Text\n  --\x3e\n  <div class="as-text">{{TheText | i18n}}</div>\n  \x3c!--\n    errMsg\n  --\x3e\n  <div\n    v-if="errMsg" \n      class="as-error">{{errMsg | i18n}}</div>\n  \x3c!--\n    Links\n  --\x3e\n  <div\n    v-if="hasLinks"\n      class="as-links">\n      <ul>\n        <li\n          v-for="li in TheLinks">\n          <a\n            class="link-item"\n            :href="li.href"\n            @click.left.prevent="OnClickLink(li)">\n            <ti-icon\n              v-if="li.icon"\n                :value="li.icon"/>\n            <span class="it-text">{{li.text | i18n}}</span>\n          </a>\n        </li>\n      </ul>\n  </div>\n</div>'),function(){var t={props:{payOk:{type:Boolean,default:!1},errMsg:{type:String,default:void 0},orderId:{type:String,default:void 0}},computed:{TopClass:function(){return this.getTopClass({"is-ok":this.payOk,"is-fail":!this.payOk})},TheIcon:function(){return this.payOk?this.okIcon:this.failIcon},TheText:function(){return this.payOk?this.okText:this.failText},TheLinks:function(){var t=this,e=_.cloneDeep(this.payOk?_.concat(this.okLinks,this.doneLinks):_.concat(this.failLinks,this.doneLinks)),n=[];return _.forEach(e,function(e){n.push(_.defaults(Ti.Util.explainObj(t,e),{icon:"zmdi-chevron-right"}))}),n},hasLinks:function(){return!_.isEmpty(this.TheLinks)}},methods:{OnClickLink:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.path,n=t.params;e&&this.$notify("nav:to",{value:e,params:n})}}};Ti.Preload("ti/com/web/pay/done/web-pay-done.mjs",t)}(),Ti.Preload("ti/com/web/pay/done/_com.json",{name:"web-pay-done",globally:!0,template:"./web-pay-done.html",props:"./web-pay-done-props.mjs",mixins:["./web-pay-done.mjs"]}),function(){var t={watchUser:{type:String,default:null},qrcodeSize:{type:[String,Number],default:200},getOrder:{type:Function,default:void 0},createOrder:{type:Function,default:void 0},checkOrder:{type:Function,default:void 0},returnUrl:{type:String,default:void 0}};Ti.Preload("ti/com/web/pay/proceed/web-pay-proceed-props.mjs",t)}(),Ti.Preload("ti/com/web/pay/proceed/web-pay-proceed.html",'<div class="web-pay-proceed">\n  \x3c!--\n    Wait for create order\n  --\x3e\n  <div \n    v-if="!hasOrder"\n      class="as-nil-order">\n      <ti-loading\n        class="as-big"\n        :text="OrderLoadText"/>\n  </div>\n  \x3c!--\n    Show payment\n  --\x3e\n  <template\n    v-else>\n    \x3c!--QRCODE--\x3e\n    <div v-if="isQRCODE"\n      class="as-main is-qrcode">\n      <img \n        :style="QrcodeImageStyle"\n        :src="PaymentDataAsQrcodeUrl">\n    </div>\n    \x3c!--IFRAME--\x3e\n    <div v-else-if="isIFRAME"\n      class="as-main is-iframe">\n      <iframe \n        frameborder="0" \n        scrolling="no"\n        :src="PaymentData"></iframe>\n    </div>\n    \x3c!--\n      JSON\n    --\x3e\n    <div v-else-if="isJSON"\n      class="as-main is-json">\n      \x3c!--The self/approve/update/capture links for PayPal--\x3e\n      <div\n        v-if="\'paypal\' == payType"\n          class="by-paypal">\n        \x3c!--Logo--\x3e\n        <div class="paypal-logo">\n          <a \n            :href="PayPalLinksMap.approve.href"\n            target="_blank"><i class="fab fa-paypal"></i></a>\n        </div>\n        <div class="paypal-tip">{{\'paypal-approve-tip\'|i18n}}</div>\n      </div> \x3c!--End PayPal--\x3e\n    </div>\n    \x3c!--\n      Others\n    --\x3e\n    <div\n      v-else\n        class="as-main">{{myOrder}}</div>\n    \x3c!--\n      Check Button\n    --\x3e\n    <div class="as-check">\n      <div class="ti-btn is-huge"\n        @click.left="OnClickCheckBtn">\n        <ti-icon class="as-icon" :value="CheckBtnIcon"/>\n        <div class="as-text">{{CheckBtnText|i18n}}</div>\n      </div>\n    </div>\n  </template>\n</div>'),function(){var t={data:function(){return{__WS:null,myOrder:null,isChecking:!1}},props:{payType:{type:String,default:null},items:{type:Array,default:function(){return[]}},orderId:{type:String,default:void 0},payOk:{type:Boolean,default:void 0},currency:{type:String,default:"RMB"}},computed:{TopClass:function(){return this.getTopClass({"has-paytype":this.hasPayType,"nil-paytype":!this.hasPayType},"is-".concat(this.PayTypeName))},hasPayType:function(){return Ti.Bank.isValidPayType(this.payType)},PayTypeName:function(){if(_.isString(this.payType))return this.payType.replace(".","-")},PayTypeText:function(){return Ti.Bank.getPayTypeChooseI18nText(this.payType,{text:"pay-step-proceed-tip",nil:"pay-step-proceed-nil"})},OrderLoadText:function(){return this.orderId?"pay-step-proceed-fetch-order":"pay-step-proceed-create-order"},hasOrder:function(){return!_.isEmpty(this.myOrder)},Payment:function(){return _.get(this.myOrder,"pay_re")},PaymentId:function(){return _.get(this.Payment,"payObjId")},PaymentStatus:function(){return _.get(this.Payment,"status")},PaymentData:function(){return _.get(this.Payment,"data")},PaymentDataType:function(){return _.get(this.Payment,"dataType")},isPaymentCreated:function(){return!!_.get(this.Payment,"payObjId")},isQRCODE:function(){return"QRCODE"==this.PaymentDataType},isIFRAME:function(){return"IFRAME"==this.PaymentDataType},isLINK:function(){return"LINK"==this.PaymentDataType},isJSON:function(){return"JSON"==this.PaymentDataType},isTEXT:function(){return"TEXT"==this.PaymentDataType},PaymentDataAsQrcodeUrl:function(){return"/gu/qrcode?d=".concat(this.PaymentData,"&s=").concat(this.qrcodeSize,"&_=").concat(Date.now())},PayPalLinksMap:function(){var t={};return this.hasOrder&&"paypal"==this.myOrder.pay_tp&&_.forEach(this.PaymentData.links,function(e){t[e.rel]=e}),t},QrcodeImageStyle:function(){return Ti.Css.toStyleRem100({width:this.qrcodeSize,height:this.qrcodeSize})},CheckBtnIcon:function(){return this.isChecking?"fas-spinner fa-spin":"zmdi-assignment-check"},CheckBtnText:function(){return this.isChecking?"i18n:pay-proceed-ing":"i18n:pay-proceed-check"}},methods:{OnClickCheckBtn:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!_.isFunction(t.checkOrder)){e.next=6;break}return t.isChecking=!0,e.next=4,t.checkOrder(t.orderId);case 4:t.myOrder=e.sent,t.isChecking=!1;case 6:case"end":return e.stop()}},e)}))()},checkOrCreateOrder:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.hasOrder){e.next=2;break}return e.abrupt("return");case 2:if(!t.orderId){e.next=9;break}if(!_.isFunction(t.getOrder)){e.next=7;break}return e.next=6,t.getOrder(t.orderId,t.payType);case 6:t.myOrder=e.sent;case 7:e.next=16;break;case 9:if(!_.isFunction(t.createOrder)){e.next=16;break}return n=_.map(t.items,function(t){return{id:t.id,amount:t.amount||1,title:t.title,price:t.price}}),e.next=13,t.createOrder({payType:t.payType,items:n});case 13:i=e.sent,t.$emit("change",{orderId:_.get(i,"id")}),t.myOrder=i;case 16:if("paypal"!=t.payType||!t.isPaymentCreated){e.next=25;break}return a=_.get(t.PayPalLinksMap,"approve.href"),r=Ti.Util.parseHref(a),o="".concat(r.protocol,"://").concat(r.host).concat(r.path,"?return="),console.log("🤳",{href:a,link:r,url:o}),s=_.assign({},r.params),t.returnUrl&&(s.returnurl=t.returnurl),e.next=25,Ti.Be.Open(o,{params:s,delay:1e3});case 25:t.watchPaymentChanged();case 26:case"end":return e.stop()}},e)}))()},watchPaymentChanged:function(){var t=this;!this.__WS&&this.watchUser&&this.hasOrder&&this.isPaymentCreated&&(console.log("【🦅】watchPaymentChanged"),this.__WS=Ti.Websocket.listenRemote({watchTo:{method:"watch",user:this.watchUser,match:{id:this.PaymentId}},received:function(e){console.log("【🦅】websocket",e),t.OnClickCheckBtn()},closed:function(){t.unwatchPaymentChanged()}}))},unwatchPaymentChanged:function(){this.__WS&&this.__WS.close()}},watch:{PaymentStatus:function(t){"FAIL"==t?(this.$emit("change",{payOk:!1,errMsg:JSON.stringify(this.PaymentData)}),this.$notify("step:change","@next")):"OK"==t&&(this.$emit("change",{payOk:!0}),this.$notify("step:change","@next"))}},mounted:function(){var t=this;this.$notify("change:title",this.PayTypeText),this.$nextTick(function(){t.checkOrCreateOrder()})},beforeDestroy:function(){this.unwatchPaymentChanged()}};Ti.Preload("ti/com/web/pay/proceed/web-pay-proceed.mjs",t)}(),Ti.Preload("ti/com/web/pay/proceed/_com.json",{name:"web-pay-proceed",globally:!0,template:"./web-pay-proceed.html",props:"./web-pay-proceed-props.mjs",mixins:["./web-pay-proceed.mjs"]}),Ti.Preload("ti/com/web/pay/web-pay.html",'<div class="web-pay">\n  <ti-wizard\n    :current="0"\n    :title="title"\n    :steps="PaySteps"\n    :value="myPayment"\n    can-click-head-item="passed"\n    @change="OnChange"/>\n</div>'),function(){var t={data:function(){return{myPayment:{payType:null,orderId:void 0,payOk:void 0,errMsg:null}}},props:{title:{type:String,default:"i18n:pay-title"},payType:{type:String,default:null},payTypeOptions:{type:Array,default:void 0}},computed:{PaySteps:function(){var t=this;return[{title:"i18n:pay-step-checkout-title",next:{enabled:function(){return!_.isEmpty(t.items)}},comType:"WebPayCheckout",comConf:{tipIcon:this.tipIcon,tipText:this.tipText,items:this.items,currency:this.currency}},{title:"i18n:pay-step-choose-title",prev:!0,next:{enabled:{payType:"notBlank"}},comType:"WebPayChoose",comConf:{options:this.options,value:"=payType"}},{title:"i18n:pay-step-proceed-title",prev:!0,next:{enabled:{payOk:"isBoolean",orderId:"notBlank"}},comType:"WebPayProceed",comConf:{items:this.items,currency:this.currency,payType:"=payType",orderId:"=orderId",payOk:"=payOk",watchUser:this.watchUser,qrcodeSize:this.qrcodeSize,getOrder:this.getOrder,createOrder:this.createOrder,checkOrder:this.checkOrder,returnUrl:this.returnUrl}},{title:"pay-step-done-title",comType:"WebPayDone",comConf:{payOk:"=payOk",errMsg:"=errMsg",orderId:"=orderId",okIcon:this.okIcon,okText:this.okText,okLinks:this.okLinks,failIcon:this.failIcon,failText:this.failText,failLinks:this.failLinks,doneLinks:this.doneLinks}}]}},methods:{OnChange:function(t){_.assign(this.myPayment,t)}},watch:{payType:{handler:function(){this.myPayment.payType=this.payType},immediate:!0}}};Ti.Preload("ti/com/web/pay/web-pay.mjs",t)}(),Ti.Preload("ti/com/web/pay/_com.json",{name:"web-pay",globally:!0,template:"./web-pay.html",props:["@com:web/pay/checkout/web-pay-checkout-props.mjs","@com:web/pay/choose/web-pay-choose-props.mjs","@com:web/pay/proceed/web-pay-proceed-props.mjs","@com:web/pay/done/web-pay-done-props.mjs"],mixins:["./web-pay.mjs"],components:["@com:ti/wizard","@com:web/pay/checkout","@com:web/pay/choose","@com:web/pay/proceed","@com:web/pay/done"]}),Ti.Preload("ti/com/web/shelf/free/web-shelf-free.html",'<div class="web-shelf-free"\n  :class="TopClass"\n  :style="TopStyle">\n  \x3c!--=============================--\x3e\n  <div class="free-main"\n    :style="MainStyle">\n    <div \n      v-for="it in TheItems"\n        :key="it.key"\n        class="free-item"\n        :class="it.className"\n        :style="it.style">\n      <component\n        :is="it.comType"\n        v-bind="it.comConf"/>\n    </div>\n  </div>\n  \x3c!--=============================--\x3e\n</div>'),function(){var t={props:{base:{type:String,default:void 0},items:{type:Array,default:function(){return[]}},background:{type:String,default:null},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},mainBackground:{type:String,default:null},mainWidth:{type:[String,Number],default:void 0},mainHeight:{type:[String,Number],default:void 0}},computed:{TopClass:function(){return this.getTopClass()},TopStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height,backgroundImage:this.getCssBackgroundUrl(this.background)})},MainStyle:function(){return Ti.Css.toStyle({width:this.mainWidth,height:this.mainHeight,backgroundImage:this.getCssBackgroundUrl(this.mainBackground)})},TheItems:function(){if(!_.isArray(this.items))return[];var t=[];return _.forEach(this.items,function(e,n){var i=["at-".concat(e.position||"free"),"i-".concat(n)];e.className&&i.push(e.className);var a=Ti.Css.toStyle(e.style);t.push({key:"It-".concat(n),index:n,className:Ti.Css.mergeClassName(i),style:a,comType:e.comType||"WebTextRaw",comConf:e.comConf})}),t}},methods:{getCssBackgroundUrl:function(t){return Ti.Css.toBackgroundUrl(t,this.base)}}};Ti.Preload("ti/com/web/shelf/free/web-shelf-free.mjs",t)}(),Ti.Preload("ti/com/web/shelf/free/_com.json",{name:"web-shelf-free",globally:!0,template:"./web-shelf-free.html",mixins:["./web-shelf-free.mjs"]}),Ti.Preload("ti/com/web/shelf/scroller/web-shelf-scroller.html",'<div class="web-shelf-scroller"\n  :class="TopClass">\n  \x3c!--=======================================--\x3e\n  <div class="scroll-btn at-left" :class="BtnLeftClass">\n    <span @click.left="OnScrollLeft"><ti-icon :value="iconLeft"/></span>\n  </div>\n  \x3c!--=======================================--\x3e\n  <div class="scroller-outer" ref="outer">\n    \x3c!--=====================================--\x3e\n    <div class="scroller-inner" ref="inner"\n      :style="InnerStyle">\n      \x3c!--===================================--\x3e\n      <div\n        v-for="it in ItemList"\n          class="scroller-tile"\n          :key="it.key"\n          :style="ItemStyle">\n          <component\n            :is="it.comType"\n            v-bind="it.comConf"/>\n      </div>\n      \x3c!--===================================--\x3e\n    </div>\n    \x3c!--=====================================--\x3e\n  </div>\n  \x3c!--=======================================--\x3e\n  <div class="scroll-btn at-right" :class="BtnRightClass">\n    <span @click.left="OnScrollRight"><ti-icon :value="iconRight"/></span>\n  </div>\n  \x3c!--=======================================--\x3e\n</div>'),function(){var t={data:function(){return{myScrollLeft:0,myMaxScroll:0,myScrollWidth:0}},props:{data:{type:Array,default:function(){return[]}},cols:{type:Number,default:4,validator:function(t){return t>0}},comType:{type:String,default:"ti-label"},comConf:{type:Object,default:function(){return{value:"=.."}}},iconLeft:{type:String,default:"zmdi-chevron-left"},iconRight:{type:String,default:"zmdi-chevron-right"}},computed:{TopClass:function(){return this.getTopClass()},InnerStyle:function(){return{left:Ti.Css.toSize(this.myScrollLeft)}},ItemStyle:function(){return{width:Ti.Types.toPercent(1/this.cols)}},isLeftEnabled:function(){return this.myScrollLeft<0},isRightEnabled:function(){return this.myScrollLeft+this.myMaxScroll>this.myScrollWidth},BtnLeftClass:function(){return{"is-enabled":this.isLeftEnabled,"is-disabled":!this.isLeftEnabled}},BtnRightClass:function(){return{"is-enabled":this.isRightEnabled,"is-disabled":!this.isRightEnabled}},ItemList:function(){if(!_.isArray(this.data))return[];for(var t=[],e=0;e<this.data.length;e++){var n=this.data[e],i=_.assign({},this.comConf,{value:n});t.push({key:"It-".concat(e),comType:this.comType,comConf:i})}return t}},methods:{OnScrollLeft:function(){if(this.isLeftEnabled){var t=Math.abs(this.myScrollLeft);t=Math.min(this.myScrollWidth,t),this.myScrollLeft+=t}},OnScrollRight:function(){if(this.isRightEnabled){var t=this.myMaxScroll+this.myScrollLeft-this.myScrollWidth,e=Math.min(this.myScrollWidth,t);this.myScrollLeft-=e}},evalScrolling:function(){this.myMaxScroll=this.$refs.inner.scrollWidth,this.myScrollWidth=this.$refs.inner.getBoundingClientRect().width,this.myScrollLeft=0}},watch:{data:{handler:function(){var t=this;this.$nextTick(function(){t.evalScrolling()})},immediate:!0}}};Ti.Preload("ti/com/web/shelf/scroller/web-shelf-scroller.mjs",t)}(),Ti.Preload("ti/com/web/shelf/scroller/_com.json",{name:"web-shelf-scroller",globally:!0,template:"./web-shelf-scroller.html",mixins:["./web-shelf-scroller.mjs"]}),Ti.Preload("ti/com/web/shelf/wall/web-shelf-wall.html",'<div class="web-shelf-wall"\n  :class="TopClass">\n  \x3c!--\n    Each rows\n  --\x3e\n  <div v-for="wr in WallList"\n    class="wall-group"\n    :key="wr.key">\n    \x3c!--\n      ===========================================\n      Items in row\n    --\x3e\n    <template v-for="it in wr.items">\n      \x3c!--\n        Blank\n      --\x3e\n      <div\n        v-if="it.blank"\n          class="wall-tile is-blank"\n          :style="ItemStyle"></div>\n      \x3c!--\n        Normal Item\n      --\x3e\n      <div\n        v-else\n          class="wall-tile is-com"\n          :style="ItemStyle">\n          <component\n            :is="it.comType"\n            v-bind="it.comConf"/>\n      </div>\n    </template> \x3c!-- End item--\x3e\n  </div> \x3c!--End Row--\x3e\n</div>'),function(){var t={props:{data:{type:Array,default:function(){return[]}},cols:{type:Number,default:4,validator:function(t){return t>0&&parseInt(t)==t}},comType:{type:String,default:"ti-label"},comConf:{type:Object,default:function(){return{value:"=.."}}}},computed:{TopClass:function(){return this.getTopClass()},ItemStyle:function(){return{width:Ti.Types.toPercent(1/this.cols)}},WallList:function(){if(!_.isArray(this.data))return[];for(var t=[],e=[],n=1,i=0;i<this.data.length;i++){var a=this.data[i],r=_.assign({},this.comConf,{value:a});e.push({key:"It-".concat(i),comType:this.comType,comConf:r}),n>=this.cols?(n=1,t.push({key:"Row-".concat(t.length),items:e}),e=[]):n++}if(!_.isEmpty(e)){for(var o=e.length;o<this.cols;o++)e.push({key:"It-".concat(o),blank:!0});t.push({key:"Row-".concat(t.length),items:e})}return t}},methods:{}};Ti.Preload("ti/com/web/shelf/wall/web-shelf-wall.mjs",t)}(),Ti.Preload("ti/com/web/shelf/wall/_com.json",{name:"web-shelf-wall",globally:!0,template:"./web-shelf-wall.html",mixins:["./web-shelf-wall.mjs"]}),Ti.Preload("ti/com/web/text/heading/web-text-heading.html",'<div class="web-text-heading">\n  \x3c!--Icon--\x3e\n  <div\n    v-if="icon"\n      class="as-icon"><ti-icon :value="icon"/></div>\n  \x3c!--Title--\x3e\n  <div\n    v-if="title"\n      class="as-title"\n      @click.left="OnClickTitle"><span>{{title|i18n}}</span></div>\n  \x3c!--Comments--\x3e\n  <div\n    v-if="comment"\n      class="as-comment"><span>{{comment|i18n}}</span></div>\n  \x3c!--View more--\x3e\n  <div\n    v-if="more"\n      class="as-more"\n      @click.left="OnClickMore"><span>{{more|i18n}}</span></div>\n</div>'),function(){var t={props:{icon:{type:String,default:null},title:{type:String,default:null},comment:{type:String,default:null},more:{type:String,default:null},value:null},methods:{OnClickTitle:function(){this.$notify("fire",this.value)},OnClickMore:function(){this.$notify("more",this.value)}}};Ti.Preload("ti/com/web/text/heading/web-text-heading.mjs",t)}(),Ti.Preload("ti/com/web/text/heading/_com.json",{name:"web-text-heading",globally:!0,template:"./web-text-heading.html",mixins:["./web-text-heading.mjs"]}),Ti.Preload("ti/com/web/text/raw/web-text-raw.html",'<div class="web-text-raw" :class="TopClass"><span>{{TheValue}}</span></div>\n<div class="web-text-raw" :class="TopClass"><span>{{TheValue}}</span></div>'),function(){var t={props:{value:{type:[String,Number],default:"Web Text"}},computed:{TopClass:function(){return this.getTopClass()},TheValue:function(){return this.value}}};Ti.Preload("ti/com/web/text/raw/web-text-raw.mjs",t)}(),Ti.Preload("ti/com/web/text/raw/_com.json",{name:"web-text-raw",globally:!0,template:"./web-text-raw.html",mixins:["./web-text-raw.mjs"]}),Ti.Preload("ti/com/web/widget/sharebar/widget-sharebar.html",'<div class="web-widget-sharebar"\n  :class="TopClass">\n  \x3c!--\n    Title\n  --\x3e\n  <div\n    v-if="title"\n      class="as-title">{{title|i18n}}</div>\n  \x3c!--\n    Items\n  --\x3e\n  <div class="as-items">\n    <a\n      v-for="it in TheItems"\n        class="bar-item">\n      <i :class="it.iconClass"></i>\n    </a>\n  </div>\n</div>'),function(){var t={props:{title:{type:String,default:null},items:{type:Array,default:function(){return[]}}},computed:{TopClass:function(){return this.getTopClass()},TheItems:function(){return this.evalItems(this.items)}},methods:{evalItems:function(t){var e=[];return _.forEach(t,function(t,n){var i={facebook:{iconClass:"fab fa-facebook-f"},twitter:{iconClass:"fab fa-twitter"},instagram:{iconClass:"fab fa-instagram"},tumblr:{iconClass:"fab fa-tumblr"}}[t];i&&e.push(i)}),e}}};Ti.Preload("ti/com/web/widget/sharebar/widget-sharebar.mjs",t)}(),Ti.Preload("ti/com/web/widget/sharebar/_com.json",{name:"web-widget-sharebar",globally:!0,template:"./widget-sharebar.html",mixins:["./widget-sharebar.mjs"],components:[]}),Ti.Preload("ti/com/web/widget/summary/widget-summary.html",'<div class="web-widget-summary"\n  :class="TopClass">\n  \x3c!--\n    Title\n  --\x3e\n  <div\n    v-if="title"\n      class="as-title">{{title|i18n}}</div>\n  \x3c!--\n    Items\n  --\x3e\n  <div class="as-list">\n    <div\n      v-for="it in TheItems"\n        class="as-item">\n      \x3c!--Icon--\x3e\n      <ti-icon\n        v-if="it.icon"\n          :value="it.icon"/>\n      \x3c!--Value--\x3e\n      <div class="as-value">{{it.value}}</div>\n      \x3c!--Text--\x3e\n      <div\n        v-if="it.text"\n          class="as-text">{{it.text|i18n}}</div>\n    </div>\n  </div>\n</div>'),function(){var t={props:{title:{type:String,default:void 0},items:{type:Array,default:function(){return[]}}},computed:{TopClass:function(){return this.getTopClass()},TheItems:function(){var t=[];return _.forEach(this.items,function(e,n){t.push({key:"it-".concat(n),index:n,icon:e.icon,text:e.text,value:e.value||0})}),t}}};Ti.Preload("ti/com/web/widget/summary/widget-summary.mjs",t)}(),Ti.Preload("ti/com/web/widget/summary/_com.json",{name:"web-widget-summary",globally:!0,template:"./widget-summary.html",mixins:["./widget-summary.mjs"],components:[]}),Ti.Preload("ti/com/web/widget/user/widget-user.html",'<div class="web-widget-user"\n  :class="TopClass">\n  \x3c!--\n    Avatar\n  --\x3e\n  <div class="as-avatar">\n    <ti-icon :value="TheAvatar"/>\n  </div>\n  \x3c!--\n    Nickname\n  --\x3e\n  <div class="as-title">\n    <div class="as-nickname">{{TheNickname}}</div>\n  </div>\n  \x3c!--\n    Action bar\n  --\x3e\n  <div class="as-actions">\n    <div class="ti-btn reset-passwd">{{\'passwd-reset\'|i18n}}</div>\n    <div class="ti-btn edit-profile">{{\'profile-edit\'|i18n}}</div>\n  </div>\n</div>'),function(){var t={props:{me:{type:Object,default:function(){return{}}},avatarSrc:{type:String,default:void 0},avatarIcons:{type:Object,default:function(){return{unknown:"far-user",male:"im-user-male",female:"im-user-female"}}}},computed:{TopClass:function(){return this.getTopClass()},TheAvatar:function(){var t=this.me||{};return this.avatarSrc&&t.thumb?{type:"image",value:Ti.S.renderVars(t.thumb,this.avatarSrc)}:1==t.sex?this.avatarIcons.male:2==t.sex?this.avatarIcons.female:this.avatarIcons.unknown||"far-user"},TheNickname:function(){var t=this.me||{};return t.nickname||t.email||t.phone||t.nm||t.id||"Anonymity"}},methods:{}};Ti.Preload("ti/com/web/widget/user/widget-user.mjs",t)}(),Ti.Preload("ti/com/web/widget/user/_com.json",{name:"web-widget-user",globally:!0,template:"./widget-user.html",mixins:["./widget-user.mjs"],components:[]}),function(){var t={doCreate:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn.Sys.exec("ti creation -cqn id:".concat(t.meta.id),{as:"json"});case 2:return n=e.sent,i=n.types,a=n.freeCreate,e.next=7,Ti.App.Open({title:"i18n:create",type:"success",position:"top",width:640,height:"61.8%",comType:"ti-obj-creation",comConf:{types:i,freeCreate:a},components:["@com:ti/obj/creation"]});case 7:if(r=e.sent,console.log(r),!r||!r.name){e.next=31;break}if(!(r.name.search(/[%;:"'*?`\t^<>\/\\]/)>=0)){e.next=14;break}return e.next=13,Ti.Alert("i18n:wn-create-invalid");case 13:return e.abrupt("return",e.sent);case 14:if(!(r.length>256)){e.next=18;break}return e.next=17,Ti.Alert("i18n:wn-create-too-long");case 17:return e.abrupt("return",e.sent);case 18:return o=JSON.stringify({nm:r.name,tp:"folder"==r.type?"":r.type,race:r.race}),e.next=21,Wn.Sys.exec2("obj id:".concat(t.meta.id," -cqno -new '").concat(o,"'"),{as:"json"});case 21:if(!((s=e.sent)instanceof Error)){e.next=26;break}Ti.Toast.Open("i18n:wn-create-fail","error"),e.next=31;break;case 26:return Ti.Toast.Open("i18n:wn-create-ok","success"),e.next=29,t._run("reload");case 29:t.myCheckedIds=[s.id],t.myCurrentId=s.id;case 31:case"end":return e.stop()}},e)}))()},doRename:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getCurrentItem()){e.next=5;break}return e.next=4,Ti.Toast.Open("i18n:wn-rename-none","warn");case 4:return e.abrupt("return",e.sent);case 5:return t.setItemStatus(n.id,"renaming"),e.prev=6,e.next=9,Ti.Prompt({text:"i18n:wn-rename",vars:{name:n.nm}},{title:"i18n:rename",placeholder:n.nm,value:n.nm});case 9:if(!(i=e.sent)){e.next=32;break}if(!(i.search(/[%;:"'*?`\t^<>\/\\]/)>=0)){e.next=15;break}return e.next=14,Ti.Alert("i18n:wn-rename-invalid");case 14:return e.abrupt("return",e.sent);case 15:if(!(i.length>256)){e.next=19;break}return e.next=18,Ti.Alert("i18n:wn-rename-too-long");case 18:return e.abrupt("return",e.sent);case 19:if(a=Ti.Util.getSuffix(n.nm),r=Ti.Util.getSuffix(i),!a||a==r){e.next=26;break}return e.next=24,Ti.Confirm("i18n:wn-rename-suffix-changed");case 24:(o=e.sent)&&(i+=a);case 26:return t.setItemStatus(n.id,"loading"),e.next=29,Wn.Sys.exec2("obj id:".concat(n.id," -cqno -u 'nm:\"").concat(i,"\"'"),{as:"json"});case 29:(s=e.sent)instanceof Error?Ti.Toast.Open("i18n:wn-rename-fail","error"):(Ti.Toast.Open("i18n:wn-rename-ok","success"),t.setItem(s)),t.setItemStatus({id:n.id,status:{loading:!1}});case 32:return e.prev=32,t.setItemStatus(n.id,null),e.finish(32);case 35:case"end":return e.stop()}},e,null,[[6,,32,35]])}))()},doDelete:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o,s,c,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getCheckedItems(),!_.isEmpty(n)){e.next=5;break}return e.next=4,Ti.Toast.Open("i18n:wn-del-none","warn");case 4:return e.abrupt("return",e.sent);case 5:i=0,a={},e.prev=7,r=_createForOfIteratorHelper(n),e.prev=9,r.s();case 11:if((o=r.n()).done){e.next=39;break}if((s=o.value)&&s.id&&s.nm){e.next=15;break}return e.abrupt("continue",37);case 15:if(!s.__is||!s.__is.loading&&!s.__is.removed){e.next=17;break}return e.abrupt("continue",37);case 17:if(!a[s.id]){e.next=19;break}return e.abrupt("continue",37);case 19:if(t.setItemStatus(s.id,"loading"),"DIR"!=s.race){e.next=31;break}return e.next=23,Wn.Sys.exec("count -A id:".concat(s.id));case 23:if(c=e.sent,!((c=parseInt(c))>0)){e.next=31;break}return e.next=28,Ti.Confirm({text:"i18n:wn-del-no-empty-folder",vars:{nm:s.nm}});case 28:if(e.sent){e.next=31;break}return t.setItemStatus(s.id,null),e.abrupt("continue",37);case 31:return e.next=33,Wn.Sys.exec("rm ".concat("DIR"==s.race?"-r":""," id:").concat(s.id));case 33:t.setItemStatus(s.id,"removed"),(l=/^id:(.+)$/.exec(s.videoc_dir))&&(u=l[1],a[u]=!0,t.setItemStatus(u,"removed")),i++;case 37:e.next=11;break;case 39:e.next=44;break;case 41:e.prev=41,e.t0=e.catch(9),r.e(e.t0);case 44:return e.prev=44,r.f(),e.finish(44);case 47:return e.next=49,t._run("reload");case 49:return e.prev=49,Ti.Toast.Open("i18n:wn-del-ok",{N:i},"success"),e.finish(49);case 52:case"end":return e.stop()}},e,null,[[7,,49,52],[9,41,44,47]])}))()},doUpload:function(){var t=arguments,e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:[],!_.isFunction(e.beforeUpload)){n.next=4;break}return n.next=4,e.beforeUpload();case 4:a=_.map(i,function(t,e){return{id:"U".concat(e,"_").concat(Ti.Random.str(6)),file:t,total:t.size,current:0}}),e.myUploadigFiles=a,r={},o=_createForOfIteratorHelper(a),n.prev=8,c=regeneratorRuntime.mark(function t(){var n,i,a,o,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.value,i=n.file,t.next=4,Wn.Io.uploadFile(i,{target:"id:".concat(e.meta.id),progress:function(t){n.current=t.loaded}});case 4:a=t.sent,o=a.ok,c=a.data,o&&(r[c.id]=!0);case 8:case"end":return t.stop()}},t)}),o.s();case 11:if((s=o.n()).done){n.next=15;break}return n.delegateYield(c(),"t0",13);case 13:n.next=11;break;case 15:n.next=20;break;case 17:n.prev=17,n.t1=n.catch(8),o.e(n.t1);case 20:return n.prev=20,o.f(),n.finish(20);case 23:return _.delay(function(){e.myUploadigFiles=[]},1e3),Ti.Toast.Open("i18n:upload-done","success"),n.next=27,e._run("reload");case 27:e.myCheckedIds=r,e.myCurrentId=null;case 29:case"end":return n.stop()}},n,null,[[8,17,20,23]])}))()},doDownload:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getCheckedItems(),!_.isEmpty(n)){e.next=5;break}return e.next=4,Ti.Toast.Open("i18n:wn-download-none","warn");case 4:return e.abrupt("return",e.sent);case 5:if(!(n.length>5)){e.next=10;break}return e.next=8,Ti.Confirm({text:"i18n:wn-download-too-many",vars:{N:n.length}});case 8:if(e.sent){e.next=10;break}return e.abrupt("return");case 10:i=_createForOfIteratorHelper(n),e.prev=11,i.s();case 13:if((a=i.n()).done){e.next=25;break}if("FILE"==(r=a.value).race){e.next=21;break}return e.next=18,Ti.Confirm({text:"i18n:wn-download-dir",vars:r},{textYes:"i18n:continue",textNo:"i18n:terminate"});case 18:if(e.sent){e.next=20;break}return e.abrupt("return");case 20:return e.abrupt("continue",23);case 21:o=Wn.Util.getDownloadLink(r),Ti.Be.OpenLink(o);case 23:e.next=13;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(11),i.e(e.t0);case 30:return e.prev=30,i.f(),e.finish(30);case 33:case"end":return e.stop()}},e,null,[[11,27,30,33]])}))()}};Ti.Preload("ti/com/wn/adaptlist/wn-adaptlist-methods.mjs",t)}(),function(){var t={meta:{type:Object,default:null},data:{type:[Object,Array],default:null},changedId:{type:String,default:null},status:{type:Object,default:function(){return{reloading:!1}}},droppable:{type:Boolean,default:!0},multi:{type:Boolean,default:!0},checkable:{type:Boolean,default:!0},blurable:{type:Boolean,default:!0},selectable:{type:Boolean,default:!0},spacing:{type:String,default:"sm"},keeyHiddenBy:{type:String,default:"wn-list-adaptview-expose-hidden"},routers:{type:Object,default:function(){return{reload:"dispatch:current/reload"}}},listConf:{type:Object,default:void 0},itemClassName:{type:String,default:null},beforeUpload:{type:Function,default:void 0}};Ti.Preload("ti/com/wn/adaptlist/wn-adaptlist-props.mjs",t)}(),Ti.Preload("ti/com/wn/adaptlist/wn-adaptlist.html",'<div class="wn-adaptlist" \n  :class="TopClass"\n  v-ti-activable>\n  <div\n    class="list-con ti-fill-parent"\n    v-drop-files.mask="OnDropFiles">\n    \x3c!--==================================\n      Show Loading\n    --\x3e\n    <ti-loading\n      v-if="isReloading"\n        class="as-reloading as-mid-tip"\n        text="i18n:reloading"/>\n    \x3c!--==================================\n      Data List\n    --\x3e\n    <ti-wall\n      v-else\n        class="ti-fill-parent"\n        :data="TheDataList"\n        :spacing="spacing"\n        :changed-id="changedId"\n        :current-id="myCurrentId"\n        :checked-ids="myCheckedIds"\n        :multi="multi"\n        :checkable="checkable"\n        :blurable="blurable"\n        :selectable="selectable"\n        :display="WallItemDisplay"\n        :puppet-mode="true"\n        v-bind="listConf"\n        :on-init="OnListInit"\n        @select="OnSelected"/>\n    \x3c!--==================================\n      Hidden file upload control\n    --\x3e\n    <input \n      type="file" \n      ref="file" \n      class="ti-hide"\n      multiple\n      @change.stop.seft="OnSelectLocalFilesToUpload">\n    \x3c!--==================================\n      Uploading Pannel\n    --\x3e\n    <div\n      class="wal-uploading"\n      :class="UploadingClass">\n      <header>\n        <ti-icon value="fas-spinner fa-pulse"/>\n        <span>{{\'uploading\'|i18n}}</span>\n      </header>\n      <section>\n        <ti-wall \n          :data="TheUploadingList"\n          :spacing="spacing"\n          :selectable="false"\n          :multi="false"\n          :checkable="false"\n          :blurable="false"\n          :display="UploadingItemDisplay"\n          :puppet-mode="true"/>\n      </section>\n    </div>\n    \x3c!--==================================--\x3e\n  </div>\n</div>'),function(){var t={data:function(){return{myCurrentId:null,myCheckedIds:{},myUploadigFiles:[],myItemStatus:{},myExposeHidden:!0,myData:null}},computed:{TopClass:function(){return this.getTopClass()},isReloading:function(){return _.get(this.status,"reloading")},WallItemDisplay:function(){return{key:"..",transformer:{name:"Wn.Util.getObjThumbInfo",args:[{status:this.myItemStatus,exposeHidden:this.myExposeHidden}]},comType:"ti-obj-thumb",comConf:{"...":"${=value}"}}},UploadingItemDisplay:function(){return{key:"..",comType:"ti-obj-thumb",comConf:{"...":"${=value}"}}},hasDataList:function(){return this.myData&&_.isArray(this.myData.list)},TheDataList:function(){if(!this.myData||_.isEmpty(this.myData.list))return[];var t,e=[],n=_createForOfIteratorHelper(this.myData.list);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(!this.isHiddenItem(i)){this.myItemStatus[i.id];e.push(i)}}}catch(t){n.e(t)}finally{n.f()}return e},TheUploadingList:function(){var t=this.myUploadigFiles,e=[];if(_.isArray(t)){var n,i=_createForOfIteratorHelper(t);try{for(i.s();!(n=i.n()).done;){var a=n.value,r=a.file.type,o=Ti.Util.getSuffixName(a.file.name),s=void 0;s=/^image\//.test(r)?{type:"localFile",value:a.file}:Ti.Icons.get({tp:o,mime:r}),e.push({id:a.id,title:a.file.name,preview:s,progress:a.current/a.total})}}catch(t){i.e(t)}finally{i.f()}}return e},hasUploading:function(){return this.myUploadigFiles.length>0},UploadingClass:function(){return this.hasUploading?"up-show":"up-hide"}},methods:{OnListInit:function(t){this.$innerList=t},OnSelected:function(t){var e=t.currentId,n=t.checkedIds;return this.myCurrentId=e,this.myCheckedIds=n,{stop:!1}},OnDropFiles:function(t){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.droppable){n.next=2;break}return n.abrupt("return");case 2:return i=_toConsumableArray(t),n.next=5,e.doUpload(i);case 5:e.$nextTick(function(){var t,n=[],i=_createForOfIteratorHelper(e.TheDataList);try{for(i.s();!(t=i.n()).done;){var a=t.value;e.myCheckedIds[a.id]&&n.push(a)}}catch(t){i.e(t)}finally{i.f()}e.$notify("uploaded",n)});case 6:case"end":return n.stop()}},n)}))()},OnSelectLocalFilesToUpload:function(t){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.OnDropFiles(t.target.files);case 2:e.$refs.file.value="";case 3:case"end":return n.stop()}},n)}))()},getCurrentItem:function(){var t=this;if(this.myCurrentId)return _.find(this.TheDataList,function(e){return e.id==t.myCurrentId})},getCheckedItems:function(){var t=this;return _.filter(this.TheDataList,function(e){return t.myCheckedIds[e.id]})},setItem:function(t){if(t&&this.hasDataList){var e=_.map(this.TheDataList,function(e){return e.id==t.id?t:e});this.myData.list=e}},setItemStatus:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loading";this.myItemStatus=_.assign({},this.myItemStatus,_defineProperty({},t,e))},invokeList:function(t){console.log("methodName"),Ti.InvokeBy(this.$innerList,t)},isHiddenItem:function(t){return!(!t.nm.startsWith(".")||this.myExposeHidden)},_run:function(t,e){var n=this;return _asyncToGenerator(regeneratorRuntime.mark(function i(){var a,r;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(a=(n.routers||{})[t],!_.isFunction(a)){i.next=6;break}return i.next=4,a();case 4:i.next=11;break;case 6:if(!a){i.next=11;break}return r=Ti.App(n),i.next=10,r.exec(a,e);case 10:return i.abrupt("return",i.sent);case 11:case"end":return i.stop()}},i)}))()},toggleExposeHidden:function(){var t=!this.myExposeHidden;this.myExposeHidden=t,this.keeyHiddenBy&&Ti.Storage.session.set(this.keeyHiddenBy,t)},openLocalFileSelectdDialog:function(){this.$refs.file.click()},openCurrentMeta:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getCurrentItem()||t.meta){e.next=3;break}return e.abrupt("return",Ti.Toast.Open("i18n:nil-obj"));case 3:return e.next=5,Wn.EditObjMeta(n,{fields:"auto"});case 5:(i=e.sent)&&(a=i.updates,r=i.data,t.setItem(r));case 7:case"end":return e.stop()}},e)}))()},syncMyData:function(){this.myData=_.cloneDeep(this.data)||{list:[],pager:{}},this.myItemStatus={}}},watch:{data:{handler:"syncMyData",immediate:!0},myExposeHidden:function(t){this.$notify("expose-hidden",t)}},mounted:function(){var t=this;Ti.Fuse.getOrCreate().add({key:"wn-list-adaptview-check-uploading",everythingOk:function(){return!t.hasUploading},fail:function(){Ti.Toast.Open("i18n:upload-nofinished","warn")}}),this.keeyHiddenBy&&(this.myExposeHidden=Ti.Storage.session.getBoolean(this.keeyHiddenBy))},beforeDestroy:function(){Ti.Fuse.get().remove("wn-list-adaptview-check-uploading")}};Ti.Preload("ti/com/wn/adaptlist/wn-adaptlist.mjs",t)}(),Ti.Preload("ti/com/wn/adaptlist/_com.json",{name:"wn-adaptlist",globally:!0,template:"./wn-adaptlist.html",props:"./wn-adaptlist-props.mjs",methods:"./wn-adaptlist-methods.mjs",mixins:["./wn-adaptlist.mjs"],components:["@com:ti/obj/thumb","@com:ti/wall"]}),Ti.Preload("ti/com/wn/combo/edit-com/wn-combo-edit-com.html",'<ti-label\n  class="wn-combo-edit-com"\n  :class="className"\n  :placeholder="placeholder"\n  :prefix-icon="ComIcon"\n  :value="ComTitle"\n  :suffix-icon="\'zmdi-delete\'"\n  @click:value="OnClickValue"\n  @suffix:icon="OnClickSuffixIcon"/>\n  '),function(){var t={data:function(){return{myCom:null}},props:{value:{type:Object,default:function(){return{}}},placeholder:{type:String,default:"i18n:wn-edit-com-nil"}},computed:{Dict:function(){return Wn.Dict.hMakerComponents()},ComIcon:function(){return _.get(this.myCom,"icon")},ComTitle:function(){return _.get(this.myCom,"title")}},methods:{OnClickValue:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn.EditTiComponent(t.value);case 2:(n=e.sent)&&t.notifyChange(n);case 4:case"end":return e.stop()}},e)}))()},OnClickSuffixIcon:function(){this.notifyChange({})},notifyChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.comType||(t.comType=void 0,t.comConf=void 0),this.$notify("change",t)},reloadMyCom:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_.isEmpty(t.value)){e.next=7;break}return n=t.value.comType,e.next=4,t.Dict.getItem(n);case 4:t.myCom=e.sent,e.next=8;break;case 7:t.myCom=null;case 8:case"end":return e.stop()}},e)}))()}},watch:{value:{handler:"reloadMyCom",immediate:!0}}};Ti.Preload("ti/com/wn/combo/edit-com/wn-combo-edit-com.mjs",t)}(),Ti.Preload("ti/com/wn/combo/edit-com/_com.json",{name:"wn-combo-edit-com",globally:!0,template:"./wn-combo-edit-com.html",mixins:"./wn-combo-edit-com.mjs"}),Ti.Preload("ti/com/wn/combo/input/wn-combo-input.html",'<ti-combo-input v-bind="this"\n  \n  :options="OptionsDict"\n  :drop-com-type="DropComType"\n  :prefix-icon="ThePrefixIcon"\n  :drop-display="TheDropDisplay"\n  \n  @change="$notify(\'change\', $event)"/>\n  '),function(){var t={data:function(){return{loading:!1}},props:{itemBy:{type:[String,Function],default:void 0},findBy:{type:[String,Function],default:void 0},loadingIcon:{type:String,default:"zmdi-settings zmdi-hc-spin"},canInput:{type:Boolean,default:!0},autoCollapse:{type:Boolean,default:!1}},computed:{DropComType:function(){return this.dropComType||"wn-list"},ThePrefixIcon:function(){return this.loading?this.loadingIcon:this.prefixIcon},OptionsDict:function(){var t=this;return Wn.Dict.evalOptionsDict(this,function(e){var n=e.loading;t.loading=n})},TheDropDisplay:function(){return this.dropDisplay||["@<thumb>","title|text"]}}};Ti.Preload("ti/com/wn/combo/input/wn-combo-input.mjs",t)}(),Ti.Preload("ti/com/wn/combo/input/_com.json",{name:"wn-combo-input",globally:!0,template:"./wn-combo-input.html",props:["@com:ti/input/ti-input-props.mjs","@com:ti/combo/input/ti-combo-input-props.mjs"],mixins:"./wn-combo-input.mjs",components:["@com:ti/combo/input","@com:wn/list","@com:wn/obj/icon"]}),Ti.Preload("ti/com/wn/combo/multi-input/wn-combo-multi-input.html",'<ti-combo-multi-input v-bind="this"\n\n  :options="OptionsDict"\n  :tag-mapping="TheTagMapping"\n  :drop-com-type="DropComType"\n  :prefix-icon="ThePrefixIcon"\n  :tag-item-icon-by="TheTagItemIconBy"\n  :drop-display="TheDropDisplay"\n  \n  @change="$notify(\'change\', $event)"/>\n  '),function(){var t={inheritAttrs:!1,data:function(){return{loading:!1}},props:{itemBy:{type:[String,Function],default:void 0},findBy:{type:[String,Function],default:void 0},loadingIcon:{type:String,default:"zmdi-settings zmdi-hc-spin"}},computed:{DropComType:function(){return this.dropComType||"wn-list"},ThePrefixIcon:function(){return this.loading&&this.prefixIcon?this.loadingIcon:this.prefixIcon},OptionsDict:function(){var t=this;return Wn.Dict.evalOptionsDict(this,function(e){var n=e.loading;t.loading=n})},TheTagMapping:function(){return _.isEmpty(this.tagMapping)?{text:"title|nm",icon:"icon",value:"id"}:this.tagMapping},TheTagItemIconBy:function(){return this.tagItemIconBy||function(t){return Wn.Util.getObjIcon(t)}},TheDropDisplay:function(){return this.dropDisplay||["@<thumb>","title","nm"]}}};Ti.Preload("ti/com/wn/combo/multi-input/wn-combo-multi-input.mjs",t)}(),Ti.Preload("ti/com/wn/combo/multi-input/_com.json",{name:"wn-combo-multi-input",globally:!0,template:"./wn-combo-multi-input.html",props:["@com:ti/input/ti-input-props.mjs","@com:ti/input/tags/ti-input-tags-props.mjs","@com:ti/combo/input/ti-combo-input-props.mjs"],mixins:"./wn-combo-multi-input.mjs",components:["@com:ti/combo/multi-input","@com:wn/list","@com:wn/obj/icon"]}),Ti.Preload("ti/com/wn/droplist/wn-droplist.html",'<component \n  :is="ComType"\n  v-bind="this"\n  :can-input="false"\n  :must-in-list="true"\n  :auto-collapse="true"\n  @change="$notify(\'change\', $event)"/>'),function(){var t={props:{multi:{type:Boolean,default:!1}},computed:{ComType:function(){return this.multi?"wn-combo-multi-input":"wn-combo-input"}}};Ti.Preload("ti/com/wn/droplist/wn-droplist.mjs",t)}(),Ti.Preload("ti/com/wn/droplist/_com.json",{name:"wn-droplist",globally:!0,template:"./wn-droplist.html",props:["@com:ti/input/ti-input-props.mjs","@com:ti/input/tags/ti-input-tags-props.mjs","@com:ti/combo/input/ti-combo-input-props.mjs"],mixins:["./wn-droplist.mjs"],components:["@com:wn/combo/input","@com:wn/combo/multi-input"]}),Ti.Preload("ti/com/wn/explorer/wn-explorer.html",'<div class="wn-explorer"\n  v-drop-off\n  :class="topClass">\n  \x3c!--\n    Sky\n  --\x3e\n  <div v-if="show.sky"\n    class="explorer-sky">\n    \x3c!--Logo--\x3e\n    <div v-if="show.logo"\n      class="sky-logo ti-flex-center">\n      <slot name="logo"></slot>\n    </div>\n    \x3c!--Title/Crumb--\x3e\n    <div v-if="!noTitle"\n      class="sky-title">\n      <slot name="title">\n        <ul class="as-address-bar">\n          <li v-for="an in ancestors" :key="an.id">\n            <a :href="getObjLink(an)"\n              @click.prevent="$notify(\'main:open\', an)">{{getObjTitle(an)}}</a>\n            <ti-icon class="center" value="chevron_right"/>\n          </li>\n          <li v-if="meta">\n            <b>{{getObjTitle(meta)}}</b>\n            <span v-if="status.changed"\n              class="ti-mark-changed">*</span>\n          </li>\n        </ul>\n      </slot>\n    </div>\n    \x3c!--Actions--\x3e\n    <div v-if="show.action"\n      class="sky-action ti-flex-right">\n      <slot name="action"></slot>\n    </div>\n  </div>\n  \x3c!--\n    Aside\n  --\x3e\n  <div v-if="show.aside"\n    class="explorer-aside">\n    <slot name="aside"></slot>\n  </div>\n  \x3c!--\n    Main Arena\n  --\x3e\n  <div class="explorer-arena">\n    <slot name="arena"></slot>\n  </div>\n  \x3c!--\n    Footer\n  --\x3e\n  <div v-if="show.footer"\n    class="explorer-footer">\n    <slot name="footer"></slot>\n  </div>\n  <div v-if="loading" class="exploer-loading-mask"></div>\n</div>'),function(){var t={props:{loading:{type:Boolean,default:!1},noTitle:{type:Boolean,default:!1},meta:{type:Object,default:function(){return{}}},ancestors:{type:Array,default:function(){return[]}},children:{type:Array,default:function(){return[]}},status:{type:Object,default:function(){return{changed:!1}}}},computed:{show:function(){var t={logo:!!this.$slots.logo,action:!!this.$slots.action,aside:!!this.$slots.aside,footer:!!this.$slots.footer};return t.sky=!(this.noTitle&&!t.logo&&!t.action),t},topClass:function(){return{"no-sky":!this.show.sky,"no-aside":!this.show.aside,"no-footer":!this.show.footer}}},methods:{getObjTitle:function(t){var e=t.title||t.nm;return Ti.I18n.text(e)},getObjLink:function(t){return Wn.Util.getAppLink(t).toString()}},mounted:function(){}};Ti.Preload("ti/com/wn/explorer/wn-explorer.mjs",t)}(),Ti.Preload("ti/com/wn/explorer/_com.json",{name:"wn-explorer",globally:!0,template:"./wn-explorer.html",mixins:["./wn-explorer.mjs"]}),Ti.Preload("ti/com/wn/gui/arena/wn-gui-arena.html",'<div class="wn-gui-arena">\n  <component \n    :is="comType"\n      class="ti-cover-parent"\n      v-bind="comConf"/>\n</div>'),function(){var t={props:{meta:{type:Object,default:null},comType:{type:String,default:"ti-loading"},comConf:{type:Object,default:function(){return{}}}}};Ti.Preload("ti/com/wn/gui/arena/wn-gui-arena.mjs",t)}(),Ti.Preload("ti/com/wn/gui/arena/_com.json",{name:"wn-gui-arena",globally:!0,template:"./wn-gui-arena.html",mixins:["./wn-gui-arena.mjs"]}),Ti.Preload("ti/com/wn/gui/footer/wn-gui-footer.html",'<div class="wn-gui-footer">\n  \x3c!--\n    Info\n  --\x3e\n  <div class="as-info ti-flex-center">\n    <ti-icon v-if="infoIcon"\n      :value="infoIcon"/>\n    <span v-if="infoText"\n      >{{infoText|i18n}}</span>\n  </div>\n  \x3c!--\n    Message\n  --\x3e\n  <div class="as-msg ti-flex-center">\n    {{message}}\n  </div>\n  \x3c!--\n    Indicator\n  --\x3e\n  <div class="as-indi">\n    {{indicator}}\n  </div>\n</div>'),function(){var t={inheritAttrs:!1,props:{infoIcon:{type:[String,Object],default:void 0},infoText:{type:String,default:void 0},message:{type:String,default:void 0},indicator:{type:String,default:void 0}}};Ti.Preload("ti/com/wn/gui/footer/wn-gui-footer.mjs",t)}(),Ti.Preload("ti/com/wn/gui/footer/_com.json",{name:"wn-gui-footer",globally:!0,template:"./wn-gui-footer.html",mixins:["./wn-gui-footer.mjs"]}),Ti.Preload("ti/com/wn/gui/side/nav/com/side-nav-item/side-nav-item.html",'<div class="side-nav-item" :class="topClass">\n  \x3c!--\n    Self Info\n  --\x3e\n  <div class="it-info" >\n    \x3c!--Icon--\x3e\n    <span v-if="icon" class="it-info-icon">\n      <ti-icon :value="icon" size=".16rem"/>\n    </span>\n    \x3c!--Group--\x3e\n    <span v-if="isGroup"\n      class="it-info-text"\n      @click.stop.prevent="onClickGroupInfo">{{title|i18n}}</span>\n    \x3c!--Item--\x3e\n    <a v-else\n      class="it-info-text"\n      :href="href"\n      @click.stop.prevent="onClickItemInfo">\n      {{title|i18n}}\n    </a>\n  </div>\n  \x3c!--\n    Sub Container\n  --\x3e\n  <div class="it-con" v-if="items && items.length > 0">\n      <side-nav-item v-for="subIt in items"\n        :key="subIt.key"\n        :group-status-store-key="subIt.key"\n        :highlight-id="highlightId"\n        v-bind="subIt"\n        @item:actived="$notify(\'item:actived\', $event)"/>\n  </div>\n</div>'),function(){var t={inheritAttrs:!1,data:function(){return{collapse:!0}},props:{groupStatusStoreKey:{type:String,default:null},highlightId:{type:String,default:null},id:{type:String,default:null},depth:{type:Number,default:0},icon:{type:[String,Object],default:null},title:{type:String,default:null},path:{type:String,default:null},view:{type:String,default:null},href:{type:String,default:null},items:{type:Array,default:function(){return[]}}},computed:{topClass:function(){return{"is-top":this.isTop,"is-sub":!this.isTop,"is-group":this.isGroup,"is-item":!this.isGroup,"is-collapse":this.collapse,"is-expend":!this.collapse,"is-highlight":this.isHighlight}},isTop:function(){return 0==this.depth},isGroup:function(){return _.isArray(this.items)},isHighlight:function(){return this.id&&this.id==this.highlightId}},methods:{onClickGroupInfo:function(){this.isGroup&&(this.collapse=!this.collapse,this.groupStatusStoreKey&&Ti.Storage.session.set(this.groupStatusStoreKey,this.collapse))},onClickItemInfo:function(){this.$notify("item:actived",{id:this.id,title:this.title,path:this.path,href:this.href,view:this.view})}},mounted:function(){this.isGroup&&(this.isTop?this.collapse=!1:this.collapse=!0,this.groupStatusStoreKey&&(this.collapse=Ti.Storage.session.getBoolean(this.groupStatusStoreKey,this.collapse)))}};Ti.Preload("ti/com/wn/gui/side/nav/com/side-nav-item/side-nav-item.mjs",t)}(),Ti.Preload("ti/com/wn/gui/side/nav/com/side-nav-item/_com.json",{name:"side-nav-item",template:"./side-nav-item.html",mixins:["./side-nav-item.mjs"]}),Ti.Preload("ti/com/wn/gui/side/nav/wn-gui-side-nav.html",'<div class="wn-gui-side-nav"\n  :class="TopClass"\n  v-ti-activable>\n  <side-nav-item v-for="it in TheItems"\n    :key="it.key"\n    v-bind="it"\n    @item:actived="onItemActived"/>\n</div>'),function(){var t={props:{items:{type:Array,default:null},highlightItemId:{type:String,default:null},highlightItemPath:{type:String,default:null}},computed:{TopClass:function(){return this.getTopClass()},TheItems:function(){var t=[];if(_.isArray(this.items)){var e,n=_createForOfIteratorHelper(this.items);try{for(n.s();!(e=n.n()).done;){var i=e.value;t.push(this.evalItem(i))}}catch(t){n.e(t)}finally{n.f()}}return t},theHighlightItemId:function(){var t=this.joinHighlightItems([],this.items);if(t.length>0)return t.sort(function(t,e){return t.score-e.score}),_.first(t).id}},methods:{evalItem:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=null;if(_.isArray(t.items)){e=[];var n,i=_createForOfIteratorHelper(t.items);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.push(this.evalItem(a))}}catch(t){i.e(t)}finally{i.f()}}return _.assign(_.pick(t,["id","key","depth","icon","title","path","view"]),{items:e,groupStatusStoreKey:t.key,highlightId:this.theHighlightItemId,href:t.id?Wn.Util.getAppLink(t.id)+"":null})},joinHighlightItems:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(this.highlightItemId&&_.isArray(e)&&e.length>0){var n,i=_createForOfIteratorHelper(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.id==this.highlightItemId)t.push({score:0,id:a.id});else if(a.path&&a.id&&this.highlightItemPath&&this.highlightItemPath.startsWith(a.path)){var r=this.highlightItemPath.length-a.path.length;t.push({score:1+r,id:a.id})}a.items&&this.joinHighlightItems(t,a.items)}}catch(t){i.e(t)}finally{i.f()}}return t},onItemActived:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$notify("item:active",t)}}};Ti.Preload("ti/com/wn/gui/side/nav/wn-gui-side-nav.mjs",t)}(),Ti.Preload("ti/com/wn/gui/side/nav/_com.json",{name:"wn-gui-side-nav",globally:!0,template:"./wn-gui-side-nav.html",mixins:["./wn-gui-side-nav.mjs"],components:["./com/side-nav-item"]}),Ti.Preload("ti/com/wn/gui/side/tree/wn-gui-side-tree.html",'<ti-tree\n  class="ti-fill-parent wn-gui-side-tree"\n  id-by="value"\n  name-by="name"\n  :display="TreeDisplay"\n  :data="myTreeData"\n  :current-id="highlightItemId"\n  :checked-ids="CheckedIds"\n  keep-open-by="wn-gui-side-tree"\n  :auto-open="true"\n  :default-open-depth="2"\n  :show-root="false"\n  :puppet-mode="true"\n  @select="onItemActived"/>'),function(){var t={data:function(){return{myItems:[],myTreeData:[]}},props:{items:{type:Array,default:null},highlightItemId:{type:String,default:null},highlightItemPath:{type:String,default:null}},computed:{TreeDisplay:function(){return["<icon>",{key:"text",comConf:{className:"is-nowrap",href:"(value)?/a/open/wn.manager?ph=id:${value}"}}]},HighlightItemId:function(){var t=this.joinHighlightItems([],this.items);if(t.length>0)return t.sort(function(t,e){return t.score-e.score}),_.first(t).id},CheckedIds:function(){return this.HighlightItemId?[this.HighlightItemId]:[]}},methods:{evalTreeData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.myItems=_.cloneDeep(t);var e=[];if(_.isArray(t)){var n,i=_createForOfIteratorHelper(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.push(this.evalItemToTreeNode(a))}}catch(t){i.e(t)}finally{i.f()}}this.myTreeData=e},evalItemToTreeNode:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=null;if(_.isArray(t.items)){e=[];var n,i=_createForOfIteratorHelper(t.items);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.push(this.evalItemToTreeNode(a))}}catch(t){i.e(t)}finally{i.f()}}return{name:t.key,text:t.title,icon:t.icon,value:t.id,children:e}},joinHighlightItems:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(this.highlightItemId&&_.isArray(e)&&e.length>0){var n,i=_createForOfIteratorHelper(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.id==this.highlightItemId)t.push({score:0,id:a.id});else if(a.path&&a.id&&this.highlightItemPath&&this.highlightItemPath.startsWith(a.path)){var r=this.highlightItemPath.length-a.path.length;t.push({score:1+r,id:a.id})}a.items&&this.joinHighlightItems(t,a.items)}}catch(t){i.e(t)}finally{i.f()}}return t},onItemActived:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).current,e=void 0===t?{}:t;e.value&&this.$notify("item:active",{id:e.value})}},watch:{items:{handler:function(t,e){_.isEqual(t,this.myItems)||this.evalTreeData(t)},immediate:!0}}};Ti.Preload("ti/com/wn/gui/side/tree/wn-gui-side-tree.mjs",t)}(),Ti.Preload("ti/com/wn/gui/side/tree/_com.json",{name:"wn-gui-side-tree",globally:!0,template:"./wn-gui-side-tree.html",mixins:["./wn-gui-side-tree.mjs"],components:["@com:ti/tree"]}),Ti.Preload("ti/com/wn/gui/test.json",{layout:{type:"cols",border:!0,blocks:[{name:"C0",icon:"im-award",title:"Test C0",closer:!0,actions:[{type:"group",icon:"zmdi-more-vert",items:[{key:"show-P1",text:"show P1",type:"action",action:"main:showBlock(P1)"},{key:"hide-P1",text:"hide P1",type:"action",action:"main:hideBlock(P1)"}]}],size:"20%",type:"rows",border:!0,blocks:[{name:"C0-1",size:100,body:{comType:"ti-label",comConf:{value:"C0-1 content"}}},{name:"C0-2",body:{comType:"ti-label",comConf:{value:"C0-2 content"}}},{name:"C0-3",body:{comType:"ti-label",comConf:{value:"C0-3 content"}}}]},{name:"C1",icon:"im-award",title:"Test C1",actions:[{type:"group",icon:"zmdi-more-vert",items:[{key:"show-P1",text:"show P1",type:"action",action:"main:showBlock(P1)"},{key:"hide-P1",text:"hide P1",type:"action",action:"main:hideBlock(P1)"}]}],size:"stretch",type:"tabs",blocks:[{name:"C1-1",size:100,body:{comType:"ti-label",comConf:{value:"C1-1 content"}}},{name:"C1-2",body:{comType:"ti-label",comConf:{value:"C1-2 content"}}},{name:"C1-3",body:{comType:"ti-label",comConf:{value:"C1-3 content"}}}]},{name:"C2",body:"C2",size:260}],panels:[{name:"P1",closer:"right",position:"left-top",width:"50%",height:"50%",mask:!0,body:{comType:"ti-label",comConf:{value:"P1"}}}]},schema:{C1:{comType:"ti-label",comConf:{value:"I am C11"}},C2:{comType:"ti-label",comConf:{value:"I am C22"}}},actions:[{key:"reloading",type:"action",icon:"zmdi-refresh",text:"i18n:refresh",altDisplay:{icon:"zmdi-refresh zmdi-hc-spin",text:"i18n:loading"},action:"dispatch:main/reload",shortcut:"CTRL+R"},{key:"show-P1",text:"show P1",type:"action",action:"main:showBlock(P1)"},{key:"hide-P1",text:"hide P1",type:"action",action:"main:hideBlock(P1)"}]}),Ti.Preload("ti/com/wn/gui/wn-gui.html",'<ti-gui\n  v-bind="layout"\n  :schema="schema"\n  :shown="shown"\n  @block:show="showBlock"\n  @block:hide="hideBlock"/>'),function(){var t={inheritAttrs:!1,data:function(){return{shown:{}}},props:{data:{type:Object,default:function(){return{}}}},computed:{layout:function(){return this.data?this.data.layout:{}},schema:function(){return this.data?this.data.schema:{}}},watch:{"data.actions":function(){}},methods:{showBlock:function(t){this.shown=this.createGuiBlockShown(this.shown,t,!0)},hideBlock:function(t){this.shown=this.createGuiBlockShown(this.shown,t,!1)}}};Ti.Preload("ti/com/wn/gui/wn-gui.mjs",t)}(),Ti.Preload("ti/com/wn/gui/_com.json",{name:"wn-gui",globally:!0,template:"./wn-gui.html",methods:"@com:ti/gui/ti-gui-methods.mjs",mixins:["./wn-gui.mjs"],components:["@com:ti/gui"]}),Ti.Preload("ti/com/wn/imgfile/wn-imgfile.html",'<ti-imgfile\n  :src="imageSrc"\n  :width="width"\n  :height="height"\n  :progress="progress"\n  :upload-file="uploadFile"\n  :removable="removable"\n  @upload="onUpload"\n  @remove="onRemove"\n  @open="onOpen"/>'),function(){var t={data:function(){return{src_ts:null,oImage:null,uploadFile:null,progress:-1}},props:{value:{type:String,default:null},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},removable:{type:Boolean,default:!0},target:{type:String,required:!0,default:null},supportTypes:{type:[String,Array],default:function(){return["png","jpg","jpeg","gif"]}},supportMimes:{type:[String,Array],default:function(){return["image/png","image/jpeg","image/gif"]}},filter:{type:[Array,String],default:null},quality:{type:Number,default:0}},computed:{acceptTypes:function(){return _.isString(this.supportTypes)?this.supportTypes.split(","):this.supportTypes},acceptMimes:function(){return _.isString(this.supportMimes)?this.supportMimes.split(","):this.supportMimes},imageFilter:function(){return this.filter?[].concat(this.filter):[]},imageSrc:function(){if(this.oImage){var t=["/o/content?str=id:",this.oImage.id];return this.src_ts&&(t.push("&_t="),t.push(this.src_ts)),t.join("")}}},methods:{assertListHas:function(t,e,n,i){return _asyncToGenerator(regeneratorRuntime.mark(function i(){var a,r,o,s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(_.isEmpty(t)){i.next=24;break}a=!0,r=_createForOfIteratorHelper(t),i.prev=3,r.s();case 5:if((o=r.n()).done){i.next=12;break}if((s=o.value)!=e){i.next=10;break}return a=!1,i.abrupt("break",12);case 10:i.next=5;break;case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(3),r.e(i.t0);case 17:return i.prev=17,r.f(),i.finish(17);case 20:if(!a){i.next=24;break}return i.next=23,Ti.Alert(n,{type:"warn",icon:"zmdi-alert-triangle"});case 23:return i.abrupt("return",!1);case 24:return i.abrupt("return",!0);case 25:case"end":return i.stop()}},i,null,[[3,14,17,20]])}))()},onOpen:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.oImage){e.next=4;break}return n=Wn.Util.getAppLink(t.oImage),e.next=4,Ti.Be.Open(n.url,{params:n.params});case 4:case"end":return e.stop()}},e)}))()},onRemove:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.oImage){e.next=3;break}return e.next=3,Wn.Sys.exec2("rm id:".concat(t.oImage.id));case 3:t.$notify("change",null);case 4:case"end":return e.stop()}},e)}))()},onUpload:function(t){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=Ti.Util.getSuffixName(t.name),n.next=3,e.assertListHas(e.acceptTypes,i,{text:"i18n:wn-invalid-types",vars:{current:i,supports:e.acceptTypes.join(", ")}});case 3:if(n.sent){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,e.assertListHas(e.acceptMimes,t.type,{text:"i18n:wn-invalid-mimes",vars:{current:t.type,supports:e.acceptMimes.join(", ")}});case 7:if(n.sent){n.next=9;break}return n.abrupt("return");case 9:return e.uploadFile=t,e.progress=0,n.next=13,Wn.Io.uploadFile(t,{target:e.target,mode:"r",progress:function(t){e.progress=t.loaded/t.total}});case 13:if(a=n.sent,r=a.ok,o=a.msg,s=a.data,e.uploadFile=null,e.progress=-1,r){n.next=23;break}return n.next=22,Ti.Alert("i18n:".concat(o),{type:"warn",icon:"zmdi-alert-triangle"});case 22:return n.abrupt("return");case 23:if(_.isEmpty(e.imageFilter)){n.next=30;break}return c=["imagic","id:".concat(s.id),'-filter "'.concat(e.imageFilter.join(" "),'"')],e.quality>0&&e.quality<=1&&c.push("-qa ".concat(e.quality)),c.push("-out inplace"),l=c.join(" "),n.next=30,Wn.Sys.exec2(l);case 30:e.src_ts=Date.now(),e.oImage=s,e.$notify("change",s);case 33:case"end":return n.stop()}},n)}))()},reload:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.value){e.next=6;break}return e.next=3,Wn.Io.loadMeta(t.value);case 3:t.oImage=e.sent,e.next=7;break;case 6:t.oImage=null;case 7:case"end":return e.stop()}},e)}))()}},watch:{value:function(){this.reload()}},mounted:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.reload();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()};Ti.Preload("ti/com/wn/imgfile/wn-imgfile.mjs",t)}(),Ti.Preload("ti/com/wn/imgfile/_com.json",{name:"wn-imgfile",globally:!0,template:"./wn-imgfile.html",mixins:["./wn-imgfile.mjs"],components:["@com:ti/imgfile"]}),Ti.Preload("ti/com/wn/label/wn-label.html",'<ti-label\n  :class-name="className"\n  :blank-as="blankAs"\n  :value="theValue"\n  :format="format"\n  :prefix-icon="prefixIcon"\n  :prefix-text="prefixText"\n  :suffix-text="suffixText"\n  :suffix-icon="suffixIcon"\n  :href="href"\n  :new-tab="newTab"/>'),function(){var t={inheritAttrs:!1,data:function(){return{theValue:null}},props:{blankAs:{type:String,default:"i18n:nil"},value:null,format:void 0,prefixIcon:{type:String,default:null},prefixText:{type:String,default:null},suffixText:{type:String,default:null},suffixIcon:{type:String,default:null},dict:{type:String,default:null},href:{type:String,default:null},newTab:{type:Boolean,default:!1}},watch:{value:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.evalTheValue();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},methods:{evalTheValue:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Ti.Util.isNil(t.value)||!t.dict){e.next=6;break}return e.next=3,Wn.Dict.get(t.dict,t.value);case 3:t.theValue=e.sent,e.next=7;break;case 6:t.theValue=t.value;case 7:case"end":return e.stop()}},e)}))()}},mounted:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.evalTheValue();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()};Ti.Preload("ti/com/wn/label/wn-label.mjs",t)}(),Ti.Preload("ti/com/wn/label/_com.json",{name:"wn-label",globally:!0,template:"./wn-label.html",mixins:["./wn-label.mjs"],components:["@com:ti/label"]}),Ti.Preload("ti/com/wn/list/wn-list.html",'<ti-list\n  v-bind="this"\n  :display="DisplayItems"\n  :on-init="OnSubListInit"\n  @select="OnSelected"\n  @open="$notify(\'open\', $event)"/>'),function(){var t={inheritAttrs:!1,data:function(){return{isAllChecked:!1,hasChecked:!1,theCurrentId:!1,theCheckedIds:!1}},props:{iconBy:{type:[String,Function],default:void 0},indentBy:{type:[String,Function],default:void 0},itemClassName:void 0,display:{type:[Object,String,Array],default:function(){return{key:"..",comType:"ti-label"}}},border:{type:Boolean,default:!0},autoScrollIntoView:{type:Boolean,default:!0}},computed:{DisplayItems:function(){return this.explainDisplayItems(this.display)}},methods:{OnSubListInit:function(t){this.$list=t},OnSelected:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.theCheckedIds=t.checkedIds,this.theCurrentId=t.currentId,this.syncCheckStatus(),this.$notify("select",t)},syncCheckStatus:function(){this.isAllChecked=this.$list.isAllChecked,this.hasChecked=this.$list.hasChecked},selectPrevRow:function(t){this.$list.selectPrevRow(t)},selectNextRow:function(t){this.$list.selectNextRow(t)},getCurrentRow:function(t){return this.$list.getCurrentRow(t)},getCheckedRow:function(t){return this.$list.getCheckedRow(t)},getCurrent:function(t){return this.$list.getCurrent(t)},getChecked:function(t){return this.$list.getChecked(t)},selectRow:function(t){this.$list.selectRow(t)},checkRow:function(t){this.$list.checkRow(t)},cancelRow:function(t){this.$list.cancelRow(t)}},watch:{data:function(){this.syncCheckStatus()},checkedIds:function(){this.syncCheckStatus()}}};Ti.Preload("ti/com/wn/list/wn-list.mjs",t)}(),Ti.Preload("ti/com/wn/list/_com.json",{name:"wn-list",globally:!0,template:"./wn-list.html",props:["@com:ti/support/list_props.mjs"],mixins:["@com:wn/support/wn_list_wrapper_mixins.mjs","./wn-list.mjs"],components:["@com:ti/table"]}),Ti.Preload("ti/com/wn/obj/form/wn-obj-form.html",'<ti-form \n  v-bind="this"\n  :auto-show-blank="isAutoShowBlank"\n  :class-name="className"\n  @field:change="OnFieldChange"\n  @change="OnChange"\n  @invalid="OnInvalid"/>'),function(){var t={props:{fuse:{type:Object,default:function(){return{key:"wn-obj-form",noti:null}}},setDataBy:{type:[String,Object,Boolean],default:null},updateBy:{type:[String,Object,Boolean],default:null},setFieldStatusBy:{type:[String,Object,Boolean],default:null}},computed:{isAutoShowBlank:function(){return Ti.Util.fallback(this.autoShowBlank,!0)}},methods:{doAction:function(t,e,n){_.isPlainObject(e)?Ti.App(this)[e.method](e.target,n):_.isString(e)?Ti.App(this).exec(e,n):e&&this.$notify(t,n)},OnFieldChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.name,n=t.value;this.doAction("field:change",this.updateBy,{name:e,value:n})},OnChange:function(t){this.doAction("change",this.setDataBy,t)},OnInvalid:function(t){var e={name:t.name,message:[t.errMessage,t.value].join(" :: "),status:"warn"};this.doAction("invalid",this.setFieldStatusBy,e)}}};Ti.Preload("ti/com/wn/obj/form/wn-obj-form.mjs",t)}(),Ti.Preload("ti/com/wn/obj/form/_com.json",{name:"wn-obj-form",globally:!0,template:"./wn-obj-form.html",props:"@com:ti/form/ti-form-props.mjs",mixins:["./wn-obj-form.mjs"],components:["@com:ti/form","@com:wn/transfer","@com:wn/droplist","@com:wn/combo/input","@com:wn/imgfile","@com:wn/combo/multi-input"]}),Ti.Preload("ti/com/wn/obj/icon/wn-obj-icon.html",'<ti-icon \n  class="wn-obj-icon" \n  :class="topClass"\n  :value="theIcon"/>'),function(){var t={inheritAttrs:!1,props:{icon:{type:String,default:null},thumb:{type:String,default:null},mime:{type:String,default:null},type:{type:String,default:null},race:{type:String,default:null},candidateIcon:{type:String,default:null},timestamp:{type:Number,default:0}},computed:{topClass:function(){return Ti.Css.mergeClassName(this.className)},theIcon:function(){return Wn.Util.getObjThumbIcon({candidateIcon:this.candidateIcon,timestamp:this.timestamp,thumb:this.thumb,icon:this.icon,mime:this.mime,type:this.type,race:this.race},"fas-cube")}},methods:{}};Ti.Preload("ti/com/wn/obj/icon/wn-obj-icon.mjs",t)}(),Ti.Preload("ti/com/wn/obj/icon/_com.json",{name:"wn-obj-icon",globally:!0,template:"./wn-obj-icon.html",mixins:["./wn-obj-icon.mjs"]}),Ti.Preload("ti/com/wn/obj/json/wn-obj-json.html",'<div class="wn-obj-json">\n  \x3c!--\n    Show Text Editor\n  --\x3e\n  <ti-text-json v-if="hasMeta"\n    class="ti-fill-parent"\n    :value="value"\n    :data="data"\n    @change="onChangeContent"/>\n  \x3c!--\n    Empty Data\n  --\x3e\n  <ti-loading v-else/>\n</div>'),function(){var t={props:{meta:{type:Object,default:function(){return{}}},value:{type:String,default:null},status:{type:Object,default:function(){return{}}}},computed:{hasMeta:function(){return!!this.meta}},methods:{onChangeContent:function(t){this.$notify("change",t)}},mounted:function(){var t=this;Ti.Fuse.getOrCreate().add({key:"wn-obj-json",everythingOk:function(){return!t.status.changed},fail:function(){Ti.Toast.Open("i18n:wn-obj-nosaved","warn")}})},beforeDestroy:function(){Ti.Fuse.get().remove("wn-obj-json")}};Ti.Preload("ti/com/wn/obj/json/wn-obj-json.mjs",t)}(),Ti.Preload("ti/com/wn/obj/json/_com.json",{name:"wn-obj-json",globally:!0,template:"./wn-obj-json.html",mixins:["./wn-obj-json.mjs"],components:["@com:ti/text/json"]}),function(){var t={meta:{type:[Object,String],default:null},mediaSrcMode:{type:String,default:"path",validator:function(t){return/^(path|fullPath|idPath|id)$/.test(t)}},keepLastBy:{type:String,default:"wn-markdown-richeditor-last-open"},defaultMediaDir:{type:String,default:"~"}};Ti.Preload("ti/com/wn/obj/markdown/richeditor/wn-markdown-richeditor-props.mjs",t)}(),Ti.Preload("ti/com/wn/obj/markdown/richeditor/wn-markdown-richeditor.html",'<TiTextMarkdownRicheditor\n  v-bind="this"\n  :actions="ToolbarActions"\n  :markdown-media-src="TheMarkdownMediaSrc"\n  :preview-media-src="ThePreviewMediaSrc"\n  :value="TheValue"\n  :on-init="OnEditorInit"/>'),function(){var t={computed:{ToolbarActions:function(){var t=this;return _.merge({Media:{icon:"fas-photo-video",action:function(){return t.OnInsertMedia()}}},this.actions)},TheValue:function(){return this.value},TheMarkdownMediaSrc:function(){var t=this;return this.markdownMediaSrc?this.markdownMediaSrc:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(n){var i,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=/^\/o\/content\?str=id:(.+)$/.exec(n))){e.next=8;break}return e.next=4,Wn.Io.loadMetaById(i[1]);case 4:if(!(a=e.sent)){e.next=8;break}return r=Wn.Io.formatObjPath(a,t.mediaSrcMode,t.meta),e.abrupt("return",r);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},ThePreviewMediaSrc:function(){var t=this;return this.previewMediaSrc?this.previewMediaSrc:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(n){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!/^(https?:)(\/\/)/.test(n)){e.next=2;break}return e.abrupt("return",n);case 2:return e.next=4,Wn.Io.loadMetaBy(n,t.meta);case 4:if(!(i=e.sent)){e.next=7;break}return e.abrupt("return","/o/content?str=id:".concat(i.id));case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}},methods:{OnEditorInit:function(t){this.$editor=t},OnInsertMedia:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o,s,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.meta||t.defaultMediaDir,t.keepLastBy&&(n=Ti.Storage.local.getString(t.keepLastBy)||n),e.next=4,Wn.OpenObjSelector(n,{fallbackPath:t.defaultMediaDir});case 4:if((i=e.sent)&&!_.isEmpty(i)){e.next=7;break}return e.abrupt("return");case 7:t.keepLastBy&&(a=_.first(i),r=Ti.Util.getParentPath(a.ph),o=Wn.Session.getFormedPath(r),Ti.Storage.local.set(t.keepLastBy,o)),s=_createForOfIteratorHelper(i);try{for(s.s();!(c=s.n()).done;)l=c.value,t.insertMediaObj(l)}catch(t){s.e(t)}finally{s.f()}case 10:case"end":return e.stop()}},e)}))()},insertMediaObj:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.mime;if(e){var n="/o/content?str=id:".concat(t.id);e.startsWith("video/")?this.insertMedia("video",n,{controls:!1,autoplay:!1}):e.startsWith("image/")&&this.insertMedia("image",n)}},insertMedia:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image",n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n){var a=new(Quill.import("delta")),r=this.$editor.getSelection();r||(this.$editor.setSelection(0),r={index:0,length:0});var o=r,s=o.index,c=o.length;a.retain(s),c>0&&a.delete(c),a.insert((t={},_defineProperty(t,e,n),_defineProperty(t,"attributes",i),t)),this.$editor.updateContents(a),this.$editor.setSelection(s+1)}}}};Ti.Preload("ti/com/wn/obj/markdown/richeditor/wn-markdown-richeditor.mjs",t)}(),Ti.Preload("ti/com/wn/obj/markdown/richeditor/_com.json",{name:"wn-obj-markdown-richeditor",globally:!0,template:"./wn-markdown-richeditor.html",props:["@com:ti/text/markdown/richeditor/ti-markdown-richeditor-props.mjs","./wn-markdown-richeditor-props.mjs"],methods:"@com:ti/text/markdown/richeditor/ti-markdown-richeditor-delegate-methods.mjs",mixins:["./wn-markdown-richeditor.mjs"],components:["@com:ti/text/markdown/richeditor"]}),Ti.Preload("ti/com/wn/obj/picker/wn-obj-picker.html",'<div class="wn-obj-picker">\n  <ti-box ref="box"\n    :empty="empty"\n    :items="formedItems"\n    :loading="loading"\n    :multi="multi"\n    :icon="theChooseIcon"\n    :clear-icon="clearIcon"\n    @open="openPicker"\n    @remove="onRemoveItem"\n    @clear="onClearItems"/>\n</div>'),function(){var t={data:function(){return{loading:!1,items:[]}},props:{empty:{type:Object,default:function(){return{text:"i18n:no-selected",value:void 0}}},value:{type:[Object,String,Array],default:null},base:{type:[Object,String],default:"~"},multi:{type:Boolean,default:!1},clearIcon:{type:[String,Object],default:"zmdi-close-circle"},chooseIcon:{type:String,default:"zmdi-folder-outline"},textBy:{type:[String,Array],default:null}},watch:{value:function(){this.reload()}},computed:{formedItems:function(){var t,e=[],n=_createForOfIteratorHelper(this.items);try{for(n.s();!(t=n.n()).done;){var i=t.value,a={icon:Wn.Util.genPreviewObj(i),text:Wn.Util.getObjDisplayName(i,this.textBy),value:i.id};e.push(a)}}catch(t){n.e(t)}finally{n.f()}return e},oneItem:function(){var t=_.isArray(this.value)?_.get(this.value,0):this.value;return"id:"==t||!t||_.isEmpty(t)?null:t},theChooseIcon:function(){return _.isEmpty(this.items)?this.chooseIcon:null}},methods:{openPicker:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.oneItem,i=!1,n&&!_.isEmpty(n)||(n=t.base||"~",i=!0),e.next=5,Wn.OpenObjSelector(n,{multi:t.multi,selected:t.items,autoOpenDir:i});case 5:a=e.sent,_.isUndefined(a)||t.$notify("change",a);case 7:case"end":return e.stop()}},e)}))()},onRemoveItem:function(t){for(var e=[],n=0;n<this.items.length;n++){var i=this.items[n],a=this.formedItems[n];_.isEqual(a.value,t.value)||e.push(i)}this.$notify("change",e)},onClearItems:function(){console.log("remove!!"),this.$notify("change",this.multi?[]:null)},reload:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.doReload();case 3:t.loading=!1;case 4:case"end":return e.stop()}},e)}))()},doReload:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.value?[].concat(t.value):[],i=[],a=_createForOfIteratorHelper(n),e.prev=3,a.s();case 5:if((r=a.n()).done){e.next=15;break}return o=r.value,e.next=9,t.reloadItem(o);case 9:if((s=e.sent)&&i.push(s),t.multi||!(i.length>0)){e.next=13;break}return e.abrupt("break",15);case 13:e.next=5;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),a.e(e.t0);case 20:return e.prev=20,a.f(),e.finish(20);case 23:t.items=i;case 24:case"end":return e.stop()}},e,null,[[3,17,20,23]])}))()},reloadItem:function(t){return _asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&!_.isEmpty(t)){e.next=2;break}return e.abrupt("return",null);case 2:if(!_.isString(t)){e.next=8;break}return e.next=5,Wn.Io.loadMeta(t);case 5:return e.abrupt("return",e.sent);case 8:if(!t.id){e.next=14;break}return e.next=11,Wn.Io.loadMetaById(t.id);case 11:return e.abrupt("return",e.sent);case 14:throw Ti.Err.make("e-wn-obj-picker-unsupported-value-form",t);case 15:case"end":return e.stop()}},e)}))()}},mounted:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.reload();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()};Ti.Preload("ti/com/wn/obj/picker/wn-obj-picker.mjs",t)}(),Ti.Preload("ti/com/wn/obj/picker/_com.json",{name:"wn-obj-picker",globally:!0,template:"./wn-obj-picker.html",mixins:["./wn-obj-picker.mjs"],components:["@com:wn/adaptlist"]}),Ti.Preload("ti/com/wn/obj/preview/com/preview-info-field/preview-info-field.html",'<div class="info-field">\n  <div class="as-name" :style="theNameStyle">\n    <ti-icon v-if="icon" class="it-icon" :value="icon"/>\n    <span class="it-text">{{title|i18n}}</span>\n  </div>\n  <div class="as-value" :style="theValueStyle">{{theValue}}</div>\n</div>'),function(){var t={data:function(){return{theValue:null}},props:{icon:{type:String,default:null},data:{type:Object,default:function(){return{}}},type:{type:String,default:"String"},title:{type:String,default:null},name:{type:String,default:null},dict:{type:String,default:null},nameWidth:{type:[String,Number],default:50},valueWidth:{type:[String,Number],default:200},transformer:{type:[String,Object,Function],default:null}},watch:{data:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.evalTheValue();case 2:this.theValue=t.sent;case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),name:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.evalTheValue();case 2:this.theValue=t.sent;case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},computed:{theTransformer:function(){var t=this.transformer||"Ti.Types."+Ti.Types.getFuncByType(this.type||"String","transformer");return Ti.Util.genInvoking(t,{context:this.data,partialRight:!0})},theNameStyle:function(){return Ti.Css.toStyle({width:this.nameWidth})},theValueStyle:function(){return Ti.Css.toStyle({width:this.valueWidth})}},methods:{evalTheValue:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=_.get(t.data,t.name),!t.dict){e.next=5;break}return e.next=4,wn.Dict.get(t.dict,n);case 4:n=e.sent;case 5:return _.isFunction(t.theTransformer)&&(n=t.theTransformer(n)),e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}))()}},mounted:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.evalTheValue();case 2:this.theValue=t.sent;case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()};Ti.Preload("ti/com/wn/obj/preview/com/preview-info-field/preview-info-field.mjs",t)}(),Ti.Preload("ti/com/wn/obj/preview/com/preview-info-field/_com.json",{name:"wn-obj-preview-info-field",globally:!0,template:"./preview-info-field.html",mixins:["./preview-info-field.mjs"]}),Ti.Preload("ti/com/wn/obj/preview/wn-obj-preview.html",'<div class="wn-obj-preview" :class="TopClass">\n  \x3c!--\n    With content\n  --\x3e\n  <div class="wop-con" v-if="hasMeta">\n    \x3c!--Main View--\x3e\n    <component class="as-main"\n      :is="PreviewComType"\n      :icon="DataIcon"\n      :title="DataTitle"\n      :src="DataSource"/>\n    \x3c!--ActionBar at top--\x3e\n    <div class="as-abar">\n      <ul>\n        <li v-for="it in TheActions"\n          @click.left="OnAction(it.action)">\n          <ti-icon class="it-icon" :value="it.icon"/>\n        </li>\n      </ul>\n    </div>\n    \x3c!--Meta at bottom--\x3e\n    <div class="as-info" v-if="isShowInfo">\n      \x3c!--\n        Head\n      --\x3e\n      <div class="info-head">\n        \x3c!--Pin Status Icon--\x3e\n        <span class="it-icon" @click.left="toggleInfoFloat">\n          <ti-icon :value="PreviewInfoPinIcon"/>\n        </span>\n        \x3c!--Head text--\x3e\n        <span class="it-text">{{\'i18n:info\'|i18n}}</span>\n        \x3c!--Edit Button--\x3e\n        <span class="it-edit"\n          @click.left="OnEditInfo">{{\'i18n:edit\'|i18n}}</span>\n      </div>\n      \x3c!--\n        Fields\n      --\x3e\n      <div class="info-field-con">\n        <wn-obj-preview-info-field\n          v-for="fld in PrevewInfoFields"\n          :key="fld.name"\n          v-bind="fld"\n          :data="meta"/>\n      </div>\n    </div>\n  </div>\n  \x3c!--\n    Empty \n  --\x3e\n  <div v-else\n    class="ti-blank is-big">\n    <ti-icon value="fas-file-image"/>\n    <span>{{\'nil-obj\'|i18n}}</span>\n  </div>\n</div>'),function(){var t={data:function(){return{isInFullScreen:!1,isShowInfo:!1,isFloatInfo:!1}},props:{meta:{type:Object,default:function(){return{}}},status:{type:Object,default:function(){return{}}},actions:{type:Array,default:function(){return["fullscreen","newtab","download","info"]}},showInfo:{type:Boolean,default:!1},floatInfo:{type:Boolean,default:!1},editInfoBy:{type:[Function,String],default:null},infoPosition:{type:String,default:"bottom",validator:function(t){return/^(bottom|left)$/.test(t)}},infoNameWidth:{type:[String,Number],default:50},infoValueWidth:{type:[String,Number],default:200},infoFields:{type:Array,default:function(){return["nm","tp","mime","width","height","len","duration"]}},stateLocalKey:{type:String,default:null}},computed:{hasMeta:function(){return!_.isEmpty(this.meta)},TopClass:function(){return _defineProperty({"is-fullscreen":this.isInFullScreen,"is-show-info":this.isShowInfo,"is-float-info":this.isFloatInfo},"is-info-at-".concat(this.infoPosition),!0)},PreviewComType:function(){if(this.meta){var t=this.meta.mime||"";return t.startsWith("video/")?"ti-media-video":t.startsWith("image/")?"ti-media-image":"ti-media-binary"}},PreviewInfoPinIcon:function(){return this.isFloatInfo?"fas-thumbtack":"zmdi-layers"},PrevewInfoFields:function(){var t=this;return Wn.Obj.evalFields(this.meta,this.infoFields,function(e){if(!e.quickName||!_.isUndefined(e.value))return"Group"==e.type?e:_.defaults(e,{nameWidth:t.infoNameWidth,valueWidth:t.infoValueWidth})})},TheActions:function(){var t=this,e=[];return this.hasMeta&&_.forEach(this.actions,function(n){"fullscreen"==n?t.isInFullScreen?e.push({icon:"zmdi-fullscreen-exit",text:"i18n:wop-fullscreen-quit",action:function(){return t.exitFullscreen()}}):e.push({icon:"zmdi-fullscreen",text:"i18n:wop-fullscreen-enter",action:function(){return t.enterFullscreen()}}):"newtab"==n?e.push({icon:"zmdi-open-in-new",text:"i18n:open-newtab",action:function(){return t.openInNewTab()}}):"download"==n?e.push({icon:"zmdi-download",text:"i18n:download-to-local",action:function(){return t.download()}}):"info"==n?t.isShowInfo?e.push({icon:"zmdi-info-outline",text:"i18n:info",action:function(){return t.doHideInfo()}}):e.push({icon:"zmdi-info",text:"i18n:info",action:function(){return t.doShowInfo()}}):_.isPlainObject(n)&&n.action&&e.push(n)}),e},DataSource:function(){if(!this.meta)return"";return Wn.Util.getDownloadLink(this.meta,{mode:"auto"}).toString()},DataIcon:function(){return Wn.Util.getIconObj(this.meta)},DataTitle:function(){return Wn.Util.getObjDisplayName(this.meta)}},methods:{OnAction:function(t){_.isString(t)?Ti.App(this).exec(actionName):_.isFunction(t)&&t()},OnEditInfo:function(){this.meta&&(_.isString(this.editInfoBy)?Ti.App(this).exec(this.editInfoBy,this.meta):_.isFunction(this.editInfoBy)?this.editInfoBy(this.meta):Wn.EditObjMeta(this.meta))},enterFullscreen:function(){this.isInFullScreen=!0,this.resizeMediaViewport()},exitFullscreen:function(){this.isInFullScreen=!1,this.resizeMediaViewport()},doShowInfo:function(){this.isShowInfo=!0,this.saveStateToLocal(),this.resizeMediaViewport()},doHideInfo:function(){this.isShowInfo=!1,this.saveStateToLocal(),this.resizeMediaViewport()},toggleInfoFloat:function(){this.isFloatInfo=!this.isFloatInfo,this.saveStateToLocal(),this.resizeMediaViewport()},resizeMediaViewport:function(){var t,e=this,n=_createForOfIteratorHelper(this.$children);try{var i=function(){var n=t.value;_.isFunction(n.onResizeViewport)&&e.$nextTick(function(){n.onResizeViewport()})};for(n.s();!(t=n.n()).done;)i()}catch(t){n.e(t)}finally{n.f()}},openInNewTab:function(){var t=Wn.Util.getAppLink(this.meta);Ti.Be.OpenLink(t)},download:function(){var t=Wn.Util.getDownloadLink(this.meta);Ti.Be.OpenLink(t)},saveStateToLocal:function(){this.stateLocalKey&&Ti.Storage.session.mergeObject(this.stateLocalKey,{isShowInfo:this.isShowInfo,isFloatInfo:this.isFloatInfo})},loadStateFromLocal:function(){if(this.stateLocalKey){var t=Ti.Storage.session.getObject(this.stateLocalKey);_.defaults(t,{isShowInfo:this.isShowInfo,isFloatInfo:this.isFloatInfo}),this.isShowInfo=t.isShowInfo,this.isFloatInfo=t.isFloatInfo}}},watch:{showInfo:function(t){console.log("showInfo watched"),this.isShowInfo=t},floatInfo:function(t){console.log("floatInfo watched"),this.isFloatInfo=t}},mounted:function(){var t=this;this.isShowInfo=this.showInfo,this.isFloatInfo=this.floatInfo,this.$nextTick(function(){t.loadStateFromLocal()})}};Ti.Preload("ti/com/wn/obj/preview/wn-obj-preview.mjs",t)}(),Ti.Preload("ti/com/wn/obj/preview/_com.json",{name:"wn-obj-preview",globally:!0,i18n:"@i18n:wn-obj-preview",template:"./wn-obj-preview.html",mixins:["./wn-obj-preview.mjs"],components:["./com/preview-info-field","@com:ti/media/binary","@com:ti/media/image","@com:ti/media/video"]}),Ti.Preload("ti/com/wn/obj/puretext/wn-obj-puretext.html",'<div class="wn-obj-puretext">\n  \x3c!--\n    Show Text Editor\n  --\x3e\n  <ti-text-raw v-if="hasMeta"\n    class="ti-fill-parent"\n    :icon="theIcon"\n    :title="theTitle"\n    :show-title="showTitle"\n    :value="content"\n    :content-is-changed="status.changed"\n    :blank-text="blankText"\n    @change="onChangeContent"/>\n  \x3c!--\n    Empty Data\n  --\x3e\n  <div v-else\n    class="ti-blank is-big">\n    <ti-icon value="zmdi-alert-circle-o"/>\n    <span>{{"empty-data"|i18n}}</span>\n  </div>\n</div>'),function(){var t={inheritAttrs:!0,props:{meta:{type:Object,default:function(){return{}}},content:{type:String,default:null},savedContent:{type:String,default:null},contentType:{type:String,default:null},showTitle:{type:Boolean,default:!0},status:{type:Object,default:function(){return{}}},blankText:{type:String,default:"i18n:blank"}},computed:{theIcon:function(){return this.meta?Wn.Util.getIconObj(this.meta):Ti.Icons.get()},theTitle:function(){return this.meta?this.meta.title||this.meta.nm:"no-title"},hasMeta:function(){return!!this.meta}},methods:{onChangeContent:function(t){this.$notify("change",{content:t})}},mounted:function(){var t=this;Ti.Fuse.getOrCreate().add({key:"wn-obj-puretext",everythingOk:function(){return!t.status.changed},fail:function(){Ti.Toast.Open("i18n:wn-obj-nosaved","warn")}})},beforeDestroy:function(){Ti.Fuse.get().remove("wn-obj-puretext")}};Ti.Preload("ti/com/wn/obj/puretext/wn-obj-puretext.mjs",t)}(),Ti.Preload("ti/com/wn/obj/puretext/_com.json",{name:"wn-obj-puretext",globally:!0,template:"./wn-obj-puretext.html",mixins:["./wn-obj-puretext.mjs"],components:["@com:ti/text/raw"]}),Ti.Preload("ti/com/wn/obj/uploader/wn-obj-uploader.html",'<ti-uploader\n  :value="formedValue"/>'),function(){var t={props:{value:{type:[String,Object,Array],default:null},multi:{type:Boolean,default:!0},removable:{type:Boolean,default:!0},remained:{type:Number,default:0},target:{type:String,default:null},nameTransformer:{type:[Function,String,Object],default:null},supportTypes:{type:[Array,String],default:null},imageFilter:{type:[Array,String],default:null},imageQuality:{type:Number,default:0}},computed:{formedValue:function(){return null}},methods:{getObj:function(t){t&&_.isString(t)}}};Ti.Preload("ti/com/wn/obj/uploader/wn-obj-uploader.mjs",t)}(),Ti.Preload("ti/com/wn/obj/uploader/_com.json",{name:"wn-obj-uploader",globally:!0,template:"./wn-obj-uploader.html",mixins:["./wn-obj-uploader.mjs"],components:["@com:ti/uploader"]}),function(){var t={methods:{explainDisplayItems:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=_.concat(t),n=[];return _.forEach(e,function(t){if(!Ti.Util.isNil(t)){if(_.isString(t)){var e=/^@<thumb(:([^>]*))?>$/.exec(t);if(e){var i=e[2]||void 0;return void n.push({key:["icon","thumb","tp","mime","race","__updated_time"],type:"Object",transformer:{name:"Ti.Types.toObject",args:{icon:"icon",thumb:"thumb",type:"tp",mime:"mime",race:"race",timestamp:"__updated_time"}},comType:"wn-obj-icon",comConf:{"...":"${=value}",candidateIcon:i}})}}n.push(t)}}),n}}};Ti.Preload("ti/com/wn/support/wn_list_wrapper_mixins.mjs",t)}(),Ti.Preload("ti/com/wn/table/wn-table.html",'<ti-table\n  v-bind="this"\n  :fields="TheFields"\n  :on-init="OnSubListInit"\n  @select="OnSelected"\n  @open="$notify(\'open\', $event)"/>'),function(){var t={data:function(){return{isAllChecked:!1,hasChecked:!1,theCurrentId:!1,theCheckedIds:!1}},computed:{TheFields:function(){var t,e=[],n=_createForOfIteratorHelper(this.fields);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=_.assign({},i);a.display=this.explainDisplayItems(i.display),e.push(a)}}catch(t){n.e(t)}finally{n.f()}return e}},methods:{OnSubListInit:function(t){this.$list=t},OnSelected:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.theCheckedIds=t.checkedIds,this.theCurrentId=t.currentId,this.syncCheckStatus(),this.$notify("select",t)},syncCheckStatus:function(){this.isAllChecked=this.$list.isAllChecked,this.hasChecked=this.$list.hasChecked},selectPrevRow:function(t){this.$list.selectPrevRow(t)},selectNextRow:function(t){this.$list.selectNextRow(t)},getCurrentRow:function(t){return this.$list.getCurrentRow(t)},getCheckedRow:function(t){return this.$list.getCheckedRow(t)},getCurrent:function(t){return this.$list.getCurrent(t)},getChecked:function(t){return this.$list.getChecked(t)},selectRow:function(t){this.$list.selectRow(t)},checkRow:function(t){this.$list.checkRow(t)},cancelRow:function(t){this.$list.cancelRow(t)}},watch:{data:function(){this.syncCheckStatus()},checkedIds:function(){this.syncCheckStatus()}}};Ti.Preload("ti/com/wn/table/wn-table.mjs",t)}(),Ti.Preload("ti/com/wn/table/_com.json",{name:"wn-table",globally:!0,template:"./wn-table.html",props:["@com:ti/support/list_props.mjs","@com:ti/table/ti-table-props.mjs"],mixins:["@com:wn/support/wn_list_wrapper_mixins.mjs","./wn-table.mjs"],components:["@com:ti/table"]}),Ti.Preload("ti/com/wn/thing/manager/com/thing-creator/thing-creator.html",'<div class="thing-creator ti-box-relative">\n  <ti-form\n    :fields="fields"\n    :only-fields="onlyFields"\n    :fixed="fixed"\n    :data="TheData"\n    :on-init="OnFormInit"\n    @field:change="OnFormFieldChange"\n    @change="OnFormChange"\n    @submit="OnSubmit"/>\n  <hr class="no-space">\n  <div class="ti-flex-center ti-padding-10">\n    <div class="ti-btn is-big" \n      @click="OnCreate">\n      <span>{{\'create-now\'|i18n}}</span>\n    </div>\n  </div>\n  <div v-if="creating"\n    class="ti-box-mask as-thin ti-flex-center">\n    <ti-loading text="i18n:creating"/>\n  </div>\n</div>'),function(){var t={data:function(){return{myData:void 0,creating:!1}},props:{fields:{type:Array,default:function(){return[]}},data:{type:Object,default:function(){return{}}},onlyFields:{type:Boolean,default:!1},fixed:{type:Object,default:void 0}},computed:{TheData:function(){return this.myData||this.data}},methods:{OnFormInit:function(t){this.$form=t},OnFormFieldChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.myData=this.$form.getData(t)},OnFormChange:function(t){this.myData=t},OnCreate:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.creating=!0,e.next=3,Ti.App(t).dispatch("main/create",t.myData);case 3:t.$notify("block:hide","creator");case 4:case"end":return e.stop()}},e)}))()},OnSubmit:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$nextTick(function(){t.OnCreate()});case 1:case"end":return e.stop()}},e)}))()}},mounted:function(){this.myData=this.$form.getData()}};Ti.Preload("ti/com/wn/thing/manager/com/thing-creator/thing-creator.mjs",t)}(),Ti.Preload("ti/com/wn/thing/manager/com/thing-creator/_com.json",{name:"wn-thing-creator",globally:!0,template:"./thing-creator.html",mixins:["./thing-creator.mjs"],components:[]}),function(){var t={dirName:{type:String,default:"media"},dataHome:{type:String,default:null},files:{type:Object,default:void 0},preview:{type:Object,default:void 0},previewEdit:{type:Object,default:void 0},actions:{type:Array,default:function(){return[{name:"reloading",type:"action",icon:"zmdi-refresh",tip:"i18n:refresh",altDisplay:{icon:"zmdi-refresh zmdi-hc-spin"},action:"$parent:reloadData"},{type:"line"},{name:"deleting",type:"action",icon:"zmdi-delete",text:"i18n:del",altDisplay:{icon:"zmdi-refresh zmdi-hc-spin",text:"i18n:del-ing"},action:"$parent:doDeleteSelected"},{type:"line"},{name:"upload",type:"action",icon:"zmdi-cloud-upload",text:"i18n:upload",action:"$parent:doUploadFiles"}]}},stateLocalKey:{type:String,default:null},dirNameTip:{type:String,default:"i18n:thing-files"},dirNameComType:{type:String,default:"ti-droplist"},dirNameOptions:{type:Array,default:function(){return[{icon:"zmdi-collection-image",text:"i18n:media",value:"media"},{icon:"zmdi-attachment-alt",text:"i18n:attachment",value:"attachment"}]}},nilIcon:{type:String,default:"fas-braille"},nilText:{type:String,default:null}};Ti.Preload("ti/com/wn/thing/manager/com/thing-files/thing-files-props.mjs",t)}(),Ti.Preload("ti/com/wn/thing/manager/com/thing-files/thing-files.html",'<div class="wn-thing-files">\n  \x3c!--\n    With Data Home\n  --\x3e\n  <template v-if="dataHome">\n    \x3c!--\n      Head bar for switch dir and actions\n    --\x3e\n    <div class="as-header">\n      <div v-if="dirNameTip"\n        class="as-tip">\n        <span>{{dirNameTip|i18n}}</span>\n      </div>\n      \x3c!--Left: select files home dirName--\x3e\n      <div class="as-name">\n        <component \n          :is="dirNameComType"\n          height=".3rem"\n          :allow-empty="false"\n          :options="dirNameOptions"\n          :value="dirName"\n          :prefix-icon-for-clean="false"\n          @change="OnDirNameChanged"/>\n      </div>\n      \x3c!--Right: Common Actions--\x3e\n      <div class="as-menu">\n        <ti-actionbar \n          :items="actions"\n          :status="myStatus"/>\n      </div>\n    </div>\n    \x3c!--\n      File Preview\n    --\x3e\n    <div class="as-preview">\n      <wn-obj-preview\n        class="ti-fill-parent"\n        v-bind="ThePreview"\n        :meta="CurrentFile"/>\n    </div>\n    \x3c!--\n      File List\n    --\x3e\n    <div class="as-list">\n      <wn-adaptlist\n        class="ti-fill-parent"\n        v-bind="TheFiles"\n        :data="myData"\n        :meta="myDataDirObj"\n        :status="myStatus"\n        :before-upload="checkDataDir"\n        @uploaded="OnFileUploaded"\n        @select="OnFileSelect"\n        @open="OnFileOpen"\n        :on-init="OnAdaptListInit"/>\n    </div>\n  </template>\n  \x3c!--\n    Without Data Home\n  --\x3e\n  <ti-loading\n    v-else\n      class="nil-datahome as-big-mask"\n      :text="nilText"\n      :icon="nilIcon"/>\n</div>'),function(){var t={inject:["$ThingManager"],data:function(){return{myDataDirObj:null,myData:{},myStatus:{reloading:!1},myCurrentId:null}},computed:{hasDataHome:function(){return!!this.dataHome},CurrentFile:function(){if(this.myCurrentId&&this.myData.list){var t,e=_createForOfIteratorHelper(this.myData.list);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(this.myCurrentId==n.id)return n}}catch(t){e.e(t)}finally{e.f()}}},ThePreview:function(){var t=this,e=Ti.Util.getFallback(this.preview,this.dirName,"@default")||this.preview||{};return _objectSpread({showInfo:!1,floatInfo:!1,infoPosition:"left",infoNameWidth:40,infoValueWidth:120,stateLocalKey:this.stateLocalKey},e,{editInfoBy:function(){t.editPreviewInfo()}})},TheFiles:function(){var t=this;return _.assign({},this.files,{routers:{reload:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.reloadData();case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}})}},methods:{OnAdaptListInit:function(t){this.$adaptlist=t},OnDirNameChanged:function(t){var e=this;Ti.App(this).commit("main/setCurrentDataDir",t),this.$nextTick(function(){e.reloadData()})},OnFileSelect:function(t){var e=t.currentId;this.myCurrentId=e},OnFileOpen:function(t){t.id;var e=t.item;this.$notify("file:open",e)},OnFileUploaded:function(){var t=arguments,e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:[],(a=_.first(i))&&(e.$adaptlist.myCurrentId=a.id,e.myCurrentId=a.id),n.next=5,Ti.App(e).dispatch("main/autoSyncCurrentFilesCount");case 5:case"end":return n.stop()}},n)}))()},doDeleteSelected:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$adaptlist.doDelete();case 2:return e.next=4,Ti.App(t).dispatch("main/autoSyncCurrentFilesCount");case 4:case"end":return e.stop()}},e)}))()},checkDataDir:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o,s,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.hasDataHome){e.next=2;break}return e.abrupt("return");case 2:if(t.myDataDirObj){e.next=17;break}return n=t.dataHome.indexOf("/"),i=t.dataHome.substring(0,n),a=Ti.Util.appendPath(t.dataHome.substring(n+1),t.dirName),r={race:"DIR",nm:a},o=JSON.stringify(r),s='obj "'.concat(i,"\" -IfNoExists -new '").concat(o,"' -cqno"),e.next=11,Wn.Sys.exec2(s,{as:"json"});case 11:return c=e.sent,e.next=14,Wn.Io.loadMetaBy(t.dataHome);case 14:l=e.sent,Ti.App(t).commit("main/setCurrentDataHomeObj",l),t.myDataDirObj=c;case 17:case"end":return e.stop()}},e)}))()},doUploadFiles:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.checkDataDir();case 2:if(!t.myDataDirObj){e.next=6;break}t.$adaptlist.openLocalFileSelectdDialog(),e.next=7;break;case 6:throw"Impossible!!!";case 7:case"end":return e.stop()}},e)}))()},editPreviewInfo:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.CurrentFile){e.next=6;break}return n=_.get(t.previewEdit,t.dirName),e.next=4,Wn.EditObjMeta(t.CurrentFile,n);case 4:(i=e.sent)&&i.data&&t.updateItemInDataList(i.data);case 6:case"end":return e.stop()}},e)}))()},updateItemInDataList:function(t){t&&this.myData&&_.isArray(this.myData.list)&&(this.myData.list=_.map(this.myData.list,function(e){return e.id==t.id?t:e}))},reloadData:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.dataHome||!t.dirName){e.next=19;break}return t.myStatus.reloading=!0,n=Ti.Util.appendPath(t.dataHome,t.dirName),e.next=5,Wn.Io.loadMeta(n);case 5:if(i=e.sent){e.next=11;break}t.myDataDirObj=null,t.myData={},e.next=16;break;case 11:return e.next=13,Wn.Io.loadChildren(i);case 13:a=e.sent,t.myDataDirObj=i,t.myData=a;case 16:_.delay(function(){t.myStatus.reloading=!1},100),e.next=21;break;case 19:t.myDataDirObj=null,t.myData={};case 21:case"end":return e.stop()}},e)}))()}},watch:{dataHome:{handler:"reloadData",immediate:!0}},mounted:function(){this.$ThingManager.$files=this}};Ti.Preload("ti/com/wn/thing/manager/com/thing-files/thing-files.mjs",t)}(),Ti.Preload("ti/com/wn/thing/manager/com/thing-files/_com.json",{name:"wn-thing-files",globally:!0,template:"./thing-files.html",props:"./thing-files-props.mjs",mixins:["./thing-files.mjs"],components:["@com:wn/adaptlist"]}),Ti.Preload("ti/com/wn/thing/manager/com/thing-filter/thing-filter.html",'<div class="wn-thing-filter"\n  :class="TopClass">\n  \x3c!--\n    Icon: Recycle Bin\n  --\x3e\n  <div\n    v-if="isInRecycleBin"\n      class="as-recyclebin"\n      @click="OnLeaveRecycleBin"><div>\n        \x3c!--Icon--\x3e\n        <div class="it-icon">\n          <ti-icon value="fas-recycle"/>\n          <ti-icon value="far-arrow-alt-circle-left"/>\n        </div>\n        \x3c!--text--\x3e\n        <div class="it-text">{{\'i18n:thing-recycle-bin\'|i18n}}</div>\n  </div></div>\n  \x3c!--\n    Keyword\n  --\x3e\n  <TiComboFilter\n    class="as-filter"\n    v-bind="filter"\n    :placeholder="placeholder"\n    :value="value.filter"\n    @change="OnFilterChange"/>\n  \x3c!--\n    Sorter\n  --\x3e\n  <TiComboSorter\n    v-if="hasSorter"\n      class="as-sorter"\n      v-bind="sorter"\n      :value="value.sorter"\n      @change="OnSorterChange"/>\n</div>'),function(){var t={data:function(){return{keywordFocus:!1}},props:{filter:{type:Object,default:function(){return{}}},sorter:{type:Object,default:function(){return{}}},placeholder:{type:String,default:"i18n:find-data"},status:{type:Object,default:function(){return{}}},value:{type:Object,default:function(){return{}}}},computed:{TopClass:function(){return this.getTopClass({"in-recyclebin":this.isInRecycleBin})},hasSorter:function(){return!_.isEmpty(this.sorter)},isInRecycleBin:function(){return this.status.inRecycleBin}},methods:{OnFilterChange:function(t){this.$notify("filter::change",t)},OnSorterChange:function(t){this.$notify("sorter::change",t)},OnLeaveRecycleBin:function(){Ti.App(this).dispatch("main/toggleInRecycleBin")}}};Ti.Preload("ti/com/wn/thing/manager/com/thing-filter/thing-filter.mjs",t)}(),Ti.Preload("ti/com/wn/thing/manager/com/thing-filter/_com.json",{name:"wn-thing-filter",globally:!0,template:"./thing-filter.html",mixins:["./thing-filter.mjs"],components:["@com:ti/combo/filter","@com:ti/combo/sorter"]}),Ti.Preload("ti/com/wn/thing/manager/com/thing-markdown-editor/_com.json",{name:"wn-thing-markdown-richeditor",globally:!0,template:"./thing-markdown-richeditor.html",mixins:["./thing-markdown-richeditor.mjs"],components:[]}),function(){var t={batchUpdate:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o,s,c,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!_.isEmpty(t.checkedItems)){e.next=2;break}return e.abrupt("return",Ti.Toast.Open("i18n:batch-none","warn"));case 2:return n=_.first(t.checkedItems),i=_.get(t.config,"schema.behavior.batch")||{},_.defaults(i,{comType:"wn-obj-form",comConf:{},fields:"schema.meta.comConf.fields",names:null,valueKey:"data"}),i.comType=_.kebabCase(i.comType),/^(ti-|wn-obj-)(form)$/.test(i.comType)&&_.defaults(i.comConf,{autoShowBlank:!1,updateBy:!0,setDataBy:!0}),_.isString(i.names)?i.names.startsWith("^")?(r=new RegExp(i.names),a=function(t){return r.test(t.name)}):i.names.startsWith("!^")?(o=new RegExp(i.names.substring(1)),a=function(t){return!o.test(t.name)}):(s=Ti.S.toArray(i.names),a=function(t){return s.indexOf(t.name)>=0}):a=_.isArray(i.names)&&!_.isEmpty(i.names)?function(t){return i.name.indexOf(t)>=0}:function(t){return!/^(wn-upload-file|wn-imgfile)$/.test(t.comType)},c=_.get(t.config,i.fields),l=function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0,a=[],r=_createForOfIteratorHelper(n);try{for(r.s();!(e=r.n()).done;){var o=e.value;if(_.isArray(o.fields)){var s=_.cloneDeep(o);s.fields=t(o.fields,i),_.isEmpty(s.fields)||a.push(s)}else i(o)&&a.push(o)}}catch(t){r.e(t)}finally{r.f()}return a},c=l(c,a),e.next=13,Ti.App.Open({title:"i18n:batch-update",width:640,height:"90%",position:"top",comType:"inner-body",components:[{name:"inner-body",globally:!1,data:{update:{},value:n,innerComConf:_objectSpread({},i.comConf,{fields:c})},template:"<".concat(i.comType,'\n          v-bind="innerComConf"\n          :').concat(i.valueKey,'="value"\n          @field:change="OnFieldChange"\n          @change="OnChange"/>'),methods:{OnFieldChange:function(t){var e=t.name,n=t.value;_.set(this.update,e,n),this.$notify("change",this.update)},OnChange:function(t){this.value=t}}}]});case 13:if(u=e.sent,_.isEmpty(u)){e.next=17;break}return e.next=17,Ti.App(t).dispatch("main/batchUpdateMetas",u);case 17:case"end":return e.stop()}},e)}))()},changeShown:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ti.App(this).dispatch("main/doChangeShown",t)},showBlock:function(t){"creator"==t&&this.status.inRecycleBin?Ti.Alert("i18n:thing-create-in-recyclebin",{title:"i18n:warn",icon:"im-warning",type:"warn"}):("files"==t?Ti.App(this).dispatch("main/reloadFiles"):"content"==t&&Ti.App(this).dispatch("main/current/reload"),Ti.App(this).dispatch("main/doChangeShown",_defineProperty({},t,!0)))},hideBlock:function(t){Ti.App(this).dispatch("main/doChangeShown",_defineProperty({},t,!1))},toggleBlock:function(t){Ti.App(this).dispatch("main/doChangeShown",_defineProperty({},t,!this.TheShown[t]))},invoke:function(t){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=_.get(e.SchemaMethods,t),!_.isFunction(i)){n.next=7;break}return n.next=4,i.apply(e,[]);case 4:return n.abrupt("return",n.sent);case 7:throw Ti.Err.make("e.thing.fail-to-invoke",t);case 8:case"end":return n.stop()}},n)}))()}};Ti.Preload("ti/com/wn/thing/manager/wn-thing-manager-methods.mjs",t)}(),Ti.Preload("ti/com/wn/thing/manager/wn-thing-manager.html",'<ti-gui\n  class="wn-thing"\n  :class="TopClass"\n  v-ti-activable\n  :layout="TheLayout"\n  :schema="TheSchema"\n  :shown="TheShown"\n  :can-loading="true"\n  :loading-as="GuiLoadingAs"\n  :action-status="status"/>'),function(){var t={provide:function(){return{$ThingManager:this}},data:function(){return{myRouting:{}}},props:{meta:{type:Object,default:function(){return{}}},currentDataHome:{type:String,default:void 0},currentDataHomeObj:{type:Object,default:void 0},currentDataDir:{type:String,default:"media"},status:{type:Object,default:function(){return{}}},config:{type:Object,default:function(){return{}}},search:{type:Object,default:function(){return{}}},current:{type:Object,default:function(){return{}}},files:{type:Object,default:function(){return{}}},preview:{type:Object,default:function(){return{}}},emitChange:{type:Boolean,default:!1},keepLastSelection:{type:Boolean,default:!0}},computed:_objectSpread({},Vuex.mapGetters("main/search",["currentItem","checkedItems"]),{TopClass:function(){return this.getTopClass()},TheShown:function(){return _.get(this.config,"shown")||{}},TheKeepLastKey:function(){if(this.keepLastSelection)return _.get(this.meta,"id")+":currentId"},TheLayout:function(){return Ti.Util.explainObj(this,this.config.layout)},TheSchema:function(){return Ti.Util.explainObj(this,this.config.schema)},TheLoadingAs:function(){return _.assign({reloading:{icon:"fas-spinner fa-spin",text:"i18n:loading"},saving:{icon:"zmdi-settings fa-spin",text:"i18n:saving"},deleting:{icon:"zmdi-refresh fa-spin",text:"i18n:del-ing"},publishing:{icon:"zmdi-settings zmdi-hc-spin",text:"i18n:publishing"},restoring:{icon:"zmdi-time-restore zmdi-hc-spin",text:"i18n:thing-restoring"},cleaning:{icon:"zmdi-settings zmdi-hc-spin",text:"i18n:thing-cleaning"}},_.get(this.TheSchema,"loadingAs"))},ChangedRowId:function(){if(this.currentItem&&this.current.status.changed)return this.currentItem.id},GuiLoadingAs:function(){var t=_.findKey(this.status,function(t){return t});return _.get(this.TheLoadingAs,t)},curentThumbTarget:function(){if(this.currentItem){var t=this.meta.id;return"id:".concat(t,"/data/").concat(this.currentItem.id,"/thumb.jpg")}return""},SchemaMethods:function(){return this.TheSchema&&this.TheSchema.methods?Ti.Util.merge({},this.TheSchema.methods):{}},EventRouting:function(){return _.assign({"block:show":"showBlock","block:hide":"hideBlock","block:shown":"changeShown","filter::change":"OnFilterChange","sorter::change":"OnSorterChange","list::select":"OnListSelect","list::open":"OnListOpen","content::change":"OnContentChange","pager::change":"OnPagerChange"},_.get(this.TheSchema,"events"),this.myRouting)}}),methods:{OnFilterChange:function(t){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Ti.App(e).commit("main/search/setFilter",t),n.next=3,Ti.App(e).dispatch("main/reloadSearch");case 3:case"end":return n.stop()}},n)}))()},OnSorterChange:function(){var t=arguments,e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:{},Ti.App(e).commit("main/search/setSorter",i),n.next=4,Ti.App(e).dispatch("main/reloadSearch");case 4:case"end":return n.stop()}},n)}))()},OnListSelect:function(t){var e=t.current,n=t.currentId,i=t.checkedIds,a=t.checked;Ti.App(this).dispatch("main/setCurrentThing",{meta:e,currentId:n,checkedIds:i}),this.emitChange&&this.$emit("change",{current:e,currentId:n,checkedIds:i,checked:a})},OnListOpen:function(t){var e=t.rawData,n=Ti.App(this);n.dispatch("main/config/updateShown",this.config.listOpen),n.dispatch("main/setCurrentThing",{meta:e})},OnContentChange:function(t){var e=Ti.App(this);e.dispatch("main/current/changeContent",t),e.commit("main/syncStatusChanged")},OnPagerChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.pn,n=t.pgsz;Ti.App(this).dispatch("main/search/reloadPage",{pn:e,pgsz:n})},OnViewCurrentSource:function(){this.viewCurrentSource()},addEventRouting:function(t,e){this.$set(this.myRouting,t,e)},removeEventRouting:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=_.omitBy(this.myRouting,function(t,n){return e.indexOf(n)>=0});this.myRouting=i},__on_events:function(t){var e=_.get(this.EventRouting,t);return e||(e=this.$tiEventTryFallback(t,this.EventRouting)),_.isString(e)?_.get(this,e):e},__ti_shortcut:function(t){"ESCAPE"==t&&this.TheShown.creator&&this.hideBlock("creator")}},mounted:function(){this.THING_MANAGER_ROOT=!0;var t=_.get(this.config,"actions");_.isArray(t)&&this.$notify("actions:update",t)}};Ti.Preload("ti/com/wn/thing/manager/wn-thing-manager.mjs",t)}(),Ti.Preload("ti/com/wn/thing/manager/_com.json",{name:"wn-thing-manager",globally:!0,i18n:"@i18n:wn-thing",template:"./wn-thing-manager.html",methods:"./wn-thing-manager-methods.mjs",mixins:["./wn-thing-manager.mjs"],components:["./com/thing-files","./com/thing-filter","./com/thing-creator","./com/thing-files","@com:ti/gui","@com:ti/combo/filter","@com:ti/paging/jumper","@com:wn/table","@com:wn/obj/icon","@com:wn/obj/puretext","@com:wn/obj/preview","@com:wn/obj/form","@com:wn/upload/file"]}),Ti.Preload("ti/com/wn/thing/markdown/richeditor/thing-markdown-richeditor.html",'<WnObjMarkdownRicheditor\n  v-bind="this"\n  :on-init="OnEditorInit"/>'),function(){var t={inject:["$ThingManager"],props:{listenMedia:{type:String,default:"file:open"}},methods:{OnEditorInit:function(t){this.$editor=t}},mounted:function(){var t=this;this.listenMedia&&this.$ThingManager.addEventRouting(this.listenMedia,function(e){t.$editor.insertMediaObj(e)})},beforeDestroy:function(){this.listenMedia&&this.$ThingManager.removeEventRouting(this.listenMedia)}};Ti.Preload("ti/com/wn/thing/markdown/richeditor/thing-markdown-richeditor.mjs",t)}(),Ti.Preload("ti/com/wn/thing/markdown/richeditor/_com.json",{name:"wn-thing-markdown-richeditor",globally:!0,template:"./thing-markdown-richeditor.html",props:["@com:ti/text/markdown/richeditor/ti-markdown-richeditor-props.mjs","@com:wn/obj/markdown/richeditor/wn-markdown-richeditor-props.mjs"],mixins:["./thing-markdown-richeditor.mjs"],components:["@com:wn/obj/markdown/richeditor"]}),Ti.Preload("ti/com/wn/transfer/wn-transfer.html",'<ti-transfer v-bind="this"\n  \n  :options="OptionsDict"\n  :can-com-type="TheCanComType"\n  :sel-com-type="TheSelComType"\n  :display="TheDisplay"\n\n  @change="$notify(\'change\', $event)"/>'),function(){var t={inheritAttrs:!1,data:function(){return{}},props:{itemBy:{type:[String,Function],default:void 0},findBy:{type:[String,Function],default:void 0}},computed:{TheCanComType:function(){return this.canComType||"wn-list"},TheSelComType:function(){return this.selComType||"wn-list"},TheDisplay:function(){return this.display||["@<thumb>","title","nm"]},OptionsDict:function(){return Wn.Dict.evalOptionsDict(this)}}};Ti.Preload("ti/com/wn/transfer/wn-transfer.mjs",t)}(),Ti.Preload("ti/com/wn/transfer/_com.json",{name:"wn-transfer",globally:!0,template:"./wn-transfer.html",props:"@com:ti/transfer/ti-transfer-props.mjs",mixins:["./wn-transfer.mjs"],components:["@com:ti/transfer"]}),Ti.Preload("ti/com/wn/upload/file/wn-upload-file.html",'<TiUploadFile\n  :preview="PreviewIcon"\n  :width="width"\n  :height="height"\n  :progress="progress"\n  :upload-file="uploadFile"\n  :removable="removable"\n  @upload="onUpload"\n  @remove="onRemove"\n  @open="onOpen"/>'),function(){var t={data:function(){return{src_ts:null,oFile:null,uploadFile:null,progress:-1}},props:{value:{type:String,default:null},valueType:{type:String,default:"obj",validator:function(t){return/^(obj|path|fullPath|idPath|id)$/.test(t)}},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},removable:{type:Boolean,default:!0},target:{type:String,default:null},supportTypes:{type:[String,Array],default:function(){return[]}},supportMimes:{type:[String,Array],default:function(){return[]}},filter:{type:[Array,String],default:null},quality:{type:Number,default:0}},computed:{AcceptTypes:function(){return _.isString(this.supportTypes)?this.supportTypes.split(","):this.supportTypes},AcceptMimes:function(){return _.isString(this.supportMimes)?this.supportMimes.split(","):this.supportMimes},ImageFilter:function(){return this.filter?[].concat(this.filter):[]},PreviewIcon:function(){if(this.oFile){if(Wn.Obj.isMime(this.oFile,/^(image\/)/)){var t=["/o/content?str=id:",this.oFile.id];return this.src_ts&&(t.push("&_t="),t.push(this.src_ts)),{type:"image",value:t.join("")}}if(Wn.Obj.isMime(this.oFile,/^(video\/)/)){var e=["/o/content?str=id:",this.oFile.video_cover];return this.src_ts&&(e.push("&_t="),e.push(this.src_ts)),{type:"image",value:e.join("")}}return Wn.Util.getObjIcon(this.oFile)}}},methods:{assertListHas:function(t,e,n,i){return _asyncToGenerator(regeneratorRuntime.mark(function a(){var r,o,s,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(_.isEmpty(t)){a.next=25;break}r=!0,o=_createForOfIteratorHelper(t),a.prev=3,o.s();case 5:if((s=o.n()).done){a.next=12;break}if((c=s.value)!=e){a.next=10;break}return r=!1,a.abrupt("break",12);case 10:a.next=5;break;case 12:a.next=17;break;case 14:a.prev=14,a.t0=a.catch(3),o.e(a.t0);case 17:return a.prev=17,o.f(),a.finish(17);case 20:if(!r){a.next=25;break}return console.log("haha"),a.next=24,Ti.Alert(n,{type:"warn",icon:"zmdi-alert-triangle",vars:i});case 24:return a.abrupt("return",!1);case 25:return a.abrupt("return",!0);case 26:case"end":return a.stop()}},a,null,[[3,14,17,20]])}))()},onOpen:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.oFile){e.next=4;break}return n=Wn.Util.getAppLink(t.oFile),e.next=4,Ti.Be.Open(n.url,{params:n.params});case 4:case"end":return e.stop()}},e)}))()},onRemove:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.oFile){e.next=3;break}return e.next=3,Wn.Sys.exec2("rm id:".concat(t.oFile.id));case 3:t.$notify("change",null);case 4:case"end":return e.stop()}},e)}))()},onUpload:function(t){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=Ti.Util.getSuffixName(t.name),n.next=3,e.assertListHas(e.AcceptTypes,i,"i18n:wn-invalid-types",{current:i,supports:e.AcceptTypes.join(", ")});case 3:if(n.sent){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,e.assertListHas(e.AcceptMimes,t.type,"i18n:wn-invalid-mimes",{current:t.type,supports:e.AcceptMimes.join(", ")});case 7:if(n.sent){n.next=9;break}return n.abrupt("return");case 9:return e.uploadFile=t,e.progress=0,n.next=13,Wn.Io.uploadFile(t,{target:e.target,mode:"r",progress:function(t){e.progress=t.loaded/t.total}});case 13:if(a=n.sent,r=a.ok,o=a.msg,s=a.data,e.uploadFile=null,e.progress=-1,r){n.next=23;break}return n.next=22,Ti.Alert("i18n:".concat(o),{type:"warn",icon:"zmdi-alert-triangle"});case 22:return n.abrupt("return");case 23:if(_.isEmpty(e.ImageFilter)){n.next=30;break}return c=["imagic","id:".concat(s.id),'-filter "'.concat(e.ImageFilter.join(" "),'"')],e.quality>0&&e.quality<=1&&c.push("-qa ".concat(e.quality)),c.push("-out inplace"),l=c.join(" "),n.next=30,Wn.Sys.exec2(l);case 30:e.src_ts=Date.now(),e.oFile=s,u=s,"obj"!=e.valueType&&(u=Wn.Io.formatObjPath(s,e.valueType)),e.$notify("change",u);case 35:case"end":return n.stop()}},n)}))()},reload:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!_.isString(t.value)){e.next=6;break}return e.next=3,Wn.Io.loadMetaBy(t.value);case 3:t.oFile=e.sent,e.next=7;break;case 6:"FILE"==_.get(t.value,"race")?t.oFile=_.cloneDeep(t.value):t.oFile=null;case 7:case"end":return e.stop()}},e)}))()}},watch:{value:function(){this.reload()}},mounted:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.reload();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()};Ti.Preload("ti/com/wn/upload/file/wn-upload-file.mjs",t)}(),Ti.Preload("ti/com/wn/upload/file/_com.json",{name:"wn-upload-file",globally:!0,template:"./wn-upload-file.html",mixins:["./wn-upload-file.mjs"],components:["@com:ti/upload/file"]}),function(){var t={reload:function(t,e){return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,i=t.commit,!n.status.reloading&&!n.status.saving){e.next=3;break}return e.abrupt("return");case 3:case"end":return e.stop()}},e)}))()}};Ti.Preload("ti/mod/hmaker/website/mod/site-config/site-config-actions.mjs",t)}(),Ti.Preload("ti/mod/hmaker/website/mod/site-config/site-config.json",{meta:null,desktop:{mapping:{paths:{"site-state.json":"desktopSiteStateView"},types:{},mimes:{"application/json":"desktopJsonView","text/*, application/*":"desktopTextView"},races:{DIR:"desktopAdaptList",FILE:"desktopObjPreview"}}},tablet:"desktop",phone:"desktop",views:{desktopSiteStateView:{comType:"hmaker-site-state",comConf:{home:"=home",content:"=currentContent"},actions:[{key:"saving",type:"action",icon:"zmdi-floppy",text:"i18n:save-change",altDisplay:{icon:"fas-spinner fa-pulse",text:"i18n:saving"},enableBy:"changed",action:"dispatch:main/saveCurrent",shortcut:"CTRL+S"},{key:"reloading",type:"action",icon:"zmdi-rotate-right",text:"i18n:revoke-change",altDisplay:{icon:"zmdi-refresh zmdi-hc-spin",text:"i18n:loading"},action:"dispatch:main/reloadCurrent"},{type:"Group",icon:"zmdi-more-vert",items:[{type:"action",icon:"zmdi-info-outline",text:"i18n:properties",action:"main:editCurrentObjMeta"}]}]},desktopTextView:{comType:"ti-text-raw",comConf:{showTitle:!1,content:"=currentContent",contentIsChanged:"=status.changed"},actions:[{key:"saving",type:"action",icon:"zmdi-floppy",text:"i18n:save-change",altDisplay:{icon:"fas-spinner fa-pulse",text:"i18n:saving"},enableBy:"changed",action:"dispatch:main/saveCurrent",shortcut:"CTRL+S"},{key:"reloading",type:"action",icon:"zmdi-rotate-right",text:"i18n:revoke-change",altDisplay:{icon:"zmdi-refresh zmdi-hc-spin",text:"i18n:loading"},action:"dispatch:main/reloadCurrent"},{type:"Group",icon:"zmdi-more-vert",items:[{type:"action",icon:"zmdi-info-outline",text:"i18n:properties",action:"main:editCurrentObjMeta"}]}]},desktopJsonView:{comType:"ti-text-json",comConf:{data:"=currentData"},actions:[{key:"saving",type:"action",icon:"zmdi-floppy",text:"i18n:save-change",altDisplay:{icon:"fas-spinner fa-pulse",text:"i18n:saving"},enableBy:"changed",action:"dispatch:main/saveCurrent",shortcut:"CTRL+S"},{key:"reloading",type:"action",icon:"zmdi-rotate-right",text:"i18n:revoke-change",altDisplay:{icon:"zmdi-refresh zmdi-hc-spin",text:"i18n:loading"},action:"dispatch:main/reloadCurrent"},{type:"Group",icon:"zmdi-more-vert",items:[{type:"action",icon:"zmdi-info-outline",text:"i18n:properties",action:"main:editCurrentObjMeta"}]}]},desktopAdaptList:{comType:"wn-adaptlist",comConf:{list:"=currentData.list"}},desktopObjPreview:{comType:"wn-obj-preview",comConf:{meta:"=currentMeta"}}},status:{reloading:!1}}),function(){var t={mutations:{setMeta:function(t,e){t.meta=e},setStatus:function(t,e){t.status=_.assign({},t.status,e)}}};Ti.Preload("ti/mod/hmaker/website/mod/site-config/site-config.mjs",t)}(),Ti.Preload("ti/mod/hmaker/website/mod/site-config/_mod.json",{name:"hmaker-site-config",namespaced:!0,state:"./site-config.json",actions:"./site-config-actions.mjs",mixins:"./site-config.mjs"}),function(){var t={appendNode:function(t,e){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=t.state,a=t.commit,r=t.dispatch,console.log("TODO appendNode",e);case 2:case"end":return n.stop()}},n)}))()},reloadNode:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g,v,b;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.state,a=t.commit,r=t.dispatch,o=e.length>1&&void 0!==e[1]?e[1]:{},s=o.id,c=o.path,l=o.self,u=void 0!==l&&l,d=o.force,m=void 0!==d&&d,h=o.depth,p=void 0===h?1:h,f=_.cloneDeep(i.root),y=!1,g=_.isUndefined(s)?Ti.Trees.getNodeByPath(f,c):Ti.Trees.getNodeById(f,s)){n.next=7;break}return n.abrupt("return");case 7:if(!u){n.next=13;break}return n.next=10,Wn.Io.loadMetaById(g.id);case 10:v=n.sent,g.rawData=v,y=!0;case 13:return b=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(e,n){var i,a,r,o,s,c,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n>0)||e.leaf){t.next=29;break}if(n--,!m&&!_.isEmpty(e.children)){t.next=29;break}return i=[],t.next=6,Wn.Io.loadChildren(e.rawData);case 6:a=t.sent,r=a.list,o=_createForOfIteratorHelper(r),t.prev=9,o.s();case 11:if((s=o.n()).done){t.next=19;break}return c=s.value,l=Wn.Util.wrapTreeNode(c),t.next=16,b(l,n);case 16:i.push(l);case 17:t.next=11;break;case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(9),o.e(t.t0);case 24:return t.prev=24,o.f(),t.finish(24);case 27:return e.children=i,t.abrupt("return",!0);case 29:return t.abrupt("return",!1);case 30:case"end":return t.stop()}},t,null,[[9,21,24,27]])}));return function(e,n){return t.apply(this,arguments)}}(),n.t0=y,n.next=17,b(g,p);case 17:(y=n.t0|=n.sent)&&a("setRoot",f);case 19:case"end":return n.stop()}},n)}))()},reloadRoot:function(t,e){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.state,a=t.commit,r=t.dispatch,o=Wn.Util.wrapTreeNode(e),a("setRoot",o),n.next=5,r("reloadNode");case 5:if(_.isEmpty(i.root.children)){n.next=26;break}s=_.keys(i.openedNodePaths).sort(),c=_createForOfIteratorHelper(s),n.prev=8,c.s();case 10:if((l=c.n()).done){n.next=18;break}if(u=l.value,!(d=Ti.Trees.getByPath(i.root,u))||d.node.leaf){n.next=16;break}return n.next=16,r("reloadNode",{path:d.path});case 16:n.next=10;break;case 18:n.next=23;break;case 20:n.prev=20,n.t0=n.catch(8),c.e(n.t0);case 23:return n.prev=23,c.f(),n.finish(23);case 26:case"end":return n.stop()}},n,null,[[8,20,23,26]])}))()}};Ti.Preload("ti/mod/hmaker/website/mod/site-tree/site-tree-actions.mjs",t)}(),Ti.Preload("ti/mod/hmaker/website/mod/site-tree/site-tree.json",{root:{},currentId:null,openedNodePaths:{}}),function(){var t={mutations:{setRoot:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_.isEqual(t.root,e)||(t.root=e)},setCurrentId:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.currentId=e},setOpenedNodePaths:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.openedNodePaths=_.cloneDeep(e)}}};Ti.Preload("ti/mod/hmaker/website/mod/site-tree/site-tree.mjs",t)}(),Ti.Preload("ti/mod/hmaker/website/mod/site-tree/_mod.json",{name:"hmaker-site-tree",namespaced:!0,state:"./site-tree.json",actions:"./site-tree-actions.mjs",mixins:"./site-tree.mjs"}),function(){var t={setTreeOpenedNodePaths:function(t){var e=t.getters,n=t.commit,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.TREE_OPEND_KEY&&(n("tree/setOpenedNodePaths",i=_.pickBy(i,function(t){return t})),Ti.Storage.session.setObject(e.TREE_OPEND_KEY,i))},setTreeSelected:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.getters,a=t.commit,r=t.dispatch,o=e.length>1&&void 0!==e[1]?e[1]:null,!i.TREE_SELECTED_KEY){n.next=15;break}if(a("tree/setCurrentId",o),Ti.Storage.session.set(i.TREE_SELECTED_KEY,o),a("setStatus",{reloading:!0}),s=null,!o){n.next=11;break}return n.next=10,Wn.Io.loadMetaById(o);case 10:s=n.sent;case 11:return n.next=13,r("current/reload",s);case 13:a("setStatus",{reloading:!1}),a("syncStatusChanged");case 15:case"end":return n.stop()}},n)}))()},onCurrentChanged:function(t,e){var n=t.commit;(0,t.dispatch)("current/onChanged",e),n("syncStatusChanged")},saveCurrent:function(t){return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,i=t.commit,a=t.dispatch,!n.current.meta){e.next=7;break}return i("setStatus",{saving:!0}),e.next=5,a("current/save");case 5:i("setStatus",{saving:!1}),i("syncStatusChanged");case 7:case"end":return e.stop()}},e)}))()},reloadCurrent:function(t,e){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.commit,a=t.dispatch,i("setStatus",{reloading:!0}),n.next=4,a("current/reload",e);case 4:i("setStatus",{reloading:!1}),i("syncStatusChanged");case 6:case"end":return n.stop()}},n)}))()},reloadConfig:function(t){return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,i=t.dispatch,e.next=3,i("config/reload");case 3:case"end":return e.stop()}},e)}))()},reloadTree:function(t){return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getters,i=t.state,a=t.commit,r=t.dispatch,n.TREE_OPEND_KEY&&(o=Ti.Storage.session.getObject(n.TREE_OPEND_KEY),a("tree/setOpenedNodePaths",o)),e.next=4,r("tree/reloadRoot",i.home);case 4:if(!n.TREE_SELECTED_KEY){e.next=10;break}if(s=Ti.Storage.session.getString(n.TREE_SELECTED_KEY),a("tree/setCurrentId",s),!s){e.next=10;break}return e.next=10,r("setTreeSelected",s);case 10:case"end":return e.stop()}},e)}))()},reloadTreeNode:function(t,e){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.commit,a=t.dispatch,i("setStatus",{reloading:!0}),n.next=4,a("tree/reloadNode",e);case 4:i("setStatus",{reloading:!1});case 5:case"end":return n.stop()}},n)}))()},reload:function(t,e){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.state,a=t.commit,r=t.dispatch,e?a("setHome",e):e=i.home,a("setStatus",{reloading:!0}),n.next=5,r("reloadConfig");case 5:return n.next=7,r("reloadTree");case 7:a("setStatus",{reloading:!1});case 8:case"end":return n.stop()}},n)}))()}};Ti.Preload("ti/mod/hmaker/website/website-actions.mjs",t)}(),Ti.Preload("ti/mod/hmaker/website/website.json",{home:null,status:{reloading:!1,doing:!1,saving:!1,deleting:!1,changed:!1,publishing:!1,exposeHidden:!1}}),function(){var t={getters:{TREE_OPEND_KEY:function(t){if(t.home)return"website_tree_openeds_".concat(t.home.id)},TREE_SELECTED_KEY:function(t){if(t.home)return"website_tree_selected_".concat(t.home.id)}},mutations:{setHome:function(t,e){t.home=e},setStatus:function(t,e){t.status=_.assign({},t.status,e)},setExposeHidden:function(t,e){t.status.exposeHidden=e},syncStatusChanged:function(t){t.current&&(t.status.changed=t.current.status.changed)}}};Ti.Preload("ti/mod/hmaker/website/website.mjs",t)}(),Ti.Preload("ti/mod/hmaker/website/_mod.json",{name:"hmaker-website",namespaced:!0,state:"./website.json",actions:"./website-actions.mjs",mixins:"./website.mjs",modules:{tree:"./mod/site-tree",config:"./mod/site-config",current:"@mod:wn/obj-current"}}),Ti.Preload("ti/mod/ti/viewport/ti-viewport.json",{mode:"desktop",activedIds:[]}),function(){var t={getters:{viewportMode:function(t){return t.mode},viewportActivedComIds:function(t){return t.activedIds},isViewportModeDesktop:function(t){return"desktop"==t.mode},isViewportModeTablet:function(t){return"tablet"==t.mode},isViewportModePhone:function(t){return"phone"==t.mode},isViewportModeDesktopOrTablet:function(t){return"desktop"==t.mode||"tablet"==t.mode},isViewportModePhoneOrTablet:function(t){return"phone"==t.mode||"tablet"==t.mode}},mutations:{setMode:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"desktop";t.mode=e},setActivedIds:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.activedIds=_.cloneDeep(e)}}};Ti.Preload("ti/mod/ti/viewport/ti-viewport.mjs",t)}(),Ti.Preload("ti/mod/ti/viewport/_mod.json",{state:"./ti-viewport.json",mixins:"./ti-viewport.mjs"}),function(){var t={onChanged:function(t,e){(0,t.dispatch)("changeContent",e)},changeContent:function(t,e){var n=t.commit;n("setContent",e),n("syncStatusChanged")},changeMeta:function(t){var e=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.name,a=n.value;if(i){e("mergeMeta",_.set({},i,a)),e("syncStatusChanged")}},updateContent:function(t,e){var n=t.state,i=t.commit;i("setContent",e),n.meta&&"FILE"==n.meta.race&&i("setSavedContent",e),i("syncStatusChanged")},openMetaEditor:function(t){return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,i=t.dispatch,n.meta){e.next=5;break}return e.next=4,Ti.Toast.Open("i18n:empty-data","warn");case 4:return e.abrupt("return",e.sent);case 5:return e.next=7,Wn.EditObjMeta(n.meta,{fields:"auto"});case 7:if(a=e.sent,!_.isUndefined(a)){e.next=10;break}return e.abrupt("return");case 10:if(!a.saved){e.next=13;break}return e.next=13,i("reload",a.data);case 13:case"end":return e.stop()}},e)}))()},openContentEditor:function(t){return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,i=t.dispatch,n.meta){e.next=5;break}return e.next=4,Ti.Toast.Open("i18n:empty-data","warn");case 4:return e.abrupt("return",e.sent);case 5:return e.next=7,Wn.EditObjContent(n.meta,{content:n.content});case 7:if(a=e.sent,!_.isUndefined(a)){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,i("changeContent",a);case 12:case"end":return e.stop()}},e)}))()},updateMeta:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.commit,a=t.dispatch,r=e.length>1&&void 0!==e[1]?e[1]:{},o=r.name,s=r.value,c=Ti.Types.toObjByPair({name:o,value:s}),n.next=5,a("updateMetas",c);case 5:case"end":return n.stop()}},n)}))()},updateMetas:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.state,a=t.commit,r=e.length>1&&void 0!==e[1]?e[1]:{},!_.isMatchWith(i.meta,r,_.isEqual)){n.next=4;break}return n.abrupt("return");case 4:return _.forEach(r,function(t,e){a("setFieldStatus",{name:e,type:"spinning",text:"i18n:saving"})}),o=JSON.stringify(r),s=i.meta.th_set,c=i.meta.id,l="thing ".concat(s," update ").concat(c," -fields -cqn"),n.next=11,Wn.Sys.exec2(l,{input:o,as:"json"});case 11:u=n.sent,(d=u instanceof Error)||Ti.Util.isNil(u)||a("setMeta",u),_.forEach(r,function(t,e){d?a("setFieldStatus",{name:e,type:"warn",text:u.message||"i18n:fail"}):(a("setFieldStatus",{name:e,type:"ok",text:"i18n:ok"}),_.delay(function(){a("clearFieldStatus",e)},500))});case 15:case"end":return n.stop()}},n)}))()},save:function(t){return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,i=t.commit,!n.status.saving&&n.status.changed){e.next=3;break}return e.abrupt("return");case 3:return i("setStatus",{saving:!0}),a=n.meta,r=n.content,e.next=8,Wn.Io.saveContentAsText(a,r);case 8:return o=e.sent,i("setStatus",{saving:!1}),i("setMeta",o),i("setSavedContent",r),i("syncStatusChanged"),e.abrupt("return",o);case 14:case"end":return e.stop()}},e)}))()},reload:function(t,e){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.state,a=t.commit,r=t.dispatch,!i.status.reloading&&!i.status.saving){n.next=3;break}return n.abrupt("return");case 3:if(_.isUndefined(e)&&(e=i.meta),!_.isString(e)){n.next=8;break}return n.next=7,Wn.Io.loadMeta(e);case 7:e=n.sent;case 8:if(e){n.next=12;break}return a("setMeta",null),a("setContent",null),n.abrupt("return");case 12:if(o=null,a("setStatus",{reloading:!0}),"FILE"!=e.race){n.next=20;break}return n.next=17,Wn.Io.loadContent(e);case 17:o=n.sent,n.next=24;break;case 20:if("DIR"!=e.race){n.next=24;break}return n.next=23,Wn.Io.loadChildren(e);case 23:o=n.sent;case 24:a("setStatus",{reloading:!1}),a("setMeta",e),a("clearFieldStatus"),r("updateContent",o);case 28:case"end":return n.stop()}},n)}))()}};Ti.Preload("ti/mod/wn/obj-current/m-obj-current-actions.mjs",t)}(),Ti.Preload("ti/mod/wn/obj-current/m-obj-current.json",{meta:null,content:null,data:null,__saved_content:null,status:{changed:!1,saving:!1,reloading:!1},fieldStatus:{}}),function(){var t={mutations:{setMeta:function(t,e){t.meta=e},assignMeta:function(t,e){t.meta=_.assign({},t.meta,e)},mergeMeta:function(t,e){t.meta=_.merge({},t.meta,e)},setContent:function(t,e){var n=t.meta;if(!n||Ti.Util.isNil(e))return t.content=null,t.data=null,t.__saved_content=null,void(t.status.changed=!1);if("DIR"==n.race)t.content=null,t.__saved_content=null,t.data=e;else if("FILE"==n.race)if(_.isString(e))if(t.content=e,Wn.Util.isMimeJson(n.mime))try{t.data=JSON.parse(e)}catch(e){t.data=null}else Wn.Util.isMimeText(n.mime)&&(t.data=null);else t.content=JSON.stringify(e,null,"  "),Wn.Util.isMimeJson(n.mime)?t.data=e:Wn.Util.isMimeText(n.mime)&&(t.data=null)},setData:function(t,e){t.data=e},setSavedContent:function(t,e){t.__saved_content=e},setStatus:function(t,e){t.status=_.assign({},t.status,e)},syncStatusChanged:function(t){Ti.Util.isNil(t.content)&&Ti.Util.isNil(t.__saved_content)?t.status.changed=!1:t.status.changed=!_.isEqual(t.content,t.__saved_content)},setFieldStatus:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.name,i=e.type,a=e.text;if(n){var r=_.concat(n).join("-");Vue.set(t.fieldStatus,r,{type:i,text:a})}},clearFieldStatus:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];_.isEmpty(e)?t.fieldStatus={}:t.fieldStatus=_.omit(t.fieldStatus,e)}}};Ti.Preload("ti/mod/wn/obj-current/m-obj-current.mjs",t)}(),Ti.Preload("ti/mod/wn/obj-current/_mod.json",{name:"wn-obj-current",namespaced:!0,state:"./m-obj-current.json",actions:"./m-obj-current-actions.mjs",mixins:"./m-obj-current.mjs"}),function(){var t={updateMeta:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.state,a=t.commit,r=e.length>1&&void 0!==e[1]?e[1]:{},o=r.name,s=r.value,c=Ti.Types.toObjByPair({name:o,value:s}),!_.isMatchWith(i.meta,c,_.isEqual)){n.next=5;break}return n.abrupt("return");case 5:return a("setStatus",{saving:!0}),a("setFieldStatus",{name:o,status:"spinning"}),l=JSON.stringify(c),u=i.meta.id,d="obj 'id:".concat(u,"' -ocqn -u"),n.next=12,Wn.Sys.exec2(d,{input:l,as:"json"});case 12:return m=n.sent,a("setMeta",m),a("clearFieldStatus",o),a("setStatus",{saving:!1}),n.abrupt("return",m);case 17:case"end":return n.stop()}},n)}))()},loadMetaById:function(t,e){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:(i=t.dispatch)("loadMeta","id:".concat(e));case 2:case"end":return n.stop()}},n)}))()},loadMeta:function(t,e){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.state,a=t.commit,e){n.next=5;break}a("reset"),n.next=11;break;case 5:return a("setStatus",{reloading:!0}),n.next=8,Wn.Io.loadMeta(e);case 8:r=n.sent,a("setMeta",r),a("setStatus",{reloading:!1});case 11:case"end":return n.stop()}},n)}))()},loadAncestors:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.state,a=t.commit,r=e.length>1&&void 0!==e[1]?e[1]:i.meta,a("setStatus",{reloading:!0}),n.next=5,Wn.Io.loadAncestors("id:"+r.id);case 5:o=n.sent,s=_.last(o),a("setMeta",r),a("setParent",s),a("setAncestors",o),a("setStatus",{reloading:!1});case 11:case"end":return n.stop()}},n)}))()},reload:function(t,e){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.state,a=t.dispatch,!_.isString(e)){n.next=8;break}return n.next=4,a("loadMeta",e);case 4:return n.next=6,a("loadAncestors");case 6:n.next=11;break;case 8:if(!_.isPlainObject(e)){n.next=11;break}return n.next=11,a("loadAncestors",e);case 11:return n.abrupt("return",i.meta);case 12:case"end":return n.stop()}},n)}))()}};Ti.Preload("ti/mod/wn/obj-meta/m-obj-meta-actions.mjs",t)}(),Ti.Preload("ti/mod/wn/obj-meta/m-obj-meta.json",{ancestors:[],parent:null,meta:null,status:{changed:!1,saving:!1,reloading:!1},fieldStatus:{}}),function(){var t={getters:{get:function(t){return t},getHome:function(t){var e=t.meta,n=t.ancestors;if(_.isEmpty(n)){if(e&&"root"==e.nm)return e}else{if(1==n.length&&"home"==n[0].nm)return e;if("home"==n[0].nm)return n[1]}return null},hasParent:function(t){return!!t.parent},parentIsHome:function(t){return!(_.isEmpty(t.ancestors)||!t.parent||!t.meta||!/^\/home\//.test(t.meta.ph))&&t.parent.pid==t.ancestors[0].id},isHome:function(t){return!(_.isEmpty(t.ancestors)||!t.meta||!/^\/home\//.test(t.meta.ph))&&t.meta.pid==t.ancestors[0].id}},mutations:{reset:function(t){_.assign(t,{ancestors:[],parent:null,meta:null,status:{changed:!1,saving:!1,reloading:!1},fieldStatus:{}})},setAncestors:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.ancestors=_.concat(e)},setParent:function(t,e){t.parent=e},setMeta:function(t,e){t.meta=e},setFieldStatus:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.name,i=e.message,a=e.status;if(n){var r=a?{status:a,message:i}:null,o=_.concat(n).join("-");Vue.set(t.fieldStatus,o,r)}},clearFieldStatus:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];_.isEmpty(e)?t.fieldStatus={}:t.fieldStatus=_.omit(t.fieldStatus,e)},setStatus:function(t,e){t.status=_.assign({},t.status,e)}}};Ti.Preload("ti/mod/wn/obj-meta/m-obj-meta.mjs",t)}(),Ti.Preload("ti/mod/wn/obj-meta/_mod.json",{state:"./m-obj-meta.json",actions:"./m-obj-meta-actions.mjs",mixins:"./m-obj-meta.mjs"}),Ti.Preload("ti/mod/wn/session/m-session.json",{id:null,grp:null,du:-1,expi:0,pwd:"~",ticket:null,uid:null,unm:null,me:null,envs:{}}),function(){var t={getters:{get:function(t){return t}},mutations:{set:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.id=e.id,t.grp=e.grp,t.du=e.du,t.expi=e.expi,t.pwd=e.pwd,t.ticket=e.ticket,t.uid=e.uid,t.unm=e.unm,t.me=e.me,t.envs=_.cloneDeep(e.envs)}},actions:{reload:function(){_.delay(function(){console.log("hahah")},1e3)}}};Ti.Preload("ti/mod/wn/session/m-session.mjs",t)}(),Ti.Preload("ti/mod/wn/session/_mod.json",{state:"./m-session.json",mixins:["./m-session.mjs"]}),function(){var t={saveCurrent:function(t){return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.commit,i=t.dispatch,n("setStatus",{saving:!0}),e.next=4,i("current/save");case 4:n("setStatus",{saving:!1}),n("syncStatusChanged");case 6:case"end":return e.stop()}},e)}))()},updateCurrent:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.state,a=t.commit,r=t.dispatch,o=t.getters,s=e.length>1&&void 0!==e[1]?e[1]:{},c=s.name,l=s.value,!o.hasCurrent){n.next=6;break}return n.next=5,r("current/updateMeta",{name:c,value:l});case 5:a("search/updateItem",i.current.meta);case 6:case"end":return n.stop()}},n)}))()},updateCurrentMetas:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.state,a=t.commit,r=t.dispatch,o=t.getters,s=e.length>1&&void 0!==e[1]?e[1]:{},!o.hasCurrent){n.next=6;break}return n.next=5,r("current/updateMetas",s);case 5:a("search/updateItem",i.current.meta);case 6:case"end":return n.stop()}},n)}))()},batchUpdateMetas:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.state,a=t.commit,r=t.getters,o=e.length>1&&void 0!==e[1]?e[1]:{},s=r["search/checkedItems"],!_.isEmpty(s)&&!_.isEmpty(o)){n.next=5;break}return n.abrupt("return");case 5:a("setStatus",{reloading:!0}),c=_.get(i.current,"meta.id"),l=JSON.stringify(o),u=i.meta.id,d=_createForOfIteratorHelper(s),n.prev=10,d.s();case 12:if((m=d.n()).done){n.next=22;break}return h=m.value,p="thing ".concat(u," update ").concat(h.id," -fields -cqn"),n.next=17,Wn.Sys.exec2(p,{as:"json",input:l});case 17:f=n.sent,a("search/updateItem",f),f.id==c&&a("current/setMeta",f);case 20:n.next=12;break;case 22:n.next=27;break;case 24:n.prev=24,n.t0=n.catch(10),d.e(n.t0);case 27:return n.prev=27,d.f(),n.finish(27);case 30:a("setStatus",{reloading:!1});case 31:case"end":return n.stop()}},n,null,[[10,24,27,30]])}))()},setCurrentMeta:function(t,e){var n=t.state,i=t.commit;i("current/setMeta",e),i("syncStatusChanged"),i("search/updateItem",n.current.meta)},setCurrentContent:function(t,e){var n=t.state,i=t.commit;(0,t.dispatch)("current/onChanged",e),i("syncStatusChanged"),i("search/updateItem",n.current.meta)},autoSyncCurrentFilesCount:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.state,a=t.commit,r=t.dispatch,o=e.length>1&&void 0!==e[1]?e[1]:{},s=o.quiet,c=void 0===s||s,l=i.current.meta,u=i.currentDataDir){n.next=7;break}return console.warn("thing file -ufc without 'dirName'"),n.abrupt("return",Ti.Toast.Open("thing file -ufc without 'dirName'"));case 7:if(!(l&&l.id&&u)){n.next=19;break}return a("setStatus",{reloading:!0}),d=l.th_set,m="thing ".concat(d," file ").concat(l.id," -dir '").concat(u,"' -ufc -cqn"),n.next=13,Wn.Sys.exec2(m,{as:"json"});case 13:if(h=n.sent,r("setCurrentMeta",h),a("setStatus",{reloading:!1}),c){n.next=19;break}return n.next=19,Ti.Toast.Open("i18n:wn-th-recount-media-done",{vars:{n:h.th_media_nb||0}});case 19:case"end":return n.stop()}},n)}))()},toggleInRecycleBin:function(t){return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,i=t.commit,a=t.dispatch,r=t.getters,o=!r.isInRecycleBin,i("search/setInRecycleBin",o),i("setStatus",{inRecycleBin:o,reloading:!0}),e.next=6,a("search/reload");case 6:i("setStatus",{reloading:!1});case 7:case"end":return e.stop()}},e)}))()},create:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.state,a=t.commit,r=t.dispatch,o=e.length>1&&void 0!==e[1]?e[1]:{},s=_.get(i.config,"schema.behavior.create")||{},c=s.unique,l=s.after,u=s.fixed,d=JSON.stringify(o),m=i.meta.id,h=["thing ".concat(m," create -cqn -fields")],!_.isEmpty(c)&&_.isString(c)&&h.push(" -unique '".concat(c,"'")),!_.isEmpty(u)&&_.isString(c)&&h.push(" -fixed '".concat(JSON.stringify(u),"'")),!_.isEmpty(l)&&_.isString(l)&&h.push(" -after '".concat(l,"'")),a("setStatus",{reloading:!0}),p=h.join(" "),n.next=14,Wn.Sys.exec2(p,{input:d,as:"json"});case 14:if(!(f=n.sent)||f instanceof Error){n.next=19;break}return a("search/prependToList",f),n.next=19,r("setCurrentThing",{meta:f});case 19:return a("setStatus",{reloading:!1}),n.abrupt("return",f);case 21:case"end":return n.stop()}},n)}))()},removeChecked:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.state,a=t.commit,r=t.dispatch,o=t.getters,s=e.length>1&&void 0!==e[1]&&e[1],c=_.cloneDeep(i.search.checkedIds),!_.isEmpty(c)){n.next=7;break}return n.next=6,Ti.Alert("i18n:del-none");case 6:return n.abrupt("return",n.sent);case 7:return l=_.get(i,"config.schema.behavior")||{},s|=l.hardRemove,a("setStatus",{deleting:!0}),u={},d=i.meta.id,m="thing ".concat(d," delete ").concat(s?"-hard":""," -cqn -l ").concat(c.join(" ")),n.next=15,Wn.Sys.exec2(m,{as:"json",errorAs:function(t){var e=t.data,n=_.trim(e);u[n]=!0}});case 15:return h=n.sent,p=_.filter(c,function(t){return!u[t]}),console.log("removeIds:",p),_.isEmpty(p)||a("search/removeItems",p),f=o["search/currentItem"],n.next=22,r("setCurrentThing",{meta:f});case 22:a("setStatus",{deleting:!1});case 23:case"end":return n.stop()}},n)}))()},restoreRecycleBin:function(t){return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o,s,c,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,i=t.commit,a=t.dispatch,r=t.getters,o=n.search.checkedIds,!_.isEmpty(o)){e.next=6;break}return e.next=5,Ti.Alert("i18n:thing-restore-none");case 5:return e.abrupt("return",e.sent);case 6:return i("setStatus",{restoring:!0}),s=n.meta.id,c="thing ".concat(s," restore -quiet -cqn -l ").concat(o.join(" ")),e.next=11,Wn.Sys.exec2(c,{as:"json"});case 11:return l=e.sent,e.next=14,a("search/reload");case 14:return u=r["search/currentItem"],e.next=17,a("current/reload",u);case 17:i("setStatus",{restoring:!1});case 18:case"end":return e.stop()}},e)}))()},cleanRecycleBin:function(t){return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,i=t.commit,a=t.dispatch,i("setStatus",{cleaning:!0}),r=n.meta.id,o="thing ".concat(r," clean -limit 3000"),e.next=6,Wn.Sys.exec2(o);case 6:return i("setStatus",{cleaning:!1}),e.next=9,a("reload");case 9:case"end":return e.stop()}},e)}))()},openMetaEditor:function(t){return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,i=t.getters,a=t.dispatch,n.meta){e.next=5;break}return e.next=4,Ti.Toast.Open("i18n:empty-data","warn");case 4:return e.abrupt("return",e.sent);case 5:if(!i.hasCurrent){e.next=16;break}return e.next=8,Wn.EditObjMeta(n.current.meta,{fields:"default",autoSave:!1});case 8:if(r=e.sent,!_.isUndefined(r)){e.next=11;break}return e.abrupt("return");case 11:if(o=r.updates,_.isEmpty(o)){e.next=15;break}return e.next=15,a("updateCurrentMetas",o);case 15:return e.abrupt("return");case 16:return e.next=18,Wn.EditObjMeta(n.meta,{fields:"auto",autoSave:!0});case 18:case"end":return e.stop()}},e)}))()},openContentEditor:function(t){return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,i=t.getters,a=t.dispatch,n.meta){e.next=5;break}return e.next=4,Ti.Toast.Open("i18n:empty-data","warn");case 4:return e.abrupt("return",e.sent);case 5:if(!i.hasCurrent){e.next=14;break}return e.next=8,Wn.EditObjContent(n.current.meta,{content:n.current.content});case 8:if(r=e.sent,!_.isUndefined(r)){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,a("current/changeContent",r);case 13:return e.abrupt("return");case 14:return e.next=16,Ti.Toast.Open("i18n:nil-obj","warn");case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}},e)}))()},reloadFiles:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g,v,b;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.state,a=t.commit,r=t.dispatch,o=t.getters,s=e.length>1&&void 0!==e[1]?e[1]:{},c=s.force,l=void 0!==c&&c,u=_.get(i.current,"meta"),d=_.get(u,"id"),m=i.filesName,d&&m){n.next=9;break}a("files/reset"),n.next=24;break;case 9:if(h=i.meta.id,(p=i.files.meta)&&p.ph&&p.ph.endsWith("/data/".concat(d,"/").concat(m))){n.next=22;break}return f="id:".concat(h,"/data"),y="".concat(d,"/").concat(m),g={race:"DIR",nm:y},v=JSON.stringify(g),b='obj "'.concat(f,"\" -IfNoExists -new '").concat(v,"' -cqno"),n.next=19,Wn.Sys.exec2(b,{as:"json"});case 19:if(p=n.sent){n.next=22;break}return n.abrupt("return");case 22:return n.next=24,r("files/reload",p);case 24:case"end":return n.stop()}},n)}))()},reloadSearch:function(t){return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o,s,c,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,i=t.commit,a=t.dispatch,r=n.meta,i("setStatus",{reloading:!0}),e.next=5,a("search/reload",r);case 5:if(!n.current.meta){e.next=28;break}o=n.current.meta.id,s=null,c=_createForOfIteratorHelper(n.search.list),e.prev=9,c.s();case 11:if((l=c.n()).done){e.next=18;break}if((u=l.value).id!=o){e.next=16;break}return s=u,e.abrupt("break",18);case 16:e.next=11;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),c.e(e.t0);case 23:return e.prev=23,c.f(),e.finish(23);case 26:return e.next=28,a("setCurrentThing",{meta:s});case 28:i("setStatus",{reloading:!1});case 29:case"end":return e.stop()}},e,null,[[9,20,23,26]])}))()},setCurrentThing:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.state,a=t.commit,r=t.dispatch,o=e.length>1&&void 0!==e[1]?e[1]:{},s=o.meta,c=void 0===s?null:s,l=o.checkedIds,u=void 0===l?{}:l,d=c?c.id:null,m=Ti.Util.truthyKeys(u),Ti.Util.isNil(d)||m.push(d),a("search/setCurrentId",d),a("search/setCheckedIds",m),h=i.meta,p=d?"id:".concat(h.id,"/data/").concat(d):null,a("setCurrentDataHome",p),n.next=12,Wn.Io.loadMeta(p);case 12:return f=n.sent,a("setCurrentDataHomeObj",f),y="".concat(h.id,":currentId"),_.get(i.config.schema,"keepLastOff")?Ti.Storage.session.remove(y):Ti.Storage.session.set(y,d),n.next=18,r("current/reload",c);case 18:case"end":return n.stop()}},n)}))()},doChangeShown:function(t,e){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=t.state,a=t.commit,(r=t.dispatch)("config/updateShown",e);case 2:case"end":return n.stop()}},n)}))()},reload:function(t,e){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.state,a=t.commit,r=t.dispatch,e?a("setMeta",e):e=i.meta,o=e,a("setStatus",{reloading:!0}),n.next=6,r("config/reload",e);case 6:return s=Ti.Storage.session.getObject(e.id)||{},_.defaults(s,{filter:{},sorter:{},pager:{}}),c=_.get(i.config.schema,"behavior.filter")||{},c=_.assign({},c,s.filter),_.isEmpty(c)||a("search/setFilter",c),l=_.get(i.config.schema,"behavior.sorter")||{},_.isEmpty(s.sorter)?_.isEmpty(l)||a("search/setSorter",l):a("search/setSorter",s.sorter),_.isEmpty(s.pager)||a("search/setPager",s.pager),n.next=16,r("reloadSearch");case 16:if(!_.get(i,"meta.th_auto_select")){n.next=24;break}if(i.current.meta||_.isEmpty(i.search.list)){n.next=24;break}return u="".concat(o.id,":currentId"),(d=Ti.Storage.session.getString(u))&&(m=_.find(i.search.list,function(t){return t.id==d})),m||(m=_.first(i.search.list)),n.next=24,r("setCurrentThing",{meta:m,force:!1});case 24:a("setStatus",{reloading:!1});case 25:case"end":return n.stop()}},n)}))()}};Ti.Preload("ti/mod/wn/thing/m-thing-actions.mjs",t)}(),Ti.Preload("ti/mod/wn/thing/m-thing.json",{meta:null,currentDataDir:"media",currentDataHome:null,currentDataHomeObj:null,status:{reloading:!1,doing:!1,saving:!1,deleting:!1,changed:!1,restoring:!1,cleaning:!1,inRecycleBin:!1}}),function(){var t={getters:{hasCurrent:function(t){return t.current&&t.current.meta},isInRecycleBin:function(t){return t.search.inRecycleBin}},mutations:{setMeta:function(t,e){t.meta=e},setCurrentDataDir:function(t,e){t.currentDataDir=e},setCurrentDataHome:function(t,e){t.currentDataHome=e},setCurrentDataHomeObj:function(t,e){t.currentDataHomeObj=_.cloneDeep(e)},setStatus:function(t,e){t.status=_.assign({},t.status,e)},syncStatusChanged:function(t){t.current&&(t.status.changed=t.current.status.changed)}}};Ti.Preload("ti/mod/wn/thing/m-thing.mjs",t)}(),function(){var t={updateShown:function(t,e){var n=t.commit;n("mergeShown",e),n("persistShown")},reloadSchema:function(t){return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,i=t.commit,a="id:".concat(n.meta.id,"/thing-schema.json"),e.next=4,Wn.Io.loadMeta(a);case 4:return r=e.sent,e.next=7,Wn.Io.loadContent(r,{as:"json"});case 7:if(!(o=e.sent).methods){e.next=14;break}return e.next=11,Ti.Load(o.methods);case 11:s=e.sent,_.isArray(s)||(s=[s]),o.methods=s;case 14:return i("setSchema",o),e.abrupt("return",o);case 16:case"end":return e.stop()}},e)}))()},reloadLayout:function(t){return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,i=t.commit,a="id:".concat(n.meta.id,"/thing-layout.json"),e.next=4,Wn.Io.loadMeta(a);case 4:return r=e.sent,e.next=7,Wn.Io.loadContent(r,{as:"json"});case 7:return o=e.sent,i("setLayout",o),i("restoreShown"),e.abrupt("return",o);case 11:case"end":return e.stop()}},e)}))()},reloadActions:function(t){return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,i=t.commit,a="id:".concat(n.meta.id,"/thing-actions.json"),e.next=4,Wn.Io.loadMeta(a);case 4:return r=e.sent,e.next=7,Wn.Io.loadContent(r,{as:"json"});case 7:return o=e.sent,i("setActions",o),e.abrupt("return",o);case 10:case"end":return e.stop()}},e)}))()},reload:function(t,e){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.state,a=t.commit,r=t.dispatch,e?a("setMeta",e):e=i.meta,a("setStatus",{reloading:!0}),n.next=5,r("reloadSchema");case 5:return n.next=7,r("reloadLayout");case 7:return n.next=9,r("reloadActions");case 9:a("setStatus",{reloading:!1});case 10:case"end":return n.stop()}},n)}))()}};Ti.Preload("ti/mod/wn/thing/mod/config/m-thing-config-actions.mjs",t)}(),Ti.Preload("ti/mod/wn/thing/mod/config/m-thing-config.json",{meta:null,shown:{search:!0,meta:!0,content:!0,files:!1},listOpen:{content:!0},schema:{},layout:{deskstop:{},tablet:{},phone:{}},actions:[],status:{reloading:!1,saving:!1}}),function(){var t={mutations:{setMeta:function(t,e){t.meta=e},setStatus:function(t,e){t.status=_.assign({},t.status,e)},setSchema:function(t,e){t.schema=e},setLayout:function(t,e){t.layout=_.pick(e,["desktop","tablet","phone"]),t.shown=e.shown||{},t.listOpen=e.listOpen||{}},setActions:function(t,e){t.actions=e},mergeShown:function(t,e){e&&!_.isEmpty(e)&&(t.shown=_.assign({},t.shown,e))},persistShown:function(t){t.meta&&t.meta.id&&Ti.Storage.session.setObject("".concat(t.meta.id,"-shown"),t.shown)},restoreShown:function(t){if(t.meta&&t.meta.id){var e=Ti.Storage.session.getObject("".concat(t.meta.id,"-shown"));t.shown=_.assign({},t.shown,e)}}}};Ti.Preload("ti/mod/wn/thing/mod/config/m-thing-config.mjs",t)}(),Ti.Preload("ti/mod/wn/thing/mod/config/_mod.json",{namespaced:!0,state:"./m-thing-config.json",actions:"./m-thing-config-actions.mjs",mixins:"./m-thing-config.mjs"}),function(){var t={reloadPage:function(t,e){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.state,a=t.commit,r=t.dispatch,a("updatePager",e),n.next=4,r("reload");case 4:case"end":return n.stop()}},n)}))()},reload:function(t,e){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g,v,b,x,T,w,k,C;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.state,a=t.commit,r=t.rootState,e?a("setMeta",e):e=i.meta,a("setStatus",{reloading:!0}),o=["thing id:".concat(e.id," query -pager -cqn")],s=i.filter||{},c=s.keyword,l=s.match,u={},!c){n.next=34;break}if(!/^[0-9a-z]{32}$/.test(c)){n.next=11;break}u.id=c,n.next=34;break;case 11:d="title",m=_.get(r,"main.config.schema.behavior")||{},h=_.keys(m.keyword),p=_createForOfIteratorHelper(h),n.prev=15,p.s();case 17:if((f=p.n()).done){n.next=25;break}if(y=f.value,g=m.keyword[y],!new RegExp(g).test(c)){n.next=23;break}return d=y,n.abrupt("break",25);case 23:n.next=17;break;case 25:n.next=30;break;case 27:n.prev=27,n.t0=n.catch(15),p.e(n.t0);case 30:return n.prev=30,p.f(),n.finish(30);case 33:d.startsWith("=")?u[d.substring(1).trim()]=c:u[d]="^.*"+c;case 34:return _.isEmpty(l)||_.assign(u,l),u.th_live=i.inRecycleBin?-1:1,_.isEmpty(i.sorter)||(v=JSON.stringify(i.sorter),o.push("-sort '".concat(v,"'"))),b=i.pager,!_.isEmpty(b)&&b.pgsz>0&&b.pn>0&&(x=b.pgsz,T=b.pgsz*(b.pn-1),o.push("-limit ".concat(x)),o.push("-skip  ".concat(T))),w=_.isEmpty(u)?void 0:JSON.stringify(u),k=o.join(" "),n.next=43,Wn.Sys.exec2(k,{input:w,as:"json"});case 43:C=n.sent,a("setPager",C.pager),a("setList",C.list),a("setStatus",{reloading:!1});case 47:case"end":return n.stop()}},n,null,[[15,27,30,33]])}))()}};Ti.Preload("ti/mod/wn/thing/mod/search/m-thing-search-actions.mjs",t)}(),Ti.Preload("ti/mod/wn/thing/mod/search/m-thing-search.json",{meta:null,filter:{},sorter:{ct:-1},inRecycleBin:!1,pager:{pn:1,pgsz:50,pgc:0,sum:0,skip:0,count:0},currentId:null,checkedIds:[],list:[],status:{reloading:!1,saving:!1,deleting:!1}}),function(){function t(t,e,n){if(t){var i=Ti.Storage.session.getObject(t.id)||{};_.defaults(i,{filter:{},sorter:{},pager:{}}),i[e]=n,Ti.Storage.session.setObject(t.id,i)}}var e={getters:{currentItem:function(t){if(t.currentId){var e,n=_createForOfIteratorHelper(t.list);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.id==t.currentId)return i}}catch(t){n.e(t)}finally{n.f()}}return null},checkedItems:function(t){var e,n={},i=_createForOfIteratorHelper(t.checkedIds);try{for(i.s();!(e=i.n()).done;){n[e.value]=!0}}catch(t){i.e(t)}finally{i.f()}var a,r=[],o=_createForOfIteratorHelper(t.list);try{for(o.s();!(a=o.n()).done;){var s=a.value;n[s.id]&&r.push(s)}}catch(t){o.e(t)}finally{o.f()}return r}},mutations:{setMeta:function(t,e){t.meta=e},setStatus:function(t,e){t.status=_.assign({},t.status,e)},setFilter:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.filter=n,t(e.meta,"filter",e.filter)},updateFilter:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.filter=_.assign({},e.filter,n),t(e.meta,"filter",e.filter)},setSorter:function(e,n){e.sorter=n,t(e.meta,"sorter",e.sorter)},setPager:function(e,n){e.pager=n,t(e.meta,"pager",e.pager)},updatePager:function(t,e){t.pager=_.defaults({},e,t.pager)},setInRecycleBin:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.inRecycleBin=e},setList:function(t,e){t.list=e},setCurrentId:function(t,e){t.currentId=e||null},setCheckedIds:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.checkedIds=_.union(e)},selectItem:function(t,e){t.currentId!=e&&(t.currentId=e,t.checkedIds=[],e&&t.checkedIds.push(e))},removeItems:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=-1;if(t.currentId)for(var i=0;i<t.list.length;i++){if(t.list[i].id==t.currentId){n=i;break}}var a={};if(_.isArray(e)){var r,o=_createForOfIteratorHelper(e);try{for(o.s();!(r=o.n()).done;){a[r.value]=!0}}catch(t){o.e(t)}finally{o.f()}}else _.isPlainObject(e)&&(a=e);var s,c=[],l=_createForOfIteratorHelper(t.list);try{for(l.s();!(s=l.n()).done;){var u=s.value;a[u.id]||c.push(u)}}catch(t){l.e(t)}finally{l.f()}var d=null;(n=Math.min(n,c.length-1))>=0?(d=c[n],t.currentId=d.id,t.checkedIds=[d.id]):(t.currentId=null,t.checkedIds=[]),t.list=c,t.pager&&(t.pager.count=c.length,t.pager.sum=t.pager.pgsz*(t.pager.pgc-1)+c.length)},updateItem:function(t,e){var n,i=[],a=_createForOfIteratorHelper(t.list);try{for(a.s();!(n=a.n()).done;){var r=n.value;r.id==e.id?i.push(_objectSpread({},e,{__updated_time:Date.now()})):i.push(r)}}catch(t){a.e(t)}finally{a.f()}t.list=i},appendToList:function(t,e){e&&(t.list=[].concat(t.list,e))},prependToList:function(t,e){e&&(t.list=[].concat(e,t.list))}}};Ti.Preload("ti/mod/wn/thing/mod/search/m-thing-search.mjs",e)}(),Ti.Preload("ti/mod/wn/thing/mod/search/_mod.json",{namespaced:!0,state:"./m-thing-search.json",actions:"./m-thing-search-actions.mjs",mixins:"./m-thing-search.mjs"}),Ti.Preload("ti/mod/wn/thing/_mod.json",{name:"wn-thing",namespaced:!0,state:"./m-thing.json",actions:"./m-thing-actions.mjs",mixins:"./m-thing.mjs",modules:{config:"./mod/config",search:"./mod/search",current:"@mod:wn/obj-current"}}),Ti.Preload("ti/lib/www/com/site-main.html",'<div class="site-main">\n  <ti-gui \n    class="site-page"\n    v-bind="PageGUI"\n    :loading-as="loading"\n    :shown="page.shown"/>\n  \x3c!--pre>{{page}}</pre--\x3e\n</div>'),function(){var t={provide:function(){return Ti.Util.explainObj(this.provide,this)},computed:_objectSpread({},Vuex.mapState({siteId:function(t){return t.siteId},logo:function(t){return t.logo},utils:function(t){return t.utils},page:function(t){return t.page},shop:function(t){return t.shop},auth:function(t){return t.auth},domain:function(t){return t.domain},rs:function(t){return t.rs},base:function(t){return t.base},apiBase:function(t){return t.apiBase},cdnBase:function(t){return t.cdnBase},captcha:function(t){return t.captcha},schema:function(t){return t.schema},provide:function(t){return t.provide},blocks:function(t){return t.blocks},loading:function(t){return t.loading},pageReady:function(t){return t.pageReady}}),{},Vuex.mapGetters(["actions","getUrl","getApiUrl"]),{},Vuex.mapGetters("page",["pageLink"]),{PayReturnUrl:function(){var t=this.$store.state;if(t.payReturnUrl)return Ti.Util.explainObj(t,t.payReturnUrl)},SiteLogo:function(){return this.logo&&/\.(png|jpe?g)$/.test(this.logo)?this.getUrl(this.logo):this.logo||"zmdi-globe"},SiteNav:function(){var t=this,e={};return _.forEach(this.$store.state.nav,function(n,i){e[i]=Ti.WWW.explainNavigation(n,t.base)}),e},SiteCaptcha:function(){var t=Ti.S.renderBy(this.captcha,{site:this.siteId});return t.startsWith("/")?t:this.getApiUrl(t)},SiteLoginMode:function(){return this.auth.me?"bind_phone":"login_by_passwd"},PageFnSet:function(){return Ti.AddGlobalFuncs(this.utils),Ti.GlobalFuncs()},PageGUI:function(){var t=this,e=this.page;if(!e||!e.layout)return{};var n=e.layout;if(n){n=function e(n){if(_.isString(n)){var i=/^@BLOCK\(([^ ]+)\)$/.exec(n);if(i){var a=i[1];return _.get(t.blocks,a)}}else{if(_.isArray(n))return _.map(n,e);if(_.isPlainObject(n))return _.mapValues(n,e)}return n}(n)}var i={defaultFlex:"none",layout:n,schema:{},canLoading:!0};_.assign(i.schema,this.schema,e.schema);return Ti.Util.explainObj(this,i,{fnSet:this.PageFnSet})}}),methods:{showBlock:function(t){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:Ti.App(e).dispatch("page/showBlock",t);case 1:case"end":return n.stop()}},n)}))()},hideBlock:function(t){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:Ti.App(e).dispatch("page/hideBlock",t);case 1:case"end":return n.stop()}},n)}))()},__on_events:function(t){for(var e,n=this,i=arguments.length,a=new Array(i>1?i-1:0),r=1;r<i;r++)a[r-1]=arguments[r];return(e=console).log.apply(e,["site-main.__on_events",t].concat(a)),"block:show"==t?function(t){return n.showBlock(t)}:"block:hide"==t?function(t){return n.hideBlock(t)}:function(){for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];n.invokeAction(t,i)}},invokeAction:function(t){var e=arguments,n=this;return _asyncToGenerator(regeneratorRuntime.mark(function i(){var a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return a=e.length>1&&void 0!==e[1]?e[1]:[],i.next=3,Ti.App(n).dispatch("invokeAction",{name:t,args:a});case 3:case"end":return i.stop()}},i)}))()},pushBrowserHistory:function(){var t=window.history;if(t){var e=window.location,n=[e.pathname,e.search,e.hash].join(""),i=this.getUrl(this.pageLink);n!=i&&t.pushState(this.page,this.page.title,i)}}},watch:{"page.finger":function(){var t=Ti.Util.explainObj(this,this.page.title);document.title=t,this.pushBrowserHistory()}},mounted:function(){var t=this;window.onpopstate=function(e){var n=e.state;if(n&&n.path){console.log("window.onpopstate",n);Ti.App(t).dispatch("navTo",{type:"page",value:n.path,params:n.params,anchor:n.anchor})}}}};Ti.Preload("ti/lib/www/com/site-main.mjs",t)}(),Ti.Preload("ti/lib/www/mod/auth/www-mod-auth.json",{ticket:null,expi:0,me:null,paths:{checkme:"auth/checkme",login_by_wxcode:"auth/login_by_wxcode",login_by_phone:"auth/login_by_phone",login_by_email:"auth/login_by_email",login_by_passwd:"auth/login_by_passwd",bind_phone:"auth/bind_account",bind_email:"auth/bind_account",get_sms_vcode:"auth/get_sms_vcode",get_email_vcode:"auth/get_email_vcode",check_name:"auth/check_name",check_phone:"auth/check_phone",logout:"auth/logout"}}),function(){var t={getters:{hasSession:function(t){return!_.isEmpty(t.ticket)&&t.expi>Date.now()&&!_.isEmpty(t.me)},sessionState:function(t,e){return{ok:e.hasSession,data:{me:t.me||null,ticket:t.ticket||null,expi:t.expi||0}}},urls:function(t,e,n,i){var a={};return _.forEach(t.paths,function(t,e){a[e]=i.getApiUrl(t)}),a}},mutations:{setTicket:function(t,e){t.ticket=e},setExpi:function(t,e){t.expi=e},setMe:function(t,e){t.me=e},setPaths:function(t,e){_.assign(t.paths,e)},mergePaths:function(t,e){_.merge(t.paths,e)}},actions:{doCheckMe:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g,v,b;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.state,a=t.commit,r=t.dispatch,o=t.getters,s=t.rootState,c=e.length>1&&void 0!==e[1]?e[1]:{},l=c.force,u=void 0!==l&&l,d=c.success,m=c.fail,h=c.nophone,p=c.noemail,console.log("I am doCheckMe",{force:u,success:d,fail:m,nophone:h}),f=s.siteId){n.next=7;break}return Ti.Alert("Without siteId!!!"),n.abrupt("return");case 7:if(y=Ti.Storage.local.getString("www-ticket-".concat(f),""),a("setLoading",!0,{root:!0}),g=o.sessionState,!y||!u&&g.ok){n.next=14;break}return n.next=13,Ti.Http.get(o.urls.checkme,{params:{site:f,ticket:y},as:"json"});case 13:g=n.sent;case 14:if(a("setLoading",!1,{root:!0}),!g.ok){n.next=37;break}if(console.log("checkme OK",g),a("setTicket",g.data.ticket),a("setExpi",g.data.expi),a("setMe",g.data.me),!h){n.next=26;break}if((v=g.data.me).phone){n.next=26;break}return n.next=25,r(h.action,h.payload,{root:!0});case 25:return n.abrupt("return",n.sent);case 26:if(!p){n.next=32;break}if((b=g.data.me).email){n.next=32;break}return n.next=31,r(p.action,p.payload,{root:!0});case 31:return n.abrupt("return",n.sent);case 32:if(!d){n.next=35;break}return n.next=35,r(d.action,d.payload,{root:!0});case 35:n.next=40;break;case 37:if(!m){n.next=40;break}return n.next=40,r(m.action,m.payload,{root:!0});case 40:case"end":return n.stop()}},n)}))()},autoCheckmeOrAuthByWxghCode:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=t.dispatch,a=e.length>1&&void 0!==e[1]?e[1]:{},r=a.codeKey,o=void 0===r?"code":r,s=a.codeTypeBy,c=void 0===s?"ct":s,l=a.force,u=void 0!==l&&l,d=a.fail,m=a.nophone,h=a.noemail,console.log("autoCheckmeOrAuthByWxghCode"),i("doCheckMe",{force:u,fail:{action:"auth/authByWxghCode",payload:{codeKey:o,codeTypeBy:c,fail:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:d&&i(d.action,d.payload,{root:!0});case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),ok:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e,n,a,r=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:{},n=e.me,a=void 0===n?{}:n,!m){t.next=6;break}if(a.phone){t.next=6;break}return t.next=5,i(m.action,m.payload,{root:!0});case 5:return t.abrupt("return",t.sent);case 6:if(!h){t.next=11;break}if(a.email){t.next=11;break}return t.next=10,i(h.action,h.payload,{root:!0});case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()}}});case 4:case"end":return n.stop()}},n)}))()},authByWxghCode:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g,v,b,x,T,w,k,C,I,S;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.commit,a=t.getters,r=t.rootState,o=e.length>1&&void 0!==e[1]?e[1]:{},s=o.codeKey,c=void 0===s?"code":s,l=o.codeTypeBy,u=void 0===l?"ct":l,d=o.done,m=void 0===d?_.identity:d,h=o.ok,p=void 0===h?_.identity:h,f=o.fail,y=void 0===f?_.identity:f,g=o.invalid,v=void 0===g?_.identity:g,b=o.others,x=void 0===b?_.identity:b,T=r.page.params[c]){n.next=5;break}return n.abrupt("return");case 5:if(w=r.page.params[u],console.log("authByWxghCode",{codeType:w,code:T}),k=r.siteId){n.next=11;break}return Ti.Alert("Without siteId!!!"),n.abrupt("return");case 11:return C=a.urls.login_by_wxcode,I={site:k,code:T,ct:w},n.next=15,Ti.Http.get(C,{params:I,as:"json"});case 15:return S=n.sent,console.log(S),n.next=19,m(S);case 19:if(!S.ok||!S.data){n.next=28;break}return Ti.Storage.local.set("www-ticket-".concat(k),S.data.ticket),i("setTicket",S.data.ticket),i("setExpi",S.data.expi),i("setMe",S.data.me),n.next=26,p(S.data);case 26:n.next=37;break;case 28:if(!/^e.www.login.invalid/.test(S.errCode)){n.next=33;break}return n.next=31,v(S);case 31:n.next=35;break;case 33:return n.next=35,x(S);case 35:return n.next=37,y(S);case 37:case"end":return n.stop()}},n)}))()},doAuth:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g,v,b,x,T,w,k,C,I,S,j,O,D;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.commit,r=t.getters,o=t.rootState,s=e.length>1&&void 0!==e[1]?e[1]:{},c=s.type,l=void 0===c?"login_by_passwd":c,u=s.name,d=s.passwd,m=s.done,h=void 0===m?_.identity:m,p=s.ok,f=void 0===p?_.identity:p,y=s.fail,g=void 0===y?_.identity:y,v=s.noexist,b=void 0===v?_.identity:v,x=s.invalid,T=void 0===x?_.identity:x,w=s.others,k=void 0===w?_.identity:w,console.log("doAuth",u,d),C=o.siteId){n.next=7;break}return Ti.Alert("Without siteId!!!"),n.abrupt("return");case 7:if(I=r.urls[l],S=Ti.Storage.local.getString("www-ticket-".concat(C),""),j={login_by_passwd:"passwd",login_by_phone:"vcode",login_by_email:"vcode",bind_phone:"vcode",bind_email:"vcode"}[l]){n.next=12;break}throw"Unknown auth type: "+l;case 12:return i={site:C,name:u},_defineProperty(i,j,d),_defineProperty(i,"ticket",S),_defineProperty(i,"ajax",!0),O=i,n.next=15,Ti.Http.post(I,{params:O,as:"json"});case 15:return D=n.sent,console.log(D),n.next=19,h(D);case 19:if(!D.ok||!D.data){n.next=28;break}return Ti.Storage.local.set("www-ticket-".concat(C),D.data.ticket),a("setTicket",D.data.ticket),a("setExpi",D.data.expi),a("setMe",D.data.me),n.next=26,f(D.data);case 26:n.next=42;break;case 28:if("e.www.login.noexists"!=D.errCode){n.next=33;break}return n.next=31,b(D);case 31:n.next=40;break;case 33:if(!/^e.www.login.invalid/.test(D.errCode)){n.next=38;break}return n.next=36,T(D);case 36:n.next=40;break;case 38:return n.next=40,k(D);case 40:return n.next=42,g(D);case 42:case"end":return n.stop()}},n)}))()},doGetVcode:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g,v,b,x,T,w;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.getters,a=t.rootState,r=e.length>1&&void 0!==e[1]?e[1]:{},o=r.type,s=void 0===o?"login_by_phone":o,c=r.scene,l=void 0===c?"auth":c,u=r.account,d=r.captcha,m=r.done,h=void 0===m?_.identity:m,p=r.ok,f=void 0===p?_.identity:p,y=r.fail,g=void 0===y?_.identity:y,console.log("getVcode",{type:s,scene:l,account:u,captcha:d}),v=a.siteId){n.next=7;break}return Ti.Alert("Without siteId!!!"),n.abrupt("return");case 7:if(b={login_by_phone:"get_sms_vcode",login_by_email:"get_email_vcode",bind_phone:"get_sms_vcode",bind_email:"get_email_vcode"}[s],x=i.urls[b],b&&x){n.next=13;break}return n.next=12,Ti.Toast.Open("Invalid type: ".concat(s),"error");case 12:return n.abrupt("return",n.sent);case 13:return T={site:v,scene:l,account:u,captcha:d},n.next=16,Ti.Http.get(x,{params:T,as:"json"});case 16:w=n.sent,console.log(w),h(w),w.ok&&w.data?f(w.data):g(w);case 20:case"end":return n.stop()}},n)}))()},doLogout:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.commit,a=t.getters,r=t.rootState,o=e.length>1&&void 0!==e[1]?e[1]:{},s=o.done,c=void 0===s?_.identity:s,l=o.ok,u=void 0===l?_.identity:l,d=o.fail,m=void 0===d?_.identity:d,console.log("doLogout"),h=r.siteId){n.next=7;break}return Ti.Alert("Without siteId!!!"),n.abrupt("return");case 7:if(Ti.Storage.local.remove("www-ticket-".concat(h)),a.hasSession){n.next=11;break}return m(a.sessionState),n.abrupt("return");case 11:return p=a.sessionState,f=a.urls.logout,y={site:h,ticket:p.ticket},i("setLoading",{text:"i18n:logout-ing"},{root:!0}),n.next=17,Ti.Http.post(f,{params:y,as:"json"});case 17:g=n.sent,console.log(g),i("setTicket",null),i("setExpi",0),i("setMe",null),i("setLoading",!1,{root:!0}),c(g),g.ok?u(g.data):m(g);case 25:case"end":return n.stop()}},n)}))()}}};Ti.Preload("ti/lib/www/mod/auth/www-mod-auth.mjs",t)}(),Ti.Preload("ti/lib/www/mod/auth/_mod.json",{name:"www-mod-auth",namespaced:!0,state:"./www-mod-auth.json",mixins:"./www-mod-auth.mjs"}),Ti.Preload("ti/lib/www/mod/page/www-mod-page.json",{title:null,path:null,ready:0,finger:null,params:{},anchor:null,apis:{},data:{},layout:{desktop:{},tablet:"desktop",phone:"desktop"},shown:{},schema:{},actions:{}}),function(){var t,e={getters:{pageLink:function(t){var e=t.path,n=t.params,i=t.anchor,a=[e];if(!_.isEmpty(n)){var r=[];_.forEach(n,function(t,e){Ti.Util.isNil(t)||r.push("".concat(e,"=").concat(encodeURIComponent(t)))}),_.isEmpty(r)||a.push("?".concat(r.join("&")))}return i&&a.push("#".concat(i)),a.join("")},pageApis:function(t,e,n,i){var a=n.apiBase||"/",r=n.apis||{},o={};return _.forEach(t.apis,function(t,e){var n=_.get(r,t.apiName||e),i=_.cloneDeep(n);_.defaults(i,{method:"GET",headers:{},params:{},vars:{},as:"json"}),i.path?(_.assign(i.vars,t.vars),_.assign(i.headers,t.headers),_.forEach(i.params,function(e,n){var i=_.get(t.params,n);_.isUndefined(i)||(e.value=i)}),/^(https?:\/\/|\/)/.test(i.path)?i.url=i.path:i.url=Ti.Util.appendPath(a,i.path),_.assign(i,_.pick(t,"body","preload","serializer","dataKey","dataMerge","rawDataKey","rawDataMerge")),_.defaults(i,{bodyType:"form",dataKey:e}),o[e]=i):console.warn("!!!API[".concat(e,"] without defined in site!!!"),i)}),o}},mutations:(t={set:function(t,e){_.assign(t,e)},setTitle:function(t,e){t.title=e},setPath:function(t,e){t.path=e}},_defineProperty(t,"setPath",function(t,e){t.path=e}),_defineProperty(t,"setParams",function(t,e){t.params=e}),_defineProperty(t,"mergeParams",function(t,e){!_.isEmpty(e)&&_.isPlainObject(e)&&(t.params=_.merge({},t.params,e))}),_defineProperty(t,"setData",function(t,e){t.data=e}),_defineProperty(t,"updateData",function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.key,i=e.value;if(n&&!_.isUndefined(i)){var a=_.set({},n,i);t.data=_.assign({},t.data,a)}}),_defineProperty(t,"mergeData",function(t,e){!_.isEmpty(e)&&_.isPlainObject(e)&&(t.data=_.merge({},t.data,e))}),_defineProperty(t,"setLayout",function(t,e){t.layout=e}),_defineProperty(t,"setShown",function(t,e){_.assign(t.shown,e)}),_defineProperty(t,"setReady",function(t,e){t.ready=e}),_defineProperty(t,"updateFinger",function(t){var e=[t.path,t.params,t.anchor,t.data],n=Ti.Alg.sha1(e);t.finger=n}),t),actions:{showBlock:function(t,e){(0,t.commit)("setShown",_defineProperty({},e,!0))},hideBlock:function(t,e){(0,t.commit)("setShown",_defineProperty({},e,!1))},changeData:function(t,e){(0,t.commit)("mergeData",Ti.Util.merge({},e))},changeParams:function(t,e){var n=t.commit;n("mergeParams",Ti.Util.merge({},e)),n("updateFinger")},shiftData:function(t){var e=t.state,n=t.commit,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!_.isEmpty(i)&&_.isPlainObject(i)){var a={};Ti.Util.walk(i,{leaf:function(t,n){var i=_.get(e.data,n);_.isNumber(i)&&_.isString(t)&&/^[+-][0-9.]+$/.test(t)?_.set(a,n,i+1*t):_.set(a,n,t)}}),n("mergeData",a)}},assertPage:function(t){var e,n=t.rootState,i=t.dispatch,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.checkList,o=void 0===r?[]:r,s=a.fail,c=void 0===s?{}:s,l=!1,u=_createForOfIteratorHelper(o);try{for(u.s();!(e=u.n()).done;){var d=e.value,m=_.get(n,d.target);if(!Ti.Validate.checkBy(d.assert,m)){l=!0;break}}}catch(t){u.e(t)}finally{u.f()}l&&c.action&&i("doAction",c,{root:!0})},scrollToTop:function(t){return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.state,Ti.Be.ScrollWindowTo({y:0});case 2:case"end":return e.stop()}},e)}))()},doApi:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g,v,b,x,T,w;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.rootState,a=t.getters,r=t.commit,o=e.length>1&&void 0!==e[1]?e[1]:{},s=o.key,c=o.params,l=void 0===c?{}:c,u=o.vars,d=void 0===u?{}:u,m=o.body,h=void 0===m?null:m,p=_.get(a.pageApis,s),console.log("doApi",s,l,p),p){n.next=8;break}return n.next=7,Ti.Toast.Open("e.www.page.ApiNotFound: "+s,"warn");case 7:return n.abrupt("return",n.sent);case 8:return _.defaults(d,p.vars),f=p.url,_.isEmpty(d)||(y=Ti.Util.explainObj(i,d),f=Ti.S.renderBy(p.url,y)),g=_.pick(p,["method","as"]),g.vars=d,g.headers=Ti.Util.explainObj(i,p.headers),g.params={},_.forEach(p.params,function(t,e){var n=_.get(l,e);if(Ti.Util.isNil(n)&&(n=Ti.Util.explainObj(i,t.value)),t.required&&Ti.Util.isNil(n)){var a="".concat(f,": lack required param: ").concat(e);throw Ti.Toast.Open(a,"error"),a}g.params[e]=n}),v=h||p.body,"POST"==p.method&&v&&(b=Ti.Util.explainObj(i,v),"json"==p.bodyType?g.body=JSON.stringify(b):"text"==p.bodyType?g.body=Ti.Types.toStr(b):g.body=Ti.Http.encodeFormData(b)),r("setLoading",!0,{root:!0}),n.next=21,Ti.Http.sendAndProcess(f,g);case 21:x=n.sent,T=x,p.serializer&&(w=Ti.Util.genInvoking(p.serializer,{context:i,partialRight:!0}),_.isFunction(w)&&(T=w(x))),p.dataMerge?r("mergeData",_defineProperty({},p.dataKey,T)):r("updateData",{key:p.dataKey,value:T}),r("setLoading",!1,{root:!0});case 26:case"end":return n.stop()}},n)}))()},reloadData:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=t.state,a=t.commit,r=t.getters,o=t.rootState,s=e.length>1&&void 0!==e[1]?e[1]:[],console.log(" # -> page.reloadData",s),c=_.isEmpty(s),(l=_.filter(r.pageApis,function(t,e){return c&&t.preload>0?!t.preloadWhen||Ti.Validate.match(o,t.preloadWhen,!1):_.indexOf(s,e)>=0})).sort(function(t,e){return t.preload-e.preload}),a("setLoading",!0,{root:!0}),u=_createForOfIteratorHelper(l),n.prev=8,m=regeneratorRuntime.mark(function t(){var e,n,i,r,s,c,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=d.value,console.log("  # -> page.reloadData -> prepareApi",e),n=e.url,_.isEmpty(e.vars)||(i=Ti.Util.explainObj(o,e.vars),n=Ti.S.renderBy(n,i)),r=_.pick(e,["method","as"]),r.headers=Ti.Util.explainObj(o,e.headers),r.params={},_.forEach(e.params,function(t,e){var i=Ti.Util.explainObj(o,t.value);if(t.required&&Ti.Util.isNil(i)){var a="".concat(n,": lack required param: ").concat(e);throw Ti.Toast.Open(a,"error"),a}r.params[e]=i}),"POST"==e.method&&e.body&&(s=Ti.Util.explainObj(o,e.body),"json"==e.bodyType?r.body=JSON.stringify(s):"text"==e.bodyType?r.body=Ti.Types.toStr(s):r.body=Ti.Http.encodeFormData(s)),t.next=11,Ti.Http.sendAndProcess(n,r);case 11:c=t.sent,l=c,e.serializer&&(u=Ti.Util.genInvoking(e.serializer,{context:o,partialRight:!0}),_.isFunction(u)&&(l=u(c))),e.dataMerge?a("mergeData",_defineProperty({},e.dataKey,l)):a("updateData",{key:e.dataKey,value:l}),e.rawDataKey&&(e.rawDataMerge?a("mergeData",_defineProperty({},e.rawDataKey,c)):a("updateData",{key:e.rawDataKey,value:c}));case 16:case"end":return t.stop()}},t)}),u.s();case 11:if((d=u.n()).done){n.next=15;break}return n.delegateYield(m(),"t0",13);case 13:n.next=11;break;case 15:n.next=20;break;case 17:n.prev=17,n.t1=n.catch(8),u.e(n.t1);case 20:return n.prev=20,u.f(),n.finish(20);case 23:a("setLoading",!1,{root:!0}),a("updateFinger");case 25:case"end":return n.stop()}},n,null,[[8,17,20,23]])}))()},reload:function(t,e){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=t.commit,a=t.dispatch,r=t.rootGetters,o=e.path,s=e.anchor,c=e.params,l=void 0===c?{}:c,console.log(" # -> page.reload",{path:o,params:l,anchor:s}),d=_createForOfIteratorHelper(r.routerList),n.prev=4,d.s();case 6:if((m=d.n()).done){n.next=13;break}if(h=m.value,!(u=h(o))||!u.path){n.next=11;break}return n.abrupt("break",13);case 11:n.next=6;break;case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(4),d.e(n.t0);case 18:return n.prev=18,d.f(),n.finish(18);case 21:if(u&&u.path){n.next=25;break}return n.next=24,Ti.Toast.Open("Page ${path} not found!",{type:"error",position:"center",vars:{path:o}});case 24:return n.abrupt("return",n.sent);case 25:return console.log("@page:init ..."),i("setReady",0),n.next=29,a("invokeAction",{name:"@page:init"},{root:!0});case 29:return n.next=31,Ti.Load("@Site:".concat(u.path,".json"));case 31:return p=n.sent,s&&(u.anchor=s),u.params=_.merge({},u.params,l),u.path=o,f=_.merge({title:null,apis:{},data:{},layout:{},params:{},shown:{},schema:{},actions:{}},p,u),i("set",f),console.log(" #### page.loaded",_.cloneDeep(f)),console.log("@page:prepare ..."),i("setReady",1),n.next=42,a("invokeAction",{name:"@page:prepare"},{root:!0});case 42:return n.next=44,a("reloadData");case 44:return a("scrollToTop"),console.log("@page:ready ..."),i("setReady",2),n.next=49,a("invokeAction",{name:"@page:ready"},{root:!0});case 49:case"end":return n.stop()}},n,null,[[4,15,18,21]])}))()}}};Ti.Preload("ti/lib/www/mod/page/www-mod-page.mjs",e)}(),Ti.Preload("ti/lib/www/mod/page/_mod.json",{name:"www-mod-page",namespaced:!0,state:"./www-mod-page.json",mixins:"./www-mod-page.mjs"}),Ti.Preload("ti/lib/www/mod/shop/www-mod-shop.json",{basket:[],payment:null,paths:{buyIt:"entity/buy/it",buyRemove:"entity/buy/rm",buyGetAll:"entity/buy/all",buyClean:"entity/buy/clean",objs:"objs",buy:"pay/buy",pay:"pay/pay",checkOrder:"pay/check"}}),function(){var t={getters:{urls:function(t,e,n,i){var a={};return _.forEach(t.paths,function(t,e){a[e]=i.getApiUrl(t)}),a}},mutations:{appendBasket:function(t,e){t.basket=_.concat(t.basket,e)},setBasket:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.basket=e},setPayment:function(t,e){t.payment=e},setPaths:function(t,e){t.paths=_.cloneDeep(e)},mergePaths:function(t,e){_.assign(t.paths,e)}},actions:{fetchOrder:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.getters,a=t.rootState,r=e.length>1&&void 0!==e[1]?e[1]:{},o=r.orderId,s=r.payType,o){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,Ti.Http.get(i.urls.pay,{params:{ticket:a.auth.ticket,id:o,pt:s},as:"json"});case 6:if(!(c=n.sent).ok){n.next=11;break}return n.abrupt("return",c.data);case 11:console.warn("Fail to loadBuyItems",{items:items,reo:c});case 12:case"end":return n.stop()}},n)}))()},createOrder:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.getters,a=t.rootState,r=e.length>1&&void 0!==e[1]?e[1]:{},o=r.payType,s=r.items,o&&!_.isEmpty(s)){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,Ti.Http.post(i.urls.buy,{params:{ticket:a.auth.ticket},headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({pay_tp:o,products:s}),as:"json"});case 6:if(!(c=n.sent).ok){n.next=11;break}return n.abrupt("return",c.data);case 11:console.warn("Fail to loadBuyItems",{items:s,reo:c});case 12:case"end":return n.stop()}},n)}))()},checkOrder:function(t,e){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.getters,a=t.rootState,console.log("checkOrder"),e){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,Ti.Http.get(i.urls.checkOrder,{params:{ticket:a.auth.ticket,id:e},as:"json"});case 6:if(!(r=n.sent).ok){n.next=11;break}return n.abrupt("return",r.data);case 11:console.warn("Fail to loadBuyItems",{items:items,reo:r});case 12:case"end":return n.stop()}},n)}))()},loadBuyItems:function(t,e){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.getters,a=t.commit,r=e.items,o=void 0===r?[]:r,s=e.commitDataKey,c=void 0===s?"goods":s,l=e.commitTarget,u=void 0===l?"page/updateData":l,console.log("loadBuyItems",o),d=[],m={},_.forEach(o,function(t){var e=/^(\d+):(.+)$/.exec(t);if(e){var n=1*e[1],i=e[2];i&&n>0&&(d.push("id:".concat(i)),m[i]=n)}}),!_.isEmpty(d)){n.next=8;break}return n.abrupt("return");case 8:return n.next=10,Ti.Http.get(i.urls.objs,{params:{phs:d.join(" ")},as:"json"});case 10:(h=n.sent).ok?(p=[],_.forEach(h.data,function(t){var e=t.id,n=m[e];p.push({id:e,amount:n,obj:t})}),a(u,{key:c,value:p},{root:!0})):console.warn("Fail to loadBuyItems",{items:o,reo:h});case 12:case"end":return n.stop()}},n)}))()},checkoutBasket:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.state,a=t.dispatch,r=e.length>1&&void 0!==e[1]?e[1]:{},o=r.checkoutPage,s=void 0===o?"page/shop/checkout.html":o,c=[],_.forEach(i.basket,function(t){t.name&&t.count>0&&c.push({id:t.name,amount:t.count})}),_.isEmpty(c)){n.next=9;break}return n.next=7,a("checkout",{items:c,checkoutPage:s});case 7:n.next=10;break;case 9:console.warn("!checkoutBasket: Empty Basket");case 10:case"end":return n.stop()}},n)}))()},checkout:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.commit,a=t.dispatch,r=t.getters,o=t.rootState,s=e.length>1&&void 0!==e[1]?e[1]:{},c=s.items,l=void 0===c?[]:c,u=s.checkoutPage,d=void 0===u?"page/shop/checkout.html":u,console.log("checkout",l),m=[],_.forEach(l,function(t){t.id&&t.amount>0&&m.push("".concat(t.amount,":").concat(t.id))}),!_.isEmpty(m)){n.next=8;break}return console.warn("!checkout: Empty Item"),n.abrupt("return");case 8:return n.next=10,a("navTo",{value:d,params:{its:m.join(",")}},{root:!0});case 10:case"end":return n.stop()}},n)}))()},updateBasket:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g,v;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.commit,a=t.dispatch,r=t.getters,o=t.rootState,s=e.length>1&&void 0!==e[1]?e[1]:{},c=s.id,l=s.n,u=void 0===l?1:l,d=s.reset,m=void 0!==d&&d,h=s.success,p=s.fail,f=s.invalid,y=s.noTicket,console.log("shop:addToBasket",{id:c,success:h,fail:p}),0!==u||m){n.next=5;break}return n.abrupt("return");case 5:if(g=o.auth.ticket){n.next=15;break}if(!y){n.next=13;break}return n.next=10,a(y.action,y.payload,{root:!0});case 10:return n.abrupt("return",n.sent);case 13:return Ti.Alert("Without Session Ticket!!!"),n.abrupt("return");case 15:if(c){n.next=24;break}if(!f){n.next=22;break}return n.next=19,a(f.action,f.payload,{root:!0});case 19:return n.abrupt("return",n.sent);case 22:return Ti.Alert("Without Product ID!!!"),n.abrupt("return");case 24:return i("setLoading",!0,{root:!0}),n.next=27,Ti.Http.get(r.urls.buyIt,{params:{ticket:g,id:c,n:u,r:m},as:"json"});case 27:if(!(v=n.sent).ok){n.next=35;break}if(i("setBasket",v.data),!h){n.next=33;break}return n.next=33,a(h.action,h.payload,{root:!0});case 33:n.next=41;break;case 35:if(!p){n.next=40;break}return n.next=38,a(p.action,p.payload,{root:!0});case 38:n.next=41;break;case 40:console.warn("shop.updateBasket fail:",v);case 41:i("setLoading",!1,{root:!0});case 42:case"end":return n.stop()}},n)}))()},cleanBasket:function(t){return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.commit,i=t.getters,a=t.rootState,console.log("shop:cleanBasket"),r=a.auth.ticket){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,Ti.Confirm("i18n:shop-basket-clean-confirm");case 7:if(e.sent){e.next=9;break}return e.abrupt("return");case 9:return n("setLoading",!0,{root:!0}),e.next=12,Ti.Http.get(i.urls.buyClean,{params:{ticket:r},as:"json"});case 12:o=e.sent,n("setLoading",!1,{root:!0}),o.ok?n("setBasket",[]):console.error("www/shop module: Fail to reloadBasket",o);case 15:case"end":return e.stop()}},e)}))()},reloadBasket:function(t){return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.commit,i=t.getters,a=t.rootState,console.log("shop:reloadBasket"),r=a.auth.ticket){e.next=5;break}return e.abrupt("return");case 5:return n("setLoading",!0,{root:!0}),e.next=8,Ti.Http.get(i.urls.buyGetAll,{params:{ticket:r},as:"json"});case 8:o=e.sent,n("setLoading",!1,{root:!0}),o.ok?n("setBasket",o.data):console.error("www/shop module: Fail to reloadBasket",o);case 11:case"end":return e.stop()}},e)}))()}}};Ti.Preload("ti/lib/www/mod/shop/www-mod-shop.mjs",t)}(),Ti.Preload("ti/lib/www/mod/shop/_mod.json",{name:"www-mod-shop",namespaced:!0,state:"./www-mod-shop.json",mixins:"./www-mod-shop.mjs"}),function(){var t={getters:{routerList:function(t){var e=[];return _.forEach(t.router,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.match,i=t.names,a=void 0===i?[]:i,r=t.page,o=void 0===r?{}:r,s=new RegExp(n);e.push(function(t){var e=s.exec(t);if(e){for(var n={},i=0;i<e.length;i++){var r=e[i];n[i]=r,_.nth(a,i)&&_.set(n,key,r)}return Ti.Util.explainObj(n,o)}})}),e},actions:function(t){var e=_.cloneDeep(t.actions);e=_.mapValues(e,function(t){return _.isString(t)?{action:t}:t});var n=t.page;return n&&_.forEach(n.actions,function(t,n){var i=t;_.isString(t)&&(i={action:t});var a=e[n];if(_.isArray(a))if(_.isArray(i)){if(i.length>0)if("+"==i[0])for(var r=1;r<i.length;r++)a.push(i[r]);else e[n]=i}else a.push(i);else e[n]=i}),e},getUrl:function(t){return function(e){return Ti.Util.appendPath(t.base,e)}},getApiUrl:function(t){return function(e){return e.startsWith("/")?e:Ti.Util.appendPath(t.apiBase,e)}}},mutations:{setSiteId:function(t,e){t.siteId=e},setDomain:function(t,e){t.domain=e,t.base=Ti.S.renderBy(t.base||"/www/${domain}/",{domain:e}),t.apiBase=Ti.S.renderBy(t.apiBase||"/api/${domain}/",{domain:e})},setLoading:function(t,e){t.loading=e},explainSiteState:function(t){t.base=Ti.Util.explainObj(t,t.base),t.apiBase=Ti.Util.explainObj(t,t.apiBase),t.cdnBase=Ti.Util.explainObj(t,t.cdnBase),t.logo=Ti.Util.explainObj(t,t.logo),t.entry=Ti.Util.explainObj(t,t.entry)}},actions:{navBackward:function(){window.history&&window.history.back()},openUrl:function(t,e){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.state,a=e.url,r=e.target,o=void 0===r?"_self":r,s=e.method,c=void 0===s?"GET":s,l=e.params,u=void 0===l?{}:l,d=e.delay,m=void 0===d?0:d,n.next=4,Ti.Be.Open(a,{target:o,method:c,params:u,delay:m});case 4:case"end":return n.stop()}},n)}))()},navTo:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.commit,a=t.dispatch,r=e.length>1&&void 0!==e[1]?e[1]:{},o=r.type,s=void 0===o?"page":o,c=r.value,l=r.anchor,u=r.data,d=r.params,console.log("navToPage::",c),c){n.next=5;break}return n.abrupt("return");case 5:if("page"!=s){n.next=12;break}return i("setLoading",!0),n.next=9,a("page/reload",{path:c,anchor:l,params:d,data:u});case 9:i("setLoading",!1),n.next=15;break;case 12:if("dispatch"!=s){n.next=15;break}return n.next=15,a(c,d);case 15:case"end":return n.stop()}},n)}))()},doAction:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.state,a=t.dispatch,r=e.length>1&&void 0!==e[1]?e[1]:{},o=r.action,s=r.payload,c=r.args,l=void 0===c?[]:c,o){n.next=4;break}return n.abrupt("return");case 4:return _.isUndefined(s)||_.isNull(s)?u=_.cloneDeep(_.nth(l,0)):(d=_.assign({},i,{$args:l}),u=Ti.Util.explainObj(d,s,{evalFunc:!1})),console.log("invoke->",o,u),n.next=8,a(o,u);case 8:case"end":return n.stop()}},n)}))()},invokeAction:function(t){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g,v,b;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.getters,a=t.dispatch,r=e.length>1&&void 0!==e[1]?e[1]:{},o=r.name,s=void 0===o?"":o,c=r.args,l=void 0===c?[]:c,u=i.actions,d=_.get(u,s)){n.next=15;break}m=_.split(s,"::");case 6:if(!(m.length>1)){n.next=15;break}if(h=m,p=_toArray(h),f=p.slice(1),y=f.join("::"),!(d=_.get(u,y))){n.next=12;break}return n.abrupt("break",15);case 12:m=f,n.next=6;break;case 15:if(d){n.next=17;break}return n.abrupt("return");case 17:if(n.prev=17,!_.isArray(d)){n.next=38;break}g=_createForOfIteratorHelper(d),n.prev=20,g.s();case 22:if((v=g.n()).done){n.next=28;break}return b=v.value,n.next=26,a("doAction",{action:b.action,payload:b.payload,args:l});case 26:n.next=22;break;case 28:n.next=33;break;case 30:n.prev=30,n.t0=n.catch(20),g.e(n.t0);case 33:return n.prev=33,g.f(),n.finish(33);case 36:n.next=45;break;case 38:if(!_.isString(d)){n.next=43;break}return n.next=41,a("doAction",{action:d,args:l});case 41:n.next=45;break;case 43:return n.next=45,a("doAction",{action:d.action,payload:d.payload,args:l});case 45:n.next=50;break;case 47:n.prev=47,n.t1=n.catch(17),console.error(n.t1);case 50:case"end":return n.stop()}},n,null,[[17,47],[20,30,33,36]])}))()},reload:function(t){return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,i=t.commit,a=t.dispatch,console.log("site.reload",n.entry,n.base),r=Ti.Util.parseHref(window.location.href),i("auth/mergePaths",n.authPaths),o=n.entry,r.path.startsWith(n.base)&&(o=r.path.substring(n.base.length)||o),e.next=8,a("navTo",{type:"page",value:o,params:r.params,anchor:r.hash,pushHistory:!1});case 8:case"end":return e.stop()}},e)}))()}}};Ti.Preload("ti/lib/www/mod/www-mod-site.mjs",t)}(),Ti.Preload("/a/load/wn.manager/gui/layout.json",{desktop:{type:"rows",border:!0,blocks:[{name:"sky",size:48,type:"rows",border:!0,blocks:[{type:"cols",blocks:[{name:"logo",size:"auto",body:"pcSkyLogo"},{name:"title",size:"stretch",body:"pcSkyTitle"},{name:"session",size:"auto",body:"pcSkySession"},{name:"menu",size:"auto",body:"pcSkyMenu"}]}]},{name:"main",size:"100px",flex:"both",type:"cols",border:!0,blocks:[{name:"sidebar",size:"1.8rem",body:"pcMainSideBar"},{name:"arena",size:"stretch",body:"pcMainArena"}]},{name:"footer",size:".32rem",body:"pcFooter"}]},tablet:"desktop",phone:"desktop"}),Ti.Preload("/a/load/wn.manager/gui/schema.json",{pcSkyLogo:{comType:"ti-icon",comConf:{width:"3em",fontSize:"1.5em",value:"=Logo"}},pcSkyTitle:{comType:"ti-crumb",comConf:"=Crumb"},pcSkySession:{comType:"ti-session-badge",comConf:"=SessionBadge"},pcSkyMenu:{comType:"ti-actionbar",comConf:"=ActionMenu"},pcMainSideBar:{comType:"wn-gui-side-nav",comConf:{items:"=sidebar",highlightItemId:"=MetaId",highlightItemPath:"=MetaPath"}},pcMainArena:{comType:"=comType",comConf:"=Arena"},pcFooter:{comType:"wn-gui-footer",comConf:"=Footer"}}),Ti.Preload("/a/load/wn.manager/gui/setup.json",{shown:{desktop:{logo:"==theLogo",menu:"==theMenu",sessionBadge:"==theSessionBadge"},tablet:{},phone:{}},canLoading:!0,loadingAs:!1,firstCrumbIndex:1,logo:"<:home>"}),function(){var t={Logo:function(){if("<:home>"==this.setup.logo){var t=_.nth(this.CrumbData,0);return t?t.icon:null}return this.setup.logo},CrumbData:function(){var t=this;return Wn.Obj.evalCrumbData({meta:this.meta,ancestors:this.ancestors,fromIndex:this.setup.firstCrumbIndex,homePath:this.setup.skyHomePath,self:function(e){e.asterisk=t.isChanged}})},Crumb:function(){var t=_.cloneDeep(this.CrumbData);return this.Logo&&!_.isEmpty(t)&&(t[0].icon=null),{data:t}},SessionBadge:function(){var t=_.get(this.session,"me");if(t)return{me:t,avatarKey:"thumb",avatarSrc:null,loginIcon:1==t.sex?"im-user-male":"im-user-female",nameKeys:"nickname|nm"}},ActionMenu:function(){if(_.isArray(this.actions)&&!_.isEmpty(this.actions))return{className:"wn-".concat(this.viewportMode,"-menu"),items:this.actions,status:this.TheStatus,delay:500}},Arena:function(){if(this.hasView){var t=Ti.App(this),e=Ti.Util.explainObj(this,this.comConf)||{meta:this.meta,content:this.content,data:this.data,status:this.status};return e.onInit=function(){t.$vmMain(this)},e}},Footer:function(){return{infoIcon:this.comIcon,infoText:this.comType,message:this.myMessage||this.StatusText,indicator:this.myIndicator}}};Ti.Preload("/a/load/wn.manager/wn-manager-computed.mjs",t)}(),function(){var t={reloadMain:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i,a,r,o,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.meta){e.next=5;break}return e.next=4,Ti.Toast.Open("i18n:wn-manager-no-meta","warn");case 4:return e.abrupt("return",e.sent);case 5:if(!t.isLoading){e.next=10;break}return console.log("!!!"),e.next=9,Ti.Toast.Open("i18n:wn-manager-is-loading","warn");case 9:return e.abrupt("return",e.sent);case 10:if(t.loading=!0,t.comType="ti-loading",t.comConf={},e.prev=13,t.view&&t.view.modType)try{t.$store.unregisterModule("main")}catch(t){console.error("Error when unregisterModule",t)}return i=/^#!(.+)$/.exec(window.location.hash),a=i?i[1]:null,r=a?"ti views -cqn -name '".concat(a,"'"):"ti views -cqn id:".concat(n.id),e.next=20,Wn.Sys.exec2(r,{as:"json"});case 20:return o=e.sent,s=Ti.App(t),e.next=24,s.loadView(o);case 24:if(c=e.sent,Ti.IsInfo("app/wn.manager")&&console.log("TiView Loaded:",c),!c||!c.modType){e.next=30;break}return t.$store.registerModule("main",c.mod),e.next=30,s.dispatch("main/reload",n);case 30:t.comType=c.comName,t.comIcon=c.comIcon,t.comConf=c.comConf,t.view=c,t.myMessage=null,t.myIndicator=null,t.OnUpdateActions(c.actions);case 37:return e.prev=37,t.loading=!1,e.finish(37);case 40:case"end":return e.stop()}},e,null,[[13,,37,40]])}))()},reloadAncestors:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.hasMeta){e.next=5;break}return e.next=3,Wn.Io.loadAncestors("id:"+t.MetaId);case 3:t.ancestors=e.sent,t.parent=_.last(t.ancestors);case 5:case"end":return e.stop()}},e)}))()},reloadSidebar:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn.Sys.exec("ti sidebar -cqn",{as:"json"});case 2:n=e.sent,t.sidebar=n.sidebar;case 4:case"end":return e.stop()}},e)}))()},pushHistory:function(t){var e=window.history;if(e&&t){if(e.state&&e.state.id==t.id)return;var n=Wn.Util.getAppLink(t.id),i=Wn.Util.getObjDisplayName(t);Ti.IsInfo("app/wn-manager")&&console.log(i,"->",n),e.pushState(t,i,n),document.title=i}}};Ti.Preload("/a/load/wn.manager/wn-manager-methods.mjs",t)}(),Ti.Preload("/a/load/wn.manager/wn-manager.html",'<ti-gui\n  class="wn-manager"\n  :class="TopClass"\n  :layout="GuiLayout"\n  :schema="GuiSchema"\n  :shown="GuiShown"\n  :can-loading="GuiCanLoading"\n  :loading-as="GuiLoadingAs"\n  @arena::expose-hidden="OnExposeHidden"\n  @do:logout="OnLogout"\n  @item:active="OnCurrentMetaChange"\n  @arena::open="OnCurrentMetaChange"\n  @arena::change="OnCurrentDataChange"\n  @arena::actions:update="OnUpdateActions"\n  @arena::indicate="OnArenaIndicate"\n  @arena::message="OnArenaMessage"/>'),function(){var t={provider:function(){return{$session:{ticket:this.session.ticket,userId:this.session.uid,userName:this.session.unm,group:this.session.grp}}},data:function(){return{myExposeHidden:!1,loading:!1,comIcon:"zmdi-hourglass-alt",comType:"ti-loading",comConf:{},actions:[],sidebar:[],ancestors:[],parent:null,view:null,myMessage:null,myIndicator:null}},computed:{TopClass:function(){return this.getTopClass({"is-current-as-home":this.CurrentIsHome,"is-current-no-home":!this.CurrentIsHome},this.appClassName)},isLoading:function(){return this.loading||this.isReloading},isChanged:function(){var t=this.$store.state.main;return!!_.get(t,"status.changed")||_.get(this.status,"changed")},isSaving:function(){return _.get(this.status,"saving")},isReloading:function(){return _.get(this.status,"reloading")},hasActions:function(){return!_.isEmpty(this.actions)},hasView:function(){return!!this.view},hasMeta:function(){return!!this.meta},hasParent:function(){return!!this.parent},MetaId:function(){return _.get(this.meta,"id")},MetaPath:function(){return _.get(this.meta,"ph")},MyHome:function(){var t=this.meta,e=this.ancestors;if(_.isEmpty(e)){if(t&&"root"==t.nm)return t}else{if(1==e.length&&"home"==e[0].nm)return t;if("home"==e[0].nm)return e[1]}return null},MyHomeId:function(){return _.get(this.MyHome,"id")},ParentIsHome:function(){return this.hasParent&&this.parent.id==this.MyHomeId},CurrentIsHome:function(){return this.hasMeta&&this.MetaId==this.MyHomeId},TheStatus:function(){var t=_.get(this.$store.state,"main.status"),e=_.get(t,"reloading")||this.status.reloading;return _.assign({},t,this.status,{exposeHidden:this.myExposeHidden,changed:this.isChanged,reloading:e})},StatusText:function(){var t=_.assign({},this.status);return t.saving?Ti.I18n.text("i18n:saving"):t.reloading?Ti.I18n.text("i18n:loading"):void 0},Main:function(){return this.$store.state.main},GuiShown:function(){var t=_.get(this.setup,"shown");if(_.isPlainObject(t)){var e=t[this.viewportMode];return _.isString(e)&&(e=t[e]),_.isString(e)&&(e=t[e]),Ti.Util.explainObj(this,e)}return{}},GuiCanLoading:function(){return _.get(this.setup,"canLoading")},GuiLoadingAs:function(){return _.get(this.setup,"loadingAs")},GuiLayout:function(){return Ti.Util.explainObj(this,this.layout)},GuiSchema:function(){return Ti.Util.explainObj(this,this.schema)}},methods:{OnExposeHidden:function(t){this.myExposeHidden=t},OnLogout:function(){this.doLogout()},OnCurrentMetaChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,n=t.path,i=t.value;this.openView(e||n||i)},OnCurrentDataChange:function(t){Ti.App(this).dispatch("current/changeContent",t)},OnUpdateActions:function(t){this.actions=_.cloneDeep(t),Ti.App(this).reWatchShortcut(t)},OnArenaIndicate:function(t){this.myIndicator=t},OnArenaMessage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.myMessage=t},openView:function(t){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(_.isString(t)){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,Ti.Fuse.fire();case 4:if(i=n.sent){n.next=7;break}return n.abrupt("return");case 7:return a=Wn.Io.isFullObjId(t)?"id:".concat(t):t,n.next=10,Ti.App(e).dispatch("current/reload",a);case 10:case"end":return n.stop()}},n)}))()},doLogout:function(){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=Wn.Session.env("QUIT")||"/",t.next=3,Wn.Sys.exec("exit");case 3:Ti.Be.Open(e,{target:"_self",delay:0});case 4:case"end":return t.stop()}},t)}))()}},watch:{meta:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(e,n){var i,a,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=_.get(e,"id"),a=_.get(n,"id"),r=_.isEqual(i,a),!e){t.next=11;break}if(r){t.next=7;break}return t.next=7,this.reloadAncestors();case 7:if(r&&!this.isChanged){t.next=11;break}return t.next=10,this.reloadMain();case 10:this.pushHistory(e);case 11:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},mounted:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.reloadSidebar();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),beforeDestroy:function(){}};Ti.Preload("/a/load/wn.manager/wn-manager.mjs",t)}(),Ti.Preload("ti/i18n/zh-cn/hmaker.i18n.json",{"com-form":"表单","com-label":"标签","com-list":"列表","hm-type-Array":"数组","hm-type-Boolean":"布尔","hm-type-Group":"字段分组","hm-type-Integer":"整数","hm-type-Number":"数字","hm-type-Object":"对象","hm-type-String":"文本","hm-type-icons":{Array:"zmdi-format-list-bulleted",Boolean:"zmdi-toll",Group:"zmdi-collection-bookmark",Integer:"zmdi-n-6-square",Number:"zmdi-input-svideo",Object:"zmdi-toys",String:"zmdi-translate"},"hmaker-com-conf-blank":"请选择一个控件设置其详情","hmaker-com-type-blank":"选择一个控件","hmaker-edit-form-del-group-all":"组以及全部字段","hmaker-edit-form-del-group-confirm":"您是要删除组以及其内的全部字段，还是仅是组？","hmaker-edit-form-del-group-only":"仅是组","hmaker-edit-form-field-nil":"请选择一个字段编辑详情","hmaker-edit-form-new-field":"新字段","hmaker-edit-form-new-field-e0":"字段名不能以数字开头，内容只能为小写英文字母数字和下划线","hmaker-edit-form-new-field-e1":"字段【${val}】已存在，请另选一个名称","hmaker-edit-form-new-field-tip":"请输入新字段名（只能为小写英文字母数字和下划线）","hmaker-edit-form-new-group":"新分组","hmaker-edit-form-new-group-tip":"请输入新分组名","hmaker-edit-form-nil-field":"请先选择一个字段","hmaker-edit-form-not-current":"请选择一个字段或者字段组","hmaker-layout-cols":"列布局","hmaker-layout-rows":"行布局","hmaker-layout-tabs":"标签布局","hmaker-nav-blank-item":"请选择一个导航项目编辑","hmaker-nav-k-display":"链接显示内容","hmaker-nav-k-icon":"链接图标","hmaker-nav-k-title":"链接文字","hmaker-nav-k-type":"链接类型","hmaker-nav-k-value":"链接目标","hmaker-nav-tp-dispatch":"方法调用","hmaker-nav-tp-href":"外部链接","hmaker-nav-tp-page":"站点页面","hmaker-site-k-apiBase":"接口路径","hmaker-site-k-base":"资源路径","hmaker-site-k-captcha":"验证码路径","hmaker-site-k-domain":"所属域","hmaker-site-k-entry":"着陆页","hmaker-site-prop":"站点属性","hmaker-site-state":"站点全局配置","hmaker-site-state-actions":"全局动作表","hmaker-site-state-apis":"接口集","hmaker-site-state-blocks":"预定义布局","hmaker-site-state-general":"通用配置","hmaker-site-state-nav":"全局导航条","hmaker-site-state-router":"页面路由","hmaker-site-state-schema":"预定义控件","hmaker-site-state-utils":"扩展函数","hmaker-site-tree":"站点结构","hmaker-site-tree-loading":"正在加载站点结构...","hmk-adjustDelay":"调整延迟","hmk-aspect":"外观","hmk-autoI18n":"国际化","hmk-behavior":"行为","hmk-blankAs":"空白样式","hmk-breakLine":"维持换行","hmk-currentTab":"当前标签","hmk-data":"数据","hmk-dict":"数据字典","hmk-editable":"可编辑","hmk-field-checkEquals":"检查相等","hmk-field-com":"编辑控件","hmk-field-defaultAs":"默认值","hmk-field-disabled":"失效条件","hmk-field-height":"高度","hmk-field-hidden":"隐藏条件","hmk-field-icon":"图标","hmk-field-name":"键名","hmk-field-serializer":"自定义保存","hmk-field-tip":"提示说明","hmk-field-title":"显示名","hmk-field-transformer":"自定义转换","hmk-field-type":"类型","hmk-field-width":"宽度","hmk-fieldStatus":"字段状态","hmk-fields":"字段","hmk-fields-advance":"高级","hmk-fields-general":"基本","hmk-form-data":"数据源","hmk-form-height":"表单高度","hmk-form-onlyFields":"仅声明字段","hmk-form-width":"表单宽度","hmk-format":"格式化","hmk-height":"控件高度","hmk-href":"超链接","hmk-icon":"表单图标","hmk-measure":"尺寸","hmk-mode":"显示方式","hmk-mode-all":"全部","hmk-mode-tab":"标签","hmk-newTab":"新窗口","hmk-placeholder":"占位文本","hmk-prefixIcon":"前缀图标","hmk-prefixText":"前缀文字","hmk-spacing":"间距","hmk-spacing-comfy":"舒适","hmk-spacing-tiny":"紧凑","hmk-suffixIcon":"后缀图标","hmk-suffixText":"后缀文字","hmk-tabAt":"标签位置","hmk-tabAt-bottom-center":"下部居中","hmk-tabAt-bottom-left":"下部居左","hmk-tabAt-bottom-right":"下部居右","hmk-tabAt-top-center":"上部居中","hmk-tabAt-top-left":"上部居左","hmk-tabAt-top-right":"上部居右","hmk-title":"表单标题","hmk-trimed":"修剪空白","hmk-value":"输入值","hmk-valueMaxWidth":"值最大宽度","hmk-width":"控件宽度"}),Ti.Preload("ti/i18n/zh-cn/ti-datetime.i18n.json",{Apr:"四月",Aug:"八月",Dec:"十二月",Feb:"二月",Fri:"周五",Friday:"星期五",Jan:"一月",Jul:"七月",Jun:"六月",Mar:"三月",May:"五月",Mon:"周一",Monday:"星期一",Nov:"十一月",Oct:"十月",Sat:"周六",Saturday:"星期六",Sep:"九月",Sun:"周日",Sunday:"星期日",Thu:"周四",Thursday:"星期四",Tue:"周二",Tuesday:"星期二",Wed:"周三",Wednesday:"星期三","blank-date":"请选择日期","blank-date-range":"请选择日期范围","blank-datetime":"请选择日期时间","blank-month":"请选择月份","blank-time":"请选择时间","blank-time-range":"请选择时间范围",cal:{abbr:{Apr:"四月",Aug:"八月",Dec:"十二",Feb:"二月",Jan:"一月",Jul:"七月",Jun:"六月",Mar:"三月",May:"五月",Nov:"十一",Oct:"十月",Sep:"九月"},"d-range-beyond-days":"${yy0}年${MM0}月${dd0}至${dd1}日","d-range-beyond-months":"${yy0}年${MM0}月${dd0}日至${MM1}月${dd1}日","d-range-beyond-years":"${yy0}年${MM0}月${dd0}日至${yy1}年${MM1}月${dd1}日","d-range-in-same-day":"${yy0}年${MM0}月${dd0}日全天","m-range-beyond-months":"${yy0}年${MT0}至${MT1}","m-range-beyond-years":"${yy0}年${MT0}至${yy1}年${MT1}",week:["日","一","二","三","四","五","六"]},"du-in-min":"${n}分钟",time:{"any-time":"yyyy年M月d日","in-year":"M月d日","past-in-min":"刚刚","past-in-hour":"${min}分钟前","past-in-day":"${hour}小时前","past-in-week":"${day}天前","future-in-min":"即将","future-in-hour":"${min}分钟后","future-in-day":"${hour}小时后","future-in-week":"${day}天后"},"time-begin":"开始时间","time-end":"结束时间",today:"今天"}),Ti.Preload("ti/i18n/zh-cn/ti-obj-creation.i18n.json",{"toc-auto-type":"全部类型","toc-free":"请输入对象完整名称，包括扩展名，譬如 `myfile.xml`","toc-tip":"新对象名称"}),Ti.Preload("ti/i18n/zh-cn/ti-text-editor.i18n.json",{"wordp-h0":"正文","wordp-h1":"标题 1","wordp-h2":"标题 2","wordp-h3":"标题 3","wordp-h4":"标题 4","wordp-h5":"标题 5","wordp-h6":"标题 6","wordp-heading":"标题级别","wordp-link":"超链接","wordp-nil-sel":"请先选择一段文字"}),Ti.Preload("ti/i18n/zh-cn/ti-text-json.i18n.json",{"json-Array":"数组","json-Boolean":"布尔","json-Float":"小数","json-Integer":"整数","json-Nil":"空值","json-Number":"数字","json-Object":"对象","json-String":"字符串","json-new-key":"请输入一个新键名"}),Ti.Preload("ti/i18n/zh-cn/web.i18n.json",{"auth-bind":"绑定","auth-bind-email-title":"绑定邮箱","auth-bind-phone-title":"绑定手机","auth-blank-email":"邮箱不能为空","auth-blank-name":"名称不能为空","auth-blank-name-passwd":"名称或者密码不能为空","auth-blank-phone":"手机号不能为空","auth-doing":"正在验证","auth-email-tip":"邮箱地址","auth-email-title":"邮件密码登录/注册","auth-email-vcode":"邮件密码","auth-email-vcode-get":"获取邮件密码","auth-go-email":"邮件密码登录/注册","auth-go-passwd":"账号密码登录","auth-go-phone":"短信密码登录/注册","auth-login":"登录","auth-login-NoSaltedPasswd":"你还未初始化您的登录密码，请切换至【${ta?验证码}】登录，之后前往【用户中心 > 安全设置】初始化您的登录密码，谢谢","auth-login-or-signup":"登录/注册","auth-ok":"账号验证通过","auth-passwd-getback":"找回密码","auth-passwd-name-email-tip":"邮箱地址/登录名","auth-passwd-name-phone-tip":"手机号/登录名","auth-passwd-tip":"密码","auth-passwd-title":"账号密码登录","auth-phone-email-get":"获取邮箱验证码","auth-phone-tip":"手机号","auth-phone-title":"短信密码登录/注册","auth-phone-vcode":"短信密码","auth-phone-vcode-get":"获取短信密码","auth-reset-passwd-by-email":"用邮箱重置密码","auth-reset-passwd-by-email-sent":"已经向您的注册邮箱 ${email} 发送了邮件密码","auth-reset-passwd-by-email-tip":"请输入注册邮箱地址","auth-reset-passwd-by-passwd":"用旧密码重置密码","auth-reset-passwd-by-phone":"用手机重置密码","auth-reset-passwd-by-phone-sent":"已经向您的手机 ${phone} 发送了短信密码","auth-reset-passwd-by-phone-tip":"请输入注册手机号码","auth-reset-passwd-new":"新密码（最少6位）","auth-reset-passwd-old":"旧密码","auth-reset-passwd-ren":"再次确认","auth-reset-passwd-save":"立即重置密码","auth-sending-vcode":"正在发送验证码","auth-sent-ok":"${ta?验证码}已发出，请在${by}查收，${min}分钟内有效","auth-ta-by-email":"邮箱里","auth-ta-by-phone":"手机上","auth-ta-email":"邮件密码","auth-ta-phone":"手机密码","auth-vcode-delay":"${sec} 秒后重新发送","auth-vcode-lost":"收不到验证码？","e-www-invalid-captcha":"${ta?验证码}错误","e-www-login-invalid-passwd":"账号密码错误","e-www-login-noexists":"账号不存在",mine:"我的","my-favors":"我的收藏","my-favors-blog":"收藏的博客","my-favors-goods":"收藏的商品","my-favors-posts":"收藏的文章","my-favors-spots":"收藏的景点","my-favors-video":"收藏的视频","my-orders":"我的订单","my-orders-shop":"购物订单","my-orders-video":"视频订单","my-passwd":"重置密码","my-profile":"我的资料","my-shipping-address":"收货地址","my-shopping-car":"购物车","or-st-dn":"已完成","or-st-fa":"支付失败","or-st-nw":"新建","or-st-ok":"支付成功","or-st-sd":"已发货","or-st-wt":"待支付","pay-by-free":"免费","pay-by-paypal":"PayPal","pay-by-wx-jsapi":"微信JSAPI","pay-by-wx-qrcode":"微信扫码","pay-by-wx-scan":"微信付款码","pay-by-zfb-qrcode":"支付宝扫码","pay-by-zfb-scan":"支付宝付款码","pay-checkout-it-amount":"数量","pay-checkout-it-name":"商品名称","pay-checkout-it-price":"单价","pay-checkout-it-subtotal":"小计","pay-checkout-tip":"请确认你购买的商品数量和金额","pay-paypal":"PayPal","pay-proceed-check":"检查支付结果","pay-proceed-ing":"正在检查...","pay-re-fail":"支付失败","pay-re-nil":"支付结果是一只薛定谔的猫","pay-re-ok":"支付成功","pay-re-wait":"等待支付中","pay-step-checkout-title":"确认订单","pay-step-choose-nil":"☝ 请选择上面的一个支付方式 👆","pay-step-choose-tip":"您可以选择下面任意一种支付方式支付本订单","pay-step-choose-tip2":"您将使用${val}支付本订单","pay-step-choose-title":"支付方式","pay-step-choose-title2":"选择支付方式","pay-step-done-title":"完成","pay-step-proceed-create-order":"正在创建订单...","pay-step-proceed-fetch-order":"正在获取订单...","pay-step-proceed-nil":"您未选择任何支付方式","pay-step-proceed-tip":"使用${val}支付本订单","pay-step-proceed-title":"支付","pay-tip-wx-qrcode":"请于15分钟内用微信扫一扫付款码","pay-tip-zfb-qrcode":"请于15分钟内用支付宝扫一扫付款码","pay-title":"支付流程","pay-wx":"微信支付","pay-zfb":"支付宝","paypal-approve-tip":"已经在新标签里为您打开了PayPal支付页面，如果没有打开，请点击☝上面的图标。支付完毕，页面会自动感知到，如果没有反应，试着点击👇下面的【检查支付结果】按钮。","shop-basket-clean-confirm":"您确定要清空购物车内全部商品吗？这是一个不能撤回的操作。"}),Ti.Preload("ti/i18n/zh-cn/wn-manager.i18n.json",{"ti-loading":"加载中...","wn-adaptlist":"对象浏览器","wn-create-fail":"创建失败","wn-create-invalid":"新对象名称不能包括非法字符","wn-create-ok":"创建成功","wn-create-too-long":"新对象名称过长","wn-del-item":'正在删除: "${name}"',"wn-del-no-empty-folder":'目录"${nm}"不是空的，您是否要全部删除？点击"否"跳过',"wn-del-none":"请选择至少一个文件进行删除!","wn-del-ok":"已有 ${N} 个对象被移除","wn-download-dir":'对象 "${nm}" 是一个目录，点击"继续"将跳过它并下载下一个文件，点击"终止"将结束本次操作!',"wn-download-none":"请选择至少一个文件进行下载!","wn-download-too-many":"即将逐个下载 ${N} 个文件，继续吗？","wn-expose-hidden-off":"不显示隐藏的对象","wn-expose-hidden-on":"显示隐藏的对象","wn-gui":"通用布局界面","wn-obj-preview":"对象预览","wn-obj-puretext":"纯文本编辑器","wn-obj-single-com":"单控件测试套","wn-publish-done":"发布成功","wn-publish-to-nil":"未设置发布目标","wn-publish-to-noexist":"发布目标不存在","wn-rename":'重命名对象 "${name}"',"wn-rename-fail":"重命名失败","wn-rename-invalid":"名称不能包括非法字符","wn-rename-none":"请选择一个文件重命名!","wn-rename-ok":"重命名成功","wn-rename-suffix-changed":"您的文件后缀名发生变化，您需要自动为您补全原来的后缀吗？","wn-rename-too-long":"名称过长","wn-thing-manager":"数据管理器","wn-view-opening":"正在加载界面..."}),Ti.Preload("ti/i18n/zh-cn/wn-obj-preview.i18n.json",{"wop-fullscreen-enter":"进入全屏","wop-fullscreen-quit":"退出全屏"}),Ti.Preload("ti/i18n/zh-cn/wn-thing.i18n.json",{"thing-clean":"清空回收站","thing-cleaning":"正在清空...","thing-content":"对象内容","thing-content-hide":"隐藏内容","thing-content-show":"显示内容","thing-create":"创建新对象","thing-create-in-recyclebin":"请先退出回收站，再创建新对象","thing-enter-recyclebin":"打开回收站","thing-files":"对象文件表","thing-files-hide":"隐藏文件表","thing-files-show":"显示文件表","thing-filter-kwdplhd":"请输入查询条件","thing-leave-recyclebin":"退出回收站","thing-meta":"对象属性","thing-meta-hide":"隐藏属性","thing-meta-show":"显示属性","thing-recycle-bin":"回收站","thing-restore":"恢复选中","thing-restore-none":"请先选择要恢复的数据","thing-restoring":"正在恢复..."}),Ti.Preload("ti/i18n/zh-cn/_net.i18n.json",{"net-ct":"创建时间","net-flt-nil":"查找视频名称","net-vod-add-video":"添加视频","net-vod-cate":"视频分类","net-vod-du-long":"长视频","net-vod-du-short":"短视频","net-vod-du-tv":"剧集视频","net-vod-duration":"视频时长","net-vod-size":"视频大小","net-vod-video-nil":"请选择一个视频查看详情"}),Ti.Preload("ti/i18n/zh-cn/_ti.i18n.json",{add:"添加","add-item":"添加新项",amount:"数量",attachment:"附件","batch-none":"请从下面列表中选择至少一个对象进行批量更新","batch-update":"批量更新...",blank:"空白","blank-to-edit":"请选择要编辑的项目",buy:"购买","buy-now":"立即购买",cancel:"取消","cancel-all":"取消选中",candidate:"备选项",captcha:"验证码","captcha-chagne":"换一张","captcha-tip":"请输入图中的验证码",checked:"已选中",choose:"选择","choose-file":"选择文件","choose-obj":"选择对象",clean:"清理",clear:"清除",close:"关闭",confirm:"确认",console:"控制台",content:"内容",continue:"继续",create:"新建","create-now":"立即创建",creating:"正在创建...",debug:"调试",default:"默认",del:"删除","del-checked":"删除选中","del-ing":"正在删除...","del-none":"请从下面列表中选择至少一个对象进行删除",desktop:"桌面",detail:"详情",doing:"正在执行...",download:"下载","download-to-local":"下载到本地","drop-file-here-to-upload":"拖拽文件至此以便上传","drop-here":"拖拽文件至此","e-auth-account-noexists":"账户不存在","e-auth-home-forbidden":"账户不具备进入主目录的权限","e-auth-login-NoPhoneOrEmail":"错误的手机号或邮箱地址","e-auth-login-NoSaltedPasswd":"未设置合法的密码","e-auth-login-invalid-passwd":"账户密码未通过校验","e-io-obj-exists":"但是对象已然存在","e-io-obj-noexists":"对象其实并不存在","e-io-obj-noexistsf":"对象[${nm}]其实并不存在",edit:"编辑","edit-com":"编辑控件",empty:"空","empty-data":"无数据",error:"错误","export-data":"导出数据...",fail:"失败",false:"否",favorites:"收藏",female:"女",filter:"过滤",find:"查找","find-data":"查找数据",home:"主目录","i-known":"我知道了",icon:"图标","icon-code-tip":"请输入图标代码，如 zmdi-case","import-data":"导入数据...",info:"信息",input:"输入","input-tags":"输入标签",lat:"北纬",lng:"东经",loading:"加载中...",login:"登录",logout:"退出","logout-ing":"正在注销...",male:"男",me:"我",media:"媒体",meta:"元数据",mine:"我的",modal:"模式",more:"更多",msg:"消息",name:"名称","new-item":"新项目",next:"下一步",nil:"无","nil-obj":"请选择一个对象",no:"否","no-saved":"您有未保存的数据","no-selected":"未选择","no-title":"无标题",obj:"对象",off:"关",ok:"确定",on:"开",open:"打开","open-newtab":"在新标签打开",others:"其他","paging-change-pgsz":"当前每页有${pgsz}条记录，您想修改为：","paging-change-pgsz-invalid":"页大小必须是整数数字，而且必须大于0，可您... -_-!","paging-change-pn":"当前第${pn}页，您想跳转到：（请输入 1 至 ${pgc} 之间的数字）","paging-change-pn-invalid":"页码必须是整数数字，而且必须为 1 至 ${pgc} 之间的数字","paging-first":"首页","paging-last":"尾页","paging-next":"后一页","paging-prev":"前一页","paging-sum":"共${pgc}页${sum}条记录，当前${count}/${pgsz}",passwd:"密码","passwd-reset":"重置密码",path:"路径",phone:"手机",prev:"上一步",price:"价格",profile:"资料","profile-edit":"编辑资料",prompt:"询问",properties:"属性",publish:"发布",publishing:"正在发布...",refresh:"刷新",reloading:"重新加载数据...",remove:"移除",removing:"正在移除...",rename:"重命名...",renaming:"正在重命名...",revoke:"撤销","revoke-change":"撤销修改",save:"保存","save-change":"保存修改","save-done":"保存成功","save-now":"立即保存",saving:"正在保存...",score:"评分","score-count":"打分人数",select:"选择","select-all":"全部选中",settings:"设置","source-code":"源代码",stop:"停止",structure:"结构",success:"成功",tablet:"平板",terminal:"终端",terminate:"终止",text:"文字",title:"标题","total-count":"共 ${nb?0} ${unit?项}",trace:"跟踪",track:"消息",true:"是",type:"类型","under-construction":"正在施工中",unknown:"未知",upload:"上传","upload-done":"文件上传已完成","upload-file":"上传文件...","upload-nofinished":"文件上传还没有完成",uploading:"正在上传",value:"值",view:"查看","view-resource":"查看源代码",warn:"警告",yes:"是"}),Ti.Preload("ti/i18n/zh-cn/_wn.i18n.json",{"wn-edit-com-nil":"默认为标签控件","wn-invalid-mimes":'不支持的文件内容类型 "${current}"，仅能支持 "${supports}"',"wn-invalid-types":'不支持的文件扩展名 "${current}"，仅能支持 "${supports}"',"wn-key-c":"创建者","wn-key-ct":"创建时间","wn-key-d0":"D0","wn-key-d1":"D1","wn-key-data":"数据","wn-key-duration":"时长","wn-key-expi":"过期时间","wn-key-g":"主组","wn-key-grp-advance":"高级","wn-key-grp-basic":"基本","wn-key-grp-customized":"自定义","wn-key-grp-more":"更多","wn-key-grp-others":"其他","wn-key-grp-privilege":"权限","wn-key-grp-thumb":"缩略图","wn-key-grp-timestamp":"时间戳","wn-key-height":"高","wn-key-icon":"图标","wn-key-id":"ID","wn-key-len":"大小","wn-key-lm":"修改","wn-key-m":"修改者","wn-key-md":"基本权限","wn-key-mime":"MIME","wn-key-nm":"对象名","wn-key-ph":"路径","wn-key-pid":"父对象","wn-key-pvg":"定制权限","wn-key-race":"族类","wn-key-sha1":"SHA1","wn-key-thumb":"缩略图","wn-key-title":"标题","wn-key-tp":"类型","wn-key-width":"宽","wn-obj-nosaved":"您有未保存的对象","wn-race-DIR":"目录","wn-race-FILE":"文件","wn-th-acc-pwd-choose-none":"请选择要重置密码的账号（可多选）","wn-th-acc-pwd-done":"已经为${n}名用户重置了密码","wn-th-acc-pwd-invalid":"密码中不得包含单双引号星号等非法字符","wn-th-acc-pwd-reset-tip":"将密码重置为","wn-th-acc-pwd-too-short":"您输入的密码过短，不能少于6位，最好为数字字母以及特殊字符的组合","wn-th-recount-media":"重新计算当前文件数量","wn-th-recount-media-done":"当前文件数量: ${n}"});