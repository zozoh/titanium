"use strict";function _toArray(e){return _arrayWithHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableRest()}function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,r=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return r=e.done,e},e:function(e){o=!0,a=e},f:function(){try{r||null==i.return||i.return()}finally{if(o)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function asyncGeneratorStep(e,t,n,i,a,r,o){try{var s=e[r](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(i,a)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){function r(e){asyncGeneratorStep(s,i,a,r,o,"next",e)}function o(e){asyncGeneratorStep(s,i,a,r,o,"throw",e)}var s=e.apply(t,n);r(void 0)})}}Ti.Preload("ti/com/hmaker/edit-com/form/edit-com-form.html",'<ti-form \n  class="hmaker-edit-com-form"\n  v-bind="FormConf"/>'),function(){var e={props:{value:{type:Object,default:void 0},keepTabIndexBy:{type:String,default:"hMakerEditComForm"}},computed:{FormConf:function(){return{mode:"tab",keepTabIndexBy:this.keepTabIndexBy,spacing:"tiny",data:this.value,fields:[{type:"Group",title:"i18n:hmk-aspect",fields:[{name:"title",title:"i18n:hmk-title",type:"String",comType:"ti-input"},{name:"icon",title:"i18n:hmk-icon",type:"String",comType:"ti-input-icon"},{name:"mode",title:"i18n:hmk-mode",type:"String",defaultAs:"all",comType:"ti-switcher",comConf:{options:[{value:"all",text:"i18n:hmk-mode-all"},{value:"tab",text:"i18n:hmk-mode-tab"}]}},{name:"tabAt",title:"i18n:hmk-tabAt",type:"String",defaultAs:"top-center",width:240,hidden:{mode:{name:"isEqual",args:"tab",not:!0}},comType:"ti-droplist",comConf:{placeholder:"i18n:hmk-tabAt-top-center",autoI18n:!0,options:[{value:"top-left",text:"i18n:hmk-tabAt-top-left"},{value:"top-center",text:"i18n:hmk-tabAt-top-center"},{value:"top-right",text:"i18n:hmk-tabAt-top-right"},{value:"bottom-left",text:"i18n:hmk-tabAt-bottom-left"},{value:"bottom-center",text:"i18n:hmk-tabAt-bottom-center"},{value:"bottom-right",text:"i18n:hmk-tabAt-bottom-right"}]}},{name:"currentTab",title:"i18n:hmk-currentTab",type:"Integer",defaultAs:0,width:120,hidden:{mode:{name:"isEqual",args:"tab",not:!0}},comType:"ti-input-num"},{name:"spacing",title:"i18n:hmk-spacing",type:"String",defaultAs:"comfy",comType:"ti-switcher",comConf:{options:[{value:"comfy",text:"i18n:hmk-spacing-comfy"},{value:"tiny",text:"i18n:hmk-spacing-tiny"}]}},{name:"adjustDelay",title:"i18n:hmk-adjustDelay",type:"Integer",defaultAs:0,width:120,comType:"ti-input-num"},{name:"blankAs",title:"i18n:hmk-blankAs",type:"Object",comType:"ti-input"}]},{type:"Group",title:"i18n:hmk-fields",fields:[{name:"fields",type:"Array",height:"100%",comType:"hmaker-edit-form-fieldset",comConf:{className:"ti-fill-parent",keepTabIndexBy:this.keepTabIndexBy}}]},{type:"Group",title:"i18n:hmk-data",fields:[{title:"i18n:hmk-form-data",name:"data",comType:"ti-input"},{name:"fieldStatus",title:"i18n:hmk-fieldStatus",comType:"ti-input"},{name:"onlyFields",title:"i18n:hmk-form-onlyFields",type:"Boolean",defaultAs:!0,comType:"ti-toggle"}]},{title:"i18n:hmk-measure",fields:[{title:"i18n:hmk-form-width",name:"width",comType:"ti-input"},{title:"i18n:hmk-form-height",name:"height",comType:"ti-input"}]}]}}},methods:{},created:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Wn.Dict.hMakerComponents();case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()};Ti.Preload("ti/com/hmaker/edit-com/form/edit-com-form.mjs",e)}(),Ti.Preload("ti/com/hmaker/edit-com/form/field/edit-form-field.html",'<div class="hmaker-edit-form-field ti-scroll-v">\n  \x3c!--\n    Empty\n  --\x3e\n  <ti-loading \n    v-if="isEmpty"\n      icon="fas-hand-point-left"\n      text="i18n:hmaker-edit-form-field-nil"/>\n  \x3c!--\n    Editing\n  --\x3e\n  <ti-form\n    v-else\n      v-bind="TheForm"\n      :data="value"/>\n</div>'),function(){var e={props:{value:{type:Object,default:void 0},keepTabIndexBy:{type:String,default:void 0}},computed:{isEmpty:function(){return Ti.Util.isNil(this.value)},TheFormGeneralFields:function(){return[{hidden:this.isGroup,name:"type",title:"hmk-field-type",defaultAs:"String",comType:"ti-droplist",comConf:{placeholder:"i18n:hm-type-String",options:function(e){return _.map(e,function(e){return{icon:Ti.I18n.get("hm-type-icons")[e],value:e,text:Ti.I18n.get("hm-type-".concat(e))}})}(["Object","Number","Integer","Boolean","String","Array"]),dropDisplay:["<icon>","text","value"]}},{name:"title",title:"hmk-field-title",comType:"ti-input"},{name:"icon",title:"hmk-field-icon",comType:"ti-input-icon"},{hidden:this.isGroup,name:"name",title:"hmk-field-name",comType:"ti-input"},{hidden:this.isGroup,name:"tip",title:"hmk-field-tip",comType:"ti-input"},{hidden:this.isGroup,name:"width",title:"hmk-field-width",width:120,comType:"ti-input"},{hidden:this.isGroup,name:"height",title:"hmk-field-height",width:120,comType:"ti-input"},{hidden:this.isGroup,name:"defaultAs",title:"hmk-field-defaultAs",comType:"ti-input",comConf:{autoJsValue:!0}},{hidden:this.isGroup,name:["comType","comConf"],title:"hmk-field-com",type:"Object",width:"auto",comType:"wn-combo-edit-com"}]},TheFormAdvanceFields:function(){return[{name:"disabled",title:"hmk-field-disabled",comType:"ti-input",comConf:{autoJsValue:!0}},{name:"hidden",title:"hmk-field-hidden",comType:"ti-input",comConf:{autoJsValue:!0}},{name:"checkEquals",title:"hmk-field-checkEquals",comType:"ti-toggle"},{name:"transformer",title:"hmk-field-transformer",comType:"ti-input-text",comConf:{autoJsValue:!0}},{name:"serializer",title:"hmk-field-serializer",comType:"ti-input-text",comConf:{autoJsValue:!0}}]},TheForm:function(){return{spacing:"tiny",keepTabIndexBy:this.keepTabIndexBy,fields:[{type:"Group",title:"i18n:hmk-fields-general",fields:this.TheFormGeneralFields},{type:"Group",title:"i18n:hmk-fields-advance",hidden:this.isGroup,fields:this.TheFormAdvanceFields}]}}},methods:{isGroup:function(e){return _.isArray(e.fields)||"Group"==e.type}}};Ti.Preload("ti/com/hmaker/edit-com/form/field/edit-form-field.mjs",e)}(),Ti.Preload("ti/com/hmaker/edit-com/form/field/_com.json",{name:"hmaker-edit-form-field",globally:!0,template:"./edit-form-field.html",mixins:["./edit-form-field.mjs"]}),Ti.Preload("ti/com/hmaker/edit-com/form/fieldset/edit-form-fieldset.html",'<ti-gui\n  class="hmaker-edit-form-fieldset"\n  :class="TopClass"\n  :layout="Layout"\n  :schema="Schema"\n  :can-loading="false"\n  @tree::select="OnFieldTreeSelect"\n  @detail::change="OnFieldChange"/>'),function(){var e={data:function(){return{myCurrentId:null}},props:{value:{type:Array,default:void 0},keepTabIndexBy:{type:String,default:"hMakerEditComForm"}},computed:{TopClass:function(){return this.getTopClass()},TheDetailCom:function(){return{comType:"hmaker-edit-form-field",comConf:{value:this.CurrentField,keepTabIndexBy:this.keepTabIndexBy?"".concat(this.keepTabIndexBy,"-field"):null}}},CurrentField:function(){if(this.myCurrentId){var e=this.$tree.findTableRow(this.myCurrentId);if(e)return e.rawData}},Layout:function(){return{type:"cols",border:!0,blocks:[{type:"rows",size:"37%",border:!0,blocks:[{size:40,body:"actions"},{name:"tree",body:"tree"}]},{name:"detail",body:"detail"}]}},Schema:function(){var e=this;return{actions:{comType:"ti-actionbar",comConf:{items:[{type:"action",icon:"im-plus",text:"i18n:hmaker-edit-form-new-field",action:function(){return e.addNewField()}},{type:"action",icon:"im-folder-add",text:"i18n:hmaker-edit-form-new-group",action:function(){return e.addNewGroup()}},{type:"line"},{type:"action",icon:"im-trash-can",action:function(){return e.removeSelectedFieldOrGroup()}},{type:"line"},{type:"action",icon:"im-arrow-up",action:function(){return e.moveSelectedFieldsUp()}},{type:"action",icon:"im-arrow-down",action:function(){return e.moveSelectedFieldsDown()}}]}},tree:{comType:"ti-tree",comConf:{data:this.value,showRoot:!1,puppetMode:!0,autoOpen:!0,border:"row",defaultOpenDepth:2,currentId:this.myCurrentId,nameBy:function(e){return e.name||e.title},childrenBy:function(e){return e.fields},leafBy:function(e){return"Group"!=e.type},display:[{key:"type",transformer:{name:"toStr",args:[{Group:"zmdi-collection-bookmark",Object:"zmdi-toys",Number:"zmdi-input-svideo",Integer:"zmdi-n-6-square",Boolean:"zmdi-toll",String:"zmdi-translate",Array:"zmdi-format-list-bulleted"}]},defaultAs:"im-question",comType:"ti-icon"},{key:"name",transformer:function(e){return _.isArray(e)?e.join("+"):e}},"title"],onInit:this.OnTreeInit}},detail:this.TheDetailCom}}},methods:{OnTreeInit:function(e){this.$tree=e},OnFieldTreeSelect:function(e){var t=e.currentId;this.myCurrentId=t},OnFieldChange:function(e){this.updateCurrentField(e)},getMyCurrent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.value;if(this.myCurrentId&&_.isArray(e)){var t=this.myCurrentId.split("/"),n={path:t,index:[],group:null,field:null};if(t.length>0)for(var i=t[0],a=0;a<e.length;a++){var r=e[a];if(_.isArray(r.fields)||"Group"==r.type){if(i==r.title){n.group=r,n.index.push(a);break}}else if(i==r.name){n.field=r,n.index.push(a);break}}if(t.length>1&&n.group&&_.isArray(n.group.fields))for(var o=t[1],s=0;s<n.group.fields.length;s++){var c=n.group.fields[s];o==c.name&&(n.field=c,n.index.push(s))}return n}},isGroup:function(e){return"Group"==e.type||_.isArray(e.fields)},selectNextIdByIndex:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value,i=[],a=_createForOfIteratorHelper(t);try{for(a.s();!(e=a.n()).done;){var r=e.value;if(!n||_.isEmpty(n))break;var o=_.nth(n,r);o||(o=_.nth(n,r-1)),o&&(i.push(o.name||o.title),n=o.fields)}}catch(e){a.e(e)}finally{a.f()}this.myCurrentId=i.join("/")||null},findByName:function(e){if(_.isArray(this.value))for(var t=0;t<this.value.length;t++){var n=this.value[t],i=n.name||n.title;if(_.isEqual(e,i)){var a={index:[t],path:[i],field:n};return this.isGroup(n)?a.group=n:a.field=n,a}if(this.isGroup(n))for(var r=0;r<n.fields.length;r++){var o=n.fields[r],s=o.name||o.title;if(_.isEqual(e,s))return{index:[t,r],path:[i,s],group:n,field:o}}}},existsName:function(e){return!!this.findByName(e)},updateCurrentField:function(e){var t=_.cloneDeep(this.value),n=this.getMyCurrent(t);if(console.log(n),n.group&&n.field){var i=_.last(n.index);n.group.fields[i]=e}else if(n.group){var a=_.first(n.index);_.assign(t[a],e)}else{if(!n.field)return;t[_.first(n.index)]=e}this.selectNextIdByIndex(n.index,t),this.$notify("change",t)},addFieldOrGroup:function(e){var t=_.cloneDeep(this.value)||[],n=this.getMyCurrent(t),i=[];n?n.group?this.isGroup(e)?(Ti.Util.insertToArray(t,_.first(n.index),e),i.push(e.title)):n.field?(Ti.Util.insertToArray(n.group.fields,_.last(n.index)+1,e),i.push(n.path[0],e.name)):_.isArray(n.group.fields)?(n.group.fields.push(e),i.push(n.path[0],e.name)):(n.group.fields=[e],i.push(n.path[0],e.name)):(Ti.Util.insertToArray(t,_.last(n.index)+1,e),i.push(e.name||e.title)):t.push(e),this.$notify("change",t),this.myCurrentId=i.join("/")},addNewField:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ti.Prompt("i18n:hmaker-edit-form-new-field-tip");case 2:if(n=t.sent,n=_.trim(n)){t.next=6;break}return t.abrupt("return");case 6:i=_.without(n.split(/[\s\W]/),""),a=_createForOfIteratorHelper(i),t.prev=8,a.s();case 10:if((r=a.n()).done){t.next=18;break}if(o=r.value,/^[a-z_][\da-z_]+$/.test(o)){t.next=16;break}return t.next=15,Ti.Toast.Open("i18n:hmaker-edit-form-new-field-e0","error");case 15:return t.abrupt("return",t.sent);case 16:t.next=10;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(8),a.e(t.t0);case 23:return t.prev=23,a.f(),t.finish(23);case 26:if(s=1==i.length?n:i,!e.existsName(s)){t.next=31;break}return t.next=30,Ti.Toast.Open({content:"i18n:hmaker-edit-form-new-field-e1",type:"error",vars:{val:n},position:"center",duration:5e3});case 30:return t.abrupt("return",t.sent);case 31:e.addFieldOrGroup({name:s,type:_.isArray(s)?"Object":"String",comType:"ti-input"});case 32:case"end":return t.stop()}},t,null,[[8,20,23,26]])}))()},addNewGroup:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ti.Prompt("i18n:hmaker-edit-form-new-group-tip");case 2:if(n=t.sent,n=_.trim(n)){t.next=6;break}return t.abrupt("return");case 6:if(!e.existsName(n)){t.next=10;break}return t.next=9,Ti.Toast.Open({content:"i18n:hmaker-edit-form-new-field-e1",type:"error",vars:{val:n},position:"center",duration:5e3});case 9:return t.abrupt("return",t.sent);case 10:e.addFieldOrGroup({type:"Group",title:n,fields:[]});case 11:case"end":return t.stop()}},t)}))()},removeSelectedFieldOrGroup:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o,s,c,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.getMyCurrent()){t.next=3;break}return t.abrupt("return",Ti.Toast.Open("i18n:hmaker-edit-form-nil-field","warn"));case 3:if(!n.group||n.field){t.next=16;break}if(a=!0,_.isEmpty(n.group.fields)){t.next=9;break}return t.next=8,Ti.Confirm("i18n:hmaker-edit-form-del-group-confirm",{closer:!0,textYes:"i18n:hmaker-edit-form-del-group-all",textNo:"i18n:hmaker-edit-form-del-group-only"});case 8:a=t.sent;case 9:if(!_.isUndefined(a)){t.next=11;break}return t.abrupt("return");case 11:r=_.first(n.index),i=_.filter(e.value,function(e,t){return t!=r}),!1===a&&(_.isEmpty(n.group.fields)||(o=Ti.Util).insertToArray.apply(o,[i,r].concat(_toConsumableArray(n.group.fields)))),t.next=17;break;case 16:n.group&&n.field?(i=_.cloneDeep(e.value),s=_.cloneDeep(n.group),c=_.first(n.index),l=_.last(n.index),s.fields=_.filter(s.fields,function(e,t){return t!=l}),i[c]=s):(u=_.first(n.index),i=_.filter(e.value,function(e,t){return t!=u}));case 17:e.selectNextIdByIndex(n.index,i),e.$notify("change",i);case 19:case"end":return t.stop()}},t)}))()},moveSelectedFieldsUp:function(){var e=_.cloneDeep(this.value),t=this.getMyCurrent(e);if(!t)return Ti.Toast.Open("i18n:hmaker-edit-form-nil-field","warn");var n=_.first(t.index);if(t.group&&t.field){var i=_.last(t.index);0==i?(_.remove(t.group.fields,function(e,t){return t==i}),Ti.Util.insertToArray(e,n,t.field),this.myCurrentId=_.last(t.path)):(t.group.fields[i]=t.group.fields[i-1],t.group.fields[i-1]=t.field)}else if(n>0){var a=e[n-1];this.isGroup(a)&&t.field&&this.$tree.isOpened(a.title)?(_.remove(e,function(e,t){return t==n}),_.isArray(a.fields)?a.fields.push(t.field):a.fields=[t.field],this.myCurrentId=[a.title,_.last(t.path)].join("/")):(e[n]=e[n-1],e[n-1]=t.field||t.group)}this.$notify("change",e)},moveSelectedFieldsDown:function(){var e=_.cloneDeep(this.value),t=this.getMyCurrent(e);if(!t)return Ti.Toast.Open("i18n:hmaker-edit-form-nil-field","warn");var n=_.first(t.index);if(t.group&&t.field){var i=_.last(t.index);i>=t.group.fields.length-1?(_.remove(t.group.fields,function(e,t){return t==i}),Ti.Util.insertToArray(e,n+1,t.field),this.myCurrentId=_.last(t.path)):(t.group.fields[i]=t.group.fields[i+1],t.group.fields[i+1]=t.field)}else if(n<e.length-1){var a=e[n+1];this.isGroup(a)&&t.field&&this.$tree.isOpened(a.title)?(_.remove(e,function(e,t){return t==n}),_.isArray(a.fields)?Ti.Util.insertToArray(a.fields,0,t.field):a.fields=[t.field],this.myCurrentId=[a.title,_.last(t.path)].join("/")):(e[n]=e[n+1],e[n+1]=t.field||t.group)}this.$notify("change",e)}},mounted:function(){var e=Ti.Storage.local.getObject("vue-drop-me",null);if(e){var t=Date.now()-e.timeInMs;console.log({du:t}),t<1e3&&(this.myCurrentId=e.myCurrentId),Ti.Storage.local.remove("vue-drop-me")}else this.selectNextIdByIndex([0])},beforeDestroy:function(){Ti.Storage.local.setObject("vue-drop-me",{myCurrentId:this.myCurrentId,timeInMs:Date.now()})}};Ti.Preload("ti/com/hmaker/edit-com/form/fieldset/edit-form-fieldset.mjs",e)}(),Ti.Preload("ti/com/hmaker/edit-com/form/fieldset/_com.json",{name:"hmaker-edit-form-fieldset",globally:!0,template:"./edit-form-fieldset.html",mixins:["./edit-form-fieldset.mjs"],components:["@com:hmaker/edit-com/form/field","@com:hmaker/edit-com/form/group"]}),Ti.Preload("ti/com/hmaker/edit-com/form/group/edit-form-group.html",'<div class="hmaker-edit-form-group">\n  Group: {{value}}\n</div>'),function(){var e={props:{value:{type:Object,default:void 0}},computed:{},methods:{}};Ti.Preload("ti/com/hmaker/edit-com/form/group/edit-form-group.mjs",e)}(),Ti.Preload("ti/com/hmaker/edit-com/form/group/_com.json",{name:"hmaker-edit-form-group",globally:!0,template:"./edit-form-group.html",mixins:["./edit-form-group.mjs"]}),Ti.Preload("ti/com/hmaker/edit-com/form/_com.json",{name:"hmaker-edit-com-form",globally:!0,template:"./edit-com-form.html",mixins:["./edit-com-form.mjs"],components:["@com:hmaker/edit-com/form/fieldset"]}),Ti.Preload("ti/com/hmaker/edit-com/hmaker-edit-com.html",'<div class="hmaker-edit-com">\n  \x3c!--\n    Select Com Type\n  --\x3e\n  <div class="as-com-type">\n    <ti-combo-input \n      v-bind="ComTypeComboInput"\n      :value="ComType"\n      @change="OnComTypeChange"/>\n  </div>\n  \x3c!--\n    Edit Com Conf\n  --\x3e\n  <div class="as-com-conf"><div class="as-con">\n    \x3c!--\n      Show Com Editor\n    --\x3e\n    <component\n      v-if="hasEditCom"\n        class="ti-fill-parent"\n        :is="EditComType"\n        v-bind="EditComConf"\n        @change="OnComConfChange"/>\n    \x3c!--\n      Show Blank\n    --\x3e\n    <ti-loading \n      v-else\n        icon="fas-hand-pointer"\n        text="i18n:hmaker-com-conf-blank"/>\n  </div></div>\n</div>'),function(){var e={data:function(){return{myCom:null}},props:{value:{type:Object,default:function(){return{}}}},computed:{Dict:function(){return Wn.Dict.hMakerComponents()},ComTypeComboInput:function(){return{options:this.Dict,placeholder:"i18n:hmaker-com-type-blank",autoI18n:!0,mustInList:!0,autoCollapse:!0,dropDisplay:["<icon:im-plugin>","title|name"]}},hasEditCom:function(){return!!this.myCom},ComType:function(){return _.get(this.value,"comType")},ComConf:function(){return _.get(this.value,"comConf")},EditComType:function(){return _.get(this.myCom,"editComType")},EditComConf:function(){var e=_.get(this.myCom,"editComConf");return Ti.Util.explainObj(this.value,e)}},methods:{OnComTypeChange:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.Dict.getItem(e);case 2:t.myCom=n.sent,t.notifyChange({comType:e,comConf:t.ComConf});case 4:case"end":return n.stop()}},n)}))()},OnComConfChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.notifyChange({comType:this.ComType,comConf:e})},notifyChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$notify("change",e)},reloadMyCom:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(_.isEmpty(e.value)){t.next=7;break}return n=e.value.comType,t.next=4,e.Dict.getItem(n);case 4:e.myCom=t.sent,t.next=8;break;case 7:e.myCom=null;case 8:case"end":return t.stop()}},t)}))()}},watch:{value:{handler:"reloadMyCom",immediate:!0}}};Ti.Preload("ti/com/hmaker/edit-com/hmaker-edit-com.mjs",e)}(),Ti.Preload("ti/com/hmaker/edit-com/_com.json",{name:"hmaker-edit-com",globally:!0,template:"./hmaker-edit-com.html",mixins:["./hmaker-edit-com.mjs"],components:["@com:hmaker/edit-com/form","@com:wn/combo/edit-com"]}),Ti.Preload("ti/com/hmaker/edit-site-actions/edit-site-actions.html",'<div class="hmaker-edit-site-actions">\n  Actions\n</div>'),function(){var e={inheritAttrs:!1,data:function(){return{}},props:{data:{type:Object,default:function(){return{}}}},computed:{theConfig:function(){}},methods:{}};Ti.Preload("ti/com/hmaker/edit-site-actions/edit-site-actions.mjs",e)}(),Ti.Preload("ti/com/hmaker/edit-site-actions/_com.json",{name:"hmaker-edit-site-actions",globally:!0,template:"./edit-site-actions.html",mixins:["./edit-site-actions.mjs"]}),Ti.Preload("ti/com/hmaker/edit-site-apis/edit-site-apis.html",'<div class="hmaker-edit-site-apis">\n  Apis\n</div>'),function(){var e={inheritAttrs:!1,data:function(){return{}},props:{data:{type:Object,default:function(){return{}}}},computed:{theConfig:function(){}},methods:{}};Ti.Preload("ti/com/hmaker/edit-site-apis/edit-site-apis.mjs",e)}(),Ti.Preload("ti/com/hmaker/edit-site-apis/_com.json",{name:"hmaker-edit-site-apis",globally:!0,template:"./edit-site-apis.html",mixins:["./edit-site-apis.mjs"]}),Ti.Preload("ti/com/hmaker/edit-site-blocks/edit-site-blocks.html",'<div class="hmaker-edit-site-blocks">\n  Blocks\n</div>'),function(){var e={inheritAttrs:!1,data:function(){return{}},props:{data:{type:Object,default:function(){return{}}}},computed:{theConfig:function(){}},methods:{}};Ti.Preload("ti/com/hmaker/edit-site-blocks/edit-site-blocks.mjs",e)}(),Ti.Preload("ti/com/hmaker/edit-site-blocks/_com.json",{name:"hmaker-edit-site-blocks",globally:!0,template:"./edit-site-blocks.html",mixins:["./edit-site-blocks.mjs"]}),Ti.Preload("ti/com/hmaker/edit-site-general/edit-site-general.html",'<ti-form class="hmaker-edit-site-general"\n  :fields="TheFields"\n  :data="data"/>'),function(){var e={inheritAttrs:!1,data:function(){return{}},props:{data:{type:Object,default:function(){return{}}}},computed:{TheFields:function(){return[{title:"i18n:hmaker-site-k-domain",name:"domain"},{title:"i18n:hmaker-site-k-apiBase",name:"apiBase"},{title:"i18n:hmaker-site-k-captcha",name:"captcha"},{title:"i18n:hmaker-site-k-base",name:"base"},{title:"i18n:hmaker-site-k-entry",name:"entry"}]}},methods:{}};Ti.Preload("ti/com/hmaker/edit-site-general/edit-site-general.mjs",e)}(),Ti.Preload("ti/com/hmaker/edit-site-general/_com.json",{name:"hmaker-edit-site-general",globally:!0,template:"./edit-site-general.html",mixins:["./edit-site-general.mjs"]}),Ti.Preload("ti/com/hmaker/edit-site-nav/edit-site-nav.html",'<div class="hmaker-edit-site-nav">\n  \x3c!--\n    Nav Table\n  --\x3e\n  <div class="as-table ti-fill-parent">\n    <ti-table class="ti-fill-parent"\n      :data="TableData"\n      :fields="TableFields"\n      :selectable="true"\n      :checkable="true"\n      :multi="true"\n      :current-id="myCurrentId"\n      :checked-ids="myCheckedIds"\n      @select="OnRowSelected"/>\n  </div>\n  \x3c!--\n    Nav Form\n  --\x3e\n  <div class="as-form">\n    <ti-form\n      class="ti-fill-parent"\n      :fields="FormFields"\n      :blank-as="FormBlankAs"\n      :data="FormData"\n      @change="OnFormChanged"/>\n  </div>\n</div>'),function(){var e={data:function(){return{myCurrentIndex:-1,myCurrentId:null,myCheckedIds:{},myActionStatus:{remove:!1,moveUp:!1,moveDown:!1}}},props:{data:{type:Array,default:function(){return[]}}},computed:{TableData:function(){var e=[];return _.forEach(this.data,function(t,n){e.push(_.assign({id:"N".concat(n)},t))}),e},TableLastIndex:function(){return this.TableData.length-1},TableFields:function(){return[{title:"i18n:hmaker-nav-k-display",display:[{key:"icon",comType:"ti-icon"},"title"],width:-150},{title:"i18n:hmaker-nav-k-type",name:"type",width:-100,display:[{comType:"ti-icon",transformer:{name:"toStr",args:{page:"zmdi-file",href:"zmdi-link",dispatch:"zmdi-flash-auto"}}},{transformer:{name:"toStr",args:{page:"i18n:hmaker-nav-tp-page",href:"i18n:hmaker-nav-tp-href",dispatch:"i18n:hmaker-nav-tp-dispatch"}}}]},{title:"i18n:hmaker-nav-k-value",display:"value"}]},FormBlankAs:function(){return{icon:"zmdi-long-arrow-return zmdi-hc-rotate-90",text:"i18n:hmaker-nav-blank-item"}},FormFields:function(){return[{title:"i18n:hmaker-nav-k-title",name:"title",comType:"ti-input"},{title:"i18n:hmaker-nav-k-icon",name:"icon",comType:"ti-input-icon"},{title:"i18n:hmaker-nav-k-type",name:"type",comType:"ti-switcher",comConf:{options:[{icon:"zmdi-file",text:"i18n:hmaker-nav-tp-page",value:"page"},{icon:"zmdi-link",text:"i18n:hmaker-nav-tp-href",value:"href"},{icon:"zmdi-flash-auto",text:"i18n:hmaker-nav-tp-dispatch",value:"dispatch"}]}},{title:"i18n:hmaker-nav-k-value",name:"value",comType:"ti-input"}]},FormData:function(){if(this.myCurrentIndex>=0)return this.TableData[this.myCurrentIndex]}},methods:{OnRowSelected:function(e){var t=e.currentId,n=e.checkedIds,i=e.currentIndex;this.myCurrentIndex=i,this.myCurrentId=t,this.myCheckedIds=n,_.assign(this.myActionStatus,{moveUp:i>0,moveDown:i>=0&&i<this.TableLastIndex,remove:i>=0})},OnFormChanged:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.value;if(this.myCurrentIndex>=0){var i=_.cloneDeep(this.data);i[this.myCurrentIndex][t]=n,this.notifyChange(i)}},updateParentActionMenu:function(){this.$notify("actions:update",{data:[{key:"create",text:"i18n:add-item",type:"action",icon:"zmdi-plus",action:"$parent:callChild(createNewOne)"},{type:"line"},{key:"remove",type:"action",icon:"zmdi-delete",action:"$parent:callChild(removeChecked)",enableBy:"remove"},{type:"line"},{key:"moveUp",type:"action",icon:"zmdi-long-arrow-up",action:"$parent:callChild(moveUp)",enableBy:"moveUp"},{key:"moveDown",type:"action",icon:"zmdi-long-arrow-down",action:"$parent:callChild(moveDown)",enableBy:"moveDown"}],status:this.myActionStatus})},notifyChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];_.forEach(e,function(e){t.push(_.pick(e,"icon","title","type","value"))}),this.$notify("change",t)},__recover_selected:function(e,t){for(var n=this,i={},a=0;a<t;a++)i["N".concat(e+a)]=!0;console.log(i),this.$nextTick(function(){n.OnRowSelected({currentId:"N".concat(e),currentIndex:e,checkedIds:i})})},moveUp:function(){var e=this,t=_.cloneDeep(this.TableData),n=_.remove(t,function(t){var n=t.id;return e.myCheckedIds[n]});if(!_.isEmpty(n)){var i=1*_.first(n).id.substring(1),a=Math.max(0,i-1);if(a>=0){var r;(r=Ti.Util).insertToArray.apply(r,[t,a].concat(_toConsumableArray(n))),this.notifyChange(t),this.__recover_selected(a,n.length)}}},moveDown:function(){var e=this,t=_.cloneDeep(this.TableData),n=_.remove(t,function(t){var n=t.id;return e.myCheckedIds[n]});if(!_.isEmpty(n)){var i=1*_.first(n).id.substring(1)+1;if(i<=this.TableData.length-n.length){var a;(a=Ti.Util).insertToArray.apply(a,[t,i].concat(_toConsumableArray(n))),this.notifyChange(t),this.__recover_selected(i,n.length)}}},removeChecked:function(){var e=this,t=_.filter(this.TableData,function(t){var n=t.id;return!e.myCheckedIds[n]});this.notifyChange(t),this.myCurrentIndex=-1,this.myCurrentId=null,this.myCheckedIds={}},createNewOne:function(){var e=_.cloneDeep(this.TableData);Ti.Util.insertToArray(e,this.myCurrentIndex,{title:Ti.I18n.get("new-item"),type:"page"}),console.log(e),this.notifyChange(e)}},mounted:function(){this.updateParentActionMenu()}};Ti.Preload("ti/com/hmaker/edit-site-nav/edit-site-nav.mjs",e)}(),Ti.Preload("ti/com/hmaker/edit-site-nav/_com.json",{name:"hmaker-edit-site-nav",globally:!0,template:"./edit-site-nav.html",mixins:["./edit-site-nav.mjs"]}),Ti.Preload("ti/com/hmaker/edit-site-router/edit-site-router.html",'<div class="hmaker-edit-site-router">\n  Routers\n</div>'),function(){var e={inheritAttrs:!1,data:function(){return{}},props:{data:{type:Object,default:function(){return{}}}},computed:{theConfig:function(){}},methods:{}};Ti.Preload("ti/com/hmaker/edit-site-router/edit-site-router.mjs",e)}(),Ti.Preload("ti/com/hmaker/edit-site-router/_com.json",{name:"hmaker-edit-site-router",globally:!0,template:"./edit-site-router.html",mixins:["./edit-site-router.mjs"]}),Ti.Preload("ti/com/hmaker/edit-site-schema/edit-site-schema.html",'<div class="hmaker-edit-site-schema">\n  SCHEMA\n</div>'),function(){var e={inheritAttrs:!1,data:function(){return{}},props:{data:{type:Object,default:function(){return{}}}},computed:{theConfig:function(){}},methods:{}};Ti.Preload("ti/com/hmaker/edit-site-schema/edit-site-schema.mjs",e)}(),Ti.Preload("ti/com/hmaker/edit-site-schema/_com.json",{name:"hmaker-edit-site-schema",globally:!0,template:"./edit-site-schema.html",mixins:["./edit-site-schema.mjs"]}),Ti.Preload("ti/com/hmaker/edit-site-utils/edit-site-utils.html",'<div class="hmaker-edit-site-utils">\n  Utils\n</div>'),function(){var e={inheritAttrs:!1,data:function(){return{}},props:{data:{type:Object,default:function(){return{}}}},computed:{theConfig:function(){}},methods:{}};Ti.Preload("ti/com/hmaker/edit-site-utils/edit-site-utils.mjs",e)}(),Ti.Preload("ti/com/hmaker/edit-site-utils/_com.json",{name:"hmaker-edit-site-utils",globally:!0,template:"./edit-site-utils.html",mixins:["./edit-site-utils.mjs"]}),Ti.Preload("ti/com/hmaker/site-current-view/com/current-view-con/current-view-con.html",'<div class="current-view-con">\n  <component :is="comType"\n    class="ti-cover-parent"\n    v-bind="comConf"/>\n</div>'),function(){var e={inheritAttrs:!1,props:{comType:{type:String,default:"ti-loading"},comConf:{type:Object,default:function(){return{}}}}};Ti.Preload("ti/com/hmaker/site-current-view/com/current-view-con/current-view-con.mjs",e)}(),Ti.Preload("ti/com/hmaker/site-current-view/com/current-view-con/_com.json",{name:"current-view-con",globally:!1,template:"./current-view-con.html",mixins:["./current-view-con.mjs"]}),Ti.Preload("ti/com/hmaker/site-current-view/site-current-view.html",'<div class="site-current-view"\n  :class="topClass">\n  \x3c!--\n    Title\n  --\x3e\n  <div class="current-view-title">\n    \x3c!-- For Site --\x3e\n    <div class="as-name">\n      <ti-icon \n        class="as-icon"\n        :value="theTitleIcon"/>\n      <span\n        class="as-text">{{theTitleText|i18n}}</span>\n    </div>\n    \x3c!-- Crumb --\x3e\n    <div class="as-crumb"></div>\n    \x3c!-- Actions --\x3e\n    <div class="as-actions">\n      <ti-menu\n        v-if="theCurrentAction"\n          :data="theCurrentAction"\n          :status="status"/>\n    </div>\n  </div>\n  \x3c!--\n    Main Area\n  --\x3e\n  <current-view-con\n    class="ti-fill-parent"\n    :com-type="theCurrentView.comType"\n    :com-conf="theCurrentView.comConf"/>\n</div>'),function(){var e={inheritAttrs:!1,props:{home:{type:Object,default:null},tree:{type:Object,default:function(){return{}}},currentMeta:{type:Object,default:null},currentContent:{type:String,default:null},currentData:{type:Object,default:null},mapping:{type:Object,default:function(){return{}}},views:{type:Object,default:function(){return{}}},status:{type:Object,default:function(){return{}}}},computed:{topClass:function(){return{"is-changed":this.status.changed}},theViewsMapping:function(){return new t(this.mapping||{})},hasCurrent:function(){return this.currentMeta},theTitleIcon:function(){return Wn.Util.getIconObj(this.currentMeta||this.home)},theTitleText:function(){return Wn.Util.getObjDisplayName(this.currentMeta||this.home)},theCurrentView:function(){var e={comType:"ti-loading",comConf:{icon:"zmdi-alert-circle-o",text:"i18n:blank"}};if(this.hasCurrent){var t=this.home.ph,n=this.currentMeta.ph;e=this.theViewsMapping.getView({path:Ti.Util.getRelativePath(t,n),type:this.currentMeta.tp,mime:this.currentMeta.mime,race:this.currentMeta.race},e),_.isString(e)&&(e=this.views[e])}return Ti.Util.explainObj(this,e)},theCurrentAction:function(){return this.theCurrentView.actions}}},t=function(){function e(t){_classCallCheck(this,e),this.paths=new Ti.Mapping(t.paths),this.types=new Ti.Mapping(t.types),this.mimes=new Ti.Mapping(t.mimes),this.races=new Ti.Mapping(t.races)}return _createClass(e,[{key:"getView",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path,n=e.type,i=e.mime,a=e.race,r=arguments.length>1?arguments[1]:void 0;return this.paths.get(t)||this.types.get(n)||this.mimes.get(i)||this.races.get(a)||r}}]),e}();Ti.Preload("ti/com/hmaker/site-current-view/site-current-view.mjs",e)}(),Ti.Preload("ti/com/hmaker/site-current-view/_com.json",{name:"hmaker-site-current-view",globally:!0,template:"./site-current-view.html",mixins:["./site-current-view.mjs"],components:["./com/current-view-con","@com:hmaker/site-state","@com:ti/text/raw","@com:ti/obj/json","@com:wn/obj/preview","@com:wn/adaptlist"]}),Ti.Preload("ti/com/hmaker/site-manager/hm-site-manager.html",'<ti-gui\n  class="hmaker-site-manager"\n  :class="className"\n  keep-shown-to="hmaker-site-manager"\n  :layout="theLayout"\n  :schema="theSchema"\n  :can-loading="true"\n  :loading-as="status.reloading"\n  @block:event="onBlockEvent"/>'),function(){var e={inheritAttrs:!1,props:{home:{type:Object,default:null},tree:{type:Object,default:function(){return{}}},current:{type:Object,default:function(){return{}}},config:{type:Object,default:function(){return{}}},status:{type:Object,default:function(){return{}}}},computed:{theConfig:function(){return this.config[this.viewportMode]||{}},theLayout:function(){return{type:"cols",border:!0,blocks:[{title:"i18n:hmaker-site-tree",size:280,name:"site-tree",body:"desktop-site-tree"},{name:"site-current",body:"desktop-site-current"}]}},theSchema:function(){return{"desktop-site-tree":{comType:"ti-tree",comConf:{data:this.tree.root,display:[{key:"rawData",type:"Object",transformer:"getIconObj",comType:"ti-icon"},"rawData.title","name"],blankAs:{icon:"zmdi-settings zmdi-hc-spin",text:"i18n:hmaker-site-tree-loading"},currentId:this.tree.currentId,showRoot:!1,defaultOpenDepth:1,extendFunctionSet:Wn.Util,openedNodePaths:this.tree.openedNodePaths}},"desktop-site-current":{comType:"hmaker-site-current-view",comConf:{home:this.home,tree:this.tree,currentMeta:this.current.meta,currentContent:this.current.content,currentData:this.current.data,mapping:this.theConfig.mapping,views:this.config.views,status:this.status}}}}},methods:{onBlockEvent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.block,n=e.name,i=e.args,a=_.concat(t||[],n||[]).join("."),r=_.first(i);console.log("hmaker-site-manager:onBlockEvent",a,r),_.isUndefined(r)||("site-tree.opened"==a&&Ti.App(this).dispatch("main/reloadTreeNode",{id:r.id}),"site-tree.opened-status:change"==a&&Ti.App(this).dispatch("main/setTreeOpenedNodePaths",r),"site-tree.select"==a&&Ti.App(this).dispatch("main/setTreeSelected",r.currentId),"site-current.open"==a&&Ti.App(this).dispatch("main/reloadCurrent",r.rawData),"site-current.change"==a&&Ti.App(this).dispatch("main/onCurrentChanged",r))},editCurrentObjMeta:function(){var e=this.current.meta||this.home;if(!e)return Ti.Toast.Open("i18n:nil-obj");Wn.EditObjMeta(e)}},mounted:function(){var e=this;Ti.Fuse.getOrCreate().add({key:"hmaker-site-manager",everythingOk:function(){return!e.status.changed},fail:function(){Ti.Toast.Open("i18n:wn-obj-nosaved","warn")}})},beforeDestroy:function(){Ti.Fuse.get().remove("hmaker-site-manager")}};Ti.Preload("ti/com/hmaker/site-manager/hm-site-manager.mjs",e)}(),Ti.Preload("ti/com/hmaker/site-manager/_com.json",{name:"hmaker-site-manager",globally:!0,i18n:"@i18n:hmaker",template:"./hm-site-manager.html",mixins:["./hm-site-manager.mjs"],components:["@com:hmaker/site-current-view"]}),Ti.Preload("ti/com/hmaker/site-state/com/site-node-editing/site-node-editing.html",'<div class="hmaker-site-node-editing">\n  <template v-if="hasNode">\n    \x3c!--\n      Heading\n    --\x3e\n    <div class="as-head">\n      \x3c!--Title Bar--\x3e\n      <div class="at-left">\n        <ti-icon :value="node.icon"/>\n        <span>{{node.title | i18n}}</span>\n      </div>\n      \x3c!--Action Menu--\x3e\n      <div \n        v-if="hasActionMenu"\n          class="at-right">\n          <ti-menu v-bind="myActionMenu"/>\n      </div>\n    </div>\n    \x3c!--\n      Editing\n    --\x3e\n    <div class="as-edit">\n      <component class="ti-fill-parent"\n        :is="Com.comType"\n        v-bind="Com.comConf"\n        :on-init="OnChildInit"\n        @change="OnChange"\n        @actions:update="OnActionsUpdate"/>\n    </div>\n  </template>\n  \x3c!--\n    Blank\n  --\x3e\n  <template v-else>\n    <ti-loading\n      text="i18n:blank-to-edit"\n      icon="zmdi-arrow-left"/>\n  </template>\n</div>'),function(){var e={inheritAttrs:!1,data:function(){return{myActionMenu:null}},props:{path:{type:String,default:null},node:{type:Object,default:function(){return{}}}},computed:{hasNode:function(){return this.path&&!_.isEmpty(this.node)},hasActionMenu:function(){return!_.isEmpty(this.myActionMenu)},Com:function(){return"general"==this.path?{comType:"hmaker-edit-site-general",comConf:{data:this.node.data}}:"nav"==this.path?{comType:"hmaker-edit-site-nav",comConf:{data:this.node.data}}:{comType:"ti-form",comConf:{fields:[{name:"path"},{name:"node",comType:"ti-input-text",comConf:{readonly:!0,height:"7rem"}}],data:{path:this.path,node:JSON.stringify(this.node,null,"  ")}}}}},methods:{OnChange:function(e){this.$notify("change",{path:this.path,node:this.node,payload:e})},OnActionsUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.myActionMenu=e},OnChildInit:function(e){this.$myChildCom=e},callChild:function(e){console.log(e),this.$myChildCom&&this.$myChildCom[e]()}},watch:{path:function(){this.myActionMenu=null}}};Ti.Preload("ti/com/hmaker/site-state/com/site-node-editing/site-node-editing.mjs",e)}(),Ti.Preload("ti/com/hmaker/site-state/com/site-node-editing/_com.json",{name:"hmaker-site-node-editing",globally:!0,template:"./site-node-editing.html",mixins:["./site-node-editing.mjs"],components:["@com:hmaker/edit-site-general","@com:hmaker/edit-site-utils","@com:hmaker/edit-site-apis","@com:hmaker/edit-site-schema","@com:hmaker/edit-site-blocks","@com:hmaker/edit-site-nav","@com:hmaker/edit-site-router","@com:hmaker/edit-site-actions","@com:ti/form"]}),Ti.Preload("ti/com/hmaker/site-state/hm-site-state.html",'<ti-gui\n  class="hmaker-site-state ti-fill-parent"\n  keep-shown-to="hmaker-site-state"\n  :layout="theLayout"\n  :schema="theSchema"\n  @block:event="onBlockEvent"/>'),function(){var e={inheritAttrs:!1,data:function(){return{myCurrentPathId:null,myTreeOpenedStatus:{}}},props:{home:{type:Object,default:function(){return{}}},content:{type:String,default:null}},computed:{theData:function(){var e=_.trim(this.content);return e?JSON.parse(e):{}},theTreeDisplay:function(){return["<icon>","title","tip"]},theTreeData:function(){return{name:"ROOT",children:[this._general,this._nav,this._apis,this._schema,this._blocks,this._router,this._actions,this._utils]}},_general:function(){return{icon:"fas-sliders-h",name:"general",title:"i18n:hmaker-site-state-general",data:_.pick(this.theData,["domain","apiBase","captcha","base","entry"])}},_utils:function(){return{icon:"zmdi-card-sd",name:"utils",title:"i18n:hmaker-site-state-utils",data:_.assign({},this.theData.utils)}},_apis:function(){var e=[];return _.forEach(this.theData.apis,function(t,n){e.push({icon:"zmdi-input-power",name:n,title:t.title||n,tip:n,data:t})}),{icon:"zmdi-input-composite",name:"apis",title:"i18n:hmaker-site-state-apis",children:e}},_schema:function(){var e=[];return _.forEach(this.theData.schema,function(t,n){e.push({icon:"fas-puzzle-piece",name:n,title:t.title||n,data:t})}),{icon:"fas-pencil-ruler",name:"schema",title:"i18n:hmaker-site-state-schema",children:e}},_blocks:function(){var e=[];return _.forEach(this.theData.blocks,function(t,n){var i=[];_.forEach(t,function(e,t){i.push(function e(t,n){if(_.isString(t))return{icon:"fas-external-link-alt",name:n,title:t,data:t};if(t.body){var i=_.isString(t.body)?t.body:t.body.comType||"ti-label",a=_.isNumber(n)?"[".concat(n,"]"):'"'.concat(n,'"');return{icon:"fas-puzzle-piece",name:n,title:"".concat(a,":<").concat(i,">"),data:t}}var r=[];_.forEach(t.blocks,function(t,n){r.push(e(t,n))});return{icon:"im-layer",name:n,title:[_.isNumber(n)?"[".concat(n,"]"):'"'.concat(n,'"'),Ti.I18n.get("hmaker-layout-".concat(t.type||"cols"))].join(":"),data:t,children:r}}(e,t))}),e.push({icon:{desktop:"zmdi-desktop-windows",tablet:"zmdi-tablet",phone:"zmdi-smartphone-iphone"}[n],name:n,title:"i18n:".concat(n),data:t,children:i})}),{icon:"far-object-group",name:"blocks",title:"i18n:hmaker-site-state-blocks",children:e}},_nav:function(){return{icon:"im-sitemap",name:"nav",title:"i18n:hmaker-site-state-nav",data:this.theData.nav||[]}},_router:function(){var e=[];return _.forEach(this.theData.router,function(t,n){e.push({icon:"im-share",name:n,title:t.match,data:t})}),{icon:"zmdi-router",name:"router",title:"i18n:hmaker-site-state-router",children:e}},_actions:function(){var e=[];return _.forEach(this.theData.actions,function(t,n){e.push({icon:"im-flash",name:n,title:n,data:t})}),{icon:"im-rocket",name:"actions",title:"i18n:hmaker-site-state-actions",children:e}},theLayout:function(){return{type:"tabs",tabAt:"bottom-left",blocks:[{title:"i18n:structure",type:"cols",border:!0,blocks:[{size:.372,name:"tree",body:"desktopStructureTree"},{name:"edit",body:"desktopStructureEdit"}]},{title:"i18n:source-code",name:"source",body:"desktopSourceCode"}]}},theSchema:function(){return{desktopStructureTree:{comType:"ti-tree",comConf:{mainWidth:300,border:"cell",multi:!1,data:this.theTreeData,display:this.theTreeDisplay,autoOpen:!1,currentId:this.myCurrentPathId,defaultOpenDepth:0,keepOpenBy:"hm-site-state-".concat(this.home.id,"-opened"),keepCurrentBy:"hm-site-state-".concat(this.home.id,"-current"),showRoot:!1}},desktopStructureEdit:{comType:"hmaker-site-node-editing",comConf:{path:this.myCurrentPathId,node:this.theCurrentNode}},desktopSourceCode:{comType:"ti-text-raw",comConf:{showTitle:!1,content:this.content,ignoreKeyUp:!0}}}},theCurrentNode:function(){return this.myCurrentPathId?Ti.Trees.getNodeByPath(this.theTreeData,this.myCurrentPathId):null}},methods:{updateByPath:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path,n=e.payload,i=_.cloneDeep(this.theData);_.set(i,t,n),Ti.App(this).dispatch("main/onCurrentChanged",i)},onBlockEvent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.block,n=e.name,i=e.args,a=_.concat(t||[],n||[]).join("."),r=_.first(i);console.log("hmaker-site-state:onBlockEvent",a,r),_.isUndefined(r)||("tree.select"==a?this.onSelected(r):"tree.opened-status:change"==a?this.onOpenedStatusChanged(r):"edit.change"==a?this.updateByPath(r):"source.change"==a&&Ti.App(this).dispatch("main/onCurrentChanged",r))},onSelected:function(){var e=arguments,t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=e.length>0&&void 0!==e[0]?e[0]:{},a=i.currentId,r=i.current,t.myCurrentPathId=a;case 2:case"end":return n.stop()}},n)}))()},onOpenedStatusChanged:function(e){this.myTreeOpenedStatus=e}}};Ti.Preload("ti/com/hmaker/site-state/hm-site-state.mjs",e)}(),Ti.Preload("ti/com/hmaker/site-state/_com.json",{name:"hmaker-site-state",globally:!0,template:"./hm-site-state.html",mixins:["./hm-site-state.mjs"],components:["./com/site-node-editing"]}),Ti.Preload("ti/com/net/aliyun/vod/manager/vod-manager.html",'<ti-gui\n  class="net-aliyun-vod-manager"\n  :class="TopClass"\n  :layout="GuiLayout"\n  :schema="GuiSchema"\n  :can-loading="true"\n  :loading-as="reloading"\n  @filter::change="OnFilterChange"\n  @sorter::change="OnSorterChange"\n  @list::select="OnListSelect"\n  @video::preview="OnVideoPreview"\n  @pager::change="OnPagerChange"/>'),function(){var e={data:function(){return{reloading:!1,list:[],pager:{},scrollToken:null,myCurrentId:null,myCurrentVideo:null,myFilter:{match:{}},mySort:{CreationTime:-1}}},props:{meta:{type:Object,default:function(){return{}}},fields:{type:String,default:"Title,CoverURL,Duration,CateName,Size,Description,RegionID"},filter:{type:Object,default:function(){return{comType:"ti-combo-filter",comConf:{placeholder:"i18n:net-flt-nil",form:{fields:[{title:"i18n:net-ct",name:"CreationTime",type:"Array",comType:"ti-input-daterange",comConf:{valueType:"ms-array"}},{title:"i18n:net-vod-duration",name:"Duration",comType:"ti-switcher",comConf:{autoSplitValue:!1,options:[{value:"[0, 600]",text:"i18n:net-vod-du-short"},{value:"(600, 4800]",text:"i18n:net-vod-du-tv"},{value:"(4800, )",text:"i18n:net-vod-du-long"}]}}]}}}}},sorter:{type:Object,default:function(){return{comType:"ti-combo-sorter",comConf:{options:[{value:"CreationTime",text:"i18n:net-ct"}]}}}},pageSize:{type:Number,default:20},multi:{type:Boolean,default:!0}},computed:{TopClass:function(){return this.getTopClass()},ConfName:function(){return _.get(this.meta,"vodConfigName")},CmdPrefix:function(){return this.ConfName?"aliyunvod ".concat(this.ConfName):"aliyunvod"},ThePageNumber:function(){return _.get(this.pager,"pn")||1},ThePageSize:function(){return _.get(this.pager,"pgsz")||this.pageSize},WallItemDisplay:function(){return{key:"..",comType:"ti-obj-thumb",comConf:function(e){return{id:e.videoId,title:e.title,preview:{type:"image",value:e.coverURL}}}}},GuiLayout:function(){return{type:"cols",border:!0,blocks:[{type:"rows",size:"61.8%",border:!0,blocks:[{type:"cols",size:".44rem",blocks:[{name:"filter",flex:"both",body:"pcFilter"},{name:"sorter",flex:"none",body:"pcSorter"}]},{name:"list",body:"pcList"},{name:"pager",size:40,body:"pcPager"}]},{icon:"zmdi-tv-alt-play",title:"i18n:video",name:"video",body:"pcVideo"}]}},GuiSchema:function(){return{pcFilter:{comType:this.filter.comType,comConf:_.assign({value:this.myFilter},this.filter.comConf)},pcSorter:{comType:this.sorter.comType,comConf:_.assign({value:this.mySort},this.sorter.comConf)},pcList:{comType:"ti-wall",comConf:{data:this.list,idBy:"videoId",multi:this.multi,display:this.WallItemDisplay}},pcPager:{comType:"ti-paging-jumper",comConf:{value:this.pager}},pcVideo:{comType:"net-aliyun-vod-video-info",comConf:{value:this.myCurrentVideo}}}}},methods:{OnFilterChange:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.myFilter=e,t.pager=_.assign({},t.pager,{pn:1}),n.next=4,t.reloadVideos();case 4:case"end":return n.stop()}},n)}))()},OnSorterChange:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.mySort=e,t.pager=_.assign({},t.pager,{pn:1}),n.next=4,t.reloadVideos();case 4:case"end":return n.stop()}},n)}))()},OnPagerChange:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.pager=_.assign({},t.pager,e),t.meta&&(i=_.get(e,"pgsz"),Ti.Util.isNil(i)||Ti.Storage.session.setObject(t.meta.id,{pgsz:i})),n.next=4,t.reloadVideos();case 4:case"end":return n.stop()}},n)}))()},OnListSelect:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.currentId,a=e.checkedIds,r=e.checked,t.myCurrentId=i,!i){n.next=9;break}return n.next=5,t.reloadVideoInfo(i);case 5:t.myCurrentVideo=n.sent,t.$notify("change",{currentId:t.myCurrentId,current:t.myCurrentVideo,checkedIds:a,checked:r}),n.next=11;break;case 9:t.myCurrentVideo=null,t.$notify("change",void 0);case 11:case"end":return n.stop()}},n)}))()},OnVideoPreview:function(){var e=arguments,t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:{},a=i.title,r=i.videoId,o=i.coverURL,n.next=3,t.requestPlayAuth(r);case 3:return s=n.sent,n.next=6,Ti.App.Open({icon:"zmdi-tv-alt-play",title:"Preview: ".concat(a),textOk:null,textCancel:"i18n:close",position:"top",width:"90%",height:"90%",comType:"NetAliyunVodVideoPlayer",comConf:{videoId:r,playAuth:s,coverUrl:o},components:"@com:net/aliyun/vod/video/player"});case 6:case"end":return n.stop()}},n)}))()},requestPlayAuth:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.reloading=!0,i=[t.CmdPrefix,"playauth",e,"-cqn"],n.next=4,Wn.Sys.exec2(i.join(" "),{as:"json"});case 4:return a=n.sent,t.reloading=!1,n.abrupt("return",a.playAuth);case 7:case"end":return n.stop()}},n)}))()},reloadVideoInfo:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.reloading=!0,i=[t.CmdPrefix,"video",e,"-cqn"],n.next=4,Wn.Sys.exec2(i.join(" "),{as:"json"});case 4:return a=n.sent,t.reloading=!1,n.abrupt("return",a);case 7:case"end":return n.stop()}},n)}))()},toAliyunTime:function(e){},toMatchStr:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return Ti.S.isBlank(e)||(/^[a-z0-9]{32}$/.test(e)?n.push("VideoId = '".concat(e,"'")):n.push("Title in ('".concat(e.replace(/'/g,""),"')"))),_.forEach(t,function(e,t){if(!Ti.Util.isNil(e))if(_.isString(e)&&/^[\[(].+[)\]]$/.test(e))n.push("".concat(t,"=").concat(e));else if(/time/i.test(t)){var i="yyyy-MM-dd'T'HH:mm:ss'Z'",a=Ti.Types.formatDateTime(e,i);1==(a=_.concat(a)).length&&a.push(a[0]);var r=Ti.Types.toDate(a[1]).getTime()+864e5;a[1]=Ti.Types.formatDateTime(r,i),n.push("".concat(t,"=['").concat(a[0],"', '").concat(a[1],"')"))}else if(_.isArray(e)){var o=_.map(e,function(e){return _.isString(e)?e.replace(/'/g,""):e});n.push("".concat(t," in (").concat(o.join(","),")"))}else _.isString(e)?n.push("".concat(t," in ('").concat(e.replace(/'/g,""),"')")):n.push("".concat(t," = ").concat(e))}),n.join(" and ")},reloadVideos:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.reloading=!0,(n=[e.CmdPrefix]).push("search","-fields","'".concat(e.fields,"'")),i=_.get(e.myFilter,"keyword"),a=_.get(e.myFilter,"match"),!_.isEmpty(a)||!Ti.Util.isNil(i))try{n.push("-match",'"'.concat(e.toMatchStr(i,a),'"'))}catch(e){console.error(e)}return r=[],_.forEach(e.mySort,function(e,t){r.push("".concat(t,":").concat(e>0?"ASC":"DESC"))}),_.isEmpty(r)||n.push("-sort ","".concat(r.join(" "))),n.push("-pn",e.ThePageNumber),n.push("-pgsz",e.ThePageSize),n.push("-as page -cqn"),t.next=14,Wn.Sys.exec2(n.join(" "),{as:"json"});case 14:o=t.sent,e.list=o.list,e.pager=o.pager,e.scrollToken=o.scrollToken,e.reloading=!1;case 19:case"end":return t.stop()}},t)}))()}},mounted:function(){if(this.meta){var e=Ti.Storage.session.getObject(this.meta.id);if(e){var t=_.get(e,"pgsz");this.pager.pgsz=t}}this.reloadVideos()}};Ti.Preload("ti/com/net/aliyun/vod/manager/vod-manager.mjs",e)}(),Ti.Preload("ti/com/net/aliyun/vod/manager/_com.json",{name:"net-aliyun-vod-manager",globally:!0,template:"./vod-manager.html",mixins:["./vod-manager.mjs"],components:["@com:ti/wall","@com:ti/combo/filter","@com:ti/combo/sorter","@com:ti/paging/jumper","@com:net/aliyun/vod/video/info"]}),Ti.Preload("ti/com/net/aliyun/vod/video/info/vod-video-info.html",'<div class="net-aliyun-vod-video-info"\n  :class="TopClass">\n  \x3c!--\n    Blank\n  --\x3e\n  <ti-loading\n    v-if="!hasVideo"\n      class="as-big"\n      icon="fas-hand-point-left"\n      text="i18n:net-vod-video-nil"/>\n  \x3c!--\n    Show Content\n  --\x3e\n  <template v-else>\n    \x3c!--Preview--\x3e\n    <div class="as-preview">\n      <img \n        class="ti-fill-parent"\n        :src="VideoCoverURL"/>\n      <div class="as-btn" @click.left="OnClickPreview">\n        <i class="fas fa-play-circle"></i>\n      </div>\n    </div>\n    \x3c!--\n      Detail info\n    --\x3e\n    <div class="as-detail">\n      <ti-form\n        class="ti-cover-parent"\n        spacing="tiny"\n        :fields="FormFields"\n        :data="value"/>\n    </div>\n  </template>\n</div>'),function(){var e={props:{value:{type:Object,default:void 0}},computed:{TopClass:function(){return this.getTopClass()},hasVideo:function(){return!!this.value},VideoCoverURL:function(){return _.get(this.value,"coverURL")},FormFields:function(){return[{title:"VideoID",name:"videoId"},{title:"Title",name:"title"},{title:"CateName",name:"cateName"},{title:"Description",name:"description"},{title:"Duration",name:"duration"},{title:"RegionId",name:"regionId"},{title:"Size",name:"size"},{title:"Status",name:"status"},{title:"Tags",name:"tags"},{title:"CreateTime",name:"createTime"},{title:"ModifyTime",name:"modifyTime"}]}},methods:{OnClickPreview:function(){this.$notify("preview",this.value)}}};Ti.Preload("ti/com/net/aliyun/vod/video/info/vod-video-info.mjs",e)}(),Ti.Preload("ti/com/net/aliyun/vod/video/info/_com.json",{name:"NetAliyunVodVideoInfo",globally:!0,template:"./vod-video-info.html",mixins:["./vod-video-info.mjs"],components:["@com:ti/form"]}),Ti.Preload("ti/com/net/aliyun/vod/video/player/vod-video-player.html",'<div class="net-vod-video-player"\n  :class="TopClass">\n  <div :id="PlayerID"></div>\n</div>'),function(){var e={props:{autoplay:{type:Boolean,default:!1},videoId:{type:String,default:void 0},coverUrl:{type:String,default:void 0},playAuth:{type:String,default:void 0},encryptType:{type:Number,default:void 0},lang:{type:String,default:void 0},format:{type:String,default:"m3u8"},definition:{type:String,default:"FD,LD,SD,HD,OD,2K,4K"},defaultDefinition:{type:String,default:"FD"}},computed:{TopClass:function(){return this.getTopClass()},PlayerID:function(){var e=parseInt(1e5*Math.random());return"ALIPLAYER_".concat(e)}},methods:{initPlayer:function(){if(!this.$player&&this.playAuth&&this.videoId&&this.coverUrl){var e=this.lang||Ti.Config.lang();this.$player=new Aliplayer({id:this.PlayerID,width:"100%",height:"100%",autoplay:this.autoplay,useH5Prism:!0,format:this.format,definition:this.definition,defaultDefinition:this.defaultDefinition,language:e,vid:this.videoId,cover:this.coverUrl,encryptType:this.encryptType,playauth:this.playAuth})}}},watch:{},mounted:function(){this.initPlayer()},beforeDestroy:function(){this.$player&&this.$player.dispose()}};Ti.Preload("ti/com/net/aliyun/vod/video/player/vod-video-player.mjs",e)}(),Ti.Preload("ti/com/net/aliyun/vod/video/player/_com.json",{name:"NetAliyunVodVideoPlayer",globally:!0,template:"./vod-video-player.html",mixins:["./vod-video-player.mjs"],components:[]}),Ti.Preload("ti/com/ti/actionbar/com/bar-item-action/bar-item-action.html",'<div class="bar-item-action">\n  <bar-item-info\n    v-bind="this"\n    @fire="OnFired"/>\n</div>'),function(){var e={inject:["$bar"],props:{name:{type:String,default:void 0},icon:{type:String,default:void 0},hideIcon:{type:Boolean,default:!1},text:{type:String,default:void 0},tip:{type:String,default:void 0},altDisplay:{type:[Object,Array],default:function(){return[]}},enabled:{type:[String,Array,Object],default:void 0},disabled:{type:[String,Array,Object],default:void 0},highlight:{type:[String,Array,Object],default:void 0},value:{type:[Boolean,String,Number,Array],default:!0},depth:{type:Number,default:0},status:{type:Object,default:function(){return{}}},action:{type:[String,Object,Function],default:void 0},notify:{type:[Boolean,String],default:!1},wait:{type:Number,default:0},shortcut:{type:String,default:void 0}},computed:{notifyName:function(){if(this.notify)return _.isString(this.notify)?this.notify:this.name},TheAction:function(){return _.isFunction(this.action)&&this.wait>0?_.debounce(this.action,this.wait,{leading:!0}):this.action}},methods:{OnFired:function(e){if(this.action){var t=Ti.App(this);Ti.Shortcut.genActionInvoking(this.TheAction,{$com:this.$bar.$parent,argContext:t.$state()})()}this.notifyName&&this.$bar.notifyChange({name:this.notifyName,value:e})}},mounted:function(){var e=this;this.shortcut&&Ti.App(this).guardShortcut(this,this.shortcut,function(){return e.isEnabled})},destroyed:function(){this.shortcut&&Ti.App(this).pulloutShortcut(this)}};Ti.Preload("ti/com/ti/actionbar/com/bar-item-action/bar-item-action.mjs",e)}(),Ti.Preload("ti/com/ti/actionbar/com/bar-item-action/_com.json",{name:"bar-item-action",template:"./bar-item-action.html",mixins:["./bar-item-action.mjs"]}),Ti.Preload("ti/com/ti/actionbar/com/bar-item-group/bar-item-group.html",'<div class="bar-item-group"\n  :class="TopClass"\n  @mouseenter.stop="OnMouseEnter"\n  @mouseleave.stop="OnMouseLeave">\n  \x3c!--\n    Info\n  --\x3e\n  <bar-item-info\n    v-if="hasInfo"\n      v-bind="this"\n      :value="collapse"\n      :status="status"\n      :suffix-icon="ItemSuffixIcon"\n      @fire="OnFired"/>\n  \x3c!--\n    Group Children\n  --\x3e\n  <template v-if="showChildren">\n    <div v-if="isDepth1"\n      class="as-mask"\n      @click="doCollapse"></div>\n    <div ref="children"\n      v-if="showChildren"\n        class="as-children"\n        :style="ChildrenStyle"\n        @click.left="doCollapse">\n          <component \n            v-for="bi in items"\n              :key="bi.key"\n              :is="bi.comType"\n              v-bind="bi.comConf"\n              :depth="depth+1"\n              :items="bi.items"\n              :hide-icon="isChildrenWithoutIcon"\n              :status="status"/>\n    </div>\n  </template>\n</div>'),function(){var e={inject:["$bar"],provide:function(){return{depth:this.depth+1}},data:function(){return{collapse:!0,isDocked:!1,barItems:[]}},props:{name:{type:String,default:void 0},icon:{type:String,default:void 0},hideIcon:{type:Boolean,default:!1},text:{type:String,default:void 0},tip:{type:String,default:void 0},altDisplay:{type:[Object,Array],default:function(){return[]}},enabled:{type:[String,Array,Object],default:void 0},disabled:{type:[String,Array,Object],default:void 0},highlight:{type:[String,Array,Object],default:void 0},depth:{type:Number,default:0},status:{type:Object,default:function(){return{}}},items:{type:Array,default:function(){return[]}},autoExtend:{type:Boolean,default:!1}},computed:{TopClass:function(){return this.getTopClass({"is-collapse":this.collapse,"is-extended":!this.collapse,"is-depth-x":this.isDepthX},"is-depth-".concat(this.depth))},isDepth0:function(){return 0==this.depth},isDepth1:function(){return 1==this.depth},isDepthX:function(){return this.depth>1},hasInfo:function(){return this.icon||this.text},isChildrenWithoutIcon:function(){var e,t=_createForOfIteratorHelper(this.items);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.comConf&&n.comConf.icon)return!1}}catch(e){t.e(e)}finally{t.f()}return!0},showChildren:function(){return this.isDepth0||!this.collapse},ItemSuffixIcon:function(){if(this.isDepthX)return"im-angle-right"},ChildrenStyle:function(){if(!this.isDepth0&&!this.isDocked)return{visibility:"hidden"}}},methods:{OnMouseEnter:function(){this.isDepthX&&this.doExtend()},OnMouseLeave:function(){this.isDepthX&&this.doCollapse()},OnFired:function(e){e?this.doExtend():this.doCollapse()},doExtend:function(){this.collapse=!1},doCollapse:function(){this.collapse=!0,this.isDocked=!1},doDockChildren:function(){var e=this;this.$nextTick(function(){e.$refs.children&&e.depth>0&&(Ti.Dom.dockTo(e.$refs.children,e.$el,{mode:e.isDepthX?"V":"H",position:"fixed",space:e.isDepthX?{x:-1}:{y:3}}),_.delay(function(){e.isDocked=!0},5))})}},watch:{collapse:"doDockChildren"},mounted:function(){this.doDockChildren(),this.$bar.allocGroup(this)},beforeDestroy:function(){this.$bar.freeGroup(this)}};Ti.Preload("ti/com/ti/actionbar/com/bar-item-group/bar-item-group.mjs",e)}(),Ti.Preload("ti/com/ti/actionbar/com/bar-item-group/_com.json",{name:"bar-item-group",template:"./bar-item-group.html",mixins:["./bar-item-group.mjs"]}),Ti.Preload("ti/com/ti/actionbar/com/bar-item-info/bar-item-info.html",'<div class="bar-item-info"\n  :class="TopClass"\n  @click.left="OnClickTop">\n  \x3c!--\n    Icon\n  --\x3e\n  <span\n    v-if="isShowIcon"\n      class="as-icon">\n      <ti-icon\n        v-if="hasIcon" \n          :value="CurrentDisplay.icon"/>\n  </span>\n  \x3c!--\n    Text\n  --\x3e\n  <span\n    v-if="CurrentDisplay.text"\n      class="as-text"\n        >{{CurrentDisplay.text|i18n}}</span>\n  \x3c!--\n    Suffix Icon\n  --\x3e\n  <span\n    v-if="suffixIcon"\n      class="as-suffix-icon"><ti-icon :value="suffixIcon"/></span>\n  \x3c!--\n    Shortcut\n  --\x3e\n  <span\n    v-else-if="isShowShortcut"\n      class="as-shortcut">{{shortcut}}</span>\n</div>'),function(){var e={inject:["$bar"],props:{name:{type:String,default:void 0},icon:{type:String,default:void 0},hideIcon:{type:Boolean,default:!1},text:{type:String,default:void 0},tip:{type:String,default:void 0},shortcut:{type:String,default:void 0},suffixIcon:{type:String,default:void 0},altDisplay:{type:[Object,Array],default:function(){return[]}},enabled:{type:[Boolean,String,Array,Object],default:void 0},disabled:{type:[Boolean,String,Array,Object],default:void 0},highlight:{type:[Boolean,String,Array,Object],default:void 0},value:{type:[Boolean,String,Number,Array],default:void 0},depth:{type:Number,default:0},status:{type:Object,default:function(){return{}}}},computed:{TopClass:function(){return this.getTopClass({"is-enabled":this.isEnabled,"is-disabled":this.isDisabled,"is-highlight":this.isHighlight,"is-top":1==this.depth,"is-sub":this.depth>1,"has-icon":!!this.icon,"no-icon":!this.icon,"show-icon":this.isShowIcon,"hide-icon":!this.isShowIcon},"is-depth-".concat(this.depth))},AltDisplay:function(){return _.isArray(this.altDisplay)?this.altDisplay:this.altDisplay?[this.altDisplay]:[]},isEnabled:function(){return Ti.Util.isNil(this.enabled)?!(!Ti.Util.isNil(this.disabled)&&this.isMatchStatus(this.disabled)):this.isMatchStatus(this.enabled)},isDisabled:function(){return!this.isEnabled},isHighlight:function(){return!Ti.Util.isNil(this.highlight)&&this.isMatchStatus(this.highlight)},isShowShortcut:function(){return this.shortcut&&this.depth>1},isShowIcon:function(){return!this.hideIcon||this.hasIcon},hasIcon:function(){return!!this.CurrentDisplay.icon},CurrentDisplay:function(){var e={icon:this.icon,text:this.text,tip:this.tip,value:this.value};if(!_.isEmpty(this.AltDisplay)){var t,n=_createForOfIteratorHelper(this.AltDisplay);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=i.match||this.name;if(this.isMatchStatus(a)){_.assign(e,_.pick(i,["icon","text","tip","value"]));break}}}catch(e){n.e(e)}finally{n.f()}}return e},TheValues:function(){var e=this.CurrentDisplay.value;return _.isBoolean(e)?[e,!e]:_.isArray(e)?e:[e]}},methods:{OnClickTop:function(){if(!this.isDisabled){var e=this.isHighlight?_.last(this.TheValues):_.first(this.TheValues);this.$emit("fire",e)}},isMatchStatus:function(e){if(_.isBoolean(e))return e;if(_.isString(e))return!!_.get(this.status,e);if(_.isArray(e)){var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(!_.get(this.status,i))return!1}}catch(e){n.e(e)}finally{n.f()}return!0}return!!_.isPlainObject(e)&&(e.validate?Ti.Validate.match(this.status,e.validate):_.isMatch(this.status,e))}}};Ti.Preload("ti/com/ti/actionbar/com/bar-item-info/bar-item-info.mjs",e)}(),Ti.Preload("ti/com/ti/actionbar/com/bar-item-info/_com.json",{name:"bar-item-info",template:"./bar-item-info.html",mixins:["./bar-item-info.mjs"]}),Ti.Preload("ti/com/ti/actionbar/com/bar-item-line/bar-item-line.html",'<div class="bar-item-line"\n  :class="TopClass"></div>'),function(){var e={inject:["$bar"],props:{depth:{type:Number,default:0}},computed:{TopClass:function(){return this.getTopClass({"is-top":1==this.depth,"is-sub":this.depth>1})}}};Ti.Preload("ti/com/ti/actionbar/com/bar-item-line/bar-item-line.mjs",e)}(),Ti.Preload("ti/com/ti/actionbar/com/bar-item-line/_com.json",{name:"bar-item-line",template:"./bar-item-line.html",mixins:["./bar-item-line.mjs"]}),Ti.Preload("ti/com/ti/actionbar/ti-actionbar.html",'<div class="ti-actionbar"\n  :class="TopClass"\n  v-ti-activable>\n  <bar-item-group \n    name="Ti_ActionBar_Root_Group"\n    :items="BarItems"\n    :status="status"/>\n</div>'),function(){var e={provide:function(){return{$bar:this,depth:0}},data:function(){return{mySeq:0,myGroups:{}}},props:{items:{type:Array,default:function(){return[]}},align:{type:String,default:"left",validator:function(e){return/^(left|right|center)$/.test(e)}},status:{type:Object,default:function(){return{}}}},computed:{TopClass:function(){return this.getTopClass("align-".concat(this.align))},BarItems:function(){var e=this,t=[];return _.forEach(this.items,function(n){var i=e.evalBarItem(n);i&&t.push(i)}),t}},methods:{allocGroup:function(e){this.myGroups[e.name]=e},freeGroup:function(e){delete this.myGroups[e.name]},notifyChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.value;t&&this.$notify("change",{name:t,value:n})},evalBarItem:function(e){var t=this.getItemType(e),n=this.getItemKey(t),i={type:t,key:n,comType:"bar-item-".concat(t),comConf:_.defaults(_.omit(e,"items"),{name:n})};if("group"==t&&_.isArray(e.items)){i.items=[];var a,r=_createForOfIteratorHelper(e.items);try{for(r.s();!(a=r.n()).done;){var o=a.value,s=this.evalBarItem(o);i.items.push(s)}}catch(e){r.e(e)}finally{r.f()}}return i},getItemType:function(e){return e.type?_.toLower(e.type):_.isEmpty(e)?"line":_.isArray(e.items)?"group":"action"},getItemKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"BarItem";return"".concat(e,"-").concat(this.mySeq++)},collapseAllGroup:function(){_.forEach(this.myGroups,function(e){e.doCollapse()})},__ti_shortcut:function(e){var t=this;Ti.InvokeBy({ESCAPE:function(){return t.collapseAllGroup()}},e)}},mounted:function(){var e=this;Ti.Viewport.watch(this,{resize:function(){return e.collapseAllGroup()}})},beforeDestroy:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/actionbar/ti-actionbar.mjs",e)}(),Ti.Preload("ti/com/ti/actionbar/_com.json",{name:"ti-actionbar",globally:!0,template:"./ti-actionbar.html",mixins:["./ti-actionbar.mjs"],components:["./com/bar-item-action","./com/bar-item-group","./com/bar-item-line","./com/bar-item-info"]}),Ti.Preload("ti/com/ti/button/ti-button.html",'<div class="ti-button"\n  :class="topClass">\n  <ul>\n    <li v-for="it in items"\n      :key="it.name"\n      :class="it.buttonClass"\n      @click="OnClickItem(it)">\n      \x3c!--\n        Icon\n      --\x3e\n      <ti-icon v-if="it.icon"\n        :value="it.icon"/>\n      \x3c!--\n        Text\n      --\x3e\n      <span v-if="it.text"\n        class="it-text">{{it.text|i18n}}</span>\n    </li>\n  </ul>\n</div>'),function(){var e={props:{size:{type:String,default:"normal",validator:function(e){return/^(big|normal|small|tiny)$/.test(e)}},align:{type:String,default:"center"},setup:{type:[Array,Object],default:function(){return[]}}},computed:{topClass:function(){return Ti.Css.mergeClassName(["is-".concat(this.size),"at-".concat(this.align)],this.className)},items:function(){var e=[].concat(this.setup),t=[];return _.forEach(e,function(e,n){var i,a={};a.name=e.name||"item-".concat(n),a.eventName=e.eventName||a.name,a.payload=e.payload,a.icon=e.icon,a.text=e.text,a.disabled=e.disabled,a.handler=e.handler,a.buttonClass=(i={},_defineProperty(i,"as-do-".concat(a.name),!0),_defineProperty(i,"is-enabled",!e.disabled),_defineProperty(i,"is-disabled",!!e.disabled),_defineProperty(i,"is-invert-icon",!!e.invertIcon),i),t.push(a)}),t}},methods:{OnClickItem:function(e){e.disabled||(_.isFunction(e.handler)&&e.handler(),_.isString(e.eventName)&&this.$notify(e.eventName,e.payload))}}};Ti.Preload("ti/com/ti/button/ti-button.mjs",e)}(),Ti.Preload("ti/com/ti/button/_com.json",{name:"ti-button",globally:!0,template:"./ti-button.html",mixins:["./ti-button.mjs"],components:[]}),Ti.Preload("ti/com/ti/calendar/ti-calendar.html",'<div class="ti-calendar">\n  \x3c!--\n    Heading\n  --\x3e\n  <div class="as-head">\n    \x3c!--\n      Switcher\n    --\x3e\n    <div class="as-switcher" :class="switcherClass">\n      <div class="as-title">\n        <ti-input-month\n          width="100%"\n          height=".36rem"\n          icon="far-calendar-alt"\n          :hide-border="true"\n          :value="theViewDate"\n          :text="theViewRangeText"\n          :editable="monthEditable"\n          :begin-year="beginYear"\n          :end-year="endYear"\n          @change="onMonthChanged"/>\n      </div>\n      <div class="go-btn to-prev-block" @click="gotoMatrix(-1)">\n        <ti-icon value="zmdi-chevron-left"/>\n      </div>\n      <div class="go-btn go-today" @click="gotoToday">\n        <span>{{\'today\'|i18n}}</span>\n      </div>\n      <div class="go-btn to-next-block" @click="gotoMatrix(1)">\n        <ti-icon value="zmdi-chevron-right"/>\n      </div>\n    </div>\n    \x3c!--\n      Change Mode\n      TODO maybe should support mode changing here\n    --\x3e\n    \n  </div>\n  \x3c!--\n    Day cells\n  --\x3e\n  <div class="as-matrix-table">\n    <div v-for="matrix in dateMatrixList"\n      class="as-matrix">\n      <table>\n        <thead>\n          <th v-for="wt in weekTitles">{{wt.title}}</th>\n        </thead>\n        <tbody>\n          <tr v-for="row in matrix">\n            <td v-for="cell in row" :class="cell.type">\n              <slot name="cell">\n                <span class="as-date-item"\n                  @click="onClickCell(cell)">{{cell.text}}</span>\n              </slot>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>'),function(){var e={data:function(){return{view_date:null}},props:{value:{type:[String,Number,Date,Array],default:null},range:{type:Boolean,default:!1},firstDayInWeek:{type:[Number,String],default:0},matrixMode:{type:String,default:"monthly"},matrixCount:{type:Number,default:1},monthEditable:{type:Boolean,default:!0},monthFormat:{type:String,default:"yyyy-MM-dd"},beginYear:{type:[Number,String],default:1970},endYear:{type:[Number,String],default:(new Date).getFullYear()+1}},watch:{value:function(e,t){if(!_.isEmpty(e)&&!_.isEqual(e,t)){var n,i=_slicedToArray([].concat(e),1)[0],a=Ti.Types.toDate(i).getTime();(n=_).inRange.apply(n,[a].concat(_toConsumableArray(this.theMatrixRangeInMs)))||(this.view_date=null)}}},computed:{switcherClass:function(){if(this.isMonthly&&this.matrixCount>1)return"sz-double"},isMonthly:function(){return"monthly"==this.matrixMode},isWeekly:function(){return"weekly"==this.matrixMode},today:function(){return new Date},todayName:function(){return Ti.Types.formatDate(this.today,"yyyy-MM-dd")},theDate:function(){return _.isArray(this.value)?this.value.length>0?Ti.Types.toDate(this.value[0]):null:Ti.Types.toDate(this.value,null)},theRangeInMs:function(){var e,t=new Date(this.theDate);e=_.isArray(this.value)&&this.value.length>1?Ti.Types.toDate(this.value[1]):new Date(t);var n=[t.getTime(),e.getTime()].sort();return t=Ti.DateTime.setTime(new Date(n[0])),e=Ti.DateTime.setDayLastTime(new Date(n[1])),[t.getTime(),e.getTime()]},theRangeInText:function(){return Ti.Types.formatDate(this.theRangeInMs,"yyyy-MM-dd")},theRangeBeginDate:function(){return new Date(this.theRangeInMs[0])},theRangeEndDate:function(){return new Date(this.theRangeInMs[1])},theMatrixRangeInMs:function(){var e=this.dateMatrixList[0][0][0],t=this.dateMatrixList.length-1,n=this.dateMatrixList[t].length-1,i=this.dateMatrixList[t][n].length-1,a=this.dateMatrixList[t][n][i],r=new Date(e.raw),o=new Date(a.raw);return Ti.DateTime.setTime(r),Ti.DateTime.setDayLastTime(o),[r.getTime(),o.getTime()]},theMatrixRange:function(){return[new Date(this.theMatrixRangeInMs[0]),new Date(this.theMatrixRangeInMs[1])]},theViewRange:function(){for(var e=this.dateMatrixList.length-1,t=this.dateMatrixList[e].length-1,n=this.dateMatrixList[e][t].length-1,i=this.dateMatrixList[e][t][n];"in-month"!=i.type&&n>0;)i=this.dateMatrixList[e][t][--n];var a=new Date(this.theViewDate),r=new Date(i.raw);return Ti.DateTime.setTime(a),Ti.DateTime.setDayLastTime(r),[a,r]},theViewRangeText:function(){var e=this.theViewRange[0];if(this.isMonthly&&this.matrixCount>1){var t=this.theViewRange[1],n=e.getFullYear(),i=e.getMonth(),a=t.getFullYear(),r=t.getMonth(),o=Ti.DateTime.getMonthAbbr(i),s=Ti.DateTime.getMonthAbbr(r),c={yy0:n,yy1:a,MM0:++i,MM1:++r,MT0:Ti.I18n.get("cal.abbr.".concat(o)),MT1:Ti.I18n.get("cal.abbr.".concat(s))};if(n!=a)return Ti.I18n.getf("cal.m-range-beyond-years",c);if(i!=r)return Ti.I18n.getf("cal.m-range-beyond-months",c)}return Ti.Types.formatDate(e,this.monthFormat)},theDateName:function(){return Ti.Types.formatDate(this.theDate,"yyyy-MM-dd")},theViewDate:function(){return this.view_date||this.theDate||new Date},theViewYear:function(){return this.theViewDate.getFullYear()},theViewMonth:function(){return this.theViewDate.getMonth()},theViewMonthAbbr:function(){return Ti.DateTime.getMonthAbbr(this.theViewMonth)},weekTitles:function(){var e=this.firstDayInWeek;if(_.isNumber(e))e=_.clamp(e,0,6);else if(_.isString(e)){var t=_.lowerCase(e);e=Ti.DateTime.getWeekDayValue(t,0)}for(var n=[],i=0;i<7;i++)n.push({day:e,title:Ti.I18n.get(["cal","week",e])}),++e>=7&&(e=0);return n},weekFirstDayValue:function(){return _.isString(this.firstDayInWeek)?Ti.DateTime.getWeekDayValue(this.firstDayInWeek,0):_.clamp(this.firstDayInWeek,0,6)},dateMatrixList:function(){var e=new Date(this.theViewDate),t=[],n=this.theViewYear,i=this.theViewMonth;if(this.isMonthly)for(var a=0;a<this.matrixCount;a++){var r=this.createMatrix(e,n,i),o=r.matrix,s=r.lastDate;t.push(o),e=Ti.DateTime.moveDate(new Date(s),1),++i>=12&&(i=0,n++)}else{var c=this.createMatrix(e).matrix;t.push(c)}return t}},methods:{createMatrix:function(e,t,n){this.isMonthly&&e.setDate(1);for(var i=this.weekFirstDayValue;e.getDay()>i;)Ti.DateTime.moveDate(e,-1);for(;e.getDay()<i;)Ti.DateTime.moveDate(e,1);for(var a=0,r=[],o=null;;){for(var s=[],c=0;c<7;c++){var l=7*a+c,u=(o=Ti.DateTime.createDate(e,l)).getMonth(),d=o.getDate(),m=Ti.Types.formatDate(o,"yyyy-MM-dd"),h=!1;if(this.range){var p;h=(p=_).inRange.apply(p,[o.getTime()].concat(_toConsumableArray(this.theRangeInMs)))}else h=m==this.theDateName;var f={"is-prev":u<n,"is-next":u>n,"in-month":u==n,"is-today":this.todayName==m,"is-selected":h},y=""+d;if(1==d&&(this.isMonthly&&this.matrixCount>1||this.isWeekly)){var g=Ti.DateTime.getMonthAbbr(u);y=Ti.I18n.get("cal.abbr.".concat(g))}s.push({x:c,y:a,index:l,type:f,name:m,text:y,year:o.getFullYear(),month:u,day:o.getDay(),date:o.getDate(),raw:o})}if(a++,this.isWeekly){if(a>_.clamp(this.matrixCount,1,100))break}else{if(!this.isMonthly)break;if(s[0].year==t&&s[0].month>n||s[0].year>t)break}r.push(s)}return{matrix:r,lastDate:o}},gotoToday:function(){this.view_date=new Date},gotoMatrix:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.theViewDate,n=new Date(t.getFullYear(),t.getMonth(),t.getDate());if(this.isMonthly)Ti.DateTime.moveMonth(n,e);else{if(!this.isWeekly)return;Ti.DateTime.moveDate(n,7*e*this.matrixCount)}this.view_date=n},onMonthChanged:function(e){var t=Ti.Types.toDate(e);this.view_date=t},onClickCell:function(e){if(this.range)if(_.isArray(this.value))if(1==this.value.length){var t=[e.raw.getTime(),this.theDate.getTime()].sort(),n=Ti.Types.toDate(t[0]),i=Ti.Types.toDate(t[1]);this.$notify("change",[n,i])}else this.$notify("change",[e.raw]);else this.$notify("change",[e.raw]);else this.$notify("change",e.raw)}},mounted:function(){this.view_date=this.theDate||new Date}};Ti.Preload("ti/com/ti/calendar/ti-calendar.mjs",e)}(),Ti.Preload("ti/com/ti/calendar/_com.json",{name:"ti-calendar",globally:!0,template:"./ti-calendar.html",mixins:["./ti-calendar.mjs"],components:["@com:ti/input/month"]}),Ti.Preload("ti/com/ti/chart/combo/ti-chart-combo.html",'<div class="ti-chart-combo"\n  :class="TopClass">\n  \x3c!--\n    \n  --\x3e\n  <div class="as-head">\n    \x3c!--\n      : \n    --\x3e\n    <TiDroplist\n      v-if="hasMultiChartNames"\n        v-bind="ChartNameListOptions"\n        :auto-i18n="true"\n        :options="nameList"\n        :value="name"\n        @change="OnChartNameChange"/>\n    <div\n      v-else\n        class="as-title">{{ChartTitle | i18n}}</div>\n    \x3c!--\n      \n    --\x3e\n    <TiSwitcher\n      v-if="hasMultiChartTypes"\n        :options="ChartTypeList"\n        :value="ChartType"\n        :allow-empty="false"\n        @change="OnChartTypeChange"/>\n    \x3c!--\n      \n    --\x3e\n    <div class="as-date-range">\n      <span>{{DateRangeText}}</span>\n      <a @click.left="OnPickDateRange">{{\'modify\'|i18n}}</a>\n    </div>\n    \x3c!--\n      \n    --\x3e\n    <TiActionbar align="right"\n      :items="HeadActionBarItems"\n      :status="myActionStatus"/>\n  </div>\n  \x3c!---\n    \n  --\x3e\n  <div class="as-chart">\n    \x3c!--\n      Show chart\n    --\x3e\n    <component\n      v-if="hasChartCom"\n        class="ti-fill-parent"\n        :is="myChartCom.comType"\n        v-bind="myChartCom.comConf"\n        :data="ChartData"/>\n    \x3c!--\n      Show loading\n    --\x3e\n    <ti-loading\n      v-else\n        class="as-mid-tip"/>\n  </div>\n</div>'),function(){var e={pie:{icon:"im-pie-chart",tip:"i18n:chart-pie",comPath:"@com:ti/chart/raw/pie",comType:"TiChartRawPie",comConf:{}},bar:{icon:"im-bar-chart",tip:"i18n:chart-bar",comPath:"@com:ti/chart/raw/bar",comType:"TiChartRawBar",comConf:{}},line:{icon:"im-line-chart-up",tip:"i18n:chart-line",comPath:"@com:ti/chart/raw/line",comType:"TiChartRawLine",comConf:{}},rank:{icon:"zmdi-sort-amount-desc",tip:"i18n:chart-rank",comPath:"@com:ti/chart/raw/rank",comType:"TiChartRawRank",comConf:{}}},t={data:function(){return{myActionStatus:{reloading:!1,force:!1},myChartCom:void 0}},props:{nameList:{type:Array,default:function(){return[]}},name:{type:String,default:void 0},date:{type:[Number,String,Date],default:void 0},maxDate:{type:[Number,String,Date],default:void 0},span:{type:String,default:"7d"},spanOptions:{type:Array,default:function(){return[{text:"7",value:"7d"},{text:"30",value:"30d"},{text:"60",value:"60d"},{text:"90",value:"90d"}]}},chartDefines:{type:Object,default:void 0},chartTypes:{type:[Array,String],default:"pie,bar,line"},type:{type:String,default:void 0},chartOptions:{type:Object,default:function(){return{}}},data:{type:Array,default:function(){return[]}}},computed:{TopClass:function(){return this.getTopClass()},hasChartCom:function(){return!(!this.myChartCom||!this.myChartCom.comType)},hasMultiChartNames:function(){return!_.isEmpty(this.nameList)&&this.nameList.length>1},ChartNameListOptions:function(){return{prefixIconForClean:!1,keepWidthWhenDrop:!0,hover:"suffixIcon",valueBy:"name",textBy:"title",dropDisplay:"title"}},ChartTitle:function(){if(!_.isEmpty(this.nameList)){var e,t=_createForOfIteratorHelper(this.nameList);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.name==this.name)return n.title}}catch(e){t.e(e)}finally{t.f()}}return this.name},HeadActionBarItems:function(){var e=this;return[{name:"reloading",type:"action",icon:"zmdi-refresh",text:"i18n:refresh",altDisplay:{icon:"zmdi-refresh zmdi-hc-spin",text:"i18n:loading"},action:function(){return e.reloadData(!1)}},{type:"group",icon:"im-menu-dot-v",items:[{name:"forceReloading",type:"action",icon:"im-reset",text:"i18n:refresh-hard",altDisplay:{icon:"zmdi-refresh zmdi-hc-spin",text:"i18n:loading",match:{reloading:!0,force:!0}},action:function(){return e.reloadData(!0)}},{name:"forceClearReloading",type:"action",icon:"im-reset",text:"i18n:refresh-hard-clear",altDisplay:{icon:"zmdi-refresh zmdi-hc-spin",text:"i18n:loading",match:{reloading:!0,force:!0}},action:function(){return e.reloadData(!0,!0)}}]}]},TheDate:function(){var e=Ti.DateTime.moveDate(new Date,-1);return this.date&&(e=Ti.DateTime.parse(this.date)),Ti.DateTime.format(e,"yyyy-MM-dd")},TheMaxDate:function(){var e=Ti.DateTime.moveDate(new Date,-1);return this.maxDate&&(e=Ti.DateTime.parse(this.maxDate)),e},TheSpan:function(){return this.span||"7d"},DateRangeText:function(){var e=[],t=this.TheDate;e.push(Ti.DateTime.format(t,"yyyy-MM-dd"));var n=/^(\d+)([smhdw])?$/.exec(this.TheSpan);if(n){var i=parseInt(n[1]),a={w:"dt-u-week",d:"dt-u-day",h:"dt-u-hour",m:"dt-u-min",s:"dt-u-sec",ms:"dt-u-ms"}[n[2]||"ms"],r="".concat(i).concat(Ti.I18n.get(a));e.push(Ti.I18n.getf("dt-in",{val:r}))}return e.join(" ")},hasMultiChartTypes:function(){return!_.isEmpty(this.chartTypes)&&this.chartTypes.length>0},ChartTypeList:function(){var e=this.chartTypes;_.isString(e)&&(e=Ti.S.toArray(e));var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,r=this.loadChartDefine(a);r&&(r.value=a,n.push(r))}}catch(e){i.e(e)}finally{i.f()}return n},ChartType:function(){return this.type?this.type:_.isEmpty(this.chartTypes)?void 0:_.first(this.ChartTypeList).value},ChartData:function(){return this.data||[]}},methods:{OnChartNameChange:function(e){this.$notify("change:chart:name",e)},OnChartTypeChange:function(e){this.$notify("change:chart:type",e)},OnPickDateRange:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ti.App.Open({title:"i18n:edit",width:"5rem",height:"5rem",result:{date:e.TheDate,span:e.TheSpan},model:{prop:"data",event:"change"},comType:"TiForm",comConf:[{fields:[{title:"i18n:stat-date-at",name:"date",comType:"TiInputDate",comConf:{}},{title:"i18n:stat-date-span",name:"span",tip:"i18n:dt-u-day",width:"auto",comType:"TiSwitcher",comConf:{options:e.spanOptions}}]}]});case 2:if((n=t.sent)&&n.date){t.next=5;break}return t.abrupt("return");case 5:if(!((i=Ti.DateTime.parse(n.date)).getTime()>e.TheMaxDate.getTime())){t.next=10;break}return t.next=9,Ti.Toast.Open("i18n:stat-date-at-oor","warn");case 9:return t.abrupt("return",t.sent);case 10:e.$notify("change:chart:datespan",{date:n.date,span:n.span});case 11:case"end":return t.stop()}},t)}))()},loadChartDefine:function(t){var n=_.get(this.chartDefines,t);if(n||(n=_.get(e,t)),n)return _.cloneDeep(n)},reloadData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.myActionStatus={reloading:!0,force:t},this.$notify("reload:data",{force:t,cleanCache:n,done:function(){e.myActionStatus={}}})},reloadChartCom:function(){var e=arguments,t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.length>0&&void 0!==e[0]?e[0]:t.type,a=t.loadChartDefine(i)){n.next=5;break}return console.warn('Fail to reloadChartCom by type : "'.concat(i,'"')),n.abrupt("return");case 5:return n.next=7,Ti.App(t).loadView({comType:a.comPath});case 7:console.log({type:i,chart:a}),r=a.comType,o=_.assign({},a.comConf,_.get(t.chartOptions,t.type)),t.myChartCom={comType:r,comConf:o};case 11:case"end":return n.stop()}},n)}))()}},watch:{type:{handler:"reloadChartCom",immediate:!0},name:function(){this.reloadChartCom()}}};Ti.Preload("ti/com/ti/chart/combo/ti-chart-combo.mjs",t)}(),Ti.Preload("ti/com/ti/chart/combo/_com.json",{name:"ti-chart-combo",globally:!0,template:"./ti-chart-combo.html",mixins:["./ti-chart-combo.mjs"],components:["@com:ti/actionbar","@com:ti/form","@com:ti/droplist","@com:ti/switcher","@com:ti/input/date","@com:ti/chart/g2"]}),Ti.Preload("ti/com/ti/chart/g2/ti-chart-g2.html",'<div class="ti-chart ti-chart-g2"\n  :class="TopClass"\n  :style="TopStyle">\n  <div ref="chart"\n    class="chart-main ti-fill-parent"></div>\n</div>'),function(){var e={props:{data:{type:Array,default:function(){return[]}},width:{type:[Number,String],default:void 0},height:{type:[Number,String],default:void 0},padding:{type:[Number,Array,String],default:"auto"},appendPadding:{type:[Number,Array,String],default:void 0},setup:{type:Function,default:_.identity},autoSource:{type:Boolean,default:!0}},computed:{TopClass:function(){return this.getTopClass()},TopStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})},hasData:function(){return!_.isEmpty(this.data)}},methods:{draw_chart:function(){var e=this.$refs.chart,t=new G2.Chart({container:e,padding:this.padding,appendPadding:this.appendPadding,autoFit:!0});return this.autoSource&&this.hasData&&t.data(this.data),_.isFunction(this.setup)&&this.setup(t,this.data),t.render(),t},redrawChart:function(){if(_.isElement(this.$refs.chart)){if(this.$G2Chart){try{this.$G2Chart.destroy()}catch(e){}$(this.$refs.chart).empty()}this.$G2Chart=this.draw_chart(this)}},drawAll:function(){var e=this;this.$nextTick(function(){e.redrawChart()})}},watch:{data:"drawAll"},mounted:function(){this.drawAll(),Ti.Viewport.watch(this,{resize:function(){var e=this.$G2Chart;e&&(this.$notify("before_resize"),e.forceFit())}})},beforeDestroy:function(){this.$G2Chart&&this.$G2Chart.destroy(),Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/chart/g2/ti-chart-g2.mjs",e)}(),Ti.Preload("ti/com/ti/chart/g2/_com.json",{name:"ti-chart-g2",globally:!0,template:"./ti-chart-g2.html",mixins:["./ti-chart-g2.mjs"],components:[],deps:["@/gu/rs/ti/deps/antv/v4/g2/g2.min.js"]}),Ti.Preload("ti/com/ti/chart/raw/bar/ti-chart-raw-bar.html",'<TiChartG2\n  class="as-bar"\n  :class-name="className"\n  :data="data"\n  :width="width"\n  :height="height"\n  :padding="padding"\n  :append-padding="appendPadding"\n  :auto-source="false"\n  :setup="ChartSetup"/>'),function(){var e={props:{scaleX:{type:Object,default:function(){return{range:[.1,.9]}}}},computed:{ChartSetup:function(){var e=this;return function(t,n){var i=e.evalXYData(n).list;if(!_.isEmpty(i)){t.data(i),e.applyChartSetup(t);var a=t.interval().position(e.ChartPosition);e.applyViewOptions(a,e.view)}}}},methods:{}};Ti.Preload("ti/com/ti/chart/raw/bar/ti-chart-raw-bar.mjs",e)}(),Ti.Preload("ti/com/ti/chart/raw/bar/_com.json",{name:"ti-chart-raw-bar",globally:!0,template:"./ti-chart-raw-bar.html",mixins:["@com:ti/chart/raw/ti-chart-raw.mjs","./ti-chart-raw-bar.mjs"],components:["@com:ti/chart/g2"]}),Ti.Preload("ti/com/ti/chart/raw/line/ti-chart-raw-line.html",'<TiChartG2\n  class="as-line"\n  :class-name="className"\n  :data="data"\n  :width="width"\n  :height="height"\n  :padding="padding"\n  :append-padding="appendPadding"\n  :auto-source="false"\n  :setup="ChartSetup"/>'),function(){var e={props:{areaView:{type:[Object,Boolean],default:!1},pointView:{type:[Object,Boolean],default:!0}},computed:{ChartSetup:function(){var e=this;return function(t,n){var i=e.evalXYData(n).list;if(!_.isEmpty(i)){t.data(i),e.applyChartSetup(t);var a=t.line().position(e.ChartPosition);e.applyViewOptions(a,e.view),e.areaView&&(a=t.area().position(e.ChartPosition),e.applyViewOptions(a,e.areaView)),e.pointView&&(a=t.point().position(e.ChartPosition),e.applyViewOptions(a,{size:4,shape:"circle",style:{stroke:"#FFF",lineWidth:1}},e.pointView))}}}},methods:{}};Ti.Preload("ti/com/ti/chart/raw/line/ti-chart-raw-line.mjs",e)}(),Ti.Preload("ti/com/ti/chart/raw/line/_com.json",{name:"ti-chart-raw-line",globally:!0,template:"./ti-chart-raw-line.html",mixins:["@com:ti/chart/raw/ti-chart-raw.mjs","./ti-chart-raw-line.mjs"],components:["@com:ti/chart/g2"]}),Ti.Preload("ti/com/ti/chart/raw/pie/ti-chart-raw-pie.html",'<TiChartG2\n  class="as-pie"\n  :class-name="className"\n  :data="data"\n  :width="width"\n  :height="height"\n  :padding="padding"\n  :append-padding="appendPadding"\n  :auto-source="false"\n  :setup="ChartSetup"/>'),function(){var e={props:{percentKey:{type:String,default:"percent"},precise:{type:Number,default:2},labelX:{type:[Boolean,Object,String,Function],default:"${i18n:name} : ${percent}% : ${value}"},tooltip:{type:[Boolean,Object],default:function(){return{showTitle:!1,showMarkers:!1,showCrosshairs:!1,itemTpl:'<li class="g2-tooltip-list-item">{name} : {percent}% : {value}</li>'}}},view:{type:Object,default:function(){return{tooltip:["name*percent*value",function(e,t,n){return{name:e,percent:t,value:n}}]}}}},computed:{ChartSetup:function(){var e=this;return function(t,n){var i=e.evalXYData(n),a=i.list,r=i.sum;if(!_.isEmpty(a)){var o,s=_createForOfIteratorHelper(a);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=c[e.positionY];c[e.percentKey]=Ti.Num.precise(100*l/r,e.precise)}}catch(e){s.e(e)}finally{s.f()}t.data(a),e.applyChartSetup(t),t.coordinate("theta",{radius:.75});var u=t.interval().adjust("stack");u.position(e.percentKey).color(e.positionX),e.applyViewLabel(u),e.applyViewOptions(u,{style:{opacity:.4},state:{active:{style:function(e){var t=e.shape;return{matrix:G2.Util.zoom(t,1.5)}}}}},e.view),t.interaction("element-single-selected")}}}},methods:{}};Ti.Preload("ti/com/ti/chart/raw/pie/ti-chart-raw-pie.mjs",e)}(),Ti.Preload("ti/com/ti/chart/raw/pie/_com.json",{name:"ti-chart-raw-pie",globally:!0,template:"./ti-chart-raw-pie.html",mixins:["@com:ti/chart/raw/ti-chart-raw.mjs","./ti-chart-raw-pie.mjs"],components:["@com:ti/chart/g2"]}),Ti.Preload("ti/com/ti/chart/raw/rank/ti-chart-raw-rank.html",'<TiChartG2\n  class="as-bar"\n  :class-name="className"\n  :data="data"\n  :width="width"\n  :height="height"\n  :padding="padding"\n  :append-padding="appendPadding"\n  :auto-source="false"\n  :setup="ChartSetup"/>'),function(){var e={props:{},computed:{ChartSetup:function(){var e=this;return function(t,n){var i=e.evalXYData(n).list;if(!_.isEmpty(i)){t.data(i),e.applyChartSetup(t),t.coordinate().transpose();var a=t.interval().position(e.ChartPosition);e.applyViewOptions(a,e.view),t.interaction("element-active")}}}},methods:{}};Ti.Preload("ti/com/ti/chart/raw/rank/ti-chart-raw-rank.mjs",e)}(),Ti.Preload("ti/com/ti/chart/raw/rank/_com.json",{name:"ti-chart-raw-rank",globally:!0,template:"./ti-chart-raw-rank.html",mixins:["@com:ti/chart/raw/ti-chart-raw.mjs","./ti-chart-raw-rank.mjs"],components:["@com:ti/chart/g2"]}),function(){var e={data:function(){return{minDataValue:void 0,maxDataValue:void 0}},props:{data:{type:Array,default:function(){return[]}},xKey:{type:String,default:"name"},yKey:{type:String,default:"value"},positionX:{type:String,default:"name"},positionY:{type:String,default:"value"},scaleX:{type:Object,default:function(){return{}}},scaleY:{type:Object,default:function(){return{nice:!0,tickCount:10}}},axisX:{type:Object,default:void 0},axisY:{type:Object,default:void 0},labelX:{type:[Boolean,Object,String,Function],default:void 0},labelY:{type:[Boolean,Object,String,Function],default:void 0},tooltip:{type:[Boolean,Object],default:function(){return{showCrosshairs:!0}}},legend:{type:[Boolean,Object],default:function(){return{flipPage:!1}}},view:{type:Object,default:void 0},padding:{type:[Number,Array,String],default:"auto"},appendPadding:{type:[Number,Array,String],default:void 0},width:{type:[Number,String],default:void 0},height:{type:[Number,String],default:void 0}},computed:{ChartPosition:function(){return"".concat(this.positionX,"*").concat(this.positionY)}},methods:{evalXYData:function(e){var t,n,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.identity,r=[],o=0,s=0,c=_createForOfIteratorHelper(e);try{for(c.s();!(i=c.n()).done;){var l,u=i.value,d=1*u[this.yKey]||0,m=a((l={},_defineProperty(l,this.positionX,Ti.I18n.text(u[this.xKey])),_defineProperty(l,this.positionY,d),l));r.push(m),o+=d,s++>0?(n=Math.min(d,n),t=Math.max(d,t)):(n=d,t=d)}}catch(e){c.e(e)}finally{c.f()}return this.maxDataValue=t,this.minDataValue=n,{list:r,max:t,min:n,sum:o}},getChartScaleX:function(){return _.assign({},this.scaleX)},getChartScaleY:function(){var e=_.cloneDeep(this.scaleY)||{};return"auto"!=e.min&&!0!==e.min||(e.min=this.minDataValue),"auto"!=e.max&&!0!==e.max||(e.max=this.maxDataValue),e},applyChartScale:function(e){this.__apply_scale(e,this.positionX,this.getChartScaleX()),this.__apply_scale(e,this.positionY,this.getChartScaleY())},__apply_scale:function(e,t,n){_.isEmpty(n)||(n.tickUnit>0&&(n.min=Ti.Num.floorUnit(n.min,n.tickUnit),n.max=Ti.Num.ceilUnit(n.max,n.tickUnit)),e.scale(t,n))},applyChartAxis:function(e){_.isEmpty(this.axisX)||e.axis(this.positionX,this.axisX),_.isEmpty(this.axisY)||e.axis(this.positionY,this.axisY)},applyChartTooltip:function(e){_.isEmpty(this.tooltip)||e.tooltip(this.tooltip)},applyChartSetup:function(e){this.applyChartAxis(e),this.applyChartScale(e),this.applyChartTooltip(e),_.isUndefined(this.legend)||e.legend(this.legend)},applyViewLabel:function(e){this.__apply_view_label(e,this.positionX,this.labelX),this.__apply_view_label(e,this.positionY,this.labelY)},__apply_view_label:function(e,t,n){if(!Ti.Util.isNil(n)){var i=_.cloneDeep(n);if(_.isString(i)&&(i={content:i}),_.isString(i.content)){var a=i.content;i.content=function(e){return Ti.S.renderBy(a,e)}}e.label(t,i)}},applyViewOptions:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];var r=(t=_).merge.apply(t,[{}].concat(i));_.forEach(r,function(t,n){if(!Ti.Util.isNil(t)){var i=_.concat(t);e[n].apply(e,i)}})}}};Ti.Preload("ti/com/ti/chart/raw/ti-chart-raw.mjs",e)}(),Ti.Preload("ti/com/ti/chart/simple/ti-chart-simple.html",'<div class="ti-chart ti-chart-simple">\n  <header \n    v-if="title" \n    @click="drawAll">{{title}}</header>\n  <aside v-if="aside"\n    :class="asideClass">\n    <slot name="aside">\n      <span v-if="unit">{{unit}}</span>\n    </slot>\n  </aside>\n  <section class="chart-main" ref="chart"></section>\n  <div v-if="hasSlider"\n    ref="slider"\n    class="chart-slider">\n  </div>\n</div>'),function(){var e={inheritAttrs:!1,props:{title:{type:String,default:null},data:{type:Array,default:function(){return[]}},type:{type:String,default:"interval"},axisX:{type:Object,default:function(){return{name:"name",title:"name"}}},axisY:{type:Object,default:function(){return{name:"value",title:"value"}}},aside:{type:String,default:"left"},unit:{type:String,default:null},padding:{type:Array,default:function(){return[20,20,50,50]}},minValue:{type:Number,default:0},maxValue:{type:Number,default:void 0},color:{type:String,default:null},animate:{type:Object,default:function(){return{delay:500,duration:1e3}}},valueInterval:{type:Number,default:100},coord:{type:[String,Object],default:null}},watch:{data:function(){this.debounceRedrawChart()}},computed:{asideClass:function(){return"at-".concat(this.aside||"none")},hasSlider:function(){return!1}},methods:{redrawChart:function(){this.__g2_chart&&(this.__g2_chart.destroy(),$(this.$refs.chart).empty()),this.__g2_chart=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.$refs,n=e.type,i=void 0===n?"interval":n,a=(e.unit,e.data),r=void 0===a?[]:a,o=e.axisX,s=e.axisY,c=e.color,l=e.animate,u=e.padding,d=e.minValue,m=e.maxValue,h=e.valueInterval,p=e.coord,f=t.chart,y=G2.DomUtil.getWidth(f),g=G2.DomUtil.getHeight(f);if(_.isUndefined(m)){m=0;var v,b=s.name,w=_createForOfIteratorHelper(r);try{for(w.s();!(v=w.n()).done;){var x=v.value;m=Math.max(m,x[b])}}catch(e){w.e(e)}finally{w.f()}}var T=new G2.Chart({container:f,padding:u,width:y,height:g});T.source(r),T.legend(!1);var k={label:{textStyle:{fill:o.color||"#888"}}};T.axis(o.name,k);var C={label:{autoRotate:!1,textStyle:{fill:s.color||"#888"}},grid:{type:"line",lineStyle:{stroke:"rgba(255,255,255,0.4)",lineWidth:.5,lineDash:!1}}};T.axis(s.name,C),p&&"transpose"==p&&T.coord().transpose();var S=s.title||s.name;T.scale(s.name,{alias:S,type:"linear",min:d,max:m,tickInterval:h});var I={line:function(){var e=T.line().position(j);return T.point().position(j).size(4).shape("circle").style({stroke:"#fff",lineWidth:1}),e},interval:function(){return T.interval().position(j)},intervalDodge:function(){return T.interval().position(j).adjust([{type:"dodge",marginRatio:1/32}])},intervalStack:function(e){return T.intervalStack().position(e)}}[i];I=I||function(e){return T.interval().position(e)};var j="".concat(o.name,"*").concat(s.name),O=I(j);return c&&O.color(c),l&&O.animate(l),T.render(),T}(this)},drawAll:function(){var e=this;this.$nextTick(function(){e.redrawChart()})}},mounted:function(){var e=this;this.drawAll(),this.debounceRedrawChart=_.debounce(function(){e.redrawChart()},500),this.debounceRedrawAll=_.debounce(function(){e.drawAll()},500)},beforeDestroy:function(){this.__g2_chart&&this.__g2_chart.destroy()}};Ti.Preload("ti/com/ti/chart/simple/ti-chart-simple.mjs",e)}(),Ti.Preload("ti/com/ti/chart/simple/_com.json",{name:"ti-chart-simple",globally:!0,template:"./ti-chart-simple.html",mixins:["./ti-chart-simple.mjs"],components:[],deps:[]}),Ti.Preload("ti/com/ti/color/ti-color.html",'<div class="ti-color" >\n  \x3c!--\n    Color Matrix Table\n  --\x3e\n  <div class="as-table">\n    <table>\n      <thead>\n        <tr>\n          <th v-for="color in colorGrays">\n            <span \n              :style="colorItemStyle(color)" \n              @click="onColorClicked(color)"></span>\n          </th>\n        </tr>\n        <tr>\n            <th v-for="color in colorMajors">\n              <span \n                :style="colorItemStyle(color)" \n                @click="onColorClicked(color)"></span>\n            </th>\n          </tr>\n      </thead>\n      \x3c!--Matrix--\x3e\n      <tbody>\n        <tr v-for="row in colorMatrix"\n          class="as-row">\n          <td v-for="color in row">\n            <span \n              :style="colorItemStyle(color)" \n              @click="onColorClicked(color)"></span>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div> \x3c!-- End Matrix--\x3e\n  \x3c!--\n    Color Input\n  --\x3e\n  <div class="as-input">\n    <div class="as-hex">\n        <input class="as-value" \n          spellcheck="false"\n          :value="theHex"\n          @change="onHexChanged"/>\n    </div>\n    <div class="as-alpha">\n      <ti-input-num \n        :value="theAlpha"\n        :max-value="100"\n        :min-value="0"\n        :step="10"\n        @change="onAlphaChanged"/>\n    </div>\n  </div>\n  \x3c!--\n    Color Preview\n  --\x3e\n  <div class="as-preview">\n    <span>{{theColorValue}}</span>\n  </div>\n</div>'),function(){var e={inheritAttrs:!1,props:{value:{type:[String,Number],default:null},majorColors:{type:Array,default:function(){return["#980000","#ff0000","#ff9900","#ffff00","#00ff00","#00ffff","#4a86e8","#0000ff","#9900ff","#ff00ff"]}},topColors:{type:Array,default:function(){return["#e6b8af","#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#c9daf8","#cfe2f3","#d9d2e9","#ead1dc"]}},bottomColors:{type:Array,default:function(){return["#5b0f00","#660000","#783f04","#7f6000","#274e13","#0c343d","#1c4587","#073763","#20124d","#4c1130"]}},middleDegree:{type:Number,default:5}},computed:{theColor:function(){return Ti.Types.toColor(this.value,null)},theHex:function(){if(this.theColor)return this.theColor.hex},theAlpha:function(){if(this.theColor)return Math.round(100*this.theColor.alpha)},theColorValue:function(){return this.theColor?this.theColor.rgba:Ti.I18n.get("empty")},colCount:function(){return this.topColors.length},colorGrays:function(){for(var e=[],t=255/this.colCount,n=0;n<this.colCount;n++){var i=Math.round((n+1)*t);e.push(Ti.Types.toColor(i))}return e},colorMajors:function(){var e,t=[],n=_createForOfIteratorHelper(this.majorColors);try{for(n.s();!(e=n.n()).done;){var i=e.value;t.push(Ti.Types.toColor(i))}}catch(e){n.e(e)}finally{n.f()}return t},colorMatrix:function(){var e,t=[],n=_createForOfIteratorHelper(this.topColors);try{for(n.s();!(e=n.n()).done;){var i=e.value;t.push(Ti.Types.toColor(i))}}catch(e){n.e(e)}finally{n.f()}var a,r=[],o=_createForOfIteratorHelper(this.bottomColors);try{for(o.s();!(a=o.n()).done;){var s=a.value;r.push(Ti.Types.toColor(s))}}catch(e){o.e(e)}finally{o.f()}for(var c=[t],l=0;l<this.middleDegree-1;l++){for(var u=[],d=0;d<this.colCount;d++){var m=t[d],h=r[d],p=(l+1)/this.middleDegree,f=m.between(h,p);f.adjustByHSL({s:.5}),u.push(f)}c.push(u)}return c.push(r),c}},methods:{colorItemStyle:function(e){return{"background-color":e.rgb}},onHexChanged:function(e){var t=_.trim(e.target.value);/^[0-9a-f]{3,6}$/i.test(t)&&(t="#"+t);var n=Ti.Types.toColor(t);this.$notify("change",n)},onAlphaChanged:function(e){var t=this.theColor?this.theColor.clone():Ti.Types.toColor("black");t.alpha=e/100,this.$notify("change",t)},onColorClicked:function(e){var t=e.clone();_.isNumber(this.theAlpha)&&(t.alpha=this.theAlpha/100),this.$notify("change",t)}}};Ti.Preload("ti/com/ti/color/ti-color.mjs",e)}(),Ti.Preload("ti/com/ti/color/_com.json",{name:"ti-color",globally:!0,template:"./ti-color.html",mixins:["./ti-color.mjs"]}),Ti.Preload("ti/com/ti/combo/box/ti-combo-box.html",'<div class="ti-combo-box" \n  :class="topClass"\n  :style="topStyle">\n  \x3c!--\n    Box: Component\n  --\x3e\n  <div class="as-box" ref="box" :style="theBoxStyle">\n    <slot name="box"><div>ComboBox</div></slot>\n  </div>\n  \x3c!--\n    Mask & Drop\n  --\x3e\n  <template v-if="\'extended\'==status">\n    \x3c!--Mask--\x3e\n    <div class="as-mask" @click.left="notifyCollapse()"></div>\n    \x3c!--Drop--\x3e\n    <div class="as-drop" ref="drop" :style="theDropStyle">\n      <slot name="drop"><div>ComboBox Dropdown</div></slot>\n    </div>\n  </template>\n</div>'),function(){var e={data:function(){return{box:{position:null,width:null,height:null,top:null,left:null},myDropDockReady:!1}},props:{keepWidthWhenDrop:{type:Boolean,default:!0},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null},dropFloat:{type:Boolean,default:!0},dropWidth:{type:[Number,String],default:"box"},dropHeight:{type:[Number,String],default:null},dropOverflow:{type:[String,Array],default:"auto",validator:function(e){if(Ti.Util.isNil(e))return!0;if(_.isString(e)&&(e=e.split(" ")),_.isArray(e)){if(e.length>2||0==e.length)return!1;var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(!/^(auto|hidden|visible|scroll)$/.test(i))return!1}}catch(e){n.e(e)}finally{n.f()}return!0}return!1}},status:{type:String,default:"collapse",validator:function(e){return/^(collapse|extended)$/.test(e)}}},computed:{topClass:function(){return this.getTopClass("is-".concat(this.status))},topStyle:function(){var e;this.keepWidthWhenDrop&&(e=this.box.width);var t=this.box.height;return Ti.Css.toStyle({width:e,height:t})},theBoxStyle:function(){if(this.dropFloat)return Ti.Css.toStyle(this.box)},theDropStyle:function(){return Ti.Css.toStyle({overflow:this.dropOverflow,visibility:this.myDropDockReady?"visible":"hidden"})}},methods:{notifyCollapse:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$notify("collapse",{escaped:e})},dockDrop:function(){var e=this,t=this.$refs.drop,n=this.$refs.box;_.isElement(t)&&_.isElement(n)&&"extended"==this.status&&_.delay(function(){var i=Ti.Rects.createBy(n),a=Ti.Rects.createBy(t);e.box=_.assign({position:"fixed"},i.raw());var r={};"box"==e.dropWidth?r.width=Math.max(i.width,a.width):Ti.Util.isNil(e.dropWidth)||(e.dropWidth<0?r.width=Math.max(i.width,Math.abs(e.dropWidth)):r.width=e.dropWidth),Ti.Util.isNil(e.dropHeight)||(r.height=e.dropHeight),Ti.Dom.setStyle(t,Ti.Css.toStyle(r)),Ti.Dom.dockTo(t,n,{space:{y:2}}),_.delay(function(){e.myDropDockReady=!0},1)},1)},reDockDrop:function(){var e=this;this.resetBoxStyle(),this.$nextTick(function(){e.dockDrop()})},resetBoxStyle:function(){this.box={},this.myDropDockReady=!1},__ti_shortcut:function(e){"ESCAPE"==e&&this.notifyCollapse(!0)}},watch:{status:function(e){var t=this;this.$nextTick(function(){"collapse"==e?t.resetBoxStyle():t.dockDrop()})}},mounted:function(){var e=this;this.dropOpened=this.autoOpenDrop,this.box.width=this.width,this.box.height=this.height,this.dockDrop(),Ti.Viewport.watch(this,{scroll:function(){return e.notifyCollapse()},resize:function(){return e.notifyCollapse()}})},beforeDestroy:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/combo/box/ti-combo-box.mjs",e)}(),Ti.Preload("ti/com/ti/combo/box/_com.json",{name:"ti-combo-box",globally:!0,template:"./ti-combo-box.html",mixins:["./ti-combo-box.mjs"]}),function(){var e={form:{type:Object,default:null},autoCollapse:{type:Boolean,default:!1},statusIcons:{type:Object,default:function(){return{collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"}}},autoFocusExtended:{type:Boolean,default:!0},spacing:{type:String,default:"tiny",validator:function(e){return/^(none|comfy|tiny)$/.test(e)}},dropWidth:{type:[Number,String],default:"box"},dropHeight:{type:[Number,String],default:null}};Ti.Preload("ti/com/ti/combo/filter/ti-combo-filter-props.mjs",e)}(),Ti.Preload("ti/com/ti/combo/filter/ti-combo-filter.html",'<div class="ti-combo-filter"\n  :class="TopClass">\n  \x3c!--\n    Marjor type\n  --\x3e\n\n  \x3c!--\n    Filter input box\n  --\x3e\n  <ti-combo-box\n    class="as-filter"\n    :drop-width="dropWidth"\n    :drop-height="dropHeight"\n    :status="myDropStatus"\n    @collapse="OnCollapse"\n    v-ti-activable>\n    \x3c!--\n      Box\n    --\x3e\n    <template v-slot:box>\n      <ti-input \n        v-bind="TheInputProps"\n\n        :value="InputValue"\n        :prefix-icon="ThePrefixIcon"\n        :suffix-icon="TheSuffixIcon"\n\n        @change="OnInputChanged"\n        @input:focus="OnInputFocused"\n        @prefix:icon="$notify(\'prefix:icon\')"\n        @suffix:icon="OnClickStatusIcon"/>\n    </template>\n    \x3c!--\n      Drop\n    --\x3e\n    <template v-slot:drop="slotProps">\n      <ti-form\n        v-bind="form"\n        :data="myFormData"\n        @change="OnFormChange"/>\n    </template>\n  </ti-combo-box>\n  \x3c!--\n    Sorter\n  --\x3e\n</div>'),function(){var e={data:function(){return{myDropStatus:"collapse",myFreeValue:null,myFormData:{}}},computed:{TopClass:function(){return this.getTopClass({"is-enabled":this.isFilterEnabled},"as-spacing-".concat(this.spacing))},isCollapse:function(){return"collapse"==this.myDropStatus},isExtended:function(){return"extended"==this.myDropStatus},hasForm:function(){return!_.isEmpty(this.form)},isFilterEnabled:function(){return!_.isEmpty(this.myFreeValue)||!_.isEmpty(this.myFormData)},TheInputProps:function(){return _.assign({},this,{autoI18n:this.autoI18n,placeholder:this.placeholder})},InputValue:function(){return this.myFreeValue},ThePrefixIcon:function(){return this.prefixIcon||"im-filter"},TheSuffixIcon:function(){if(this.hasForm)return this.statusIcons[this.myDropStatus]}},methods:{OnCollapse:function(){this.doCollapse()},OnInputChanged:function(e){this.myFreeValue=e,this.myDropStatus="collapse",Ti.Util.isNil(e)&&(this.myFormData={}),this.tryNotifyChanged()},OnInputFocused:function(){this.autoFocusExtended&&!this.isExtended&&this.doExtend()},OnClickStatusIcon:function(){this.isExtended?this.doCollapse():this.doExtend()},OnFormChange:function(e){this.myFormData=e},doExtend:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.hasForm&&!this.isExtended&&(this.myDropStatus="extended")},doCollapse:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).escaped,t=void 0!==e&&e;this.isCollapse||(t||this.tryNotifyChanged(),this.myDropStatus="collapse")},tryNotifyChanged:function(){var e=this.genValue();_.isEqual(e,this.value)||this.$notify("change",e)},genValue:function(){return{keyword:this.myFreeValue,match:this.myFormData}},evalMyValue:function(){var e=_.assign({},this.value);this.myFreeValue=e.keyword,this.myFormData=e.match},__ti_shortcut:function(e){if("ESCAPE"==e)return this.doCollapse({escaped:!0}),{prevent:!0,stop:!0,quit:!0};"ARROWDOWN"!=e?"ARROWUP"!=e||this.doCollapse():this.doExtend()}},watch:{value:{handler:"evalMyValue",immediate:!0}}};Ti.Preload("ti/com/ti/combo/filter/ti-combo-filter.mjs",e)}(),Ti.Preload("ti/com/ti/combo/filter/_com.json",{name:"ti-combo-filter",globally:!0,template:"./ti-combo-filter.html",props:["@com:ti/input/ti-input-props.mjs","@com:ti/combo/filter/ti-combo-filter-props.mjs"],mixins:"./ti-combo-filter.mjs",components:["@com:ti/form","@com:ti/combo/sorter"]}),function(){var e={options:{type:[String,Array,Function,Ti.Dict],default:function(){return[]}},valueBy:{type:[String,Function],default:void 0},textBy:{type:[String,Function],default:void 0},iconeBy:{type:[String,Function],default:void 0},childrenBy:{type:[String,Function],default:void 0},dropComType:{type:String,default:void 0},dropComConf:{type:Object,default:void 0},mustInList:{type:Boolean,default:!1},autoFocusExtended:{type:Boolean,default:!0},filter:{type:Boolean,default:!0},delay:{type:Number,default:800},statusIcons:{type:Object,default:function(){return{collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"}}},dropDisplay:{type:[Object,String,Array],default:void 0},dropItemBorder:{type:Boolean,default:!0},keepWidthWhenDrop:{type:Boolean,default:void 0},dropWidth:{type:[Number,String],default:"box"},dropHeight:{type:[Number,String],default:null}};Ti.Preload("ti/com/ti/combo/input/ti-combo-input-props.mjs",e)}(),Ti.Preload("ti/com/ti/combo/input/ti-combo-input.html",'<ti-combo-box \n  class="ti-combo-input full-field"\n  :class="TopClass"\n  :keep-width-when-drop="keepWidthWhenDrop"\n  :drop-width="dropWidth"\n  :drop-height="dropHeight"\n  :status="myDropStatus"\n  @collapse="OnCollapse"\n  v-ti-activable>\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <ti-input \n      v-bind="TheInputProps"\n\n      :value="InputValue"\n      :prefix-icon="ThePrefixIcon"\n      :suffix-icon="TheSuffixIcon"\n\n      @change="OnInputChanged"\n      @inputing="OnInputInputing"\n      @input:focus="OnInputFocused"\n      @prefix:icon="$notify(\'prefix:icon\')"\n      @suffix:icon="OnClickStatusIcon"/>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop="slotProps">\n    <component \n      :is="DropComType"\n      class="ti-fill-parent"\n      blank-class="as-mid-tip"\n      v-bind="DropComConf"\n      :on-init="OnDropListInit"\n      @select="OnDropListSelected"/>\n  </template>\n</ti-combo-box>'),function(){var e={data:function(){return{myDropStatus:"collapse",myItem:null,myFreeValue:null,myFilterValue:null,myOptionsData:null,myCurrentId:null,myCheckedIds:{},myOldValue:void 0,myDict:void 0,loading:!1}},props:{canInput:{type:Boolean,default:!0},autoCollapse:{type:Boolean,default:!1}},computed:{isCollapse:function(){return"collapse"==this.myDropStatus},isExtended:function(){return"extended"==this.myDropStatus},TopClass:function(){return this.getTopClass()},TheInputProps:function(){return _.assign({},this,{readonly:!this.canInput||this.readonly,autoI18n:this.autoI18n,placeholder:this.placeholder,hover:this.hover,prefixIconForClean:this.prefixIconForClean})},InputValue:function(){return Ti.Util.isNil(this.myFilterValue)?this.myItem?this.Dict.getText(this.myItem)||this.Dict.getValue(this.myItem):this.myFreeValue:this.myFilterValue},GetValueBy:function(){var e=this;return function(t){return e.Dict.getValue(t)}},ThePrefixIcon:function(){if(this.loading)return"zmdi-settings zmdi-hc-spin";var e=this.prefixIcon;return this.myItem&&(e=this.Dict.getIcon(this.myItem)||e),e||"zmdi-minus"},TheSuffixIcon:function(){return this.statusIcons[this.myDropStatus]},DropComType:function(){return this.dropComType||"ti-list"},DropComConf:function(){return _.assign({display:this.dropDisplay||"text",border:this.dropItemBorder},this.dropComConf,{data:this.myOptionsData,currentId:this.myCurrentId,checkedIds:this.myCheckedIds,idBy:this.GetValueBy,multi:!1,hoverable:!0,checkable:!1,autoCheckCurrent:!0})},Dict:function(){return this.myDict||(this.myDict=this.createDict()),this.myDict}},methods:{OnDropListInit:function(e){this.$dropList=e},OnCollapse:function(){this.doCollapse()},OnInputInputing:function(e){this.filter&&(this.myFilterValue=e,this.autoFocusExtended&&(this.isExtended||this.doExtend(!1)),this.isExtended&&this.debReload())},OnInputChanged:function(e,t){var n=this;return _asyncToGenerator(regeneratorRuntime.mark(function i(){var a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n.myFilterValue=null,e){i.next=8;break}n.myItem=null,n.myFreeValue=null,n.myCheckedIds={},n.myCurrentId=null,i.next=12;break;case 8:return i.next=10,n.Dict.getItem(e);case 10:(a=i.sent)?(n.myItem=a,n.myFreeValue=null):n.mustInList||(n.myItem=null,n.myFreeValue=e);case 12:t||n.tryNotifyChanged();case 13:case"end":return i.stop()}},i)}))()},OnInputFocused:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.autoFocusExtended||e.isExtended){t.next=3;break}return t.next=3,e.doExtend();case 3:case"end":return t.stop()}},t)}))()},OnClickStatusIcon:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isExtended){t.next=5;break}return t.next=3,e.doCollapse();case 3:t.next=7;break;case 5:return t.next=7,e.doExtend();case 7:case"end":return t.stop()}},t)}))()},OnDropListSelected:function(){var e=arguments,t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:{},a=i.currentId,r=i.byKeyboardArrow,t.myCurrentId=a,n.next=4,t.OnInputChanged(a,r);case 4:if(!t.autoCollapse||r){n.next=7;break}return n.next=7,t.doCollapse({escaped:!0});case 7:case"end":return n.stop()}},n)}))()},doExtend:function(){var e=arguments,t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=!(e.length>0&&void 0!==e[0])||e[0],t.myOldValue=t.evalMyValue(),!i||!_.isEmpty(t.myOptionsData)){n.next=5;break}return n.next=5,t.reloadMyOptionData(!0);case 5:t.$nextTick(function(){t.myDropStatus="extended"});case 6:case"end":return n.stop()}},n)}))()},doCollapse:function(){var e=arguments,t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=e.length>0&&void 0!==e[0]?e[0]:{},a=i.escaped,(r=void 0!==a&&a)?t.evalMyItem(t.myOldValue):t.tryNotifyChanged(),t.myDropStatus="collapse",t.myOldValue=void 0;case 4:case"end":return n.stop()}},n)}))()},tryNotifyChanged:function(){var e=this.evalMyValue();_.isEqual(e,this.value)||this.$notify("change",e)},evalMyValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.myItem,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.myFreeValue;return e?this.Dict.getValue(e):this.mustInList?null:t},evalMyItem:function(){var e=arguments,t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:t.value,n.next=3,t.Dict.getItem(i);case 3:a=n.sent,_.isArray(a)&&(console.error("!!!!!!! kao ~~~~~~~"),a=null),a?(r=t.Dict.getValue(a),t.myItem=a,t.myFreeValue=null,t.myCurrentId=r,t.myCheckedIds=_defineProperty({},r,!0)):(t.myItem=null,t.myFreeValue=t.mustInList?null:i,t.myCurrentId=null,t.myCheckedIds={});case 6:case"end":return n.stop()}},n)}))()},createDict:function(){var e=this;if(this.options instanceof Ti.Dict)return this.options;if(_.isString(this.options)){var t=Ti.DictFactory.DictReferName(this.options);if(t)return Ti.DictFactory.CheckDict(t,function(t){var n=t.loading;e.loading=n})}return Ti.DictFactory.CreateDict({data:this.options,getValue:Ti.Util.genGetter(this.valueBy||"value"),getText:Ti.Util.genGetter(this.textBy||"text|name"),getIcon:Ti.Util.genGetter(this.iconBy||"icon")})},reloadMyOptionData:function(){var e=arguments,t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(i=e.length>0&&void 0!==e[0]&&e[0])&&!t.isExtended){n.next=8;break}return n.next=4,t.Dict.queryData(t.myFilterValue);case 4:a=n.sent,t.myOptionsData=a,n.next=9;break;case 8:t.myOptionsData=[];case 9:case"end":return n.stop()}},n)}))()},__ti_shortcut:function(e){return"ESCAPE"==e?(this.doCollapse({escaped:!0}),{prevent:!0,stop:!0,quit:!0}):"ENTER"==e?(this.doCollapse(),{stop:!0,quit:!1}):"ARROWUP"==e?(this.$dropList&&this.$dropList.selectPrevRow({payload:{byKeyboardArrow:!0}}),{prevent:!0,stop:!0,quit:!0}):"ARROWDOWN"==e?(this.$dropList&&this.isExtended?this.$dropList.selectNextRow({payload:{byKeyboardArrow:!0}}):this.doExtend(),{prevent:!0,stop:!0,quit:!0}):void 0}},watch:{value:{handler:function(){var e=this;this.$nextTick(function(){e.evalMyItem()})},immediate:!0},options:function(e,t){var n=this;_.isEqual(e,t)||(this.myDict=this.createDict(),this.myOptionsData=[],this.isExtended&&this.$nextTick(function(){n.reloadMyOptionData(!0)}))}},created:function(){var e=this;this.debReload=_.debounce(function(t){e.reloadMyOptionData()},this.delay)}};Ti.Preload("ti/com/ti/combo/input/ti-combo-input.mjs",e)}(),Ti.Preload("ti/com/ti/combo/input/_com.json",{name:"ti-combo-input",globally:!0,template:"./ti-combo-input.html",props:["@com:ti/input/ti-input-props.mjs","./ti-combo-input-props.mjs"],mixins:"./ti-combo-input.mjs",components:["@com:ti/combo/box"]}),Ti.Preload("ti/com/ti/combo/multi-input/ti-combo-multi-input.html",'<ti-combo-box \n  class="ti-combo-multi-input full-field"\n  :class="TopClass"\n  :drop-width="dropWidth"\n  :drop-height="dropHeight"\n  :status="myDropStatus"\n  @collapse="OnCollapse"\n  v-ti-activable>\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <ti-input-tags\n      :input-value="myFilterValue"\n      :value="InputTagValues"\n      :value-case="valueCase"\n      :trimed="trimed"\n        :max-value-len="maxValueLen"\n        :value-unique="valueUnique"\n        :tag-options="tagOptions"\n        :tag-mapping="tagMapping"\n\n      :readonly="readonly"\n      :focused="focused"\n      :hover="hover"\n      :auto-select="autoSelect"\n        :can-input="canInput"\n        :cancel-tag-bubble="cancelTagBubble"\n\n      :placeholder="placeholder"\n      :hide-border="hideBorder"\n      :prefix-icon="prefixIcon"\n      :prefix-hover-icon="prefixHoverIcon"\n      :prefix-icon-for-clean="prefixIconForClean"\n      :prefix-text="prefixText"\n      :suffix-icon="TheSuffixIcon"\n      :suffix-text="suffixText"\n        :tag-item-icon-by="tagItemIconBy"\n        :tag-item-default-icon="tagItemDefaultIcon"\n        :tag-option-default-icon="tagOptionDefaultIcon"\n      \n      :width="width"\n      :height="height"\n\n      :input-change="OnInputChanged"\n\n      @inputing="OnInputInputing"\n      @input:focus="OnInputFocused"\n      @change="OnTagListChanged"\n      @prefix:icon="$notify(\'prefix:icon\')"\n      @suffix:icon="OnClickStatusIcon"/>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <component class="ti-fill-parent"\n      :is="DropComType"\n      blank-class="as-mid-tip"\n      v-bind="DropComConf"\n      :on-init="OnDropListInit"\n      @select="OnDropListSelected"/>\n  </template>\n</ti-combo-box>'),function(){var e={data:function(){return{myDropStatus:"collapse",myTags:[],myFreeValues:[],myFilterValue:null,myOptionsData:[],myCurrentId:null,myCheckedIds:{},myOldValue:void 0,myDict:void 0,loading:!1}},computed:{isCollapse:function(){return"collapse"==this.myDropStatus},isExtended:function(){return"extended"==this.myDropStatus},TopClass:function(){return this.getTopClass()},Values:function(){return Ti.S.toArray(this.value)},InputTagValues:function(){return _.concat(this.myTags,this.myFreeValues)},GetValueBy:function(){var e=this;return function(t){return e.Dict.getValue(t)}},TheSuffixIcon:function(){return this.statusIcons[this.myDropStatus]},DropComType:function(){return this.dropComType||"ti-list"},DropComConf:function(){return _.assign({display:this.dropDisplay||"text",border:this.dropItemBorder},this.dropComConf,{data:this.myOptionsData,currentId:this.myCurrentId,checkedIds:this.myCheckedIds,idBy:this.GetValueBy,multi:!0,hoverable:!0,checkable:!0,autoCheckCurrent:!1})},Dict:function(){return this.myDict||(this.myDict=this.createDict()),this.myDict}},methods:{OnDropListInit:function(e){this.$dropList=e},OnCollapse:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.doCollapse();case 1:case"end":return t.stop()}},t)}))()},OnInputInputing:function(e){this.filter&&(this.myFilterValue=e,this.debReload())},OnInputChanged:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.myFilterValue=null,!t.valueUnique){n.next=22;break}if(!(_.indexOf(t.myFreeValues,e)>=0)){n.next=4;break}return n.abrupt("return");case 4:i=_createForOfIteratorHelper(t.myTags),n.prev=5,i.s();case 7:if((a=i.n()).done){n.next=14;break}if(r=a.value,(o=t.Dict.getValue(r))!=e){n.next=12;break}return n.abrupt("return");case 12:n.next=7;break;case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(5),i.e(n.t0);case 19:return n.prev=19,i.f(),n.finish(19);case 22:return n.next=24,t.Dict.getItem(e);case 24:(s=n.sent)?t.myTags.push(s):e&&!t.mustInList&&t.myFreeValues.push(e),t.tryNotifyChanged();case 27:case"end":return n.stop()}},n,null,[[5,16,19,22]])}))()},OnInputFocused:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.autoFocusExtended||e.isExtended){t.next=3;break}return t.next=3,e.doExtend();case 3:case"end":return t.stop()}},t)}))()},OnTagListChanged:function(){var e=arguments,t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:[],n.next=3,t.evalMyTags(i);case 3:t.tryNotifyChanged();case 4:case"end":return n.stop()}},n)}))()},OnClickStatusIcon:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isExtended){t.next=4;break}e.doCollapse(),t.next=6;break;case 4:return t.next=6,e.doExtend();case 6:case"end":return t.stop()}},t)}))()},OnDropListSelected:function(){var e=arguments,t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:{},a=i.currentId,r=i.checkedIds,t.myCurrentId=a,t.myCheckedIds=r,o=Ti.Util.truthyKeys(r),n.next=6,t.evalMyTags(_.concat(o,t.myFreeValues));case 6:t.tryNotifyChanged();case 7:case"end":return n.stop()}},n)}))()},doExtend:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.myOldValue=e.evalMyValues(),!_.isEmpty(e.myOptionsData)){t.next=4;break}return t.next=4,e.reloadMyOptionData(!0);case 4:e.$nextTick(function(){e.myDropStatus="extended"});case 5:case"end":return t.stop()}},t)}))()},doCollapse:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).escaped;void 0!==e&&e&&this.$notify("change",this.myOldValue),this.myDropStatus="collapse",this.myOldValue=void 0},tryNotifyChanged:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.evalMyValues();e||_.isEqual(t,this.Values)||this.$notify("change",t)},evalMyValues:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.myTags,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.myFreeValues,i=[];return _.forEach(t,function(t){var n=e.Dict.getValue(t);Ti.Util.isNil(n)?e.mustInList||i.push(t):i.push(n)}),this.mustInList||_.isEmpty(n)?i:_.concat(i,n)},evalMyTags:function(){var e=arguments,t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=e.length>0&&void 0!==e[0]?e[0]:t.value,i=Ti.S.toArray(i),a=[],r={},o=[],s=_createForOfIteratorHelper(i),n.prev=6,s.s();case 8:if((c=s.n()).done){n.next=16;break}return l=c.value,n.next=12,t.Dict.getItem(l);case 12:(u=n.sent)?(a.push(u),r[l]=!0):o.push(l);case 14:n.next=8;break;case 16:n.next=21;break;case 18:n.prev=18,n.t0=n.catch(6),s.e(n.t0);case 21:return n.prev=21,s.f(),n.finish(21);case 24:t.myTags=a,t.myFreeValues=o,t.myCheckedIds=r;case 27:case"end":return n.stop()}},n,null,[[6,18,21,24]])}))()},createDict:function(){var e=this;if(this.options instanceof Ti.Dict)return this.options;if(_.isString(this.options)){var t=Ti.DictFactory.DictReferName(this.options);if(t)return Ti.DictFactory.CheckDict(t,function(t){var n=t.loading;e.loading=n})}return Ti.DictFactory.CreateDict({data:this.options,getValue:Ti.Util.genGetter(this.valueBy||"value"),getText:Ti.Util.genGetter(this.textBy||"text|name"),getIcon:Ti.Util.genGetter(this.iconBy||"icon")})},reloadMyOptionData:function(){var e=arguments,t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(i=e.length>0&&void 0!==e[0]&&e[0])&&!t.isExtended){n.next=7;break}return n.next=4,t.Dict.queryData(t.myFilterValue);case 4:t.myOptionsData=n.sent,n.next=8;break;case 7:t.myOptionsData=[];case 8:case"end":return n.stop()}},n)}))()},__ti_shortcut:function(e){return"ESCAPE"==e?(this.doCollapse({escaped:!0}),{prevent:!0,stop:!0,quit:!0}):"ENTER"==e&&this.$dropList&&this.$dropList.isActived?(this.doCollapse(),{stop:!0,quit:!0}):"ARROWUP"==e?(this.$dropList&&this.$dropList.selectPrevRow({payload:{byKeyboardArrow:!0}}),{prevent:!0,stop:!0,quit:!0}):"ARROWDOWN"==e?(this.$dropList&&this.isExtended?this.$dropList.selectNextRow({payload:{byKeyboardArrow:!0}}):this.doExtend(),{prevent:!0,stop:!0,quit:!0}):void 0}},watch:{value:{handler:"evalMyTags",immediate:!0},options:function(e,t){var n=this;_.isEqual(e,t)||(this.myDict=this.createDict(),this.myOptionsData=[],this.isExtended&&this.$nextTick(function(){n.reloadMyOptionData(!0)}))}},created:function(){var e=this;this.debReload=_.debounce(function(t){e.reloadMyOptionData()},this.delay)}};Ti.Preload("ti/com/ti/combo/multi-input/ti-combo-multi-input.mjs",e)}(),Ti.Preload("ti/com/ti/combo/multi-input/_com.json",{name:"ti-combo-multi-input",globally:!0,template:"./ti-combo-multi-input.html",props:["@com:ti/input/ti-input-props.mjs","@com:ti/input/tags/ti-input-tags-props.mjs","@com:ti/combo/input/ti-combo-input-props.mjs"],mixins:["./ti-combo-multi-input.mjs"],components:["@com:ti/combo/box"]}),function(){var e={value:{type:Object,default:void 0},group:{type:Boolean,default:!0},fields:{type:Object,default:function(){return{}}},onlyFields:{type:Boolean,default:!0},fixed:{type:Object,default:void 0},defaultComType:{type:String,default:"ti-input"},spacing:{type:String,default:void 0},width:{type:[Number,String],default:void 0},height:{type:[Number,String],default:void 0}};Ti.Preload("ti/com/ti/combo/pair-auto/ti-combo-pair-auto-props.mjs",e)}(),Ti.Preload("ti/com/ti/combo/pair-auto/ti-combo-pair-auto.html",'<ti-form\n  class="full-field"\n  :class="TopClass"\n  :data="value"\n  :fields="FormFields"\n  :only-fields="onlyFields"\n  :fixed="fixed"\n  :default-com-type="defaultComType"\n  :spacing="spacing"\n  :width="width"\n  :height="height"/>'),function(){var e={computed:{TopClass:function(){return this.getTopClass()},FormFields:function(){return this.group?this.genFormFieldsByGroup():this.genFormFields(this.value)}},methods:{genFormFieldsByGroup:function(){var e=this;console.log("haha");var t=[];return _.forEach(this.value,function(n,i){var a=_.defaults(e.getFieldDefine(i),{title:i,name:i,fields:e.genFormFields(n,i)});t.push(a)}),t},genFormFields:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,i=[],a=n?[n]:[];return _.forEach(t,function(t,r){var o=_.defaults(e.getFieldDefine(r,n),{title:r,name:_.concat(a,r).join(".")});i.push(o)}),i},getFieldDefine:function(e,t){var n,i=[];t&&i.push("".concat(t,".").concat(e)),i.push(e),i.push("@default");var a=(n=Ti.Util).getFallbackNil.apply(n,[this.fields].concat(i));return a&&a.title&&((a=_.cloneDeep(a)).title=Ti.S.renderBy(a.title,{name:e,group:t})),a}}};Ti.Preload("ti/com/ti/combo/pair-auto/ti-combo-pair-auto.mjs",e)}(),Ti.Preload("ti/com/ti/combo/pair-auto/_com.json",{name:"ti-combo-pair-auto",globally:!0,template:"./ti-combo-pair-auto.html",props:["./ti-combo-pair-auto-props.mjs"],mixins:"./ti-combo-pair-auto.mjs"}),function(){var e={value:void 0,fields:{type:Array,default:function(){return[]}},keepShownTo:{type:String,default:void 0},tabAt:{type:String,default:void 0}};Ti.Preload("ti/com/ti/combo/pair-group/ti-combo-pair-group-props.mjs",e)}(),Ti.Preload("ti/com/ti/combo/pair-group/ti-combo-pair-group.html",'<ti-gui\n  class="ti-fill-parent full-field"\n  :class="TopClass"\n  :layout="TheLayout"\n  :shown="TheShown"\n  :keep-shown-to="keepShownTo"\n  @block:shown="OnShownUpdate"/>'),function(){var e={data:function(){return{myFieldNames:[],myFieldMap:{},myCurrentTabName:null}},computed:{TopClass:function(){return this.getTopClass()},ValueObj:function(){if(Ti.Util.isNil(this.value)||_.isEmpty(this.value))return{};if(_.isString(this.value)){return _.trim(this.value)?JSON.parse(this.value):{}}if(_.isPlainObject(this.value))return this.value;console.warn("Unsupported value object:",this.value)},TheBlocks:function(){var e=_.cloneDeep(this.myFieldNames);_.forEach(this.ValueObj,function(t,n){_.indexOf(e,n)<0&&e.push(n)}),this.myFieldNames=e;var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,r=_.get(this.ValueObj,a),o=_.get(this.myFieldMap,a)||{},s=Ti.Util.explainObj(r,_objectSpread({title:a,name:a},_.pick(o,"title","name","icon"),{body:{comType:o.comType||"ti-input-text",comConf:o.comConf||{value:"=.."}}}));n.push(s)}}catch(e){i.e(e)}finally{i.f()}return n},TheLayout:function(){return{type:"tabs",tabAt:this.tabAt,blocks:this.TheBlocks}},TheShown:function(){var e=this;if(!this.keepShownTo){var t={};return _.forEach(this.myFieldNames,function(n){t[n]=n==e.myCurrentTabName}),t}}},methods:{__on_events:function(e,t){var n=this,i=_slicedToArray(e.split("::"),2),a=i[0];return"change"==i[1]&&this.$parent?function(){var e=_.cloneDeep(n.ValueObj);return _.set(e,a,t),n.$parent.$notify("change",e),!0}:function(){return!0}},OnShownUpdate:function(e){var t=Ti.Util.truthyKeys(e);this.myCurrentTabName=_.first(t)},evalBlocks:function(){var e={},t=[];_.forEach(this.fields,function(n){e[n.name]=n,t.push(n.name)}),this.myFieldNames=t,this.myFieldMap=e}},watch:{blocks:{handler:"evalBlocks",immediate:!0}}};Ti.Preload("ti/com/ti/combo/pair-group/ti-combo-pair-group.mjs",e)}(),Ti.Preload("ti/com/ti/combo/pair-group/_com.json",{name:"ti-combo-pair-group",globally:!0,template:"./ti-combo-pair-group.html",props:["./ti-combo-pair-group-props.mjs"],mixins:"./ti-combo-pair-group.mjs"}),function(){var e={value:{type:Object,default:void 0},options:{type:[String,Array,Function,Ti.Dict],default:function(){return[]}},valueBy:{type:[String,Function],default:void 0},textBy:{type:[String,Function],default:void 0},iconeBy:{type:[String,Function],default:void 0},trimed:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},placeholder:{type:String,default:void 0},textWidth:{type:[Number,String],default:void 0},textHeight:{type:[Number,String],default:void 0}};Ti.Preload("ti/com/ti/combo/pair-text/ti-combo-pair-text-props.mjs",e)}(),Ti.Preload("ti/com/ti/combo/pair-text/ti-combo-pair-text.html",'<div class="ti-combo-pair-text full-field">\n  <div\n    v-for="it in Items"\n      class="as-pair">\n      \x3c!--title--\x3e\n      <div class="as-title">\n        \x3c!--Icon--\x3e\n        <ti-icon\n          v-if="it.icon" \n            :value="it.icon"/>\n        \x3c!--Text--\x3e\n        <div\n          v-if="it.text" \n            class="as-text">{{it.text}}</div>\n      </div>\n      \x3c!--Textarea--\x3e\n      <div\n        class="as-textarea">\n          <textarea \n            spellcheck="false"\n            :style="TextStyle"\n            :placeholder="it.placeholder"\n            :value="it.value"\n            :readonly="readonly"\n            @change="OnTextChange(it.key, $event)"></textarea></div>\n  </div>\n</div>'),function(){var e={data:function(){return{myOptionsData:null,myDict:void 0,myValue:{}}},computed:{TopClass:function(){return this.getTopClass()},Items:function(){var e=this,t=[];return _.forEach(this.myOptionsData,function(n){var i=e.Dict.getText(n),a=e.Dict.getValue(n),r=e.Dict.getIcon(n),o=_.get(e.myValue,a),s=n.placeholder||e.placeholder;t.push({value:o,text:i,icon:r,key:a,placeholder:s})}),t},TextStyle:function(){return Ti.Css.toStyleRem100({width:this.textWidth,height:this.textHeight})},Dict:function(){return this.myDict||(this.myDict=this.createDict()),this.myDict}},methods:{OnTextChange:function(e,t){var n=t.srcElement.value;this.trimed&&(n=_.trim(n)),this.updateValue(_defineProperty({},e,n))},updateValue:function(e){this.myValue=_.assign({},this.myValue,e)},createDict:function(){var e=this;if(this.options instanceof Ti.Dict)return this.options;if(_.isString(this.options)){var t=Ti.DictFactory.DictReferName(this.options);if(t)return Ti.DictFactory.CheckDict(t,function(t){var n=t.loading;e.loading=n})}return Ti.DictFactory.CreateDict({data:this.options||[],getValue:Ti.Util.genGetter(this.valueBy||"value"),getText:Ti.Util.genGetter(this.textBy||"text|name"),getIcon:Ti.Util.genGetter(this.iconBy||"icon")})},reloadMyOptionData:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Dict.getData();case 2:e.myOptionsData=t.sent;case 3:case"end":return t.stop()}},t)}))()}},watch:{value:{handler:function(e,t){_.isEqual(e,t)||(this.myValue=_.cloneDeep(e))},immediate:!0},options:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_.isEqual(t,n)){e.next=4;break}return this.myDict=this.createDict(),e.next=4,this.reloadMyOptionData();case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),myValue:function(e,t){_.isEqual(e,t)||this.$notify("change",this.myValue)}},mounted:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reloadMyOptionData();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()};Ti.Preload("ti/com/ti/combo/pair-text/ti-combo-pair-text.mjs",e)}(),Ti.Preload("ti/com/ti/combo/pair-text/_com.json",{name:"ti-combo-pair-text",globally:!0,template:"./ti-combo-pair-text.html",props:["./ti-combo-pair-text-props.mjs"],mixins:"./ti-combo-pair-text.mjs"}),function(){var e={placeholder:{type:String,default:"i18n:no-title"},options:{type:Array,default:function(){return[]}},value:{type:Object,default:null},width:{type:[Number,String],default:void 0},height:{type:[Number,String],default:void 0},dropWidth:{type:[Number,String],default:"box"},dropHeight:{type:[Number,String],default:null},sortIcons:{type:Object,default:function(){return{asc:"im-arrow-up",desc:"im-arrow-down"}}},suffixIcon:{type:String,default:"im-menu-list"}};Ti.Preload("ti/com/ti/combo/sorter/ti-combo-sorter-props.mjs",e)}(),Ti.Preload("ti/com/ti/combo/sorter/ti-combo-sorter.html",'<div class="ti-combo-sorter"\n  :class="TopClass"\n  :style="TopStyle">\n  \x3c!--\n    sorter box\n  --\x3e\n  <ti-combo-box\n    class="as-sorter"\n    :drop-width="dropWidth"\n    :drop-height="dropHeight"\n    :drop-float="false"\n    :status="myDropStatus"\n    @collapse="OnCollapse"\n    v-ti-activable>\n    \x3c!--\n      Box\n    --\x3e\n    <template v-slot:box>\n      \x3c!--\n        Current Sort Box\n      --\x3e\n      <div class="as-sort-box"\n        @click.left="OnClickBox">\n        \x3c!--Sort Icon--\x3e\n        <ti-icon\n          v-if="TheSortIcon"\n          class="as-sort-icon"\n            :value="TheSortIcon"/>\n        \x3c!--Preifx Icon--\x3e\n        <ti-icon \n          v-if="ThePrefixIcon"\n            class="at-prefix"\n            :value="ThePrefixIcon"/>\n        \x3c!--Title--\x3e\n        <div class="as-title">{{SortTitle|i18n}}</div>\n      </div>\n      \x3c!--Status Icon--\x3e\n      <div  \n        v-if="TheSuffixIcon"\n          class="as-sort-btn"\n          @click.left="OnClickSuffixIcon">\n            <ti-icon :value="TheSuffixIcon"/>\n      </div>\n    </template>\n    \x3c!--\n      Drop\n    --\x3e\n    <template v-slot:drop="slotProps">\n      <ti-list\n        id-by="value"\n        :data="myListData"\n        :display="[\'<icon>\', \'text\']"\n        :hoverable="true"\n        :current-id="SortBy"\n        @select="OnDropListSelected"/>\n    </template>\n  </ti-combo-box>\n  \x3c!--\n    Sorter\n  --\x3e\n</div>'),function(){var e={data:function(){return{myDropStatus:"collapse",myItem:null,isASC:!0,myListData:[]}},computed:{isCollapse:function(){return"collapse"==this.myDropStatus},isExtended:function(){return"extended"==this.myDropStatus},TopClass:function(){return this.getTopClass()},TopStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})},SortTitle:function(){return Ti.Util.getOrPick(this.myItem,"text|value",this.placeholder)},SortBy:function(){return _.first(_.keys(this.value))},SortAs:function(){return _.get(this.value,this.SortBy)||1},ThePrefixIcon:function(){return _.get(this.myItem,"icon")},TheSortIcon:function(){return this.isASC?this.sortIcons.asc:this.sortIcons.desc},TheSuffixIcon:function(){if(!_.isEmpty(this.myListData)&&this.myListData.length>1)return this.suffixIcon},Dict:function(){var e=this;if(this.options instanceof Ti.Dict)return this.options;if(_.isString(this.options)){var t=Ti.DictFactory.DictReferName(this.options);if(t)return Ti.DictFactory.CheckDict(t,function(t){var n=t.loading;e.loading=n})}return Ti.DictFactory.CreateDict({data:this.options,getValue:Ti.Util.genGetter(this.valueBy||"value"),getText:Ti.Util.genGetter(this.textBy||"text|name"),getIcon:Ti.Util.genGetter(this.iconBy||"icon")})}},methods:{OnCollapse:function(){this.doCollapse()},OnClickBox:function(){this.isASC=!this.isASC,this.tryNotifyChanged()},OnClickSuffixIcon:function(){this.isExtended?this.doCollapse():this.doExtend()},OnDropListSelected:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).current;this.myItem=e,this.doCollapse()},doExtend:function(){this.myDropStatus="extended"},doCollapse:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).escaped,t=void 0!==e&&e;this.myDropStatus="collapse",t||this.tryNotifyChanged()},tryNotifyChanged:function(){var e=this.genValue();_.isEqual(e,this.value)||this.$notify("change",e)},genValue:function(){return _defineProperty({},_.get(this.myItem,"value"),this.isASC?1:-1)},evalMyValue:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={by:null,as:1},_.isString(e.value)?(i=e.value.split(":"),n.by=_.nth(i,0),n.as="1"==_.nth(i,1)?1:-1):_.isArray(e.value)?(n.by=_.nth(e.value,0),n.as=_.nth(e.value,1)>0?1:-1):(n.by=e.SortBy,n.as=e.SortAs),t.next=4,e.Dict.getItem(n.by);case 4:a=t.sent,e.myItem=a||{text:e.text||n.by,value:n.by},e.isASC=1==n.as;case 7:case"end":return t.stop()}},t)}))()},__ti_shortcut:function(e){if("ESCAPE"==e)return this.doCollapse({escaped:!0}),{prevent:!0,stop:!0,quit:!0}}},watch:{value:{handler:"evalMyValue",immediate:!0}},mounted:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Dict.getData();case 2:this.myListData=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()};Ti.Preload("ti/com/ti/combo/sorter/ti-combo-sorter.mjs",e)}(),Ti.Preload("ti/com/ti/combo/sorter/_com.json",{name:"ti-combo-sorter",globally:!0,template:"./ti-combo-sorter.html",props:"@com:ti/combo/sorter/ti-combo-sorter-props.mjs",mixins:"./ti-combo-sorter.mjs",components:["@com:ti/combo/box"]}),Ti.Preload("ti/com/ti/crumb/com/crumb-item/crumb-item.html",'<div class="ti-crumb-item" \n  :class="TopClass"\n  @click.left="OnClickTop">\n  \x3c!--\n    Icon\n  --\x3e\n  <ti-icon v-if="icon" \n    class="as-icon"\n    :value="icon"/>\n  \x3c!--\n    Text\n  --\x3e\n  <template v-if="text">\n    <a v-if="href"\n      class="as-text"\n      @click.prevent\n      :href="href"\n      :class="TextClass">{{TheText}}</a>\n    <span v-else\n      class="as-text"\n      :class="TextClass">{{TheText}}</span>\n  </template>\n  \x3c!--\n    Asterisk\n  --\x3e\n  <span v-if="asterisk"\n    class="as-asterisk"\n    ></span>\n  \x3c!--\n    Path Icon\n  --\x3e\n  <ti-icon v-if="!atLast"\n    class="as-path-icon"\n    :value="pathIcon"/>\n</div>'),function(){var e={props:{index:{type:Number,default:-1},atLast:{type:Boolean,default:!1},icon:{type:[String,Object],default:null},text:{type:String,default:null},href:{type:String,default:null},value:{type:[String,Number,Boolean,Object],default:null},pathIcon:{type:String,default:null},asterisk:{type:Boolean,default:!1},cancelBubble:{type:Boolean,default:!0}},computed:{TopClass:function(){return Ti.Css.mergeClassName({"at-tail":this.atLast,"at-path":!this.atLast,"is-asterisk":this.asterisk},this.className)},TextClass:function(){return{"without-icon":!this.hasIcon&&!this.removeIcon}},hasIcon:function(){return!!this.icon},TheText:function(){return Ti.I18n.text(this.text)},TheData:function(){return{index:this.index,icon:this.icon,text:this.text,value:this.value,href:this.href,atLast:this.atLast,asterisk:this.asterisk}}},methods:{OnClickTop:function(e){this.hasOptions?(e.stopPropagation(),this.openDrop()):this.cancelBubble&&e.stopPropagation(),this.href&&this.$notify("item:active",this.TheData)}}};Ti.Preload("ti/com/ti/crumb/com/crumb-item/crumb-item.mjs",e)}(),Ti.Preload("ti/com/ti/crumb/com/crumb-item/_com.json",{name:"crumb-item",globally:!1,template:"./crumb-item.html",mixins:["./crumb-item.mjs"]}),Ti.Preload("ti/com/ti/crumb/ti-crumb.html",'<div class="ti-crumb"\n  :class="topClass">\n  \x3c!--\n    Loop items\n  --\x3e\n  <crumb-item v-for="it in theData"\n    :key="it.index"\n    :path-icon="pathIcon"\n    :cancel-bubble="cancelItemBubble"\n    v-bind="it"/>\n</div>'),function(){var e={inheritAttrs:!1,props:{data:{type:Array,default:function(){return[]}},itemIcon:{type:String,default:null},pathIcon:{type:String,default:"zmdi-chevron-right"},cancelItemBubble:{type:Boolean,default:!0}},computed:{topClass:function(){if(this.className)return this.className},theData:function(){var e=this,t=[];return _.isArray(this.data)&&_.forEach(this.data,function(n,i){t.push(_.assign({icon:e.itemIcon},n,{index:i,atLast:i==e.data.length-1}))}),t},theDataValues:function(){var e,t=[],n=_createForOfIteratorHelper(this.theData);try{for(n.s();!(e=n.n()).done;){var i=e.value;t.push(Ti.Util.fallback(i.value,null))}}catch(e){n.e(e)}finally{n.f()}return t}}};Ti.Preload("ti/com/ti/crumb/ti-crumb.mjs",e)}(),Ti.Preload("ti/com/ti/crumb/_com.json",{name:"ti-crumb",globally:!0,template:"./ti-crumb.html",mixins:["./ti-crumb.mjs"],components:["./com/crumb-item"]}),Ti.Preload("ti/com/ti/datetime/ti-datetime.html",'<div class="ti-datetime">\n  \x3c!--Date--\x3e\n  <ti-calendar class="is-date"\n    :value="theDate"\n    :month-format="monthFormat"\n    :begin-year="beginYear"\n    :end-year="endYear"\n    @change="onDateChanged"/>\n  \x3c!--Time--\x3e\n  <div class="is-time">\n    <div class="as-time-text">{{theTimeText}}</div>\n    <div class="as-time-cols">\n      <ti-time\n        :value="theTime"\n        :mode="timeMode"\n        width="100%"\n        height="none"\n        @change="onTimeChanged"/>\n    </div>\n  </div>\n</div>'),function(){var e={inheritAttrs:!1,props:{value:{type:[String,Number,Date],default:null},timeMode:{type:String,default:"sec",validator:function(e){return/^(sec|min|auto)$/.test(e)}},monthFormat:{type:String,default:"yyyy-MM"},beginYear:{type:[Number,String],default:1970},endYear:{type:[Number,String],default:(new Date).getFullYear()+1}},computed:{topClass:function(){return this.className},theDate:function(){return Ti.Types.toDate(this.value,null)},theTime:function(){return Ti.Types.toTime(this.theDate)},theTimeFormat:function(){return{sec:"HH:mm:ss",min:"HH:mm",auto:"auto"}[this.timeMode]},theTimeText:function(){return this.getTimeText(this.theTime)}},methods:{onDateChanged:function(e){this.theDate||new Date;var t=Ti.Types.toTime(this.theTime||0);(e=new Date(e)).setHours(t.hours),e.setMinutes(t.minutes),e.setSeconds(t.seconds),e.setMilliseconds(t.milliseconds),this.$notify("change",e)},onTimeChanged:function(e){var t=this.theDate||new Date,n=new Date(t);n.setHours(e.hours),n.setMinutes(e.minutes),n.setSeconds(e.seconds),n.setMilliseconds(e.milliseconds),this.$notify("change",n)},getTimeText:function(e){if(e instanceof Ti.Types.Time)return e.toString(this.theTimeFormat)}}};Ti.Preload("ti/com/ti/datetime/ti-datetime.mjs",e)}(),Ti.Preload("ti/com/ti/datetime/_com.json",{name:"ti-datetime",globally:!0,template:"./ti-datetime.html",mixins:["./ti-datetime.mjs"],components:["@com:ti/time","@com:ti/calendar"]}),Ti.Preload("ti/com/ti/droplist/ti-droplist.html",'<component \n  :is="ComType"\n  v-bind="this"\n  :can-input="false"\n  :must-in-list="true"\n  :auto-collapse="true"\n  @change="$notify(\'change\', $event)"/>'),function(){var e={props:{multi:{type:Boolean,default:!1}},computed:{ComType:function(){return this.multi?"ti-combo-multi-input":"ti-combo-input"}}};Ti.Preload("ti/com/ti/droplist/ti-droplist.mjs",e)}(),Ti.Preload("ti/com/ti/droplist/_com.json",{name:"ti-droplist",globally:!0,template:"./ti-droplist.html",props:["@com:ti/input/ti-input-props.mjs","@com:ti/input/tags/ti-input-tags-props.mjs","@com:ti/combo/input/ti-combo-input-props.mjs"],mixins:["./ti-droplist.mjs"],components:["@com:ti/combo/input","@com:ti/combo/multi-input"]}),function(){var e={type:{type:String,default:"String"},disabled:{type:Boolean,default:!1},uniqKey:{type:String,default:null},name:{type:[String,Array],default:null},icon:{type:String,default:null},fieldStatus:{type:Object,default:function(){return{}}},message:{type:String,default:null},title:{type:String,default:null},tip:{type:String,default:null},width:{type:[String,Number],default:"stretch"},height:{type:[String,Number],default:void 0},checkEquals:{type:Boolean,default:!0},undefinedAs:{default:void 0},nullAs:{default:void 0},nanAs:{type:Number,default:void 0},emptyAs:{type:String,default:void 0},defaultAs:{default:void 0},display:{type:[String,Object,Boolean],default:!1},comType:{type:String,default:"ti-label"},comConf:{type:Object,default:function(){return{}}},autoValue:{type:String,default:"value"},serializer:{type:Function,default:_.identity},transformer:{type:Function,default:_.identity},data:{type:Object,default:null},statusIcons:{type:Object,default:function(){return{spinning:"fas-spinner fa-spin",error:"zmdi-alert-polygon",warn:"zmdi-alert-triangle",ok:"zmdi-check-circle"}}}};Ti.Preload("ti/com/ti/form/com/form-field/form-field-props.mjs",e)}(),Ti.Preload("ti/com/ti/form/com/form-field/form-field.html",'<div class="form-field"\n  :class="TopClass"\n  :style="ConStyle"\n  v-ti-activable>\n  \x3c!--========================================\n    Field Name\n  --\x3e\n  <div \n    v-if="isShowTitle"\n      class="field-name"\n      :title="StatusText">\n        \x3c!--Status Icon--\x3e\n        <span \n          v-if="StatusIcon"\n            class="name-status">\n            <ti-icon :value="StatusIcon"/>\n        </span>\n        \x3c!--Title Text--\x3e\n        <span class="name-title">{{TheTitle|i18n}}</span>\n        \x3c!--Field Icon--\x3e\n        <span \n          v-if="isShowIcon" \n            class="name-icon">\n            <ti-icon :value="icon"/>\n        </span>\n  </div>\n  \x3c!--========================================\n    Field Value\n  --\x3e\n  <div class="field-value"\n    :style="ConStyle">\n    \x3c!--\n      UI Component\n    --\x3e\n    <div v-if="isComReady"\n      class="field-component"\n      :class="ComClass"\n      :style="ComStyle">\n      <component \n        :is="myComType"\n          v-bind="myComConf"\n          @change="OnChange"/>\n    </div>\n    \x3c!--\n      Tips\n    --\x3e\n    <div \n      v-if="isShowTip"\n        class="field-tip">{{tip|i18n}}</div>\n  </div>\n</div>'),function(){var e={data:function(){return{isComReady:!1,myComType:null,myComConf:null}},computed:{TopClass:function(){return this.getTopClass({"no-status-icons":!this.hasStatusIcons,"has-status-icons":this.hasStatusIcons,"is-disabled":this.disabled},"as-".concat(this.viewportMode),this.StatusType?"is-".concat(this.StatusType):null)},isShowTitle:function(){return!Ti.Util.isNil(this.title)},isShowIcon:function(){return!Ti.Util.isNil(this.icon)},isShowTip:function(){return!Ti.Util.isNil(this.tip)},hasStatusIcons:function(){return!_.isEmpty(this.statusIcons)},isNumberType:function(){return/^(Number|Integer|Float)$/.test(this.type)},UniqName:function(){return _.isArray(this.name)?this.name.join("-"):this.name},TheTitle:function(){return this.title||this.UniqName},ComClass:function(){var e="auto"==this.width,t="full"==this.width,n="stretch"==this.width;return{"is-size-auto":e,"is-size-full":t,"is-size-stretch":n,"is-size-fixed":!(e||t||n||Ti.Util.isNil(this.width))}},ConStyle:function(){return Ti.Css.toStyle({height:this.height})},ComStyle:function(){var e={height:this.height};return this.width&&!/^(auto|stretch)$/.test(this.width)&&(e.width=Ti.Css.toSize(this.width)),Ti.Css.toStyle(e)},TheDisplay:function(){if(this.display)return!_.isBoolean(this.display)&&this.display?this.evalFieldDisplayItem(this.display,{defaultKey:this.name}):{comType:"ti-label",comConf:{}}},CurrentDisplayItem:function(){var e=this.TheDisplay||{};return!this.isActived&&this.display||(e={defaultAs:this.defaultAs,comType:this.comType,comConf:this.comConf}),_.defaults(_.cloneDeep(e),{comType:"ti-label",key:this.name,type:this.type,dict:this.dict,transformer:this.transformer})},Status:function(){return _.get(this.fieldStatus,this.uniqKey)},StatusType:function(){return _.get(this.Status,"type")},StatusText:function(){return _.get(this.Status,"text")},StatusIcon:function(){if(this.Status&&this.hasStatusIcons)return this.statusIcons[this.Status.type]}},methods:{__before_bubble:function(e){var t=e.name,n=e.args;if(this.name)return{name:"".concat(this.UniqName,"::").concat(t),args:n}},OnChange:function(e){var t=e;try{t=this.serializer(e)}catch(t){return void this.$notify("invalid",{errMessage:""+t,name:this.name,value:e})}t=this.evalInputValue(t),this.checkEquals&&_.isEqual(t,this.fieldValue)||this.$notify("change",{name:this.name,value:t})},evalTheCom:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.evalDataForFieldDisplayItem({itemData:e.data,displayItem:e.CurrentDisplayItem,vars:{isActived:e.isActived,disabled:e.disabled},autoIgnoreNil:!1,autoIgnoreBlank:!1,autoValue:e.autoValue});case 2:if(n=t.sent){t.next=8;break}return e.myComType=void 0,e.myComConf=void 0,e.isComReady=!1,t.abrupt("return");case 8:e.myComType=n.comType,e.myComConf=n.comConf,e.isComReady=!0;case 11:case"end":return t.stop()}},t)}))()},evalInputValue:function(e){return _.isUndefined(e)?_.cloneDeep(Ti.Util.fallback(this.undefinedAs,this.defaultAs)):_.isNull(e)?_.cloneDeep(Ti.Util.fallback(this.nullAs,this.defaultAs,null)):this.isNumberType&&isNaN(e)?_.cloneDeep(Ti.Util.fallback(this.nanAs,this.defaultAs,NaN)):_.isEmpty(e)&&_.isString(e)?_.cloneDeep(Ti.Util.fallback(this.emptyAs,this.defaultAs,"")):e}},watch:{CurrentDisplayItem:"evalTheCom",data:{handler:"evalTheCom",immediate:!0}}};Ti.Preload("ti/com/ti/form/com/form-field/form-field.mjs",e)}(),Ti.Preload("ti/com/ti/form/com/form-field/_com.json",{name:"ti-form-field",globally:!0,template:"./form-field.html",methods:"@com:ti/support/field_display.mjs",props:"./form-field-props.mjs",mixins:["./form-field.mjs"]}),function(){var e={type:{type:String,default:"Group"},icon:{type:String,default:null},title:{type:String,default:null},fields:{type:Array,default:function(){return[]}},data:{type:Object,default:null},fieldStatus:{type:Object,default:function(){return{}}},statusIcons:{spinning:"fas-spinner fa-spin",error:"zmdi-alert-polygon",warn:"zmdi-alert-triangle",ok:"zmdi-check-circle"}};Ti.Preload("ti/com/ti/form/com/form-group/form-group-props.mjs",e)}(),Ti.Preload("ti/com/ti/form/com/form-group/form-group.html",'<div class="form-group"\n  :class="topClass">\n  <div class="group-title">\n    <ti-icon\n      v-if="show.icon" \n      :value="icon"/>\n    <span\n      v-if="show.title"\n      class="name-title">{{title|i18n}}</span>\n  </div>\n  <div class="group-fields">\n      <ti-form-field v-for="fld in fields"\n        :key="fld.key"\n        v-bind="fld"\n        :data="data"\n        :field-status="fieldStatus"\n        :status-icons="statusIcons"/>\n  </div>\n</div>'),Ti.Preload("ti/com/ti/form/com/form-group/form-group.mjs",{inheritAttrs:!1,computed:{topClass:function(){var e=["as-".concat(this.viewportMode)];return this.className&&e.push(this.className),e},show:function(){return{title:!!this.title,icon:!!this.icon}}}}),Ti.Preload("ti/com/ti/form/com/form-group/_com.json",{name:"form-group",globally:!1,template:"./form-group.html",props:"./form-group-props.mjs",mixins:["./form-group.mjs"]}),function(){var e={data:{type:Object,default:void 0},fields:{type:Array,default:function(){return[]}},fieldStatus:{type:Object,default:function(){return{}}},onlyFields:{type:Boolean,default:!0},fixed:{type:Object,default:void 0},keepTabIndexBy:{type:String,default:void 0},defaultComType:{type:String,default:"ti-label"},autoShowBlank:{type:Boolean,default:void 0},currentTab:{type:Number,default:0},adjustDelay:{type:Number,default:0},mode:{type:String,default:"all",validator:function(e){return/^(all|tab)$/.test(e)}},tabAt:{type:String,default:"top-center",validator:function(e){return/^(top|bottom)-(left|center|right)$/.test(e)}},blankAs:{type:Object,default:function(){return{icon:"fas-dna",default:void 0}}},icon:{type:String,default:void 0},title:{type:String,default:void 0},statusIcons:{type:Object,default:function(){return{spinning:"fas-spinner fa-spin",error:"zmdi-alert-polygon",warn:"zmdi-alert-triangle",ok:"zmdi-check-circle"}}},spacing:{type:String,default:"comfy",validator:function(e){return/^(comfy|tiny)$/.test(e)}},width:{type:[Number,String],default:void 0},height:{type:[Number,String],default:void 0}};Ti.Preload("ti/com/ti/form/ti-form-props.mjs",e)}(),Ti.Preload("ti/com/ti/form/ti-form.html",'<div class="ti-form"\n  :class="TopClass"\n  :style="TopStyle"\n  v-ti-activable>\n  <template v-if="hasData || !isAutoShowBlank">\n    \x3c!--\n      Form Header\n    --\x3e\n    <header class="form-header" v-if="hasHeader">\n      <span v-if="icon"\n        class="it-icon"><ti-icon :value="icon"/></span>\n      <span v-if="title"\n        class="it-text">{{title|i18n}}</span>\n    </header>\n    \x3c!--\n      Tabs for display:"tab"\n    --\x3e\n    <div class="form-tab" v-if="isTabMode">\n      <ul>\n        <li v-for="tab in TabItems" \n          :class="tab.className"\n          @click.left="OnClickTab(tab)">\n          <ti-icon \n            class="tab-icon" v-if="tab.icon" :value="tab.icon"/>\n          <span \n            class="tab-text" v-if="tab.title">{{tab.title|i18n}}</span>\n        </li>\n      </ul>\n    </div>\n    \x3c!--\n      Form Fields\n    --\x3e\n    <div class="form-body" :class="FormBodyClass">\n      <template v-for="fld in FieldsInCurrentTab">\n        \x3c!--\n          For Group\n        --\x3e\n        <form-group v-if="\'Group\' == fld.type"\n          v-bind="fld"\n          :data="data"\n          :field-status="fieldStatus"\n          :status-icons="statusIcons"\n          @change="OnFieldChange"/>\n        \x3c!--\n          For field\n        --\x3e\n        <ti-form-field v-else\n          :key="fld.key"\n          v-bind="fld"\n          :data="data"\n          :field-status="fieldStatus"\n          :status-icons="statusIcons"\n          @change="OnFieldChange"/>\n      </template>\n    </div>\n  </template>\n  \x3c!--\n    Show Blank\n  --\x3e\n  <ti-loading \n    v-else\n      class="nil-data as-big-mask"\n      v-bind="blankAs"/>\n</div>'),function(){var e={model:{prop:"data",event:"change"},data:function(){return{myKeysInFields:[],currentTabIndex:0}},computed:{TopClass:function(){var e;return this.getTopClass((e={"is-tab-mode":this.isTabMode,"is-all-mode":this.isAllMode},_defineProperty(e,"tab-at-".concat(this.tabAt),this.isTabMode),_defineProperty(e,"tab-at-".concat(this.TheTabAtX),this.isTabMode),_defineProperty(e,"tab-at-".concat(this.TheTabAtY),this.isTabMode),e),"as-".concat(this.viewportMode),"as-spacing-".concat(this.spacing||"comfy"))},TopStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})},hasHeader:function(){return!(!this.title&&!this.icon)},hasData:function(){return!Ti.Util.isNil(this.data)},isTabMode:function(){return"tab"==this.mode},isAllMode:function(){return"all"==(this.mode||"all")},isAutoShowBlank:function(){return Ti.Util.fallback(this.autoShowBlank,!1)},TheTabAt:function(){return this.tabAt.split("-")},TheTabAtX:function(){return this.TheTabAt[1]},TheTabAtY:function(){return this.TheTabAt[0]},TheFields:function(){var e=this,t=[],n=[];return _.forEach(this.fields,function(i,a){var r=e.evalFormField(i,[a]);r&&(t.push(r),r.disabled||("Group"==r.type?_.forEach(r.fields,function(e){var t=e.disabled,i=e.name;t||n.push(i)}):n.push(r.name)))}),this.myKeysInFields=_.flattenDeep(n),t},TabList:function(){var e=[],t=[];if(this.isTabMode){var n,i=_createForOfIteratorHelper(this.TheFields);try{for(i.s();!(n=i.n()).done;){var a=n.value;"Group"==a.type?e.push(a):t.push(a)}}catch(e){i.e(e)}finally{i.f()}_.isEmpty(t)||e.push({type:"Group",title:"i18n:others",fields:t})}return e},TabItems:function(){var e=this,t=[];return _.forEach(this.TabList,function(n,i){var a=i==e.currentTabIndex;t.push(_.assign({},n,{index:i,isCurrent:a,className:{"is-current":a}}))}),t},CurrentTab:function(){var e,t=_createForOfIteratorHelper(this.TabItems);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.isCurrent)return n}}catch(e){t.e(e)}finally{t.f()}},FormBodyClass:function(){if(this.CurrentTab)return"tab-body-".concat(this.CurrentTab.index)},FieldsInCurrentTab:function(){return this.isTabMode?this.CurrentTab?this.CurrentTab.fields||[]:[]:this.TheFields},TheData:function(){return this.data?this.onlyFields?_.pick(this.data,this.myKeysInFields):this.data:{}}},methods:{OnClickTab:function(e){this.currentTabIndex=e.index,this.$notify("tab:change",e)},OnFieldChange:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.name,i=t.value;this.$notify("field:change",{name:n,value:i}),this.$nextTick(function(){var t=e.getData({name:n,value:i});e.$notify("change",t)})},getData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.value,i=_.cloneDeep(this.TheData);if(t&&_.isString(t))if(".."==t)_.assign(i,n);else{if(/^'[^']+'$/.test(t))return;_.set(i,t,n)}else if(_.isArray(t)){var a,r={},o=_createForOfIteratorHelper(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;r[s]=_.get(n,s)}}catch(e){o.e(e)}finally{o.f()}_.assign(i,r)}return this.fixed&&_.assign(i,fixed),i},isGroup:function(e){return"Group"==e.type||_.isArray(e.fields)},evalFormField:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t.hidden||!Ti.Validate.match(this.data,t.hidden)){var i=!1;t.disabled&&(i=Ti.Validate.match(this.data,t.disabled));var a=Ti.Util.anyKey(t.name||n,"ti-fld");if(this.isGroup(t)){var r={disabled:i,type:"Group",key:a,className:t.className,icon:t.icon,title:t.title,fields:[]};return _.forEach(t.fields,function(t,i){var a=e.evalFormField(t,[].concat(_toConsumableArray(n),[i]));a&&r.fields.push(a)}),_.isEmpty(r.fields)?null:r}if(t.name){var o=_.defaults(_.omit(t,"disabled"),{type:"String",comType:this.defaultComType,disabled:i});if(o.uniqKey=_.concat(o.name).join("-"),!o.serializer){var s=Ti.Types.getFuncByType(o.type||"String","serializer");o.serializer="Ti.Types.".concat(s)}if(!o.transformer){var c=Ti.Types.getFuncByType(o.type||"String","transformer");o.transformer="Ti.Types.".concat(c)}var l={context:this,partial:"right"};return o.serializer=Ti.Util.genInvoking(o.serializer,l),o.transformer=Ti.Util.genInvoking(o.transformer,l),o}}},__adjust_fields_width:function(){if(_.isElement(this.$el)){var e,t=Ti.Dom.findAll(".form-field > .field-name",this.$el),n=_createForOfIteratorHelper(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;Ti.Dom.setStyle(i,{width:""})}}catch(e){n.e(e)}finally{n.f()}var a,r=0,o=_createForOfIteratorHelper(t);try{for(o.s();!(a=o.n()).done;){var s=a.value,c=Ti.Rects.createBy(s);r=Math.ceil(Math.max(c.width,r))}}catch(e){o.e(e)}finally{o.f()}var l,u=_createForOfIteratorHelper(t);try{for(u.s();!(l=u.n()).done;){var d=l.value;Ti.Dom.setStyle(d,{width:r})}}catch(e){u.e(e)}finally{u.f()}}},adjustFieldsWidth:function(){var e=this;this.adjustDelay>0?_.delay(function(){e.__adjust_fields_width()},this.adjustDelay):this.$nextTick(function(){e.__adjust_fields_width()})},__ti_shortcut:function(e){var t=this;"ENTER"==e&&_.delay(function(){t.$notify("submit")},100)}},watch:{TheFields:function(){this.adjustFieldsWidth()},currentTab:function(e){this.currentTabIndex=e},currentTabIndex:function(e){this.keepTabIndexBy&&Ti.Storage.session.set(this.keepTabIndexBy,e),this.adjustFieldsWidth()}},created:function(){var e=this;this.__debounce_adjust_fields_width=_.debounce(function(){e.__adjust_fields_width()},500)},mounted:function(){var e=this;this.currentTabIndex=Ti.Storage.session.getInt(this.keepTabIndexBy,this.currentTab),Ti.Viewport.watch(this,{resize:function(){e.__debounce_adjust_fields_width()}}),this.adjustFieldsWidth()},beforeDestroy:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/form/ti-form.mjs",e)}(),Ti.Preload("ti/com/ti/form/_com.json",{name:"ti-form",globally:!0,template:"./ti-form.html",methods:"@com:ti/support/field_display.mjs",props:"./ti-form-props.mjs",mixins:["./ti-form.mjs"],components:["./com/form-group","./com/form-field","@com:ti/input","@com:ti/input/num","@com:ti/input/tags","@com:ti/input/color","@com:ti/input/icon","@com:ti/input/date","@com:ti/input/time","@com:ti/input/timerange","@com:ti/input/month","@com:ti/input/datetime","@com:ti/input/daterange","@com:ti/input/text","@com:ti/combo/input","@com:ti/combo/multi-input","@com:ti/label","@com:ti/toggle","@com:ti/switcher","@com:ti/droplist"]}),Ti.Preload("ti/com/ti/form/_hmaker.json",{icon:"im-task-o",title:"i18n:com-form",scenes:["desktop","tablet"],editComType:"hmaker-edit-com-form",editComConf:{value:"=comConf"}}),Ti.Preload("ti/com/ti/gui/block/ti-gui-block.html",'<div class="ti-gui-block" \n  :class="TopClass"\n  :style="TopStyle">\n  \x3c!--\n    Header\n  --\x3e\n  <div class="block-head" v-if="isShowHeader">\n    \x3c!--Icon--\x3e\n    <div class="as-icon" v-if="icon">\n      <ti-icon :value="icon"/>\n    </div>\n    \x3c!--Title--\x3e\n    <div class="as-title">\n      <span v-if="title">{{title|i18n}}</span>\n    </div>\n    \x3c!--Actions--\x3e\n    <div class="as-actions" v-if="hasActions">\n      <ti-actionbar \n        :items="actions"\n        :status="actionStatus"/>\n    </div>\n  </div>\n  \x3c!--\n    Content\n  --\x3e\n  <div class="block-main" v-if="TheCom">\n    <div class="block-main-con"\n      :class="MainConClass">\n      <component \n        :class="MainComponentClass"\n        :is="TheCom.comType"\n        v-bind="TheCom.comConf"/>\n    </div>\n  </div>\n  \x3c!--Blank--\x3e\n  </div>'),function(){var e={inject:["$gui"],props:{type:{type:String,default:null,validator:function(e){return Ti.Util.isNil(e)||/^(cols|rows|tabs)$/.test(e)}},title:{type:String,default:null},icon:{type:[String,Object],default:null},hideTitle:{type:Boolean,default:!1},actions:{type:Array,default:function(){return[]}},actionStatus:{type:Object,default:function(){return{}}},name:{type:String,default:null},blocks:{type:Array,default:function(){return[]}},comClass:{type:String,default:void 0},body:{type:[String,Object],default:null},embedIn:{type:String,default:null,validator:function(e){return/^(panel|rows|cols|tabs)$/.test(e)}},size:{type:[String,Number],default:null},overflow:{type:String,default:void 0,validator:function(e){return _.isUndefined(e)||/^(auto|none|fill|cover)$/.test(e)}},flex:{type:String,default:void 0,validator:function(e){return _.isUndefined(e)||/^(nil|auto|grow|shrink|both|none)$/.test(e)}},schema:{type:Object,default:function(){return{}}},shown:{type:Object,default:function(){return{}}},captureEvents:{type:Object,default:function(){return{}}},tabAt:void 0,adjustable:void 0,border:void 0},computed:{TopClass:function(){var e;return this.getTopClass((e={},_defineProperty(e,"gui-block-".concat(this.name),!!this.name),_defineProperty(e,"is-show-header",this.isShowHeader),_defineProperty(e,"is-hide-header",!this.isShowHeader),_defineProperty(e,"ti-fill-parent",/^(tabs|panel)$/.test(this.embedIn)),e),"is-flex-".concat(this.FlexName))},TopStyle:function(){var e=this;return Ti.Css.toStyle({rows:function(){return{height:e.BlockSize}},cols:function(){return{width:e.BlockSize}},tabs:function(){return{}},panel:function(){return{}}}[this.embedIn]())},MainConClass:function(){if(!this.isFlexNil)return{"fill-parent":"fill"==this.TheOverflow,"cover-parent":"cover"==this.TheOverflow}},MainComponentClass:function(){return Ti.Css.mergeClassName(this.$gui.defaultComClass,this.comClass)},TheOverflow:function(){var e=this.overflow||this.$gui.defaultOverflow||"auto";if("auto"==e){if(this.isFlexNone)return"fill";if(/^(both|shrink)$/.test(this.FlexName))return"cover"}return e},BlockSize:function(){var e=this.size;return/^(auto|stretch)$/.test(e)?null:e},FlexName:function(){var e=this.flex||this.$gui.defaultFlex||"auto";return"auto"==e?"stretch"==this.size||Ti.Util.isNil(this.size)?"both":"none":e||"both"},isFlexNil:function(){return"nil"==this.FlexName},isFlexNone:function(){return"none"==this.FlexName},isShowHeader:function(){return!this.hideTitle&&"tabs"!=this.embedIn&&!(!this.title&&!this.hasActions)},hasActions:function(){return!_.isEmpty(this.actions)},TheCom:function(){if(this.body){var e=_.isString(this.body)?this.schema[this.body]:this.body;if(e){var t=this.schema[e.extends],n=_.omit(e,"extends");return e=_.merge({},t,n),_.defaults(e,{comType:"ti-label",comConf:{}})}}if(!_.isEmpty(this.blocks)){return{comType:"ti-gui-".concat(this.type||"cols"),comConf:{tabAt:this.tabAt,border:this.border,adjustable:this.adjustable,blocks:this.blocks,schema:this.schema,actionStatus:this.actionStatus,shown:this.shown,defaultFlex:this.defaultFlex}}}}},methods:{__before_bubble:function(e){var t=e.name,n=e.args;if(this.name)return{name:"".concat(this.name,"::").concat(t),args:n}}}};Ti.Preload("ti/com/ti/gui/block/ti-gui-block.mjs",e)}(),Ti.Preload("ti/com/ti/gui/block/_com.json",{name:"ti-gui-block",globally:!0,template:"./ti-gui-block.html",mixins:["./ti-gui-block.mjs"]}),Ti.Preload("ti/com/ti/gui/cols/ti-gui-cols.html",'<div class="ti-gui-cols" :class="topClass">\n  <template v-if="hasBlocks">\n    <template v-for="(block, index) in blocks">\n      <ti-gui-block v-if="!block.hide"\n        :key="index"\n        embed-in="cols"\n        v-bind="block"\n        :schema="schema"\n        :action-status="actionStatus"\n        :shown="shown"/>\n      </template>\n  </template>\n</div>'),function(){var e={inheritAttrs:!1,props:{blocks:{type:Array,default:function(){return[]}},adjustable:{type:Boolean,default:!0},border:{type:Boolean,default:!1},schema:{type:Object,default:function(){return{}}},actionStatus:{type:Object,default:function(){return{}}},shown:{type:Object,default:function(){return{}}}},computed:{topClass:function(){return Ti.Css.mergeClassName({"is-adjustable":this.adjustable,"show-border":this.border},this.className)},hasBlocks:function(){return!_.isEmpty(this.blocks)}},methods:{}};Ti.Preload("ti/com/ti/gui/cols/ti-gui-cols.mjs",e)}(),Ti.Preload("ti/com/ti/gui/cols/_com.json",{name:"ti-gui-cols",globally:!0,template:"./ti-gui-cols.html",mixins:["./ti-gui-cols.mjs"],components:["@com:ti/gui/block"]}),Ti.Preload("ti/com/ti/gui/panel/ti-gui-panel.html",'<div class="ti-gui-panel"\n  :class="TopClass"\n  @click.left="OnClickMask">\n  <div class="panel-con"\n    :style="ConStyle"\n    @click.left.stop>\n    \x3c!--\n      Block\n    --\x3e\n    <ti-gui-block\n      embed-in="panel"\n      flex="none"\n      :type="type"\n      :title="title"\n      :icon="icon"\n      :hide-title="hideTitle"\n      :actions="actions"\n      :action-status="actionStatus"\n      :name="name"\n      :blocks="blocks"\n      :body="body"\n      :overflow="overflow"\n      :schema="schema"\n      :shown="shown"\n      :capture-events="captureEvents"/>\n    \x3c!--\n      Closer\n    --\x3e\n    <div\n      v-if="hasCloser"\n        class="panel-closer"\n        :class="CloserClass">\n        <ti-icon\n          value="zmdi-close"\n          @click.native="OnClose"/>\n    </div>\n  </div>\n</div>'),function(){var e={inject:["$gui"],props:{captureEvents:void 0,title:{type:String,default:null},icon:{type:[String,Object],default:null},hideTitle:{type:Boolean,default:!1},actions:{type:Array,default:function(){return[]}},actionStatus:{type:Object,default:function(){return{}}},name:{type:String,default:null},type:{type:String,default:null,validator:function(e){return Ti.Util.isNil(e)||/^(cols|rows|tabs)$/.test(e)}},blocks:{type:Array,default:function(){return[]}},body:{type:[String,Object],default:null},adjustable:{type:[Boolean,String],default:!0,validator:function(e){return _.isBoolean(e)||/^(x|y)$/.test(e)}},overflow:{type:String,default:void 0},width:{type:[String,Number],default:-1},height:{type:[String,Number],default:-1},viewportWidth:{type:[String,Number],default:0},viewportHeight:{type:[String,Number],default:0},position:{type:String,default:"center",validator:function(e){return/^(left|right|top|bottom|center)$/.test(e)||/^((left|right)-top|bottom-(left|right))$/.test(e)}},fixed:{type:Boolean,default:!1},closer:{type:String,default:"default",validator:function(e){return _.isNull(e)||/^(default|bottom|top|left|right)$/.test(e)}},mask:{type:Boolean,default:!1},transparent:{type:Boolean,default:!1},clickMaskToClose:{type:Boolean,default:!1},schema:{type:Object,default:function(){return{}}},shown:{type:Object,default:function(){return{}}}},computed:{TopClass:function(){return this.getTopClass({"show-mask":this.mask,"no-mask":!this.mask,"is-bg-transparent":this.transparent,"is-bg-opaque":!this.transparent,"is-closer-default":this.isCloserDefault,"is-fixed":this.fixed},"at-".concat(this.position))},ConStyle:function(){var e=Ti.Css.toPixel(this.width,this.viewportWidth,this.width),t=Ti.Css.toPixel(this.height,this.viewportHeight,this.height);return Ti.Css.toStyle({width:e,height:t})},hasCloser:function(){return!!this.closer},isCloserDefault:function(){return!0===this.closer||"default"==this.closer},CloserClass:function(){return Ti.Css.mergeClassName(_defineProperty({"as-lamp-cord":!this.isCloserDefault,"as-default":this.isCloserDefault},"at-".concat(this.closer),!this.isCloserDefault))}},methods:{OnClose:function(){this.$gui.OnBlockHide(this.name)},OnClickMask:function(){this.clickMaskToClose&&this.$gui.OnBlockHide(this.name)}}};Ti.Preload("ti/com/ti/gui/panel/ti-gui-panel.mjs",e)}(),Ti.Preload("ti/com/ti/gui/panel/_com.json",{name:"ti-gui-panel",globally:!0,template:"./ti-gui-panel.html",mixins:["./ti-gui-panel.mjs"],components:["@com:ti/gui/block"]}),Ti.Preload("ti/com/ti/gui/rows/ti-gui-rows.html",'<div class="ti-gui-rows" :class="topClass">\n  <template v-if="hasBlocks">\n    <template v-for="(block, index) in blocks">\n      <ti-gui-block v-if="!block.hide"\n        :key="index"\n        embed-in="rows"\n        v-bind="block"\n        :schema="schema"\n        :action-status="actionStatus"\n        :shown="shown"/>\n    </template>\n  </template>\n</div>'),function(){var e={inheritAttrs:!1,props:{blocks:{type:Array,default:function(){return[]}},adjustable:{type:Boolean,default:!0},border:{type:Boolean,default:!1},schema:{type:Object,default:function(){return{}}},actionStatus:{type:Object,default:function(){return{}}},shown:{type:Object,default:function(){return{}}}},computed:{topClass:function(){return Ti.Css.mergeClassName({"is-adjustable":this.adjustable,"show-border":this.border},this.className)},hasBlocks:function(){return!_.isEmpty(this.blocks)}},methods:{}};Ti.Preload("ti/com/ti/gui/rows/ti-gui-rows.mjs",e)}(),Ti.Preload("ti/com/ti/gui/rows/_com.json",{name:"ti-gui-rows",globally:!0,template:"./ti-gui-rows.html",mixins:["./ti-gui-rows.mjs"],components:["@com:ti/gui/block"]}),Ti.Preload("ti/com/ti/gui/tabs/ti-gui-tabs.html",'<div class="ti-gui-tabs" :class="TopClass">\n  \x3c!--\n    Tab title bar\n  --\x3e\n  <header :class="TabClass">\n    <ul>\n      <li v-for="it in TabItems"\n        :key="it.key"\n        :class="it.className"\n        @click="OnSetCurrentTabItem(it)">\n        \x3c!--Icon--\x3e\n        <ti-icon\n          v-if="it.icon"\n            class="it-icon"\n            :value="it.icon"/>\n        \x3c!--Text--\x3e\n        <span class="it-text">{{it.title|i18n}}</span>\n      </li>\n    </ul>\n  </header>\n  \x3c!--\n    Current Block\n  --\x3e\n  <section v-if="CurrentBlock">\n    <ti-gui-block \n      embed-in="tabs"\n      v-bind="CurrentBlock"\n      :action-status="actionStatus"\n      :schema="schema"\n      :shown="shown"/>\n  </section>\n</div>'),function(){var e={inject:["$gui"],data:function(){return{myCurrentTab:0}},props:{tabAt:{type:String,default:"top-left",validator:function(e){return/^(top|bottom)-(left|center|right)$/.test(e)}},blocks:{type:Array,default:function(){return[]}},schema:{type:Object,default:function(){return{}}},actionStatus:{type:Object,default:function(){return{}}},shown:{type:Object,default:function(){return{}}}},computed:{TopClass:function(){return this.getTopClass("at-".concat(this.TheTabAt[0]))},TheTabAt:function(){return this.tabAt.split("-")},TabClass:function(){return"as-".concat(this.TheTabAt[1])},BlockWrapList:function(){for(var e=[],t=0;t<this.blocks.length;t++){var n=this.blocks[t],i=n.name||"tab-".concat(t);e.push({index:t,key:i,block:n})}return e},TabItems:function(){var e,t=[],n=_createForOfIteratorHelper(this.BlockWrapList);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=this.myCurrentTab==i.key,r={current:a,key:i.key,index:i.index,name:i.block.name,icon:i.block.icon,title:i.block.title,className:{"is-current":a}};r.icon||r.title||(r.title=Ti.Util.fallback(r.name,r.key)),t.push(r)}}catch(e){n.e(e)}finally{n.f()}return t},CurrentTabItem:function(){var e,t=_createForOfIteratorHelper(this.TabItems);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.current)return n}}catch(e){t.e(e)}finally{t.f()}},CurrentBlock:function(){var e,t=_createForOfIteratorHelper(this.BlockWrapList);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(this.myCurrentTab==n.key)return n.block}}catch(e){t.e(e)}finally{t.f()}}},methods:{OnSetCurrentTabItem:function(e){var t;this.$gui.OnBlockShownUpdate((t={},_defineProperty(t,e.key,!0),_defineProperty(t,this.CurrentTabItem.key,!1),t))},syncCurrentTabFromShown:function(){var e,t=_createForOfIteratorHelper(this.BlockWrapList);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(this.shown[n.key])return void(this.myCurrentTab=n.key)}}catch(e){t.e(e)}finally{t.f()}this.BlockWrapList.length>0&&(this.myCurrentTab=this.BlockWrapList[0].key)}},watch:{shown:function(){this.syncCurrentTabFromShown()},blocks:function(){this.syncCurrentTabFromShown()}},mounted:function(){this.syncCurrentTabFromShown()}};Ti.Preload("ti/com/ti/gui/tabs/ti-gui-tabs.mjs",e)}(),Ti.Preload("ti/com/ti/gui/tabs/_com.json",{name:"ti-gui-tabs",globally:!0,template:"./ti-gui-tabs.html",mixins:["./ti-gui-tabs.mjs"],components:["@com:ti/gui/block"]}),function(){var e={formatGuiBlock:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=["at-".concat(e.position||"center")],a=t[e.name];_.isUndefined(a)&&(a=!n),e.mask?i.push("show-mask"):i.push("no-mask");var r=e.position?"gui-panel-".concat(e.position):null,o=["className","actionDisplayMode","flex","icon","title","actions","name","adjustable","closer","position","overflow","status"],s={};!n||e.mask?(o.push("width"),o.push("height")):/^(left|right)$/.test(e.position)?(o.push("height"),s.width=e.width):/^(top|bottom)$/.test(e.position)?(o.push("width"),s.height=e.height):"center"==e.position?(o.push("width"),o.push("height")):(s.width=e.width,s.height=e.height);var c=_.pick(e,o);e.size&&"stretch"!=e.size&&("cols"==this.type?c.width=e.size:"rows"==this.type&&(c.height=e.size));var l,u;if(e.body){var d=e.body||{};if(_.isString(d)){var m=this.schema[d];if(_.isPlainObject(m)){if((d=m).extends){var h=this.schema[d.extends],p=_.omit(d,["extends"]);d=_.merge({},h,p)}}else d={comType:d,comConf:{}}}l=d.comType||"ti-label",u=d.comConf||{value:e.name||"GUI"}}else _.isEmpty(e.blocks)||(l="ti-gui",u=_.pick(e,["type","blocks","adjustable","border"]),_.defaults(u,{type:"cols",schema:this.schema,shown:this.shown}));return{className:i.join(" "),panelStyle:Ti.Css.toStyle(s),name:e.name,isShown:a,transName:r,info:c,comType:l,comConf:u}},getFormedBlockList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[];if(_.isArray(e)){var a,r=_createForOfIteratorHelper(e);try{for(r.s();!(a=r.n()).done;){var o=a.value,s=this.formatGuiBlock(o,t,n);i.push(s)}}catch(e){r.e(e)}finally{r.f()}}return i},createGuiBlockShown:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=_objectSpread({},e);if(_.isString(t))i[t]=n;else if(_.isArray(t)){var a,r=_createForOfIteratorHelper(t);try{for(r.s();!(a=r.n()).done;){i[a.value]=n}}catch(e){r.e(e)}finally{r.f()}}else _.isPlainObject(t)&&_.assign(i,t);return i}};Ti.Preload("ti/com/ti/gui/ti-gui-methods.mjs",e)}(),Ti.Preload("ti/com/ti/gui/ti-gui.html",'<div class="ti-gui" :class="TopClass">\n  \x3c!--===========================================\n    All normal layout\n  --\x3e\n  <div class="gui-con">\n    \x3c!--\n      Layout as rows\n    --\x3e\n    <ti-gui-rows v-if="isRowsLayout"\n      class="ti-fill-parent"\n      v-bind="TheLayout"\n      :schema="schema"\n      :shown="TheShown"\n      :default-flex="defaultFlex"\n      :action-status="actionStatus"/>\n    \x3c!--\n      Layout as cols\n    --\x3e\n    <ti-gui-cols v-else-if="isColsLayout"\n      class="ti-fill-parent"\n      v-bind="TheLayout"\n      :schema="schema"\n      :shown="TheShown"\n      :default-flex="defaultFlex"\n      :action-status="actionStatus"/>\n    \x3c!--\n      Layout as tabs\n    --\x3e\n    <ti-gui-tabs v-else-if="isTabsLayout"\n      class="ti-fill-parent"\n      v-bind="TheLayout"\n      :schema="schema"\n      :shown="TheShown"\n      :default-flex="defaultFlex"\n      :action-status="actionStatus"/>\n  </div>\n  \x3c!--===========================================\n    All float panels\n  --\x3e\n  <template v-for="pan in ThePanels">\n    <transition :name="pan.transName">\n      <ti-gui-panel\n        v-if="pan.visible"\n          :key="pan.key"\n          v-bind="pan.panel"\n          :viewport-width="myViewportWidth"\n          :viewport-height="myViewportHeight"\n          :schema="schema"\n          :shown="TheShown"\n          :default-flex="defaultFlex"\n          :action-status="actionStatus"/>\n    </transition>\n  </template>\n  \x3c!--===========================================\n    Loading\n  --\x3e\n  <div v-if="isLoading"\n    class="ti-mask-loading">\n    <ti-loading v-bind="TheLoading"/>\n  </div>\n</div>'),function(){var e={provide:function(){return{$gui:this}},data:function(){return{myShown:{},myViewportWidth:0,myViewportHeight:0}},props:{defaultFlex:{type:String,default:void 0,validator:function(e){return _.isUndefined(e)||/^(nil|auto|grow|shrink|both|none)$/.test(e)}},defaultOverflow:{type:String,default:void 0,validator:function(e){return _.isUndefined(e)||/^(auto|none|fill|cover)$/.test(e)}},defaultComClass:{type:String,default:"ti-fill-parent"},layout:{type:Object,default:function(){return{desktop:{},tablet:"desktop",phone:"desktop"}}},schema:{type:Object,default:function(){return{}}},keepShownTo:{type:String,default:void 0},actionStatus:{type:Object,default:function(){return{}}},shown:{type:Object,default:function(){return{}}},canLoading:{type:Boolean,default:!1},loadingAs:{type:[Boolean,Object],default:void 0}},computed:{TopClass:function(){return this.getTopClass({"is-loading":this.isLoading})},TheLayout:function(){if(_.isEmpty(this.layout))return{};if(/^(rows|cols|tabs)$/.test(this.layout.type))return this.layout;var e=this.layout[this.viewportMode];return _.isString(e)&&(e=this.layout[e]),_.isString(e)&&(e=this.layout[e]),e||{}},isRowsLayout:function(){return"rows"==this.TheLayout.type},isColsLayout:function(){return"cols"==this.TheLayout.type},isTabsLayout:function(){return"tabs"==this.TheLayout.type},ThePanels:function(){var e=[];return this.joinThePanels(e,this.layout.panels,"G"),this.layout!=this.TheLayout&&this.joinThePanels(e,this.TheLayout.panels,this.viewportMode),e},TheShown:function(){return this.keepShownTo?this.myShown:this.shown},isLoading:function(){return!(!this.canLoading||!this.loadingAs)},TheLoading:function(){return _.isPlainObject(this.loadingAs)?this.loadingAs:{}}},methods:{isShown:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0,a=t;i<a.length;i++){var r=a[i];if(this.TheShown[r])return!0}return!1},joinThePanels:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(_.isArray(t)&&t.length>0)for(var i=0;i<t.length;i++){var a=t[i],r=Ti.Util.fallback(a.position,"center"),o=e.length;e.push({index:o,visible:this.isShown(a.name),key:a.name||"panel-".concat(n,"-").concat(o),transName:"ti-gui-panel-".concat(r),panel:a})}},updateShown:function(e){this.syncMyShown(e),this.persistMyStatus()},OnBlockShow:function(e){this.keepShownTo?this.updateShown(_defineProperty({},e,!0)):this.$notify("block:show",e)},OnBlockHide:function(e){this.keepShownTo?this.updateShown(_defineProperty({},e,!1)):this.$notify("block:hide",e)},OnBlockShownUpdate:function(e){this.keepShownTo?this.updateShown(e):this.$notify("block:shown",e)},syncMyShown:function(){if(this.keepShownTo){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];this.myShown=(e=_).assign.apply(e,[{},this.myShown].concat(n))}},persistMyStatus:function(){if(this.keepShownTo){var e=_.omitBy(this.myShown,function(e){return!e});Ti.Storage.session.setObject(this.keepShownTo,e)}},loadMyStatus:function(){if(this.keepShownTo){var e=Ti.Storage.session.getObject(this.keepShownTo);this.syncMyShown(this.shown,e)}},syncViewportMeasure:function(){var e=Ti.Rects.createBy(this.$el);this.myViewportWidth=e.width,this.myViewportHeight=e.height}},watch:{shown:function(e){this.syncMyShown(e)}},mounted:function(){var e=this;Ti.Viewport.watch(this,{resize:_.debounce(function(){return e.syncViewportMeasure()},100)}),this.syncViewportMeasure(),this.loadMyStatus()},beforeDestroy:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/gui/ti-gui.mjs",e)}(),Ti.Preload("ti/com/ti/gui/_com.json",{name:"ti-gui",globally:!0,template:"./ti-gui.html",methods:"./ti-gui-methods.mjs",mixins:["./ti-gui.mjs"],components:["@com:ti/gui/cols","@com:ti/gui/rows","@com:ti/gui/tabs","@com:ti/gui/panel"]}),Ti.Preload("ti/com/ti/icon/text/ti-icon-text.html",'<div class="ti-icon-text" \n  :class="className">\n  \x3c!--Icon--\x3e\n  <ti-icon v-if="icon" class="as-icon" :value="icon"/>\n  \x3c!--Text--\x3e\n  <div v-if="text" class="as-text">{{text|i18n}}</div>\n</div>'),function(){var e={inheritAttrs:!1,props:{icon:{type:[String,Object],default:""},text:{type:String,default:null}}};Ti.Preload("ti/com/ti/icon/text/ti-icon-text.mjs",e)}(),Ti.Preload("ti/com/ti/icon/text/_com.json",{name:"ti-icon-text",globally:!0,template:"./ti-icon-text.html",mixins:["./ti-icon-text.mjs"]}),Ti.Preload("ti/com/ti/icon/ti-icon.html",'<div \n  class="ti-icon" \n  :class="TopClass"\n  @click.left="OnClickTop">\n  <div class="icon-icon"\n    :style="Icon.outerStyle">\n    \x3c!--Font icon--\x3e\n    <i v-if="\'font\'==Icon.type"\n      :class="Icon.className"\n      :style="Icon.innerStyle">\n      \x3c!--ligature font --\x3e\n      <template v-if="Icon.text">{{Icon.text}}</template>\n    </i>\n    \x3c!--Svg/Image--\x3e\n    <img v-else-if="\'svg\'==Icon.type || \'image\'==Icon.type"\n        :src="Icon.value"\n        :style="Icon.innerStyle"/>\n    \x3c!--\n      Default output the value\n    --\x3e\n    <em v-else>{{value}}</em>\n  </div>\n</div>'),function(){var e={data:function(){return{myValue:null}},props:{base:{type:String,default:null},value:{type:[String,Object,Number],default:null},dict:{type:[String,Ti.Dict],default:null},defaultValue:{type:[String,Object],default:null},fontSize:{type:[Number,String],default:null},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null},color:{type:String,default:""},opacity:{type:Number,default:-1},notifyName:{type:String,default:void 0},notifyConf:{type:[Object,String,Number,Boolean,Array],default:void 0}},computed:{TopClass:function(){return this.getTopClass({"can-click":!!this.notifyName},"is-".concat(this.Icon.type))},Dict:function(){if(this.dict){if(this.dict instanceof Ti.Dict)return this.dict;var e=Ti.DictFactory.explainDictName(this.dict).name;return Ti.DictFactory.CheckDict(e)}},Icon:function(){var e;if(_.isPlainObject(this.myValue)?e=this.myValue.type&&this.myValue.value?this.myValue:{type:"font",value:Ti.Icons.get(this.myValue)}:(e={type:"font",value:this.myValue},_.isString(this.myValue)&&(e.type=Ti.Util.getSuffixName(this.myValue)||"font"),/^(jpe?g|gif|png)$/i.test(e.type)&&(e.type="image")),"font"==e.type){var t=Ti.Icons.getByName(e.value,e.value);_.assign(e,Ti.Icons.parseFontIcon(t))}else"image"==e.type&&(Ti.Util.isBlank(this.base)||(e.value=Ti.Util.appendPath(this.base,e.value)));return e.outerStyle=Ti.Css.toStyle({width:this.width,height:this.height,color:this.color,opacity:this.opacity>=0?this.opacity:void 0}),"image"==e.type?e.innerStyle={width:this.width?"100%":void 0,height:this.height?"100%":void 0}:"font"==e.type&&(e.innerStyle={"font-size":this.fontSize?Ti.Css.toSize(this.fontSize):void 0}),e}},methods:{OnClickTop:function(){this.notifyName&&this.$notify(this.notifyName,this.notifyConf)},evalMyValue:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Ti.Util.fallbackNil(e.value,e.defaultValue),!e.Dict){t.next=7;break}return t.next=4,e.Dict.getItemIcon(n);case 4:e.myValue=t.sent,t.next=8;break;case 7:e.myValue=n;case 8:case"end":return t.stop()}},t)}))()}},watch:{value:{handler:"evalMyValue",immediate:!0}}};Ti.Preload("ti/com/ti/icon/ti-icon.mjs",e)}(),Ti.Preload("ti/com/ti/icon/_com.json",{name:"ti-icon",globally:!0,template:"./ti-icon.html",mixins:["./ti-icon.mjs"]}),Ti.Preload("ti/com/ti/imgfile/ti-imgfile.html",'<div class="ti-imgfile"\n  :class="TopClass">\n  \x3c!--\n    Hidden input file to choose files\n  --\x3e\n  <input \n    type="file" \n    ref="file" \n    class="ti-hide"\n    @change.stop.seft="OnSelectLocalFilesToUpload">\n  \x3c!--\n    Major preview zone\n  --\x3e\n  <div class="thumb-con"\n    :style="ThumbStyle"\n    @click="OnClickToEdit"\n    v-drop-files.mask="OnDropFiles">\n    \x3c!--\n      Preview\n    --\x3e\n    <ti-obj-thumb \n      :preview="PreviewThumb"\n      :progress="progress"\n      :footer="false"/>\n  </div>\n  \x3c!--\n    Remove\n  --\x3e\n  <div v-if="isShowRemoveIcon"\n    class="thumb-actions">\n    \x3c!--remove--\x3e\n    <div class="thumb-opt as-del"\n      @click="OnRemove">\n      <ti-icon value="zmdi-delete"/>\n      <span class="it-text">{{\'clear\'|i18n}}</span>\n    </div>\n    \x3c!--open--\x3e\n    <div class="thumb-opt as-open"\n      @click="OnOpen">\n      <ti-icon value="zmdi-open-in-new"/>\n      <span class="it-text">{{\'open\'|i18n}}</span>\n    </div>\n    \x3c!--//////--\x3e\n  </div>\n</div>'),function(){var e={props:{src:{type:String,default:null},uploadFile:{type:File,default:null},progress:{type:Number,default:-1},width:{type:[String,Number],default:100},height:{type:[String,Number],default:100},removable:{type:Boolean,default:!0}},computed:{TopClass:function(){return this.getTopClass()},ThumbStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})},isShowRemoveIcon:function(){return!(this.uploadFile||!this.src)},PreviewThumb:function(){return this.uploadFile?{type:"localFile",value:this.uploadFile}:this.src?{type:"image",value:this.src}:{type:"font",value:"zmdi-plus"}}},methods:{OnClickToEdit:function(){this.$refs.file.click()},OnDropFiles:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:(i=_.get(e,0))&&t.$notify("upload",i);case 2:case"end":return n.stop()}},n)}))()},OnSelectLocalFilesToUpload:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.OnDropFiles(e.target.files);case 2:t.$refs.file.value="";case 3:case"end":return n.stop()}},n)}))()},OnRemove:function(){this.$notify("remove")},OnOpen:function(){this.$notify("open")}}};Ti.Preload("ti/com/ti/imgfile/ti-imgfile.mjs",e)}(),Ti.Preload("ti/com/ti/imgfile/_com.json",{name:"ti-imgfile",globally:!0,template:"./ti-imgfile.html",mixins:["./ti-imgfile.mjs"],components:["@com:ti/obj/thumb"]}),Ti.Preload("ti/com/ti/input/color/ti-input-color.html",'<ti-combo-box class="ti-input-color"\n  :class="topClass"\n  :drop-width="null"\n  :status="status"\n  @collapse="doCollapse">\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <span class="as-color"\n      @click.left="onToggleDrop">\n        <u class="as-bg"></u>\n        <u class="as-fr" :style="colorStyle"></u>\n    </span>\n    <span class="as-clear" @click="onClearColor">\n      <ti-icon value="zmdi-close"/>\n    </span>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <ti-color \n      :value="value"\n      @change="onColorChanged"/>\n  </template>\n</ti-combo-box>'),function(){var e={inheritAttrs:!1,data:function(){return{hideBorder:!1,status:"collapse"}},props:{value:{type:[String,Number],default:null}},computed:{topClass:function(){return Ti.Css.mergeClassName({"is-empty":!this.hasValue,"is-valued":this.hasValue,"show-border":!this.hideBorder,"hide-border":this.hideBorder},this.className)},colorStyle:function(){var e=Ti.Types.toColor(this.value,null);if(e)return{background:e.rgba}},isCollapse:function(){return"collapse"==this.status},isExtended:function(){return"extended"==this.status},hasValue:function(){return!Ti.Util.isNil(this.value)}},methods:{onToggleDrop:function(){this.status={collapse:"extended",extended:"collapse"}[this.status]},onClearColor:function(){this.$notify("change",null)},onColorChanged:function(e){var t=Ti.Types.toColor(e);this.$notify("change",t?t.toString():null)},doCollapse:function(){this.status="collapse"}}};Ti.Preload("ti/com/ti/input/color/ti-input-color.mjs",e)}(),Ti.Preload("ti/com/ti/input/color/_com.json",{name:"ti-input-color",globally:!0,template:"./ti-input-color.html",mixins:["./ti-input-color.mjs"],components:["@com:ti/color"]}),Ti.Preload("ti/com/ti/input/date/ti-input-date.html",'<ti-combo-box class="as-date"\n  :class="topClass"\n  :width="width"\n  :drop-width="null"\n  :status="status"\n  @collapse="doCollapse">\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <ti-input \n      :readonly="!canInput"\n      :hide-border="hideBorder"\n      :placeholder="placeholder|i18n"\n      :prefix-icon="icon"\n      :suffix-icon="theStatusIcon"\n      :value="theInputValue"\n      :height="height"\n      :focus="isExtended"\n      @change="onChanged"\n      @input:focus="onInputFocused"\n      @suffix:icon="onClickStatusIcon"/>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <ti-calendar\n      :value="theDropDate"\n      :month-format="monthFormat"\n      :begin-year="beginYear"\n      :end-year="endYear"\n      @change="onDateChanged"/>\n  </template>\n</ti-combo-box>'),function(){var e={data:function(){return{runtime:null,status:"collapse"}},props:{canInput:{type:Boolean,default:!0},value:{type:[String,Number,Date],default:null},icon:{type:String,default:"far-calendar-alt"},format:{type:String,default:"yyyy-MM-dd"},placeholder:{type:[String,Number],default:"i18n:blank-date"},hideBorder:{type:Boolean,default:!1},autoCollapse:{type:Boolean,default:!0},width:{type:[Number,String],default:"2rem"},height:{type:[Number,String],default:void 0},monthFormat:{type:String,default:"yyyy-MM"},beginYear:{type:[Number,String],default:1970},endYear:{type:[Number,String],default:(new Date).getFullYear()+1},statusIcons:{type:Object,default:function(){return{collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"}}}},computed:{topClass:function(){return Ti.Css.mergeClassName(this.className)},isCollapse:function(){return"collapse"==this.status},isExtended:function(){return"extended"==this.status},theDate:function(){return Ti.Types.toDate(this.value,null)},theDropDate:function(){return this.runtime||this.theDate},theInputValue:function(){return this.isExtended?this.getDateText(this.theDropDate):this.getDateText(this.theDropDate,this.format)},theStatusIcon:function(){return this.statusIcons[this.status]}},methods:{applyRuntime:function(){if(this.runtime){var e=this.runtime;this.runtime=null;var t=this.getDateText(e);this.$notify("change",t)}},doExtend:function(){this.status="extended"},doCollapse:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).escaped,t=void 0!==e&&e;this.status="collapse",t?this.runtime=null:this.applyRuntime()},onInputFocused:function(){this.doExtend()},onChanged:function(e){if(_.isEmpty(e))this.$notify("change",null);else{var t=Ti.Types.toDate(e),n=this.getDateText(t);this.$notify("change",n)}},onClickStatusIcon:function(){this.isExtended?this.doCollapse():this.doExtend()},onDateChanged:function(e){this.runtime=e,this.autoCollapse&&this.doCollapse()},getDateText:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd",n=Ti.Types.toDate(e,null);return Ti.Types.formatDate(n,t)}}};Ti.Preload("ti/com/ti/input/date/ti-input-date.mjs",e)}(),Ti.Preload("ti/com/ti/input/date/_com.json",{name:"ti-input-date",globally:!0,template:"./ti-input-date.html",mixins:["./ti-input-date.mjs"],components:["@com:ti/combo/input","@com:ti/calendar"]}),Ti.Preload("ti/com/ti/input/daterange/ti-input-daterange.html",'<ti-combo-box class="as-daterange"\n  :class="topClass"\n  :drop-width="null"\n  :status="status"\n  @collapse="doCollapse">\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <ti-input \n      :readonly="!canInput"\n      :hide-border="hideBorder"\n      :placeholder="placeholder|i18n"\n      :prefix-icon="icon"\n      :suffix-icon="theStatusIcon"\n      :value="theInputValue"\n      :width="width"\n      :height="height"\n      :focus="isExtended"\n      @change="onChanged"\n      @input:focus="onInputFocused"\n      @suffix:icon="onClickStatusIcon"/>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <ti-calendar\n      :value="theDropRange"\n      :range="true"\n      :matrix-count="matrixCount"\n      :month-format="monthFormat"\n      :begin-year="beginYear"\n      :end-year="endYear"\n      @change="onDateRangeChanged"/>\n  </template>\n</ti-combo-box>'),function(){var e={data:function(){return{runtime:null,status:"collapse"}},props:{canInput:{type:Boolean,default:!0},value:{type:[String,Number,Date,Array],default:null},icon:{type:String,default:"fas-calendar-alt"},format:{type:String,default:"yyyy-MM-dd HH:mm:ss"},valueType:{type:String,default:"ms-range",validator:function(e){return/^(ms-(array|range)|ds-(array|range)|date-array)$/.test(e)}},placeholder:{type:String,default:"i18n:blank-date-range"},hideBorder:{type:Boolean,default:!1},width:{type:[Number,String],default:"3rem"},height:{type:[Number,String],default:void 0},matrixCount:{type:Number,default:2},monthFormat:{type:String,default:"yyyy-MM-dd"},beginYear:{type:[Number,String],default:1970},endYear:{type:[Number,String],default:(new Date).getFullYear()+1},statusIcons:{type:Object,default:function(){return{collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"}}}},computed:{topClass:function(){return Ti.Css.mergeClassName(this.className)},isCollapse:function(){return"collapse"==this.status},isExtended:function(){return"extended"==this.status},theValue:function(){if(_.isEmpty(this.value))return null;if(_.isString(this.value)){var e=_.trim(this.value),t=/^[[(](.+)[\])]$/.exec(e);t&&(e=_.trim(t[1]));var n=Ti.S.toArray(e,{sep:","});return n.length>0?Ti.Types.toDate(n):Ti.Types.toDate(e)}return Ti.Types.toDate(this.value)},theDate:function(){return _.isArray(this.theValue)&&!_.isEmpty(this.theValue)?Ti.Types.toDate(this.theValue[0]):this.theValue?Ti.Types.toDate(this.theValue):void 0},theRangeInMs:function(){if(!this.theDate)return[];var e,t=new Date(this.theDate);e=_.isArray(this.theValue)&&this.theValue.length>1?Ti.Types.toDate(this.theValue[1]):new Date(t);var n=[t.getTime(),e.getTime()].sort();return t=Ti.DateTime.setTime(new Date(n[0])),e=Ti.DateTime.setDayLastTime(new Date(n[1])),[t.getTime(),e.getTime()]},theRange:function(){return _.isEmpty(this.theRangeInMs)?[]:[new Date(this.theRangeInMs[0]),new Date(this.theRangeInMs[1])]},theDropRange:function(){return this.runtime||this.theRange},theRangeValue:function(){return this.formatRangeValue(this.theRange,{valueType:"ds-array",format:"yyyy-MM-dd",collapse:!0}).join(", ")},theRangeText:function(){if(!_.isEmpty(this.theRange)){var e=this.theRange[0],t=this.theRange[1],n=e.getFullYear(),i=e.getMonth(),a=e.getDate(),r=t.getFullYear(),o=t.getMonth(),s=t.getDate(),c=Ti.DateTime.getMonthAbbr(i),l=Ti.DateTime.getMonthAbbr(o),u={yy0:n,yy1:r,MM0:++i,MM1:++o,dd0:a,dd1:s,MA0:c,MA1:l,MT0:Ti.I18n.get(c),MT1:Ti.I18n.get(l)};return n!=r?Ti.I18n.getf("cal.d-range-beyond-years",u):i!=o?Ti.I18n.getf("cal.d-range-beyond-months",u):a!=s?Ti.I18n.getf("cal.d-range-beyond-days",u):Ti.I18n.getf("cal.d-range-in-same-day",u)}},theInputValue:function(){return this.isExtended?this.theRangeValue:this.theRangeText},theStatusIcon:function(){return this.statusIcons[this.status]}},methods:{applyRuntime:function(){if(this.runtime){var e=this.runtime;this.runtime=null;var t=this.formatRangeValue(e);this.$notify("change",t)}},doExtend:function(){this.status="extended"},doCollapse:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).escaped,t=void 0!==e&&e;this.status="collapse",t?this.runtime=null:this.applyRuntime()},onInputFocused:function(){this.doExtend()},onChanged:function(e){var t=this.parseDateRange(e);if(_.isEmpty(t))this.$notify("change",null);else{var n=this.formatRangeValue(t);this.$notify("change",n)}},onClickStatusIcon:function(){this.isExtended?this.doCollapse():this.doExtend()},onDateRangeChanged:function(e){this.runtime=e},parseDateRange:function(e){if(_.isEmpty(e))return[];var t=e.split(",");if(_.isEmpty(t))return[];if(1==t.length){var n=Ti.Types.toDate(t[0]);Ti.DateTime.setTime(n);var i=new Date(n.getTime());return Ti.DateTime.setDayLastTime(i),[n,i]}var a=Ti.Types.toDate(t[0]);Ti.DateTime.setTime(a);var r=Ti.Types.toDate(t[1]);return Ti.DateTime.setDayLastTime(r),[a,r].sort(function(e,t){return e.getTime()-t.getTime()})},formatRangeValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.valueType,i=t.format,a=t.collapse,r=void 0!==a&&a,o=_slicedToArray(e||[],2),s=o[0],c=o[1];if(!s)return[];c||(c=new Date(s),Ti.DateTime.setDayLastTime(c)),n=n||this.valueType,i=i||this.format;var l=(0,{"ms-range":function(){return"[".concat(s.getTime(),",").concat(c.getTime(),"]")},"ms-array":function(){return[s.getTime(),c.getTime()]},"ds-range":function(){return"["+[Ti.Types.formatDate(s,i),Ti.Types.formatDate(c,i)].join(",")+"]"},"ds-array":function(){return[Ti.Types.formatDate(s,i),Ti.Types.formatDate(c,i)]},"date-array":function(){return[s,c]}}[n])();return r&&l[0]==l[1]?[l[0]]:l}}};Ti.Preload("ti/com/ti/input/daterange/ti-input-daterange.mjs",e)}(),Ti.Preload("ti/com/ti/input/daterange/_com.json",{name:"ti-input-daterange",globally:!0,template:"./ti-input-daterange.html",mixins:["./ti-input-daterange.mjs"],components:["@com:ti/combo/input","@com:ti/calendar"]}),Ti.Preload("ti/com/ti/input/datetime/ti-input-datetime.html",'<ti-combo-box class="as-datetime"\n  :class="topClass"\n  :width="width"\n  :drop-width="\'box\'"\n  :drop-overflow="\'hidden\'"\n  :status="status"\n  @collapse="doCollapse">\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <ti-input \n      :readonly="!canInput"\n      :hide-border="hideBorder"\n      :placeholder="placeholder|i18n"\n      :prefix-icon="icon"\n      :suffix-icon="theStatusIcon"\n      :value="theInputValue"\n      :height="height"\n      :focus="isExtended"\n      @change="onChanged"\n      @input:focus="onInputFocused"\n      @suffix:icon="onClickStatusIcon"/>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <ti-datetime\n      :value="theDropDate"\n      :month-format="monthFormat"\n      :begin-year="beginYear"\n      :end-year="endYear"\n      @change="onDateChanged"/>\n  </template>\n</ti-combo-box>'),function(){var e={inheritAttrs:!1,data:function(){return{runtime:null,status:"collapse"}},props:{canInput:{type:Boolean,default:!0},value:{type:[String,Number,Date],default:null},icon:{type:String,default:"fas-clock"},format:{type:String,default:"yyyy-MM-dd HH:mm:ss"},placeholder:{type:[String,Number],default:"i18n:blank-datetime"},hideBorder:{type:Boolean,default:!1},autoCollapse:{type:Boolean,default:!1},width:{type:[Number,String],default:"2.4rem"},height:{type:[Number,String],default:void 0},monthFormat:{type:String,default:"yyyy-MM"},beginYear:{type:[Number,String],default:1970},endYear:{type:[Number,String],default:(new Date).getFullYear()+1},statusIcons:{type:Object,default:function(){return{collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"}}}},computed:{topClass:function(){return Ti.Css.mergeClassName(this.className)},isCollapse:function(){return"collapse"==this.status},isExtended:function(){return"extended"==this.status},theDate:function(){return Ti.Types.toDate(this.value,null)},theDropDate:function(){return this.runtime||this.theDate},theInputValue:function(){return this.isExtended?this.getDateText(this.theDropDate):this.getDateText(this.theDropDate,this.format)},theStatusIcon:function(){return this.statusIcons[this.status]}},methods:{applyRuntime:function(){if(this.runtime){var e=this.runtime;this.runtime=null;var t=this.getDateText(e);this.$notify("change",t)}},doExtend:function(){this.status="extended"},doCollapse:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).escaped,t=void 0!==e&&e;this.status="collapse",t?this.runtime=null:this.applyRuntime()},onInputFocused:function(){this.doExtend()},onChanged:function(e){if(_.isEmpty(e))this.$notify("change",null);else{var t=Ti.Types.toDate(e),n=this.getDateText(t);this.$notify("change",n)}},onClickStatusIcon:function(){this.isExtended?this.doCollapse():this.doExtend()},onDateChanged:function(e){this.runtime=e,this.autoCollapse&&this.doCollapse()},getDateText:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd HH:mm:ss",n=Ti.Types.toDate(e,null);return Ti.Types.formatDate(n,t)}}};Ti.Preload("ti/com/ti/input/datetime/ti-input-datetime.mjs",e)}(),Ti.Preload("ti/com/ti/input/datetime/_com.json",{name:"ti-input-datetime",globally:!0,template:"./ti-input-datetime.html",mixins:["./ti-input-datetime.mjs"],components:["@com:ti/combo/input","@com:ti/datetime"]}),function(){var e={options:{type:Array,default:function(){return["im-spotify","im-newsletter","im-award","im-headphones","im-megaphone","im-barcode","im-google-play","im-facebook-messenger","im-wechat","im-line","im-git","im-first-aid","im-ribbon","im-plane","im-idea","im-data","im-data-delete","im-data-validate","im-folder-add","im-radar","im-pizza","im-truck","im-support","im-reset","im-import","im-export","im-color-fan","im-cookie","im-gift-card","im-factory","im-pulse","im-accessibility","im-apartment","im-plugin","im-layer","im-direction","im-dribbble","im-radio","im-bank","im-battery-empty","im-battery","im-battery-full","im-x-mark-circle-o","im-timer","im-hashtag","im-server","im-flask","im-anchor","im-umbrella","im-cc-amex","im-cc-visa","im-cc-mastercard","im-cc-paypal","im-cc-amazon","im-cc-bitcoin","im-car","im-paintbrush","im-cube","im-cubes","im-language","im-calculator","im-user-settings","im-trophy","im-pointer","im-edit","im-warning-circle","im-check-mark-circle-o","im-date-o","im-newspaper-o","im-wrench","im-binoculars","im-gamepad","im-history","im-bell-active","im-coffee","im-leaf","im-gift","im-flip-chart-o","im-clock","im-line-chart-up","im-laptop-o","im-monitor-o","im-cursor","im-keyboard","im-pin","im-store","im-graduation-hat","im-certificate-o","im-sun","im-diamond-o","im-drop","im-paperplane","im-fingerprint","im-lifebuoy","im-power","im-target","im-navigation","im-bug","im-network","im-pie-chart","im-note-o","im-id-card","im-tags","im-floppy-disk","im-dashboard","im-tools","im-users","im-trash-can","im-x-mark-circle","im-x-mark","im-shield","im-mobile","im-inbox","im-crown","im-check-square","im-check-square-o","im-check-mark-circle","im-check-mark","im-redo","im-undo","im-map-o","im-task-o","im-menu-dot-v","im-edit-off","im-facebook","im-sitemap","im-save","im-volume-off","im-volume","im-sign-out","im-sign-in","im-shopping-cart","im-rocket","im-banknote","im-fullscreen","im-minimize","im-maximize","im-light-bulb","im-filter","im-picture-o","im-eye-off","im-eye","im-external-link","im-random","im-loop","im-next","im-previous","im-eject","im-stop","im-pause","im-play","im-credit-card","im-bookmark","im-upload","im-download","im-video-camera","im-photo-camera","im-care-up","im-care-down","im-care-left","im-arrow-up-circle","im-arrow-down-circle","im-arrow-left-circle","im-arrow-right-circle","im-arrow-up","im-arrow-down","im-arrow-left","im-arrow-right","im-angle-up-circle","im-angle-down-circle","im-angle-left-circle","im-angle-right-circle","im-angle-up","im-angle-down","im-angle-left","im-angle-right","im-twitch","im-reddit","im-edge","im-whatsapp","im-amazon","im-snapchat","im-instagram","im-fire","im-sync","im-toggle","im-control-panel","im-archive","im-bell","im-bell-off","im-youtube","im-spinner","im-smiley-o","im-frown-o","im-code","im-android-os","im-linux-os","im-apple-os","im-menu","im-menu-list","im-menu-dot-h","im-windows-os","im-square-o","im-check-square-i","im-radio-button-circle","im-radio-button-circle-o","im-flag","im-opera","im-thumb-up","im-thumb-down","im-safari","im-paper-clip","im-firefox","im-copy","im-chrome","im-quote-left","im-quote-right","im-ie","im-briefcase","im-forbidden","im-vk","im-wizard","im-location","im-paypal","im-coin","im-key","im-lock","im-lock-open","im-share","im-flash","im-cloud","im-database","im-wifi","im-book","im-audio","im-video","im-microphone","im-printer","im-computer","im-phone","im-user-male","im-user-female","im-user-circle","im-clock-o","im-calendar","im-pencil","im-question","im-bar-chart","im-info","im-folder","im-folder-open","im-file","im-file-o","im-files-o","im-warning","im-link","im-unlink","im-tag","im-heart","im-cloud-upload","im-cloud-download","im-speech-bubble","im-speech-bubble-comment","im-speech-bubble-comments","im-mail","im-globe","im-home","im-window-o","im-table","im-windows-o","im-gear","im-twitter","im-magnifier","im-magnifier-plus","im-magnifier-minus","im-minus","im-minus-circle","im-plus","im-plus-circle","im-care-right","im-star","im-star-half","im-star-o","im-circle-o","im-xing","im-vimeo","im-tumblr","im-stumbleupon","im-stackoverflow","im-soundcloud","im-skype","im-pinterest","im-linkedin","im-google-plus","im-github","im-flickr","im-facebook-like","im-blogger","im-behance"]}}};Ti.Preload("ti/com/ti/input/icon/ti-input-icon-props.mjs",e)}(),Ti.Preload("ti/com/ti/input/icon/ti-input-icon.html",'<ti-combo-box class="ti-input-icon"\n  :class="TopClass"\n  :drop-width="dropWidth"\n  :drop-height="dropHeight"\n  :status="status"\n  @collapse="doCollapse">\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <span class="as-value"\n      :style="ValueStyle"\n      @click.left="OnToggleDrop">\n      \x3c!--Show Icon--\x3e\n      <ti-icon \n        v-if="hasValue"\n          :value="value"/>\n      \x3c!--No Icon--\x3e\n      <span \n        v-else\n          class="no-icon"><i class="zmdi zmdi-cake"></i></span>\n    </span>\n    <span class="as-clear" @click="OnClearIcon">\n      <ti-icon value="zmdi-close"/>\n    </span>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <div class="icon-input">\n      <input ref="input"\n        :placeholder="\'i18n:icon-code-tip\'|i18n"\n        @change="OnChangedIcon">\n    </div>\n    <div class="icon-options">\n      <ul>\n        <li v-for="li of OptionIcons"\n          @click.left="OnSelectIcon(li)"\n          @dblclick.left="OnSelectIconAndCollapse(li)"\n          @mouseenter="OnHoverIcon(li)"\n          @mouseleave="OnLeaveIcon(li)">\n          <ti-icon :value="li.value"/>\n        </li>\n      </ul>\n    </div>\n    <div class="icon-tip">\n      <template v-if="TipIcon">\n        <ti-icon :value="TipIcon"/>\n        <span>{{TipIcon}}</span>\n      </template>\n      <template v-else>\n        <span>...</span>\n      </template>\n    </div>\n  </template>\n</ti-combo-box>'),function(){var e={data:function(){return{hideBorder:!1,myHoverIcon:null,status:"collapse"}},props:{value:{type:[String,Object],default:null},iconSize:{type:[Number,String],default:null},dropWidth:{type:[Number,String],default:"4rem"},dropHeight:{type:[Number,String],default:"4rem"}},computed:{TopClass:function(){return Ti.Css.mergeClassName({"show-border":!this.hideBorder,"hide-border":this.hideBorder},this.className)},ValueStyle:function(){return{"font-size":Ti.Css.toSize(this.iconSize)}},isCollapse:function(){return"collapse"==this.status},isExtended:function(){return"extended"==this.status},hasValue:function(){return!Ti.Util.isNil(this.value)},TipIcon:function(){return this.myHoverIcon||this.value},OptionIcons:function(){var e=[];return _.forEach(this.options,function(t,n){var i=/^([a-z]+)-(.+)$/.exec(t);e.push({value:t,index:n,type:i[1],name:i[2]})}),e}},methods:{OnToggleDrop:function(){this.status={collapse:"extended",extended:"collapse"}[this.status]},OnSelectIcon:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;this.$notify("change",e)},OnSelectIconAndCollapse:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;this.$notify("change",e),this.status="collapse"},OnChangedIcon:function(){var e=_.trim(this.$refs.input.value);console.log("haha",e),this.$notify("change",e)},OnHoverIcon:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;this.myHoverIcon=e},OnLeaveIcon:function(){this.myHoverIcon=null},OnClearIcon:function(){this.$notify("change",null)},doCollapse:function(){this.status="collapse"}}};Ti.Preload("ti/com/ti/input/icon/ti-input-icon.mjs",e)}(),Ti.Preload("ti/com/ti/input/icon/_com.json",{name:"ti-input-icon",globally:!0,template:"./ti-input-icon.html",props:"./ti-input-icon-props.mjs",mixins:["./ti-input-icon.mjs"]}),Ti.Preload("ti/com/ti/input/month/ti-input-month.html",'<ti-combo-box class="as-month"\n  :class="topClass"\n  :width="width"\n  :drop-width="dropWidth"\n  :drop-height="dropHeight"\n  :drop-overflow="\'hidden\'"\n  :status="status"\n  @collapse="doCollapse">\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <ti-input \n      :readonly="!canInput"\n      :hide-border="hideBorder"\n      :placeholder="placeholder|i18n"\n      :prefix-icon="icon"\n      :suffix-icon="theStatusIcon"\n      :value="theInputValue"\n      :height="height"\n      :focus="isExtended"\n      @change="onChanged"\n      @input:focus="onInputFocused"\n      @suffix:icon="onClickStatusIcon"/>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <ti-month\n      :value="theDropDate"\n      :height="dropHeight"\n      :begin-year="beginYear"\n      :end-year="endYear"\n      @change="onMonthChanged"/>\n  </template>\n</ti-combo-box>'),function(){var e={data:function(){return{runtime:null,status:"collapse"}},props:{canInput:{type:Boolean,default:!0},value:{type:[String,Number,Date],default:void 0},text:{type:String,default:void 0},icon:{type:String,default:"far-calendar"},format:{type:String,default:"yyyy-MM"},placeholder:{type:[String,Number],default:"i18n:blank-month"},hideBorder:{type:Boolean,default:!1},width:{type:[Number,String],default:"1.6rem"},height:{type:[Number,String],default:void 0},dropWidth:{type:[Number,String],default:"box"},dropHeight:{type:[Number,String],default:200},beginYear:{type:[Number,String],default:1970},endYear:{type:[Number,String],default:(new Date).getFullYear()+1},statusIcons:{type:Object,default:function(){return{collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"}}}},computed:{topClass:function(){return Ti.Css.mergeClassName(this.className)},isCollapse:function(){return"collapse"==this.status},isExtended:function(){return"extended"==this.status},theDate:function(){return Ti.Types.toDate(this.value,null)},theDropDate:function(){return this.runtime||this.theDate},theInputValue:function(){return this.isExtended?this.getDateText(this.theDropDate,this.format):this.text||this.getDateText(this.theDropDate,this.format)},theStatusIcon:function(){return this.statusIcons[this.status]}},methods:{applyRuntime:function(){if(this.runtime){var e=this.runtime;this.runtime=null;var t=this.getDateText(e);this.$notify("change",t)}},doExtend:function(){this.status="extended"},doCollapse:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).escaped,t=void 0!==e&&e;this.status="collapse",t?this.runtime=null:this.applyRuntime()},onInputFocused:function(){this.doExtend()},onChanged:function(e){if(_.isEmpty(e))this.$notify("change",null);else{var t=Ti.Types.toDate(e),n=this.getDateText(t);this.$notify("change",n)}},onClickStatusIcon:function(){this.isExtended?this.doCollapse():this.doExtend()},onMonthChanged:function(e){this.runtime=e},getDateText:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM",n=Ti.Types.toDate(e,null);return Ti.Types.formatDate(n,t)}}};Ti.Preload("ti/com/ti/input/month/ti-input-month.mjs",e)}(),Ti.Preload("ti/com/ti/input/month/_com.json",{name:"ti-input-month",globally:!0,template:"./ti-input-month.html",mixins:["./ti-input-month.mjs"],components:["@com:ti/combo/input","@com:ti/month"]}),Ti.Preload("ti/com/ti/input/num/ti-input-num.html",'<div\n  class="ti-input-num ti-fill-parent"\n  :class="TopClass"\n  :style="TopStyle">\n  \x3c!--\n    Button: -\n  --\x3e\n  <div class="as-btn is-decrease"\n    :class="DesreaseClass"\n    @click="changeByStep(-1)">\n    <ti-icon value="zmdi-minus"/>\n  </div>\n  \x3c!--\n    Input\n  --\x3e\n  <div class="as-input">\n    <input \n      spellcheck="false" \n      :value="TheValue"\n      @change="onChanged">\n  </div>\n  \x3c!--\n    Button: +\n  --\x3e\n  <div class="as-btn is-increase"\n    :class="IncreaseClass"\n    @click="changeByStep(1)">\n    <ti-icon value="zmdi-plus"/>\n  </div>\n</div>'),function(){var e={props:{value:null,defaultValue:{type:Number,default:0},maxValue:{type:Number,default:void 0},minValue:{type:Number,default:void 0},step:{type:Number,default:1},width:{type:[Number,String],default:200}},computed:{TopClass:function(){return this.getTopClass()},TopStyle:function(){return Ti.Css.toStyleRem100({width:this.width})},DesreaseClass:function(){return!_.isUndefined(this.minValue)&&this.value<=this.minValue?"is-disabled":"is-enabled"},IncreaseClass:function(){return!_.isUndefined(this.maxValue)&&this.value>=this.maxValue?"is-disabled":"is-enabled"},TheValue:function(){if(!isNaN(this.value)&&_.isNumber(this.value))return this.getValue(this.value)}},methods:{getValue:function(e){return isNaN(e)||!_.isNumber(e)?this.defaultValue:!_.isUndefined(this.minValue)&&e<this.minValue?this.minValue:!_.isUndefined(this.maxValue)&&e>this.maxValue?this.maxValue:e},changeByStep:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.TheValue;_.isUndefined(t)?t=this.defaultValue:t+=e*this.step,(t=this.getValue(t))!=this.value&&this.$notify("change",t)},onChanged:function(e){var t=e.target;if(_.isElement(t)){var n=_.trim(t.value);if(_.isEmpty(n))this.$notify("change",null);else{var i=n?1*n:this.defaultValue;isNaN(i)||this.$notify("change",i)}}}}};Ti.Preload("ti/com/ti/input/num/ti-input-num.mjs",e)}(),Ti.Preload("ti/com/ti/input/num/_com.json",{name:"ti-input-num",globally:!0,template:"./ti-input-num.html",mixins:["./ti-input-num.mjs"]}),function(){var e={dict:{type:[String,Ti.Dict],default:null},inputValue:null,maxValueLen:{type:Number,default:0},valueUnique:{type:Boolean,default:!0},tagOptions:{type:[Array,Function],default:function(){return[]}},tagMapping:{type:Object,default:void 0},canInput:{type:Boolean,default:!0},cancelTagBubble:{type:Boolean,default:!1},tagItemIconBy:{type:[String,Function],default:void 0},tagItemDefaultIcon:{type:String,default:void 0},tagOptionDefaultIcon:{type:String,default:void 0}};Ti.Preload("ti/com/ti/input/tags/ti-input-tags-props.mjs",e)}(),Ti.Preload("ti/com/ti/input/tags/ti-input-tags.html",'<ti-input\n  class="ti-input-tags"\n  :class-name="className"\n  :value="inputValue"\n  :value-case="valueCase"\n  :trimed="trimed"\n\n  :readonly="!canInput || readonly"\n  :focused="focused"\n  :hover="hover"\n  :auto-select="autoSelect"\n\n  :placeholder="thePlaceholder"\n  :auto-i18n="autoI18n"\n  :hide-border="hideBorder"\n  :prefix-icon="prefixIcon"\n  :prefix-hover-icon="prefixHoverIcon"\n  :prefix-icon-for-clean="prefixIconForClean"\n  :prefix-text="prefixText"\n  :suffix-icon="suffixIcon"\n  :suffix-text="suffixText"\n  \n  :width="width"\n  :height="height"\n\n  :on-init="onInputInit"\n  \n  @inputing="onInputInputing"\n  @change="onInputChanged"\n  @input:focus="$notify(\'input:focus\')"\n  @prefix:icon="$notify(\'prefix:icon\')"\n  @input:blur="$notify(\'input:blur\')"\n  @suffix:icon="$notify(\'suffix:icon\')">\n  \x3c!--\n    Tag List\n  --\x3e\n  <div v-if="hasTags"\n    class="as-tags">\n    <ti-tags\n      :value="theTags"\n      :dict="dict"\n      :removable="true"\n      :item-options="tagOptions"\n      :item-icon-by="tagItemIconBy"\n      :item-default-icon="tagItemDefaultIcon"\n      :option-default-icon="tagOptionDefaultIcon"\n      :mapping="tagMapping"\n      :cancel-item-bubble="cancelTagBubble"\n      @change="$notify(\'change\', $event)"/>\n  </div>\n</ti-input>'),function(){var e={data:function(){return{}},props:{inputChange:{type:Function,default:void 0}},computed:{theTags:function(){return this.evalTagList(this.value)},hasTags:function(){return!_.isEmpty(this.theTags)},thePlaceholder:function(){return this.placeholder?this.placeholder:this.readonly||!this.canInput?"":"i18n:input-tags"}},methods:{onInputInit:function(e){this.$input=e},evalTagList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=_.filter(_.concat(e),function(e){return!Ti.Util.isNil(e)});if(Ti.Util.isNil(t)||n.push(t),this.valueUnique&&(n=_.uniq(n)),this.maxValueLen>0)n=_.slice(n,0,this.maxValueLen);else if(this.maxValueLen<0){var i=Math.max(0,n.length+this.maxValueLen);n=_.slice(n,i)}var a,r=[],o=_createForOfIteratorHelper(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;_.isPlainObject(s)?r.push(_.assign({icon:this.tagIcon,options:this.tagOptions},s)):r.push(s)}}catch(e){o.e(e)}finally{o.f()}return r},getTagValues:function(){var e,t=[],n=_createForOfIteratorHelper(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=_.isPlainObject(i)?i.value:i;Ti.Util.isNil(a)||t.push(a)}}catch(e){n.e(e)}finally{n.f()}return t},onInputInputing:function(e){this.$notify("inputing",e)},onInputChanged:function(e){if(_.isNull(e))this.$notify("change",[]);else if(_.isFunction(this.inputChange))this.inputChange(e);else if(e){var t=this.evalTagList(this.value,e),n=this.getTagValues(t);this.$notify("change",n)}}}};Ti.Preload("ti/com/ti/input/tags/ti-input-tags.mjs",e)}(),Ti.Preload("ti/com/ti/input/tags/_com.json",{name:"ti-input-tags",globally:!0,template:"./ti-input-tags.html",props:["@com:ti/input/ti-input-props.mjs","./ti-input-tags-props.mjs"],mixins:["./ti-input-tags.mjs"],components:["@com:ti/tags"]}),Ti.Preload("ti/com/ti/input/text/ti-input-text.html",'<div class="ti-input-text full-field" \n  :class="topClass" \n  :style="topStyle"\n  v-ti-activable>\n  \x3c!--\n    Prefix\n  --\x3e\n  <div class="as-bar is-prefix">\n    \x3c!--prefix:icon--\x3e\n    <div v-if="prefixIcon"\n      class="as-icon at-prefix"\n      :class="getHoverClass(\'prefixIcon\')"\n      @click.left.stop="onClickPrefixIcon"\n      @mouseenter="pointerHover=\'prefixIcon\'"\n      @mouseleave="pointerHover=null">\n      <ti-icon :value="thePrefixIcon"/>\n    </div>\n    \x3c!--prefix:text--\x3e\n    <div v-if="prefixText" \n      class="as-text at-prefix"\n      :class="getHoverClass(\'prefixText\')"\n      @click.left.stop="onClickPrefixText"\n      @mouseenter="pointerHover=\'prefixText\'"\n      @mouseleave="pointerHover=null">\n      <span>{{prefixText|i18n}}</span>\n    </div>\n  </div>\n  \x3c!--input--\x3e\n  <textarea ref="input"\n    spellcheck="false" \n    :readonly="readonly"\n    :value="theValue"\n    :placeholder="placeholder | i18n"\n    @compositionstart="onInputCompositionStart"\n    @compositionend="onInputCompositionEnd"\n    @input="onInputing"\n    @keydown="onInputKeyDown"\n    @change="onInputChanged"\n    @focus="onInputFocus"\n    @blur="onInputBlur"></textarea>\n  \x3c!--\n    Suffox\n  --\x3e\n  <div class="as-bar is-suffix">\n    \x3c!--suffix:text--\x3e\n    <div v-if="suffixText"\n      class="as-text at-suffix"\n      :class="getHoverClass(\'suffixText\')"\n      @click.left.stop="onClickSuffixIcon"\n      @mouseenter="pointerHover=\'suffixText\'"\n      @mouseleave="pointerHover=null">\n      <span>{{suffixText|i18n}}</span>\n    </div>\n    \x3c!--suffix:icon--\x3e\n    <div v-if="suffixIcon"\n      class="as-icon at-suffix"\n      :class="getHoverClass(\'suffixIcon\')"\n      @click.left.stop="onClickSuffixIcon"\n      @mouseenter="pointerHover=\'suffixIcon\'"\n      @mouseleave="pointerHover=null">\n      <ti-icon :value="suffixIcon"/>\n    </div>\n  </div>\n</div>'),function(){var e,t=(e={data:function(){return{inputCompositionstart:!1,isFocused:!1,pointerHover:null}},watch:{focus:function(e){this.isFocused=e}},props:{value:null,format:{type:[String,Array,Object],default:void 0},readonly:{type:Boolean,default:!1},valueCase:{type:String,default:null,validator:function(e){return Ti.Util.isNil(e)||Ti.S.isValidCase(e)}},placeholder:{type:[String,Number],default:null},trimed:{type:Boolean,default:!0},autoJsValue:{type:Boolean,default:!1},hideBorder:{type:Boolean,default:!1},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null},prefixHoverIcon:{type:String,default:"zmdi-close-circle"},prefixIconForClean:{type:Boolean,default:!0},prefixIcon:{type:String,default:null},prefixText:{type:String,default:null},suffixText:{type:String,default:null},suffixIcon:{type:String,default:null},focus:{type:Boolean,default:!1},hover:{type:[Array,String],default:function(){return["prefixIcon","suffixIcon"]}},autoSelect:{type:Boolean,default:!1}},computed:{topClass:function(){return Ti.Css.mergeClassName(this.className,{"is-self-actived":this.isSelfActived,"is-actived":this.isActived,"is-focused":this.isFocused,"is-blurred":!this.isFocused,"is-readonly":this.readonly,"show-border":!this.hideBorder,"hide-border":this.hideBorder,"has-prefix-icon":this.thePrefixIcon,"has-prefix-text":this.prefixText,"has-suffix-icon":this.suffixIcon,"has-suffix-text":this.suffixText})},topStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})},theValue:function(){return Ti.Types.toStr(this.value,this.format)},thePrefixIcon:function(){return"prefixIcon"==this.pointerHover&&this.isCanHover("prefixIcon")?this.prefixHoverIcon||this.prefixIcon:this.prefixIcon},theHover:function(){var e,t={},n=_createForOfIteratorHelper(_.concat(this.hover));try{for(n.s();!(e=n.n()).done;){var i=e.value;i&&(t[i]=!0)}}catch(e){n.e(e)}finally{n.f()}return t}},methods:{isCanHover:function(e){return!!this.theHover[e]},getHoverClass:function(e){var t=this.isCanHover(e);return{"can-hover":t,"for-look":!t}},onInputCompositionStart:function(){this.inputCompositionstart=!0},onInputCompositionEnd:function(){this.inputCompositionstart=!1,this.doWhenInput()},onInputing:function(e){this.inputCompositionstart||this.doWhenInput()},doWhenInput:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"inputing",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(_.isElement(this.$refs.input)){var n=this.$refs.input.value;t?n=Ti.S.toJsValue(n,{autoNil:!0,autoDate:!1,trimed:this.trimed}):this.trimed&&(n=_.trim(n)),n=Ti.S.toCase(n,this.valueCase),this.$notify(e,n)}},onInputKeyDown:function(e){var t=_.pick(e,"code","key","keyCode","altKey","ctrlKey","metaKey","shiftKey");t.uniqueKey=Ti.Shortcut.getUniqueKey(t),t.$event=e,this.$notify("keypress",t)},onInputChanged:function(){this.doWhenInput("change",this.autoJsValue)},onInputFocus:function(){this.readonly||(this.autoSelect?this.$refs.input.select():this.$refs.input.focus()),this.isFocused=!0,this.$notify("input:focus"),this.isActived||this.setActived()},onInputBlur:function(){this.isFocused=!1,this.$notify("input:blur")},onClickPrefixIcon:function(){this.prefixIconForClean&&this.$notify("change",null),this.$notify("prefix:icon")},onClickPrefixText:function(){this.$notify("prefix:text")},onClickSuffixIcon:function(){this.$notify("suffix:icon")},onClickSuffixText:function(){this.$notify("suffix:text")},doAutoFocus:function(){this.focus&&!this.isFocused&&this.onInputFocus()}}},_defineProperty(e,"watch",{focus:function(){this.doAutoFocus()}}),_defineProperty(e,"mounted",function(){this.doAutoFocus()}),e);Ti.Preload("ti/com/ti/input/text/ti-input-text.mjs",t)}(),Ti.Preload("ti/com/ti/input/text/_com.json",{name:"ti-input-text",globally:!0,template:"./ti-input-text.html",mixins:["./ti-input-text.mjs"],components:[]}),function(){var e={value:void 0,format:void 0,valueCase:{type:String,default:void 0,validator:function(e){return Ti.Util.isNil(e)||Ti.S.isValidCase(e)}},trimed:{type:Boolean,default:!0},autoJsValue:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},focused:{type:Boolean,default:!1},hover:{type:[Array,String],default:function(){return["prefixIcon","suffixIcon"]}},autoSelect:{type:Boolean,default:!1},placeholder:{type:[String,Number],default:void 0},autoI18n:{type:Boolean,default:!1},hideBorder:{type:Boolean,default:!1},prefixIcon:{type:[String,Object],default:void 0},prefixHoverIcon:{type:String,default:"zmdi-close-circle"},prefixIconForClean:{type:Boolean,default:!0},prefixText:{type:String,default:void 0},suffixIcon:{type:[String,Object],default:void 0},suffixText:{type:String,default:void 0},width:{type:[Number,String],default:void 0},height:{type:[Number,String],default:void 0}};Ti.Preload("ti/com/ti/input/ti-input-props.mjs",e)}(),Ti.Preload("ti/com/ti/input/ti-input.html",'<div class="ti-input full-field" \n  :class="TopClass" \n  :style="TopStyle"\n  v-ti-activable>\n  \x3c!--prefix:icon--\x3e\n  <div v-if="prefixIcon"\n    class="as-input-icon at-prefix"\n    :class="getHoverClass(\'prefixIcon\')"\n    @click.left="OnClickPrefixIcon"\n    @mouseenter="pointerHover=\'prefixIcon\'"\n    @mouseleave="pointerHover=null">\n    <ti-icon :value="ThePrefixIcon"/>\n  </div>\n  \x3c!--prefix:text--\x3e\n  <div v-if="prefixText" \n    class="as-input-text at-prefix"\n    :class="getHoverClass(\'prefixText\')"\n    @click.left="OnClickPrefixText"\n    @mouseenter="pointerHover=\'prefixText\'"\n    @mouseleave="pointerHover=null">\n    <span>{{prefixText|i18n}}</span>\n  </div>\n  \x3c!--PreSlot--\x3e\n  <slot></slot>\n  \x3c!--\n    Input Box\n  --\x3e\n  <div class="as-input">\n    <input ref="input"\n      spellcheck="false" \n      :readonly="readonly"\n      :value="TheValue"\n      :placeholder="placeholder|i18n"\n      @compositionstart="OnInputCompositionStart"\n      @compositionend="OnInputCompositionEnd"\n      @input="OnInputing"\n      @change="OnInputChanged"\n      @focus="OnInputFocus"\n      @blur="OnInputBlur">\n    \x3c!--suffix:text--\x3e\n    <div v-if="suffixText"\n      class="as-input-text at-suffix"\n      :class="getHoverClass(\'suffixText\')"\n      @click.left="OnClickSuffixIcon"\n      @mouseenter="pointerHover=\'suffixText\'"\n      @mouseleave="pointerHover=null">\n      <span>{{suffixText|i18n}}</span>\n    </div>\n    \x3c!--suffix:icon--\x3e\n    <div v-if="suffixIcon"\n      class="as-input-icon at-suffix"\n      :class="getHoverClass(\'suffixIcon\')"\n      @click.left="OnClickSuffixIcon"\n      @mouseenter="pointerHover=\'suffixIcon\'"\n      @mouseleave="pointerHover=null">\n      <ti-icon :value="suffixIcon"/>\n    </div>\n  </div>\n</div>'),function(){var e={model:{prop:"value",event:"change"},data:function(){return{inputCompositionstart:!1,isFocused:!1,pointerHover:null}},computed:{TopClass:function(){return this.getTopClass({"is-focused":this.isFocused,"is-blurred":!this.isFocused,"is-readonly":this.readonly,"show-border":!this.hideBorder,"hide-border":this.hideBorder,"has-prefix-icon":this.prefixIcon,"has-prefix-text":this.prefixText,"has-suffix-icon":this.suffixIcon,"has-suffix-text":this.suffixText})},TopStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})},TheValue:function(){var e=Ti.Types.toStr(this.value,this.format);return this.autoI18n?Ti.I18n.text(e):e},ThePrefixIcon:function(){return"prefixIcon"==this.pointerHover&&this.isCanHover("prefixIcon")?this.prefixHoverIcon||this.prefixIcon:this.prefixIcon},TheHover:function(){var e,t={},n=_createForOfIteratorHelper(_.concat(this.hover));try{for(n.s();!(e=n.n()).done;){var i=e.value;i&&(t[i]=!0)}}catch(e){n.e(e)}finally{n.f()}return t}},methods:{isCanHover:function(e){return!!this.TheHover[e]},getHoverClass:function(e){var t=this.isCanHover(e);return{"can-hover":t,"for-look":!t,"is-prefix-icon-hover":"prefixIcon"==e}},OnInputCompositionStart:function(){this.inputCompositionstart=!0},OnInputCompositionEnd:function(){this.inputCompositionstart=!1,this.doWhenInput()},OnInputing:function(e){this.inputCompositionstart||this.doWhenInput()},doWhenInput:function(){var e=this.getInputValue(!1);Ti.Util.isNil(e)||this.$notify("inputing",e)},OnInputChanged:function(){var e=this.getInputValue(this.autoJsValue);this.$notify("change",e)},OnInputFocus:function(){this.readonly||(this.autoSelect?this.$refs.input.select():this.$refs.input.focus()),this.isFocused=!0,this.$notify("input:focus"),this.isActived||this.setActived()},OnInputBlur:function(){this.isFocused=!1,this.$notify("input:blur")},OnClickPrefixIcon:function(){this.prefixIconForClean&&this.$notify("change",null),this.$notify("prefix:icon")},OnClickPrefixText:function(){this.$notify("prefix:text")},OnClickSuffixIcon:function(){this.$notify("suffix:icon")},OnClickSuffixText:function(){this.$notify("suffix:text")},getInputValue:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(_.isElement(this.$refs.input)){var t=this.$refs.input.value;return e?t=Ti.S.toJsValue(t,{autoNil:!0,autoDate:!1,trimed:this.trimed}):this.trimed&&(t=_.trim(t)),t=Ti.S.toCase(t,this.valueCase)}},doAutoFocus:function(){this.focused&&!this.isFocused&&this.OnInputFocus()}},watch:{focused:"doAutoFocus"},mounted:function(){this.doAutoFocus()}};Ti.Preload("ti/com/ti/input/ti-input.mjs",e)}(),Ti.Preload("ti/com/ti/input/time/ti-input-time.html",'<ti-combo-box class="as-time"\n  :class="topClass"\n  :width="width"\n  :drop-width="dropWidth"\n  :drop-height="dropHeight"\n  :drop-overflow="\'hidden\'"\n  :status="status"\n  @collapse="doCollapse">\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <ti-input \n      :readonly="!canInput"\n      :hide-border="hideBorder"\n      :placeholder="placeholder|i18n"\n      :prefix-icon="icon"\n      :suffix-icon="theStatusIcon"\n      :value="theTimeText"\n      :height="height"\n      :focus="isExtended"\n      @change="onChanged"\n      @input:focus="onInputFocused"\n      @suffix:icon="onClickStatusIcon"/>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <ti-time\n      :value="theDropTime"\n      :height="dropHeight"\n      :mode="mode"\n      @change="onTimeChanged"/>\n  </template>\n</ti-combo-box>'),function(){var e={data:function(){return{runtime:null,status:"collapse"}},props:{canInput:{type:Boolean,default:!0},value:{type:[String,Number,Ti.Types.Time],default:null},icon:{type:String,default:"far-clock"},valueUnit:{type:String,default:"s",validator:function(e){return/^(ms|s|min|hr)$/.test(e)}},mode:{type:String,default:"auto",validator:function(e){return/^(sec|min|auto)$/.test(e)}},placeholder:{type:[String,Number],default:"i18n:blank-time"},hideBorder:{type:Boolean,default:!1},width:{type:[Number,String],default:"1.6rem"},height:{type:[Number,String],default:void 0},dropWidth:{type:[Number,String],default:"box"},dropHeight:{type:[Number,String],default:400},statusIcons:{type:Object,default:function(){return{collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"}}}},computed:{topClass:function(){return Ti.Css.mergeClassName(this.className)},isCollapse:function(){return"collapse"==this.status},isExtended:function(){return"extended"==this.status},theTime:function(){return Ti.Types.toTime(this.value,this.valueUnit)},theDropTime:function(){return this.runtime||this.theTime},theTimeFormat:function(){return{sec:"HH:mm:ss",min:"HH:mm",auto:"auto"}[this.mode]},theTimeText:function(){return this.getTimeText(this.theDropTime)},theStatusIcon:function(){return this.statusIcons[this.status]}},methods:{applyRuntime:function(){if(this.runtime){var e=this.runtime;this.runtime=null;var t=this.getTimeText(e);this.$notify("change",t)}},doExtend:function(){this.status="extended"},doCollapse:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).escaped,t=void 0!==e&&e;this.status="collapse",t?this.runtime=null:this.applyRuntime()},onInputFocused:function(){this.doExtend()},onChanged:function(e){if(_.isEmpty(e))this.$notify("change",null);else{var t=Ti.Types.toTime(e),n=this.getTimeText(t);this.$notify("change",n)}},onClickStatusIcon:function(){this.isExtended?this.doCollapse():this.doExtend()},onTimeChanged:function(e){this.runtime=e},getTimeText:function(e){if(e instanceof Ti.Types.Time)return e.toString(this.theTimeFormat)}}};Ti.Preload("ti/com/ti/input/time/ti-input-time.mjs",e)}(),Ti.Preload("ti/com/ti/input/time/_com.json",{name:"ti-input-time",globally:!0,template:"./ti-input-time.html",mixins:["./ti-input-time.mjs"],components:["@com:ti/combo/input","@com:ti/time"]}),Ti.Preload("ti/com/ti/input/timerange/ti-input-timerange.html",'<ti-combo-box class="as-timerange"\n  :class="topClass"\n  :width="width"\n  :drop-width="null"\n  :status="status"\n  @collapse="doCollapse">\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <ti-input \n      :readonly="!canInput"\n      :hide-border="hideBorder"\n      :placeholder="placeholder|i18n"\n      :prefix-icon="icon"\n      :suffix-icon="theStatusIcon"\n      :value="theRangeText"\n      :height="height"\n      :focus="isExtended"\n      @change="onChanged"\n      @input:focus="onInputFocused"\n      @suffix:icon="onClickStatusIcon"/>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <ti-form\n      :data="theDropRange"\n      v-bind="theFormConfig"\n      @change="onFormChanged"/>\n  </template>\n</ti-combo-box>'),function(){var e={data:function(){return{runtime:null,status:"collapse"}},props:{canInput:{type:Boolean,default:!0},value:{type:[String,Object,Number,Array],default:null},rangeKeys:{type:Array,default:function(){return["beginTime","endTime"]}},valueType:{type:String,default:"str-array",validator:function(e){return/^((str|ms|sec)-(array|obj))$/.test(e)}},dftValue:{type:Array,default:function(){return["09:00","17:00"]}},icon:{type:String,default:"zmdi-time-interval"},unit:{type:String,default:"ms"},format:{type:String,default:"HH:mm"},placeholder:{type:String,default:"i18n:blank-time-range"},hideBorder:{type:Boolean,default:!1},width:{type:[Number,String],default:"2rem"},height:{type:[Number,String],default:void 0},statusIcons:{type:Object,default:function(){return{collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"}}}},computed:{topClass:function(){return Ti.Css.mergeClassName(this.className)},isCollapse:function(){return"collapse"==this.status},isExtended:function(){return"extended"==this.status},theFormConfig:function(){var e=_slicedToArray(this.rangeKeys,2);return{fields:[{name:e[0],type:"Time",title:"i18n:time-begin",comType:"ti-input-time"},{name:e[1],type:"Time",title:"i18n:time-end",comType:"ti-input-time"}],spacing:"tiny",statusIcons:null}},theRange:function(){return this.parseTimeRange(this.value)},theRangeText:function(){var e=this,t=_slicedToArray(this.rangeKeys,2),n=(t[0],t[1],[]);return _.forEach(this.theRange,function(t){t?n.push(t.toString(e.format)):n.push(Ti.Types.formatTime(0,e.unit,e.format))}),n.join(" ~ ")},theRangeValue:function(){return this.formatRangeValue(this.theRange)},theDropRange:function(){return this.runtime||this.theRangeValue},theStatusIcon:function(){return this.statusIcons[this.status]}},methods:{applyRuntime:function(){if(this.runtime){console.log("hah");var e=this.parseTimeRange(this.runtime);this.runtime=null;var t=this.formatRangeValue(e),n=this.formatEmitRangeValue(t);this.$notify("change",n)}},doExtend:function(){this.status="extended"},doCollapse:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).escaped,t=void 0!==e&&e;this.status="collapse",t?this.runtime=null:this.applyRuntime()},onInputFocused:function(){this.doExtend()},onChanged:function(e){var t=this.parseTimeRange(e);if(_.isEmpty(t))this.$notify("change",null);else{var n=this.formatRangeValue(t),i=this.formatEmitRangeValue(n);this.$notify("change",i)}},onClickStatusIcon:function(){this.isExtended?this.doCollapse():this.doExtend()},formatEmitRangeValue:function(e){var t=_slicedToArray(this.rangeKeys,2),n=t[0],i=t[1];if(e&&"Array"==this.valueType){var a=[e[n],e[i]];return _.filter(a,function(e){return e&&_.isString(e)})}return e},onFormChanged:function(e){this.runtime=_.cloneDeep(e)},parseTimeRange:function(e){var t=_slicedToArray(this.rangeKeys,2),n=t[0],i=t[1];e=Ti.Util.fallback(e,this.dftValue,{});var a={};if(_.isNumber(e)){a=_defineProperty({},n,Ti.Types.toTime(e))}else if(_.isString(e)){var r,o=_.trim(e),s=_.split(o,/[\t ,\/~-]+/),c=Ti.Types.toTime(s[0]),l=Ti.Types.toTime(s[1]);_defineProperty(r={},n,c),_defineProperty(r,i,l),a=r}else if(_.isArray(e)){var u;_defineProperty(u={},n,Ti.Types.toTime(e[0])),_defineProperty(u,i,Ti.Types.toTime(e[1])),a=u}else _.isPlainObject(e)&&(a=_.pick(e,this.rangeKeys));return this.normalizeRange(a)},normalizeRange:function(e){var t=_slicedToArray(this.rangeKeys,2),n=t[0],i=t[1];if(e&&(e[n]||e[i])){if(!e[n]){var a=Ti.Types.toTime(0);e[n]=a.toString()}if(!e[i]){var r=Ti.Types.toTime(864e5-1);e[i]=r.toString()}var o=Ti.Types.toTime(e[n]),s=Ti.Types.toTime(e[i]);if(o.valueInMilliseconds>s.valueInMilliseconds){e[n];e[n]=s,e[i]=o}}return e},formatRangeValue:function(e){var t=_.assign({},e);return _.forEach(t,function(e,n){t[n]=e?e.toString():Ti.Types.formatTime(0)}),t}}};Ti.Preload("ti/com/ti/input/timerange/ti-input-timerange.mjs",e)}(),Ti.Preload("ti/com/ti/input/timerange/_com.json",{name:"ti-input-timerange",globally:!0,template:"./ti-input-timerange.html",mixins:["./ti-input-timerange.mjs"],components:["@com:ti/combo/input"]}),Ti.Preload("ti/com/ti/input/_com.json",{name:"ti-input",globally:!0,template:"./ti-input.html",props:"./ti-input-props.mjs",mixins:["./ti-input.mjs"],components:[]}),function(){var e={value:null,dict:{type:[String,Ti.Dict],default:void 0},trimed:{type:Boolean,default:!0},format:void 0,href:{type:String,default:void 0},newTab:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},hover:{type:[Array,String],default:function(){return["suffixIcon"]}},placeholder:{type:String,default:"i18n:nil"},autoI18n:{type:Boolean,default:!0},prefixIcon:{type:String,default:void 0},prefixText:{type:String,default:void 0},suffixText:{type:String,default:void 0},suffixIcon:{type:String,default:void 0},width:{type:[Number,String],default:void 0},height:{type:[Number,String],default:void 0},valueMaxWidth:{type:[Number,String],default:void 0}};Ti.Preload("ti/com/ti/label/ti-label-props.mjs",e)}(),Ti.Preload("ti/com/ti/label/ti-label.html",'<div class="ti-label"\n  :class="TopClass"\n  :style="TopStyle"\n  @dblclick.left="OnDblClick"\n  :title="myDisplayText">\n  \x3c!--prefix:icon--\x3e\n  <div v-if="ThePrefixIcon"\n    class="as-icon at-prefix"\n    :class="getHoverClass(\'prefixIcon\')"\n    @click.left="OnClickPrefixIcon">\n    <ti-icon :value="ThePrefixIcon"/>\n  </div>\n  \x3c!--prefix:text--\x3e\n  <div v-if="prefixText" \n    class="as-text at-prefix"\n    :class="getHoverClass(\'prefixText\')"\n    @click.left="OnClickPrefixText">\n    <span>{{prefixText|i18n}}</span>\n  </div>\n  \x3c!--Text--\x3e\n  <div class="as-value"\n    :style="ValueStyle"\n    @click.left="OnClickValue">\n    \x3c!--Link--\x3e\n    <a v-if="href || valueClickable"\n        :href="href"\n        :taget="newTab ? \'_blank\' : undefined"\n        @click.left.prevent>{{myDisplayText}}</a>\n    \x3c!--Normal Text--\x3e\n    <span v-else>{{myDisplayText}}</span>\n  </div>\n  \x3c!--suffix:text--\x3e\n  <div v-if="suffixText"\n    class="as-text at-suffix"\n    :class="getHoverClass(\'suffixText\')"\n    @click.left="OnClickSuffixIcon">\n    <span>{{suffixText|i18n}}</span>\n  </div>\n  \x3c!--suffix:icon--\x3e\n  <div v-if="suffixIcon"\n    class="as-icon at-suffix"\n    :class="getHoverClass(\'suffixIcon\')"\n    @click.left="OnClickSuffixIcon">\n    <ti-icon :value="suffixIcon"/>\n  </div>\n</div>'),function(){var e={data:function(){return{myDisplayIcon:void 0,myDisplayText:void 0,myDictValKey:void 0}},props:{autoLoadDictIcon:{type:Boolean,default:!0},valueClickable:{type:Boolean,default:!1},fullField:{type:Boolean,default:!0}},computed:{TopClass:function(){return this.getTopClass({"is-blank":!_.isNumber(this.TheValue)&&_.isEmpty(this.TheValue),"is-nowrap":this.valueMaxWidth>0,"full-field":this.fullField})},TopStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})},ValueStyle:function(){return Ti.Css.toStyle({maxWidth:this.valueMaxWidth})},ThePrefixIcon:function(){return null===this.prefixIcon?null:this.myDisplayIcon||this.prefixIcon},TheHover:function(){var e,t={},n=_createForOfIteratorHelper(_.concat(this.hover));try{for(n.s();!(e=n.n()).done;){var i=e.value;i&&(t[i]=!0)}}catch(e){n.e(e)}finally{n.f()}return t},TheValue:function(){var e=this.value;return this.trim&&_.isString(e)?_.trim(e):e},Dict:function(){if(this.dict){if(this.dict instanceof Ti.Dict)return this.myDictValKey=".text",this.dict;var e=Ti.DictFactory.explainDictName(this.dict),t=e.name,n=e.vKey;return this.myDictValKey=n||".text",Ti.DictFactory.CheckDict(t)}}},methods:{isCanHover:function(e){return!!this.TheHover[e]},getHoverClass:function(e){var t=this.isCanHover(e);return{"can-hover":t,"for-look":!t,"is-prefix-icon-hover":"prefixIcon"==e}},OnDblClick:function(){var e=this;this.editable&&Ti.Be.EditIt(this.$el,{text:this.TheValue,ok:function(t){e.$notify("change",t)}})},OnClickPrefixIcon:function(){this.$notify("prefix:icon")},OnClickPrefixText:function(){this.$notify("prefix:text")},OnClickValue:function(){this.valueClickable&&this.$notify("click:value")},OnClickSuffixIcon:function(){this.$notify("suffix:icon")},OnClickSuffixText:function(){this.$notify("suffix:text")},evalDisplay:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.Dict){n.next=5;break}return n.next=3,t.Dict.getItem(e);case 3:(i=n.sent)?(t.autoLoadDictIcon&&(t.myDisplayIcon=t.Dict.getIcon(i)),e=t.Dict.getBy(t.myDictValKey,i,e)):t.myDisplayIcon=null;case 5:if(!_.isNumber(e)){n.next=9;break}if(!t.format){n.next=8;break}return n.abrupt("return",Ti.Types.toStr(e,t.format));case 8:return n.abrupt("return",e);case 9:if(!_.isArray(e)&&!_.isPlainObject(e)){n.next=11;break}return n.abrupt("return",JSON.stringify(e,null,"  "));case 11:if(!Ti.Util.isNil(e)){n.next=13;break}return n.abrupt("return",Ti.I18n.text(t.placeholder));case 13:if(!_.isDate(e)){n.next=15;break}return n.abrupt("return",Ti.Types.toStr(e,t.format));case 15:return t.format&&(e=Ti.Types.toStr(e,t.format)),n.abrupt("return",t.autoI18n?Ti.I18n.text(e):e);case 17:case"end":return n.stop()}},n)}))()},reloadMyDisplay:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.myDisplayIcon=null,t.next=3,e.evalDisplay(e.TheValue);case 3:e.myDisplayText=t.sent;case 4:case"end":return t.stop()}},t)}))()}},watch:{value:{handler:"reloadMyDisplay",immediate:!0}}};Ti.Preload("ti/com/ti/label/ti-label.mjs",e)}(),Ti.Preload("ti/com/ti/label/_com.json",{name:"ti-label",globally:!0,template:"./ti-label.html",props:"./ti-label-props.mjs",mixins:["./ti-label.mjs"]}),Ti.Preload("ti/com/ti/label/_hmaker.json",{icon:"im-tag",title:"i18n:com-label",scenes:["desktop","tablet","phone"],editComType:"ti-form",editComConf:{mode:"tab",data:"=comConf",fields:[{title:"i18n:hmk-aspect",fields:[{title:"i18n:hmk-placeholder",name:"placeholder",comType:"ti-input"},{title:"i18n:hmk-autoI18n",name:"autoI18n",type:"Boolean",defaultAs:!0,comType:"ti-toggle"},{title:"i18n:hmk-prefixIcon",name:"prefixIcon",comType:"ti-input-icon"},{title:"i18n:hmk-prefixText",name:"prefixText",comType:"ti-input"},{title:"i18n:hmk-suffixIcon",name:"suffixIcon",comType:"ti-input-icon"},{title:"i18n:hmk-suffixText",name:"suffixText",comType:"ti-input"}]},{title:"i18n:hmk-behavior",fields:[{title:"i18n:hmk-href",name:"href",comType:"ti-input"},{title:"i18n:hmk-newTab",name:"newTab",type:"Boolean",hidden:{href:"NoEmpty"},comType:"ti-toggle"},{title:"i18n:hmk-breakLine",name:"breakLine",type:"Boolean",defaultAs:!0,comType:"ti-toggle"},{title:"i18n:hmk-editable",name:"editable",type:"Boolean",comType:"ti-toggle"}]},{title:"i18n:hmk-data",fields:[{title:"i18n:hmk-value",name:"value",comType:"ti-input"},{title:"i18n:hmk-dict",name:"dict",comType:"ti-input"},{title:"i18n:hmk-trimed",name:"trimed",type:"Boolean",comType:"ti-toggle"},{title:"i18n:hmk-format",name:"format",comType:"ti-input",comConf:{autoJsValue:!0}}]},{title:"i18n:hmk-measure",fields:[{title:"i18n:hmk-width",name:"width",comType:"ti-input"},{title:"i18n:hmk-height",name:"height",comType:"ti-input"},{title:"i18n:hmk-valueMaxWidth",name:"valueMaxWidth",comType:"ti-input"}]}]}}),Ti.Preload("ti/com/ti/lbs/map/baidu/ti-lbs-map-baidu.html",'<div class="ti-lbs-map by-baidu ti-fill-parent">\n  <div ref="arena" class="map-arena ti-fill-parent"></div>\n</div>'),function(){var e={inheritAttrs:!1,data:function(){return{valueMarker:null}},props:{mapType:{type:String,default:"ROADMAP"},center:{type:Object,default:null},zoom:{type:Number,default:8},value:{type:Object,default:null},valueOptions:{type:Object,default:function(){return{icon:null,title:"UserMarker",animation:"DOWN"}}}},computed:{mapCenterLatLng:function(){return _.isEmpty(this.center)?_.isEmpty(this.value)?this.genLatLng({lat:39.9042,lng:116.4074}):this.genLatLng(this.value):this.genLatLng(this.center)},mapTypeId:function(){return{ROADMAP:BMAP_NORMAL_MAP,SATELLITE:BMAP_SATELLITE_MAP,HYBRID:BMAP_HYBRID_MAP}[this.mapType]||BMAP_NORMAL_MAP}},methods:{genLatLng:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.lat,n=e.lng;return new BMap.Point(n,t)},drawValue:function(){var e=this.__map;this.valueOptions;if(this.value){var t=this.genLatLng(this.value),n=new BMap.Marker(t);e.addOverlay(n),this.valueMarker=n}}},watch:{value:function(){this.drawValue()}},mounted:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t=new BMap.Map(this.$refs.arena,{mapType:this.mapTypeId})).centerAndZoom(this.mapCenterLatLng,this.zoom),t.addControl(new BMap.MapTypeControl({mapTypes:[BMAP_NORMAL_MAP,BMAP_SATELLITE_MAP,BMAP_HYBRID_MAP]})),t.enableScrollWheelZoom(!0),this.__map=t,this.drawValue();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()};Ti.Preload("ti/com/ti/lbs/map/baidu/ti-lbs-map-baidu.mjs",e)}(),Ti.Preload("ti/com/ti/lbs/map/baidu/_com.json",{name:"ti-lbs-map-baidu",globally:!0,template:"./ti-lbs-map-baidu.html",mixins:["./ti-lbs-map-baidu.mjs"],components:[]}),Ti.Preload("ti/com/ti/lbs/map/google/ti-lbs-map-google.html",'<div class="ti-lbs-map by-google ti-fill-parent">\n  <div ref="arena" class="map-arena ti-fill-parent"></div>\n  \x3c!--div style="background:#FF0;position: absolute; bottom:0;right:0;"\n    @click="redrawLayers()">Redraw</div--\x3e\n</div>'),function(){var e={data:function(){return{myLastMove:void 0,mySyncTime:void 0,myUpTime:void 0,myCenterMarker:void 0,myLayers:{},myGrid:{x:[],y:[],x_step:void 0,y_step:void 0}}},props:{mapType:{type:String,default:"ROADMAP"},center:{type:[Object,Array],default:void 0},zoom:{type:Number,default:void 0},bounds:{type:Array,default:void 0},layers:{type:Array,default:function(){return[]}},pinCenter:{type:Boolean,default:!1},cooling:{type:Number,default:1e3},maxZoom:{type:Number,default:22},minZoom:{type:Number,default:1},boundPadding:{type:[Object,Number],default:10},stroke:{type:Object,default:function(){return{color:"#08F",opacity:.8,weight:8}}},gestureHandling:{type:String,default:"auto",validator:function(e){return/^(cooperative|greedy|none|auto)$/.test(e)}},clustering:{type:Object,default:void 0}},computed:{MapTypeId:function(){return this.getMapTypeId(this.mapType)},MapCenter:function(){if(_.isArray(this.center)){var e=_slicedToArray(this.center,2),t=e[0],n=e[1];return{lat:(t.lat-n.lat)/2+n.lat,lng:(t.lng-n.lng)/2+n.lng}}return this.center}},methods:{isCoolDown:function(){if(!this.myUpTime)return!0;return Date.now()-this.myUpTime>this.cooling},isInSync:function(){if(!this.mySyncTime)return!1;return Date.now()-this.mySyncTime<this.cooling},getMapTypeId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ROADMAP";return google.maps.MapTypeId[e]||google.maps.MapTypeId.ROADMAP},draw_center_marker:function(e){return e||(e=this.$map.getCenter()),this.myCenterMarker?this.myCenterMarker.setPosition(e):this.myCenterMarker=new google.maps.Marker({position:e,map:this.$map}),e},draw_as_point:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.name,i=t.items,a=void 0===i?[]:i,r=t.iconSize,o=t.iconSizeHoverScale,s=t.clickable;if(!n)throw"draw_as_point without layer name!";var c=!_.isUndefined(this.myGrid.x_step)&&!_.isUndefined(this.myGrid.y_step),l=this.$map.getBounds();if(l){l=l.toJSON();var u=[],d=[],m=function(t){var n,i,a,c=t.label;_.isString(c)&&(c={color:"#FFF",text:c}),t.src&&(i=r||{width:100,height:100},n={url:t.src,scaledSize:i},o&&(a={width:i.width*o,height:i.height*o}));var l=new google.maps.Marker({position:t,title:t.title,label:c,icon:n,clickable:s});u.push(l),s&&(l.addListener("click",function(){e.$notify("point:click",t)}),a&&(l.addListener("mouseover",function(){l.setIcon({url:t.src,scaledSize:a})}),l.addListener("mouseout",function(){l.setIcon({url:t.src,scaledSize:i})})))},h=function(t){_.isArray(t)?t.length>1?function(t){var n,i,a,s,c,l={n:t.length,title0:t[0].title,title1:t[1].title},d=Ti.Util.explainObj(l,e.clustering.title||"->${n} places");e.clustering.label&&(c=Ti.Util.explainObj(l,e.clustering.label)),e.clustering.src&&(a=r||{width:100,height:100},n={url:e.clustering.src,scaledSize:a},o&&(s={width:a.width*o,height:a.height*o},i={url:e.clustering.src,scaledSize:s}));var m=[];_.forEach(t,function(e){var t=e.it;return m.push(t)});var h=Ti.GPS.getCenter(m),p=new google.maps.Marker({position:h,title:d,label:c,icon:n,clickable:!0});p.addListener("click",function(){e.$map.panTo(h),e.$map.setZoom(e.$map.getZoom()+1)}),i&&(p.addListener("mouseover",function(){p.setIcon(i)}),p.addListener("mouseout",function(){p.setIcon(n)})),u.push(p)}(t):t.length>0&&m(t[0].it):m(t)};if(c){var p,f=_createForOfIteratorHelper(a);try{for(f.s();!(p=f.n()).done;){var y=p.value;if(y&&_.isNumber(y.lat)&&_.isNumber(y.lng)){var g={};g.x=Math.round(Ti.GPS.getLngToWest(y.lng,l.west)/this.myGrid.x_step),g.y=Math.round(Ti.GPS.getLatToSouth(y.lat,l.south)/this.myGrid.y_step);var v=d[g.y];_.isArray(v)||(v=[],d[g.y]=v);var b=v[g.x];_.isArray(b)||(b=[],v[g.x]=b),b.push(_objectSpread({},g,{title:y.title,it:y}))}}}catch(e){f.e(e)}finally{f.f()}console.log(this.__dump_matrix(d));var w=this.clusteringMatrix(d);console.log(w),_.forEach(w,h)}else _.forEach(a,m);this.myLayers[n]=u,_.forEach(u,function(t){return t.setMap(e.$map)})}},clusteringMatrix:function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];if(i)for(var a=0;a<i.length;a++){var r=i[a];if(r&&r.length>0){var o=i[a+1];o&&o.length>0&&(i[a+1]=void 0,r.push.apply(r,_toConsumableArray(o)));var s=e[n+1];s&&s.length>0&&((o=s[a])&&o.length>0&&(s[a]=void 0,r.push.apply(r,_toConsumableArray(o))),(o=s[a+1])&&o.length>0&&(s[a+1]=void 0,r.push.apply(r,_toConsumableArray(o)))),t.push(r)}}}return t},__dump_matrix:function(e){for(var t=0;t<e.length;t++){var n=e[t];if("".concat(t,": "),n)for(var i=0;i<n.length;i++){var a=n[i];"[".concat(a?a.length:0,"]")}"\n"}},tidyGridAxisLine:function(e,t){if(e.length>t){var n,i=_createForOfIteratorHelper(e.slice(t));try{for(i.s();!(n=i.n()).done;){n.value.setMap(null)}}catch(e){i.e(e)}finally{i.f()}return e.slice(0,t)}for(var a=e.length;a<t;a++)e.push(new google.maps.Polyline({map:this.$map,geodesic:!1,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:1}));return e},eval_grid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=this.$map.getBounds();if(n){var i=(n=n.toJSON()).east-n.west,a=n.north-n.south;i<0&&(i+=360);var r=i/e,o=a/t,s=e-1,c=t-1;if(this.myGrid.x=this.tidyGridAxisLine(this.myGrid.x,s),this.myGrid.y=this.tidyGridAxisLine(this.myGrid.y,c),this.myGrid.x_step=r,this.myGrid.y_step=o,this.showGrid){for(var l=1;l<e;l++){var u=r*l,d=Ti.GPS.normlizedLng(n.west+u),m=[{lat:n.north,lng:d},{lat:n.south,lng:d}];this.myGrid.x[l-1].setPath(m)}for(var h=1;h<t;h++){var p=o*h,f=Ti.GPS.normlizedLat(n.south+p),y=[{lat:f,lng:n.west},{lat:f,lng:n.east}];this.myGrid.y[h-1].setPath(y)}}}},draw_as_path:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.items,i=void 0===n?[]:n,a=e.iconSize,r=e.clickable;if(!t)throw"draw_as_path without layer name!";if(this.draw_as_point({name:t,items:i,iconSize:a,clickable:r}),_.isArray(i)&&i.length>1){var o=_.first(i);o&&_.isNumber(o.lat)&&_.isNumber(o.lng)&&(this.myLayers["".concat(t,"-path")]=new google.maps.Polyline({map:this.$map,path:i,strokeColor:this.stroke.color,strokeOpacity:this.stroke.opacity,strokeWeight:this.stroke.weight}))}},drawLayers:function(){if(this.clustering){var e=this.clustering,t=e.x,n=e.y;this.eval_grid(t,n)}if(this.pinCenter&&this.draw_center_marker(),!_.isEmpty(this.layers)){var i,a=0,r=_createForOfIteratorHelper(this.layers);try{for(r.s();!(i=r.n()).done;){var o=i.value;a++,o.name||(o.name="Layer-".concat(a)),this["draw_as_".concat(o.type)](o)}}catch(e){r.e(e)}finally{r.f()}}},clearLayer:function(e){e&&(_.isFunction(e.setMap)?e.setMap(null):_.forEach(e,function(e){e.setMap(null)}))},cleanLayers:function(e){var t=this;if(this.myCenterMarker&&(this.myCenterMarker.setMap(null),this.myCenterMarker=void 0),e){var n=this.myLayers[e];this.clearLayer(n),this.myLayers[e]=void 0}else _.forEach(this.myLayers,function(e){t.clearLayer(e)}),this.myLayers={}},redrawLayers:function(){this.cleanLayers(),this.drawLayers()},redrawWhenMoveCoolDown:function(){var e=this,t=Date.now()-this.myLastMove;if(!isNaN(t))return t>500?(this.redrawLayers(),void(this.myLastMove=void 0)):void _.delay(function(){e.redrawWhenMoveCoolDown()},t)}},watch:{mapType:function(e){var t=this.getMapTypeId(e);this.$map.setMapTypeId(t)},layers:function(e,t){_.isEqual(e,t)||this.redrawLayers()},center:function(e,t){if(this.isCoolDown()&&e)if(this.mySyncTime=Date.now(),_.isArray(e)){var n=new google.maps.LatLng(e[0]),i=new google.maps.LatLng(e[1]),a=new google.maps.LatLngBounds(n,i);this.$map.fitBounds(a,this.boundPadding)}else _.isNumber(e.lat)&&_.isNumber(e.lng)&&this.$map.panTo(e)},zoom:function(e){this.isCoolDown()&&_.isNumber(e)&&e>0&&this.$map.setZoom(e)},gestureHandling:function(e){this.$map.setOptions({gestureHandling:e})}},mounted:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.$map=new google.maps.Map(this.$refs.arena,{zoom:this.zoom,center:this.MapCenter,mapTypeId:this.MapTypeId,maxZoom:this.maxZoom,minZoom:this.minZoom,fullscreenControl:!1,mapTypeControl:!1,streetViewControl:!1,zoomControl:!1,gestureHandling:this.gestureHandling,center_changed:function(){var e=t.$map.getCenter();if(t.clustering&&_.isUndefined(t.myLastMove)&&_.delay(function(){t.redrawWhenMoveCoolDown()},500),t.myLastMove=Date.now(),t.pinCenter&&t.draw_center_marker(e),!t.isInSync()){t.myUpTime=Date.now();var n=e.toJSON();n.lng=Ti.GPS.normlizedLng(n.lng),t.$emit("center:change",n)}},zoom_changed:function(){t.clustering&&t.redrawLayers(),t.myUpTime=Date.now(),t.$emit("zoom:change",t.$map.getZoom())}}),_.delay(function(){t.redrawLayers()},1e3);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()};Ti.Preload("ti/com/ti/lbs/map/google/ti-lbs-map-google.mjs",e)}(),Ti.Preload("ti/com/ti/lbs/map/google/_com.json",{name:"ti-lbs-map-google",globally:!0,template:"./ti-lbs-map-google.html",mixins:["./ti-lbs-map-google.mjs"],components:[]}),Ti.Preload("ti/com/ti/lbs/map/tencent/ti-lbs-map-tencent.html",'<div class="ti-lbs-map by-tencent ti-fill-parent">\n  <div ref="arena" class="map-arena ti-fill-parent"></div>\n</div>'),function(){var e={inheritAttrs:!1,data:function(){return{valueMarker:null}},props:{mapType:{type:String,default:"ROADMAP"},center:{type:Object,default:null},zoom:{type:Number,default:8},value:{type:Object,default:null},valueOptions:{type:Object,default:function(){return{icon:null,title:"UserMarker",animation:"DOWN"}}}},computed:{mapCenterLatLng:function(){return _.isEmpty(this.center)?_.isEmpty(this.value)?this.genLatLng({lat:39.9042,lng:116.4074}):this.genLatLng(this.value):this.genLatLng(this.center)},mapTypeId:function(){return qq.maps.MapTypeId[this.mapType]||qq.maps.MapTypeId.ROADMAP}},methods:{genLatLng:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.lat,n=e.lng;return new qq.maps.LatLng(t,n)},drawValue:function(){var e=this.__map,t=this.valueOptions;if(this.value){var n=this.genLatLng(this.value),i=new qq.maps.Marker({position:n,animation:qq.maps.MarkerAnimation[t.animation],map:e,draggable:!0,title:t.title,visible:!0});this.valueMarker=i}}},watch:{value:function(){this.drawValue()}},mounted:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=new qq.maps.Map(this.$refs.arena,{zoom:this.zoom,center:this.mapCenterLatLng,mapTypeId:this.mapTypeId}),this.__map=t,this.drawValue();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()};Ti.Preload("ti/com/ti/lbs/map/tencent/ti-lbs-map-tencent.mjs",e)}(),Ti.Preload("ti/com/ti/lbs/map/tencent/_com.json",{name:"ti-lbs-map-tencent",globally:!0,template:"./ti-lbs-map-tencent.html",mixins:["./ti-lbs-map-tencent.mjs"],components:[]}),Ti.Preload("ti/com/ti/lbs/map/ti-lbs-map.html",'<div class="ti-lbs-map" \n  :class="TopClass"\n  :style="TopStyle">\n  \x3c!--\n    Show Map\n  --\x3e\n  <div \n    v-if="apiLoaded"\n      class="map-con">\n      \x3c!--\n        Map Main\n      --\x3e\n      <div class="as-main">\n        <component \n          :is="MapComType"\n            v-bind="MapComConf"\n            @center:change="OnCenterChange"\n            @zoom:change="OnZoomChange"/>\n      </div>\n      \x3c!--\n        Wait cooling\n      --\x3e\n      <div\n        v-if="CoolingIcon"\n          class="as-wait-cooling"><TiIcon :value="CoolingIcon"/></div>\n      \x3c!--\n        Map Controls\n      --\x3e\n      <div class="as-controls">\n        <TiActionbar v-bind="MapActionBar"/>\n      </div>\n      \x3c!--\n        Map Info\n      --\x3e\n      <div\n        v-if="infoBar && MapCenter"\n          class="as-info">\n          <ul class="as-laln">\n            <li><span>{{\'lat\'|i18n}}:</span><em>{{MapCenter.lat|float(8)}}</em></li>\n            <li><span>{{\'lng\'|i18n}}:</span><em>{{MapCenter.lng|float(8)}}</em></li>\n            <li><span>ZOOM</span><em>{{myZoom || zoom}}</em></li>\n          </ul>\n      </div> \x3c!--as-info--\x3e\n  </div>\n  \x3c!--\n    Show Loading \n  --\x3e\n  <ti-loading\n    v-else\n      class="as-big-mask"/>\n</div>'),function(){var e={inject:{$vars:{default:{}}},data:function(){return{myUpTime:void 0,myWaitCooling:!1,myFullscreen:!1,myMapCenter:void 0,myZoom:void 0,myMapType:void 0,apiLoaded:!1}},props:{by:{type:String,default:"tencent"},secretKey:{type:String,default:"${by}MapKey"},apiUrls:{type:Object,default:function(){return{google:"!js://maps.googleapis.com/maps/api/js?key=${key}"}}},mapType:{type:String,default:"ROADMAP"},autoFloat:{type:Number,default:1e7},width:{type:[String,Number],default:400},height:{type:[String,Number],default:400},zoom:{type:Number,default:8},coordinate:{type:String,default:"WGS84"},value:{type:[Object,Array],default:null},mode:{type:String,default:"auto",validator:function(e){return/^(auto|point|path|area)$/.test(e)}},keepStateBy:{type:String,default:void 0},cooling:{type:Number,default:1200},maxZoom:{type:Number,default:22},minZoom:{type:Number,default:1},infoBar:{type:Boolean,default:!0},iconSize:{type:Object,default:void 0},iconSizeHoverScale:{type:Number,default:1.3},boundPadding:{type:[Object,Number],default:10},pointClickable:{type:Boolean,default:!0},gestureHandling:{type:String,default:"auto",validator:function(e){return/^(cooperative|greedy|none|auto)$/.test(e)}},clustering:{type:Object,default:void 0}},computed:{TopClass:function(){return this.getTopClass({"is-fullscreen":this.myFullscreen,"is-embed":!this.myFullscreen})},TopStyle:function(){if(!this.myFullscreen)return Ti.Css.toStyle({width:this.width,height:this.height})},TheMapSecretKey:function(){var e=Ti.S.renderBy(this.secretKey,this);return _.get(this.$vars,e)},TheMapApiUrl:function(){var e=_.get(this.apiUrls,this.by);return e=Ti.S.renderBy(e,{key:this.TheMapSecretKey})},TheGestureHandling:function(){return this.myFullscreen?"greedy":this.gestureHandling},ToggleIcon:function(){return this.myFullscreen?"zmdi-fullscreen-exit":"zmdi-fullscreen"},MapComType:function(){return"ti-lbs-map-".concat(this.by)},MapComConf:function(){return _objectSpread({secretKey:this.TheMapSecretKey,center:this.MapCenter,mapType:this.myMapType,zoom:this.myZoom,maxZoom:this.maxZoom,minZoom:this.minZoom,boundPadding:this.boundPadding,gestureHandling:this.TheGestureHandling,clustering:this.clustering},this.MapComConfByMode)},MapComConfByMode:function(){var e=this,t={auto:function(e){return _.isArray(e)?t.path(e):t.point(e)},point:function(t){return _.isArray(t)?{layers:[{type:"point",items:_.concat(t),iconSize:e.iconSize,iconSizeHoverScale:e.iconSizeHoverScale,clickable:e.pointClickable}]}:{pinCenter:!0}},path:function(t){return t?{layers:[{type:"path",items:_.concat(t),iconSize:e.iconSize}]}:{}},area:function(t){return t?{layers:[{type:"area",items:_.concat(t),iconSize:e.iconSize}]}:{}}};return t[this.mode](this.LalValue)},TargetCoordinate:function(){return{tencent:"GCJ02",baidu:"BD09",ali:"GCJ02"}[this.by]||"WGS84"},LalValue:function(){if(_.isEmpty(this.value))return{lat:39.908765655793395,lng:116.39748860418158};if(_.isArray(this.value)){var e,t=[],n=_createForOfIteratorHelper(this.value);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=this.genLngLat(i),r=i.src;i.obj,i.preview&&(r=Ti.WWW.evalObjPreviewSrc(i.obj,i.preview)),t.push(_.assign({},i,a,{src:r}))}}catch(e){n.e(e)}finally{n.f()}return t}var o=this.genLngLat(this.value);return _.assign({},this.value,o)},MapCenter:function(){if(this.myMapCenter)return this.myMapCenter;if(this.LalValue)return _.isArray(this.LalValue)?Ti.GPS.getBounds(this.LalValue):_.pick(this.LalValue,"lng","lat")},MapActionBar:function(){var e=this;return{items:[{className:"big-icon",icon:this.myFullscreen?"im-minimize":"im-maximize",action:function(){return e.myFullscreen=!e.myFullscreen}},{icon:"far-map",text:"i18n:map-type",altDisplay:[{icon:"fas-road",text:"i18n:map-roadmap",match:{myMapType:"ROADMAP"}},{icon:"fas-satellite",text:"i18n:map-satellite",match:{myMapType:"SATELLITE"}},{icon:"fas-globe-asia",text:"i18n:map-hybrid",match:{myMapType:"HYBRID"}},{icon:"fas-drafting-compass",text:"i18n:map-terrain",match:{myMapType:"TERRAIN"}}],items:[{icon:"fas-road",text:"i18n:map-roadmap",highlight:{myMapType:"ROADMAP"},action:function(){return e.myMapType="ROADMAP"}},{icon:"fas-globe-asia",text:"i18n:map-hybrid",highlight:{myMapType:"HYBRID"},action:function(){return e.myMapType="HYBRID"}},{icon:"fas-satellite",text:"i18n:map-satellite",highlight:{myMapType:"SATELLITE"},action:function(){return e.myMapType="SATELLITE"}},{icon:"fas-drafting-compass",text:"i18n:map-terrain",highlight:{myMapType:"TERRAIN"},action:function(){return e.myMapType="TERRAIN"}}]},{className:"big-icon",icon:"im-plus",wait:1200,action:function(){return e.zoomMap(1)}},{className:"big-icon",icon:"im-minus",wait:1200,action:function(){return e.zoomMap(-1)}}],status:this}},CoolingIcon:function(){if(this.myUpTime>0)return this.myWaitCooling?"fas-spinner fa-spin":"zmdi-check-circle"}},methods:{OnCenterChange:function(e){this.myMapCenter=e,this.MapComConfByMode.pinCenter&&(this.myUpTime=Date.now(),this.myWaitCooling||this.checkUpdate())},OnZoomChange:function(e){this.myZoom=e,this.saveState({zoom:e})},zoomMap:function(e){var t=this.myZoom+e;_.inRange(t,this.minZoom,this.maxZoom+1)&&(this.myZoom=t,this.saveState({zoom:t}))},isCoolDown:function(){if(!this.myUpTime)return!0;return Date.now()-this.myUpTime>this.cooling},checkUpdate:function(){var e=this;if(this.isCoolDown()){var t=_.pick(this.myMapCenter,"lng","lat");this.$notify("change",t),this.myWaitCooling=!1,_.delay(function(){e.myUpTime=void 0},1e3)}else{this.myWaitCooling=!0;Date.now(),this.myUpTime;_.delay(function(){e.checkUpdate()},this.cooling)}},autoLatLng:function(e){return e>360?e/this.autoFloat:e},genLngLat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.lat,n=e.lng;t=this.autoLatLng(t),n=this.autoLatLng(n);var i=this.coordinate,a=this.TargetCoordinate;if(i==a)return{lat:t,lng:n};var r="".concat(i,"_TO_").concat(a);return(0,Ti.GPS[r])(t,n)},saveState:function(e){if(this.keepStateBy){var t=Ti.Storage.session.getObject(this.keepStateBy);_.assign(t,e),Ti.Storage.session.setObject(this.keepStateBy,t)}}},watch:{value:function(){_.isUndefined(this.myUpTime)&&(this.myMapCenter=void 0)},myFullscreen:function(e,t){_.isEqual(e,t)||this.$notify("change:fullscreen",e)}},created:function(){if(this.myMapType=this.mapType,this.myZoom=this.zoom,this.keepStateBy){var e=Ti.Storage.session.getObject(this.keepStateBy);this.myMapType=e.mapType||this.mapType,this.myZoom=e.zoom||this.zoom}},mounted:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.TheMapApiUrl)){e.next=5;break}return e.next=4,Ti.Load(t);case 4:this.apiLoaded=!0;case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()};Ti.Preload("ti/com/ti/lbs/map/ti-lbs-map.mjs",e)}(),Ti.Preload("ti/com/ti/lbs/map/_com.json",{name:"ti-lbs-map",globally:!0,template:"./ti-lbs-map.html",mixins:["./ti-lbs-map.mjs"],components:["./tencent/_com.json","./baidu/_com.json","./google/_com.json","@com:ti/button"]}),Ti.Preload("ti/com/ti/lbs/route/ti-lbs-route.html",'<div class="ti-lbs-route" \n  :class="TopClass"\n  :style="TopStyle">\n  \x3c!--Map--\x3e\n  <TiLbsMap\n    v-bind="this"\n    :gesture-handling="TheGestureHandling"\n    :value="ValueItems"\n    mode="path"\n    @change:fullscreen="OnFullscreenChange"/>\n  \x3c!--\n    Edit Panel\n  --\x3e\n  <template v-if="editable">\n    \x3c!--\n      Route List\n    --\x3e\n    <transition name="ti-trans-fade">\n      <div\n        v-if="isShowList"\n          class="as-list">\n            <TiList\n              :data="ValueItems"\n              v-bind="ListConf"\n              blank-class="as-big"\n              :current-id="myCurrentId"\n              :checked-ids="myCheckedIds"\n              :puppet-mode="true"\n              @select="OnListSelect"\n              @open="OnListOpen"/>\n      </div>\n    </transition>\n    \x3c!--\n      Actions\n    --\x3e\n    <div class="as-actions">\n      <TiButton\n        :setup="ActionButtons"/>\n    </div>\n  </template>\n</div>'),function(){var e={inject:{$vars:{default:{}}},data:function(){return{myShowList:void 0,myCurrentId:void 0,myCheckedIds:void 0,myFullscreen:!1,apiLoaded:!1}},props:{by:{type:String,default:"tencent"},secretKey:{type:String,default:"${by}MapKey"},apiUrls:{type:Object,default:function(){return{google:"!js://maps.googleapis.com/maps/api/js?key=${key}"}}},mapType:{type:String,default:"ROADMAP"},autoFloat:{type:Number,default:1e7},width:{type:[String,Number],default:400},height:{type:[String,Number],default:400},zoom:{type:Number,default:8},coordinate:{type:String,default:"WGS84"},maxZoom:{type:Number,default:22},minZoom:{type:Number,default:1},infoBar:{type:Boolean,default:!0},editable:{type:Boolean,default:!1},iconSize:{type:Object,default:void 0},value:{type:Array,default:function(){return[]}},keepStateBy:{type:String,default:void 0},showList:{type:Boolean,default:!0},addBy:{type:Object,default:void 0},gestureHandling:{type:String,default:"auto",validator:function(e){return/^(cooperative|greedy|none|auto)$/.test(e)}}},computed:{TopClass:function(){return this.getTopClass({"is-fullscreen":this.myFullscreen})},TopStyle:function(){if(!this.myFullscreen)return Ti.Css.toStyle({width:this.width,height:this.height})},TheMapSecretKey:function(){var e=Ti.S.renderBy(this.secretKey,this);return _.get(this.$vars,e)},TheMapApiUrl:function(){var e=_.get(this.apiUrls,this.by);return e=Ti.S.renderBy(e,{key:this.TheMapSecretKey})},TheGestureHandling:function(){return this.myFullscreen?"greedy":this.gestureHandling},ValueItems:function(){var e=[];return _.forEach(this.value,function(t,n){var i=_.cloneDeep(t);i.label||(i.label=""+(n+1)),i.id||(i.id="R".concat(n)),e.push(i)}),e},hasItems:function(){return!_.isEmpty(this.ValueItems)},ListConf:function(){return{display:["<icon:zmdi-pin>","label:[$${val}]","title"],multi:!0}},ActionButtons:function(){var e=this,t=[{icon:"zmdi-edit",disabled:!this.hasCurrentId,handler:function(){return e.editCurrent()}},{icon:"fas-sort-numeric-down",disabled:!this.hasItems,handler:function(){return e.renumberItems()}},{icon:"zmdi-long-arrow-up",disabled:!this.hasCheckedIds,handler:function(){return e.moveCheckedUp()}},{icon:"zmdi-long-arrow-down",disabled:!this.hasCheckedIds,handler:function(){return e.moveCheckedDown()}},{icon:"zmdi-delete",disabled:!this.hasCheckedIds,handler:function(){return e.removeChecked()}},{icon:"zmdi-format-list-bulleted",handler:function(){e.myShowList=!e.isShowList}}];return this.addBy?_.concat({icon:"zmdi-plus",text:"i18n:lbs-place-add",handler:function(){return e.openNewItemSelector()}},t):t},hasCurrentId:function(){return!Ti.Util.isNil(this.myCurrentId)},hasCheckedIds:function(){return!_.isEmpty(this.myCheckedIds)},isShowList:function(){return Ti.Util.fallback(this.myShowList,this.showList)}},methods:{OnFullscreenChange:function(e){console.log("OnFullscreenChange",e),this.myFullscreen=e},OnListSelect:function(e){var t=e.currentId,n=e.checkedIds;this.myCurrentId=t,this.myCheckedIds=n},OnListOpen:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.index,a=e.item,n.next=3,Ti.App.Open({title:"i18n:edit",position:"right",result:a,comType:"TiForm",comConf:{data:"=result",fields:[{title:"i18n:title",name:"title",comType:"ti-input"},{title:"i18n:label",name:"label",comType:"ti-input"}]}});case 3:if(r=n.sent,!_.isEmpty(r)){n.next=6;break}return n.abrupt("return");case 6:o=_.cloneDeep(t.ValueItems),_.assign(o[i],r),t.$notify("change",o);case 9:case"end":return n.stop()}},n)}))()},renumberItems:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ti.App.Open({title:"i18n:lbs-ro-rnb-title",position:"right",result:{first:1,type:"capital"},model:{prop:"data",event:"change"},comType:"TiForm",comConf:{fields:[{title:"i18n:lbs-ro-rnb-k-first",name:"first",type:"Integer",comType:"ti-input-num"},{title:"i18n:lbs-ro-rnb-k-type",name:"type",comType:"ti-switcher",comConf:{options:[{value:"capital",text:"i18n:lbs-ro-rnb-k-type-capital"},{value:"alpha",text:"i18n:lbs-ro-rnb-k-type-alpha"},{value:"number",text:"i18n:lbs-ro-rnb-k-type-number"}]}}]}});case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return");case 5:i={alpha:"abcdefghijklmnopqrstuvwxyz".split(""),capital:"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("")}[n.type],a=_.cloneDeep(e.ValueItems),_.forEach(a,function(e,t){var a=n.first+t;if(i){var r=Ti.Num.scrollIndex(a-1,i.length);e.label=_.nth(i,r)}else e.label=""+a}),e.$notify("change",a);case 9:case"end":return t.stop()}},t)}))()},editCurrent:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.myCurrentId){t.next=2;break}return t.abrupt("return");case 2:n=0,i=null,a=_createForOfIteratorHelper(e.ValueItems),t.prev=4,a.s();case 6:if((r=a.n()).done){t.next=14;break}if(o=r.value,e.myCurrentId!=o.id){t.next=11;break}return i=o,t.abrupt("break",14);case 11:n++;case 12:t.next=6;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(4),a.e(t.t0);case 19:return t.prev=19,a.f(),t.finish(19);case 22:return t.next=24,e.OnListOpen({index:n,item:i});case 24:case"end":return t.stop()}},t,null,[[4,16,19,22]])}))()},openNewItemSelector:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.addBy){t.next=2;break}return t.abrupt("return");case 2:return n=_.merge({icon:"zmdi-plus-circle-o",title:"add-item",width:"80%",height:"80%",position:"top",result:e.ValueItems,comType:"TiTransfer",comConf:{}},e.addBy),t.next=5,Ti.App.Open(n);case 5:if(i=t.sent,!Ti.Util.isNil(i)){t.next=8;break}return t.abrupt("return");case 8:a=[],r={},_.forEach(a,function(e){return r[e.id]=!0}),_.forEach(i,function(e){r[e.id]||(r[e.id]=!0,Ti.Util.isNil(e.label)&&(e.label=a.length+1+""),a.push(e))}),e.$notify("change",a);case 13:case"end":return t.stop()}},t)}))()},moveCheckedUp:function(){var e=this.genMoveContext();if(_.isEmpty(e.checkeds))return Ti.Toast.Open("i18n:nil-obj","warn");if(e.firstIndex>0){var t,n=e.remains,i=e.firstIndex-1;if((t=Ti.Util).insertToArray.apply(t,[n,i].concat(_toConsumableArray(e.checkeds))),Ti.Util.isNil(_.first(e.checkeds).id)){for(var a={},r=0;r<e.checkeds.length;r++)a["R".concat(r+i)]=!0;this.myCurrentId=null,this.myCheckedIds=a}this.$notify("change",n)}},moveCheckedDown:function(){var e=this.genMoveContext();if(_.isEmpty(e.checkeds))return Ti.Toast.Open("i18n:nil-obj","warn");if(e.lastIndex<e.remains.length){var t,n=e.remains,i=e.lastIndex+1;if((t=Ti.Util).insertToArray.apply(t,[n,i].concat(_toConsumableArray(e.checkeds))),Ti.Util.isNil(_.first(e.checkeds).id)){for(var a={},r=0;r<e.checkeds.length;r++)a["R".concat(r+i)]=!0;this.myCurrentId=null,this.myCheckedIds=a}this.$notify("change",n)}},removeChecked:function(){var e=this.genMoveContext();if(_.isEmpty(e.checkeds))return Ti.Toast.Open("i18n:del-none","warn");this.myCheckedIds={},this.myCurrentId=null,this.$notify("change",e.remains)},genMoveContext:function(){var e=this,t={firstIndex:-1,lastIndex:-1,checkeds:[],remains:[]};return _.forEach(this.ValueItems,function(n,i){var a=_.get(e.myCheckedIds,n.id),r=e.value[i];a?(t.checkeds.push(r),t.firstIndex<0?(t.firstIndex=i,t.lastIndex=i):t.lastIndex=t.remains.length):t.remains.push(r)}),t}},mounted:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.TheMapApiUrl)){e.next=5;break}return e.next=4,Ti.Load(t);case 4:this.apiLoaded=!0;case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()};Ti.Preload("ti/com/ti/lbs/route/ti-lbs-route.mjs",e)}(),Ti.Preload("ti/com/ti/lbs/route/_com.json",{name:"ti-lbs-route",globally:!0,template:"./ti-lbs-route.html",mixins:["./ti-lbs-route.mjs"],components:["@com:ti/lbs/map"]}),Ti.Preload("ti/com/ti/list/com/list-row/list-row.html",'<div class="list-row"\n  :class="TopClass">\n  \x3c!--current actived row indicator--\x3e\n  <div class="row-actived-indicator"></div>\n  \x3c!-- Indents --\x3e\n  <div v-for="n in indent"\n  class="row-indent"></div>\n  \x3c!--ICON: Handler--\x3e\n  <template v-if="icon">\n    <ti-icon\n      v-if="hasRealIcon"\n        class="row-icon"\n        :value="icon"\n        @click.native.left.stop="OnClickIcon"/>\n    <div v-else\n      class="row-icon"></div>\n  </template>\n  \x3c!--ICON: Checker--\x3e\n  <ti-icon v-if="checkable"\n      class="row-checker"\n      :value="theCheckIcon"\n      @click.native.left.stop="OnClickChecker"/>\n  \x3c!-- Content --\x3e\n  <div\n    class="row-con"\n    @click.left="OnClickRow"\n    @dblclick.left="OnDblClickRow"\n    v-ti-activable>\n    <component \n      v-for="(it, index) in myDisplayItems"\n        :class="\'item-\'+index"\n        :key="it.uniqueKey"\n        :is="it.comType"\n        v-bind="it.comConf"\n        @change="onItemChanged(it, $event)"/>\n  </div>\n\n</div>'),function(){var e={inheritAttrs:!1,data:function(){return{myDisplayItems:[]}},props:{indent:{type:Number,default:0},icon:{type:[Boolean,String],default:null},display:{type:Array,default:function(){return[]}}},computed:{TopClass:function(){return this.getListItemClass("row-indent-".concat(this.indent))},hasRealIcon:function(){return this.icon&&_.isString(this.icon)}},methods:{evalMyDisplayItems:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=[],i=_createForOfIteratorHelper(e.display),t.prev=2,i.s();case 4:if((a=i.n()).done){t.next=12;break}return r=a.value,t.next=8,e.evalDataForFieldDisplayItem({itemData:e.data,displayItem:r,vars:{isCurrent:e.isCurrent,isChecked:e.isChecked,isChanged:e.isChanged,isActived:e.isActived,rowId:e.rowId}});case 8:(o=t.sent)&&n.push(o);case 10:t.next=4;break;case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),i.e(t.t0);case 17:return t.prev=17,i.f(),t.finish(17);case 20:e.myDisplayItems=n;case 21:case"end":return t.stop()}},t,null,[[2,14,17,20]])}))()},onItemChanged:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.value;this.$notify("item:changed",{name:t,value:n,rowId:this.rowId,data:this.data})},OnClickIcon:function(e){this.$notify("icon",{rowId:this.rowId,shift:e.shiftKey,toggle:e.ctrlKey||e.metaKey})},__ti_shortcut:function(e){if(!_.isEmpty(this.rowToggleKey)&&this.isRowToggleKey(e))return this.onClickChecker({}),{prevent:!0,stop:!0,quit:!0}}},watch:{display:function(){this.evalMyDisplayItems()},data:function(){this.evalMyDisplayItems()},isCurrent:function(){this.evalMyDisplayItems()},isChecked:function(){this.evalMyDisplayItems()}},mounted:function(){this.evalMyDisplayItems()}};Ti.Preload("ti/com/ti/list/com/list-row/list-row.mjs",e)}(),Ti.Preload("ti/com/ti/list/com/list-row/_com.json",{name:"list-row",globally:!1,template:"./list-row.html",methods:"@com:ti/support/field_display.mjs",mixins:["@com:ti/support/list_item_mixins.mjs","./list-row.mjs"]}),Ti.Preload("ti/com/ti/list/ti-list.html",'<div class="ti-list"\n  :class="TopClass"\n  @click="OnClickTop"\n  v-ti-activable>\n  \x3c!--\n    Blank\n  --\x3e\n  <ti-loading \n    v-if="isDataEmpty"\n      class="nil-data"\n      :class="blankClass"\n      v-bind="blankAs"/>\n  \x3c!--\n    Show Items\n  --\x3e\n  <template v-else>\n    <list-row\n      v-for="row in TheData"\n        :key="row.id"\n        :row-id="row.id"\n        :index="row.index"\n        :icon="row.icon"\n        :indent="row.indent"\n        :data="row.rawData"\n        :display="DisplayItems"\n        :current-id="theCurrentId"\n        :checked-ids="theCheckedIds"\n        :changed-id="changedId"\n        :checkable="checkable"\n        :selectable="selectable"\n        :openable="openable"\n        :row-toggle-key="TheRowToggleKey"\n        :class-name="itemClassName"\n        @checker="OnRowCheckerClick"\n        @select="OnRowSelect"\n        @open="OnRowOpen"/>\n  </template>\n</div>'),function(){var e={data:function(){return{myData:[]}},props:{iconBy:{type:[String,Function],default:null},indentBy:{type:[String,Function],default:null},itemClassName:void 0,display:{type:[Object,String,Array],default:function(){return{key:"..",comType:"ti-label"}}},border:{type:Boolean,default:!0},autoScrollIntoView:{type:Boolean,default:!0}},computed:{TopClass:function(){return this.getTopClass({"is-hoverable":this.hoverable,"show-border":this.border})},getRowIndent:function(){var e=this;return _.isFunction(this.indentBy)?function(t){return e.indentBy(t)}:_.isString(this.indentBy)?function(t){return _.get(t,e.indentBy)}:function(e){return 0}},getRowIcon:function(){var e=this;return _.isFunction(this.iconBy)?function(t){return e.iconBy(t)}:_.isString(this.iconBy)?function(t){return _.get(t,e.iconBy)}:function(e){return null}},DisplayItems:function(){var e,t=[],n=_createForOfIteratorHelper(_.concat(this.display));try{for(n.s();!(e=n.n()).done;){var i=e.value,a=this.evalFieldDisplayItem(i);a&&t.push(a)}}catch(e){n.e(e)}finally{n.f()}return t},TheData:function(){return this.myData}},methods:{OnClickTop:function(e){this.cancelable&&Ti.Dom.hasOneClass(e.target,"ti-list","list-item")&&this.cancelRow()},scrollCurrentIntoView:function(){if(this.autoScrollIntoView&&!Ti.Util.isNil(this.myCurrentId)){var e=_slicedToArray(Ti.Dom.findAll(".list-row.is-current",this.$el),1)[0];if(e){var t=Ti.Rects.createBy(e),n=Ti.Rects.createBy(this.$el);n.contains(t)||(this.$el.scrollTop+=t.top-n.top)}}},__ti_shortcut:function(e){return"ARROWUP"==e?(this.selectPrevRow({payload:{byKeyboardArrow:!0}}),this.scrollCurrentIntoView(),{prevent:!0,stop:!0,quit:!0}):"ARROWDOWN"==e?(this.selectNextRow({payload:{byKeyboardArrow:!0}}),this.scrollCurrentIntoView(),{prevent:!0,stop:!0,quit:!0}):void 0}},watch:{data:{handler:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){var i,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=_.isEqual(t,n)){e.next=6;break}return e.next=4,this.evalData(function(e){e.icon=a.getRowIcon(e.item),e.indent=a.getRowIndent(e.item)});case 4:this.myData=e.sent,this.$nextTick(function(){a.scrollCurrentIntoView()});case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),immediate:!0},myCurrentId:function(){var e=this;this.$nextTick(function(){e.scrollCurrentIntoView()})}}};Ti.Preload("ti/com/ti/list/ti-list.mjs",e)}(),Ti.Preload("ti/com/ti/list/_com.json",{name:"ti-list",globally:!0,template:"./ti-list.html",props:"@com:ti/support/list_props.mjs",methods:"@com:ti/support/field_display.mjs",mixins:["@com:ti/support/list_mixins.mjs","./ti-list.mjs"],components:["./com/list-row","@com:ti/label"]}),Ti.Preload("ti/com/ti/list/_hmaker.json",{icon:"im-data",title:"i18n:com-list",screen:["desktop","tablet"],manual:!0,tutorial:!0,video:!0,editComType:"ti-form",editComConf:{fields:[]}}),Ti.Preload("ti/com/ti/loading/ti-loading.html",'<div class="ti-loading"\n  :class="TopClass">\n  <ti-icon class="as-icon" :value="icon"/>\n  <div class="as-text">{{text|i18n}}</div>\n</div>'),function(){var e={props:{icon:{type:String,default:"fas-spinner fa-spin"},text:{type:String,default:"i18n:loading"}},computed:{TopClass:function(){return this.getTopClass()}}};Ti.Preload("ti/com/ti/loading/ti-loading.mjs",e)}(),Ti.Preload("ti/com/ti/loading/_com.json",{name:"ti-loading",globally:!0,template:"./ti-loading.html",mixins:["./ti-loading.mjs"]}),Ti.Preload("ti/com/ti/logging/ti-logging.html",'<div class="ti-logging"\n  :class="TopClass"\n  :style="TopStyle">\n  <pre ref="pre"><div \n    v-for="(line, index) in lines"\n      :data-index="index"\n      >{{line || \'&nbsp;\'}}</div></pre>    \n</div>'),function(){var e={props:{lines:{type:Array,default:function(){return[]}},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null}},computed:{TopClass:function(){return this.getTopClass()},TopStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})}},methods:{scrollToBottom:function(){var e=this.$refs.pre;e.scrollTop=e.scrollHeight}},watch:{lines:function(){var e=this;this.$nextTick(function(){e.scrollToBottom()})}}};Ti.Preload("ti/com/ti/logging/ti-logging.mjs",e)}(),Ti.Preload("ti/com/ti/logging/_com.json",{name:"ti-logging",globally:!0,template:"./ti-logging.html",mixins:["./ti-logging.mjs"]}),Ti.Preload("ti/com/ti/media/binary/ti-media-binary.html",'<div class="ti-media-binary">\n  <div class="tob-icon">\n    <ti-icon v-if="icon" :value="icon" size="1.28rem"/>\n  </div>\n  <div class="tob-title">\n    {{title}}\n  </div>\n  <div class="tob-actions">\n    <a :href="src">\n      <ti-icon value="download"/>\n      <span>{{\'download\'|i18n}}</span>\n    </a>\n  </div>\n</div>'),function(){var e={inheritAttrs:!1,props:{icon:{type:[String,Object],default:null},title:{type:String,default:null},src:{type:String,default:null},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""}},computed:{},methods:{}};Ti.Preload("ti/com/ti/media/binary/ti-media-binary.mjs",e)}(),Ti.Preload("ti/com/ti/media/binary/_com.json",{name:"ti-media-binary",globally:!0,template:"./ti-media-binary.html",mixins:["./ti-media-binary.mjs"]}),Ti.Preload("ti/com/ti/media/image/ti-media-image.html",'<div class="ti-media-image" \n     :class="topClass"\n     :style="topStyle"\n     :fit-mode="fitMode"\n     v-drag-off>\n  <div class="as-con" ref="con">\n    <img ref="the_image"\n      :src="src"\n      :style="theImageStyle"\n      @load="onImageLoaded"\n      @dblclick.stop="onToggleImageFitMode">\n  </div>\n</div>'),function(){var e={data:function(){return{naturalWidth:-1,naturalHeight:-1,viewportWidth:-1,viewportHeight:-1,fitMode:"contain",imgLoading:!0,inViewport:!1}},props:{src:{type:String,default:null},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""}},computed:{topClass:function(){return Ti.Css.mergeClassName({"as-fitmode-cover":"cover"==this.fitMode,"as-fitmode-contain":"contain"==this.fitMode,"is-img-loading":this.imgLoading,"is-in-viewport":this.inViewport},this.className)},topStyle:function(){return{width:this.width,height:this.height}},theImageStyle:function(){var e={visibility:"hidden",position:"relative"};if(this.naturalWidth>0&&this.naturalHeight>0){var t=Ti.Rects.create({top:0,left:0,width:this.viewportWidth,height:this.viewportHeight}),n=Ti.Rects.create({top:2,left:2,width:this.naturalWidth,height:this.naturalHeight}).zoomTo({width:t.width,height:t.height,mode:this.fitMode});this.inViewport=t.contains(n,2),e.width=n.width,e.height=n.height,e.left=(t.width-n.width)/2,e.top=(t.height-n.height)/2,e.visibility="visible"}return Ti.Css.toStyle(e)}},methods:{onImageLoaded:function(){var e=this.$refs.the_image;e&&(this.naturalWidth=e.naturalWidth,this.naturalHeight=e.naturalHeight,this.imgLoading=!1)},onResizeViewport:function(){var e=Ti.Rects.createBy(this.$refs.con);this.viewportWidth=e.width,this.viewportHeight=e.height},onToggleImageFitMode:function(){this.fitMode={contain:"cover",cover:"contain"}[this.fitMode]}},mounted:function(){var e=this;Ti.Viewport.watch(this,{resize:function(){e.onResizeViewport()}}),this.onResizeViewport()},beforeDestroy:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/media/image/ti-media-image.mjs",e)}(),Ti.Preload("ti/com/ti/media/image/_com.json",{name:"ti-media-image",globally:!0,template:"./ti-media-image.html",mixins:["./ti-media-image.mjs"]}),Ti.Preload("ti/com/ti/media/video/ti-media-video.html",'<div class="ti-media-video"\n    :class="topClass"\n    :style="topStyle"\n    v-drag-off>\n    <video ref="the_video"\n      :src="src"\n      controls\n      @loadeddata="onVideoLoaded"/>\n    <div class="tov-loading" v-if="loading">\n      <ti-loading/>\n    </div>\n</div>'),function(){var e=function(e){this.doResizeVideo()},t={inheritAttrs:!1,data:function(){return{naturalWidth:-1,naturalHeight:-1,fitMode:"none",loading:!0}},props:{src:{type:String,default:null},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""}},computed:{topClass:function(){return{"as-none":"none"==this.fitMode,"as-contain":"contain"==this.fitMode,"as-loading":this.loading}},topStyle:function(){return{width:this.width,height:this.height}}},methods:{onVideoLoaded:function(){var e=this.$refs.the_video;this.naturalWidth=e.videoWidth,this.naturalHeight=e.videoHeight,this.loading=!1,this.doResizeVideo()},isContainsByViewport:function(){var e=Ti.Rects.createBy(this.$el),t=Ti.Rects.create(_objectSpread({},e.raw("tl"),{width:this.naturalWidth,height:this.naturalHeight}));return e.contains(t)},doResizeVideo:function(){this.isContainsByViewport()?this.fitMode="none":this.fitMode="contain"}},mounted:function(){Ti.Viewport.watch(this,{resize:e})},beforeDestroy:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/media/video/ti-media-video.mjs",t)}(),Ti.Preload("ti/com/ti/media/video/_com.json",{name:"ti-media-video",globally:!0,template:"./ti-media-video.html",mixins:["./ti-media-video.mjs"]}),Ti.Preload("ti/com/ti/month/ti-month.html",'<div class="ti-col-data as-month" \n  :class="topClass" \n  :style="topStyle">\n  <ti-list v-for="list in theListGroup"\n    :key="list.key"\n    :data="list.data"\n    :display="\'text\'"\n    :current-id="list.currentId"\n    :cancelable="false"\n    @select="onListSelected(list.key, $event)"/>\n</div>'),function(){var e={inheritAttrs:!1,props:{value:{type:[String,Number,Date],default:null},height:{type:[Number,String],default:200},beginYear:{type:[Number,String],default:1970},endYear:{type:[Number,String],default:(new Date).getFullYear()+1}},computed:{topClass:function(){return this.getTopClass()},topStyle:function(){return{height:Ti.Css.toSize(this.height)}},theDate:function(){return Ti.Types.toDate(this.value,null)},theListGroup:function(){return[this.createList("year",1*this.beginYear,1*this.endYear,this.theDate?this.theDate.getFullYear():null,{reverse:!0}),this.createList("month",0,12,this.theDate?this.theDate.getMonth():null,{getText:function(e){var t=Ti.DateTime.getMonthAbbr(e);return Ti.I18n.get(t)}})]}},methods:{createList:function(e,t,n,i){for(var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=a.reverse,o=void 0!==r&&r,s=a.getText,c=void 0===s?function(e){return e}:s,l={key:e,currentId:"R-".concat(i),data:[]},u=t;u<n;u++)l.data.push({id:"R-".concat(u),value:u,text:c(u)});return o&&l.data.reverse(),l},onListSelected:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).current,n=_.get(t,"value")||0,i=this.theDate||new Date,a={month:function(e){return new Date(i.getFullYear(),e)},year:function(e){return new Date(e,i.getMonth())}}[e](n);this.$notify("change",a)}}};Ti.Preload("ti/com/ti/month/ti-month.mjs",e)}(),Ti.Preload("ti/com/ti/month/_com.json",{name:"ti-month",globally:!0,template:"./ti-month.html",mixins:["./ti-month.mjs"],components:["@com:ti/list"]}),Ti.Preload("ti/com/ti/obj/pair/ti-obj-pair.html",'<div class="ti-obj-pair" \n    :class="TopClass">\n  \x3c!--\n    Empty\n  --\x3e\n  <ti-loading\n    v-if="isEmpty"\n      v-bind="blankAs"/>\n  \x3c!--\n    Show Pair\n  --\x3e\n  <template v-else>\n    <table>\n      <thead v-if="showHead">\n        <tr>\n          <th class="as-name" >{{nameText  | i18n}}</th>\n          <th class="as-value">{{valueText | i18n}}</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr\n          v-for="pa in myPairList">\n          <td class="as-name" >{{pa.title}}</td>\n          <td class="as-value">{{pa.text || pa.value}}</td>\n        </tr>\n      </tbody>\n    </table>\n  </template>\n</div>'),function(){var e={data:function(){return{myPairList:[]}},props:{value:{type:[String,Object],default:void 0},nameText:{type:String,default:"i18n:name"},valueText:{type:String,default:"i18n:value"},fields:{type:Array,default:function(){return[]}},onlyFields:{type:Boolean,default:!1},blankAs:{type:Object,default:function(){return{icon:"im-plug",default:void 0}}},showHead:{type:Boolean,default:!0},autoI18n:{type:Boolean,default:!0}},computed:{TopClass:function(){return this.getTopClass()},FieldsMap:function(){var e,t={},n=_createForOfIteratorHelper(this.fields);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.name&&(t[i.name]=i)}}catch(e){n.e(e)}finally{n.f()}return t},TheData:function(){return this.value?_.isString(this.value)?JSON.parse(this.value):_.isPlainObject(this.value)?this.value:{}:{}},isEmpty:function(){return _.isEmpty(this.TheData)}},methods:{evalThePairList:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o,s,c,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n={},e.joinPairs(n,[],e.TheData),i=[],a=_createForOfIteratorHelper(e.fields),t.prev=4,a.s();case 6:if((r=a.n()).done){t.next=21;break}if(o=r.value,!(s=n[o.name])){t.next=19;break}if(c=o.title||o.name,e.autoI18n&&(c=Ti.I18n.text(c)),s.title=c,!o.dict){t.next=18;break}return l=Ti.DictFactory.CheckDict(o.dict),t.next=17,l.getItemText(s.value);case 17:s.text=t.sent;case 18:i.push(s);case 19:t.next=6;break;case 21:t.next=26;break;case 23:t.prev=23,t.t0=t.catch(4),a.e(t.t0);case 26:return t.prev=26,a.f(),t.finish(26);case 29:e.onlyFields||(u=[],_.forEach(n,function(t){t.name&&!e.FieldsMap[t.name]&&(t.title=t.name,u.push(t))}),i.push.apply(i,u)),e.myPairList=i;case 31:case"end":return t.stop()}},t,null,[[4,23,26,29]])}))()},joinPairs:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;if(_.isPlainObject(i))_.forEach(i,function(i,a){e.joinPairs(t,_.concat(n,a),i)});else if(_.isArray(i))for(var a=0;a<i.length;a++){var r=i[a];this.joinPairs(t,_.concat(n,a+""),r)}else{var o=n.join("."),s=Ti.Types.toStr(i);t[o]={name:o,value:s}}}},watch:{value:"evalThePairList"},mounted:function(){this.evalThePairList()}};Ti.Preload("ti/com/ti/obj/pair/ti-obj-pair.mjs",e)}(),Ti.Preload("ti/com/ti/obj/pair/_com.json",{name:"ti-obj-pair",globally:!0,template:"./ti-obj-pair.html",mixins:["./ti-obj-pair.mjs"]}),Ti.Preload("ti/com/ti/obj/thumb/ti-obj-thumb.html",'<div class="ti-obj-thumb" \n    :class="TopClass">\n  \x3c!--\n    Preview && Process Bar\n  --\x3e\n  <header>\n    \x3c!--Preview Part--\x3e\n    <div class="as-preview">\n      \x3c!-- Local Image --\x3e\n      <template v-if="isLocalImage">\n        <img ref="localImage" is-local-file>\n      </template>\n      \x3c!-- Local File --\x3e\n      <template v-else-if="isLocalFile">\n        <ti-icon :value="LocalFileIcon"/>\n      </template>\n      \x3c!-- Remote Image --\x3e\n      <template v-else-if="\'image\'==preview.type">\n        <img :src="preview.value">\n      </template>\n      \x3c!-- Icon --\x3e\n      <template v-else>\n        <ti-icon :value="preview"/>\n      </template>\n      \x3c!--Badge--\x3e\n      <template v-if="badges">\n        <div v-if="badges.NW" class="as-badge at-nw"><ti-icon :value="badges.NW"/></div>\n        <div v-if="badges.NE" class="as-badge at-ne"><ti-icon :value="badges.NE"/></div>\n        <div v-if="badges.SW" class="as-badge at-sw"><ti-icon :value="badges.SW"/></div>\n        <div v-if="badges.SE" class="as-badge at-se"><ti-icon :value="badges.SE"/></div>\n      </template>\n    </div>\n    \x3c!--Process bar--\x3e\n    <div v-if="isShowProgress"\n      class="as-progress ti-progress-bar">\n      <span class="bar-tip">{{ProgressTip}}</span>\n      <b class="bar-outer">\n        <em class="bar-inner" \n            :style="ProgressStyle"></em>\n      </b>\n    </div>\n  </header>\n  \x3c!--\n    Status Mask\n  --\x3e\n  <section class="as-status" v-if="status">\n    <ti-icon \n      :value="status"\n      font-size="2em"\n      width="3em"\n      height="3em"/>\n  </section>\n  \x3c!--\n    Footer for item title text\n  --\x3e\n  <footer v-if="showFooter">\n    <div class="as-title">\n      <a v-if="hasHref"\n        :href="TheHref"\n        @click.left.prevent="OnClickTitle">{{TheTitle}}</a>\n      <span v-else>{{TheTitle}}</span>\n    </div>\n  </footer>\n  \x3c!--\n    Remove Icon\n  --\x3e\n  <div \n    v-if="removeIcon"\n      class="as-remove"\n      @click.left.stop="OnRemove">\n      <ti-icon :value="removeIcon"/>\n  </div>\n</div>'),function(){var e={props:{index:{type:Number,default:-1},id:{type:String,default:void 0},title:{type:String,default:void 0},preview:{type:[String,Object],default:"broken_image"},href:{type:String,default:void 0},status:{type:[String,Object],default:void 0},progress:{type:Number,default:-1},visibility:{type:String,default:"show"},showFooter:{type:Boolean,default:!0},badges:{type:Object,default:function(){return{NW:null,NE:null,SW:null,SE:null}}},removeIcon:{type:[String,Object],default:void 0},onTitle:{type:[String,Function,Boolean],default:void 0}},watch:{preview:function(){this.renderLocalFile()}},computed:{TopClass:function(){var e=this;return this.getTopClass({"is-hide":"hide"==this.visibility,"is-weak":"weak"==this.visibility},function(){return e.status?"is-status-".concat(e.status):null})},PreviewType:function(){return _.get(this.preview,"type")||"auto"},isLocalFile:function(){return"localFile"==this.PreviewType},isLocalImage:function(){return this.isLocalFile&&/^image\//.test(this.LocalFile.type)},LocalFile:function(){if(this.isLocalFile)return this.preview.value},LocalFileIcon:function(){if(this.isLocalFile){var e=this.LocalFile,t={type:Ti.Util.getSuffixName(e.name),mime:e.type,race:Ti.Util.isNil(e.type)?"DIR":"FILE"};return Ti.Icons.get(t)}},isShowProgress:function(){return this.progress>=0},ProgressTip:function(){return Ti.S.toPercent(this.progress,{fixed:1,auto:!1})},ProgressStyle:function(){return{width:this.ProgressTip}},hasHref:function(){return!!this.href},TheHref:function(){return encodeURI(this.href)},TheTitle:function(){return Ti.I18n.text(this.title)}},methods:{OnRemove:function(){var e=this.genEventContext();this.$notify("remove",e)},OnClickTitle:function(e){var t=this.genEventContext();!1===this.onTitle?e.stopPropagation():_.isString(this.onTitle)?this.$notify(this.onTitle,t):_.isFunction(this.onTitle)&&(e.stopPropagation(),this.onTitle(t))},genEventContext:function(){return{index:this.index,id:this.id,title:this.title}},renderLocalFile:function(){var e=this;if(this.isLocalImage){var t=new FileReader;t.onload=function(t){e.$refs.localImage&&(e.$refs.localImage.src=t.target.result)},t.readAsDataURL(this.preview.value)}}},mounted:function(){this.renderLocalFile()}};Ti.Preload("ti/com/ti/obj/thumb/ti-obj-thumb.mjs",e)}(),Ti.Preload("ti/com/ti/obj/thumb/_com.json",{name:"ti-obj-thumb",globally:!0,template:"./ti-obj-thumb.html",mixins:["./ti-obj-thumb.mjs"]}),Ti.Preload("ti/com/ti/obj/tile/ti-obj-tile.html",'<div class="ti-obj-tile" \n    :class="topClass">\n  \x3c!--\n    Preview Image\n  --\x3e\n  <div class="as-preview">\n    <a v-if="hasHref"\n      :href="href"\n      @click="onClick"\n      ><ti-icon \n        :value="preview"\n        :height="previewHeight"/></a>\n    <ti-icon v-else\n      :value="preview"\n      :height="previewHeight"/>\n  </div>\n  \x3c!--\n    Title\n  --\x3e\n  <div class="as-title">\n    <a v-if="hasHref"\n      :href="href"\n      @click="onClick"\n    >{{title}}</a>\n    \x3c!--\n      Without Href\n    --\x3e\n    <span v-else>{{title}}</span>\n  </div>\n  \x3c!--\n    Footer\n  --\x3e\n  <div v-if="hasBrief"\n    class="as-brief">\n    <span>{{brief}}</span>\n  </div>\n</div>'),function(){var e={inheritAttrs:!1,props:{index:{type:Number,default:-1},id:{type:String,default:null},preview:{type:[Object,String],default:function(){return{type:"font",value:"broken_image"}}},previewHeight:{type:[String,Number],default:null},hover:{type:String,default:null,validator:function(e){return!e||/^(up|down|left|right|zoom)$/.test(e)}},title:{type:String,default:null},href:{type:String,default:null},brief:{type:String,default:null},emitBy:{type:Object,default:function(){return{evantName:null,payload:{}}}}},computed:{topClass:function(){var e=[this.className];return this.hover&&(e.push("on-hover"),e.push("on-hover-".concat(this.hover))),e},hasHref:function(){return!!this.href},hasBrief:function(){return!!this.brief}},methods:{onClick:function(e){if(this.emitBy.eventName){e.preventDefault();var t=this.emitBy.eventName,n=this.emitBy.payload||{};console.log("onClick",t,n),this.$notify(t,n)}}}};Ti.Preload("ti/com/ti/obj/tile/ti-obj-tile.mjs",e)}(),Ti.Preload("ti/com/ti/obj/tile/_com.json",{name:"ti-obj-tile",globally:!0,template:"./ti-obj-tile.html",mixins:["./ti-obj-tile.mjs"]}),Ti.Preload("ti/com/ti/paging/button/ti-paging-button.html",'<div class="ti-paging-button"\n  :class="TopClass">\n  <div class="as-pg-btn is-prev" @click.left="JumpTo(PN-1)">\n    <i class="im im-angle-left"></i>\n    <span>{{\'i18n:prev\'|i18n}}</span>\n  </div>\n  <template \n    v-for="btn of BtnList">\n      <div\n        v-if="btn.ellipsis"\n          class="as-ellipsis">\n          <span>...</span></div>\n      <div\n        v-else\n          class="as-pg-btn"\n          :class="btn.className"\n          @click.left="JumpTo(btn.value)">\n          <span>{{btn.value}}</span></div>\n  </template>\n  <div class="as-pg-btn is-next" @click.left="JumpTo(PN+1)">\n    <span>{{\'i18n:next\'|i18n}}</span>\n    <i class="im im-angle-right"></i>\n  </div>\n</div>'),function(){var e={props:{value:{type:Object,default:function(){return{pn:0,pgsz:0,pgc:0,sum:0,count:0}}},maxNumber:{type:Number,default:10}},computed:{TopClass:function(){return this.getTopClass({"is-first":1==this.PN,"is-last":this.PN==this.LastPN})},PN:function(){return _.get(this.value,"pn")},LastPN:function(){return _.get(this.value,"pgc")},isFirstPage:function(){return 1==this.PN},isLastPage:function(){return this.LastPN==this.PN},BtnList:function(){var e=this.maxNumber-2,t=[];if(this.LastPN-2<e)for(var n=1;n<=this.LastPN;n++)t.push(this.genBtn(n));else{var i=e/2,a=Math.round(this.PN-i),r=Math.round(this.PN+i);a<=1?(r+=1-a,a=2):r>=this.LastPN?(a-=r-this.LastPN,r=this.LastPN-1):r--,t.push(this.genBtn(1)),a>2&&t.push(this.genBtn(".."));for(var o=a;o<=r;o++)t.push(this.genBtn(o));r<this.LastPN-2&&t.push(this.genBtn("..")),t.push(this.genBtn(this.LastPN))}return t}},methods:{genBtn:function(e){return".."==e?{ellipsis:!0}:{value:e,className:{"is-current":this.PN==e}}},JumpTo:function(e){e!=this.PN&&e>=1&&e<=this.LastPN&&this.$notify("change",{skip:this.value.pgsz*(e-1),limit:this.value.pgsz,pn:e,pgsz:this.value.pgsz})}}};Ti.Preload("ti/com/ti/paging/button/ti-paging-button.mjs",e)}(),Ti.Preload("ti/com/ti/paging/button/_com.json",{name:"ti-paging-button",globally:!0,template:"./ti-paging-button.html",mixins:["./ti-paging-button.mjs"]}),Ti.Preload("ti/com/ti/paging/jumper/ti-paging-jumper.html",'<div class="ti-paging-jumper"\n  :class="TopClass">\n  <div \n    class="pj-btn"\n    :class="getBtnClass(1)"\n    @click="OnJumpTo(1)">\n      <ti-icon value="zmdi-skip-previous"/>\n      <span class="it-text">{{\'paging-first\'|i18n}}</span></div>\n  <div \n    class="pj-btn"\n    :class="getBtnClass(value.pn-1)"\n    @click="OnJumpTo(value.pn-1)">\n      <ti-icon value="zmdi-chevron-left"/>\n      <span class="it-text">{{\'paging-prev\'|i18n}}</span></div>\n  <div \n    class="pj-current"\n    :class="PageNumberClass"\n    @click="OnClickCurrent">\n    <b>{{value.pn}}</b>\n  </div>\n  <div \n    class="pj-btn"\n    :class="getBtnClass(value.pn+1)"\n    @click="OnJumpTo(value.pn+1)">\n      <span class="it-text">{{\'paging-next\'|i18n}}</span>\n      <ti-icon value="zmdi-chevron-right"/></div>\n  <div \n    class="pj-btn"\n    :class="getBtnClass(value.pgc)"\n    @click="OnJumpTo(value.pgc)">\n      <span class="it-text">{{\'paging-last\'|i18n}}</span>\n      <ti-icon value="zmdi-skip-next"/></div>\n  <div\n    v-if="hasValue"\n      class="pj-sum"\n      :class="SumClass"\n      @click="OnClickSum">{{\'paging-sum\'|i18n(value)}}</div>\n</div>'),function(){var e={props:{value:{type:Object,default:function(){return{pn:0,pgsz:0,pgc:0,sum:0,count:0}}}},computed:{TopClass:function(){return this.getTopClass()},hasValue:function(){return!_.isEmpty(this.value)&&this.value.pn>0},PageNumberClass:function(){return this.hasValue&&this.value.pgc>1?"is-enabled":"is-disabled"},SumClass:function(){return this.hasValue&&this.value.pgsz>0?"is-enabled":"is-disabled"}},methods:{isInvalidPageNumber:function(e){return e<=0||e>this.value.pgc||e==this.value.pn},getBtnClass:function(e){return!this.hasValue||this.isInvalidPageNumber(e)?"is-disabled":"is-enabled"},OnJumpTo:function(e){this.isInvalidPageNumber(e)||this.$notify("change",{skip:this.value.pgsz*(e-1),limit:this.value.pgsz,pn:e,pgsz:this.value.pgsz})},OnClickCurrent:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.value.pgc<=1)){t.next=2;break}return t.abrupt("return");case 2:return n=Ti.I18n.getf("paging-change-pn",e.value),t.next=5,Ti.Prompt(n,{value:e.value.pn});case 5:if((i=t.sent)&&i!=e.value.pn){t.next=8;break}return t.abrupt("return");case 8:if(a=parseInt(i),!(isNaN(a)||a<=0||a>e.value.pgc)){t.next=14;break}return n=Ti.I18n.getf("paging-change-pn-invalid",e.value),t.next=13,Ti.Alert(n,{title:"i18n:warn",type:"warn",icon:"im-warning",width:420});case 13:return t.abrupt("return");case 14:e.$notify("change",{skip:e.value.pgsz*(a-1),limit:e.value.pgsz,pn:a,pgsz:e.value.pgsz});case 15:case"end":return t.stop()}},t)}))()},OnClickSum:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Ti.I18n.getf("paging-change-pgsz",e.value),t.next=3,Ti.Prompt(n,{value:e.value.pgsz});case 3:if((i=t.sent)&&i!=e.value.pgsz){t.next=6;break}return t.abrupt("return");case 6:if(a=parseInt(i),!(isNaN(a)||a<=0)){t.next=11;break}return t.next=10,Ti.Alert("i18n:paging-change-pgsz-invalid",{title:"i18n:warn",type:"warn",icon:"im-warning",width:420});case 10:return t.abrupt("return");case 11:e.$notify("change:pgsz",a),e.$notify("change",{pn:1,pgsz:a});case 13:case"end":return t.stop()}},t)}))()}}};Ti.Preload("ti/com/ti/paging/jumper/ti-paging-jumper.mjs",e)}(),Ti.Preload("ti/com/ti/paging/jumper/_com.json",{name:"ti-paging-jumper",globally:!0,template:"./ti-paging-jumper.html",mixins:["./ti-paging-jumper.mjs"]}),Ti.Preload("ti/com/ti/roadblock/ti-roadblock.html",'<div class="ti-roadblock"\n  :class="TopClass">\n  <div class="as-main">\n    <div v-if="icon" class="as-icon">\n      <ti-icon :value="icon"/>\n    </div>\n    <div v-if="text" class="as-text">\n      <span>{{text | i18n}}</span>\n    </div>\n  </div>\n</div>'),function(){var e={props:{icon:{type:String,default:"fas-exclamation-triangle"},text:{type:String,default:null}},computed:{TopClass:function(){return this.getTopClass()}}};Ti.Preload("ti/com/ti/roadblock/ti-roadblock.mjs",e)}(),Ti.Preload("ti/com/ti/roadblock/_com.json",{name:"ti-roadblock",globally:!0,template:"./ti-roadblock.html",mixins:["./ti-roadblock.mjs"],components:[]}),Ti.Preload("ti/com/ti/session/badge/ti-session-badge.html",'<div class="ti-session-badge"\n  :class="TopClass">\n  \x3c!--\n    Has Session, show account info\n  --\x3e\n  <template v-if="hasSession">\n    \x3c!--Avatar--\x3e\n    <div v-if="hasAvatar"\n      class="as-avatar">\n      <img :src="myAvatar"/>\n    </div>\n    \x3c!--User Icon--\x3e\n    <div v-else\n      class="as-icon">\n      <ti-icon :value="myIcon"/>\n    </div>\n    \x3c!--User Name--\x3e\n    <div class="as-name">\n      \x3c!--Name Event--\x3e\n      <a\n        v-if="nameEvent"\n          @click.left="$notify(nameEvent)">{{myName}}</a>\n      \x3c!--Name display--\x3e\n      <span\n        v-else>{{myName}}</span>\n    </div>\n    \x3c!--Links--\x3e\n    <div v-for="li in theLinks"\n      class="as-link">\n      \x3c!--Icon--\x3e\n      <ti-icon\n        v-if="li.icon"\n          class="it-icon"\n          :value="li.icon"/>\n      \x3c!--Text--\x3e\n      <a\n        @click.left="OnClickLink(li, $event)"\n        :href="li.href"\n        :target="li.newtab?\'_blank\':null">{{li.title|i18n}}</a>\n    </div>\n  </template>\n  \x3c!--\n    Without session, show login link\n  --\x3e\n  <template v-else>\n    <div v-if="loginIcon"\n      class="as-icon">\n      <ti-icon :value="loginIcon"/>\n    </div>\n    <div class="as-link">\n      <a @click="$notify(loginEvent)">{{\'login\'|i18n}}</a>\n    </div>\n  </template>\n</div>'),function(){var e={props:{me:{type:Object,default:null},avatarKey:{type:String,default:null},avatarSrc:{type:String,default:null},loginIcon:{type:String,default:"zmdi-account-circle"},nameKeys:{type:[String,Array],default:"name"},nameEvent:{type:String,default:"go:dashboard"},loginEvent:{type:String,default:"do:login"},logoutEvent:{type:String,default:"do:logout"},links:{type:Array,default:function(){return[]}},autoSignLink:{type:Boolean,default:!0}},computed:{TopClass:function(){return this.getTopClass()},theLinks:function(){var e=_.cloneDeep(this.links)||[];return this.autoSignLink&&(this.hasSession?e.push({title:"i18n:logout",emit:this.logoutEvent}):e.push({title:"i18n:login",emit:this.loginEvent})),e},myName:function(){if(this.me)return Ti.Util.getOrPick(this.me,this.nameKeys)||Ti.I18n.get("mine")},myIcon:function(){return this.me?2==this.me.sex?"im-user-female":"im-user-male":"far-user"},myAvatar:function(){if(this.avatarSrc)return Ti.S.renderBy(this.avatarSrc,this.me)},hasAvatar:function(){return this.avatarSrc&&this.avatarKey&&this.me&&this.me[this.avatarKey]},hasSession:function(){return!!this.me}},methods:{OnClickLink:function(e,t){e.emit&&(t.preventDefault(),this.$notify(e.emit))}}};Ti.Preload("ti/com/ti/session/badge/ti-session-badge.mjs",e)}(),Ti.Preload("ti/com/ti/session/badge/_com.json",{name:"ti-session-badge",globally:!0,template:"./ti-session-badge.html",mixins:["./ti-session-badge.mjs"]}),Ti.Preload("ti/com/ti/sheet/emoji/ti-sheet-emoji.html",'<div  class="ti-sheet-emoji" \n  :class="TopClass"\n  :style="TopStyle">\n  \x3c!--\n    Candidate List\n  --\x3e\n  <div class="as-list">\n    <div\n      v-for="li in TheDataSheet"\n        class="emoji-item"\n        @click.left="myValue=li.value">\n        <span>{{li.value}}</span>\n    </div>\n  </div>\n</div>'),function(){var e={data:function(){return{myValue:null}},props:{value:{type:[String,Object,Number],default:null},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},data:{type:[String,Array],default:function(){return["            ","            ","            ","            ","            ","            ","            ","            ","         "]}}},computed:{TopClass:function(){return this.getTopClass()},TopStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})},hasValue:function(){return!!this.TheValue},TheValue:function(){return this.myValue||this.value},TheDataSheet:function(){for(var e=[],t=_.flattenDeep(this.data).join("").replace(/[ ]/g,""),n=0;n<t.length;n+=2){var i=t.substring(n,n+2);e.push({value:i})}return e}},methods:{OnClickTop:function(){this.notifyName&&this.$notify(this.notifyName,this.notifyConf)}},watch:{myValue:function(){this.$notify("change",this.myValue)}}};Ti.Preload("ti/com/ti/sheet/emoji/ti-sheet-emoji.mjs",e)}(),Ti.Preload("ti/com/ti/sheet/emoji/_com.json",{name:"ti-sheet-emoji",globally:!0,template:"./ti-sheet-emoji.html",mixins:["./ti-sheet-emoji.mjs"]}),function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.varName,n=e.vars,i=e.matched;if(i.startsWith("$$"))return i.substring(1);var a=/^(=)?([^?]+)(\?(.*))?$/.exec(t),r="="==a[1]?n.vars:n.itemData,o=_.trim(a[2]),s=Ti.Util.fallbackNil(_.trim(a[4]),i),c=Ti.Util.getOrPick(r,o);return Ti.Util.fallback(c,s)}function t(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_.isString(n)){var a=/^=>(.+)$/.exec(n);if(a){return Ti.Util.genInvoking(a[1],{context:_objectSpread({},i,{item:i.itemData}),partial:"left"})()}if(a=/^\$\{=([^${}=]+)\}$/.exec(n)){var r=_.trim(a[1]);return".."==r?i.itemData:"value"==r?i.value:Ti.Util.fallback(_.get(i.vars,r),n)}if(a=/^(\((.+)\)\?)?(.+)$/.exec(n)){var o=_.trim(a[2]),s=_.trim(a[3]);return o?_.get(i.itemData,o)?Ti.S.renderBy(s,i,{iteratee:e}):null:Ti.S.renderBy(s,i,{iteratee:e})}return n}if(_.isPlainObject(n)){var c={};return _.forEach(n,function(e,n){var a=t(e,i);"..."==n?_.assign(c,a):c[n]=a}),c}if(_.isArray(n)){var l,u=[],d=_createForOfIteratorHelper(n);try{for(d.s();!(l=d.n()).done;){var m=t(l.value,i);u.push(m)}}catch(e){d.e(e)}finally{d.f()}return u}return n}var n={evalFieldDisplayItem:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).defaultKey,i=function(){if(Ti.Util.isNil(t))return n?{key:n,comType:"ti-label"}:null;if(_.isPlainObject(t)){var i=_.assign({key:n,comType:"ti-label"},t);if(i.transformer){var a={context:e,partial:"right"};i.transformer=Ti.Util.genInvoking(i.transformer,a)}return i}if(_.isArray(t))return{key:t,comType:"ti-label"};if(!0===t)return{key:n,comType:"ti-label"};if(_.isString(t)){var r=/^<([^:>=]*)(:([^>]+))?>$/.exec(t);if(r)return{key:r[1]||n||":ti-icon",defaultAs:r[3]||void 0,comType:"ti-icon"};if(r=/^(!)?[@#]([^\(]+)\(([^)]+)\)(:([^:]*)(:([^:]+))?)?$/.exec(t))return{key:r[3]||n,comType:"ti-label",comConf:{dict:r[2],format:r[5]||void 0,className:r[7]||"is-nowrap",autoLoadDictIcon:"!"!=r[1]}};if(r=/^<=([^:]+)(:(.+))?>$/.exec(t))return{key:r[3]||n||Symbol(t),comType:r[1]};if(r=/^([^+-:>]+)(:([^+-:]*)(:([^:]+))?)?(([+-])>([^%]*))?$/.exec(t)){var o=_.trim(r[1]||r[0]),s=r[3]||void 0,c="+"==r[7],l=_.trim(r[8]);return{key:o,comType:"ti-label",comConf:{className:r[5]||"is-nowrap",newTab:c,href:l,format:s}}}return{key:t,comType:"ti-label"}}return t}();if(i.dict){var a=Ti.DictFactory.explainDictName(i.dict),r=a.name,o=a.vKey;i.$dict=Ti.DictFactory.CheckDict(r),i.$dictValueKey=o||".text"}return i},evalDataForFieldDisplayItem:function(){var e=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g,v,b,w;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.length>0&&void 0!==e[0]?e[0]:{},a=i.itemData,r=void 0===a?{}:a,o=i.displayItem,s=void 0===o?{}:o,c=i.vars,l=void 0===c?{}:c,u=i.autoIgnoreNil,d=void 0===u||u,m=i.autoIgnoreBlank,h=void 0===m||m,p=i.autoValue,f=void 0===p?"value":p,y=i.uniqueKey,g=s,v=g.defaultAs,_.isArray(g.key)?v=_.pick(r,g.key):_.isString(g.key)&&(v=".."==g.key?r:/^'[^']+'$/.test(g.key)?g.key.substring(1,g.key.length-1):/^->(.+)$/.test(g.key)?Ti.S.renderBy(g.key.substring(2),r):Ti.Util.fallback(Ti.Util.getOrPickNoBlank(r,g.key),v)),_.isFunction(g.transformer)&&(Ti.Util.isNil(v)&&!g.transNil||(v=g.transformer(v))),!h||!Ti.S.isBlank(v)){n.next=8;break}if(!Ti.Util.fallback(g.ignoreBlank,!0)){n.next=8;break}return n.abrupt("return");case 8:if(!d||!Ti.Util.isNil(v)){n.next=11;break}if(!Ti.Util.fallback(g.ignoreNil,!0)){n.next=11;break}return n.abrupt("return");case 11:if(!g.$dict){n.next=15;break}return n.next=14,g.$dict.getItemAs(g.$dictValueKey,v);case 14:v=n.sent;case 15:return b=_.cloneDeep(g),w={},_.isFunction(g.comConf)?w=_.assign({},g.comConf(r)):g.comConf&&(w=t(g.comConf,{vars:l,itemData:r,value:v})),f&&_.isUndefined(w[f])&&(w[f]=v),b.comConf=w,b.uniqueKey=y||_.concat(b.key,b.comType).join("-"),n.abrupt("return",b);case 22:case"end":return n.stop()}},n)}))()}};Ti.Preload("ti/com/ti/support/field_display.mjs",n)}(),function(){var e={isSelectedItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.value,i=void 0===n?null:n,a=t.multi;return void 0!==a&&a?_.isArray(i)&&_.indexOf(i,e.value)>=0:_.isEqual(i,e.value)},normalizeData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.emptyItem,i=void 0===n?null:n,a=t.multi,r=void 0!==a&&a,o=t.value,s=void 0===o?null:o,c=t.focusIndex,l=void 0===c?-1:c,u=t.mapping,d=void 0===u?null:u,m=t.defaultIcon,h=void 0===m?null:m,p=t.iteratee,f=void 0===p?null:p,y=t.defaultTipKey,g=void 0===y?null:y,v=0,b=[];if(!r&&i){var w=_.cloneDeep(i);w.selected=_.isUndefined(w.value)||_.isNull(w.value)?_.isNull(s):this.isSelectedItem(w,{value:s,multi:r}),_.isFunction(f)&&(w=f(w,v)||w),b.push(w),v++}var x=[];if(_.isArray(e)){var T,k=d?_.defaults(_objectSpread({},d),{icon:"icon",text:"text",value:"value",tip:"tip"}):null,C=_createForOfIteratorHelper(e);try{for(C.s();!(T=C.n()).done;){var S=T.value;if(_.isPlainObject(S)){var I=void 0;!(I=k?Ti.Util.translate(S,k):_.cloneDeep(S)).tip&&g&&(I.tip=S[g]),x.push(I)}else x.push({icon:h,text:Ti.Types.toStr(S),value:S})}}catch(e){C.e(e)}finally{C.f()}}for(var j=0;j<x.length;j++){var O=x[j];O.index=j,O.focused=j==l,O.icon=O.icon||h,O.selected=this.isSelectedItem(O,{value:s,multi:r}),_.isFunction(f)&&(x[j]=f(O,j)||O)}return x},matchItemByKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"equal",i=arguments.length>3?arguments[3]:void 0,a=e[t],r={equal:function(){return _.isEqual(a,i)},starts:function(){return _.startsWith(a,i)},contains:function(){if(_.isString(a))return a.indexOf(i+"")>=0;_.indexOf(a,i)}}[n];return!!_.isFunction(r)&&r()},findItemInList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.list,i=void 0===n?[]:n,a=t.matchValue,r=void 0===a?"equal":a,o=t.matchText,s=void 0===o?"off":o;if(_.isArray(i)&&!_.isEmpty(i)){var c,l=_createForOfIteratorHelper(i);try{for(l.s();!(c=l.n()).done;){var u=c.value;if(this.matchItemByKey(u,"value",r,e))return u;if(this.matchItemByKey(u,"text",s,e))return u}}catch(e){l.e(e)}finally{l.f()}}return null},getSelectedItemIndex:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.value,i=void 0===n?null:n,a=t.multi,r=void 0!==a&&a,o=[],s={value:i,multi:r},c=0;c<e.length;c++){var l=e[c];if(this.isSelectedItem(l,s)){if(!this.multi)return c;o.push(c)}}return _.isEmpty(o)&&!r?-1:o}};Ti.Preload("ti/com/ti/support/formed_list_methods.mjs",e)}(),function(){var e={inject:["$vars"],props:{index:{type:Number,default:-1},rowId:{type:String,default:null},data:null,changedId:{type:String,default:null},currentId:{type:String,default:null},checkedIds:{type:Object,default:function(){return{}}},checkable:{type:Boolean,default:!1},selectable:{type:Boolean,default:!0},openable:{type:Boolean,default:!0},rowToggleKey:{type:Array,default:function(){return[]}},checkIcons:{type:Object,default:function(){return{on:"fas-check-square",off:"far-square"}}}},computed:{getListItemClass:function(){var e=this;return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.getTopClass({"is-current":e.isCurrent,"is-checked":e.isChecked,"is-changed":e.isChanged,"no-checked":!e.isChecked},n)}},isCurrent:function(){return this.rowId==this.currentId},isChanged:function(){return this.rowId==this.changedId},isChecked:function(){return!!this.checkedIds[this.rowId]},theCheckIcon:function(){return this.checkedIds[this.rowId]?this.checkIcons.on:this.checkIcons.off}},methods:{isRowToggleKey:function(e){return _.indexOf(this.rowToggleKey,e)>=0},OnClickChecker:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.checkable&&this.$notify("checker",{rowId:this.rowId,shift:e.shiftKey,toggle:e.ctrlKey||e.metaKey})},OnClickRow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ctrlKey||e.metaKey;!this.selectable||this.isCurrent&&this.isChecked&&!t||this.$notify("select",{rowId:this.rowId,shift:e.shiftKey,toggle:t})},OnDblClickRow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.openable&&(e.stopPropagation(),this.$notify("open",{rowId:this.rowId}))},doAutoActived:function(){!this.isActived&&this.isCurrent&&this.setActived()}},watch:{isCurrent:function(){this.doAutoActived()}},mounted:function(){this.doAutoActived()}};Ti.Preload("ti/com/ti/support/list_item_mixins.mjs",e)}(),function(){var e={provide:function(){return{$vars:this.vars||{}}},data:function(){return{myLastIndex:-1,myCurrentId:null,myCheckedIds:{}}},computed:{TopStyle:function(){var e=this.width,t=this.height;return Ti.Css.toStyle({width:e,height:t})},hasRowToggleKey:function(){return!_.isEmpty(this.rowToggleKey)},TheRowToggleKey:function(){return _.without(_.concat(this.rowToggleKey),void 0)},getRowId:function(){return Ti.Util.genRowIdGetter(this.idBy)},getRowData:function(){return Ti.Util.genRowDataGetter(this.rawDataBy)},isDataEmpty:function(){return!_.isArray(this.data)||_.isEmpty(this.data)},isAllChecked:function(){if(this.isDataEmpty)return!1;var e,t=_createForOfIteratorHelper(this.TheData);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(!this.theCheckedIds[n.id])return!1}}catch(e){t.e(e)}finally{t.f()}return!0},hasChecked:function(){var e,t=_createForOfIteratorHelper(this.data);try{for(t.s();!(e=t.n()).done;){var n=e.value,i=this.getRowId(n);if(this.theCheckedIds[i])return!0}}catch(e){t.e(e)}finally{t.f()}return!1},theCurrentRowId:function(){return this.wrapRowId(this.currentId)},theCurrentId:function(){return this.puppetMode?this.theCurrentRowId:this.myCurrentId},theCheckedIds:function(){return this.puppetMode?this.getCheckedIdsMap(this.checkedIds):this.myCheckedIds},Dict:function(){if(this.dict){if(this.dict instanceof Ti.Dict)return this.dict;var e=Ti.DictFactory.explainDictName(this.dict).name;return Ti.DictFactory.CheckDict(e)}}},methods:{wrapRowId:function(e){return _.isNumber(e)?""+e:e},evalData:function(){var e=arguments,t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.length>0&&void 0!==e[0]?e[0]:_.identity,a=t.data,!t.Dict){n.next=31;break}if(!_.isString(a)){n.next=9;break}return n.next=6,t.Dict.queryData(a);case 6:a=n.sent,n.next=31;break;case 9:if(!_.isArray(a)){n.next=28;break}r=[],o=0;case 12:if(!(o<a.length)){n.next=25;break}if(s=a[o],!_.isString(s)){n.next=21;break}return n.next=17,t.Dict.getItem(s);case 17:(c=n.sent)&&r.push(c),n.next=22;break;case 21:r.push(s);case 22:o++,n.next=12;break;case 25:a=r,n.next=31;break;case 28:return n.next=30,t.Dict.getData();case 30:a=n.sent;case 31:return l=[],_.forEach(a,function(e,n){var a={index:n,id:t.getRowId(e,n),rawData:t.getRowData(e),item:e};a=i(a)||a,l.push(a)}),n.abrupt("return",l);case 34:case"end":return n.stop()}},n)}))()},findRowIndexById:function(e){var t,n=_createForOfIteratorHelper(this.TheData);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.id==e)return i.index}}catch(e){n.e(e)}finally{n.f()}return-1},findRowById:function(e){var t,n=_createForOfIteratorHelper(this.TheData);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.id==e)return i}}catch(e){n.e(e)}finally{n.f()}},getCurrentRow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.theCurrentId;return this.findRowById(e)},getCurrent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.theCurrentId,t=this.getCurrentRow(e);return t?t.rawData:null},getCheckedRow:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.theCheckedIds,n=[],i=_createForOfIteratorHelper(this.TheData);try{for(i.s();!(e=i.n()).done;){var a=e.value;t[a.id]&&n.push(a)}}catch(e){i.e(e)}finally{i.f()}return n},getChecked:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.theCheckedIds,t=this.getCheckedRow(e);return _.map(t,function(e){return e.rawData})},getEmitContext:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=[],a=null,r=-1,o=_createForOfIteratorHelper(this.TheData);try{for(o.s();!(t=o.n()).done;){var s=t.value;s.id==e&&(a=s.rawData,r=s.index),n[s.id]&&i.push(s.rawData)}}catch(e){o.e(e)}finally{o.f()}return{current:a,currentId:e,currentIndex:r,checked:i,checkedIds:n}},selectRow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.quiet,i=void 0!==n&&n,a=t.payload,r={},o=null;this.autoCheckCurrent?(r=e?_defineProperty({},e,!0):{},o=e||null):(r=_.cloneDeep(this.myCheckedIds),o=e);var s=this.getEmitContext(o,r);this.puppetMode||(this.myCheckedIds=r,this.myCurrentId=o),this.myLastIndex=this.findRowIndexById(e),i||(_.defaults(s,a),this.doNotifySelect(s))},selectRowByIndex:function(e,t){var n=e;if(this.scrollIndex&&(n=Ti.Num.scrollIndex(e,this.TheData.length)),_.inRange(n,0,this.TheData.length)){var i=this.TheData[n];this.selectRow(i.id,t)}},selectPrevRow:function(e){this.selectRowByIndex(Math.max(-1,this.myLastIndex-1),e)},selectNextRow:function(e){this.selectRowByIndex(this.myLastIndex+1,e)},selectRowsToCurrent:function(e){var t=_.cloneDeep(this.theCheckedIds),n=this.theCurrentId,i=this.findRowIndexById(e);if(i>=0){var a=Math.min(i,this.myLastIndex),r=Math.max(i,this.myLastIndex);a<0&&(a=0);for(var o=a;o<=r;o++){t[this.TheData[o].id]=!0}var s=this.getEmitContext(n,t);this.puppetMode||(this.myCheckedIds=t,this.myCurrentId=n),this.myLastIndex=i,this.doNotifySelect(s)}},checkRow:function(e){var t=_.cloneDeep(this.theCheckedIds),n=this.theCurrentId,i=(this.myLastIndex,this.findRowIndexById(e));if(_.isUndefined(e))t={},_.forEach(this.TheData,function(e){t[e.id]=!0});else if(_.isArray(e)){var a=_.last(e);_.forEach(e,function(e){t[e]=!0}),this.autoCheckCurrent&&this.findRowIndexById(a)}else t[e]=!0,this.autoCheckCurrent&&i;var r=this.getEmitContext(n,t);this.puppetMode||(this.myCheckedIds=t,this.myCurrentId=n),this.myLastIndex=i,this.doNotifySelect(r)},cancelRow:function(e){var t=_.cloneDeep(this.theCheckedIds),n=this.theCurrentId,i=-1;_.isUndefined(e)?(t={},n=null):(i=this.findRowIndexById(e),t[e]=!1,this.autoCheckCurrent&&n==e&&(n=null));var a=this.getEmitContext(n,t);this.puppetMode||(this.myCheckedIds=t,this.myCurrentId=n,this.myLastIndex=i),this.doNotifySelect(a)},toggleRow:function(e){this.theCheckedIds[e]?this.cancelRow(e):this.checkRow(e)},doNotifySelect:function(e){this.$notify("select",e),_.isFunction(this.onSelect)&&this.onSelect(e)},OnRowCheckerClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rowId,n=e.shift;this.multi?n?this.selectRowsToCurrent(t):this.toggleRow(t):this.selectRow(t)},OnRowSelect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rowId,n=e.shift,i=e.toggle;n&&this.multi?this.selectRowsToCurrent(t):i&&this.multi?this.toggleRow(t):Ti.Util.isNil(t)||this.autoCheckCurrent?this.selectRow(t):this.toggleRow(t)},OnRowOpen:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).rowId,t=this.findRowById(e);t&&(this.$notify("open",t),_.isFunction(this.onOpen)&&this.onOpen(t))},getCheckedIdsMap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};return _.isArray(e)?_.forEach(e,function(e){t[e]=!0}):_.forEach(e,function(e,n){e&&(t[n]=!0)}),this.autoCheckCurrent&&!Ti.Util.isNil(this.theCurrentId)&&(t[this.theCurrentId]=!0),t},syncCurrentId:function(){this.puppetMode||this.theCurrentId==this.theCurrentRowId?this.myLastIndex=this.findRowIndexById(this.theCurrentRowId):this.selectRow(this.theCurrentRowId,{quiet:!0})},syncCheckedIds:function(){this.puppetMode||(this.myCheckedIds=this.getCheckedIdsMap(this.checkedIds))}},watch:{currentId:function(){this.syncCurrentId()},checkedIds:function(){this.syncCheckedIds()},data:function(){this.theCurrentId&&(this.myLastIndex=this.findRowIndexById(this.theCurrentId))}},mounted:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.syncCheckedIds(),this.syncCurrentId();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()};Ti.Preload("ti/com/ti/support/list_mixins.mjs",e)}(),function(){var e={data:{type:[Array,String],default:function(){return[]}},dict:{type:[String,Ti.Dict],default:null},idBy:{type:[String,Function],default:"id"},rawDataBy:{type:[Object,String,Function],default:_.identity},currentId:{type:[String,Number],default:null},checkedIds:{type:[Array,Object],default:function(){return[]}},changedId:{type:String,default:null},vars:{type:Object,default:function(){return{}}},multi:{type:Boolean,default:!1},autoCheckCurrent:{type:Boolean,default:!0},rowToggleKey:{type:[String,Array],default:function(){return["SPACE"]}},checkable:{type:Boolean,default:!1},selectable:{type:Boolean,default:!0},openable:{type:Boolean,default:!0},cancelable:{type:Boolean,default:!0},hoverable:{type:Boolean,default:!1},puppetMode:{type:Boolean,default:!1},scrollIndex:{type:Boolean,default:!1},onSelect:{type:Function,default:void 0},onOpen:{type:Function,default:void 0},blankAs:{type:Object,default:function(){return{icon:"fas-disease",text:"empty-data"}}},blankClass:{type:String,default:"as-big-mask",validator:function(e){return/^as-(big|hug|big-mask|mid-tip)$/.test(e)}},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null}};Ti.Preload("ti/com/ti/support/list_props.mjs",e)}(),function(){var e={value:null,options:{type:[Array,Function,String,Ti.Dict],default:function(){return[]}},valueBy:{type:[String,Function],default:void 0},textBy:{type:[String,Function],default:void 0},iconeBy:{type:[String,Function],default:void 0},multi:!1,allowEmpty:{type:Boolean,default:!0},autoSplitValue:{type:[Boolean,String],default:!0},defaultIcon:{type:String,default:null},emptylAs:{default:null},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null}};Ti.Preload("ti/com/ti/switcher/ti-switcher-props.mjs",e)}(),Ti.Preload("ti/com/ti/switcher/ti-switcher.html",'<div class="ti-switcher"\n  :class="TopClass">\n  \x3c!--\n    Show Loading\n  --\x3e\n  <ti-icon\n    v-if="loading"\n    value="zmdi-settings zmdi-hc-spin"/>\n  \x3c!--\n    Options\n  --\x3e\n  <div v-else\n    class="switcher-con">\n    <ul>\n      <li v-for="it in TheItems" \n        :key="it.value"\n        :class="it.className"\n        @click="OnClickItem(it, $event)"\n        @mousedown="myFocusIndex=it.index;">\n        <ti-icon class="it-icon"\n          size=".8em"\n          v-if="it.icon" \n          :value="it.icon"/>\n        <span\n          class="it-text">{{it.text|i18n}}</span>\n      </li>\n    </ul>\n  </div>\n</div>'),function(){var e={data:function(){return{loading:!1,myOptionsData:[],myValueMap:{},myLastIndex:0,myFocusIndex:-1}},computed:{TopClass:function(){return this.getTopClass()},Dict:function(){var e=this;if(this.options instanceof Ti.Dict)return this.options;if(_.isString(this.options)){var t=Ti.DictFactory.DictReferName(this.options);if(t)return Ti.DictFactory.CheckDict(t,function(t){var n=t.loading;e.loading=n})}return Ti.DictFactory.GetOrCreate({data:this.options,getValue:Ti.Util.genGetter(this.valueBy||"value"),getText:Ti.Util.genGetter(this.textBy||"text|name"),getIcon:Ti.Util.genGetter(this.iconBy||"icon")},{hooks:function(t){var n=t.loading;return e.loading=n}})},TheItems:function(){var e=this;return _.map(this.myOptionsData,function(t,n){var i=e.Dict.getValue(t);return{index:n,className:{"is-selected":e.myValueMap[i],"is-focused":n==e.myFocusIndex},text:e.Dict.getText(t),value:i,icon:e.Dict.getIcon(t)||e.defaultIcon}})}},methods:{OnClickItem:function(e,t){var n=e.value,i=e.index,a=t.ctrlKey||t.metaKey;t.shiftKey&&this.multi?this.selectItemsToCurrent(n,i):a&&this.multi?this.toggleItem(n):this.allowEmpty?this.toggleItem(n):this.myValueMap=_defineProperty({},n,!0),this.myLastIndex=i,this.tryNotifyChanged()},findItemIndexByValue:function(e){var t,n=_createForOfIteratorHelper(this.TheItems);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.value==e)return i.index}}catch(e){n.e(e)}finally{n.f()}return-1},selectItemsToCurrent:function(e){var t=_.cloneDeep(this.myValueMap),n=this.findItemIndexByValue(e);if(n>=0){var i=Math.min(n,this.myLastIndex),a=Math.max(n,this.myLastIndex);i<0&&(i=0);for(var r=i;r<=a;r++){t[this.TheItems[r].value]=!0}}this.myValueMap=t},toggleItem:function(e){var t=this.myValueMap[e];this.multi?this.myValueMap=_.assign({},this.myValueMap,_defineProperty({},e,!t)):this.myValueMap=_defineProperty({},e,!t)},tryNotifyChanged:function(){var e=Ti.Util.truthyKeys(this.myValueMap);if(!_.isEqual(e,this.Values)){var t=this.multi?e:e.join(",");this.$notify("change",t)}},reloadMyOptionsData:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Dict.getData();case 2:e.myOptionsData=t.sent;case 3:case"end":return t.stop()}},t)}))()},reloadMyValueMap:function(){var e=null;this.autoSplitValue&&(e=_.isBoolean(this.autoSplitValue)?/[:,;\t\n\/]+/g:this.autoSplitValue);var t=Ti.S.toArray(this.value,{sep:e}),n={};_.forEach(t,function(e){return n[e]=!0}),this.myValueMap=n}},watch:{options:{handler:"reloadMyOptionsData",immediate:!0},value:{handler:"reloadMyValueMap",immediate:!0}},mounted:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Ti.Dom.watchDocument("mouseup",function(){return t.myFocusIndex=-1});case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),beforeDestroy:function(){Ti.Dom.unwatchDocument("mouseup",this.__on_mouseup)}};Ti.Preload("ti/com/ti/switcher/ti-switcher.mjs",e)}(),Ti.Preload("ti/com/ti/switcher/_com.json",{name:"ti-switcher",globally:!0,template:"./ti-switcher.html",props:"./ti-switcher-props.mjs",mixins:["./ti-switcher.mjs"]}),Ti.Preload("ti/com/ti/table/com/table-row/com/table-cell/table-cell.html",'<td class="table-cell"\n  :class="TopClass"\n  :col-index="index"\n  v-ti-activable>\n  <div class="cell-wrapper"\n    :class="WrapperClass">\n    \x3c!--Slot for first column--\x3e\n    <slot></slot>\n    \x3c!--Fields--\x3e\n    <div class="cell-con">\n      <component \n        v-for="(it, index) in cellItems"\n          :class="\'item-\'+index"\n          :key="it.uniqueKey"\n          :is="it.comType"\n          v-bind="it.comConf"\n          @change="OnItemChanged(it, $event)"/>\n    </div>\n  </div>\n</td>'),function(){var e={inject:["$table"],data:function(){return{isEditingMode:!1,cellItems:[],myCellSize:-1}},props:{index:{type:Number,default:-1},rowId:{type:String,default:null},rowIndex:{type:Number,default:-1},title:{type:String,default:null},nowrap:{type:Boolean,default:!0},display:{type:Array,default:function(){return[]}},name:{type:[String,Array],default:null},type:{type:String,default:"String"},dict:{type:String,default:"String"},comType:{type:String,default:null},comConf:{type:Object,default:function(){return{}}},serializer:{type:Function,default:_.identity},transformer:{type:Function,default:_.identity},data:{type:Object,default:function(){return{}}},isCurrent:{type:Boolean,default:!1},isHover:{type:Boolean,default:!1},isChecked:{type:Boolean,default:!1},ignoreNil:{type:Boolean,default:!0},focusBy:{type:String,default:"focus"}},computed:{TopClass:function(){var e=this.className&&this.className.indexOf("align-")>=0;return this.getTopClass({"has-align":e,"not-align":!e})},WrapperClass:function(){return{"is-nowrap":this.nowrap,"is-editing-mode":this.isEditingMode}},theCurrentDisplayItems:function(){if(this.isActived&&this.comType||_.isEmpty(this.display)){this.isEditingMode=!0;var e=_.assign({},this.comConf);return this.focusBy&&(e[this.focusBy]="${=isActived}"),[{comType:this.comType,comConf:e,key:this.name,type:this.type,dict:this.dict,transformer:this.transformer,ignoreNil:!1}]}return this.isEditingMode=!1,this.display}},methods:{evalCellDisplayItems:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=[],i=0;case 2:if(!(i<e.theCurrentDisplayItems.length)){t.next=11;break}return a=e.theCurrentDisplayItems[i],t.next=6,e.evalDataForFieldDisplayItem({itemData:e.data,displayItem:a,vars:{rowId:e.rowId,isCurrent:e.isCurrent},autoIgnoreNil:!0,uniqueKey:"row".concat(e.rowId,"-cell").concat(e.index,"-").concat(i)});case 6:(r=t.sent)&&n.push(r);case 8:i++,t.next=2;break;case 11:o=Ti.Util.pureCloneDeep(e.cellItems),s=Ti.Util.pureCloneDeep(n),_.isEqual(o,s)||(e.cellItems=n);case 14:case"end":return t.stop()}},t)}))()},OnItemChanged:function(e,t){this.$table.$notify("cell:item:change",{rowId:this.rowId,cellIndex:this.index,index:this.rowIndex,name:e.key,value:t})}},watch:{data:{handler:"evalCellDisplayItems",immediate:!0},isCurrent:"evalCellDisplayItems"}};Ti.Preload("ti/com/ti/table/com/table-row/com/table-cell/table-cell.mjs",e)}(),Ti.Preload("ti/com/ti/table/com/table-row/com/table-cell/_com.json",{name:"table-cell",globally:!1,template:"./table-cell.html",methods:"@com:ti/support/field_display.mjs",mixins:["./table-cell.mjs"],components:["@com:ti/label"]}),Ti.Preload("ti/com/ti/table/com/table-row/table-row.html",'<tr class="table-row"\n  :class="TopClass"\n  @click.left="OnClickRow"\n  @dblclick.left="OnDblClickRow"\n  v-ti-activable>\n  \x3c!--\n    Cells\n  --\x3e\n  <table-cell v-for="fld in fields"\n    :key="fld.index"\n    v-bind="fld"\n    :row-id="rowId"\n    :row-index="index"\n    :is-current="isCurrent"\n    :is-hover="isHover"\n    :is-checked="isChecked"\n    :data="data">\n    <template v-if="fld.index == 0">\n      <div class="table-row-head">\n        \x3c!--current actived row indicator--\x3e\n        <div class="row-actived-indicator"></div>\n        \x3c!-- Indents --\x3e\n        <div v-for="n in indent"\n            class="row-indent"></div>\n        \x3c!--ICON: Handler--\x3e\n        <template v-if="icon">\n          <ti-icon\n            v-if="hasRealIcon"\n              class="row-icon"\n              :value="icon"\n              @click.native.left.stop="OnClickIcon"/>\n          <div v-else\n            class="row-icon"></div>\n        </template>\n        \x3c!--ICON: Checker--\x3e\n        <ti-icon v-if="checkable"\n            class="row-checker"\n            :value="theCheckIcon"\n            @click.native.left.stop="OnClickChecker"/>\n      </div>\n    </template>\n  </table-cell>\n</tr>'),function(){var e={props:{indent:{type:Number,default:0},icon:{type:[Boolean,String],default:null},fields:{type:Array,default:function(){return[]}}},computed:{TopClass:function(){return this.getListItemClass({"is-hover":this.isHover},"row-indent-".concat(this.indent))},isHover:function(){return this.hoverId&&this.rowId==this.hoverId},hasRealIcon:function(){return this.icon&&_.isString(this.icon)}},methods:{OnClickIcon:function(e){this.$notify("icon",{rowId:this.rowId,shift:e.shiftKey,toggle:e.ctrlKey||e.metaKey})}}};Ti.Preload("ti/com/ti/table/com/table-row/table-row.mjs",e)}(),Ti.Preload("ti/com/ti/table/com/table-row/_com.json",{name:"table-row",globally:!1,template:"./table-row.html",mixins:["@com:ti/support/list_item_mixins.mjs","./table-row.mjs"],components:["./com/table-cell"]}),function(){var e={iconBy:{type:[String,Function],default:null},indentBy:{type:[String,Function],default:null},fields:{type:Array,default:function(){return[]}},head:{type:String,default:"frozen",validator:function(e){return Ti.Util.isNil(e)||/^(frozen|none|normal)$/.test(e)}},border:{type:String,default:"cell",validator:function(e){return/^(row|column|cell|none)$/.test(e)}},autoScrollIntoView:{type:Boolean,default:!0}};Ti.Preload("ti/com/ti/table/ti-table-props.mjs",e)}(),function(){var e={data:function(){return{myViewportWidth:0,myTableWidth:0,myColSizes:{priHead:[],priBody:[],primary:[],fixeds:[],amended:[]},myCellsReady:!1,myCellsReport:{},I_am_in_resizing:!1}},methods:{reportReady:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a="R".concat(t,"-C").concat(n);i?delete this.myCellsReport[a]:this.myCellsReport[a]=i,_.delay(function(){e.myCellsReady=_.isEmpty(e.myCellsReport),e.myCellsReady&&e.evalEachColumnSize()})},evalEachColumnSize:function(){var e=this;if(!this.I_am_in_resizing){var t=_.get(this.$refs.body,"scrollTop");this.I_am_in_resizing=!0,this.myTableWidth=0,this.myColSizes={priHead:[],priBody:[],primary:[],fixeds:[],amended:[]};var n,i=_createForOfIteratorHelper(this.TableFields);try{for(i.s();!(n=i.n()).done;){var a=n.value.width||"stretch";/^(stretch|auto)$/.test(a)?this.myColSizes.fixeds.push(a):this.myColSizes.fixeds.push(Ti.Css.toPixel(a,1))}}catch(e){i.e(e)}finally{i.f()}this.$nextTick(function(){var n,i=_createForOfIteratorHelper(Ti.Dom.findAll(".table-head ul li",e.$el));try{for(i.s();!(n=i.n()).done;){var a=n.value,r=Ti.Rects.createBy(a);e.myColSizes.priHead.push(r.width)}}catch(e){i.e(e)}finally{i.f()}var o,s=_createForOfIteratorHelper(Ti.Dom.findAll(".table-body .table-row",e.$el));try{for(s.s();!(o=s.n()).done;)for(var c=o.value,l=Ti.Dom.findAll(":scope > div",c),u=0;u<l.length;u++){var d=l[u],m=Ti.Rects.createBy(d);u>=e.myColSizes.priBody.length?e.myColSizes.priBody[u]=m.width:e.myColSizes.priBody[u]=Math.max(m.width,e.myColSizes.priBody[u])}}catch(e){s.e(e)}finally{s.f()}for(var h=0;h<e.myColSizes.priHead.length;h++){var p=e.myColSizes.priHead[h],f=e.myColSizes.priBody[h],y=Math.max(p,f);e.myColSizes.primary.push(y)}e.onTableResize(),_.delay(function(){e.I_am_in_resizing=!1,e.$refs.body&&(e.$refs.body.scrollTop=t)},10)})}},onTableResize:function(){if(!(this.myColSizes.primary.length<=0)){for(var e=Ti.Rects.createBy(this.$el).width,t=[],n=[],i=0;i<this.myColSizes.fixeds.length;i++){var a=this.myColSizes.fixeds[i],r=this.myColSizes.primary[i];if("stretch"==a)t.push(i),n.push(r);else if("auto"==a)n.push(r);else if(a<=1&&a>0)n.push(a*e);else if(a<0&&a>=-1){var o=Math.abs(a*e);n.push(Math.max(o,r))}else if(a<-1){var s=Math.abs(a);n.push(Math.max(s,r))}else n.push(a)}var c=_.sum(n),l=Math.max(e,c);if(this.myTableWidth=l,t.length>0){var u=l-c;if(u>0){var d,m=u/t.length,h=_createForOfIteratorHelper(t);try{for(h.s();!(d=h.n()).done;){n[d.value]+=m}}catch(e){h.e(e)}finally{h.f()}}}this.myColSizes.amended=n}}},mounted:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Ti.Viewport.watch(this,{resize:_.debounce(function(){return t.onTableResize()},10)});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),beforeDestroy:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/table/ti-table-resizes.mjs",e)}(),Ti.Preload("ti/com/ti/table/ti-table.html",'<div class="ti-table"\n  :class="TopClass"\n  @click="OnClickTop"\n  v-ti-activable>\n  \x3c!--\n    Blank\n  --\x3e\n  <ti-loading \n    v-if="isDataEmpty"\n      class="nil-data"\n      :class="blankClass"\n      v-bind="blankAs"/>\n  \x3c!--\n    Show thead/tbody\n  --\x3e\n  <template v-else>\n    \x3c!--\n      Table\n    --\x3e\n    <table ref="table">\n      \x3c!--\n        Head\n      --\x3e\n      <thead v-if="isShowHead"\n        class="table-head"\n        :style="TableStyle">\n        \x3c!--field titles--\x3e\n        <tr>\n          <th\n            v-for="fld in TableFields"\n              :style="getHeadCellStyle(fld)"\n              :col-index="fld.index">\n            <span class="table-head-cell-text">{{fld.title|i18n}}</span>\n          </th>\n        </tr>\n      </thead>\n      \x3c!--\n        Body\n      --\x3e\n      <tbody\n        class="table-body"\n        :style="TableStyle">\n        <table-row\n          v-for="row in myData"\n            :key="row.id"\n            :row-id="row.id"\n            :index="row.index"\n            :icon="row.icon"\n            :indent="row.indent"\n            :data="row.rawData"\n            :fields="TableFields"\n            :current-id="theCurrentId"\n            :checked-ids="theCheckedIds"\n            :changed-id="changedId"\n            :checkable="checkable"\n            :selectable="selectable"\n            :openable="openable"\n            @icon="$notify(\'icon\', $event)"\n            @checker="OnRowCheckerClick"\n            @select="OnRowSelect"\n            @open="OnRowOpen"/>\n        </tbody>\n    </table>\n    \x3c!--checker--\x3e\n    <div\n      v-if="checkable && multi && isShowHead"\n        class="as-checker"\n        @click.left="OnClickHeadChecker">\n        <ti-icon :value="HeadCheckerIcon"/>\n    </div>\n  </template>\n</div>'),function(){var e={provide:function(){return{$table:this}},data:function(){return{myTableRect:null,myData:[]}},computed:{TopClass:function(){var e=this.getTopClass({"is-hoverable":this.hoverable},["is-border-".concat(this.border),"is-head-".concat(this.head||"none")]);if(!e["is-layout-fixed"]&&!e["is-layout-auto"]){for(var t="auto",n=0;n<this.fields.length;n++){var i=this.fields[n];if(!Ti.Util.isNil(i.width)){t="fixed";break}}e["is-layout-".concat(t)]=!0}return e},TableStyle:function(){if(this.myTableWidth>0)return Ti.Css.toStyle({width:this.myTableWidth})},getRowIndent:function(){var e=this;return _.isFunction(this.indentBy)?function(t){return e.indentBy(t)}:_.isString(this.indentBy)?function(t){return _.get(t,e.indentBy)}:function(e){return 0}},getRowIcon:function(){var e=this;return _.isFunction(this.iconBy)?function(t){return e.iconBy(t)}:_.isString(this.iconBy)?function(t){return _.get(t,e.iconBy)}:function(e){return null}},TheData:function(){return this.myData},isShowHead:function(){return/^(frozen|normal)$/.test(this.head)},HeadCheckerIcon:function(){return this.isAllChecked?"fas-check-square":this.hasChecked?"fas-minus-square":"far-square"},TableFields:function(){for(var e=[],t=0;t<this.fields.length;t++){var n=this.fields[t],i=this.evalFieldDisplay(n.display,n.name),a=Ti.Util.fallbackNil(n.width,"stretch");_.isString(a)?/^\d+(\.\d+)?%$/.test(a)?a=a.substring(0,a.length-1)/100:/^(auto|stretch)$/.test(a)||(a="stretch"):_.isNumber(a)||(a="stretch"),e.push({index:t,title:n.title,nowrap:n.nowrap,width:a,className:n.className,name:n.name,display:i,type:n.type,comType:n.comType,comConf:n.comConf,transformer:n.transformer,serializer:n.serializer})}return e}},methods:{OnClickHeadChecker:function(){this.isAllChecked?this.cancelRow():this.checkRow()},OnClickTop:function(e){this.cancelable&&Ti.Dom.hasOneClass(e.target,"ti-table","table-body","table-head-cell","table-head-cell-text")&&this.cancelRow()},onItemChanged:function(e){this.$notify("item:change",e)},getHeadCellStyle:function(e){if(e&&!Ti.Util.isNil(e.width)&&this.myTableRect&&this.myTableRect.width>0){var t=e.width;if(_.isNumber(t))if(t<0){var n=Math.abs(t/this.myTableRect.width);t=Math.round(100*n)+"%"}else t=t>=0&&t<1?Math.round(100*t)+"%":"".concat(t,"px");return{width:t}}},evalFieldDisplay:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,i=[],a=_createForOfIteratorHelper(t=_.concat(t));try{for(a.s();!(e=a.n()).done;){var r=e.value,o=this.evalFieldDisplayItem(r,{defaultKey:n});o&&i.push(o)}}catch(e){a.e(e)}finally{a.f()}return i},scrollCurrentIntoView:function(){if(this.autoScrollIntoView&&this.theCurrentId){var e=this.findRowIndexById(this.theCurrentId),t=this.$el,n=Ti.Dom.find(".table-row:nth-child(".concat(e+1,")"),t);if(!_.isElement(t)||!_.isElement(n))return;var i=Ti.Rects.createBy(t),a=Ti.Rects.createBy(n);i.contains(a)||(a.bottom>i.bottom?t.scrollTop+=a.bottom-i.bottom:t.scrollTop+=a.top-i.top)}},OnResize:function(){this.$refs.table&&(this.myTableRect=Ti.Rects.createBy(this.$refs.table))},__ti_shortcut:function(e){return"ARROWUP"==e?(this.selectPrevRow({payload:{byKeyboardArrow:!0}}),this.scrollCurrentIntoView(),{prevent:!0,stop:!0,quit:!0}):"ARROWDOWN"==e?(this.selectNextRow({payload:{byKeyboardArrow:!0}}),this.scrollCurrentIntoView(),{prevent:!0,stop:!0,quit:!0}):void 0}},watch:{data:{handler:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){var i,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=_.isEqual(t,n)){e.next=5;break}return e.next=4,this.evalData(function(e){e.icon=a.getRowIcon(e.item),e.indent=a.getRowIndent(e.item)});case 4:this.myData=e.sent;case 5:_.isEmpty(this.data)&&(this.myCellsReady=!0);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),immediate:!0}},mounted:function(){var e=this;Ti.Viewport.watch(this,{resize:_.debounce(function(){return e.OnResize()},10)}),this.$nextTick(function(){return e.OnResize()}),this.autoScrollIntoView&&_.delay(function(){e.scrollCurrentIntoView()},0)},beforeDestroy:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/table/ti-table.mjs",e)}(),Ti.Preload("ti/com/ti/table/_com.json",{name:"ti-table",globally:!0,template:"./ti-table.html",props:["@com:ti/support/list_props.mjs","./ti-table-props.mjs"],methods:"@com:ti/support/field_display.mjs",mixins:["@com:ti/support/list_mixins.mjs","./ti-table.mjs"],components:["./com/table-row"]}),Ti.Preload("ti/com/ti/tags/com/tags-item/tags-item.html",'<div class="ti-tags-item" \n  :class="topClass"\n  @mouseenter="mouseEnter=\'top\'"\n  @mouseleave="mouseEnter=null"\n  @click.left="onClickTop">\n  \x3c!--\n    Deleter\n  --\x3e\n  <ti-icon v-if="removable"\n    class="as-del"\n    :value="removeIcon"\n    @mouseenter.native="mouseEnter=\'del\'"\n    @mouseleave.native="mouseEnter=\'top\'"\n    @click.native.stop="onClickDel"/>\n  \x3c!--\n    Icon\n  --\x3e\n  <ti-icon v-if="icon" \n    class="as-icon"\n    :value="icon"/>\n  \x3c!--\n    Text\n  --\x3e\n  <template v-if="text">\n    <a v-if="href"\n      class="as-text"\n      @click.prevent\n      :href="href"\n      :class="textClass">{{text|i18n}}</a>\n    <span v-else\n      class="as-text"\n      :class="textClass">{{text|i18n}}</span>\n  </template>\n  \x3c!--\n    Status Icon\n  --\x3e\n  <ti-icon v-if="hasOptions"\n    class="as-status"\n    :value="theStatusIcon"/>\n  \x3c!--\n    Drop & Mask\n  --\x3e\n  <template v-if="\'extended\' == status">\n    <div class="as-mask" @click.stop="closeDrop"></div>\n    <div class="as-drop" ref="drop"\n      @click.stop>\n      <ti-icon-text v-for="it in theOptions"\n        :key="it.index"\n        v-bind="it"\n        @click.native="onClickOption(it)"/>\n    </div>\n  </template>\n</div>'),function(){var e={inheritAttrs:!1,data:function(){return{mouseEnter:null,status:"collapse"}},props:{index:{type:Number,default:-1},atLast:{type:Boolean,default:!1},icon:{type:[String,Object],default:null},text:{type:String,default:null},href:{type:String,default:null},value:{type:[String,Number,Boolean,Object],default:null},options:{type:Array,default:function(){return[]}},optionDefaultIcon:{type:String,default:null},cancelBubble:{type:Boolean,default:!1},removable:{type:Boolean,default:!1},removeIcon:{type:String,default:null},statusIcons:{type:Object,default:function(){return{collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"}}}},computed:{topClass:function(){return Ti.Css.mergeClassName({"has-options":this.hasOptions,"is-enter-top":"top"==this.mouseEnter&&this.hasOptions,"is-enter-del":"del"==this.mouseEnter},this.className)},textClass:function(){return{"without-icon":!this.hasIcon&&!this.removable,"without-options":!this.hasOptions}},hasIcon:function(){return!!this.icon},hasOptions:function(){return _.isArray(this.options)&&this.options.length>0},theOptions:function(){var e=this,t=_.filter(_.concat(this.options),function(e){return!Ti.Util.isNil(e)}),n=[];return _.forEach(t,function(t,i){var a;a=_.isPlainObject(t)?_.assign({icon:e.optionDefaultIcon},t,{index:i}):{index:i,icon:e.optionDefaultIcon,text:Ti.Types.toStr(t),value:t},_.isEqual(a.value,e.value)||n.push(a)}),n},theStatusIcon:function(){return this.statusIcons[this.status]},theData:function(){return{index:this.index,icon:this.icon,text:this.text,value:this.value,href:this.href,atLast:this.atLast,asterisk:this.asterisk}}},methods:{onClickDel:function(){this.$notify("remove",this.theData)},onClickOption:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value,n=e.text,i=e.icon;this.$notify("change",{value:t,text:n,icon:i,index:this.index}),this.closeDrop()},onClickTop:function(e){this.hasOptions?(e.stopPropagation(),this.openDrop()):this.cancelBubble&&e.stopPropagation(),this.href&&this.$notify("fire",this.theData)},openDrop:function(){var e=this;this.hasOptions&&(this.status="extended",this.$nextTick(function(){e.dockDrop()}))},closeDrop:function(){this.status="collapse",this.mouseEnter=null},dockDrop:function(){var e=this.$refs.drop,t=this.$el;if(_.isElement(e)&&_.isElement(t)&&"extended"==this.status){var n=Ti.Rects.createBy(t);Ti.Dom.setStyle(e,{"min-width":"".concat(n.width,"px")}),Ti.Dom.dockTo(e,t,{space:{y:2},posListX:["left","right"]})}}},mounted:function(){this.dockDrop()}};Ti.Preload("ti/com/ti/tags/com/tags-item/tags-item.mjs",e)}(),Ti.Preload("ti/com/ti/tags/com/tags-item/_com.json",{name:"tags-item",globally:!1,template:"./tags-item.html",mixins:["./tags-item.mjs"],components:["@com:ti/icon/text"]}),Ti.Preload("ti/com/ti/tags/ti-tags.html",'<div class="ti-tags"\n  :class="TopClass">\n  \x3c!--\n    Loop piece\n  --\x3e\n  <tags-item v-for="tag in myTags"\n    :key="tag.index"\n    v-bind="tag"\n    :cancel-bubble="cancelItemBubble"\n    :option-default-icon="optionDefaultIcon"\n    :removable="removable"\n    :remove-icon="removeIcon"\n    :status-icons="statusIcons"\n    @change="OnItemChanged"\n    @remove="OnItemRemoved"\n    @fire="OnItemFired"/>\n</div>'),function(){var e={data:function(){return{myTags:[],myValues:[]}},props:{value:{type:Array,default:function(){return[]}},dict:{type:[String,Ti.Dict],default:null},mapping:{type:Object,default:void 0},itemOptions:{type:Array,default:function(){return[]}},cancelItemBubble:{type:Boolean,default:!1},removable:{type:Boolean,default:!1},itemIconBy:{type:[String,Function],default:void 0},optionDefaultIcon:{type:String,default:void 0},itemDefaultIcon:{type:String,default:void 0},removeIcon:{type:String,default:"zmdi-close"},statusIcons:{type:Object,default:function(){return{collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"}}}},computed:{TopClass:function(){if(this.className)return this.className},getTagItemIcon:function(){var e=this;return _.isFunction(this.itemIconBy)?function(t){return e.itemIconBy(t)}:_.isString(this.itemIconBy)?function(t){return _.get(t,e.itemIconBy)}:function(e){return null}},Dict:function(){if(this.dict){if(this.dict instanceof Ti.Dict)return this.dict;var e=Ti.DictFactory.explainDictName(this.dict).name;return Ti.DictFactory.CheckDict(e)}}},methods:{OnItemChanged:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.index,n=e.value;if(t>=0){var i=this.getMyValues();i[t]=Ti.Util.fallback(n,null),this.$notify("change",i)}},OnItemRemoved:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).index;if(e>=0){var t=this.getMyValues();_.pullAt(t,e),this.$notify("change",t)}},OnItemFired:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).index,t=void 0===e?-1:e;if(t>=0){var n=_.nth(this.theData,t);n&&this.$notify("item:actived",n)}},evalMyData:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],!_.isArray(e.value)){t.next=26;break}i=e.value.length-1,a=0;case 4:if(!(a<e.value.length)){t.next=25;break}if(r=e.value[a],o=void 0,!_.isPlainObject(r)){t.next=12;break}(o=e.mapping?Ti.Util.translate(r,e.mapping):_.cloneDeep(r)).icon||(o.icon=e.getTagItemIcon(r)),t.next=20;break;case 12:if(!e.Dict){t.next=19;break}return t.next=15,e.Dict.getItem(r);case 15:s=t.sent,o=_.defaults({icon:e.Dict.getIcon(s),text:e.Dict.getText(s)||r,value:r}),t.next=20;break;case 19:o={text:r,value:r};case 20:_.defaults(o,{index:a,icon:e.itemDefaultIcon,options:e.itemOptions,atLast:a==i}),n.push(o);case 22:a++,t.next=4;break;case 25:case 26:e.myTags=n;case 27:case"end":return t.stop()}},t)}))()},getMyValues:function(){var e,t=[],n=_createForOfIteratorHelper(this.myTags);try{for(n.s();!(e=n.n()).done;){var i=e.value;t.push(Ti.Util.fallback(i.value,null))}}catch(e){n.e(e)}finally{n.f()}return t}},watch:{value:{handler:"evalMyData",immediate:!0}}};Ti.Preload("ti/com/ti/tags/ti-tags.mjs",e)}(),Ti.Preload("ti/com/ti/tags/_com.json",{name:"ti-tags",globally:!0,template:"./ti-tags.html",mixins:["./ti-tags.mjs"],components:["./com/tags-item"]}),Ti.Preload("ti/com/ti/text/json/ti-text-json.html",'<ti-gui\n  class="ti-text-json"\n  :class="className"\n  keep-shown-to="ti-text-json-editor"\n  :layout="TheLayout"\n  :schema="TheSchema"\n  :can-loading="true"\n  @change="OnChange"/>'),function(){var e={props:{tabAt:{type:String,default:"bottom-left",validator:function(e){return/^(top|bottom)-(left|center|right)$/.test(e)}},value:void 0,valueType:{type:String,default:"text",validator:function(e){return/^(text|obj)$/.test(e)}},jsonIndent:{type:String,default:"   "},tree:{type:Object,default:function(){return{}}}},computed:{TheContent:function(){return Ti.Util.isNil(this.value)?"":this.value},TheData:function(){return Ti.Util.isNil(this.value)?null:Ti.Types.safeParseJson(this.value,null)},TheSource:function(){return this.TheData?JSON.stringify(this.TheData,null,"   "):""},TheLayout:function(){return{type:"tabs",tabAt:this.tabAt,blocks:[{title:"i18n:structure",name:"tree",body:"desktop-tree"},{title:"i18n:source-code",name:"source",body:"desktop-source"}]}},TheSchema:function(){return{"desktop-tree":{comType:"ti-text-json-tree",comConf:_.assign({},this.tree,{value:this.TheData})},"desktop-source":{comType:"ti-text-raw",comConf:{showTitle:!1,value:this.TheSource}}}}},methods:{OnChange:function(e){var t=e;if(_.isString(e))try{t=JSON.parse(e)}catch(e){return}"text"==this.valueType&&(t=this.jsonIndent?JSON.stringify(t,null,this.jsonIndent):JSON.stringify(t)),this.$notify("change",t)}}};Ti.Preload("ti/com/ti/text/json/ti-text-json.mjs",e)}(),Ti.Preload("ti/com/ti/text/json/tree/item/json-tree-item.html",'<div class="json-value"\n  :class="TopClass"\n  v-ti-activable>\n  \x3c!--\n  //  - Label   : Readonly\n  --\x3e\n  <span v-if="isLabel"\n    class="as-editing as-label">{{theLabelDisplayText}}</span>\n  \x3c!--\n  //  - Boolean : Editable boolean value\n  --\x3e\n  <ti-toggle v-else-if="\'Boolean\' == valueType"\n    class="as-editing"\n    :value="value"\n    @change="$notify(\'change\', $event)"/>\n  \x3c!--\n  //  - Integer : Editable integer value\n  //  - Float   : Editable float value\n  //  - String  : Editable string value\n  //  - Nil     : Edtiable any value\n  --\x3e\n  <ti-label v-else\n    class="as-editing is-nowrap ti-fill-parent"\n    :value="value"\n    :class-name="theValueClassName"\n    :format="theValueFormat"\n    :editable="true"\n    @change="$notify(\'change\', $event)"/>\n  \x3c!--\n    Action Menu\n  --\x3e\n  <ti-actionbar\n    v-if="showActions"\n      class="as-actions"\n      :items="theActionMenuData"\n      :status="theActionMenuStatus"/>\n</div>'),function(){var e={data:function(){return{}},props:{value:null,valueType:{type:String,default:"Nil"},valuePath:{type:[String,Array],default:function(){return[]}},showActions:{type:Boolean,default:!1}},computed:{TopClass:function(){return Ti.Css.mergeClassName({"is-self-actived":this.isSelfActived,"is-actived":this.isActived})},isLabel:function(){return/^(Array|Object)$/.test(this.valueType)},isTop:function(){return 0==this.theValuePath.length},theLabelDisplayText:function(){return"Array"==this.valueType?"[..]":"Object"==this.valueType?"{..}":"???"},theValuePath:function(){return _.isArray(this.valuePath)?this.valuePath:_.isString(this.valuePath)?_.without(this.valuePath.split(/[\/.]/g),""):[]},theValueClassName:function(){return _.kebabCase("is".concat(this.valueType))},theValueFormat:function(){if("String"==this.valueType)return function(e){return e?'"'.concat(e,'"'):'""'}},theActionMenuData:function(){var e=this,t=[{name:"jvTypeArray",text:"i18n:json-Array",type:"action",altDisplay:{icon:"zmdi-check",capture:!1},action:function(){e.$notify("change",{jsonMutate:"ChangeValueType",args:"Array"})}},{name:"jvTypeObject",text:"i18n:json-Object",type:"action",altDisplay:{icon:"zmdi-check",capture:!1},action:function(){e.$notify("change",{jsonMutate:"ChangeValueType",args:"Object"})}}],n=[{name:"jv-add",type:"action",icon:"zmdi-plus",action:function(){e.$notify("change",{jsonMutate:"Add"})}}];return this.isTop||(n.push({type:"line"}),n.push({name:"jv-remove",type:"action",icon:"zmdi-delete",action:function(){e.$notify("change",{jsonMutate:"Remove"})}}),t.push({type:"line"}),t.push({name:"jvTypeBoolean",text:"i18n:json-Boolean",type:"action",altDisplay:{icon:"zmdi-check",capture:!1},action:function(){e.$notify("change",{jsonMutate:"ChangeValueType",args:"Boolean"})}}),t.push({name:"jvTypeNumber",text:"i18n:json-Number",type:"action",altDisplay:{icon:"zmdi-check",capture:!1},action:function(){e.$notify("change",{jsonMutate:"ChangeValueType",args:"Number"})}}),t.push({name:"jvTypeString",text:"i18n:json-String",type:"action",altDisplay:{icon:"zmdi-check",capture:!1},action:function(){e.$notify("change",{jsonMutate:"ChangeValueType",args:"String"})}}),t.push({name:"jvTypeNil",text:"i18n:json-Nil",type:"action",altDisplay:{icon:"zmdi-check",capture:!1},action:function(){e.$notify("change",{jsonMutate:"ChangeValueType",args:"Nil"})}})),n.push({type:"line"}),n.push({key:"jv-types",type:"group",icon:"zmdi-more",items:t}),n},theActionMenuStatus:function(){return{jvTypeBoolean:"Boolean"==this.valueType,jvTypeInteger:"Integer"==this.valueType,jvTypeFloat:"Float"==this.valueType,jvTypeNumber:"Number"==this.valueType,jvTypeString:"String"==this.valueType,jvTypeArray:"Array"==this.valueType,jvTypeObject:"Object"==this.valueType,jvTypeNil:"Nil"==this.valueType}}},methods:{},watch:{},mounted:function(){}};Ti.Preload("ti/com/ti/text/json/tree/item/json-tree-item.mjs",e)}(),Ti.Preload("ti/com/ti/text/json/tree/item/_com.json",{name:"ti-text-json-tree-item",globally:!0,template:"./json-tree-item.html",mixins:["./json-tree-item.mjs"]}),Ti.Preload("ti/com/ti/text/json/tree/ti-text-json-tree.html",'<ti-tree class="ti-text-json-tree"\n  title="i18n:name"\n  :main-width="mainWidth"\n  :class="className"\n  :border="border"\n  :keep-open-by="keepOpenBy"\n  :multi="true"\n  :data="myTreeRoot"\n  :display="TreeDisplay"\n  :auto-open="autoOpen"\n  :current-id="myTreeCurrentPathId"\n  :default-open-depth="2"\n  :fields="TreeFields"\n  @select\n  @node:item:change="OnNodeItemChange"\n  @opened-status:changed="OnOpenedStatusChanged"/>'),function(){var e={data:function(){return{myTreeRoot:[],myTreeCurrentPathId:null,myTreeOpenedStatus:{}}},props:{value:null,mainWidth:{type:[String,Number],default:.372},border:{type:String,default:"cell",validator:function(e){return/^(row|column|cell|none)$/.test(e)}},keepOpenBy:{type:String,default:null},autoOpen:{type:Boolean,default:!1},showRoot:{type:Boolean,default:!0},editing:{type:Object,default:function(){return{}}}},computed:{TreeDisplay:function(){return{key:"name",comType:"ti-label",comConf:function(e){return{className:_.kebabCase("is-".concat(e.nameType)),editable:"Key"==e.nameType,format:{Index:"[${val}]",Label:"i18n:json-${val}"}[e.nameType]}}}},TreeFields:function(){return[{title:"i18n:value",width:.618,display:{key:"value",ignoreNil:!1,comType:"ti-text-json-tree-item",comConf:{valueType:"${valueType}",valuePath:"${=rowId}",showActions:"${=isCurrent}"}}}]}},methods:{evalTreeData:function(){var e=[];this.joinTreeTableRow(e,this.value),this.myTreeRoot=_.first(e)},getJsValueType:function(e){return Ti.Util.isNil(e)?"Nil":_.isArray(e)?"Array":_.isNumber(e)?"Number":_.upperFirst(_typeof(e))},joinTreeTableRow:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,r=this.getJsValueType(i);if(_.isUndefined(a)?(a=r,e="Label"):e=_.isNumber(a)?"Index":"Key",_.isUndefined(i)?n.push({nameType:e,valueType:r,name:a,value:void 0}):_.isNull(i)&&n.push({nameType:e,valueType:r,name:a,value:null}),_.isArray(i)){for(var o={nameType:e,valueType:"Array",name:a,value:i,children:[]},s=0;s<i.length;s++){var c=i[s];this.joinTreeTableRow(o.children,c,s)}n.push(o)}else if(_.isPlainObject(i)){var l={nameType:e,valueType:"Object",name:a,value:i,children:[]};_.forEach(i,function(e,n){t.joinTreeTableRow(l.children,e,n)}),n.push(l)}else _.isBoolean(i)?n.push({nameType:e,valueType:r,name:a,value:!!i}):_.isNumber(i)?n.push({nameType:e,valueType:r,name:a,value:1*i}):_.isString(i)&&n.push({nameType:e,valueType:r,name:a,value:i+""})},doAdd:function(){var e=arguments,t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.length>0&&void 0!==e[0]?e[0]:{},a=e.length>1&&void 0!==e[1]?e[1]:[],r=Ti.Trees.getByPath(t.myTreeRoot,a),o=_.isEmpty(a)?i:_.get(i,a),s=t.myTreeOpenedStatus[a.join("/")],r){n.next=7;break}return n.abrupt("return");case 7:if(!s||!_.isArray(o)){n.next=11;break}o.push(null),n.next=39;break;case 11:if(!s||!_.isPlainObject(o)){n.next=20;break}return n.next=14,Ti.Prompt("i18n:json-new-key");case 14:if(c=n.sent,!Ti.Util.isNil(c)){n.next=17;break}return n.abrupt("return");case 17:o[c]=null,n.next=39;break;case 20:if(!(a.length>0)){n.next=39;break}if(l=a.slice(0,a.length-1),u=_.isEmpty(l)?i:_.get(i,l),d=_.last(a),!_.isArray(u)){n.next=29;break}m=u,Ti.Util.insertToArray(u,d+1,null),n.next=36;break;case 29:if(!_.isPlainObject(u)){n.next=36;break}return n.next=32,Ti.Prompt("i18n:json-new-key");case 32:if(h=n.sent,!Ti.Util.isNil(h)){n.next=35;break}return n.abrupt("return");case 35:m=Ti.Util.appendToObject(u,d,_defineProperty({},h,null));case 36:if(0!=l.length){n.next=38;break}return n.abrupt("return",m);case 38:_.set(i,l,m);case 39:return n.abrupt("return",i);case 40:case"end":return n.stop()}},n)}))()},doRemove:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!_.isEmpty(n)){var i,a=Ti.Trees.getByPath(this.myTreeRoot,n),r=Ti.Trees.nextCandidate(a),o=n.slice(0,n.length-1),s=_.isEmpty(o)?t:_.get(t,o),c=_.last(n);if(_.isArray(s)?(i=[],_.forEach(s,function(e,t){t!=c&&i.push(e)})):_.isPlainObject(s)&&(i={},_.forEach(s,function(e,t){t!=c&&(i[t]=e)})),r&&r.node){var l=_.concat(r.path,r.node.name).join("/");this.$nextTick(function(){e.myTreeCurrentPathId=l})}return 0==o.length?i:(_.set(t,o,i),t)}},doChangeValueType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=_.isEmpty(t),a=i?e:_.get(e,t),r={Boolean:function(e){return!!e},Number:function(e){var t=1*e;return isNaN(t)?-1:t},Integer:function(e){var t=parseInt(e);return isNaN(t)?-1:t},Float:function(e){var t=1*e;return isNaN(t)?-1:t},String:function(e){return _.isArray(e)||_.isObject(e)?JSON.stringify(e):e+""},Array:function(e){return _.isArray(e)?void 0:Ti.Util.isNil(e)?[]:[e]},Object:function(e){if(_.isArray(e)){var t=_.fromPairs(e),n={};return _.forEach(t,function(e,t){Ti.Util.isNil(t)||_.isUndefined(e)||(n[t]=e)}),_.isEmpty(n)&&!_.isEmpty(e)&&Ti.Util.merge(n,e),n}if(!_.isPlainObject(e))return _.isString(e)?Ti.Types.safeParseJson(e,{value:e}):{value:e}},Nil:function(e){return null}}[n];if(_.isFunction(r)){var o=r(a);if(_.isUndefined(o))return;return i?o:(_.set(e,t,o),e)}},OnNodeItemChange:function(){var e=arguments,t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.length>0&&void 0!==e[0]?e[0]:{},a=i.name,r=i.value,o=i.data,s=i.node,c=i.nodeId,s.id){n.next=3;break}return n.abrupt("return");case 3:if(l=_.cloneDeep(t.value),u=s.path,!r||!r.jsonMutate){n.next=14;break}return d={Add:t.doAdd,Remove:t.doRemove,ChangeValueType:t.doChangeValueType}[r.jsonMutate],n.next=9,Ti.DoInvoke(d,_.concat([l,u],r.args),t);case 9:if(l=n.sent,!_.isUndefined(l)){n.next=12;break}return n.abrupt("return");case 12:n.next=15;break;case 14:"name"==a?l=Ti.Util.setKey(l,u,r):"value"==a&&(m={Integer:function(e){var t=parseInt(e);return isNaN(t)?e:t},Float:function(e){var t=1*e;return isNaN(t)?e:t},Number:function(e){var t=1*e;return isNaN(t)?e:t},Nil:function(e){return Ti.S.toJsValue(e,{autoDate:!1})}}[o.valueType],h=_.isFunction(m)?m(r):r,_.set(l,u,h));case 15:t.$notify("change",l);case 16:case"end":return n.stop()}},n)}))()},OnOpenedStatusChanged:function(e){this.myTreeOpenedStatus=e}},watch:{value:function(){this.evalTreeData()}},mounted:function(){this.evalTreeData()}};Ti.Preload("ti/com/ti/text/json/tree/ti-text-json-tree.mjs",e)}(),Ti.Preload("ti/com/ti/text/json/tree/_com.json",{name:"ti-text-json-tree",globally:!0,i18n:"@i18n:ti-text-json",template:"./ti-text-json-tree.html",mixins:["./ti-text-json-tree.mjs"],components:["@com:ti/tree","@com:ti/text/json/tree/item"]}),Ti.Preload("ti/com/ti/text/json/_com.json",{name:"ti-text-json",globally:!0,i18n:"@i18n:ti-text-json",template:"./ti-text-json.html",mixins:["./ti-text-json.mjs"],components:["@com:ti/gui","@com:ti/text/raw","@com:ti/toggle","@com:ti/text/json/tree"]}),Ti.Preload("ti/com/ti/text/markdown/preview/markdown-preview.html",'<div class="ti-markdown-preview"\n  :class="TopClass">\n  <article \n    :class="ThemeClass"\n    v-html="myHtml"></article>\n  \x3c!--pre>{{myHtml}}</pre--\x3e\n</div>'),function(){var e={data:function(){return{myHtml:null,myTheme:null}},props:{previewMediaSrc:{type:[String,Function],default:void 0},value:{type:String,default:""},placeholder:{type:String,default:"i18n:blank"},theme:{type:String,default:"nice"}},computed:{TopClass:function(){return this.getTopClass()},ThemeClass:function(){if(this.myTheme)return"ti-markdown-theme-".concat(this.myTheme)},ThePreviewMediaSrc:function(){var e=this,t=_.identity;return _.isString(this.previewMediaSrc)?t=function(t){return Ti.S.renderBy(e.previewMediaSrc,{src:t})}:_.isFunction(this.previewMediaSrc)&&(t=this.previewMediaSrc),function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!/^(https?:)(\/\/)/.test(n)){e.next=2;break}return e.abrupt("return",n);case 2:return e.abrupt("return",t(n));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}},methods:{renderMarkdown:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(Ti.Util.isBlank(e.value)){t.next=8;break}return n=Cheap.parseMarkdown(e.value),t.next=4,n.toBodyInnerHtml({mediaSrc:e.ThePreviewMediaSrc});case 4:e.myHtml=t.sent,e.myTheme=n.getMeta("theme",e.theme),t.next=10;break;case 8:e.myHtml=Ti.I18n.text(e.placeholder),e.myTheme=e.theme;case 10:case"end":return t.stop()}},t)}))()}},watch:{value:{handler:"renderMarkdown",immediate:!0}}};Ti.Preload("ti/com/ti/text/markdown/preview/markdown-preview.mjs",e)}(),Ti.Preload("ti/com/ti/text/markdown/preview/_com.json",{name:"ti-text-markdown-preview",globally:!0,template:"./markdown-preview.html",mixins:["./markdown-preview.mjs"]}),Ti.Preload("ti/com/ti/text/markdown/richeditor/ti-markdown-richeditor-delegate-methods.mjs",{getSelection:function(){var e;return(e=this.$editor).getSelection.apply(e,arguments)},setSelection:function(){var e;return(e=this.$editor).setSelection.apply(e,arguments)},updateContents:function(){var e;return(e=this.$editor).updateContents.apply(e,arguments)}}),function(){var e={mediaBase:{type:String,default:void 0},value:{type:String,default:""},actions:{type:Object,default:function(){return{}}},markdownMediaSrc:{type:[String,Function],default:void 0},previewMediaSrc:{type:[String,Function],default:void 0},placeholder:{type:String,default:"i18n:blank"},theme:{type:String,default:"nice"},toolbar:{type:Array,default:function(){return["Heading","|","B","I","|","Link","Code","|","BlockQuote","CodeBlock","|","Outdent","Indent","|","UL","OL"]}},toolbarAlign:{type:String,default:"left",validator:function(e){return/^(left|right|center)$/.test(e)}},blankAs:{type:Object,default:function(){return{icon:"fas-coffee",text:null}}}};Ti.Preload("ti/com/ti/text/markdown/richeditor/ti-markdown-richeditor-props.mjs",e)}(),Ti.Preload("ti/com/ti/text/markdown/richeditor/ti-markdown-richeditor.html",'<div class="ti-markdown-richeditor"\n  :class="TopClass">\n  \x3c!--\n    Toolbar\n  --\x3e\n  <ti-actionbar \n    v-if="hasToolbar"\n      class="as-toolbar"\n      :items="ToolbarMenuData" \n      :align="toolbarAlign"\n      :status="myToolbarStatus"\n      @change="OnToolbarChange"/>\n  \x3c!--\n    Stage\n  --\x3e\n  <div ref="stage"\n    class="as-stage"\n    spellcheck="false"\n    :class="ThemeClass"></div>\n  \x3c!--\n    Cover when nil\n  --\x3e\n  <ti-loading\n    v-if="isNilContent"\n      class="as-nil-mask as-big-mask"\n      v-bind="blankAs"/>\n</div>'),function(){var e={"|":{type:"line"},B:{icon:"fas-bold",notify:"bold",highlight:"bold",disabled:"italic"},I:{icon:"fas-italic",notify:"italic",highlight:"italic",disabled:"bold"},Link:{icon:"fas-link",notify:"link",highlight:"link"},Code:{icon:"zmdi-code",notify:"code",highlight:"code"},Heading:{type:"group",icon:"fas-hashtag",text:"i18n:wordp-heading",items:[{text:"i18n:wordp-h1",notify:"header",highlight:"h1",value:1},{text:"i18n:wordp-h2",notify:"header",highlight:"h2",value:2},{text:"i18n:wordp-h3",notify:"header",highlight:"h3",value:3},{text:"i18n:wordp-h4",notify:"header",highlight:"h4",value:4},{text:"i18n:wordp-h5",notify:"header",highlight:"h5",value:5},{text:"i18n:wordp-h6",notify:"header",highlight:"h6",value:6},{text:"i18n:wordp-h0",notify:"header",highlight:"h0",value:0}]},BlockQuote:{icon:"fas-quote-right",notify:"blockquote",highlight:"blockquote"},CodeBlock:{icon:"fas-code",notify:"code_block",highlight:"code-block"},Indent:{icon:"fas-indent",notify:"indent"},Outdent:{icon:"fas-outdent",notify:"outdent"},UL:{icon:"fas-list-ul",notify:"list",value:"bullet",highlight:{list:"bullet"}},OL:{icon:"fas-list-ol",notify:"list",value:"ordered",highlight:{list:"ordered"}}},t={data:function(){return{myMeta:{},syncForbid:0,myToolbarStatus:{}}},computed:{TopClass:function(){return this.getTopClass({"nil-content":this.isNilContent,"has-content":!this.isNilContent})},ThemeClass:function(){if(this.ThemeName)return"ti-markdown-theme-".concat(this.ThemeName)},ThemeName:function(){return _.get(this.myMeta,"theme")||this.theme},hasToolbar:function(){return!_.isEmpty(this.ToolbarMenuData)},isNilContent:function(){return Ti.Util.isNil(this.value)},ToolbarActions:function(){return _.merge({},e,this.actions)},ToolbarMenuData:function(){var e=this,t=[];return _.forEach(this.toolbar,function(n){var i=_.get(e.ToolbarActions,n);i&&t.push(i)}),t},TheMarkdownMediaSrc:function(){return _.isFunction(this.markdownMediaSrc)?this.markdownMediaSrc:_.isString(this.markdownMediaSrc)?Ti.Util.genInvoking(this.markdownMediaSrc,{partial:"right"}):void 0},ThePreviewMediaSrc:function(){return _.isFunction(this.previewMediaSrc)?this.previewMediaSrc:_.isString(this.previewMediaSrc)?Ti.Util.genInvoking(this.previewMediaSrc,{partial:"right"}):void 0}},methods:{OnToolbarChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.value,i={bold:function(e,t){e.format("bold",t)},italic:function(e,t){e.format("italic",t)},code:function(e,t){e.format("code",t)},header:function(e,t){e.format("header",t)},blockquote:function(e,t){e.format("blockquote",t)},code_block:function(e,t){e.format("code-block",t)},link:function(e,t){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o,s,c,l,u,d,m,h,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.getSelection()){t.next=5;break}return t.next=4,Ti.Toast.Open("i18n:wordp-nil-sel","warn");case 4:return t.abrupt("return",t.sent);case 5:return i=e.getFormat(n),(a=i.link)?(o=e.getLeaf(n.index),s=_slicedToArray(o,2),c=s[0],l=s[1],r=c.text,u=n.index-l,d=r.length,n={index:u,length:d}):r=e.getText(n),m=!1,/^\+/.test(r)&&(r=r.substring(1),m=!0),t.next=11,Ti.App.Open({icon:"fas-link",title:"i18n:wordp-link",height:"3.2rem",result:{text:r,newtab:m,link:a},model:{prop:"data",event:"change"},comType:"TiForm",comConf:{fields:[{title:"i18n:link-href",name:"link",comType:"ti-input"},{title:"i18n:link-text",name:"text",comType:"ti-input"},{title:"i18n:open-newtab",name:"newtab",type:"Boolean",comType:"ti-toggle"}]}});case 11:if(h=t.sent){t.next=14;break}return t.abrupt("return");case 14:p=h.text,h.link&&h.newtab&&(p="+"+p),e.updateContents({ops:[{retain:n.index},{delete:n.length},{insert:p,attributes:{link:h.link,newtab:!0}}]});case 17:case"end":return t.stop()}},t)}))()},indent:function(e){e.format("indent","+1")},outdent:function(e){e.format("indent","-1")},list:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bullet";e.format("list",t)}}[t];_.isFunction(i)&&(i(this.$editor,n),this.quillUpdateFormat())},renderMarkdown:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(Ti.Util.isBlank(e.value)){t.next=10;break}return n=Cheap.parseMarkdown(e.value),window.MdDoc=n,e.myMeta=_.cloneDeep(n.getMeta()),t.next=6,n.toDelta({mediaSrc:e.ThePreviewMediaSrc});case 6:i=t.sent,e.$editor.setContents(i),t.next=12;break;case 10:e.myMeta={},e.$editor.setContents([]);case 12:case"end":return t.stop()}},t)}))()},syncMarkdown:function(){this.syncForbid>0?this.syncForbid--:this.renderMarkdown()},quillChanged:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.isNilContent){n.next=2;break}return n.abrupt("return");case 2:return(i=Cheap.parseDelta(e)).setDefaultMeta(t.myMeta),t.myMeta=i.getMeta(),n.next=7,i.toMarkdown({mediaSrc:t.TheMarkdownMediaSrc});case 7:(a=n.sent)!=t.value&&(t.syncForbid=1,t.$notify("change",a));case 9:case"end":return n.stop()}},n)}))()},quillSelectionChanged:function(e){if(e){var t=[e.index];e.length>0&&t.push(e.length),this.$notify("indicate",t.join(":")),this.quillUpdateFormat(e)}},quillUpdateFormat:function(e){var t=this.$editor.getFormat(e);t.header?t["h".concat(t.header)]=!0:t.h0=!0,_.isEqual(this.myToolbarStatus,t)||(this.myToolbarStatus=t)},installQuillEditor:function(){var e=this;this.$editor||(!function(e){if(!e.__has_been_reset){var t=e.import("formats/indent");t.keyName="li-indent",t.whitelist=[1,2,3,4,5,6],e.__has_been_reset=!0}}(Quill),this.$editor=new Quill(this.$refs.stage,{modules:{syntax:!1},bounds:this.$refs.stage,placeholder:Ti.I18n.text(this.placeholder)}),this.debounceQuillChanged=_.debounce(function(t,n){var i=n.compose(t);e.quillChanged(i)},1e3),this.$editor.on("text-change",function(t,n,i){e.isNilContent||e.debounceQuillChanged(t,n)}),this.$editor.on("selection-change",function(t,n,i){e.quillSelectionChanged(t)}))}},watch:{value:{handler:"syncMarkdown"},isNilContent:function(e,t){e&&(this.syncForbid=0)}},mounted:function(){this.syncForbid=0,this.installQuillEditor(),this.syncMarkdown()},beforeDestroy:function(){this.syncForbid=0}};Ti.Preload("ti/com/ti/text/markdown/richeditor/ti-markdown-richeditor.mjs",t)}(),Ti.Preload("ti/com/ti/text/markdown/richeditor/_com.json",{name:"ti-text-markdown-richeditor",globally:!0,i18n:"@i18n:ti-text-editor",css:"@deps:highlight/default.css",template:"./ti-markdown-richeditor.html",props:"./ti-markdown-richeditor-props.mjs",methods:"./ti-markdown-richeditor-delegate-methods.mjs",mixins:["./ti-markdown-richeditor.mjs"],components:["@com:wn/adaptlist"],deps:["@deps:quill/quill.js","@deps:highlight/highlight.js"]}),Ti.Preload("ti/com/ti/text/raw/ti-text-raw.html",'<div class="ti-text-raw"\n  :class="TopClass"\n  v-ti-activable>\n  \x3c!--\n    Header\n  --\x3e\n  <div\n    v-if="isShowHead"\n      class="as-head">\n      <ti-icon :value="icon"/>\n      <span>{{title}}</span>\n  </div>\n  \x3c!--\n    Main\n  --\x3e\n  <div class="as-main">\n    <textarea ref="text" \n      spellcheck="false"\n      :placeholder="placeholder | i18n"\n      :value="myContent"\n      @compositionstart="OnInputCompositionStart"\n      @compositionend="OnInputCompositionEnd"\n      @input="OnInputing"\n      @change="OnTextChanged"></textarea>\n  </div>\n</div>'),function(){var e={data:function(){return{myContent:null,inputCompositionstart:!1}},props:{icon:{type:[String,Object],default:void 0},title:{type:String,default:void 0},trimed:{type:Boolean,default:!1},value:{type:String,default:""},placeholder:{type:String,default:"i18n:blank"},status:{type:Object,default:function(){return{}}}},computed:{TopClass:function(){return this.getTopClass({"show-title":this.showTitle,"hide-title":!this.showTitle,"is-changed":_.get(this.status,"changed")})},isShowHead:function(){return this.title||this.icon},hasContent:function(){return!Ti.Util.isNil(this.value)}},methods:{OnInputCompositionStart:function(){this.inputCompositionstart=!0},OnInputCompositionEnd:function(){this.inputCompositionstart=!1,this.OnTextChanged()},OnInputing:function(e){this.inputCompositionstart||this.OnTextChanged()},OnTextChanged:function(){var e=_.get(this.$refs.text,"value");this.trimed&&(e=_.trim(e)),this.myContent=e},syncMyContent:function(){this.myContent=this.value},checkMyContent:function(){this.myContent!=this.value&&this.$notify("change",this.myContent)},__ti_shortcut:function(e){if("CTRL+ENTER"==e)return this.myContent!=this.value&&this.$notify("change",this.myContent),{prevent:!0}}},watch:{value:"syncMyContent",myContent:function(){this.debCheckChange()}},created:function(){var e=this;this.debCheckChange=_.debounce(function(){e.checkMyContent()},500)},mounted:function(){this.syncMyContent()}};Ti.Preload("ti/com/ti/text/raw/ti-text-raw.mjs",e)}(),Ti.Preload("ti/com/ti/text/raw/_com.json",{name:"ti-text-raw",globally:!0,template:"./ti-text-raw.html",mixins:["./ti-text-raw.mjs"]}),Ti.Preload("ti/com/ti/time/ti-time.html",'<div class="ti-col-data as-time" \n  :class="topClass" \n  :style="topStyle">\n  <ti-list v-for="list in theListGroup"\n    :key="list.key"\n    :data="list.data"\n    :display="\'text\'"\n    :current-id="list.currentId"\n    :cancelable="false"\n    @select="onListSelected(list.key, $event)"/>\n</div>'),function(){var e={inheritAttrs:!1,props:{value:{type:[String,Number,Date,Ti.Types.Time],default:null},valueUnit:{type:String,default:"s",validator:function(e){return/^(ms|s|min|hr)$/.test(e)}},mode:{type:String,default:"auto",validator:function(e){return/^(sec|min|auto)$/.test(e)}},width:{type:[Number,String],default:null},height:{type:[Number,String],default:200}},computed:{topClass:function(){return this.getTopClass()},topStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})},theTime:function(){return Ti.Types.toTime(this.value||0,{unit:this.valueUnit})},theListGroup:function(){var e=[this.createList("hours",0,24,this.theTime.hours),this.createList("minutes",0,60,this.theTime.minutes)];return/^(auto|sec)$/.test(this.mode)&&e.push(this.createList("seconds",0,60,this.theTime.seconds)),e}},methods:{createList:function(e,t,n){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a={key:e,currentId:"R-".concat(i),data:[]},r=t;r<n;r++)a.data.push({id:"R-".concat(r),value:r,text:_.padStart(r,2,"0")});return a},onListSelected:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).current,n=this.theTime.clone();n[e]=_.get(t,"value")||0,this.$notify("change",n)}}};Ti.Preload("ti/com/ti/time/ti-time.mjs",e)}(),Ti.Preload("ti/com/ti/time/_com.json",{name:"ti-time",globally:!0,template:"./ti-time.html",mixins:["./ti-time.mjs"],components:["@com:ti/list"]}),Ti.Preload("ti/com/ti/toggle/ti-toggle.html",'<div class="ti-toggle"\n  :class="topClass">\n  <aside @click.left="onClick"><b></b></aside>\n</div>'),function(){var e={data:function(){return{isOn:!1}},props:{value:!1,readonly:!1,options:{type:Array,default:function(){return[!1,!0]}}},computed:{topClass:function(){return Ti.Css.mergeClassName({"is-off":!this.isOn,"is-on":this.isOn},this.className)}},methods:{onClick:function(){if(!this.readonly){var e=this.isOn?0:1;this.$notify("change",this.options[e])}}},watch:{value:function(){this.isOn=!!this.value}},mounted:function(){this.isOn=!!this.value}};Ti.Preload("ti/com/ti/toggle/ti-toggle.mjs",e)}(),Ti.Preload("ti/com/ti/toggle/_com.json",{name:"ti-toggle",globally:!0,template:"./ti-toggle.html",mixins:["./ti-toggle.mjs"]}),function(){var e={options:{type:[String,Array,Function,Ti.Dict],default:function(){return[]}},valueBy:{type:[String,Function],default:void 0},textBy:{type:[String,Function],default:void 0},iconeBy:{type:[String,Function],default:void 0},value:void 0,valueType:{type:String,default:"id",validator:function(e){return/^(id|obj|item)$/.test(e)}},idBy:{type:String,default:"id"},mapping:{type:Object,default:void 0},canComType:{type:String,default:void 0},canComConf:{type:Object,default:void 0},selComType:{type:String,default:void 0},selComConf:{type:Object,default:void 0},filter:{type:Boolean,default:!0},fltComType:{type:String,default:"ti-input"},fltComConf:{type:Object,default:void 0},display:{type:[Object,String,Array],default:void 0},assignButtons:{type:Object,default:function(){return{add:"fas-angle-double-right",remove:"fas-angle-double-left"}}},canTitle:{type:String,default:"i18n:candidate"},selTitle:{type:String,default:"i18n:checked"},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null}};Ti.Preload("ti/com/ti/transfer/ti-transfer-props.mjs",e)}(),Ti.Preload("ti/com/ti/transfer/ti-transfer.html",'<div class="ti-transfer"\n  :class="TopClass"\n  :style="TopStyle">\n  \x3c!--=========================================\n    Left: Candidates\n  --\x3e\n  <div class="as-box as-can-list">\n    \x3c!--\n      Head\n    --\x3e\n    <div class="as-box-head">\n      <div class="as-list-checker"\n        @click.left="OnClickHeadChecker(can)">\n        <ti-icon :value="GetHeadCheckerIcon(can)"/>\n      </div>\n      \x3c!--Title--\x3e\n      <div class="as-title">{{canTitle|i18n}}</div>\n      \x3c!--Filter--\x3e\n      <div v-if="filter"\n        class="as-filter">\n          <component \n            :is="fltComType"\n            v-bind="FilterComConf"\n            :value="myFilterValue"\n            @change="OnFilterChanged"\n            /></div>\n    </div>\n    \x3c!--\n      component\n    --\x3e\n    <div class="as-box-list">\n      <component :is="CanListComType"\n        class="as-box-main ti-fill-parent"\n        v-bind="CanListComConf"\n        @select="OnCanListSelected"/>\n    </div>\n    \x3c!--\n      Foot\n    --\x3e\n    <div class="as-box-foot">\n      <span>{{\'total-count\'|i18n({nb:can.data.length})}}</span>\n    </div>\n  </div>\n  \x3c!--=========================================\n    Buttons\n  --\x3e\n  <div class="as-buttons">\n    \x3c!--Add--\x3e\n    <div class="as-btn is-add"\n      @click.left="canListToSel">\n      <ti-icon :value="assignButtons.add"/>\n    </div>\n    \x3c!--Remove--\x3e\n    <div class="as-btn is-remove"\n      @click.left="selListToCan">\n      <ti-icon :value="assignButtons.remove"/>\n    </div>\n  </div>\n  \x3c!--=========================================\n    Right: Checked\n  --\x3e\n  <div class="as-box as-sel-list">\n    \x3c!--\n      Head\n    --\x3e\n    <div class="as-box-head">\n      <div class="as-list-checker"\n        @click.left="OnClickHeadChecker(sel)">\n        <ti-icon :value="GetHeadCheckerIcon(sel)"/>\n      </div>\n      <div class="as-title">{{selTitle|i18n}}</div>\n      <div class="as-actions">\n        <ti-actionbar v-bind="SelActions"/>\n      </div>\n    </div>\n    \x3c!--\n      component\n    --\x3e\n    <div class="as-box-list">\n      <component :is="SelListComType"\n        class="as-box-main ti-cover-parent"\n        v-bind="SelListComConf"\n        @select="OnSelListSelected"/>\n    </div>\n    \x3c!--\n      Foot\n    --\x3e\n    <div class="as-box-foot">\n      <span>{{\'total-count\'|i18n({nb:sel.data.length})}}</span>\n    </div>\n  </div>\n</div>'),function(){var e={data:function(){return{myFilterValue:null,myOptionsData:[],can:{data:[],checkedIds:[]},sel:{data:[],checkedIds:[]},selIdMap:{},loading:!0}},computed:{TopClass:function(){return this.getTopClass()},TopStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})},Values:function(){return Ti.S.toArray(this.value)},CanListComType:function(){return this.canComType||"ti-list"},SelListComType:function(){return this.selComType||"ti-list"},CanListComConf:function(){return this.genComConf(this.canComConf,this.can)},SelListComConf:function(){return this.genComConf(this.selComConf,this.sel)},SelActions:function(){var e=this;return{items:[{name:"moveUp",type:"action",icon:"zmdi-long-arrow-up",action:function(){e.selMoveUp()}},{name:"moveDown",type:"action",icon:"zmdi-long-arrow-down",action:function(){e.selMoveDown()}}]}},FilterComConf:function(){return _.assign({trimed:!0,width:"100%",prefixIcon:this.loading?"fas-spinner fa-spin":"zmdi-filter-list",placeholder:"i18n:filter",hover:["prefixIcon","suffixText","suffixIcon"],loading:this.loading},this.fltComConf)},GetValueBy:function(){var e=this;return function(t){return e.Dict.getValue(t)}},ReverMapping:function(){if(this.mapping){var e={};return _.forEach(this.mapping,function(t,n){e[t]=n}),e}},Dict:function(){var e=this,t=function(t){var n=t.loading;e.loading=n};if(this.options instanceof Ti.Dict){var n=this.options.duplicate();return n.addHooks(t),n}if(_.isString(this.options)){var i=Ti.DictFactory.DictReferName(this.options);if(i)return Ti.DictFactory.CheckDict(i,t)}return Ti.DictFactory.CreateDict({data:this.options,getValue:Ti.Util.genGetter(this.valueBy||"value"),getText:Ti.Util.genGetter(this.textBy||"text|name"),getIcon:Ti.Util.genGetter(this.textBy||"icon")},{hooks:t})}},methods:{OnCanListSelected:function(e){var t=e.checkedIds;this.can.checkedIds=Ti.Util.truthyKeys(t)},OnSelListSelected:function(e){var t=e.checkedIds;this.sel.checkedIds=Ti.Util.truthyKeys(t)},OnClickHeadChecker:function(e){var t=e.data,n=e.checkedIds;if(t.length==n.length)e.checkedIds=[];else{var i=this.rebuildIdMap(t);e.checkedIds=Ti.Util.truthyKeys(i)}},OnFilterChanged:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("OnFilterChanged",e),t.myFilterValue=e,n.next=4,t.Dict.queryData(e);case 4:t.myOptionsData=n.sent,t.evalShownCanList();case 6:case"end":return n.stop()}},n)}))()},GetHeadCheckerIcon:function(e){var t=e.data,n=e.checkedIds;if(t.length>0){if(t.length==n.length)return"fas-check-square";if(n.length>0)return"fas-minus-square"}return"far-square"},canListToSel:function(){if(!_.isEmpty(this.can.checkedIds)){var e=this.assignToList(this.can,this.sel),t=e.src,n=e.tag;this.can=t,this.sel=n}},selListToCan:function(){if(!_.isEmpty(this.sel.checkedIds)){var e=this.assignToList(this.sel,this.can),t=e.src,n=e.tag;this.can=n,this.sel=t}},selMoveUp:function(){var e=this.evalTheList(this.sel),t=e.remains,n=e.checks,i=e.minIndex,a=(e.maxIndex,e.checkedIds);if(!_.isEmpty(n)&&i>0){var r;(r=Ti.Util).insertToArray.apply(r,[t,i-1].concat(_toConsumableArray(n))),this.sel={data:t,checkedIds:a}}},selMoveDown:function(){var e=this.evalTheList(this.sel),t=e.remains,n=e.checks,i=(e.minIndex,e.maxIndex),a=e.checkedIds;if(!_.isEmpty(n)){var r;i<t.length&&i++,(r=Ti.Util).insertToArray.apply(r,[t,i].concat(_toConsumableArray(n))),this.sel={data:t,checkedIds:a}}},evalTheList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=[],i=[],a=[],r={},o=t.data.length,s=-1;return _.forEach(t.checkedIds,function(e){r[e]=!0}),_.forEach(t.data,function(t,c){var l=e.GetValueBy(t);r[l]?(o=Math.min(c,o),s=Math.max(c,s),a.push(l),i.push(t)):n.push(t)}),{remains:n,checks:i,minIndex:o,maxIndex:s-i.length+1,checkedIds:a}},assignToList:function(e,t){var n=this,i=e.data,a=e.checkedIds,r={};_.forEach(a,function(e){return r[e]=!0});var o=[],s=[];return _.forEach(i,function(e){var t=n.Dict.getValue(e);r[t]?s.push(e):o.push(e)}),_.forEach(t.checkedIds,function(e){return r[e]=!0}),{src:{data:o,checkedIds:[]},tag:{data:_.concat(t.data,s),checkedIds:_.keys(r)}}},genComConf:function(e,t){var n=t.data,i=t.checkedIds;return _.assign({idBy:this.GetValueBy,display:this.display||"text"},e,{data:n,checkedIds:i,multi:!0,checkable:!0,puppetMode:!0,autoCheckCurrent:!1})},evalShownCanList:function(){var e=this,t=[];_.forEach(this.myOptionsData,function(n){var i=e.Dict.getValue(n);e.selIdMap[i]||t.push(n)}),this.can.data=t,this.can.checkedIds=[]},reloadCanList:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Dict.queryData(e.myFilterValue);case 2:e.myOptionsData=t.sent,e.evalShownCanList();case 4:case"end":return t.stop()}},t)}))()},reloadSelList:function(){var e=arguments,t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=e.length>0&&void 0!==e[0]?e[0]:t.Values,a=[],r=_createForOfIteratorHelper(i),n.prev=3,r.s();case 5:if((o=r.n()).done){n.next=14;break}return s=o.value,c=t.evalValue(s),n.next=10,t.Dict.getItem(c);case 10:(l=n.sent)?a.push(l):a.push(c);case 12:n.next=5;break;case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(3),r.e(n.t0);case 19:return n.prev=19,r.f(),n.finish(19);case 22:t.sel={data:a,checkedIds:_.get(t.sel,"checkedIds")||[]};case 23:case"end":return n.stop()}},n,null,[[3,16,19,22]])}))()},rebuildIdMap:function(e){var t=this,n={};return _.forEach(e,function(e){var i=t.Dict.getValue(e);n[i]=!0}),n},rebuildSelIdMap:function(){this.selIdMap=this.rebuildIdMap(this.sel.data)},evalValue:function(e){var t=this;return Ti.Util.isNil(e)?e:{id:function(e){return e},obj:function(e){return t.ReverMapping&&(e=Ti.Util.translate(e,t.ReverMapping)),_.get(e,t.idBy)},item:function(e){return t.ReverMapping&&(e=Ti.Util.translate(e,t.ReverMapping)),_.get(e,"value")}}[this.valueType](e)},genValue:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=_.keys(e.selIdMap),!_.isEmpty(n)){t.next=3;break}return t.abrupt("return",[]);case 3:return t.next=5,{id:function(e){return e},obj:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var i,a,r,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=[],a=_createForOfIteratorHelper(n),t.prev=2,a.s();case 4:if((r=a.n()).done){t.next=13;break}return o=r.value,t.next=8,e.Dict.getItem(o);case 8:(s=t.sent)&&e.mapping&&(s=Ti.Util.translate(s,e.mapping)),i.push(s);case 11:t.next=4;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(2),a.e(t.t0);case 18:return t.prev=18,a.f(),t.finish(18);case 21:return t.abrupt("return",i);case 22:case"end":return t.stop()}},t,null,[[2,15,18,21]])}));return function(e){return t.apply(this,arguments)}}(),item:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var i,a,r,o,s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=[],a=_createForOfIteratorHelper(n),t.prev=2,a.s();case 4:if((r=a.n()).done){t.next=13;break}return o=r.value,t.next=8,e.Dict.getItem(o);case 8:s=t.sent,(c={text:e.Dict.getText(s),value:e.Dict.getValue(s)})&&(e.mapping&&(c=Ti.Util.translate(c,e.mapping)),i.push(c));case 11:t.next=4;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(2),a.e(t.t0);case 18:return t.prev=18,a.f(),t.finish(18);case 21:return t.abrupt("return",i);case 22:case"end":return t.stop()}},t,null,[[2,15,18,21]])}));return function(e){return t.apply(this,arguments)}}()}[e.valueType](n);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},t)}))()}},watch:{value:function(e,t){_.isEqual(e,t)||this.reloadSelList()},options:function(e,t){_.isEqual(e,t)||this.reloadCanList()},"sel.data":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.rebuildSelIdMap(),e.next=3,this.genValue();case 3:t=e.sent,_.isEqual(t,this.Values)||this.$notify("change",t);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},mounted:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reloadSelList();case 2:return e.next=4,this.reloadCanList();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()};Ti.Preload("ti/com/ti/transfer/ti-transfer.mjs",e)}(),Ti.Preload("ti/com/ti/transfer/_com.json",{name:"ti-transfer",globally:!0,template:"./ti-transfer.html",props:"./ti-transfer-props.mjs",mixins:["./ti-transfer.mjs"]}),Ti.Preload("ti/com/ti/tree/ti-tree.html",'<ti-table\n  class="ti-tree"\n  :class="TopClass"\n  id-by="id"\n  icon-by="icon"\n  indent-by="indent"\n  raw-data-by="rawData"\n  :fields="TableFields"\n  :data="myTreeTableData"\n  :changed-id="changedId"\n  :current-id="currentId"\n  :checked-ids="checkedIds"\n  :multi="multi"\n  :checkable="checkable"\n  :selectable="selectable"\n  :cancelable="cancelable"\n  :hoverable="hoverable"\n  :puppet-mode="puppetMode"\n  :width="width"\n  :height="height"\n  :head="TableHead"\n  :border="border"\n  :blank-as="blankAs"\n  :auto-scroll-into-view="autoScrollIntoView"\n  @icon="OnRowIconClick"\n  @open="OnRowOpen"\n  @select="OnRowSelect"\n  @cell:item:change="OnCellItemChange"/>\n  '),function(){var e,t=(e={data:function(){return{myTreeTableData:[],myOpenedNodePaths:{},myCurrentId:null}},props:{nodeClassName:{type:String,default:null},data:{type:[Object,Array],default:null},idBy:{type:[String,Function],default:"id"},nameBy:{type:[String,Function],default:"name"},childrenBy:{type:[String,Function],default:"children"},leafBy:{type:[String,Function],default:"!children"},title:{type:String,default:"i18n:title"},mainWidth:{type:[String,Number],default:"stretch"},display:{type:[String,Object,Array],default:"name"},defaultOpenDepth:{type:Number,default:0},keepOpenBy:{type:String,default:null},keepCurrentBy:{type:String,default:null},changedId:{type:String,default:null},currentId:{type:String,default:null},checkedIds:{type:Array,default:function(){return[]}},openedNodePaths:{type:Object,default:function(){return{}}},multi:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},selectable:{type:Boolean,default:!0},cancelable:{type:Boolean,default:!0},hoverable:{type:Boolean,default:!1},width:{type:[String,Number],default:null},puppetMode:{type:Boolean,default:!1},height:{type:[String,Number],default:null},autoScrollIntoView:{type:Boolean,default:!0},autoOpen:{type:Boolean,default:!1},showRoot:{type:Boolean,default:!0},nodeHandleIcons:{type:Array,default:function(){return["zmdi-chevron-right","zmdi-chevron-down"]}},border:{type:String,default:"column",validator:function(e){return/^(row|column|cell|none)$/.test(e)}},fields:{type:Array,default:function(){return[]}},blankAs:void 0},watch:{},computed:{TopClass:function(){return Ti.Css.mergeClassName({"is-selectable":this.selectable,"is-hoverable":this.hoverable},this.className)},getNodeId:function(){var e=this;return _.isFunction(this.idBy)?function(t){return e.idBy(t)}:function(t){return _.get(t,e.idBy)}},getNodeName:function(){var e=this;return _.isFunction(this.nameBy)?function(t){return e.nameBy(t)}:function(t){return _.get(t,e.nameBy)}},isNodeLeaf:function(){var e=this;if(_.isFunction(this.leafBy))return function(t){return!!e.leafBy(t)};var t=/^(!)?(.+)$/.exec(this.leafBy),n=!!t[1],i=_.trim(t[2]);return function(e){return _.get(e,i)?!n:n}},getNodeChildren:function(){var e=this;return _.isFunction(this.childrenBy)?function(t){return e.childrenBy(t)}:function(t){return _.get(t,e.childrenBy)}},isTable:function(){return _.isArray(this.fields)&&!_.isEmpty(this.fields)},TableHead:function(){return this.isTable?"frozen":"none"},TableFields:function(){var e={title:this.title,width:this.mainWidth,nowrap:!0,display:this.display};return this.isTable?_.concat(e,this.fields):[e]}},methods:{evalTreeTableData:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],!_.isArray(e.data)){t.next=6;break}return t.next=4,e.joinTreeTableRow(n,{},null,e.data);case 4:t.next=9;break;case 6:if(!e.data){t.next=9;break}return t.next=9,e.joinTreeTableRow(n,e.data,null);case 9:e.myTreeTableData=n;case 10:case"end":return t.stop()}},t)}))()},joinTreeTableRow:function(){var e=arguments,t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.length>0&&void 0!==e[0]?e[0]:[],a=e.length>1&&void 0!==e[1]?e[1]:{},r=e.length>2&&void 0!==e[2]?e[2]:[],o=e.length>3?e[3]:void 0,s={},r?(s.name=t.getNodeName(a),s.path=_.concat(r,s.name),s.pathId=s.path.join("/"),s.id=Ti.Util.fallbackNil(t.getNodeId(a),s.pathId),s.indent=s.path.length,s.leaf=t.isNodeLeaf(a),s.opened=Ti.Util.fallback(t.myOpenedNodePaths[s.pathId],s.indent<t.defaultOpenDepth),s.icon=!!s.leaf||t.nodeHandleIcons[s.opened?1:0]):(s.name=t.getNodeName(a)||"$ROOT$",s.path=[],s.pathId="/",s.id=Ti.Util.fallbackNil(t.getNodeId(a),s.pathId),s.indent=0,s.leaf=!1,s.opened=!t.showRoot||Ti.Util.fallback(t.myOpenedNodePaths[s.pathId],s.indent<t.defaultOpenDepth),s.icon=!!s.leaf||t.nodeHandleIcons[s.opened?1:0]),s.rawData=a,t.showRoot?i.push(s):(s.indent--,s.indent>=0&&i.push(s)),!s.opened||s.leaf){n.next=31;break}if(o){n.next=13;break}return n.next=12,t.getNodeChildren(a);case 12:o=n.sent;case 13:if(!_.isArray(o)){n.next=31;break}c=_createForOfIteratorHelper(o),n.prev=15,c.s();case 17:if((l=c.n()).done){n.next=23;break}return u=l.value,n.next=21,t.joinTreeTableRow(i,u,s.path);case 21:n.next=17;break;case 23:n.next=28;break;case 25:n.prev=25,n.t0=n.catch(15),c.e(n.t0);case 28:return n.prev=28,c.f(),n.finish(28);case 31:case"end":return n.stop()}},n,null,[[15,25,28,31]])}))()},findTableRow:function(e){if(!Ti.Util.isNil(e)){var t,n=_createForOfIteratorHelper(this.myTreeTableData);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.id==e)return i}}catch(e){n.e(e)}finally{n.f()}}},OnCellItemChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.value,i=e.rowId,a=this.findTableRow(i);a&&this.$notify("node:item:change",{name:t,value:n,node:a,nodeId:i,data:a.rawData})},OnRowSelect:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.currentId,a=n.checkedIds,r=void 0===a?{}:a,o=[];if(i){var s,c,l=_createForOfIteratorHelper(this.myTreeTableData);try{for(l.s();!(c=l.n()).done;){var u=c.value;u.id==i&&(s=u,e=u.rawData),r[u.id]&&o.push(u.rawData)}}catch(e){l.e(e)}finally{l.f()}s&&this.autoOpen&&this.openRow(s),this.myCurrentId=_.get(s,"id"),t=s}else this.myCurrentId=null;this.keepCurrentBy&&(this.puppetMode||Ti.Storage.session.set(this.keepCurrentBy,this.myCurrentId)),this.$notify("select",{node:t,current:e,selected:o,currentId:i,checkedIds:r})},OnRowIconClick:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).rowId,t=this.findTableRow(e);!t||t.leaf||t.opened?this.closeRow(t):this.openRow(t)},OnRowOpen:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id,t=this.findTableRow(e);!t||t.leaf||t.opened||this.openRow(t)},openRow:function(e){var t=_.isString(e)?this.findTableRow(e):e;!t||t.leaf||t.opened||(this.$set(this.myOpenedNodePaths,t.pathId,!0),this.$notify("opened",t),this.saveNodeOpenStatus())},isOpened:function(e){var t=_.isString(e)?this.findTableRow(e):e;return!!t&&t.opened},closeRow:function(e){var t=_.isString(e)?this.findTableRow(e):e;t&&!t.leaf&&t.opened&&(this.$set(this.myOpenedNodePaths,t.pathId,!1),this.$notify("closed",t),this.saveNodeOpenStatus())},saveNodeOpenStatus:function(){this.keepOpenBy&&Ti.Storage.session.setObject(this.keepOpenBy,this.myOpenedNodePaths),this.$notify("opened-status:changed",this.myOpenedNodePaths)},syncOpenedNodePaths:function(){this.myOpenedNodePaths=_.assign({},this.openedNodePaths)},__ti_shortcut:function(e){"ARROWLEFT"==e&&this.closeRow(this.myCurrentId),"ARROWRIGHT"==e&&this.openRow(this.myCurrentId)}}},_defineProperty(e,"watch",{data:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_.isEqual(t,n)){e.next=3;break}return e.next=3,this.evalTreeTableData();case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),openedNodePaths:function(e,t){_.isEqual(e,t)||this.syncOpenedNodePaths()}}),_defineProperty(e,"mounted",function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.syncOpenedNodePaths(),this.keepOpenBy&&(this.myOpenedNodePaths=Ti.Storage.session.getObject(this.keepOpenBy),this.puppetMode||this.$notify("opened-status:changed",this.myOpenedNodePaths)),e.next=4,this.evalTreeTableData();case 4:this.$watch("myOpenedNodePaths",function(){n.evalTreeTableData()},{deep:!0}),this.keepCurrentBy&&(t=Ti.Storage.session.get(this.keepCurrentBy),Ti.Util.isNil(t)||this.$nextTick(function(){n.$children[0].selectRow(t)}));case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()),_defineProperty(e,"beforeDestroy",function(){}),e);Ti.Preload("ti/com/ti/tree/ti-tree.mjs",t)}(),Ti.Preload("ti/com/ti/tree/_com.json",{name:"ti-tree",globally:!0,template:"./ti-tree.html",mixins:["./ti-tree.mjs"],components:["@com:ti/table"]}),Ti.Preload("ti/com/ti/upload/file/ti-upload-file.html",'<div class="ti-upload-file full-field"\n  :class="TopClass">\n  \x3c!--\n    Hidden input file to choose files\n  --\x3e\n  <input \n    type="file" \n    ref="file" \n    class="ti-hide"\n    @change.stop.seft="OnSelectLocalFilesToUpload">\n  \x3c!--\n    Major preview zone\n  --\x3e\n  <div ref="thumb"\n    class="thumb-con"\n    :style="ThumbStyle"\n    @click="OnClickToEdit"\n    v-drop-files.mask="OnDropFiles">\n    \x3c!--\n      Preview\n    --\x3e\n    <ti-obj-thumb \n      :preview="PreviewIcon"\n      :progress="progress"\n      :show-footer="false"/>\n    \x3c!--\n      Remove\n    --\x3e\n    <div ref="actions"\n      v-if="isShowRemoveIcon"\n        class="thumb-actions"\n        :style="ActionsStyle">\n        \x3c!--remove--\x3e\n        <div class="thumb-opt as-del"\n          @click.left.stop="OnRemove">\n          <ti-icon value="zmdi-delete"/>\n          <span class="it-text">{{\'clear\'|i18n}}</span>\n        </div>\n        \x3c!--open--\x3e\n        <div class="thumb-opt as-open"\n          @click.left.stop="OnOpen">\n          <ti-icon value="zmdi-open-in-new"/>\n          <span class="it-text">{{\'open\'|i18n}}</span>\n        </div>\n    </div>\n    \x3c!--//////--\x3e\n  </div>\n</div>'),function(){var e={data:function(){return{myArea:0,myActionsWidth:0}},props:{preview:{type:[String,Object],default:null},uploadFile:{type:File,default:null},progress:{type:Number,default:-1},width:{type:[String,Number],default:120},height:{type:[String,Number],default:120},removable:{type:Boolean,default:!0},areaSize:{type:Object,default:function(){return{xs:1e4,sm:4e4,md:16e4,lg:36e4}}}},computed:{TopClass:function(){return this.getTopClass("is-area-".concat(this.AreaType))},AreaType:function(){var e=this.areaSize,t=this.myArea;return t<=0?"nil":_.inRange(t,0,e.xs+1)?"xs":_.inRange(t,e.xs,e.sm+1)?"sm":_.inRange(t,e.sm,e.md+1)?"md":_.inRange(t,e.md,e.lg+1)?"lg":"xl"},ThumbStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})},ActionsStyle:function(){if(/^(xs|sm)$/.test(this.AreaType))return{right:Ti.Css.toSize(-1*this.myActionsWidth)}},hasPreview:function(){return!!this.preview},isShowRemoveIcon:function(){return!(this.uploadFile||!this.hasPreview)},PreviewIcon:function(){return this.uploadFile?{type:"localFile",value:this.uploadFile}:this.preview?this.preview:"zmdi-plus"}},methods:{OnClickToEdit:function(){this.$refs.file.click()},OnDropFiles:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:(i=_.get(e,0))&&t.$notify("upload",i);case 2:case"end":return n.stop()}},n)}))()},OnSelectLocalFilesToUpload:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.OnDropFiles(e.target.files);case 2:t.$refs.file.value="";case 3:case"end":return n.stop()}},n)}))()},OnRemove:function(){this.$notify("remove")},OnOpen:function(){this.$notify("open")},recountArea:function(){var e=Ti.Rects.createBy(this.$refs.thumb);this.myArea=e.width*e.height,this.$refs.actions?this.myActionsWidth=this.$refs.actions.getBoundingClientRect().width:this.myActionsWidth=0},shouldRecountArea:function(){var e=this;_.delay(function(){e.recountArea()},10)}},watch:{preview:"shouldRecountArea",width:"shouldRecountArea",height:"shouldRecountArea",removable:"shouldRecountArea",areaSize:"shouldRecountArea"},created:function(){var e=this;Ti.Viewport.watch(this,{resize:function(){e.recountArea()}})},mounted:function(){var e=this;this.$nextTick(function(){return e.recountArea()})},beforeDestroy:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/upload/file/ti-upload-file.mjs",e)}(),Ti.Preload("ti/com/ti/upload/file/_com.json",{name:"ti-upload-file",globally:!0,template:"./ti-upload-file.html",mixins:["./ti-upload-file.mjs"]}),Ti.Preload("ti/com/ti/wall/com/wall-tile/wall-tile.html",'<div class="wall-tile"\n  :class="TopClass"\n  :style="TopStyle">\n  <div v-if="myCom"\n    class="tile-con"\n    @click.left="OnClickRow"\n    @dblclick.left="OnDblClickRow"\n    v-ti-activable>\n    <component   \n      :is="myCom.comType" \n      v-bind="myCom.comConf"/>\n  </div>\n</div>'),function(){var e={inject:["$wall"],data:function(){return{myCom:null}},props:{display:{type:Object,default:null},width:{type:[String,Number],default:null},height:{type:[String,Number],default:null}},computed:{TopClass:function(){return this.getListItemClass()},TopStyle:function(){var e={};return this.width&&(e.width=this.width),this.height&&(e.height=this.height),Ti.Css.toStyle(e)}},methods:{evalMyDisplayCom:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.$wall.reportReady(e.index,!Ti.Util.isNil(e.myCom)),t.next=3,e.evalDataForFieldDisplayItem({itemData:e.data,displayItem:e.display,vars:_objectSpread({isCurrent:e.isCurrent,isChecked:e.isChecked,isChanged:e.isChanged,isActived:e.isActived,rowId:e.rowId},e.$vars)});case 3:n=t.sent,i=Ti.Util.pureCloneDeep(e.myCom),a=Ti.Util.pureCloneDeep(n),_.isEqual(i,a)||(e.myCom=n),e.$wall.reportReady(e.index,!0);case 8:case"end":return t.stop()}},t)}))()}},watch:{data:{handler:"evalMyDisplayCom",immediate:!0},isCurrent:"evalMyDisplayCom",isChecked:"evalMyDisplayCom"}};Ti.Preload("ti/com/ti/wall/com/wall-tile/wall-tile.mjs",e)}(),Ti.Preload("ti/com/ti/wall/com/wall-tile/_com.json",{name:"wall-tile",globally:!1,template:"./wall-tile.html",methods:"@com:ti/support/field_display.mjs",mixins:["@com:ti/support/list_item_mixins.mjs","./wall-tile.mjs"]}),Ti.Preload("ti/com/ti/wall/ti-wall.html",'<div class="ti-wall" \n  :class="TopClass"\n  @click="OnClickTop"\n  v-ti-activable>\n  \x3c!--\n    Blank\n  --\x3e\n  <ti-loading \n    v-if="isDataEmpty"\n      class="nil-data"\n      :class="blankClass"\n      v-bind="blankAs"/>\n  \x3c!--\n    Show tiles\n  --\x3e\n  <template v-else>\n    \x3c!--tiles--\x3e\n    <wall-tile\n      v-for="row in TheData"\n        :key="row.id"\n        :row-id="row.id"\n        :index="row.index"\n        :display="ItemDisplay"\n        :data="row.rawData"\n        :current-id="theCurrentId"\n        :checked-ids="theCheckedIds"\n        :changed-id="changedId"\n        :checkable="checkable"\n        :selectable="selectable"\n        :openable="openable"\n        :class-name="itemClassName"\n        :width="itemWidth"\n        :height="itemHeight"\n        @select="OnRowSelect"\n        @open="OnRowOpen"/>\n    \x3c!--Blank Tile--\x3e\n    <div v-for="bc in BlankCols"\n      class="wall-tile"\n      :style="bc">\n    </div>\n  </template>\n</div>'),function(){var e={provide:function(){return{$wall:this}},data:function(){return{myData:[],myColCount:0,myColWidth:0,isOnlyOneRow:!1,myCellsReport:{},myNeedResize:!0}},props:{itemClassName:void 0,display:{type:[Object,String],default:function(){return{key:"..",comType:"ti-label"}}},border:{type:Boolean,default:!0},spacing:{type:String,default:"sm"},itemWidth:{type:[String,Number],default:null},itemHeight:{type:[String,Number],default:null},resizeDelay:{type:Number,default:0}},computed:{TopClass:function(){return this.getTopClass({"is-hoverable":this.hoverable,"show-border":this.border,"is-only-one-row":this.isOnlyOneRow,"is-multi-rows":!this.isOnlyOneRow},["spacing-".concat(this.spacing)])},ItemDisplay:function(){return this.evalFieldDisplayItem(this.display)},TheData:function(){return this.myData},ListRealCount:function(){return this.TheData.length},BlankCols:function(){var e=[];if(!_.isEmpty(this.TheData)&&this.myColCount>0&&this.myColWidth>1&&!this.isOnlyOneRow){var t=this.ListRealCount%this.myColCount;if(t>0)for(var n=this.myColCount-t,i=0;i<n;i++)e.push({width:"".concat(this.myColWidth,"px")})}return e}},methods:{OnClickTop:function(e){this.cancelable&&Ti.Dom.hasOneClass(e.target,"ti-wall","wall-tile")&&this.cancelRow()},OnWallResize:function(){var e=Ti.Dom.findAll(":scope > .wall-tile",this.$el);if(!_.isEmpty(e)){var t,n=0,i=1,a=-1,r=!0,o=_createForOfIteratorHelper(e);try{for(o.s();!(t=o.n()).done;){var s=t.value.getBoundingClientRect();if(a<0&&(a=s.top),a!=s.top){r=!1;break}n++,i=Math.max(s.width,i)}}catch(e){o.e(e)}finally{o.f()}i>1&&(this.myColCount=n,this.myColWidth=i,this.isOnlyOneRow=r)}},reportReady:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i="R".concat(t);n?delete this.myCellsReport[i]:(this.myCellsReport[i]=!1,this.myNeedResize=!0),n&&_.delay(function(){_.isEmpty(e.myCellsReport)&&e.myNeedResize&&(_.delay(function(){e.OnWallResize()},e.resizeDelay),e.myNeedResize=!1)})}},watch:{data:{handler:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=_.isEqual(t,n)){e.next=5;break}return e.next=4,this.evalData();case 4:this.myData=e.sent;case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),immediate:!0}},mounted:function(){var e=this;Ti.Viewport.watch(this,{resize:_.debounce(function(){return e.OnWallResize()},20)})},destroyed:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/wall/ti-wall.mjs",e)}(),Ti.Preload("ti/com/ti/wall/_com.json",{name:"ti-wall",globally:!0,template:"./ti-wall.html",props:"@com:ti/support/list_props.mjs",methods:"@com:ti/support/field_display.mjs",mixins:["@com:ti/support/list_mixins.mjs","./ti-wall.mjs"],components:["./com/wall-tile","@com:ti/label"]}),Ti.Preload("ti/com/ti/wizard/com/wizard-step/wizard-step.html",'<component \n  class="ti-fill-parent"\n  :is="comType"\n  v-bind="comConf"\n  @change="OnChange"/>'),function(){var e={props:{index:{type:Number,default:-1},stepKey:{type:String,default:void 0},dataKey:{type:String,default:void 0},title:{type:String,default:void 0},serializer:{type:Function,default:void 0},comType:{type:String,default:"ti-label"},comConf:{type:Object,default:function(){return{}}}},methods:{OnChange:function(e){_.isFunction(this.serializer)&&(e=this.serializer(e)),this.dataKey&&(e=_.set({},this.dataKey,e)),this.$emit("data:change",e)}},watch:{title:{handler:function(){this.$notify("change:title",this.title)},immediate:!0}}};Ti.Preload("ti/com/ti/wizard/com/wizard-step/wizard-step.mjs",e)}(),Ti.Preload("ti/com/ti/wizard/com/wizard-step/_com.json",{name:"wizard-step",globally:!0,template:"./wizard-step.html",mixins:["./wizard-step.mjs"]}),Ti.Preload("ti/com/ti/wizard/ti-wizard.html",'<div class="ti-wizard ti-fill-parent"\n  :class="TopClass"><div class="wizard-con">\n  \x3c!--\n    Header Indicators\n  --\x3e\n  <div class="as-head">\n    \x3c!--Title--\x3e\n    <div\n      v-if="TheTitle" \n        class="as-title">{{TheTitle | i18n}}</div>\n    \x3c!--Step indicators--\x3e\n    <ul>\n      <li v-for="(step, index) in StepHeads"\n        :key="step.stepKey"\n        :class="step.className"\n        @click.left="OnClickHeadItem(index, step)">\n        <span class="as-indicator">\n          <span class="as-line at-l"></span>\n          <span class="as-dot">{{index+1}}</span>\n          <span class="as-line at-r"></span>\n        </span>\n        <span class="as-text">{{step.title | i18n}}</span>\n      </li>\n    </ul>\n  </div>\n  \x3c!--\n    Current Step Component\n  --\x3e\n  <div class="as-main">\n    <WizardStep \n      v-bind="CurrentStep"\n      @data:change="OnDataChange"\n      @step:change="OnStepChange"\n      @change:title="OnTitleChange"/>\n  </div>\n  \x3c!--\n    Footer Default Buttons\n  --\x3e\n  <div v-if="BtnPrev || BtnNext"\n    class="as-foot">\n      \x3c!--\n        Btn: Prev\n      --\x3e\n      <div\n        v-if="BtnPrev" \n          class="as-btn is-prev"\n          :class="BtnPrev.className"\n          @click="OnClickBtnPrev">\n          <span v-if="BtnPrev.icon"\n            class="as-icon">\n            <ti-icon :value="BtnPrev.icon"/>\n          </span>\n          <span class="as-sep"></span>\n          <span class="as-text">{{BtnPrev.text|i18n}}</span>\n      </div>\n      \x3c!--Sep--\x3e\n      <div class="as-space"></div>\n      \x3c!--\n        Btn: Next\n      --\x3e\n      <div\n        v-if="BtnNext" \n          class="as-btn is-next"\n          :class="BtnNext.className"\n          @click="OnClickBtnNext">\n          <span v-if="BtnNext.icon"\n            class="as-icon">\n            <ti-icon :value="BtnNext.icon"/>\n          </span>\n          <span class="as-sep"></span>\n          <span class="as-text">{{BtnNext.text|i18n}}</span>\n      </div>\n  </div>\n</div></div>'),function(){var e={data:function(){return{myCurrent:void 0,myTitle:void 0}},props:{title:{type:String,default:void 0},steps:{type:Array,default:function(){return[]}},value:{type:Object,default:function(){return{}}},current:{type:[Number,String],default:0},canClickHeadItem:{type:String,default:void 0},evalStepConfFunc:{type:Boolean,default:!1}},computed:{TopClass:function(){return this.getTopClass()},StepList:function(){var e=[];if(_.isArray(this.steps))for(var t=0;t<this.steps.length;t++){var n=this.steps[t],i=n.key||"step".concat(t);e.push({index:t,stepKey:i,dataKey:n.dataKey,title:n.title||i,comType:n.comType||"ti-label",comConf:n.comConf,serializer:n.serializer,prev:n.prev,next:n.next})}return e},StepHeads:function(){var e=[];if(_.isArray(this.steps)){var t,n=_createForOfIteratorHelper(this.StepList);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=[];this.CurrentStepIndex==i.index?a.push("is-current"):i.index>this.CurrentStepIndex?a.push("is-future"):a.push("is-passed"),e.push(_.assign({},i,{className:a}))}}catch(e){n.e(e)}finally{n.f()}}return e},CurrentStepIndex:function(){return this.CurrentStep?this.CurrentStep.index:-1},hasCurrentStep:function(){return!!this.CurrentStep},TheTitle:function(){return this.myTitle||this.title},CurrentStep:function(){var e=Ti.Util.fallback(this.myCurrent,this.current),t=_.cloneDeep(this.getStep(e)),n=t.serializer?Ti.Util.genInvoking(t.serializer,{context:this.value,partial:"right"}):_.identity,i=Ti.Util.explainObj(this.value,t.comConf,{evalFunc:this.evalStepConfFunc});return _.assign({},t,{serializer:n,comConf:i})},BtnPrev:function(){var e=_.get(this.CurrentStep,"prev");return this.getStepAction(e,{icon:"zmdi-chevron-left",text:"i18n:prev",enabled:!0})},BtnNext:function(){var e=_.get(this.CurrentStep,"next");return this.getStepAction(e,{icon:"zmdi-chevron-right",text:"i18n:next",enabled:!0,reverse:!_.get(e,"icon")})}},methods:{OnTitleChange:function(e){this.myTitle=e},OnDataChange:function(e){var t=_.assign({},this.value,e);this.$notify("change",t)},OnStepChange:function(e){"@prev"==e?this.gotoFromCurrent(-1):"@next"==e?this.gotoFromCurrent(1):this.gotoStep(e)},OnClickHeadItem:function(e){"passed"==this.canClickHeadItem&&this.CurrentStepIndex>e&&this.gotoStep(e)},OnClickBtnPrev:function(){if(this.BtnPrev&&this.BtnPrev.enabled)if(this.BtnPrev.handler){Ti.Util.genInvoking(this.BtnPrev.handler,{context:this.value,partial:!1}).apply(this,[this.value])}else this.gotoFromCurrent(-1)},OnClickBtnNext:function(){if(this.BtnNext&&this.BtnNext.enabled)if(this.BtnNext.handler){Ti.Util.genInvoking(this.BtnNext.handler,{context:this.value,partial:!1}).apply(this,[this.value])}else this.gotoFromCurrent(1)},getStep:function(e){if(_.isNumber(e)){var t=Ti.Num.scrollIndex(e,this.StepList.length);if(t>=0)return this.StepList[t]}else{var n,i=_createForOfIteratorHelper(this.StepList);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.stepKey==e)return a}}catch(e){i.e(e)}finally{i.f()}}},gotoStep:function(e){var t=this.getStep(e);if(t){var n=_.cloneDeep(this.CurrentStep);this.myCurrent=t.index,this.$notify("step:chanage",{index:t.index,step:t,oldStep:n})}},gotoFromCurrent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.CurrentStep){var t=this.CurrentStep.index+e;this.gotoStep(t)}},getStepAction:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var n;return _.isBoolean(e)?n={}:_.isString(e)?n={text:e||dftText}:(n=_.assign({},e),_.isPlainObject(n.enabled)?n.enabled=Ti.Validate.match(this.value,n.enabled):_.isFunction(n.enabled)&&(n.enabled=n.enabled())),_.defaults(n,t),n.className=Ti.Css.mergeClassName(n.className),n.enabled&&(n.className["is-enabled"]=!0),n.reverse&&(n.className["is-reverse"]=!0),n}}}};Ti.Preload("ti/com/ti/wizard/ti-wizard.mjs",e)}(),Ti.Preload("ti/com/ti/wizard/_com.json",{name:"ti-wizard",globally:!0,template:"./ti-wizard.html",mixins:["./ti-wizard.mjs"],components:["./com/wizard-step"]}),Ti.Preload("ti/com/web/auth/passwd/auth-passwd.html",'<div \n  class="web-auth-passwd web-simple-form" \n  :class="TopClass">\n  \x3c!--\n    Reset Success\n  --\x3e\n  <template v-if="doing">\n    <div class="as-ing">\n      <ti-loading class="as-hug" text="auth-reset-passwd-ing"/>\n    </div>\n  </template>\n  \x3c!--\n    Reset Success\n  --\x3e\n  <template v-else-if="myResetResult">\n    <div\n      class="as-done"\n      :class="ResetDoneClass">\n      \x3c!--Loading Icon--\x3e\n      <ti-loading\n        class="as-hug"\n        :icon="ResetDoneIcon"\n        :text="ResetDoneText"/>\n      \x3c!--Links--\x3e\n      <div class="as-links">\n        <a @click.left="OnResetAgain">{{\'auth-reset-passwd-again\'|i18n}}</a>\n      </div>\n    </div>\n  </template>\n  \x3c!--\n    Reset form\n  --\x3e\n  <template v-else>\n    \x3c!--\n      Head text\n    --\x3e\n    <header>{{ModeTitle|i18n}}</header>\n    \x3c!--\n      Main Area\n    --\x3e\n    <section>\n      \x3c!--\n        ===================================================\n        Mode: byVCode\n      --\x3e\n      <template v-if="isByVode">\n        \x3c!--\n          Input: name\n        --\x3e\n        <div class="as-input">\n          <input \n            spellcheck="false"\n            :placeholder="VCodeNameTip|i18n"\n            v-model="myForm.name"></div>\n        \x3c!--\n          Input: vcode\n        --\x3e\n        <div class="as-input">\n          <input \n            spellcheck="false"\n            :placeholder="VCodeCodeTip|i18n"\n            v-model="myForm.vcode">\n          <span>\n            <em v-if="delay>0">{{\'auth-vcode-delay\'|i18n({sec:delay})}}</em>\n            <a v-else\n              @click="OnGetVcode">{{VCodeGetTip|i18n}}</a>\n          </span>\n        </div>\n      </template>\n      \x3c!--\n        ===================================================\n        Mode: byPasswd\n      --\x3e\n      <template v-else>\n        \x3c!--\n          Passwd: old\n        --\x3e\n        <div class="as-input">\n          <input \n            spellcheck="false"\n            :type="myPassInputType"\n            :placeholder="\'auth-reset-passwd-old\'|i18n"\n            v-model="myForm.passwd_old"></div>\n      </template>\n      \x3c!--\n        ===================================================\n      --\x3e\n      \x3c!--\n        Passwd: new\n      --\x3e\n      <div class="as-input" :class="PasswdClass">\n        <input \n          spellcheck="false"\n          :type="myPassInputType"\n          :placeholder="\'auth-reset-passwd-new\'|i18n"\n          v-model="myForm.passwd_new">\n        <span \n          class="as-passwd-type-toggle"\n          @click="OnTogglePasswdInputType">\n          <ti-icon :value="PasswdInputTypeIcon"/>\n        </span>\n      </div>\n      \x3c!--\n        Passwd: Indicator\n      --\x3e\n      <div class="as-passtip">\n        \x3c!--Invalid pass--\x3e\n        <div \n          v-if="-2 == myPassTip"\n            class="is-invalid">{{\'passwd-invalid-char\'|i18n}}</div>\n        \x3c!--No password--\x3e\n        <div \n          v-else-if="-1 == myPassTip"\n            class="is-tip">{{\'passwd-tip\'|i18n}}</div>\n        \x3c!--Show tip bar--\x3e\n        <div \n          v-else\n            class="is-tipbar">\n            <span class="is-weak">{{\'i18n:passwd-sl-1\' | i18n}}</span>\n            <u\n              v-for="it in PasswdTipBar"\n                :class="it.className"></u>\n            <span class="is-strong">{{\'i18n:passwd-sl-5\' | i18n}}</span>\n        </div>\n      </div>\n      \x3c!--\n        Passwd: repeat\n      --\x3e\n      <div class="as-input" :class="PasswdClass">\n        <input \n          spellcheck="false"\n          :type="myPassInputType"\n          :placeholder="\'auth-reset-passwd-ren\'|i18n"\n          v-model="myForm.passwd_ren"></div>\n      \x3c!--\n        Submit button\n      --\x3e\n      <div class="as-btn">\n        <button \n          :class="SubmitBtnClass"\n          @click="OnSubmit">{{SubmitBtnText|i18n}}</button>\n      </div>\n      \x3c!--\n        Sublinks: switch mode / passwd-back\n      --\x3e\n      <div \n        v-if="hasAltModes"\n          class="as-links">\n          <div\n            v-for="it in AltModes"\n              class="as-item">\n              <a @click.left="OnChangeMode(it)">{{it.text|i18n}}</a>\n          </div>\n      </div>\n    </section>\n  </template>\n</div>'),function(){var e={data:function(){return{myPassInputType:"password",myForm:{name:null,vcode:null,passwd_old:null,passwd_new:null,passwd_ren:null},myPassTip:-1,myMode:"passwd",delay:-1,myResetResult:null,doing:!1}},props:{mode:{type:String,default:"passwd"},allowModes:{type:Object,default:function(){return{passwd:!0,phone:!0,email:!0}}},captcha:{type:String,default:null},scenes:{type:Object,default:function(){return{robot:"robot",passwd:"resetpasswd",email:"resetpasswd",phone:"resetpasswd"}}},getDelay:{type:Number,default:60}},computed:{TopClass:function(){return this.getTopClass()},PasswdClass:function(){},TheAllowModes:function(){return Ti.Util.truthyKeys(this.allowModes)},isByVode:function(){return"passwd"!=this.myMode},ModeTitle:function(){return"i18n:auth-reset-passwd-by-".concat(this.myMode)},VCodeNameTip:function(){return"i18n:auth-reset-passwd-by-".concat(this.myMode,"-tip")},VCodeCodeTip:function(){return"email"==this.myMode?"i18n:auth-email-vcode":"i18n:auth-phone-vcode"},VCodeGetTip:function(){return"email"==this.myMode?"i18n:auth-email-vcode-get":"i18n:auth-phone-vcode-get"},PasswdInputTypeIcon:function(){return{password:"fas-eye-slash",text:"fas-eye"}[this.myPassInputType]},AltModes:function(){var e,t=[],n=_createForOfIteratorHelper(this.TheAllowModes);try{for(n.s();!(e=n.n()).done;){var i=e.value;i!=this.myMode&&t.push({text:"i18n:auth-reset-passwd-by-".concat(i),mode:i})}}catch(e){n.e(e)}finally{n.f()}return t},hasAltModes:function(){return!_.isEmpty(this.AltModes)},PasswdTipBar:function(){for(var e=[],t=1;t<=5;t++)e.push({text:"i18n:passwd-sl-".concat(t),className:t>this.myPassTip?"is-off":"is-on"});return e},FormStatus:function(){if("passwd"==this.myMode){if(!_.trim(this.myForm.passwd_old)||!_.trim(this.myForm.passwd_new)||!_.trim(this.myForm.passwd_ren))return"lack"}else if(!(_.trim(this.myForm.name)&&_.trim(this.myForm.vcode)&&_.trim(this.myForm.passwd_new)&&_.trim(this.myForm.passwd_ren)))return"lack";return this.myForm.passwd_new.length<6?"short":this.myForm.passwd_new!=this.myForm.passwd_ren?"unmatch":"ready"},SubmitBtnText:function(){return"i18n:auth-reset-passwd-btn-".concat(this.FormStatus)},SubmitBtnClass:function(){return"is-".concat(this.FormStatus)},ResetOK:function(){return!!_.get(this.myResetResult,"ok")},ResetDoneClass:function(){return this.ResetOK?"is-ok":"is-fail"},ResetDoneIcon:function(){return this.ResetOK?"im-check-mark-circle":"im-warning"},ResetDoneText:function(){return this.ResetOK?"i18n:auth-reset-passwd-ok":_.get(this.myResetResult,"errCode")}},methods:{OnChangeMode:function(e){var t=e.mode;this.myMode=t},OnTogglePasswdInputType:function(){this.myPassInputType={password:"text",text:"password"}[this.myPassInputType]},OnResetAgain:function(){this.myResetResult=null,_.assign(this.myForm,{name:null,vcode:null,passwd_old:null,passwd_new:null,passwd_ren:null})},OnSubmit:function(){var e=this;"ready"==this.FormStatus&&(this.doing=!0,this.$notify("passwd:reset",{mode:this.myMode,scene:_.get(this.scenes,this.myMode),account:_.trim(this.myForm.name),vcode:_.trim(this.myForm.vcode),oldpwd:_.trim(this.myForm.passwd_old),newpwd:_.trim(this.myForm.passwd_new),done:function(t){e.doing=!1,e.myResetResult=t}}))},OnGetVcode:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=_.trim(e.myForm.name)){t.next=4;break}return Ti.Toast.Open("i18n:auth-reset-passwd-lack-".concat(e.myMode),"warn"),t.abrupt("return");case 4:return i={scene:e.scenes.robot,account:n},a=Ti.S.renderBy(e.captcha,i),t.next=8,Ti.Captcha(a);case 8:if(r=t.sent){t.next=11;break}return t.abrupt("return");case 11:o=Ti.Toast.Open({icon:"fas-spinner fa-spin",content:"i18n:auth-sending-vcode",position:"center",duration:0,closer:!1}),e.$notify("get:vcode",{type:e.myMode,scene:_.get(e.scenes,e.myMode),account:n,captcha:r,done:function(){o.close(),e.myForm.vcode=null},ok:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).duInMin,n=void 0===t?60:t;e.delay=e.getDelay,Ti.Toast.Open({type:"success",position:"top",content:"i18n:auth-sent-ok",vars:{ta:Ti.I18n.get("auth-ta-".concat(e.myMode)),by:Ti.I18n.get("auth-ta-by-".concat(e.myMode)),min:n},duration:5e3})},fail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.errCode;e.data;Ti.Toast.Open({type:"warn",position:"top",content:"i18n:".concat(t),duration:5e3})}});case 13:case"end":return t.stop()}},t)}))()},evalCurrentMode:function(e){if(!_.get(this.allowModes,e)){if(_.isEmpty(this.TheAllowModes))throw"mode[".concat(e,"] push me to corner!");return _.first(this.TheAllowModes)}return e},updatePasswordTip:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.myForm.passwd_new;if(_.isEmpty(e)||!_.isString(e)||e.length<6)this.myPassTip=-1;else{var t=0;e.length>8&&(t+=1);for(var n={a_z:0,A_Z:0,dig:0,spe:0},i=0;i<e.length;i++){var a=e.charCodeAt(i);if(a>=97&&a<=122)n.a_z=1;else if(a>=65&&a<=90)n.A_Z=1;else if(a>=48&&a<=57)n.dig=1;else{if(!(a>=20&&a<=128))return void(this.myPassTip=-2);n.spe=1}}t+=_.sum(_.values(n)),this.myPassTip=t}},syncCurrentMode:function(){this.myMode=this.evalCurrentMode(this.mode)}},watch:{mode:{handler:"syncCurrentMode"},allowModes:{handler:"syncCurrentMode"},"myForm.passwd_new":"updatePasswordTip"},mounted:function(){var e=this;this.syncCurrentMode(),this.__H=window.setInterval(function(){e.delay>=0&&e.delay--},1e3)},beforeDestroy:function(){this.__H&&window.clearInterval(this.__H)}};Ti.Preload("ti/com/web/auth/passwd/auth-passwd.mjs",e)}(),Ti.Preload("ti/com/web/auth/passwd/_com.json",{name:"web-auth-passwd",globally:!0,template:"./auth-passwd.html",mixins:["./auth-passwd.mjs"]}),Ti.Preload("ti/com/web/auth/signup/auth-signup.html",'<div \n  class="web-auth-signup web-simple-form" \n  :class="TopClass"\n  v-ti-activable>\n  \x3c!--\n    Top Logo\n  --\x3e\n  <div \n    v-if="logo"\n      class="as-logo">\n      <ti-icon :value="logo"/>\n  </div>\n  \x3c!--\n    Head text\n  --\x3e\n  <header>{{Msgs.title|i18n}}</header>\n  \x3c!--\n    Main Area\n  --\x3e\n  <section>\n    \x3c!--\n      Input: Name\n    --\x3e\n    <div class="as-input" :class="NameClass">\n      <input \n        spellcheck="false"\n        :placeholder="Msgs.nameTip|i18n"\n        v-model="data.name"></div>\n    \x3c!--\n      Input: Password\n    --\x3e\n    <div class="as-input" :class="PasswdClass">\n      <input \n        spellcheck="false"\n        :type="PasswdInputType"\n        :placeholder="Msgs.passwdTip|i18n"\n        v-model="data.passwd">\n      <span v-if="Msgs.codeGet">\n        <em v-if="delay>0">{{\'auth-vcode-delay\'|i18n({sec:delay})}}</em>\n        <a v-else\n          @click="OnGetVcode">{{Msgs.codeGet|i18n}}</a>\n      </span>\n    </div>\n    \x3c!--\n      Submit button\n    --\x3e\n    <div class="as-btn">\n      <button @click="OnAuthSubmit">{{Msgs.btnText|i18n}}</button>\n    </div>\n    \x3c!--\n      Sublinks: switch mode / passwd-back\n    --\x3e\n    <ul \n      v-if="hasToggleMode"\n        class="as-links">\n        <li v-if="Msgs.linkLeft"\n          class="at-left">\n          <a @click="OnChangeMode">{{Msgs.linkLeft   |i18n}}</a></li>\n        <li v-if="Msgs.linkRight"\n          class="at-right">\n          <a>{{Msgs.linkRight |i18n}}</a></li>\n    </ul>\n  </section>\n  \x3c!--\n    Bottom link for oauth2\n  --\x3e\n  <template v-if="hasOAuth2">\n    <div class="as-spacing"></div>\n    <footer>\n      <a\n        v-for="it in OAuth2Items"\n          :href="it.href"\n          :title="it.tip">\n          <ti-icon :value="it.icon"/>\n      </a>\n    </footer>\n  </template>\n</div>'),function(){var e={data:function(){return{data:{name:null,passwd:null},guarding:!1,currentMode:"login_by_passwd",invalidField:null,delay:-1}},props:{mode:{type:String,default:"login_by_passwd"},toggleMode:{type:String,default:"login_by_phone"},captcha:{type:String,required:!0,default:null},scenes:{type:Object,default:function(){return{robot:"robot",bind_phone:"auth",bind_email:"auth",login_by_email:"auth",login_by_phone:"auth",login_by_passwd:"auth"}}},getDelay:{type:Number,default:60},logo:{type:String,default:void 0},oauth2:{type:Array,default:function(){return[]}}},computed:{TopClass:function(){return this.getTopClass()},Msgs:function(){if("login_by_passwd"==this.currentMode)return{title:"i18n:auth-passwd-title",nameTip:"login_by_email"==this.toggleMode?"i18n:auth-passwd-name-email-tip":"i18n:auth-passwd-name-phone-tip",passwdTip:"i18n:auth-passwd-tip",btnText:"i18n:auth-login",linkLeft:"login_by_email"==this.toggleMode?"i18n:auth-go-email":"i18n:auth-go-phone",linkRight:"i18n:auth-passwd-getback",blankName:"i18n:auth-blank-name"};if("login_by_phone"==this.currentMode)return{title:"i18n:auth-phone-title",nameTip:"i18n:auth-phone-tip",passwdTip:"i18n:auth-phone-vcode",codeGet:"i18n:auth-phone-vcode-get",btnText:"i18n:auth-login-or-signup",linkLeft:"i18n:auth-go-passwd",linkRight:"i18n:auth-vcode-lost",blankName:"i18n:auth-blank-phone"};if("login_by_email"==this.currentMode)return{title:"i18n:auth-email-title",nameTip:"i18n:auth-email-tip",passwdTip:"i18n:auth-email-vcode",codeGet:"i18n:auth-email-vcode-get",btnText:"i18n:auth-login-or-signup",linkLeft:"i18n:auth-go-passwd",linkRight:"i18n:auth-vcode-lost",blankName:"i18n:auth-blank-email"};if("bind_phone"==this.currentMode)return{title:"i18n:auth-bind-phone-title",nameTip:"i18n:auth-phone-tip",passwdTip:"i18n:auth-phone-vcode",codeGet:"i18n:auth-phone-vcode-get",btnText:"i18n:auth-bind",linkRight:"i18n:auth-vcode-lost",blankName:"i18n:auth-blank-phone"};if("bind_email"==this.currentMode)return{title:"i18n:auth-bind-email-title",nameTip:"i18n:auth-email-tip",passwdTip:"i18n:auth-email-vcode",codeGet:"i18n:auth-email-vcode-get",btnText:"i18n:auth-bind",linkRight:"i18n:auth-vcode-lost",blankName:"i18n:auth-blank-email"};throw Ti.Err.make("e.com.combo.auth.invalid-mode",this.currentMode)},Params:function(){return _.mapValues(this.data,function(e){return _.trim(e)})},isBlankName:function(){return!this.Params.name},isBlankNameOrPasswd:function(){var e=this.Params,t=e.name,n=e.passwd;return!t||!n},Invalid:function(){return{name:this.isInvalid("name"),passwd:this.isInvalid("passwd")}},NameClass:function(){if(this.guarding&&(this.Invalid.name||!this.Params.name))return"is-invalid"},PasswdClass:function(){if(this.guarding&&(this.Invalid.passwd||!this.Params.passwd))return"is-invalid"},PasswdInputType:function(){return"login_by_passwd"==this.currentMode?"password":"text"},OAuth2Items:function(){return _.cloneDeep(this.oauth2)},hasOAuth2:function(){return!_.isEmpty(this.OAuth2Items)},hasToggleMode:function(){return!_.isEmpty(this.toggleMode)},ToggleModeName:function(){return{login_by_phone:"i18n:auth-ta-phone",login_by_email:"i18n:auth-ta-email",bind_phone:"i18n:auth-ta-phone",bind_email:"i18n:auth-ta-email"}[this.toggleMode]},vCodeTargetName:function(){return{login_by_phone:"i18n:auth-ta-phone",login_by_email:"i18n:auth-ta-email",bind_phone:"i18n:auth-ta-phone",bind_email:"i18n:auth-ta-email"}[this.currentMode]},vCodeTargetBy:function(){return{login_by_phone:"i18n:auth-ta-by-phone",login_by_email:"i18n:auth-ta-by-email",bind_phone:"i18n:auth-ta-by-phone",bind_email:"i18n:auth-ta-by-email"}[this.currentMode]},vCodeScene:function(){return _.get(this.scenes,this.currentMode)||"auth"}},methods:{OnChangeMode:function(){"login_by_passwd"==this.currentMode?this.currentMode=this.toggleMode:this.currentMode="login_by_passwd",Ti.Be.BlinkIt(this.$el)},OnAuthSubmit:function(){var e=this;if(this.guarding=!0,this.isBlankNameOrPasswd)return Ti.Toast.Open("i18n:auth-blank-name-passwd","warn");var t=Ti.Toast.Open({icon:"fas-spinner fa-spin",content:"i18n:auth-doing",position:"center",duration:0,closer:!1});this.$notify("auth:send",{type:this.currentMode,name:this.Params.name,passwd:this.Params.passwd,done:function(){t.close(),e.InvalidField=null},ok:function(){Ti.Toast.Open({type:"success",position:"top",content:"i18n:auth-ok",duration:2e3}),e.$notify("auth:ok")},noexist:function(){e.InvalidField="name"},invalid:function(){e.InvalidField="passwd"},others:function(){e.InvalidField=["name","passwd"]},fail:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.errCode;t.data;"e.auth.captcha.invalid"==n?Ti.Toast.Open({type:"warn",position:"top",content:"i18n:e-www-invalid-captcha",vars:{ta:Ti.I18n.text(e.vCodeTargetName)},duration:5e3}):"e.auth.login.NoSaltedPasswd"==n?Ti.Alert("i18n:auth-login-NoSaltedPasswd",{title:"i18n:e-auth-login-NoSaltedPasswd",icon:"zmdi-shield-security",textOk:"i18n:i-known",vars:{ta:Ti.I18n.text(e.ToggleModeName)}}):Ti.Toast.Open({type:"warn",position:"top",content:"i18n:".concat(n),duration:5e3})}})},OnGetVcode:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.guarding=!0,!e.isBlankName){t.next=5;break}return e.InvalidField="name",Ti.Toast.Open(e.Msgs.blankName,"warn"),t.abrupt("return");case 5:return e.guarding=!1,e.InvalidField=null,n={scene:e.scenes.robot,account:e.Params.name},i=Ti.S.renderBy(e.captcha,n),t.next=11,Ti.Captcha(i);case 11:if(a=t.sent){t.next=14;break}return t.abrupt("return");case 14:r=Ti.Toast.Open({icon:"fas-spinner fa-spin",content:"i18n:auth-sending-vcode",position:"center",duration:0,closer:!1}),e.$notify("get:vcode",{type:e.currentMode,scene:e.vCodeScene,account:e.data.name,captcha:a,done:function(){r.close(),e.InvalidField=null,e.data.passwd=""},ok:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).duInMin,n=void 0===t?60:t;e.delay=e.getDelay,Ti.Toast.Open({type:"success",position:"top",content:"i18n:auth-sent-ok",vars:{ta:Ti.I18n.text(e.vCodeTargetName),by:Ti.I18n.text(e.vCodeTargetBy),min:n},duration:5e3})},fail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.errCode;e.data;Ti.Toast.Open({type:"warn",position:"top",content:"i18n:".concat(t),duration:5e3})}});case 16:case"end":return t.stop()}},t)}))()},isInvalid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return _.isArray(this.InvalidField)?_.indexOf(this.InvalidField,e)>=0:e==this.InvalidField},__ti_shortcut:function(e){var t=this;if("ENTER"==e&&!this.isBlankNameOrPasswd)return this.$nextTick(function(){t.OnAuthSubmit()}),{stop:!0,quit:!0}}},watch:{currentMode:function(){this.guarding=!1,this.data.passwd=""}},mounted:function(){var e=this;this.mode&&(this.currentMode=this.mode),this.__H=window.setInterval(function(){e.delay>=0&&e.delay--},1e3)},beforeDestroy:function(){this.__H&&window.clearInterval(this.__H)}};Ti.Preload("ti/com/web/auth/signup/auth-signup.mjs",e)}(),Ti.Preload("ti/com/web/auth/signup/_com.json",{name:"web-auth-signup",globally:!0,template:"./auth-signup.html",mixins:["./auth-signup.mjs"]}),Ti.Preload("ti/com/web/footer/web-footer.html",'<div class="ti-web-footer">\n  I footer\n</div>'),function(){var e={inheritAttrs:!1,props:{logo:{type:[String,Object],default:"zmdi-chevron-down"},brief:{type:String,default:null},copyright:{type:String,default:null}},computed:{}};Ti.Preload("ti/com/web/footer/web-footer.mjs",e)}(),Ti.Preload("ti/com/web/footer/_com.json",{name:"web-footer",globally:!0,template:"./web-footer.html",mixins:["./web-footer.mjs"]}),Ti.Preload("ti/com/web/media/image/web-media-image.html",'<a class="web-media-image"\n  :class="TopClass"\n  :style="TopStyle"\n  :href="TheHref"\n  :target="isNewTab ? \'_blank\' : \'_self\'"\n  @mousemove="OnMouseMove"\n  @mouseleave="OnMouseLeave">\n  \x3c!--Image--\x3e\n  <img ref="img"\n    v-if="TheSrc" \n      :src="TheSrc"\n      @load="OnImageLoaded"/>\n  \x3c!--Text--\x3e\n  <div\n    v-if="TheText"\n      class="as-text">\n      <span>{{TheText}}</span>\n  </div>\n  \x3c!--Zoom len--\x3e\n  <template v-if="zoomLens">\n    \x3c!--Picker--\x3e\n    <div ref="pick"\n      class="as-zoom-pick"\n      :style="ZoomLenPickStyle"></div>\n    \x3c!--Docker--\x3e\n    <div ref="dock"\n      v-if="showZoomPick"\n        class="as-zoom-dock"\n        :style="ZoomLenDockStyle"></div>\n  </template>\n</a>'),function(){var e={data:function(){return{showZoomPick:!1,showZoomDock:!1,naturalWidth:-1,naturalHeight:-1,clientWidth:-1,clientHeight:-1,imgLoading:!0,pickRect:{}}},props:{src:{type:[String,Object],default:void 0},preview:{type:Object,default:void 0},text:{type:String,default:void 0},href:{type:String,default:void 0},newtab:{type:[String,Boolean],default:void 0},i18n:{type:Boolean,default:!0},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},zoomLens:{type:Object,default:void 0}},computed:{TopClass:function(){return this.getTopClass({"has-href":!!this.TheHref,"no-href":!this.TheHref})},TopStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})},TheZoomLens:function(){if(!(!this.zoomLens||this.clientWidth<=0||this.clientHeight<=0)){var e=_.get(this.zoomLens,"pickWidth",.618),t=_.get(this.zoomLens,"pickHeight",-1),n={};n.pickWidth=e<1?this.clientWidth*e:e,n.pickHeight=t<=0?n.pickWidth:t<1?this.clientHeight*t:t;var i=_.get(this.zoomLens,"scale",2);return n.dockWidth=n.pickWidth*i,n.dockHeight=n.pickHeight*i,_.defaults(n,{dockMode:"V",dockSpace:{x:10,y:0},dockPosListY:["top","bottom"]}),n}},ZoomLenPickStyle:function(){if(this.zoomLens&&!_.isEmpty(this.pickRect))return Ti.Css.toStyle({visibility:this.showZoomPick?"visible":"hidden",top:this.pickRect.top,left:this.pickRect.left,width:this.TheZoomLens.pickWidth,height:this.TheZoomLens.pickHeight})},ZoomLenDockStyle:function(){if(this.zoomLens&&!_.isEmpty(this.pickRect)){var e=_.get(this.zoomLens,"scale",2),t=this.clientWidth,n=this.clientHeight,i=this.pickRect.left,a=this.pickRect.top;return Ti.Css.toStyle({visibility:this.showZoomDock?"visible":"hidden",width:this.TheZoomLens.dockWidth,height:this.TheZoomLens.dockHeight,backgroundImage:'url("'.concat(this.TheSrc,'")'),backgroundSize:"".concat(t*e,"px ").concat(n*e,"px"),backgroundPosition:"".concat(i*e*-1,"px ").concat(a*e*-1,"px")})}},TheSrc:function(){return Ti.WWW.evalObjPreviewSrc(this.src,this.preview)},TheText:function(){if(this.text){var e=this.text;return _.isPlainObject(this.src)&&(e=Ti.Util.explainObj(this.src,this.text)),this.i18n&&(e=Ti.I18n.text(e)),e}},TheHref:function(){if(this.href){var e=this.href;return _.isPlainObject(this.src)&&(e=Ti.Util.explainObj(this.src,this.href)),e}},isNewTab:function(){var e=this.newtab;return _.isString(e)&&_.isPlainObject(this.src)&&(e=Ti.Util.explainObj(this.src,this.newtab)),!!e}},methods:{OnImageLoaded:function(){var e=this.$refs.img;e&&(this.naturalWidth=e.naturalWidth,this.naturalHeight=e.naturalHeight,this.clientWidth=e.clientWidth,this.clientHeight=e.clientHeight,this.imgLoading=!1)},OnMouseMove:function(e){if(_.isElement(this.$refs.img)&&_.isElement(this.$refs.pick)){var t=Ti.Rects.createBy(this.$refs.img),n=Ti.Rects.createBy(this.$refs.pick),i=e.clientX,a=e.clientY,r=Ti.Rects.create({x:i,y:a,width:n.width,height:n.height});t.wrap(r),r.relative(t),this.pickRect=r,this.showZoomPick=!0}},OnMouseLeave:function(){this.showZoomPick=!1,this.showZoomDock=!1}},watch:{showZoomPick:function(e){var t=this;e&&this.zoomLens&&this.$nextTick(function(){Ti.Dom.dockTo(t.$refs.dock,t.$refs.img,{mode:t.TheZoomLens.dockMode,space:t.TheZoomLens.dockSpace,posListX:t.TheZoomLens.dockPosListX,posListY:t.TheZoomLens.dockPosListY}),_.delay(function(){t.showZoomDock=!0},100)})}}};Ti.Preload("ti/com/web/media/image/web-media-image.mjs",e)}(),Ti.Preload("ti/com/web/media/image/_com.json",{name:"web-media-image",globally:!0,template:"./web-media-image.html",mixins:["./web-media-image.mjs"]}),Ti.Preload("ti/com/web/media/player/web-media-player.html",'<div class="ti-web-image">\n  \n</div>'),function(){var e={inheritAttrs:!1,props:{src:{type:String,default:void 0},value:{type:[String,Number],default:void 0},bgColor:{type:[String,Number],default:"#000000"},items:{type:[Array],default:function(){return[]}}},computed:{TheItems:function(){return _.forEach(this.items,function(e){}),[]}}};Ti.Preload("ti/com/web/media/player/web-media-player.mjs",e)}(),Ti.Preload("ti/com/web/media/player/_com.json",{name:"web-media-player",globally:!0,template:"./web-media-player.html",mixins:["./web-media-player.mjs"]}),Ti.Preload("ti/com/web/meta/article/web-meta-article.html",'<div class="web-meta-article"\n  :class="TopClass">\n  \x3c!--\n    Title\n  --\x3e\n  <h1\n    v-if="title"\n      class="as-title">{{title}}</h1>\n  \x3c!--\n    Information\n  --\x3e\n  <div\n    v-if="hasInfo"\n      class="as-info">\n      \x3c!--author--\x3e\n      <div v-if="author" class="as-author">{{author}}</div>\n      \x3c!--PubDateText--\x3e\n      <div v-if="PubDateText" class="as-pub-date">{{PubDateText}}</div>\n      \x3c!--Watch Count--\x3e\n      <div\n        v-if="watchCount > 0"\n          class="as-watch-count">\n            <i class="zmdi zmdi-eye"></i>\n            <span>{{watchCount}}</span></div>\n      \x3c!--PubDateText--\x3e\n      <div v-if="duration" class="as-duration">{{DurationText}}</div>\n  </div>\n  \x3c!--\n    Tags\n  --\x3e\n  <ul \n  v-if="hasTags"\n    class="as-tags">\n    <li\n      v-for="tag in TheTags">{{tag}}</li></ul>\n  \x3c!--\n    Brief\n  --\x3e\n  <blockquote\n    v-if="brief"\n      class="as-brief">{{brief}}</blockquote>\n  \x3c!--\n    Bottom line\n  --\x3e\n  <hr v-if="bottomLine" class="as-bottom-line">\n</div>'),function(){var e={props:{title:{type:String,default:void 0},brief:{type:String,default:void 0},pubDate:{type:[String,Number,Date],default:void 0},tags:{type:[String,Array],default:void 0},dateFormat:{type:String,default:"yyyy-MM-dd"},author:{type:String,default:void 0},duration:{type:[String,Number],default:void 0},watchCount:{type:Number,default:0},align:{type:String,default:"center",validator:function(e){return/^(left|center|right)$/.test(e)}},bottomLine:{type:Boolean,default:!0}},computed:{TopClass:function(){return this.getTopClass("align-".concat(this.align))},TheTags:function(){return Ti.S.toArray(this.tags)},hasTags:function(){return!_.isEmpty(this.TheTags)},DurationText:function(){return _.isNumber(this.duration)?Ti.I18n.getf("du-in-min",{n:this.duration}):this.duration},PubDateText:function(){if(this.pubDate)return Ti.DateTime.format(this.pubDate,this.dateFormat)},hasInfo:function(){return this.author||this.watchCount>0||this.author||this.duration}}};Ti.Preload("ti/com/web/meta/article/web-meta-article.mjs",e)}(),Ti.Preload("ti/com/web/meta/article/_com.json",{name:"web-meta-article",globally:!0,template:"./web-meta-article.html",mixins:["./web-meta-article.mjs"]}),Ti.Preload("ti/com/web/meta/commodity/web-meta-commodity.html",'<div class="web-meta-commodity"\n  :class="TopClass">\n  <div class="as-main">\n    \x3c!--\n      Left: Preview\n    --\x3e\n    <div\n      v-if="previewImageSrc"\n        class="at-left">\n      <WebMediaImage\n        :src="previewImageSrc"/>\n    </div>\n    \x3c!--\n      Right: Information\n    --\x3e\n    <div class="at-right">\n      \x3c!--Title--\x3e\n      <h1>{{MetaTitle}}</h1>\n      <div class="as-form">\n        <ti-form\n          v-bind="form"\n          :data="FormData"\n          @change="OnFormChanged"/>\n      </div>\n      <div class="as-btns">\n        \x3c!--Buy Button--\x3e\n        <a class="ti-btn" @click="OnClickBuyNow">{{actions.buy|i18n}}</a>\n      </div>\n    </div>\n  </div>\n</div>'),function(){var e={props:{meta:{type:Object,default:function(){return{}}},previewSrc:{type:String,default:null},titleKey:{type:String,default:"title"},buyAmount:{type:Number,default:1},form:{type:Object,default:function(){return{}}},actions:{type:Object,default:function(){return{buy:"i18n:buy-now"}}}},computed:{TopClass:function(){return this.getTopClass()},FormData:function(){return _objectSpread({},this.meta,{buyAmount:this.buyAmount})},previewImageSrc:function(){if(this.previewSrc&&this.meta)return Ti.S.renderBy(this.previewSrc,this.meta)},MetaTitle:function(){return this.titleKey?_.get(this.meta,this.titleKey):"NoTitle"}},methods:{OnClickBuyNow:function(){this.$notify("buy:now")},OnFormChanged:function(e){var t=e.name,n=e.value;this.$notify("meta:changed",{name:t,value:n})}}};Ti.Preload("ti/com/web/meta/commodity/web-meta-commodity.mjs",e)}(),Ti.Preload("ti/com/web/meta/commodity/_com.json",{name:"web-meta-commodity",globally:!0,template:"./web-meta-commodity.html",mixins:["./web-meta-commodity.mjs"],components:["@com:web/meta/preview"]}),Ti.Preload("ti/com/web/meta/order/com/order-item/order-item.html",'<div class="as-row order-item">\n  \x3c!--Thumb/Title--\x3e\n  <div class="as-cell">\n    <div class="as-title">\n      <ti-icon \n        :value="thumbObj" \n        width=".32rem" \n        height=".32rem"/>\n      <span class="as-text">{{title}}</span>\n    </div>\n  </div>\n  \x3c!--price--\x3e\n  <div class="as-cell as-price">\n    <span>{{price}}</span>\n  </div>\n  \x3c!--amount--\x3e\n  <div class="as-cell as-amount">\n    <span>{{amount}}</span>\n  </div>\n  \x3c!--Total--\x3e\n  <div class="as-cell as-fee">\n    <em class="ti-num is-md">{{feeText}}</em>\n  </div>\n</div>'),function(){var e={props:{id:{type:String,default:null},thumb:{type:String,default:null},src:{type:String,default:"/api/thumb?id:${id}"},dftIcon:{type:String,default:"fas-cube"},title:{type:String,default:null},price:{type:Number,default:1},currency:{type:String,default:"RMB"},amount:{type:Number,default:1}},computed:{thumbObj:function(){if(this.thumb){return{type:"image",value:Ti.S.renderBy(this.src,this)}}return this.dftIcon},fee:function(){return Ti.WWW.evalFee(this)},feeText:function(){return Ti.WWW.feeText(this.fee,this.currency)}}};Ti.Preload("ti/com/web/meta/order/com/order-item/order-item.mjs",e)}(),Ti.Preload("ti/com/web/meta/order/com/order-item/_com.json",{name:"order-item",globally:!1,template:"./order-item.html",mixins:["./order-item.mjs"]}),Ti.Preload("ti/com/web/meta/order/web-meta-order.html",'<div class="web-meta-order"\n  :class="TopClass">\n  \x3c!--\n    Head Status\n  --\x3e\n  <div class="as-or-box is-head">\n    \x3c!--\n      Left: ID/status\n    --\x3e\n    <div class="at-left is-status">\n      \x3c!--ID--\x3e\n      <div class="as-or-id">\n        <span>{{\'order-k-id\'|i18n}}:</span>\n        <em>{{OrderId}}</em>\n      </div>\n      \x3c!--Status--\x3e\n      <div class="as-or-st">\n        <span :class="OrderStatus">{{OrderStatus|i18n}}</span>\n      </div>\n    </div>\n    \x3c!--\n      Right: Timestamp\n    --\x3e\n    <div class="at-right is-timestamp">\n      <div\n        v-for="it in Timestamps"\n          :class="it.className">\n          \x3c!--Item--\x3e\n          <template v-if="\'item\' == it.type">\n            <ti-icon :value="it.icon"/>\n            <div class="as-t-title">{{it.title|i18n}}</div>\n            <div class="as-t-date">{{it.dateText}}</div>\n            <div class="as-t-time">{{it.timeText}}</div>\n          </template>\n          \x3c!--Line--\x3e\n          <template v-else>\n            <ti-icon :value="it.icon"/>\n          </template>\n      </div>\n    </div>\n  </div>\n  \x3c!--\n    TODO shipping address & physical distribution\n  --\x3e\n  \x3c!--\n    Product list\n  --\x3e\n  <div class="as-or-box is-products">\n    <table>\n      <thead>\n        <tr>\n          <th>{{\'order-k-pro-title\'|i18n}}</th>\n          <th>{{\'order-k-pro-price\'|i18n}}</th>\n          <th>{{\'order-k-pro-amount\'|i18n}}</th>\n          <th>{{\'order-k-pro-subtotal\'|i18n}}</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr\n          v-for="it in Products"\n            class="as-pro-it">\n            \x3c!--Title--\x3e\n            <td class="as-pro-title">\n              <a \n                :href="it.href"\n                @click.left.prevent="OnClickProduct(it)"><img :src="it.src"/></a>\n              <a \n                :href="it.href"\n                @click.left.prevent="OnClickProduct(it)">{{it.title}}</a>\n            </td>\n            \x3c!--Price--\x3e\n            <td class="as-price">{{CurrencyChar}}{{it.price}}</td>\n            \x3c!--Amount--\x3e\n            <td class="as-amount">{{it.amount}}</td>\n            \x3c!--Subtotal--\x3e\n            <td class="as-subtotal">{{CurrencyChar}}{{it.subtotal}}</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  \x3c!--\n    Summary\n  --\x3e\n  <div class="as-or-box is-summary">\n    <table>\n      <tr class="as-sum-price">\n        <td class="as-s-key">{{\'order-k-price\'|i18n}}:</td>\n        <td class="as-s-val">{{CurrencyChar}}{{Order.price}}</td>\n      </tr>\n      <tr class="as-sum-fee">\n        <td class="as-s-key">{{\'order-k-fee\'|i18n}}:</td>\n        <td class="as-s-val">{{CurrencyChar}}{{Order.fee}}</td>\n      </tr>\n    </table>\n  </div>\n</div>'),function(){var e={props:{value:{type:Object,default:function(){return{}}},proThumbSrc:{type:String,default:void 0},proHref:{type:String,default:void 0}},computed:{TopClass:function(){return this.getTopClass("is-".concat(this.OrderStatus))},Order:function(){return this.value||{}},OrderId:function(){var e=this.Order.id;if(e){var t=e.indexOf(":");return t>0?_.trim(e.substring(t+1)):e}return"- unknown -"},OrderStatus:function(){return"or-st-".concat(_.toLower(this.Order.or_st))},CurrencyChar:function(){return Ti.Bank.getCurrencyChar(this.Order.currency||"RMB")},Products:function(){var e=this,t=[];return _.forEach(this.value.products,function(n){var i=_objectSpread({},n);e.proThumbSrc&&(i.src=Ti.S.renderBy(e.proThumbSrc,n)),e.proHref&&(i.href=Ti.S.renderBy(e.proHref,n)),i.subtotal=Ti.Num.precise(n.price*n.amount),t.push(i)}),t},Timestamps:function(){var e=[];return e.push(this.genTimestampItem("fas-file-invoice-dollar","i18n:or-st-nw",this.Order.ct)),e.push(this.genTimestampLine(this.Order.ok_at)),e.push(this.genTimestampItem("far-credit-card","i18n:or-st-ok",this.Order.ok_at)),e.push(this.genTimestampLine(this.Order.sp_at)),e.push(this.genTimestampItem("fas-shipping-fast","i18n:or-st-sp",this.Order.sp_at)),e.push(this.genTimestampLine(this.Order.dn_at)),e.push(this.genTimestampItem("fas-clipboard-check","i18n:or-st-dn",this.Order.dn_at,!0)),e}},methods:{OnClickProduct:function(e){var t=e.id;this.$notify("open:product",t)},genTimestampItem:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={type:"item",icon:e,title:t,time:n},r=n&&n>0;return a.className={"is-item":!0,"is-on":r,"is-off":!r,"at-last":i},r&&(a.dateText=Ti.DateTime.format(n,"yyyy-MM-dd"),a.timeText=Ti.DateTime.format(n,"HH:mm:ss")),a},genTimestampLine:function(e){var t=e&&e>0;return{type:"line",isOn:t,icon:t?"fas-chevron-right":"fas-circle",className:{"is-line":!0,"is-on":t,"is-off":!t}}}}};Ti.Preload("ti/com/web/meta/order/web-meta-order.mjs",e)}(),Ti.Preload("ti/com/web/meta/order/_com.json",{name:"web-meta-order",globally:!0,template:"./web-meta-order.html",mixins:["./web-meta-order.mjs"],components:["./com/order-item"]}),Ti.Preload("ti/com/web/meta/preview/web-meta-preview.html",'<div class="ti-web-preview ti-fill-parent">\n  \x3c!--\n    Top: Image\n  --\x3e\n  <div class="as-preview">\n    <ti-icon value="zmdi-image"/>\n  </div>\n  \x3c!--\n    Bottom: List\n  --\x3e\n  \n</div>'),function(){var e={inheritAttrs:!1,props:{logo:{type:[String,Object],default:"zmdi-chevron-down"},brief:{type:String,default:null},copyright:{type:String,default:null}},computed:{}};Ti.Preload("ti/com/web/meta/preview/web-meta-preview.mjs",e)}(),Ti.Preload("ti/com/web/meta/preview/_com.json",{name:"web-meta-preview",globally:!0,template:"./web-meta-preview.html",mixins:["./web-meta-preview.mjs"]}),Ti.Preload("ti/com/web/nav/columns/nav-columns.html",'<nav class="web-nav-columns"\n  :class="TopClass">\n  \x3c!--=======================================--\x3e\n  <div v-for="it in TheItems"\n    class="as-column">\n    <div class="item-self">\n      <a\n        :key="it.index"\n        class="link-item"\n        :class="it.className"\n        :href="it.href"\n        :target="it.target"\n        @click.left="OnClickLink($event, it)">\n        \x3c!--Icon--\x3e\n        <ti-icon\n          v-if="it.icon"\n            :value="it.icon"/>\n        \x3c!--Text--\x3e\n        <span\n          v-if="it.title"\n            class="as-text">{{it.title}}</span>\n        </a>\n      </div>\n      \x3c!--===================================--\x3e\n      \x3c!--SubItems--\x3e\n      <div\n        v-if="it.items"\n          class="sub-items">\n          <div class="items-con">\n            <a\n              v-for="sub in it.items"\n                :key="sub.index"\n                class="sub-item"\n                :class="sub.className"\n                :href="sub.href"\n                :target="sub.target"\n                @click.left="OnClickLink($event, sub)">\n                \x3c!--Icon--\x3e\n                <ti-icon\n                  v-if="sub.icon"\n                    :value="sub.icon"/>\n                \x3c!--Text--\x3e\n                <span\n                  v-if="sub.title"\n                    class="as-text">{{sub.title}}</span>\n            </a>\n          </div>\n      </div>\n      \x3c!--===================================--\x3e\n  </div>\n  \x3c!--=======================================--\x3e\n</nav>'),function(){var e={props:{items:{type:Array,default:function(){return[]}},path:{type:String,default:null},align:{type:String,default:"center",validator:function(e){return/^(left|center|right)$/.test(e)}},spacing:{type:String,validator:function(e){return/^(tiny|comfy|wide)$/.test(e)}},border:{type:String,default:"solid",validator:function(e){return/^(none|solid|dashed|dotted)$/.test(e)}}},computed:{TopClass:function(){var e=this;return this.getTopClass("is-spacing-".concat(this.spacing),"is-align-".concat(this.align),function(){if(e.border)return"is-border-".concat(e.border)})},TheItems:function(){return this.evalItems(this.items)}},methods:{OnClickLink:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,i=t.value,a=t.params;/^(page|action)$/.test(n)&&(e.preventDefault(),this.$notify("nav:to",{type:n,value:i,params:a}))},evalItems:function(e){var t=this;e=Ti.WWW.explainNavigation(e,this.base);var n=[];return _.forEach(e,function(e,i){var a=_.pick(e,["icon","title","type","params","href","target","value"]);a.index=i,t.path&&(a.highlight=e.highlightBy(t.path));var r=!!a.href;a.className={"has-href":r,"nil-href":!r,"is-highlight":a.highlight,"is-normal":!a.highlight},e.items&&(a.items=t.evalItems(e.items)),n.push(a)}),n}}};Ti.Preload("ti/com/web/nav/columns/nav-columns.mjs",e)}(),Ti.Preload("ti/com/web/nav/columns/_com.json",{name:"web-nav-columns",globally:!0,template:"./nav-columns.html",mixins:["./nav-columns.mjs"],components:[]}),Ti.Preload("ti/com/web/nav/links/nav-links.html",'<nav class="web-nav-links"\n  :class="TopClass">\n  \x3c!--=======================================--\x3e\n  <a\n    v-for="it in TheItems"\n      :key="it.index"\n      class="link-item"\n      :class="it.className"\n      :href="it.href"\n      :target="it.target"\n      @click.left="OnClickLink($event, it)"\n      @mouseenter="OnItemMouseEnter(it)"\n      @mouseleave="OnItemMouseLeave(it)">\n      \x3c!--Icon--\x3e\n      <ti-icon\n        v-if="it.icon"\n          :value="it.icon"/>\n      \x3c!--Text--\x3e\n      <span\n        v-if="it.title"\n          class="as-text">{{it.title}}</span>\n      \x3c!--===================================--\x3e\n      \x3c!--SubItems--\x3e\n      <div\n        v-if="mySubItems && mySubIndex == it.index"\n          class="sub-items">\n          <div class="items-con">\n            <a\n              v-for="sub in mySubItems"\n                :key="sub.index"\n                class="sub-item"\n                :class="sub.className"\n                :href="sub.href"\n                :target="sub.target"\n                @click.left="OnClickLink($event, sub)">\n                \x3c!--Icon--\x3e\n                <ti-icon\n                  v-if="sub.icon"\n                    :value="sub.icon"/>\n                \x3c!--Text--\x3e\n                <span\n                  v-if="sub.title"\n                    class="as-text">{{sub.title}}</span>\n            </a>\n          </div>\n      </div>\n      \x3c!--===================================--\x3e\n  </a>\n  \x3c!--=======================================--\x3e\n</nav>'),function(){var e={data:function(){return{mySubIndex:-1,mySubItems:null}},props:{base:{type:String,default:"/"},items:{type:Array,default:function(){return[]}},path:{type:String,default:void 0},params:{type:Object,default:void 0},align:{type:String,default:"left",validator:function(e){return/^(left|center|right)$/.test(e)}},spacing:{type:String,validator:function(e){return/^(tiny|comfy|wide)$/.test(e)}},border:{type:String,default:"solid",validator:function(e){return/^(none|solid|dashed|dotted)$/.test(e)}}},computed:{TopClass:function(){var e=this;return this.getTopClass("is-spacing-".concat(this.spacing),"is-align-".concat(this.align),function(){if(e.border)return"is-border-".concat(e.border)})},TheItems:function(){return this.evalItems(this.items)}},methods:{OnClickLink:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,i=t.value,a=t.params;/^(page|action)$/.test(n)&&(e.preventDefault(),i&&this.$notify("nav:to",{type:n,value:i,params:a}))},OnItemMouseEnter:function(e){var t=this,n=e.index,i=e.items;if(_.isEmpty(i))return this.mySubIndex=-1,void(this.mySubItems=null);this.mySubItems=this.evalItems(i),this.mySubIndex=n,this.$nextTick(function(){return t.dockSub()})},OnItemMouseLeave:function(e){var t=e.index;this.mySubIndex==t&&(this.mySubIndex=-1,this.mySubItems=null)},dockSub:function(){var e=Ti.Dom.find(".sub-items",this.$el);if(e){var t=e.parentNode,n=Ti.Rects.createBy(t),i=Ti.Rects.createBy(e),a=Ti.Css.toStyle({top:n.height,left:(n.width-i.width)/2});Ti.Dom.setStyle(e,a)}},evalItems:function(e){var t=this;e=Ti.WWW.explainNavigation(e,this.base);var n=[];return _.forEach(e,function(e,i){var a=_.pick(e,["icon","title","type","params","href","target","value","items"]);a.index=i,t.path&&(a.highlight=e.highlightBy(t.path,t.params));var r=!!a.href;a.className={"has-href":r,"nil-href":!r,"is-highlight":a.highlight,"is-normal":!a.highlight},n.push(a)}),n}}};Ti.Preload("ti/com/web/nav/links/nav-links.mjs",e)}(),Ti.Preload("ti/com/web/nav/links/_com.json",{name:"web-nav-links",globally:!0,template:"./nav-links.html",mixins:["./nav-links.mjs"],components:[]}),Ti.Preload("ti/com/web/nav/side/com/side-item/side-item.html",'<div class="side-item" \n  :class="TopClass">\n  \x3c!--\n    Self Info\n  --\x3e\n  <div class="it-info" >\n    \x3c!--Icon--\x3e\n    <span\n      v-if="icon"\n        class="it-info-icon">\n        <ti-icon :value="icon"/>\n    </span>\n    \x3c!--Group--\x3e\n    <span\n      v-if="isGroup"\n        class="it-info-text">{{title|i18n}}</span>\n    \x3c!--Item--\x3e\n    <a\n      v-else\n        class="it-info-text"\n        :href="href"\n        @click.stop.prevent="OnClickItemInfo">{{title|i18n}}</a>\n  </div>\n  \x3c!--\n    Sub Container\n  --\x3e\n  <div \n    v-if="hasSubItems"\n      class="it-con">\n      <SideItem\n        v-for="subIt in items"\n          :key="subIt.key"\n          v-bind="subIt"/>\n  </div>\n</div>'),function(){var e={props:{depth:{type:Number,default:0},icon:{type:[String,Object],default:void 0},title:{type:String,default:void 0},page:{type:String,default:void 0},href:{type:String,default:void 0},items:{type:Array,default:void 0}},computed:{TopClass:function(){return{"is-top":this.isTop,"is-sub":!this.isTop,"is-group":this.isGroup,"is-item":!this.isGroup,"is-highlight":this.isHighlight}},isTop:function(){return 0==this.depth},isGroup:function(){return _.isArray(this.items)},isHighlight:function(){return this.id&&this.id==this.highlightId},hasSubItems:function(){return!_.isEmpty(this.items)}},methods:{OnClickItemInfo:function(){this.$notify("nav:to",{value:this.page})}}};Ti.Preload("ti/com/web/nav/side/com/side-item/side-item.mjs",e)}(),Ti.Preload("ti/com/web/nav/side/com/side-item/_com.json",{name:"side-item",template:"./side-item.html",mixins:["./side-item.mjs"]}),Ti.Preload("ti/com/web/nav/side/web-nav-side.html",'<div class="web-nav-side"\n  :class="TopClass"\n  v-ti-activable>\n  <SideItem\n    v-for="it in TheItems"\n      :key="it.key"\n        v-bind="it"/>\n</div>'),function(){var e={props:{base:{type:String,default:void 0},items:{type:Array,default:null}},computed:{TopClass:function(){return this.getTopClass()},TheItems:function(){var e=this,t=[];return _.forEach(this.items,function(n,i){t.push(e.evalItem(n,i,0))}),t}},methods:{evalItem:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=void 0;_.isArray(t.items)&&(a=[],_.forEach(t.items,function(t,n){a.push(e.evalItem(t,n,i+1))}),t.items=a);var r=t.href||t.page;return this.base&&!/^(https?)?\/\/?/.test(r)&&(r=Ti.Util.appendPath(this.base,r)),_objectSpread({},t,{index:n,href:r,depth:i,key:"it-".concat(n)})}}};Ti.Preload("ti/com/web/nav/side/web-nav-side.mjs",e)}(),Ti.Preload("ti/com/web/nav/side/_com.json",{name:"web-nav-side",globally:!0,template:"./web-nav-side.html",mixins:["./web-nav-side.mjs"],components:["./com/side-item"]}),function(){var e={tipIcon:{type:String,default:"fas-clipboard-check"},tipText:{type:String,default:"i18n:pay-checkout-tip"},items:{type:Array,default:function(){return[]}},currency:{type:String,default:"RMB"},orderType:{type:String,default:"A"},addresses:{type:Array,default:function(){return[]}},countries:{type:Object,default:void 0}};Ti.Preload("ti/com/web/pay/checkout/web-pay-checkout-props.mjs",e)}(),Ti.Preload("ti/com/web/pay/checkout/web-pay-checkout.html",'<div class="web-pay-checkout"\n  :class="TopClass">\n  \x3c!--\n    Blank\n  --\x3e\n  <div \n    v-if="isEmpty"\n      class="as-empty">\n    <ti-loading\n      class="as-big"\n      icon="fas-shopping-basket"\n      text="You should pick something to checkout!"/>\n  </div>\n  \x3c!--\n    List table\n  --\x3e\n  <template v-else>\n    \x3c!--\n      Tip\n    --\x3e\n    <div class="as-tip">\n      <ti-icon :value="tipIcon"/>\n      <span>{{tipText | i18n}}</span>\n    </div>\n    \x3c!--\n      List\n    --\x3e\n    <div class="as-list">\n      \x3c!--Show product in loop--\x3e\n      <table>\n        <thead>\n          <tr>\n            <th><span>{{\'pay-checkout-it-name\'     | i18n}}</span></th>\n            <th>\n              <u>{{CurrencyChar}}</u>\n              <span>{{\'pay-checkout-it-price\'      | i18n}}</span>\n            </th>\n            <th><span>{{\'pay-checkout-it-amount\'   | i18n}}</span></th>\n            <th><span>{{\'pay-checkout-it-subtotal\' | i18n}}</span></th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr\n            v-for="it of TheItems"\n              class="as-item">\n              <td class="it-thumb">\n                <a\n                  v-if="it.thumbSrc" \n                    @click.prevent="OnShowProduct(it)" \n                    :href="it.href">\n                    <img :src="it.thumbSrc"/>\n                </a>\n                <div class="it-title">\n                  <a :href="it.href"\n                    @click.prevent="OnShowProduct(it)">{{it.title}}</a>\n                </div>\n              </td>\n              <td class="it-price">\n                <em>{{CurrencyChar}}{{it.price}}</em>\n              </td>\n              <td class="it-amount">\n                <span>{{it.amount}}</span>\n              </td>\n              <td class="it-subtotal">\n                <em>{{CurrencyChar}}{{it.subtotal}}</em>\n              </td>\n            </tr>\n          </tbody>\n      </table>\n    </div> \x3c!--~as-list--\x3e\n    \x3c!--\n      Summary\n    --\x3e\n    <div class="as-summary">\n      <div class="at-left">\n        \x3c!--Maybe Coupon here--\x3e\n      </div>\n      <div class="at-right">\n        <div class="as-total">\n          <span>Total:</span>\n          <em>{{CurrencyChar}}{{TotalFee}}</em>\n        </div>\n      </div>\n    </div>\n    \x3c!--\n      Address\n    --\x3e\n    <div\n      v-if="\'A\' == orderType"\n        class="as-address">\n        \x3c!--\n          Current Address\n        --\x3e\n        <div class="as-addr-current">\n          <WebTileAddress \n            :value="currentAddr"\n            title=""\n            :countries="countries"\n            :auto-highlight="false"\n            :can="{remove:0,edit:0,default:0,choose:1,add:1}"\n            :blank-as="{text:\'i18n:order-shipaddr-nil\',icon:\'im-location\'}"\n            @choose="OnChooseAddr"\n            @add="OnAddAddr"/>\n        </div>\n        \x3c!--\n          Address can-list\n        --\x3e\n        <transition name="ti-trans-fade">\n          <div\n            v-if="showAddrCanList"\n              class="as-can-list">\n              <WebShelfList\n                v-bind="AddrCanList"\n                @select="OnSelectAddr"/>\n              <div\n                class="as-can-hide">\n                <a @click.left="OnHideAddrCanList">\n                  <i class="fas fa-angle-double-up"></i><br>\n                  <span>{{\'i18n:close\'|i18n}}</span></a>\n                </div>\n          </div>\n        </transition>\n    </div>\n  </template>\n</div>'),function(){var e={data:function(){return{showAddrCanList:!1}},props:{currentAddr:{type:Object,default:void 0}},computed:{TopClass:function(){return this.getTopClass()},isEmpty:function(){return _.isEmpty(this.items)},CurrencyChar:function(){return Ti.Bank.getCurrencyChar(this.currency)},TheItems:function(){var e=[];return _.forEach(this.items,function(t){e.push(_objectSpread({},t,{subtotal:Ti.Num.precise(t.price*t.amount)}))}),e},TotalFee:function(){var e=0;return _.forEach(this.TheItems,function(t){return e+=t.price*t.amount}),Ti.Num.precise(e)},AddrCanList:function(){return{data:this.addresses,blankAs:{className:"ti-fill-parent",icon:"fas-map",text:"i18n:address-empty-list"},comType:"WebTileAddress",comConf:{value:"=..",countries:this.countries,can:{remove:!1,edit:!1,select:!1,default:!1},selectable:!0,currentId:_.get(this.currentAddr,"id")}}}},methods:{OnShowProduct:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;this.$notify("show:product",e)},OnChooseAddr:function(){this.showAddrCanList=!0},OnHideAddrCanList:function(){this.showAddrCanList=!1},OnAddAddr:function(){this.$notify("add:address")},OnSelectAddr:function(e){this.showAddrCanList=!1,this.$emit("change",{address:e})}}};Ti.Preload("ti/com/web/pay/checkout/web-pay-checkout.mjs",e)}(),Ti.Preload("ti/com/web/pay/checkout/_com.json",{name:"web-pay-checkout",globally:!0,template:"./web-pay-checkout.html",props:"./web-pay-checkout-props.mjs",mixins:["./web-pay-checkout.mjs"]}),function(){var e={options:{type:Array,default:function(){return[{icon:"/gu/rs/ti/icons/png/wxpay256.png",value:"wx.qrcode",text:"i18n:pay-wx"},{icon:"/gu/rs/ti/icons/png/alipay256.png",value:"zfb.qrcode",text:"i18n:pay-zfb"}]}}};Ti.Preload("ti/com/web/pay/choose/web-pay-choose-props.mjs",e)}(),Ti.Preload("ti/com/web/pay/choose/web-pay-choose.html",'<div class="web-pay-choose"\n  :class="TopClass">\n  \x3c!--Title--\x3e\n  <div class="as-title">{{\'pay-step-choose-tip\'|i18n}}</div>\n  \x3c!--Choosing--\x3e\n  <div class="as-options">\n    <div\n      v-for="op in options"\n        class="as-pay-type"\n        :class="getOptionClass(op)"\n        @click.left="OnChooseOption(op)">\n        <ti-icon :value="op.icon"/>\n        <div class="as-text">{{op.text | i18n}}</div>\n    </div>\n  </div>\n  <div class="as-tip">{{PayTypeText}}</div>\n</div>'),function(){var e={props:{value:{type:String,default:null}},computed:{TopClass:function(){return this.getTopClass()},hasPayType:function(){return Ti.Bank.isValidPayType(this.value)},PayTypeText:function(){return Ti.Bank.getPayTypeChooseI18nText(this.value,{text:"pay-step-choose-tip2",nil:"pay-step-choose-nil"})}},methods:{OnChooseOption:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;this.$emit("change",{payType:e})},getOptionClass:function(e){return e.value==this.value?"is-enabled":"is-disabled"}},mounted:function(){this.$notify("change:title","pay-step-choose-title2")}};Ti.Preload("ti/com/web/pay/choose/web-pay-choose.mjs",e)}(),Ti.Preload("ti/com/web/pay/choose/_com.json",{name:"web-pay-choose",globally:!0,template:"./web-pay-choose.html",props:"./web-pay-choose-props.mjs",mixins:["./web-pay-choose.mjs"]}),function(){var e={waitIcon:{type:String,default:"fas-spinner fa-spin"},waitText:{type:String,default:"i18n:loading"},okIcon:{type:String,default:"im-check-mark-circle"},okText:{type:String,default:"i18n:pay-re-ok"},okLinks:{type:Array,default:function(){return[]}},failIcon:{type:String,default:"im-warning"},failText:{type:String,default:"i18n:pay-re-fail"},failLinks:{type:Array,default:function(){return[]}},doneLinks:{type:Array,default:function(){return[]}}};Ti.Preload("ti/com/web/pay/done/web-pay-done-props.mjs",e)}(),Ti.Preload("ti/com/web/pay/done/web-pay-done.html",'<div class="web-pay-done"\n  :class="TopClass">\n  \x3c!--\n    Icon\n  --\x3e\n  <div class="as-icon"><ti-icon :value="TheIcon"/></div>\n  \x3c!--\n    Text\n  --\x3e\n  <div class="as-text">{{TheText | i18n}}</div>\n  \x3c!--\n    errMsg\n  --\x3e\n  <div\n    v-if="errMsg" \n      class="as-error">{{errMsg | i18n}}</div>\n  \x3c!--\n    Links\n  --\x3e\n  <div\n    v-if="hasLinks"\n      class="as-links">\n      <ul>\n        <li\n          v-for="li in TheLinks">\n          <a\n            class="link-item"\n            :href="li.href"\n            @click.left.prevent="OnClickLink(li)">\n            <ti-icon\n              v-if="li.icon"\n                :value="li.icon"/>\n            <span class="it-text">{{li.text | i18n}}</span>\n          </a>\n        </li>\n      </ul>\n  </div>\n</div>'),function(){var e={props:{payOk:{type:Boolean,default:void 0},errMsg:{type:String,default:void 0},orderId:{type:String,default:void 0}},computed:{TopClass:function(){return this.getTopClass({"is-wait":this.isWait,"is-ok":!this.isWait&&this.payOk,"is-fail":!this.isWait&&!this.payOk})},isWait:function(){return _.isUndefined(this.payOk)},TheIcon:function(){return _.isUndefined(this.payOk)?this.waitIcon:this.payOk?this.okIcon:this.failIcon},TheText:function(){return _.isUndefined(this.payOk)?this.waitText:this.payOk?this.okText:this.failText},TheLinks:function(){var e=this,t=_.cloneDeep(this.payOk?_.concat(this.okLinks,this.doneLinks):_.concat(this.failLinks,this.doneLinks)),n=[];return _.forEach(t,function(t){n.push(_.defaults(Ti.Util.explainObj(e,t),{icon:"zmdi-chevron-right"}))}),n},hasLinks:function(){return!_.isEmpty(this.TheLinks)}},methods:{OnClickLink:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path,n=e.params;t&&this.$notify("nav:to",{value:t,params:n})}}};Ti.Preload("ti/com/web/pay/done/web-pay-done.mjs",e)}(),Ti.Preload("ti/com/web/pay/done/_com.json",{name:"web-pay-done",globally:!0,template:"./web-pay-done.html",props:"./web-pay-done-props.mjs",mixins:["./web-pay-done.mjs"]}),function(){var e={watchUser:{type:String,default:null},qrcodeSize:{type:[String,Number],default:200},checkPaymentInterval:{type:Number,default:3e3},fetchOrder:{type:Function,default:void 0},payOrder:{type:Function,default:void 0},createOrder:{type:Function,default:void 0},checkOrder:{type:Function,default:void 0},returnUrl:{type:String,default:void 0},orderTitle:{type:String,default:void 0},orderType:{type:String,default:"A"}};Ti.Preload("ti/com/web/pay/proceed/web-pay-proceed-props.mjs",e)}(),Ti.Preload("ti/com/web/pay/proceed/web-pay-proceed.html",'<div class="web-pay-proceed">\n  \x3c!--\n    Wait for create order\n  --\x3e\n  <div \n    v-if="!hasOrder || !Payment"\n      class="as-nil-order">\n      <ti-loading\n        class="as-big"\n        :text="OrderLoadText"/>\n  </div>\n  \x3c!--\n    Show payment\n  --\x3e\n  <template\n    v-else>\n    \x3c!--QRCODE--\x3e\n    <div v-if="isQRCODE"\n      class="as-main is-qrcode">\n      <img \n        :style="QrcodeImageStyle"\n        :src="PaymentDataAsQrcodeUrl">\n    </div>\n    \x3c!--IFRAME--\x3e\n    <div v-else-if="isIFRAME"\n      class="as-main is-iframe">\n      <iframe \n        frameborder="0" \n        scrolling="no"\n        :src="PaymentData"></iframe>\n    </div>\n    \x3c!--\n      JSON\n    --\x3e\n    <div v-else-if="isJSON"\n      class="as-main is-json">\n      \x3c!--The self/approve/update/capture links for PayPal--\x3e\n      <div\n        v-if="\'paypal\' == payType"\n          class="by-paypal">\n        \x3c!--Logo--\x3e\n        <div class="paypal-logo">\n          <a \n            :href="myPaypalUrl"\n            target="_blank"><i class="fab fa-paypal"></i></a>\n        </div>\n        <div class="paypal-tip">{{\'paypal-approve-tip\'|i18n}}</div>\n      </div> \x3c!--End PayPal--\x3e\n    </div>\n    \x3c!--\n      Others\n    --\x3e\n    <div\n      v-else\n        class="as-main">{{myOrder}}</div>\n    \x3c!--\n      Check Button\n    --\x3e\n    <div class="as-check">\n      <div class="ti-btn is-huge"\n        @click.left="OnClickCheckBtn">\n        <ti-icon class="as-icon" :value="CheckBtnIcon"/>\n        <div class="as-text">{{CheckBtnText|i18n}}</div>\n      </div>\n    </div>\n  </template>\n</div>'),function(){var e={data:function(){return{__WS:null,myOrder:null,isChecking:!1,myPaypalUrl:""}},props:{payType:{type:String,default:null},items:{type:Array,default:function(){return[]}},orderId:{type:String,default:void 0},payOk:{type:Boolean,default:void 0},currency:{type:String,default:"RMB"},address:{type:Object,default:void 0}},computed:{TopClass:function(){return this.getTopClass({"has-paytype":this.hasPayType,"nil-paytype":!this.hasPayType},"is-".concat(this.PayTypeName))},hasPayType:function(){return Ti.Bank.isValidPayType(this.payType)},PayTypeName:function(){if(_.isString(this.payType))return this.payType.replace(".","-")},PayTypeText:function(){return Ti.Bank.getPayTypeChooseI18nText(this.payType,{text:"pay-step-proceed-tip",nil:"pay-step-proceed-nil"})},OrderLoadText:function(){return this.orderId?"pay-step-proceed-fetch-order":"pay-step-proceed-create-order"},hasOrder:function(){return!_.isEmpty(this.myOrder)},Payment:function(){return _.get(this.myOrder,"pay_re")},PaymentId:function(){return _.get(this.Payment,"payObjId")},PaymentStatus:function(){return _.get(this.Payment,"status")},PaymentData:function(){return _.get(this.Payment,"data")},PaymentDataType:function(){return _.get(this.Payment,"dataType")},isPaymentCreated:function(){return!!_.get(this.Payment,"payObjId")},isQRCODE:function(){return"QRCODE"==this.PaymentDataType},isIFRAME:function(){return"IFRAME"==this.PaymentDataType},isLINK:function(){return"LINK"==this.PaymentDataType},isJSON:function(){return"JSON"==this.PaymentDataType},isTEXT:function(){return"TEXT"==this.PaymentDataType},PaymentDataAsQrcodeUrl:function(){return"/gu/qrcode?d=".concat(this.PaymentData,"&s=").concat(this.qrcodeSize,"&_=").concat(Date.now())},PayPalLinksMap:function(){var e={};return this.hasOrder&&"paypal"==this.myOrder.pay_tp&&_.forEach(this.PaymentData.links,function(t){e[t.rel]=t}),e},QrcodeImageStyle:function(){return Ti.Css.toStyleRem100({width:this.qrcodeSize,height:this.qrcodeSize})},CheckBtnIcon:function(){return this.isChecking?"fas-spinner fa-spin":"zmdi-assignment-check"},CheckBtnText:function(){return this.isChecking?"i18n:pay-proceed-ing":"i18n:pay-proceed-check"}},methods:{OnClickCheckBtn:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!_.isFunction(e.checkOrder)){t.next=6;break}return e.isChecking=!0,t.next=4,e.checkOrder(e.orderId);case 4:e.myOrder=t.sent,e.isChecking=!1;case 6:case"end":return t.stop()}},t)}))()},checkPayment:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.Payment?e.tryEvalPayPal():_.delay(_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchOrder(e.orderId);case 2:e.myOrder=t.sent,e.$nextTick(function(){e.checkPayment()});case 4:case"end":return t.stop()}},t)})),e.checkPaymentInterval);case 1:case"end":return t.stop()}},t)}))()},checkOrCreateOrder:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.hasOrder){t.next=4;break}return t.next=3,e.checkPayment();case 3:return t.abrupt("return",t.sent);case 4:if(!e.orderId){t.next=11;break}if(!_.isFunction(e.fetchOrder)){t.next=9;break}return t.next=8,e.payOrder(e.orderId,e.payType);case 8:e.myOrder=t.sent;case 9:t.next=18;break;case 11:if(!_.isFunction(e.createOrder)){t.next=18;break}return n=_.map(e.items,function(e){return{id:e.id,amount:e.amount||1,cate:e.cate,title:e.title,price:e.price}}),t.next=15,e.createOrder({payType:e.payType,items:n,orderType:e.orderType,orderTitle:e.orderTitle,address:e.address,fail:function(t){e.$emit("change",{payOk:!1,errMsg:t}),e.$notify("step:change","@next")}});case 15:i=t.sent,e.$emit("change",{orderId:_.get(i,"id")}),e.myOrder=i;case 18:return t.next=20,e.checkPayment();case 20:return t.abrupt("return",t.sent);case 21:case"end":return t.stop()}},t)}))()},tryEvalPayPal:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("paypal"!=e.payType||!e.isPaymentCreated){t.next=9;break}return n=_.get(e.PayPalLinksMap,"approve.href"),i=Ti.Util.parseHref(n),a="".concat(i.protocol,"://").concat(i.host).concat(i.path),console.log("",{href:n,link:i,url:a}),e.returnUrl&&(i.params.returnurl=e.returnUrl),e.myPaypalUrl=i.toString(),t.next=9,Ti.Be.Open(a,{params:i.params,delay:1e3});case 9:case"end":return t.stop()}},t)}))()},watchPaymentChanged:function(){var e=this;!this.__WS&&this.watchUser&&this.hasOrder&&this.isPaymentCreated&&(console.log("watchPaymentChanged"),this.__WS=Ti.Websocket.listenRemote({watchTo:{method:"watch",user:this.watchUser,match:{id:this.PaymentId}},received:function(t){console.log("websocket",t),e.OnClickCheckBtn()},closed:function(){e.unwatchPaymentChanged()}}))},unwatchPaymentChanged:function(){this.__WS&&this.__WS.close()}},watch:{PaymentStatus:function(e){"FAIL"==e?(this.$emit("change",{payOk:!1,errMsg:JSON.stringify(this.PaymentData)}),this.$notify("step:change","@next")):"OK"==e&&(this.$emit("change",{payOk:!0}),this.$notify("step:change","@next"))}},mounted:function(){var e=this;this.$notify("change:title",this.PayTypeText),this.$nextTick(function(){e.checkOrCreateOrder()})},beforeDestroy:function(){this.unwatchPaymentChanged()}};Ti.Preload("ti/com/web/pay/proceed/web-pay-proceed.mjs",e)}(),Ti.Preload("ti/com/web/pay/proceed/_com.json",{name:"web-pay-proceed",globally:!0,template:"./web-pay-proceed.html",props:"./web-pay-proceed-props.mjs",mixins:["./web-pay-proceed.mjs"]}),Ti.Preload("ti/com/web/pay/web-pay.html",'<div class="web-pay">\n  <ti-wizard\n    :current="0"\n    :title="title"\n    :steps="PaySteps"\n    :value="myPayment"\n    can-click-head-item="passed"\n    @change="OnChange"/>\n</div>'),function(){var e={data:function(){return{myPayment:{payType:null,orderId:void 0,payOk:void 0,errMsg:null,address:null}}},props:{title:{type:String,default:"i18n:pay-title"},payType:{type:String,default:null},payTypeOptions:{type:Array,default:void 0},defaultAddr:{type:Object,default:void 0}},computed:{PaySteps:function(){var e=this;return[{title:"i18n:pay-step-checkout-title",next:{enabled:function(){return!_.isEmpty(e.items)&&("A"!=e.orderType||!_.isEmpty(e.myPayment.address))}},comType:"WebPayCheckout",comConf:{tipIcon:this.tipIcon,tipText:this.tipText,items:this.items,currency:this.currency,orderType:this.orderType,addresses:this.addresses,currentAddr:this.myPayment.address,countries:this.countries}},{title:"i18n:pay-step-choose-title",prev:!0,next:{enabled:{payType:"notBlank"}},comType:"WebPayChoose",comConf:{options:this.options,value:"=payType"}},{title:"i18n:pay-step-proceed-title",prev:!0,next:{enabled:{payOk:"isBoolean",orderId:"notBlank"}},comType:"WebPayProceed",comConf:{items:this.items,currency:this.currency,payType:"=payType",orderId:"=orderId",payOk:"=payOk",address:"=address",checkPaymentInterval:this.checkPaymentInterval,orderType:this.orderType,orderTitle:this.orderTitle,watchUser:this.watchUser,qrcodeSize:this.qrcodeSize,fetchOrder:this.fetchOrder,payOrder:this.payOrder,createOrder:this.createOrder,checkOrder:this.checkOrder,returnUrl:this.returnUrl}},{title:"pay-step-done-title",comType:"WebPayDone",comConf:{payOk:"=payOk",errMsg:"=errMsg",orderId:"=orderId",okIcon:this.okIcon,okText:this.okText,okLinks:this.okLinks,failIcon:this.failIcon,failText:this.failText,failLinks:this.failLinks,doneLinks:this.doneLinks}}]}},methods:{OnChange:function(e){_.assign(this.myPayment,e)}},watch:{payType:{handler:function(){this.myPayment.payType=this.payType},immediate:!0},defaultAddr:{handler:function(e){e&&!this.myPayment.address&&(this.myPayment.address=_.cloneDeep(e))},immediate:!0}}};Ti.Preload("ti/com/web/pay/web-pay.mjs",e)}(),Ti.Preload("ti/com/web/pay/_com.json",{name:"web-pay",globally:!0,template:"./web-pay.html",props:["@com:web/pay/checkout/web-pay-checkout-props.mjs","@com:web/pay/choose/web-pay-choose-props.mjs","@com:web/pay/proceed/web-pay-proceed-props.mjs","@com:web/pay/done/web-pay-done-props.mjs"],mixins:["./web-pay.mjs"],components:["@com:ti/wizard","@com:web/pay/checkout","@com:web/pay/choose","@com:web/pay/proceed","@com:web/pay/done"]}),Ti.Preload("ti/com/web/shelf/free/web-shelf-free.html",'<div class="web-shelf-free"\n  :class="TopClass"\n  :style="TopStyle">\n  \x3c!--=============================--\x3e\n  <div class="free-main"\n    :style="MainStyle">\n    <div \n      v-for="it in itemList"\n        :key="it.key"\n        class="free-item"\n        :class="it.className"\n        :style="it.style">\n        <component\n          :is="it.comType"\n          v-bind="it.comConf"/>\n    </div>\n  </div>\n  \x3c!--=============================--\x3e\n</div>'),function(){var e={data:function(){return{itemStyles:{},itemList:[]}},props:{preview:{type:Object,default:void 0},items:{type:Array,default:function(){return[]}},background:{type:String,default:void 0},color:{type:String,default:void 0},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},mainBackground:{type:String,default:void 0},mainWidth:{type:[String,Number],default:void 0},mainHeight:{type:[String,Number],default:void 0}},computed:{TopClass:function(){return this.getTopClass()},TopStyle:function(){return Ti.Css.toStyle(_objectSpread({width:this.width,height:this.height,color:this.color},this.evalBackgroundStyle(this.background)))},MainStyle:function(){return Ti.Css.toStyle(_objectSpread({width:this.mainWidth,height:this.mainHeight},this.evalBackgroundStyle(this.mainBackground)))}},methods:{evalItemList:function(){var e=this;if(_.isArray(this.items)){var t=this,n=[];_.forEach(this.items,function(i,a){var r=["at-".concat(i.position||"free"),"i-".concat(a)];i.className&&r.push(i.className);var o="It-".concat(a),s=Ti.Css.toStyle(i.style),c=Ti.Css.toStyle(i.appear);_.isEmpty(c)||_.delay(function(){var n=_.cloneDeep(e.itemList[a]);n.style=s,t.$set(e.itemList,a,n)},0),n.push({key:o,index:a,className:Ti.Css.mergeClassName(r),style:_.assign({},s,c),comType:i.comType||"WebTextRaw",comConf:i.comConf})}),this.itemList=n}else this.itemList=[]},evalBackgroundStyle:function(e){return _.isEmpty(e)?{}:_.isObject(e)?{backgroundImage:'url("'.concat(Ti.WWW.evalObjPreviewSrc(e,this.preview),'")')}:/^(#[0-9A-F]{3,6}|rgba?\([0-9, ]+\))$/.test(e)?{backgroundColor:e}:{backgroundImage:'url("'.concat(e,'")')}}},watch:{items:{handler:function(){this.evalItemList()},immediate:!0}}};Ti.Preload("ti/com/web/shelf/free/web-shelf-free.mjs",e)}(),Ti.Preload("ti/com/web/shelf/free/_com.json",{name:"web-shelf-free",globally:!0,template:"./web-shelf-free.html",mixins:["./web-shelf-free.mjs"]}),Ti.Preload("ti/com/web/shelf/list/web-shelf-list.html",'<div class="web-shelf-list"\n  :class="TopClass">\n  \x3c!--\n    Blank\n  --\x3e\n  <template \n    v-if="isEmpty">\n    <ti-loading\n      v-if="showBlank"\n        class="as-big"\n        v-bind="blankAs"/>\n  </template>\n  \x3c!--\n    Each Items\n  --\x3e\n  <template v-else>\n    <div\n      v-for="it in ItemList"\n        class="list-item"\n        :key="it.key">\n        <component\n          :is="it.comType"\n          v-bind="it.comConf"/>    \n    </div>\n  </template>\n</div>'),function(){var e={props:{data:{type:Array,default:function(){return[]}},comType:{type:String,default:"ti-label"},comConf:{type:[Object,String],default:function(){return{value:"=.."}}},blankAs:{type:[Object,Boolean],default:function(){return{text:"i18n:empty",icon:"fas-box-open"}}}},computed:{TopClass:function(){return this.getTopClass()},ItemList:function(){if(!_.isArray(this.data))return[];for(var e=[],t=0;t<this.data.length;t++){var n=this.data[t],i=Ti.Util.explainObj(n,this.comConf);e.push({key:"It-".concat(t),comType:this.comType,comConf:i})}return e},showBlank:function(){return!!this.blankAs},isEmpty:function(){return _.isEmpty(this.ItemList)}},methods:{}};Ti.Preload("ti/com/web/shelf/list/web-shelf-list.mjs",e)}(),Ti.Preload("ti/com/web/shelf/list/_com.json",{name:"web-shelf-list",globally:!0,template:"./web-shelf-list.html",mixins:["./web-shelf-list.mjs"]}),Ti.Preload("ti/com/web/shelf/scroller/web-shelf-scroller.html",'<div class="web-shelf-scroller"\n  :class="TopClass">\n  \x3c!--=======================================--\x3e\n  <div class="scroll-btn at-left" :class="BtnLeftClass">\n    <span @click.left="OnScrollLeft"><ti-icon :value="iconLeft"/></span>\n  </div>\n  \x3c!--=======================================--\x3e\n  <div class="scroller-outer" ref="outer">\n    \x3c!--=====================================--\x3e\n    <div class="scroller-inner" ref="inner"\n      :style="InnerStyle">\n      \x3c!--===================================--\x3e\n      <div\n        v-for="it in ItemList"\n          class="scroller-tile"\n          :key="it.key"\n          :style="ItemStyle"\n          :class="it.className"\n          @mouseenter="OnEnterTile(it.rawData)"\n          @mouseleave="OnLeaveTile(it.rawData)">\n          <component\n            :is="it.comType"\n            v-bind="it.comConf"/>\n      </div>\n      \x3c!--===================================--\x3e\n    </div>\n    \x3c!--=====================================--\x3e\n  </div>\n  \x3c!--=======================================--\x3e\n  <div class="scroll-btn at-right" :class="BtnRightClass">\n    <span @click.left="OnScrollRight"><ti-icon :value="iconRight"/></span>\n  </div>\n  \x3c!--=======================================--\x3e\n</div>'),function(){var e={data:function(){return{myScrollLeft:0,myMaxScroll:0,myScrollWidth:0}},props:{data:{type:Array,default:function(){return[]}},cols:{type:Number,default:4},itemWidth:{type:[String,Number],default:void 0},comType:{type:String,default:"ti-label"},comConf:{type:[Object,String],default:function(){return{value:"=.."}}},iconLeft:{type:String,default:"zmdi-chevron-left"},iconRight:{type:String,default:"zmdi-chevron-right"},enterItem:{type:[String,Function],default:void 0},leaveItem:{type:[String,Function],default:void 0},keepScrolling:{type:Boolean,default:!1}},computed:{TopClass:function(){return this.getTopClass()},InnerStyle:function(){return{left:Ti.Css.toSize(this.myScrollLeft)}},ItemStyle:function(){return Ti.Util.isNil(this.itemWidth)?this.cols>0?{width:Ti.Types.toPercent(1/this.cols)}:void 0:Ti.Css.toSizeRem100({width:this.itemWidth})},isLeftEnabled:function(){return this.myScrollLeft<0},isRightEnabled:function(){return this.myScrollLeft+this.myMaxScroll>this.myScrollWidth},BtnLeftClass:function(){return{"is-enabled":this.isLeftEnabled,"is-disabled":!this.isLeftEnabled}},BtnRightClass:function(){return{"is-enabled":this.isRightEnabled,"is-disabled":!this.isRightEnabled}},ItemList:function(){if(!_.isArray(this.data))return[];for(var e=[],t=0;t<this.data.length;t++){var n=this.data[t],i=Ti.Util.explainObj(n,this.comConf);e.push({key:"It-".concat(t),className:n.className,rawData:n,comType:this.comType,comConf:i})}return e}},methods:{OnScrollLeft:function(){if(this.isLeftEnabled){var e=Math.abs(this.myScrollLeft);e=Math.min(this.myScrollWidth,e),this.myScrollLeft+=e}},OnScrollRight:function(){if(this.isRightEnabled){var e=this.myMaxScroll+this.myScrollLeft-this.myScrollWidth,t=Math.min(this.myScrollWidth,e);this.myScrollLeft-=t}},OnEnterTile:function(e){_.isFunction(this.enterItem)?this.enterItem(e):_.isString(this.enterItem)&&this.$notify(this.enterItem,e)},OnLeaveTile:function(e){_.isFunction(this.leaveItem)?this.leaveItem(e):_.isString(this.leaveItem)&&this.$notify(this.leaveItem,e)},evalScrolling:function(){this.myMaxScroll=this.$refs.inner.scrollWidth,this.myScrollWidth=this.$refs.inner.getBoundingClientRect().width,this.myScrollLeft=0}},watch:{data:{handler:function(e,t){var n=this,i=_.size(e),a=_.size(t);this.keepScrolling&&this.myScrollWidth&&i==a||this.$nextTick(function(){n.evalScrolling()})},immediate:!0}}};Ti.Preload("ti/com/web/shelf/scroller/web-shelf-scroller.mjs",e)}(),Ti.Preload("ti/com/web/shelf/scroller/_com.json",{name:"web-shelf-scroller",globally:!0,template:"./web-shelf-scroller.html",mixins:["./web-shelf-scroller.mjs"]}),Ti.Preload("ti/com/web/shelf/slide/web-shelf-slide.html",'<div class="web-shelf-slide"\n  :class="TopClass"\n  :style="TopStyle">\n  \x3c!--\n    Main\n  --\x3e\n  <div class="as-main">\n    <div\n      v-for="it in ItemList"\n        :key="it.key"\n        class="as-con"\n        :class="it.className">\n        <component :is="it.comType" v-bind="it.comConf"/>\n    </div>\n  </div>\n  \x3c!--\n    Item List\n  --\x3e\n  <div class="as-indicator">\n    <div\n      v-for="it in ItemList"\n        class="as-item"\n        :class="it.className"\n        @click.left.stop="OnClickIndicator(it)">\n    </div>\n  </div>\n  \x3c!--\n    Btn: Prev\n  --\x3e\n  <div class="as-btn is-prev" @click.left="prevItem">\n    <i class="im im-angle-left"></i>\n  </div>\n  \x3c!--\n    Btn: Next\n  --\x3e\n  <div class="as-btn is-next" @click.left="nextItem">\n    <i class="im im-angle-right"></i>\n  </div>\n</div>'),function(){var e={data:function(){return{myCurrentIndex:0}},props:{data:{type:Array,default:function(){return[]}},comType:{type:String,default:"ti-label"},comConf:{type:[Object,String],default:function(){return{value:"=.."}}},interval:{type:Number,default:0},idBy:{type:String,default:"id"},width:{type:[Number,String],default:void 0},height:{type:[Number,String],default:void 0}},computed:{TopClass:function(){return this.getTopClass()},TopStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})},isLeftEnabled:function(){return!0},isRightEnabled:function(){return!0},BtnLeftClass:function(){return{"is-enabled":this.isLeftEnabled,"is-disabled":!this.isLeftEnabled}},BtnRightClass:function(){return{"is-enabled":this.isRightEnabled,"is-disabled":!this.isRightEnabled}},ItemList:function(){if(!_.isArray(this.data))return[];for(var e=[],t=0;t<this.data.length;t++){var n=this.data[t],i=t==this.myCurrentIndex?"is-current":null,a=Ti.Util.explainObj(n,this.comConf);e.push({key:this.getItemKey(n,t),index:t,className:i,comType:this.comType,comConf:a})}return e}},methods:{OnClickIndicator:function(e){var t=e.index;this.myCurrentIndex=t},getItemKey:function(e,t){return _.get(e,this.idBy)||"It-".concat(t)},prevItem:function(){var e=Ti.Num.scrollIndex(this.myCurrentIndex-1,this.ItemList.length);this.myCurrentIndex=e},nextItem:function(){var e=Ti.Num.scrollIndex(this.myCurrentIndex+1,this.ItemList.length);this.myCurrentIndex=e},autoPlayNextItem:function(){var e=this;this.interval>0&&_.delay(function(){e.mousein||e.nextItem(),e.autoPlayNextItem()},1e3*this.interval)}},watch:{interval:function(e){e>0&&this.autoPlayNextItem()}},mounted:function(){this.autoPlayNextItem()}};Ti.Preload("ti/com/web/shelf/slide/web-shelf-slide.mjs",e)}(),Ti.Preload("ti/com/web/shelf/slide/_com.json",{name:"web-shelf-slide",globally:!0,template:"./web-shelf-slide.html",mixins:["./web-shelf-slide.mjs"]}),Ti.Preload("ti/com/web/shelf/wall/web-shelf-wall.html",'<div class="web-shelf-wall"\n  :class="TopClass">\n  \x3c!--\n    Blank\n  --\x3e\n  <ti-loading\n    v-if="isEmpty"\n      class="as-big"\n      v-bind="blankAs"/>\n  \x3c!--\n    Each Items\n  --\x3e\n  <template v-else>\n    <div v-for="wr in WallList"\n      class="wall-group"\n      :key="wr.key">\n      \x3c!--\n        ===========================================\n        Items in row\n      --\x3e\n      <template v-for="it in wr.items">\n        \x3c!--\n          Blank\n        --\x3e\n        <div\n          v-if="it.blank"\n            class="wall-tile is-blank"\n            :style="ItemStyle"></div>\n        \x3c!--\n          Normal Item\n        --\x3e\n        <div\n          v-else\n            class="wall-tile is-com"\n            :style="ItemStyle">\n            <component\n              :is="it.comType"\n              v-bind="it.comConf"/>\n        </div>\n      </template> \x3c!-- End item--\x3e\n    </div> \x3c!--End Row--\x3e\n  </template>\n</div>'),function(){var e={props:{data:{type:Array,default:function(){return[]}},cols:{type:Number,default:4,validator:function(e){return e>0&&parseInt(e)==e}},comType:{type:String,default:"ti-label"},comConf:{type:[Object,String],default:function(){return{value:"=.."}}},blankAs:{type:Object,default:function(){return{text:"i18n:empty",icon:"fas-box-open"}}}},computed:{TopClass:function(){return this.getTopClass()},ItemStyle:function(){return{width:Ti.Types.toPercent(1/this.cols)}},WallList:function(){if(!_.isArray(this.data))return[];for(var e=[],t=[],n=1,i=0;i<this.data.length;i++){var a=this.data[i],r=Ti.Util.explainObj(a,this.comConf);t.push({key:"It-".concat(i),comType:this.comType,comConf:r}),n>=this.cols?(n=1,e.push({key:"Row-".concat(e.length),items:t}),t=[]):n++}if(!_.isEmpty(t)){for(var o=t.length;o<this.cols;o++)t.push({key:"It-".concat(o),blank:!0});e.push({key:"Row-".concat(e.length),items:t})}return e},isEmpty:function(){return _.isEmpty(this.WallList)}},methods:{}};Ti.Preload("ti/com/web/shelf/wall/web-shelf-wall.mjs",e)}(),Ti.Preload("ti/com/web/shelf/wall/_com.json",{name:"web-shelf-wall",globally:!0,template:"./web-shelf-wall.html",mixins:["./web-shelf-wall.mjs"]}),Ti.Preload("ti/com/web/text/heading/web-text-heading.html",'<div class="web-text-heading"\n  :class="TopClass">\n  \x3c!--Icon--\x3e\n  <div\n    v-if="icon"\n      class="as-icon"><ti-icon :value="icon"/></div>\n  \x3c!--Title--\x3e\n  <div\n    v-if="title"\n      class="as-title"\n      :class="TitleClass"\n      :style="TitleStyle"\n      @click.left="OnClickTitle"><span>{{title|i18n}}</span></div>\n  \x3c!--Comments--\x3e\n  <div\n    v-if="comment"\n      class="as-comment"><span>{{comment|i18n}}</span></div>\n  \x3c!--View more--\x3e\n  <div\n    v-if="more"\n      class="as-more"\n      @click.left="OnClickMore"><span>{{more|i18n}}</span></div>\n</div>'),function(){var e={props:{icon:{type:String,default:null},title:{type:String,default:null},titleClass:{type:[String,Array,Object],default:void 0},titleStyle:{type:Object,default:void 0},comment:{type:String,default:null},more:{type:String,default:null},value:null},computed:{TopClass:function(){return this.getTopClass()},TitleClass:function(){return Ti.Css.mergeClassName(this.titleClass)},TitleStyle:function(){return Ti.Css.toStyle(this.titleStyle)}},methods:{OnClickTitle:function(){this.$notify("fire",this.value)},OnClickMore:function(){this.$notify("more",this.value)}}};Ti.Preload("ti/com/web/text/heading/web-text-heading.mjs",e)}(),Ti.Preload("ti/com/web/text/heading/_com.json",{name:"web-text-heading",globally:!0,template:"./web-text-heading.html",mixins:["./web-text-heading.mjs"]}),Ti.Preload("ti/com/web/text/raw/web-text-raw.html",'<div class="web-text-raw" :class="TopClass">\n  \x3c!--\n    Icon\n  --\x3e\n  <ti-icon \n    v-if="icon"\n      :value="icon"/>\n  \x3c!--\n    Value As Text\n  --\x3e\n  <div\n    v-if="hasValue"\n      class="as-text">\n      <template v-if="i18n">\n        <div v-for="li in TheValue">{{li | i18n}}</div>\n      </template>\n      <template v-else>\n        <div v-for="li in TheValue">{{li}}</div>\n      </template>\n  </div>\n</div>'),function(){var e={props:{icon:{type:[String,Object],default:void 0},value:{type:[String,Number,Boolean,Array],default:void 0},lineSeperater:{type:String,default:"\n"},i18n:{type:Boolean,default:!1}},computed:{TopClass:function(){return this.getTopClass()},hasValue:function(){return!Ti.Util.isNil(this.value)},TheValue:function(){if(_.isString(this.value)){if(this.lineSeperater){var e=this.value.split(this.lineSeperater);return _.map(e,function(e){return _.trim(e)}),e}return[this.value]}return _.isArray(this.value)?this.value:[this.value]}}};Ti.Preload("ti/com/web/text/raw/web-text-raw.mjs",e)}(),Ti.Preload("ti/com/web/text/raw/_com.json",{name:"web-text-raw",globally:!0,template:"./web-text-raw.html",mixins:["./web-text-raw.mjs"]}),Ti.Preload("ti/com/web/tile/address/web-tile-address.html",'<div class="web-tile-address"\n  :class="TopClass"\n  @click.left="OnClickTop">\n  \x3c!--\n    Center\n  --\x3e\n  <div class="at-center">\n    \x3c!--Has Value--\x3e\n    <template v-if="hasValue">\n      <div class="is-info">\n        <div\n          v-if="Item.consignee">\n            <span>{{\'address-consignee\'|i18n}}:</span>\n            <em>{{Item.consignee}}</em></div>\n        <div\n          v-if="Item.phone">\n            <span>{{\'address-k-phone\'|i18n}}:</span>\n            <em>{{Item.phone}}</em></div>\n        <div\n          v-if="Item.email">\n            <span>{{\'address-k-email\'|i18n}}:</span>\n            <em>{{Item.email}}</em></div>\n      </div>\n      <div class="is-big">\n        <span class="as-street">{{Item.street}}</span>\n        <span class="as-door">{{Item.door}}</span>\n      </div>\n    </template>\n    \x3c!--Blank--\x3e\n    <ti-loading\n      v-else \n        class="as-big ti-fill-parent"\n        style="padding:0"\n        v-bind="blankAs"/>\n  </div>\n  \x3c!--\n    Left top\n  --\x3e\n  <div class="at-left-top is-float">\n    <template v-if="title">\n      <span class="is-bold">{{title | i18n}}</span>\n    </template>\n    <template v-else>\n      <a \n        v-if="can.default && !Item.dftaddr"\n          @click="OnSetDefault">{{\'address-set-dft\'|i18n}}</a>\n      <span\n        v-else-if="Item.dftaddr"\n          class="is-bold">{{\'address-is-dft\'|i18n}}</span>\n    </template>\n  </div>\n  \x3c!--\n    Left-bottom\n  --\x3e\n  <div class="at-left-bottom is-float">\n    <span\n      v-if="Item.city">{{Item.city}}</span>\n    <span\n      v-if="Item.province">{{Item.province}}</span>\n    <span\n      v-if="showCountry && Item.countryName">{{Item.countryName}}</span>\n  </div>\n  \x3c!--\n    Right-top\n  --\x3e\n  <div\n    v-if="can.remove || can.edit || can.choose" \n      class="at-right-top is-float">\n      <a v-if="can.remove" @click="OnRemove">{{\'del\'|i18n}}</a>\n      <a v-if="can.edit" @click="OnEdit">{{\'edit\'|i18n}}</a>\n      <a v-if="can.choose" @click="OnChoose">{{\'choose\'|i18n}}</a>\n      <a v-if="can.add" @click="OnAdd">{{\'address-shipping-add\'|i18n}}</a>\n  </div>  \n</div>'),function(){var e={props:{value:{type:Object,default:function(){return{}}},mapping:{type:Object,default:function(){return{id:"id",country:"country",postcode:"postcode",province:"province",city:"city",street:"street",door:"door",consignee:"consignee",phone:"phone",email:"email",dftaddr:"dftaddr"}}},countries:{type:Object,default:void 0},showCountry:{type:Boolean,default:!0},title:{type:String,default:void 0},can:{type:Object,default:function(){return{remove:!0,edit:!0,default:!0,choose:!1,add:!1}}},emitRawValue:{type:Boolean,default:!0},autoHighlight:{type:Boolean,default:!0},currentId:{type:String,default:void 0},blankAs:{type:Object,default:function(){return{icon:"im-location",text:"i18n:address-nil"}}},selectable:{type:Boolean,default:!1}},computed:{TopClass:function(){var e=!1;return _.isUndefined(this.currentId)?this.autoHighlight&&this.Item.dftaddr&&(e=!0):e=this.currentId==this.Item.id,this.getTopClass({"is-highlight":e,"is-selectable":this.selectable})},hasValue:function(){return!_.isEmpty(this.value)},Item:function(){var e=Ti.Util.translate(this.value,this.mapping)||{};return this.countries?e.countryName=this.countries[e.country]:e.countryName=e.country,e}},methods:{OnClickTop:function(){if(this.selectable){var e=this.getEmitValue();this.$notify("select",e)}},OnRemove:function(){var e=this.getEmitValue();this.$notify("remove",e)},OnSetDefault:function(){var e=this.getEmitValue();this.$notify("set:default",e)},OnEdit:function(){var e=this.getEmitValue();this.$notify("edit",e)},OnChoose:function(){var e=this.getEmitValue();this.$notify("choose",e)},OnAdd:function(){var e=this.getEmitValue();this.$notify("add",e)},getEmitValue:function(){var e=this.emitRawValue?this.value:this.Item;return _.cloneDeep(e)}}};Ti.Preload("ti/com/web/tile/address/web-tile-address.mjs",e)}(),Ti.Preload("ti/com/web/tile/address/_com.json",{name:"web-tile-address",globally:!0,template:"./web-tile-address.html",mixins:["./web-tile-address.mjs"]}),Ti.Preload("ti/com/web/tile/comment/web-tile-comment.html",'<div class="web-tile-comment"\n  :class="TopClass">\n  \x3c!--\n    Left: User Avator\n  --\x3e\n  <div class="at-left">\n    <ti-icon :value="AvatarIcon"/>\n  </div>\n  \x3c!--\n    Right: Comment\n  --\x3e\n  <div class="at-right">\n      \x3c!--Head--\x3e\n      <div class="as-head">\n        <span class="as-u-name">{{Post.userName}}</span>\n        <span class="as-time">{{CreateTimeText}}</span>\n      </div>\n      \x3c!--Content--\x3e\n      <div class="as-content">{{Post.content}}</div>\n  </div>\n</div>'),function(){var e={props:{value:{type:Object,default:function(){return{}}},mapping:{type:Object,default:function(){return{userId:"uid",userName:"unm",avatar:"avatar",content:"brief",createTime:"ct"}}},avatarSrc:{type:String,default:void 0},userIcon:{type:[String,Object],default:"fas-user"}},computed:{TopClass:function(){return this.getTopClass()},Post:function(){return Ti.Util.translate(this.value,this.mapping)||{}},AvatarIcon:function(){return _.get(this.Post,"avatar")&&this.avatarSrc?{type:"image",value:Ti.S.renderBy(this.avatarSrc,this.Post)}:this.userIcon},CreateTimeText:function(){if(this.Post.createTime)return Ti.DateTime.timeText(this.Post.createTime)}},methods:{}};Ti.Preload("ti/com/web/tile/comment/web-tile-comment.mjs",e)}(),Ti.Preload("ti/com/web/tile/comment/_com.json",{name:"web-tile-comment",globally:!0,template:"./web-tile-comment.html",mixins:["./web-tile-comment.mjs"]}),Ti.Preload("ti/com/web/tile/order/web-tile-order.html",'<div class="web-tile-order"\n  :class="TopClass">\n  \x3c!--\n    Summary\n  --\x3e\n  <div class="as-summary">\n    \x3c!--ID--\x3e\n    <div class="or-field as-id">\n      <span>{{\'order-k-id\'|i18n}}</span>\n      <a \n        v-if="OrderHref"\n          :href="OrderHref"\n          @click.left.prevent="OnClickOrder">{{OrderId}}</a>\n      <em\n        v-else>{{OrderId}}</em>\n    </div>\n    \x3c!--Date--\x3e\n    <div class="or-field as-datetime">\n      <span>{{\'wn-key-ct\'|i18n}}</span>\n      <em>{{Order.ct|datetime}}</em>\n    </div>\n    \x3c!--Fee--\x3e\n    <div class="or-field as-price">\n      <span>{{\'order-k-fee\'|i18n}}</span>\n      <em>{{CurrencyChar}}{{Order.fee}}</em>\n    </div>\n    \x3c!--Payment--\x3e\n    <div class="or-field as-pay_tp">\n      <span>{{\'order-k-pay_tp\'|i18n}}</span>\n      <em>{{\'pay-by-\'+Order.pay_tp|i18n}}</em>\n    </div>\n    \x3c!--Status--\x3e\n    <div class="or-field as-st">\n      <span>{{\'order-k-st\'|i18n}}</span>\n      <em>{{OrderStatus|i18n}}</em>\n    </div>\n  </div>\n  \x3c!--\n    Product list\n  --\x3e\n  <div class="as-products">\n    <table>\n      <tr\n        v-for="it in Products"\n          class="as-pro-it">\n          \x3c!--Thumb--\x3e\n          <td><a \n              :href="it.href"\n              @click.left.prevent="OnClickProduct(it)"><img :src="it.src"/></a></td>\n          \x3c!--Title--\x3e\n          <td>\n              <a \n                :href="it.href"\n                @click.left.prevent="OnClickProduct(it)">{{it.title}}</a>\n          </td>\n          \x3c!--Price--\x3e\n          <td class="as-price">{{CurrencyChar}}{{it.price}}</td>\n          \x3c!--Amount--\x3e\n          <td class="as-amount">x{{it.amount}}</td>\n          \x3c!--Subtotal--\x3e\n          <td class="as-subtotal">{{CurrencyChar}}{{it.subtotal}}</td>\n      </tr>\n    </table>\n  </div>\n</div>'),function(){var e={props:{value:{type:Object,default:function(){return{}}},proThumbSrc:{type:String,default:void 0},proHref:{type:String,default:void 0},href:{type:String,default:void 0}},computed:{TopClass:function(){return this.getTopClass("is-".concat(this.OrderStatus))},Order:function(){return this.value||{}},OrderId:function(){var e=this.Order.id;if(e){var t=e.indexOf(":");return t>0?_.trim(e.substring(t+1)):e}return"- unknown -"},OrderStatus:function(){return"or-st-".concat(_.toLower(this.Order.or_st))},OrderHref:function(){if(this.href)return Ti.S.renderBy(this.href,this.Order)},CurrencyChar:function(){return Ti.Bank.getCurrencyChar(this.Order.currency||"RMB")},Products:function(){var e=this,t=[];return _.forEach(this.value.products,function(n){var i=_objectSpread({},n);e.proThumbSrc&&(i.src=Ti.S.renderBy(e.proThumbSrc,n)),e.proHref&&(i.href=Ti.S.renderBy(e.proHref,n)),i.subtotal=Ti.Num.precise(n.price*n.amount),t.push(i)}),t}},methods:{OnClickOrder:function(){this.Order.id&&this.$notify("show:order",this.Order.id)},OnClickProduct:function(e){var t=e.id;t&&this.$notify("open:product",t)}}};Ti.Preload("ti/com/web/tile/order/web-tile-order.mjs",e)}(),Ti.Preload("ti/com/web/tile/order/_com.json",{name:"web-tile-order",globally:!0,template:"./web-tile-order.html",mixins:["./web-tile-order.mjs"]}),Ti.Preload("ti/com/web/widget/frame/widget-frame.html",'<div class="web-widget-frame"\n  :class="TopClass">\n  <template v-if="hasFrameSrce">\n    <iframe :src="FrameSrce" class="ti-fill-parent" :style="FrameStyle"></iframe>\n  </template>\n</div>'),function(){var e={props:{src:{type:String,default:void 0}},computed:{TopClass:function(){return this.getTopClass()},FrameSrce:function(){return _.trim(this.src)},hasFrameSrce:function(){return!!this.FrameSrce},FrameStyle:function(){return{border:0}}},methods:{}};Ti.Preload("ti/com/web/widget/frame/widget-frame.mjs",e)}(),Ti.Preload("ti/com/web/widget/frame/_com.json",{name:"web-widget-frame",globally:!0,template:"./widget-frame.html",mixins:["./widget-frame.mjs"],components:[]}),Ti.Preload("ti/com/web/widget/input/text/widget-input-text.html",'<div class="web-widget-input-text" \n  :class="TopClass" \n  :style="TopStyle"\n  v-ti-activable>\n  \x3c!--\n    Title\n  --\x3e\n  <div\n    v-if="hasTitle"\n      class="as-title">\n      <span>{{title|i18n}}</span>\n      <template v-if="total">\n        <i class="far fa-comments"></i>\n        <em>{{total}}</em>\n      </template>\n  </div>\n  \x3c!--\n    Text\n  --\x3e\n  <div class="as-text">\n    <textarea\n      ref="text"\n      spellcheck="false"\n      :placeholder="placeholder | i18n"\n      :value="TextValue"\n      @change="OnTextChange"></textarea>\n    \x3c!--\n      Bottom Bar\n    --\x3e\n    <div class="as-bar">\n      \x3c!--\n        Left\n      --\x3e\n      <div class="at-left">\n        <div class="as-btn btn-emoji"\n          @click.left="OnBtnEmojiClick">\n          <ti-icon \n            v-if="emojiBtnIcon"\n              :value="emojiBtnIcon"/>\n          <span>{{emojiBtnText|i18n}}</span>\n        </div>\n      </div> \x3c!--Left--\x3e\n      \x3c!--\n        Right\n      --\x3e\n      <div class="at-right">\n        <div class="as-btn btn-post"\n          @click.left="OnBtnPostClick">\n          <ti-icon \n            v-if="postBtnIcon"\n              :value="postBtnIcon"/>\n          <span>{{postBtnText|i18n}}</span>\n        </div>\n      </div> \x3c!-- Right --\x3e\n    </div> \x3c!-- Bottom Bar--\x3e\n  </div>\n</div>'),function(){var e={data:function(){return{myText:void 0}},props:{title:{type:String,default:"i18n:comments"},value:{type:String,default:void 0},total:{type:Number,default:void 0},trimed:{type:Boolean,default:!0},resetAfterPost:{type:Boolean,default:!1},placeholder:{type:[String,Number],default:void 0},hideBorder:{type:Boolean,default:!1},emojiBtnIcon:{type:String,default:"far-smile"},emojiBtnText:{type:String,default:"i18n:emoji"},postBtnIcon:{type:String,default:"fas-paper-plane"},postBtnText:{type:String,default:"i18n:post"},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"2.6rem"}},computed:{TopClass:function(){return Ti.Css.mergeClassName(this.className,{"is-self-actived":this.isSelfActived,"show-border":!this.hideBorder,"hide-border":this.hideBorder})},TopStyle:function(){return Ti.Css.toStyle({width:this.width,height:this.height})},hasTitle:function(){return!!this.title},TextValue:function(){return Ti.Util.fallbackNil(this.myText,this.value)}},methods:{OnTextChange:function(){var e=this.$refs.text.value;this.myText=this.formatValue(e)},OnBtnEmojiClick:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$refs.text.selectionStart,i=e.$refs.text.selectionEnd,t.next=4,Ti.App.Open({title:"i18n:emoji",width:"6.4rem",height:"4.8rem",textOk:null,changeToClose:!0,comType:"TiSheetEmoji",comConf:{}});case 4:if(a=t.sent){t.next=7;break}return t.abrupt("return");case 7:r=e.$refs.text.value,o=r.substring(0,n),s=r.substring(i),e.myText=o+a+s;case 11:case"end":return t.stop()}},t)}))()},OnBtnPostClick:function(){var e=this.formatValue(this.$refs.text.value);e&&e.length>10?(this.$notify("post",e),this.resetAfterPost&&(this.myText="")):Ti.Toast.Open("i18n:post-content-blank","warn")},formatValue:function(e){return e&&this.trimed?_.trim(e):e}}};Ti.Preload("ti/com/web/widget/input/text/widget-input-text.mjs",e)}(),Ti.Preload("ti/com/web/widget/input/text/_com.json",{name:"web-widget-input-text",globally:!0,template:"./widget-input-text.html",mixins:["./widget-input-text.mjs"],components:["@com:ti/sheet/emoji"]}),Ti.Preload("ti/com/web/widget/sharebar/widget-sharebar.html",'<div class="web-widget-sharebar"\n  :class="TopClass">\n  \x3c!--\n    Title\n  --\x3e\n  <div\n    v-if="title"\n      class="as-title">{{title|i18n}}</div>\n  \x3c!--\n    Items\n  --\x3e\n  <div class="as-items">\n    <a\n      v-for="it in TheItems"\n        class="bar-item">\n      <i :class="it.iconClass"></i>\n    </a>\n  </div>\n</div>'),function(){var e={props:{title:{type:String,default:null},items:{type:Array,default:function(){return[]}}},computed:{TopClass:function(){return this.getTopClass()},TheItems:function(){return this.evalItems(this.items)}},methods:{evalItems:function(e){var t=[];return _.forEach(e,function(e,n){var i={facebook:{iconClass:"fab fa-facebook-f"},twitter:{iconClass:"fab fa-twitter"},instagram:{iconClass:"fab fa-instagram"},tumblr:{iconClass:"fab fa-tumblr"}}[e];i&&t.push(i)}),t}}};Ti.Preload("ti/com/web/widget/sharebar/widget-sharebar.mjs",e)}(),Ti.Preload("ti/com/web/widget/sharebar/_com.json",{name:"web-widget-sharebar",globally:!0,template:"./widget-sharebar.html",mixins:["./widget-sharebar.mjs"],components:[]}),Ti.Preload("ti/com/web/widget/summary/widget-summary.html",'<div class="web-widget-summary"\n  :class="TopClass">\n  \x3c!--\n    Title\n  --\x3e\n  <div\n    v-if="title"\n      class="as-title">{{title|i18n}}</div>\n  \x3c!--\n    Items\n  --\x3e\n  <div class="as-list">\n    <div\n      v-for="it in TheItems"\n        class="as-item">\n      \x3c!--Icon--\x3e\n      <ti-icon\n        v-if="it.icon"\n          :value="it.icon"/>\n      \x3c!--Value--\x3e\n      <div class="as-value">{{it.value}}</div>\n      \x3c!--Text--\x3e\n      <div\n        v-if="it.text"\n          class="as-text">{{it.text|i18n}}</div>\n    </div>\n  </div>\n</div>'),function(){var e={props:{title:{type:String,default:void 0},items:{type:Array,default:function(){return[]}}},computed:{TopClass:function(){return this.getTopClass()},TheItems:function(){var e=[];return _.forEach(this.items,function(t,n){e.push({key:"it-".concat(n),index:n,icon:t.icon,text:t.text,value:t.value||0})}),e}}};Ti.Preload("ti/com/web/widget/summary/widget-summary.mjs",e)}(),Ti.Preload("ti/com/web/widget/summary/_com.json",{name:"web-widget-summary",globally:!0,template:"./widget-summary.html",mixins:["./widget-summary.mjs"],components:[]}),Ti.Preload("ti/com/web/widget/user/widget-user.html",'<div class="web-widget-user"\n  :class="TopClass">\n  \x3c!--\n    Avatar\n  --\x3e\n  <div class="as-avatar">\n    <ti-icon :value="TheAvatar"/>\n  </div>\n  \x3c!--\n    Nickname\n  --\x3e\n  <div class="as-title">\n    <div class="as-nickname">{{TheNickname}}</div>\n  </div>\n  \x3c!--\n    Action bar\n  --\x3e\n  <div class="as-actions">\n    <div \n      class="ti-btn reset-passwd"\n      @click="$notify(\'go:passwd:reset\')">{{\'passwd-reset\'|i18n}}</div>\n    <div\n      class="ti-btn edit-profile"\n      @click="$notify(\'go:my:profile\')">{{\'profile-edit\'|i18n}}</div>\n  </div>\n</div>'),function(){var e={props:{me:{type:Object,default:function(){return{}}},avatarSrc:{type:String,default:void 0},avatarIcons:{type:Object,default:function(){return{unknown:"far-user",male:"im-user-male",female:"im-user-female"}}}},computed:{TopClass:function(){return this.getTopClass()},TheAvatar:function(){var e=this.me||{};return this.avatarSrc&&e.thumb?{type:"image",value:Ti.S.renderVars(e.thumb,this.avatarSrc)}:1==e.sex?this.avatarIcons.male:2==e.sex?this.avatarIcons.female:this.avatarIcons.unknown||"far-user"},TheNickname:function(){var e=this.me||{};return e.nickname||e.email||e.phone||e.nm||e.id||"Anonymity"}},methods:{}};Ti.Preload("ti/com/web/widget/user/widget-user.mjs",e)}(),Ti.Preload("ti/com/web/widget/user/_com.json",{name:"web-widget-user",globally:!0,template:"./widget-user.html",mixins:["./widget-user.mjs"],components:[]}),function(){var e={doCreate:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o,s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Wn.Sys.exec("ti creation -cqn id:".concat(e.meta.id),{as:"json"});case 2:return n=t.sent,i=n.types,a=n.typeNames,r=n.freeCreate,t.next=8,Ti.App.Open({title:"i18n:create",type:"success",position:"top",width:640,height:"61.8%",comType:"wn-obj-creation",comConf:{types:i,freeCreate:r},components:["@com:wn/obj/creation"]});case 8:if(!(o=t.sent)||!o.name){t.next=34;break}if(!(o.name.search(/[%;:"'*?`\t^<>\/\\]/)>=0)){t.next=14;break}return t.next=13,Ti.Alert("i18n:wn-create-invalid");case 13:return t.abrupt("return",t.sent);case 14:if(!(o.length>256)){t.next=18;break}return t.next=17,Ti.Alert("i18n:wn-create-too-long");case 17:return t.abrupt("return",t.sent);case 18:return o.race=o.race||"FILE","folder"==o.type&&(o.type=void 0),"FILE"==o.race&&(o.type||(o.type=Ti.Util.getSuffixName(o.name)),o.name.endsWith(o.type)||(o.name+=".".concat(o.type))),s=JSON.stringify({nm:o.name,tp:o.type,race:o.race,mime:o.mime}),t.next=24,Wn.Sys.exec2("obj id:".concat(e.meta.id," -cqno -new '").concat(s,"'"),{as:"json"});case 24:if(!((c=t.sent)instanceof Error)){t.next=29;break}Ti.Toast.Open("i18n:wn-create-fail","error"),t.next=34;break;case 29:return Ti.Toast.Open("i18n:wn-create-ok","success"),t.next=32,e._run("reload");case 32:e.myCheckedIds=[c.id],e.myCurrentId=c.id;case 34:case"end":return t.stop()}},t)}))()},doRename:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.getCurrentItem()){t.next=5;break}return t.next=4,Ti.Toast.Open("i18n:wn-rename-none","warn");case 4:return t.abrupt("return",t.sent);case 5:return e.setItemStatus(n.id,"renaming"),t.prev=6,t.next=9,Ti.Prompt({text:"i18n:wn-rename",vars:{name:n.nm}},{title:"i18n:rename",placeholder:n.nm,value:n.nm});case 9:if(!(i=t.sent)){t.next=32;break}if(!(i.search(/[%;:"'*?`\t^<>\/\\]/)>=0)){t.next=15;break}return t.next=14,Ti.Alert("i18n:wn-rename-invalid");case 14:return t.abrupt("return",t.sent);case 15:if(!(i.length>256)){t.next=19;break}return t.next=18,Ti.Alert("i18n:wn-rename-too-long");case 18:return t.abrupt("return",t.sent);case 19:if(a=Ti.Util.getSuffix(n.nm),r=Ti.Util.getSuffix(i),!a||a==r){t.next=26;break}return t.next=24,Ti.Confirm("i18n:wn-rename-suffix-changed");case 24:(o=t.sent)&&(i+=a);case 26:return e.setItemStatus(n.id,"loading"),t.next=29,Wn.Sys.exec2("obj id:".concat(n.id," -cqno -u 'nm:\"").concat(i,"\"'"),{as:"json"});case 29:(s=t.sent)instanceof Error?Ti.Toast.Open("i18n:wn-rename-fail","error"):(Ti.Toast.Open("i18n:wn-rename-ok","success"),e.setItem(s)),e.setItemStatus({id:n.id,status:{loading:!1}});case 32:return t.prev=32,e.setItemStatus(n.id,null),t.finish(32);case 35:case"end":return t.stop()}},t,null,[[6,,32,35]])}))()},doDelete:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o,s,c,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.getCheckedItems(),!_.isEmpty(n)){t.next=5;break}return t.next=4,Ti.Toast.Open("i18n:wn-del-none","warn");case 4:return t.abrupt("return",t.sent);case 5:console.log("haha!!!"),i=0,a={},t.prev=8,r=_createForOfIteratorHelper(n),t.prev=10,r.s();case 12:if((o=r.n()).done){t.next=40;break}if((s=o.value)&&s.id&&s.nm){t.next=16;break}return t.abrupt("continue",38);case 16:if(!s.__is||!s.__is.loading&&!s.__is.removed){t.next=18;break}return t.abrupt("continue",38);case 18:if(!a[s.id]){t.next=20;break}return t.abrupt("continue",38);case 20:if(e.setItemStatus(s.id,"loading"),"DIR"!=s.race){t.next=32;break}return t.next=24,Wn.Sys.exec("count -A id:".concat(s.id));case 24:if(c=t.sent,!((c=parseInt(c))>0)){t.next=32;break}return t.next=29,Ti.Confirm({text:"i18n:wn-del-no-empty-folder",vars:{nm:s.nm}});case 29:if(t.sent){t.next=32;break}return e.setItemStatus(s.id,null),t.abrupt("continue",38);case 32:return t.next=34,Wn.Sys.exec("rm ".concat("DIR"==s.race?"-r":""," id:").concat(s.id));case 34:e.setItemStatus(s.id,"removed"),(l=/^id:(.+)$/.exec(s.videoc_dir))&&(u=l[1],a[u]=!0,e.setItemStatus(u,"removed")),i++;case 38:t.next=12;break;case 40:t.next=45;break;case 42:t.prev=42,t.t0=t.catch(10),r.e(t.t0);case 45:return t.prev=45,r.f(),t.finish(45);case 48:return t.next=50,e._run("reload");case 50:return t.prev=50,Ti.Toast.Open("i18n:wn-del-ok",{N:i},"success"),t.finish(50);case 53:case"end":return t.stop()}},t,null,[[8,,50,53],[10,42,45,48]])}))()},doUpload:function(){var e=arguments,t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.length>0&&void 0!==e[0]?e[0]:[],!_.isFunction(t.beforeUpload)){n.next=4;break}return n.next=4,t.beforeUpload();case 4:a=_.map(i,function(e,t){return{id:"U".concat(t,"_").concat(Ti.Random.str(6)),file:e,total:e.size,current:0}}),t.myUploadigFiles=a,r={},o=_createForOfIteratorHelper(a),n.prev=8,c=regeneratorRuntime.mark(function e(){var n,i,a,o,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.value,i=n.file,e.next=4,Wn.Io.uploadFile(i,{target:"id:".concat(t.meta.id),progress:function(e){n.current=e.loaded}});case 4:a=e.sent,o=a.ok,c=a.data,o&&(r[c.id]=!0);case 8:case"end":return e.stop()}},e)}),o.s();case 11:if((s=o.n()).done){n.next=15;break}return n.delegateYield(c(),"t0",13);case 13:n.next=11;break;case 15:n.next=20;break;case 17:n.prev=17,n.t1=n.catch(8),o.e(n.t1);case 20:return n.prev=20,o.f(),n.finish(20);case 23:return _.delay(function(){t.myUploadigFiles=[]},1e3),Ti.Toast.Open("i18n:upload-done","success"),n.next=27,t._run("reload");case 27:t.myCheckedIds=r,t.myCurrentId=null;case 29:case"end":return n.stop()}},n,null,[[8,17,20,23]])}))()},doDownload:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.getCheckedItems(),!_.isEmpty(n)){t.next=5;break}return t.next=4,Ti.Toast.Open("i18n:wn-download-none","warn");case 4:return t.abrupt("return",t.sent);case 5:if(!(n.length>5)){t.next=10;break}return t.next=8,Ti.Confirm({text:"i18n:wn-download-too-many",vars:{N:n.length}});case 8:if(t.sent){t.next=10;break}return t.abrupt("return");case 10:i=_createForOfIteratorHelper(n),t.prev=11,i.s();case 13:if((a=i.n()).done){t.next=25;break}if("FILE"==(r=a.value).race){t.next=21;break}return t.next=18,Ti.Confirm({text:"i18n:wn-download-dir",vars:r},{textYes:"i18n:continue",textNo:"i18n:terminate"});case 18:if(t.sent){t.next=20;break}return t.abrupt("return");case 20:return t.abrupt("continue",23);case 21:o=Wn.Util.getDownloadLink(r),Ti.Be.OpenLink(o);case 23:t.next=13;break;case 25:t.next=30;break;case 27:t.prev=27,t.t0=t.catch(11),i.e(t.t0);case 30:return t.prev=30,i.f(),t.finish(30);case 33:case"end":return t.stop()}},t,null,[[11,27,30,33]])}))()}};Ti.Preload("ti/com/wn/adaptlist/wn-adaptlist-methods.mjs",e)}(),function(){var e={meta:{type:Object,default:null},data:{type:[Object,Array],default:null},changedId:{type:String,default:null},status:{type:Object,default:function(){return{reloading:!1}}},droppable:{type:Boolean,default:!0},multi:{type:Boolean,default:!0},checkable:{type:Boolean,default:!0},blurable:{type:Boolean,default:!0},selectable:{type:Boolean,default:!0},spacing:{type:String,default:"sm"},keeyHiddenBy:{type:String,default:"wn-list-adaptview-expose-hidden"},routers:{type:Object,default:function(){return{reload:"dispatch:current/reload"}}},listConf:{type:Object,default:void 0},itemClassName:{type:String,default:null},beforeUpload:{type:Function,default:void 0}};Ti.Preload("ti/com/wn/adaptlist/wn-adaptlist-props.mjs",e)}(),Ti.Preload("ti/com/wn/adaptlist/wn-adaptlist.html",'<div class="wn-adaptlist" \n  :class="TopClass"\n  v-ti-activable>\n  <div\n    class="list-con ti-fill-parent"\n    v-drop-files.mask="OnDropFiles">\n    \x3c!--==================================\n      Show Loading\n    --\x3e\n    <ti-loading\n      v-if="isReloading"\n        class="as-reloading as-mid-tip"\n        text="i18n:reloading"/>\n    \x3c!--==================================\n      Data List\n    --\x3e\n    <ti-wall\n      v-else\n        class="ti-fill-parent"\n        :data="WallDataList"\n        :spacing="spacing"\n        :changed-id="changedId"\n        :current-id="myCurrentId"\n        :checked-ids="myCheckedIds"\n        :multi="multi"\n        :checkable="checkable"\n        :blurable="blurable"\n        :selectable="selectable"\n        :display="WallItemDisplay"\n        :puppet-mode="true"\n        v-bind="listConf"\n        :on-init="OnListInit"\n        @select="OnItemSelecteItem"\n        @open="OnItemOpen"/>\n    \x3c!--==================================\n      Hidden file upload control\n    --\x3e\n    <input \n      type="file" \n      ref="file" \n      class="ti-hide"\n      multiple\n      @change.stop.seft="OnSelectLocalFilesToUpload">\n    \x3c!--==================================\n      Uploading Pannel\n    --\x3e\n    <div\n      class="wal-uploading"\n      :class="UploadingClass">\n      <header>\n        <ti-icon value="fas-spinner fa-pulse"/>\n        <span>{{\'uploading\'|i18n}}</span>\n      </header>\n      <section>\n        <ti-wall \n          :data="TheUploadingList"\n          :spacing="spacing"\n          :selectable="false"\n          :multi="false"\n          :checkable="false"\n          :blurable="false"\n          :display="UploadingItemDisplay"\n          :puppet-mode="true"/>\n      </section>\n    </div>\n    \x3c!--==================================--\x3e\n  </div>\n</div>'),function(){var e={data:function(){return{myCurrentId:null,myCheckedIds:{},myUploadigFiles:[],myItemStatus:{},myExposeHidden:!0,myData:null}},computed:{TopClass:function(){return this.getTopClass()},isReloading:function(){return _.get(this.status,"reloading")},WallItemDisplay:function(){return{key:"..",comType:"ti-obj-thumb",comConf:{"...":"${=value}"}}},UploadingItemDisplay:function(){return{key:"..",comType:"ti-obj-thumb",comConf:{"...":"${=value}"}}},hasDataList:function(){return this.myData&&_.isArray(this.myData.list)},WallDataList:function(){if(!this.myData||_.isEmpty(this.myData.list))return[];var e,t=[],n=_createForOfIteratorHelper(this.myData.list);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(!this.isHiddenItem(i)){var a=Wn.Util.getObjThumbInfo(i,{status:this.myItemStatus,exposeHidden:this.myExposeHidden});t.push(a)}}}catch(e){n.e(e)}finally{n.f()}return t},TheUploadingList:function(){var e=this.myUploadigFiles,t=[];if(_.isArray(e)){var n,i=_createForOfIteratorHelper(e);try{for(i.s();!(n=i.n()).done;){var a=n.value,r=a.file.type,o=Ti.Util.getSuffixName(a.file.name),s=void 0;s=/^image\//.test(r)?{type:"localFile",value:a.file}:Ti.Icons.get({tp:o,mime:r}),t.push({id:a.id,title:a.file.name,preview:s,progress:a.current/a.total})}}catch(e){i.e(e)}finally{i.f()}}return t},hasUploading:function(){return this.myUploadigFiles.length>0},UploadingClass:function(){return this.hasUploading?"up-show":"up-hide"}},methods:{OnListInit:function(e){this.$innerList=e},OnItemSelecteItem:function(e){var t=e.currentId,n=e.checkedIds,i=e.currentIndex;this.myCurrentId=t,this.myCheckedIds=n;var a={current:this.getCurrentItem(),checked:this.getCheckedItems(),checkedIds:n,currentId:t,currentIndex:i};return this.$notify("select",a),{stop:!0}},OnItemOpen:function(){var e=this.getCurrentItem();e&&this.$notify("open",e)},OnDropFiles:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.droppable){n.next=2;break}return n.abrupt("return");case 2:return i=_toConsumableArray(e),n.next=5,t.doUpload(i);case 5:t.$nextTick(function(){var e=[];t.hasDataList&&_.forEach(t.myData.list,function(n){t.myCheckedIds[n.id]&&e.push(n)}),t.$notify("uploaded",e)});case 6:case"end":return n.stop()}},n)}))()},OnSelectLocalFilesToUpload:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.OnDropFiles(e.target.files);case 2:t.$refs.file.value="";case 3:case"end":return n.stop()}},n)}))()},getCurrentItem:function(){var e=this;if(this.myCurrentId&&this.hasDataList)return _.find(this.myData.list,function(t){return t.id==e.myCurrentId})},getCheckedItems:function(){var e=this;return this.hasDataList?_.filter(this.myData.list,function(t){return e.myCheckedIds[t.id]}):[]},setItem:function(e){if(e&&this.hasDataList){var t=_.map(this.myData.list,function(t){return t.id==e.id?e:t});this.myData.list=t}},setItemStatus:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loading";this.myItemStatus=_.assign({},this.myItemStatus,_defineProperty({},e,t))},invokeList:function(e){console.log("methodName"),Ti.InvokeBy(this.$innerList,e)},isHiddenItem:function(e){return!(!e.nm.startsWith(".")||this.myExposeHidden)},_run:function(e,t){var n=this;return _asyncToGenerator(regeneratorRuntime.mark(function i(){var a,r;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(a=(n.routers||{})[e],!_.isFunction(a)){i.next=6;break}return i.next=4,a();case 4:i.next=11;break;case 6:if(!a){i.next=11;break}return r=Ti.App(n),i.next=10,r.exec(a,t);case 10:return i.abrupt("return",i.sent);case 11:case"end":return i.stop()}},i)}))()},toggleExposeHidden:function(){var e=!this.myExposeHidden;this.myExposeHidden=e,this.keeyHiddenBy&&Ti.Storage.session.set(this.keeyHiddenBy,e)},openLocalFileSelectdDialog:function(){this.$refs.file.click()},openCurrentMeta:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.getCurrentItem()||e.meta){t.next=3;break}return t.abrupt("return",Ti.Toast.Open("i18n:nil-obj"));case 3:return t.next=5,Wn.EditObjMeta(n,{fields:"auto"});case 5:(i=t.sent)&&(a=i.updates,r=i.data,e.setItem(r));case 7:case"end":return t.stop()}},t)}))()},syncMyData:function(){this.myData=_.cloneDeep(this.data)||{list:[],pager:{}},this.myItemStatus={}}},watch:{data:{handler:"syncMyData",immediate:!0},myExposeHidden:function(e){this.$notify("expose-hidden",e)}},mounted:function(){var e=this;Ti.Fuse.getOrCreate().add({key:"wn-list-adaptview-check-uploading",everythingOk:function(){return!e.hasUploading},fail:function(){Ti.Toast.Open("i18n:upload-nofinished","warn")}}),this.keeyHiddenBy&&(this.myExposeHidden=Ti.Storage.session.getBoolean(this.keeyHiddenBy))},beforeDestroy:function(){Ti.Fuse.get().remove("wn-list-adaptview-check-uploading")}};Ti.Preload("ti/com/wn/adaptlist/wn-adaptlist.mjs",e)}(),Ti.Preload("ti/com/wn/adaptlist/_com.json",{name:"wn-adaptlist",globally:!0,template:"./wn-adaptlist.html",props:"./wn-adaptlist-props.mjs",methods:"./wn-adaptlist-methods.mjs",mixins:["./wn-adaptlist.mjs"],components:["@com:ti/obj/thumb","@com:ti/wall"]}),Ti.Preload("ti/com/wn/chart/combo/wn-chart-combo.html",'<div class="wn-chart-combo"\n  :class="TopClass">\n  \x3c!--\n    Chart List\n  --\x3e\n  <div class="as-main">\n    <TiChartCombo\n      v-for="li of TheChartList" \n        :key="li.index"\n        v-bind="li"\n        :data="getChartData(li.index)"\n        @change:chart:name="OnChangeChartName(li, $event)"\n        @change:chart:type="OnChangeChartType(li, $event)"\n        @change:chart:datespan="OnChangeChartDateSpan(li, $event)"\n        @reload:data="OnReloadChartData(li, $event)"/>\n  </div>\n</div>'),function(){var e={data:function(){return{myCharts:[],myShowChartNames:[],myChartData:{},myDate:void 0,mySpan:void 0,myChartComConf:{}}},props:{chartDefines:{type:Object,default:void 0},chartOptions:{type:Object,default:void 0},charts:{type:Array,default:function(){return[]}},showCharts:{type:[String,Array],default:void 0}},computed:{TopClass:function(){return this.getTopClass({"is-multi-chart":this.TheChartList.length>1})},TheShowChartNames:function(){return _.isEmpty(this.myShowChartNames)?this.showCharts:this.myShowChartNames},TheChartNameList:function(){var e=[];return _.forEach(this.charts,function(t){e.push(_.pick(t,"name","title","icon"))}),e},TheChartMap:function(){var e={};return _.forEach(this.charts,function(t){e[t.name]=t}),e},TheChartList:function(){var e=this,t=_.concat(this.TheShowChartNames),n=[];return _.forEach(t,function(t,i){var a=_.get(e.TheChartMap,t);if(a){var r=_.nth(e.myCharts,i)||{},o=_.cloneDeep(r),s=_.cloneDeep(e.chartOptions);s=_.merge(s,a.chartOptions),_.defaults(o,{chartDefines:e.chartDefines,nameList:e.TheChartNameList,index:i,name:a.name,chartTypes:a.types,type:a.type,chartOptions:s}),o.type&&_.indexOf(o.chartTypes,o.type)<0&&(o.type=a.type),n.push(o)}}),n}},methods:{OnReloadChartData:function(e,t){var n=this;return _asyncToGenerator(regeneratorRuntime.mark(function i(){var a,r,o,s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return a=e.index,r=t.force,o=t.cleanCache,s=t.done,i.next=4,n.reloadChartData(a,{force:r,cleanCache:o});case 4:_.isFunction(s)&&s();case 5:case"end":return i.stop()}},i)}))()},OnChangeChartName:function(e,t){var n=this,i=e.index;this.$set(this.myShowChartNames,i,t),this.$set(this.myChartData,i,[]),this.$nextTick(function(){n.reloadChartData(i)})},OnChangeChartType:function(e,t){var n=e.index;this.setMyChart(n,{type:t})},OnChangeChartDateSpan:function(e,t){var n=this,i=e.index,a=t.date,r=t.span;this.setMyChart(i,{date:a,span:r}),this.$nextTick(function(){n.reloadChartData(i)})},setMyChart:function(e,t){var n=_.nth(this.myCharts,e)||{};n=_.assign({},n,t),this.$set(this.myCharts,e,n)},getChartData:function(e){return _.get(this.myChartData,e)},reloadChartData:function(e){var t=arguments,n=this;return _asyncToGenerator(regeneratorRuntime.mark(function i(){var a,r,o,s,c,l,u,d,m,h,p,f,y,g,v,b,w;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(a=t.length>1&&void 0!==t[1]?t[1]:{},r=a.force,o=void 0!==r&&r,s=a.cleanCache,c=void 0!==s&&s,l=_.nth(n.TheShowChartNames,e),u=_.get(n.TheChartMap,l)){i.next=5;break}return i.abrupt("return");case 5:return d=u.name,m=u.agg,h=u.sum,p=u.sumOptions,f=_.nth(n.myCharts,e)||{},y=f.date,g=f.span,v=["statistics sum '".concat(h,"' -json -cqn")],y&&v.push("-date '".concat(y,"'")),g&&v.push("-span '".concat(g,"'")),m&&(v.push("-agg '".concat(m,"'")),c&&v.push("-agg-force")),o&&v.push("-force"),_.forEach(p,function(e,t){var n;n=_.isString(e)||_.isNumber(e)||_.isBoolean(e)?e:JSON.stringify(e),v.push("-".concat(t," '").concat(n,"'"))}),b=v.join(" "),i.next=16,Wn.Sys.exec2(b,{as:"json"});case 16:(w=i.sent)&&_.isArray(w)&&n.$set(n.myChartData,e,w);case 18:case"end":return i.stop()}},i)}))()},preloadChartData:function(){if(!_.isEmpty(this.showCharts))for(var e=0;e<this.showCharts.length;e++)this.reloadChartData(e)}},watch:{showCharts:{handler:function(e,t){this.myShowChartNames=_.cloneDeep(this.showCharts),_.isEqual(e,t)||this.preloadChartData()},immediate:!0}}};Ti.Preload("ti/com/wn/chart/combo/wn-chart-combo.mjs",e)}(),Ti.Preload("ti/com/wn/chart/combo/_com.json",{name:"wn-chart-combo",globally:!0,template:"./wn-chart-combo.html",mixins:["./wn-chart-combo.mjs"],components:["@com:ti/chart/combo"],deps:[]}),Ti.Preload("ti/com/wn/cmd/panel/wn-cmd-panel.html",'<pre class="wn-cmd-panel"\n  :class="TopClass"><div  \n    v-for="(line, index) in lines"\n      :key="index"\n      class="as-line">{{line}}</div>\n</pre>'),function(){var e={data:function(){return{lines:[]}},props:{value:{type:String,default:void 0},vars:{type:Object,default:void 0},as:{type:String,default:"text"},emitName:{type:String,default:void 0}},computed:{TopClass:function(){return this.getTopClass()}},methods:{clear:function(){this.lines=[]},runCommand:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.value){t.next=2;break}return t.abrupt("return");case 2:return e.lines.push("---------------------------------"),e.lines.push(Ti.I18n.get("run-welcome")),e.lines.push("> "+e.value),e.lines.push("---------------------------------"),t.next=8,Wn.Sys.exec(e.value,{as:e.as,vars:e.vars,eachLine:function(t){e.lines.push(t)}});case 8:n=t.sent,e.lines.push("---------------------------------"),e.lines.push("> "+e.value),e.lines.push(Ti.I18n.get("run-finished")),e.lines.push("---------------------------------"),e.emitName&&e.$notify(e.emitName,n);case 14:case"end":return t.stop()}},t)}))()}},watch:{value:{handler:"runCommand",immediate:!0},lines:function(){this.$el.scrollTop=2*this.$el.scrollHeight}}};Ti.Preload("ti/com/wn/cmd/panel/wn-cmd-panel.mjs",e)}(),Ti.Preload("ti/com/wn/cmd/panel/_com.json",{name:"wn-cmd-panel",globally:!0,template:"./wn-cmd-panel.html",mixins:["./wn-cmd-panel.mjs"]}),Ti.Preload("ti/com/wn/combo/edit-com/wn-combo-edit-com.html",'<ti-label\n  class="wn-combo-edit-com"\n  :class="className"\n  :placeholder="placeholder"\n  :prefix-icon="ComIcon"\n  :value="ComTitle"\n  :suffix-icon="\'zmdi-delete\'"\n  @click:value="OnClickValue"\n  @suffix:icon="OnClickSuffixIcon"/>\n  '),function(){var e={data:function(){return{myCom:null}},props:{value:{type:Object,default:function(){return{}}},placeholder:{type:String,default:"i18n:wn-edit-com-nil"}},computed:{Dict:function(){return Wn.Dict.hMakerComponents()},ComIcon:function(){return _.get(this.myCom,"icon")},ComTitle:function(){return _.get(this.myCom,"title")}},methods:{OnClickValue:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Wn.EditTiComponent(e.value);case 2:(n=t.sent)&&e.notifyChange(n);case 4:case"end":return t.stop()}},t)}))()},OnClickSuffixIcon:function(){this.notifyChange({})},notifyChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.comType||(e.comType=void 0,e.comConf=void 0),this.$notify("change",e)},reloadMyCom:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(_.isEmpty(e.value)){t.next=7;break}return n=e.value.comType,t.next=4,e.Dict.getItem(n);case 4:e.myCom=t.sent,t.next=8;break;case 7:e.myCom=null;case 8:case"end":return t.stop()}},t)}))()}},watch:{value:{handler:"reloadMyCom",immediate:!0}}};Ti.Preload("ti/com/wn/combo/edit-com/wn-combo-edit-com.mjs",e)}(),Ti.Preload("ti/com/wn/combo/edit-com/_com.json",{name:"wn-combo-edit-com",globally:!0,template:"./wn-combo-edit-com.html",mixins:"./wn-combo-edit-com.mjs"}),Ti.Preload("ti/com/wn/combo/input/wn-combo-input.html",'<ti-combo-input v-bind="this"\n  \n  :options="OptionsDict"\n  :drop-com-type="DropComType"\n  :prefix-icon="ThePrefixIcon"\n  :drop-display="TheDropDisplay"\n  \n  @change="$notify(\'change\', $event)"/>\n  '),function(){var e={data:function(){return{loading:!1}},props:{itemBy:{type:[String,Function],default:void 0},findBy:{type:[String,Function],default:void 0},loadingIcon:{type:String,default:"zmdi-settings zmdi-hc-spin"},canInput:{type:Boolean,default:!0},autoCollapse:{type:Boolean,default:!1}},computed:{DropComType:function(){return this.dropComType||"wn-list"},ThePrefixIcon:function(){return this.loading?this.loadingIcon:this.prefixIcon},OptionsDict:function(){var e=this;return Wn.Dict.evalOptionsDict(this,function(t){var n=t.loading;e.loading=n})},TheDropDisplay:function(){return this.dropDisplay||["@<thumb>","title|text"]}}};Ti.Preload("ti/com/wn/combo/input/wn-combo-input.mjs",e)}(),Ti.Preload("ti/com/wn/combo/input/_com.json",{name:"wn-combo-input",globally:!0,template:"./wn-combo-input.html",props:["@com:ti/input/ti-input-props.mjs","@com:ti/combo/input/ti-combo-input-props.mjs"],mixins:"./wn-combo-input.mjs",components:["@com:ti/combo/input","@com:wn/list","@com:wn/obj/icon"]}),Ti.Preload("ti/com/wn/combo/multi-input/wn-combo-multi-input.html",'<ti-combo-multi-input v-bind="this"\n\n  :options="OptionsDict"\n  :tag-mapping="TheTagMapping"\n  :drop-com-type="DropComType"\n  :prefix-icon="ThePrefixIcon"\n  :tag-item-icon-by="TheTagItemIconBy"\n  :drop-display="TheDropDisplay"\n  \n  @change="$notify(\'change\', $event)"/>\n  '),function(){var e={inheritAttrs:!1,data:function(){return{loading:!1}},props:{itemBy:{type:[String,Function],default:void 0},findBy:{type:[String,Function],default:void 0},loadingIcon:{type:String,default:"zmdi-settings zmdi-hc-spin"}},computed:{DropComType:function(){return this.dropComType||"wn-list"},ThePrefixIcon:function(){return this.loading&&this.prefixIcon?this.loadingIcon:this.prefixIcon},OptionsDict:function(){var e=this;return Wn.Dict.evalOptionsDict(this,function(t){var n=t.loading;e.loading=n})},TheTagMapping:function(){return _.isEmpty(this.tagMapping)?{text:"title|nm",icon:"icon",value:"id"}:this.tagMapping},TheTagItemIconBy:function(){return this.tagItemIconBy||function(e){return Wn.Util.getObjIcon(e)}},TheDropDisplay:function(){return this.dropDisplay||["@<thumb>","title","nm"]}}};Ti.Preload("ti/com/wn/combo/multi-input/wn-combo-multi-input.mjs",e)}(),Ti.Preload("ti/com/wn/combo/multi-input/_com.json",{name:"wn-combo-multi-input",globally:!0,template:"./wn-combo-multi-input.html",props:["@com:ti/input/ti-input-props.mjs","@com:ti/input/tags/ti-input-tags-props.mjs","@com:ti/combo/input/ti-combo-input-props.mjs"],mixins:"./wn-combo-multi-input.mjs",components:["@com:ti/combo/multi-input","@com:wn/list","@com:wn/obj/icon"]}),Ti.Preload("ti/com/wn/droplist/wn-droplist.html",'<component \n  :is="ComType"\n  v-bind="this"\n  :can-input="false"\n  :must-in-list="true"\n  :auto-collapse="true"\n  @change="$notify(\'change\', $event)"/>'),function(){var e={props:{multi:{type:Boolean,default:!1}},computed:{ComType:function(){return this.multi?"wn-combo-multi-input":"wn-combo-input"}}};Ti.Preload("ti/com/wn/droplist/wn-droplist.mjs",e)}(),Ti.Preload("ti/com/wn/droplist/_com.json",{name:"wn-droplist",globally:!0,template:"./wn-droplist.html",props:["@com:ti/input/ti-input-props.mjs","@com:ti/input/tags/ti-input-tags-props.mjs","@com:ti/combo/input/ti-combo-input-props.mjs"],mixins:["./wn-droplist.mjs"],components:["@com:wn/combo/input","@com:wn/combo/multi-input"]}),Ti.Preload("ti/com/wn/entity/history/wn-entity-history.html",'<ti-gui\n  class="wn-entity-history"\n  :class="TopClass"\n  :layout="Layout"\n  :schema="Schema"\n  :shown="myShown"\n  :can-loading="true"\n  :loading-as="loading"\n  @block:shown="OnShownChange"\n  @filter::change="OnFilterChange"\n  @sorter::change="OnSorterChange"\n  @pager::change="OnPagerChange"\n  @list::select="OnSelect"/>'),function(){var e={data:function(){return{myShown:{},myList:[],myHisRecord:null,myFilterKeyword:null,myFilterMatch:{},mySort:{ct:-1},myPager:{pn:1,pgsz:20},loading:!1}},props:{prefix:{type:String,default:"~/.domain/history"},meta:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}},status:{type:Object,default:function(){return{}}}},computed:{TopClass:function(){return this.getTopClass()},HistoryItems:function(){if(!this.meta)return[];if(this.prefix){if(!Wn.Io.getFormedPath(this.meta).startsWith(this.prefix))return[]}var e=[];return _.forEach(this.data.list,function(t){if("FILE"==t.race&&t.nm.endsWith(".json")){var n=Ti.Util.getMajorName(t.nm),i=t.title;i||(i="_history"==n?"i18n:default":n),e.push({name:n,title:i})}}),_.isEmpty(e)||(this.myShown=_.assign(_defineProperty({},_.first(e).name,!0),this.myShown)),e},CurrentHistory:function(){return _.first(Ti.Util.truthyKeys(this.myShown))},Layout:function(){var e,t=[],n=_createForOfIteratorHelper(this.HistoryItems);try{for(n.s();!(e=n.n()).done;){var i=e.value;t.push({type:"cols",title:i.title,name:i.name,border:!0,blocks:[{type:"rows",size:"65%",blocks:[{type:"cols",size:".44rem",blocks:[{name:"filter",flex:"both",body:"filter"},{name:"sorter",flex:"none",body:"sorter"}]},{name:"list",size:"stretch",overflow:"cover",body:"list"},{name:"pager",size:"auto",body:"pager"}]},{name:"form",body:"form"}]})}}catch(e){n.e(e)}finally{n.f()}return{type:"tabs",blocks:t}},Schema:function(){return{filter:{comType:"TiComboFilter",comConf:{placeholder:"i18n:wn-en-his-flt-tip",dropWidth:-500,form:{fields:[{title:"i18n:wn-en-his-ct",name:"ct",comType:"ti-input-daterange",comConf:{valueType:"ms-range"}},{title:"i18n:wn-en-his-utp",name:"utp",comType:"ti-input"},{title:"i18n:wn-en-his-tid",name:"tid",comType:"ti-input"},{title:"i18n:wn-en-his-tnm",name:"tnm",comType:"ti-input"},{title:"i18n:wn-en-his-ttp",name:"ttp",comType:"ti-input"},{title:"i18n:wn-en-his-opt",name:"opt",comType:"ti-input"}]},value:{keyword:this.myFilterKeyword,match:this.myFilterMatch}}},sorter:{comType:"TiComboSorter",comConf:{dropWidth:200,options:[{value:"ct",text:"i18n:wn-en-his-ct"},{value:"utp",text:"i18n:wn-en-his-utp"},{value:"ttp",text:"i18n:wn-en-his-ttp"}],value:this.mySort}},list:{comType:"TiTable",comConf:{data:this.myList,fields:[{title:"i18n:wn-en-his-ct",display:{key:"ct",transformer:"Ti.DateTime.format"}},{title:"i18n:wn-en-his-usr",display:["utp:$${val}:","unm|uid"]},{title:"i18n:wn-en-his-opt",display:"opt"},{title:"i18n:wn-en-his-tar",display:["ttp:$${val}:","tnm|tid"]}]}},pager:{comType:"TiPagingJumper",comConf:{value:this.myPager}},form:{comType:"TiForm",comConf:{data:this.myHisRecord,autoShowBlank:!0,fields:[{title:"ID",name:"id"},{title:"i18n:wn-en-his-uid",name:"uid"},{title:"i18n:wn-en-his-unm",name:"unm"},{title:"i18n:wn-en-his-utp",name:"utp"},{title:"i18n:wn-en-his-ct",name:"ct",type:"AMS"},{title:"i18n:wn-en-his-tid",name:"tid"},{title:"i18n:wn-en-his-tnm",name:"tnm"},{title:"i18n:wn-en-his-ttp",name:"ttp"},{title:"i18n:wn-en-his-opt",name:"opt"},{title:"i18n:wn-en-his-mor",name:"mor"}]}}}}},methods:{OnShownChange:function(e){this.myShown=e},OnSelect:function(e){var t=e.current;this.myHisRecord=t},OnFilterChange:function(){var e=arguments,t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:{},a=i.match,r=i.keyword,t.myFilterMatch=a,t.myFilterKeyword=r,n.next=5,t.reloadList();case 5:case"end":return n.stop()}},n)}))()},OnSorterChange:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.mySort=e,n.next=3,t.reloadList();case 3:case"end":return n.stop()}},n)}))()},OnPagerChange:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return _.assign(t.myPager,e),n.next=3,t.reloadList();case 3:case"end":return n.stop()}},n)}))()},reloadList:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.CurrentHistory){t.next=5;break}return e.myList=[],e.myPager={},t.abrupt("return");case 5:return"_history"==n&&(n=""),i=["history ".concat(n," query")],_.isEmpty(e.mySort)||(a=JSON.stringify(e.mySort),i.push("-sort '".concat(a,"'"))),i.push("-pn ".concat(e.myPager.pn)),i.push("-pgsz ".concat(e.myPager.pgsz)),i.push("-cqn"),r=_.assign({},e.myFilterMatch),e.myFilterKeyword&&(Wn.Io.isFullObjId(e.myFilterKeyword)?r.uid=e.myFilterKeyword:r.unm=e.myFilterKeyword),o=JSON.stringify(r),e.loading=!0,t.next=17,Wn.Sys.exec2(i.join(" "),{input:o,as:"json"});case 17:s=t.sent,e.myList=s.list,e.myPager=s.pager,e.loading=!1;case 21:case"end":return t.stop()}},t)}))()}},watch:{CurrentHistory:function(){this.reloadList()}}};Ti.Preload("ti/com/wn/entity/history/wn-entity-history.mjs",e)}(),Ti.Preload("ti/com/wn/entity/history/_com.json",{name:"wn-entity-history",globally:!0,template:"./wn-entity-history.html",mixins:["./wn-entity-history.mjs"],components:["@com:ti/input/daterange","@com:ti/combo/filter","@com:ti/paging/jumper"]}),Ti.Preload("ti/com/wn/explorer/wn-explorer.html",'<div class="wn-explorer"\n  v-drop-off\n  :class="topClass">\n  \x3c!--\n    Sky\n  --\x3e\n  <div v-if="show.sky"\n    class="explorer-sky">\n    \x3c!--Logo--\x3e\n    <div v-if="show.logo"\n      class="sky-logo ti-flex-center">\n      <slot name="logo"></slot>\n    </div>\n    \x3c!--Title/Crumb--\x3e\n    <div v-if="!noTitle"\n      class="sky-title">\n      <slot name="title">\n        <ul class="as-address-bar">\n          <li v-for="an in ancestors" :key="an.id">\n            <a :href="getObjLink(an)"\n              @click.prevent="$notify(\'main:open\', an)">{{getObjTitle(an)}}</a>\n            <ti-icon class="center" value="chevron_right"/>\n          </li>\n          <li v-if="meta">\n            <b>{{getObjTitle(meta)}}</b>\n            <span v-if="status.changed"\n              class="ti-mark-changed">*</span>\n          </li>\n        </ul>\n      </slot>\n    </div>\n    \x3c!--Actions--\x3e\n    <div v-if="show.action"\n      class="sky-action ti-flex-right">\n      <slot name="action"></slot>\n    </div>\n  </div>\n  \x3c!--\n    Aside\n  --\x3e\n  <div v-if="show.aside"\n    class="explorer-aside">\n    <slot name="aside"></slot>\n  </div>\n  \x3c!--\n    Main Arena\n  --\x3e\n  <div class="explorer-arena">\n    <slot name="arena"></slot>\n  </div>\n  \x3c!--\n    Footer\n  --\x3e\n  <div v-if="show.footer"\n    class="explorer-footer">\n    <slot name="footer"></slot>\n  </div>\n  <div v-if="loading" class="exploer-loading-mask"></div>\n</div>'),function(){var e={props:{loading:{type:Boolean,default:!1},noTitle:{type:Boolean,default:!1},meta:{type:Object,default:function(){return{}}},ancestors:{type:Array,default:function(){return[]}},children:{type:Array,default:function(){return[]}},status:{type:Object,default:function(){return{changed:!1}}}},computed:{show:function(){var e={logo:!!this.$slots.logo,action:!!this.$slots.action,aside:!!this.$slots.aside,footer:!!this.$slots.footer};return e.sky=!(this.noTitle&&!e.logo&&!e.action),e},topClass:function(){return{"no-sky":!this.show.sky,"no-aside":!this.show.aside,"no-footer":!this.show.footer}}},methods:{getObjTitle:function(e){var t=e.title||e.nm;return Ti.I18n.text(t)},getObjLink:function(e){return Wn.Util.getAppLink(e).toString()}},mounted:function(){}};Ti.Preload("ti/com/wn/explorer/wn-explorer.mjs",e)}(),Ti.Preload("ti/com/wn/explorer/_com.json",{name:"wn-explorer",globally:!0,template:"./wn-explorer.html",mixins:["./wn-explorer.mjs"]}),Ti.Preload("ti/com/wn/gui/arena/wn-gui-arena.html",'<div class="wn-gui-arena">\n  <component \n    :is="comType"\n      class="ti-cover-parent"\n      v-bind="comConf"/>\n</div>'),function(){var e={props:{meta:{type:Object,default:null},comType:{type:String,default:"ti-loading"},comConf:{type:Object,default:function(){return{}}}}};Ti.Preload("ti/com/wn/gui/arena/wn-gui-arena.mjs",e)}(),Ti.Preload("ti/com/wn/gui/arena/_com.json",{name:"wn-gui-arena",globally:!0,template:"./wn-gui-arena.html",mixins:["./wn-gui-arena.mjs"]}),Ti.Preload("ti/com/wn/gui/footer/wn-gui-footer.html",'<div class="wn-gui-footer">\n  \x3c!--\n    Info\n  --\x3e\n  <div class="as-info ti-flex-center">\n    <ti-icon v-if="infoIcon"\n      :value="infoIcon"/>\n    <span v-if="infoText"\n      >{{infoText|i18n}}</span>\n  </div>\n  \x3c!--\n    Message\n  --\x3e\n  <div class="as-msg ti-flex-center">\n    {{message}}\n  </div>\n  \x3c!--\n    Indicator\n  --\x3e\n  <div class="as-indi">\n    {{indicator}}\n  </div>\n</div>'),function(){var e={inheritAttrs:!1,props:{infoIcon:{type:[String,Object],default:void 0},infoText:{type:String,default:void 0},message:{type:String,default:void 0},indicator:{type:String,default:void 0}}};Ti.Preload("ti/com/wn/gui/footer/wn-gui-footer.mjs",e)}(),Ti.Preload("ti/com/wn/gui/footer/_com.json",{name:"wn-gui-footer",globally:!0,template:"./wn-gui-footer.html",mixins:["./wn-gui-footer.mjs"]}),Ti.Preload("ti/com/wn/gui/side/nav/com/side-nav-item/side-nav-item.html",'<div class="side-nav-item" :class="topClass">\n  \x3c!--\n    Self Info\n  --\x3e\n  <div class="it-info" >\n    \x3c!--Icon--\x3e\n    <span v-if="icon" class="it-info-icon">\n      <ti-icon :value="icon" size=".16rem"/>\n    </span>\n    \x3c!--Group--\x3e\n    <span v-if="isGroup"\n      class="it-info-text"\n      @click.stop.prevent="onClickGroupInfo">{{title|i18n}}</span>\n    \x3c!--Item--\x3e\n    <a v-else\n      class="it-info-text"\n      :href="href"\n      @click.stop.prevent="onClickItemInfo">\n      {{title|i18n}}\n    </a>\n  </div>\n  \x3c!--\n    Sub Container\n  --\x3e\n  <div class="it-con" v-if="items && items.length > 0">\n      <side-nav-item v-for="subIt in items"\n        :key="subIt.key"\n        :group-status-store-key="subIt.key"\n        :highlight-id="highlightId"\n        v-bind="subIt"\n        @item:actived="$notify(\'item:actived\', $event)"/>\n  </div>\n</div>'),function(){var e={inheritAttrs:!1,data:function(){return{collapse:!0}},props:{groupStatusStoreKey:{type:String,default:null},highlightId:{type:String,default:null},id:{type:String,default:null},depth:{type:Number,default:0},icon:{type:[String,Object],default:null},title:{type:String,default:null},path:{type:String,default:null},view:{type:String,default:null},href:{type:String,default:null},items:{type:Array,default:function(){return[]}}},computed:{topClass:function(){return{"is-top":this.isTop,"is-sub":!this.isTop,"is-group":this.isGroup,"is-item":!this.isGroup,"is-collapse":this.collapse,"is-expend":!this.collapse,"is-highlight":this.isHighlight}},isTop:function(){return 0==this.depth},isGroup:function(){return _.isArray(this.items)},isHighlight:function(){return this.id&&this.id==this.highlightId}},methods:{onClickGroupInfo:function(){this.isGroup&&(this.collapse=!this.collapse,this.groupStatusStoreKey&&Ti.Storage.session.set(this.groupStatusStoreKey,this.collapse))},onClickItemInfo:function(){this.$notify("item:actived",{id:this.id,title:this.title,path:this.path,href:this.href,view:this.view})}},mounted:function(){this.isGroup&&(this.isTop?this.collapse=!1:this.collapse=!0,this.groupStatusStoreKey&&(this.collapse=Ti.Storage.session.getBoolean(this.groupStatusStoreKey,this.collapse)))}};Ti.Preload("ti/com/wn/gui/side/nav/com/side-nav-item/side-nav-item.mjs",e)}(),Ti.Preload("ti/com/wn/gui/side/nav/com/side-nav-item/_com.json",{name:"side-nav-item",template:"./side-nav-item.html",mixins:["./side-nav-item.mjs"]}),Ti.Preload("ti/com/wn/gui/side/nav/wn-gui-side-nav.html",'<div class="wn-gui-side-nav"\n  :class="TopClass"\n  v-ti-activable>\n  <side-nav-item v-for="it in TheItems"\n    :key="it.key"\n    v-bind="it"\n    @item:actived="onItemActived"/>\n</div>'),function(){var e={props:{items:{type:Array,default:null},highlightItemId:{type:String,default:null},highlightItemPath:{type:String,default:null}},computed:{TopClass:function(){return this.getTopClass()},TheItems:function(){var e=[];if(_.isArray(this.items)){var t,n=_createForOfIteratorHelper(this.items);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.push(this.evalItem(i))}}catch(e){n.e(e)}finally{n.f()}}return e},theHighlightItemId:function(){var e=this.joinHighlightItems([],this.items);if(e.length>0)return e.sort(function(e,t){return e.score-t.score}),_.first(e).id}},methods:{evalItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=null;if(_.isArray(e.items)){t=[];var n,i=_createForOfIteratorHelper(e.items);try{for(i.s();!(n=i.n()).done;){var a=n.value;t.push(this.evalItem(a))}}catch(e){i.e(e)}finally{i.f()}}return _.assign(_.pick(e,["id","key","depth","icon","title","path","view"]),{items:t,groupStatusStoreKey:e.key,highlightId:this.theHighlightItemId,href:e.id?Wn.Util.getAppLink(e.id)+"":null})},joinHighlightItems:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(this.highlightItemId&&_.isArray(t)&&t.length>0){var n,i=_createForOfIteratorHelper(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.id==this.highlightItemId)e.push({score:0,id:a.id});else if(a.path&&a.id&&this.highlightItemPath&&this.highlightItemPath.startsWith(a.path)){var r=this.highlightItemPath.length-a.path.length;e.push({score:1+r,id:a.id})}a.items&&this.joinHighlightItems(e,a.items)}}catch(e){i.e(e)}finally{i.f()}}return e},onItemActived:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$notify("item:active",e)}}};Ti.Preload("ti/com/wn/gui/side/nav/wn-gui-side-nav.mjs",e)}(),Ti.Preload("ti/com/wn/gui/side/nav/_com.json",{name:"wn-gui-side-nav",globally:!0,template:"./wn-gui-side-nav.html",mixins:["./wn-gui-side-nav.mjs"],components:["./com/side-nav-item"]}),Ti.Preload("ti/com/wn/gui/side/tree/wn-gui-side-tree.html",'<ti-tree\n  class="ti-fill-parent wn-gui-side-tree"\n  id-by="value"\n  name-by="name"\n  :display="TreeDisplay"\n  :data="myTreeData"\n  :current-id="highlightItemId"\n  :checked-ids="CheckedIds"\n  keep-open-by="wn-gui-side-tree"\n  :auto-open="true"\n  :default-open-depth="2"\n  :show-root="false"\n  :puppet-mode="true"\n  @select="onItemActived"/>'),function(){var e={data:function(){return{myItems:[],myTreeData:[]}},props:{items:{type:Array,default:null},highlightItemId:{type:String,default:null},highlightItemPath:{type:String,default:null}},computed:{TreeDisplay:function(){return["<icon>",{key:"text",comConf:{className:"is-nowrap",href:"(value)?/a/open/wn.manager?ph=id:${value}"}}]},HighlightItemId:function(){var e=this.joinHighlightItems([],this.items);if(e.length>0)return e.sort(function(e,t){return e.score-t.score}),_.first(e).id},CheckedIds:function(){return this.HighlightItemId?[this.HighlightItemId]:[]}},methods:{evalTreeData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.myItems=_.cloneDeep(e);var t=[];if(_.isArray(e)){var n,i=_createForOfIteratorHelper(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;t.push(this.evalItemToTreeNode(a))}}catch(e){i.e(e)}finally{i.f()}}this.myTreeData=t},evalItemToTreeNode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=null;if(_.isArray(e.items)){t=[];var n,i=_createForOfIteratorHelper(e.items);try{for(i.s();!(n=i.n()).done;){var a=n.value;t.push(this.evalItemToTreeNode(a))}}catch(e){i.e(e)}finally{i.f()}}return{name:e.key,text:e.title,icon:e.icon,value:e.id,children:t}},joinHighlightItems:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(this.highlightItemId&&_.isArray(t)&&t.length>0){var n,i=_createForOfIteratorHelper(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.id==this.highlightItemId)e.push({score:0,id:a.id});else if(a.path&&a.id&&this.highlightItemPath&&this.highlightItemPath.startsWith(a.path)){var r=this.highlightItemPath.length-a.path.length;e.push({score:1+r,id:a.id})}a.items&&this.joinHighlightItems(e,a.items)}}catch(e){i.e(e)}finally{i.f()}}return e},onItemActived:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).current,t=void 0===e?{}:e;t.value&&this.$notify("item:active",{id:t.value})}},watch:{items:{handler:function(e,t){_.isEqual(e,this.myItems)||this.evalTreeData(e)},immediate:!0}}};Ti.Preload("ti/com/wn/gui/side/tree/wn-gui-side-tree.mjs",e)}(),Ti.Preload("ti/com/wn/gui/side/tree/_com.json",{name:"wn-gui-side-tree",globally:!0,template:"./wn-gui-side-tree.html",mixins:["./wn-gui-side-tree.mjs"],components:["@com:ti/tree"]}),Ti.Preload("ti/com/wn/gui/test.json",{layout:{type:"cols",border:!0,blocks:[{name:"C0",icon:"im-award",title:"Test C0",closer:!0,actions:[{type:"group",icon:"zmdi-more-vert",items:[{key:"show-P1",text:"show P1",type:"action",action:"main:showBlock(P1)"},{key:"hide-P1",text:"hide P1",type:"action",action:"main:hideBlock(P1)"}]}],size:"20%",type:"rows",border:!0,blocks:[{name:"C0-1",size:100,body:{comType:"ti-label",comConf:{value:"C0-1 content"}}},{name:"C0-2",body:{comType:"ti-label",comConf:{value:"C0-2 content"}}},{name:"C0-3",body:{comType:"ti-label",comConf:{value:"C0-3 content"}}}]},{name:"C1",icon:"im-award",title:"Test C1",actions:[{type:"group",icon:"zmdi-more-vert",items:[{key:"show-P1",text:"show P1",type:"action",action:"main:showBlock(P1)"},{key:"hide-P1",text:"hide P1",type:"action",action:"main:hideBlock(P1)"}]}],size:"stretch",type:"tabs",blocks:[{name:"C1-1",size:100,body:{comType:"ti-label",comConf:{value:"C1-1 content"}}},{name:"C1-2",body:{comType:"ti-label",comConf:{value:"C1-2 content"}}},{name:"C1-3",body:{comType:"ti-label",comConf:{value:"C1-3 content"}}}]},{name:"C2",body:"C2",size:260}],panels:[{name:"P1",closer:"right",position:"left-top",width:"50%",height:"50%",mask:!0,body:{comType:"ti-label",comConf:{value:"P1"}}}]},schema:{C1:{comType:"ti-label",comConf:{value:"I am C11"}},C2:{comType:"ti-label",comConf:{value:"I am C22"}}},actions:[{key:"reloading",type:"action",icon:"zmdi-refresh",text:"i18n:refresh",altDisplay:{icon:"zmdi-refresh zmdi-hc-spin",text:"i18n:loading"},action:"dispatch:main/reload",shortcut:"CTRL+R"},{key:"show-P1",text:"show P1",type:"action",action:"main:showBlock(P1)"},{key:"hide-P1",text:"hide P1",type:"action",action:"main:hideBlock(P1)"}]}),Ti.Preload("ti/com/wn/gui/wn-gui.html",'<ti-gui\n  v-bind="layout"\n  :schema="schema"\n  :shown="shown"\n  @block:show="showBlock"\n  @block:hide="hideBlock"/>'),function(){var e={inheritAttrs:!1,data:function(){return{shown:{}}},props:{data:{type:Object,default:function(){return{}}}},computed:{layout:function(){return this.data?this.data.layout:{}},schema:function(){return this.data?this.data.schema:{}}},watch:{"data.actions":function(){}},methods:{showBlock:function(e){this.shown=this.createGuiBlockShown(this.shown,e,!0)},hideBlock:function(e){this.shown=this.createGuiBlockShown(this.shown,e,!1)}}};Ti.Preload("ti/com/wn/gui/wn-gui.mjs",e)}(),Ti.Preload("ti/com/wn/gui/_com.json",{name:"wn-gui",globally:!0,template:"./wn-gui.html",methods:"@com:ti/gui/ti-gui-methods.mjs",mixins:["./wn-gui.mjs"],components:["@com:ti/gui"]}),Ti.Preload("ti/com/wn/imgfile/wn-imgfile.html",'<ti-imgfile\n  :src="imageSrc"\n  :width="width"\n  :height="height"\n  :progress="progress"\n  :upload-file="uploadFile"\n  :removable="removable"\n  @upload="onUpload"\n  @remove="onRemove"\n  @open="onOpen"/>'),function(){var e={data:function(){return{src_ts:null,oImage:null,uploadFile:null,progress:-1}},props:{value:{type:String,default:null},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},removable:{type:Boolean,default:!0},target:{type:String,required:!0,default:null},supportTypes:{type:[String,Array],default:function(){return["png","jpg","jpeg","gif"]}},supportMimes:{type:[String,Array],default:function(){return["image/png","image/jpeg","image/gif"]}},filter:{type:[Array,String],default:null},quality:{type:Number,default:0}},computed:{acceptTypes:function(){return _.isString(this.supportTypes)?this.supportTypes.split(","):this.supportTypes},acceptMimes:function(){return _.isString(this.supportMimes)?this.supportMimes.split(","):this.supportMimes},imageFilter:function(){return this.filter?[].concat(this.filter):[]},imageSrc:function(){if(this.oImage){var e=["/o/content?str=id:",this.oImage.id];return this.src_ts&&(e.push("&_t="),e.push(this.src_ts)),e.join("")}}},methods:{assertListHas:function(e,t,n,i){return _asyncToGenerator(regeneratorRuntime.mark(function i(){var a,r,o,s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(_.isEmpty(e)){i.next=24;break}a=!0,r=_createForOfIteratorHelper(e),i.prev=3,r.s();case 5:if((o=r.n()).done){i.next=12;break}if((s=o.value)!=t){i.next=10;break}return a=!1,i.abrupt("break",12);case 10:i.next=5;break;case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(3),r.e(i.t0);case 17:return i.prev=17,r.f(),i.finish(17);case 20:if(!a){i.next=24;break}return i.next=23,Ti.Alert(n,{type:"warn",icon:"zmdi-alert-triangle"});case 23:return i.abrupt("return",!1);case 24:return i.abrupt("return",!0);case 25:case"end":return i.stop()}},i,null,[[3,14,17,20]])}))()},onOpen:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.oImage){t.next=4;break}return n=Wn.Util.getAppLink(e.oImage),t.next=4,Ti.Be.Open(n.url,{params:n.params});case 4:case"end":return t.stop()}},t)}))()},onRemove:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.oImage){t.next=3;break}return t.next=3,Wn.Sys.exec2("rm id:".concat(e.oImage.id));case 3:e.$notify("change",null);case 4:case"end":return t.stop()}},t)}))()},onUpload:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=Ti.Util.getSuffixName(e.name),n.next=3,t.assertListHas(t.acceptTypes,i,{text:"i18n:wn-invalid-types",vars:{current:i,supports:t.acceptTypes.join(", ")}});case 3:if(n.sent){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,t.assertListHas(t.acceptMimes,e.type,{text:"i18n:wn-invalid-mimes",vars:{current:e.type,supports:t.acceptMimes.join(", ")}});case 7:if(n.sent){n.next=9;break}return n.abrupt("return");case 9:return t.uploadFile=e,t.progress=0,n.next=13,Wn.Io.uploadFile(e,{target:t.target,mode:"r",progress:function(e){t.progress=e.loaded/e.total}});case 13:if(a=n.sent,r=a.ok,o=a.msg,s=a.data,t.uploadFile=null,t.progress=-1,r){n.next=23;break}return n.next=22,Ti.Alert("i18n:".concat(o),{type:"warn",icon:"zmdi-alert-triangle"});case 22:return n.abrupt("return");case 23:if(_.isEmpty(t.imageFilter)){n.next=30;break}return c=["imagic","id:".concat(s.id),'-filter "'.concat(t.imageFilter.join(" "),'"')],t.quality>0&&t.quality<=1&&c.push("-qa ".concat(t.quality)),c.push("-out inplace"),l=c.join(" "),n.next=30,Wn.Sys.exec2(l);case 30:t.src_ts=Date.now(),t.oImage=s,t.$notify("change",s);case 33:case"end":return n.stop()}},n)}))()},reload:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.value){t.next=6;break}return t.next=3,Wn.Io.loadMeta(e.value);case 3:e.oImage=t.sent,t.next=7;break;case 6:e.oImage=null;case 7:case"end":return t.stop()}},t)}))()}},watch:{value:function(){this.reload()}},mounted:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reload();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()};Ti.Preload("ti/com/wn/imgfile/wn-imgfile.mjs",e)}(),Ti.Preload("ti/com/wn/imgfile/_com.json",{name:"wn-imgfile",globally:!0,template:"./wn-imgfile.html",mixins:["./wn-imgfile.mjs"],components:["@com:ti/imgfile"]}),Ti.Preload("ti/com/wn/label/wn-label.html",'<ti-label\n  :class-name="className"\n  v-bind="this"\n  :value-clickable="ValueClickable"\n  @click:value="OnClickValue"/>'),function(){var e={props:{openRefer:{type:Object,default:void 0}},computed:{ValueClickable:function(){return!!this.openRefer}},methods:{OnClickValue:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.openRefer&&e.value){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Wn.Io.loadMetaBy(e.value);case 4:return n=t.sent,console.log(n),i=_.assign({title:"i18n:info",width:640,height:480,textOk:null,textCancel:"i18n:close",result:n},e.openRefer),t.next=9,Ti.App.Open(i);case 9:case"end":return t.stop()}},t)}))()}}};Ti.Preload("ti/com/wn/label/wn-label.mjs",e)}(),Ti.Preload("ti/com/wn/label/_com.json",{name:"wn-label",globally:!0,template:"./wn-label.html",props:["@com:ti/label/ti-label-props.mjs"],mixins:["./wn-label.mjs"],components:["@com:ti/label"]}),Ti.Preload("ti/com/wn/list/wn-list.html",'<ti-list\n  v-bind="this"\n  :display="DisplayItems"\n  :on-init="OnSubListInit"\n  @select="OnSelected"\n  @open="$notify(\'open\', $event)"/>'),function(){var e={data:function(){return{isAllChecked:!1,hasChecked:!1,theCurrentId:!1,theCheckedIds:!1}},props:{iconBy:{type:[String,Function],default:void 0},indentBy:{type:[String,Function],default:void 0},itemClassName:void 0,display:{type:[Object,String,Array],default:function(){return{key:"..",comType:"ti-label"}}},border:{type:Boolean,default:!0},autoScrollIntoView:{type:Boolean,default:!0}},computed:{DisplayItems:function(){return this.explainDisplayItems(this.display)}},methods:{OnSubListInit:function(e){this.$list=e},OnSelected:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.theCheckedIds=e.checkedIds,this.theCurrentId=e.currentId,this.syncCheckStatus(),this.$notify("select",e)},syncCheckStatus:function(){this.isAllChecked=this.$list.isAllChecked,this.hasChecked=this.$list.hasChecked},selectPrevRow:function(e){this.$list.selectPrevRow(e)},selectNextRow:function(e){this.$list.selectNextRow(e)},getCurrentRow:function(e){return this.$list.getCurrentRow(e)},getCheckedRow:function(e){return this.$list.getCheckedRow(e)},getCurrent:function(e){return this.$list.getCurrent(e)},getChecked:function(e){return this.$list.getChecked(e)},selectRow:function(e){this.$list.selectRow(e)},checkRow:function(e){this.$list.checkRow(e)},cancelRow:function(e){this.$list.cancelRow(e)}},watch:{data:function(){this.syncCheckStatus()},checkedIds:function(){this.syncCheckStatus()}}};Ti.Preload("ti/com/wn/list/wn-list.mjs",e)}(),Ti.Preload("ti/com/wn/list/_com.json",{name:"wn-list",globally:!0,template:"./wn-list.html",props:["@com:ti/support/list_props.mjs"],mixins:["@com:wn/support/wn_list_wrapper_mixins.mjs","./wn-list.mjs"],components:["@com:ti/table"]}),Ti.Preload("ti/com/wn/obj/creation/wn-obj-creation.html",'<div class="wn-obj-creation"\n  :class="TopClass">\n  \x3c!--\n    Side type list\n  --\x3e\n  <div class="oc-types"\n    v-if="hasTypes">\n    <ul>\n      <li\n        v-for="li of TypeList"\n          :class="li.className"\n          @click="setCurrentType(li.name)">\n          \x3c!--Icon--\x3e\n          <ti-icon\n            v-if="li.icon"\n              :value="li.icon"/>\n          \x3c!--Text--\x3e\n          <span class="as-text">{{li.text|i18n}}</span>\n          \x3c!--Suffix--\x3e\n          <em v-if="li.suffix">({{li.suffix}})</em>\n      </li>\n    </ul>\n  </div>\n  \x3c!--\n    Main Area\n  --\x3e\n  <div class="oc-main">\n    \x3c!--\n      Type Brief\n    --\x3e\n    <div v-if="hasCurrentType"\n      class="oc-info">\n      <div class="oc-thumb">\n        <ti-icon :value="CurrentType.thumb"/>\n      </div>\n      <div class="oc-text">{{CurrentType.text | i18n}}</div>\n      <div v-if="!CurrentIsDIR"\n        class="oc-name">*.{{CurrentType.name}}</div>\n      <div class="oc-brief"\n        v-if="CurrentType.brief">{{CurrentType.brief}}</div>\n    </div>\n    \x3c!--\n      Free create\n    --\x3e\n    <div v-else\n      class="oc-free">\n      <span>{{\'wn-oc-free\'|i18n}}</span>\n    </div>\n    \x3c!--\n      Input value\n    --\x3e\n    <div class="oc-input">\n      <input\n        ref="input" \n        :value="value.name"\n        :placeholder="\'wn-oc-tip\'|i18n" \n        @change="OnInputChange" \n        spellcheck="false">\n    </div>\n  </div>\n</div>'),function(){var e={data:function(){return{myCurrentType:void 0}},props:{types:{type:Array,default:function(){return[]}},value:{type:Object,default:function(){return{}}},trimed:{type:Boolean,default:!0},freeCreate:{type:Boolean,default:!1}},computed:{TopClass:function(){return this.getTopClass()},hasTypes:function(){return!_.isEmpty(this.types)},CurrentTypeName:function(){var e=this.myCurrentType||this.value.type;return e||this.freeCreate?e:_.get(_.first(this.types),"name")},TypeList:function(){var e=this,t=[];if(this.freeCreate){var n=Ti.Util.isNil(this.CurrentTypeName);t.push({name:null,text:"i18n:wn-oc-auto-type",type:null,icon:"far-file",thumb:"far-file",suffix:"*.*",current:n,className:{"is-current":n},race:"FILE",mime:"text/plain"})}return _.forEach(this.types,function(n){var i=_.cloneDeep(n);i.thumb=i.thumb||i.icon,i.suffix="*.".concat(i.name),i.current=i.name==e.CurrentTypeName,i.className={"is-current":i.current},t.push(i)}),t},CurrentType:function(){return _.find(this.TypeList,function(e){return e.current})},CurrentIsDIR:function(){return"DIR"==_.get(this.CurrentType,"race")},hasCurrentType:function(){return!!this.CurrentType}},methods:{setCurrentType:function(e){this.myCurrentType=e},OnInputChange:function(){var e=this.$refs.input.value;this.trimed&&(e=_.trim(e));var t=_.assign({name:"txt",mime:"text/plain",race:"FILE"},this.CurrentType);if(Ti.Util.isNil(t.name)){var n=Ti.Util.getSuffixName(e);if(n){var i,a=_createForOfIteratorHelper(this.types);try{for(a.s();!(i=a.n()).done;){var r=i.value;if(n==r.name){t=r;break}}}catch(e){a.e(e)}finally{a.f()}}}this.$notify("change",{name:e,type:t.name,mime:t.mime,race:t.race})}}};Ti.Preload("ti/com/wn/obj/creation/wn-obj-creation.mjs",e)}(),Ti.Preload("ti/com/wn/obj/creation/_com.json",{name:"wn-obj-creation",globally:!0,template:"./wn-obj-creation.html",mixins:["./wn-obj-creation.mjs"]}),Ti.Preload("ti/com/wn/obj/form/wn-obj-form.html",'<ti-form \n  v-bind="this"\n  :auto-show-blank="isAutoShowBlank"\n  :class-name="className"\n  @field:change="OnFieldChange"\n  @change="OnChange"\n  @invalid="OnInvalid"/>'),function(){var e={props:{fuse:{type:Object,default:function(){return{key:"wn-obj-form",noti:null}}},setDataBy:{type:[String,Object,Boolean],default:null},updateBy:{type:[String,Object,Boolean],default:null},setFieldStatusBy:{type:[String,Object,Boolean],default:null}},computed:{isAutoShowBlank:function(){return Ti.Util.fallback(this.autoShowBlank,!0)}},methods:{doAction:function(e,t,n){_.isPlainObject(t)?Ti.App(this)[t.method](t.target,n):_.isString(t)?Ti.App(this).exec(t,n):t&&this.$notify(e,n)},OnFieldChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.value;this.doAction("field:change",this.updateBy,{name:t,value:n})},OnChange:function(e){this.doAction("change",this.setDataBy,e)},OnInvalid:function(e){var t={name:e.name,message:[e.errMessage,e.value].join(" :: "),status:"warn"};this.doAction("invalid",this.setFieldStatusBy,t)}}};Ti.Preload("ti/com/wn/obj/form/wn-obj-form.mjs",e)}(),Ti.Preload("ti/com/wn/obj/form/_com.json",{name:"wn-obj-form",globally:!0,template:"./wn-obj-form.html",props:"@com:ti/form/ti-form-props.mjs",mixins:["./wn-obj-form.mjs"],components:["@com:ti/form","@com:wn/transfer","@com:wn/droplist","@com:wn/combo/input","@com:wn/imgfile","@com:wn/combo/multi-input"]}),Ti.Preload("ti/com/wn/obj/icon/wn-obj-icon.html",'<ti-icon \n  class="wn-obj-icon" \n  :class="topClass"\n  :value="theIcon"/>'),function(){var e={inheritAttrs:!1,props:{icon:{type:String,default:null},thumb:{type:String,default:null},mime:{type:String,default:null},type:{type:String,default:null},race:{type:String,default:null},candidateIcon:{type:String,default:null},timestamp:{type:Number,default:0}},computed:{topClass:function(){return Ti.Css.mergeClassName(this.className)},theIcon:function(){return Wn.Util.getObjThumbIcon({candidateIcon:this.candidateIcon,timestamp:this.timestamp,thumb:this.thumb,icon:this.icon,mime:this.mime,type:this.type,race:this.race},"fas-cube")}},methods:{}};Ti.Preload("ti/com/wn/obj/icon/wn-obj-icon.mjs",e)}(),Ti.Preload("ti/com/wn/obj/icon/_com.json",{name:"wn-obj-icon",globally:!0,template:"./wn-obj-icon.html",mixins:["./wn-obj-icon.mjs"]}),Ti.Preload("ti/com/wn/obj/json/wn-obj-json.html",'<div class="wn-obj-json">\n  \x3c!--\n    Show Text Editor\n  --\x3e\n  <ti-text-json v-if="hasMeta"\n    class="ti-fill-parent"\n    :value="value"\n    :data="data"\n    @change="onChangeContent"/>\n  \x3c!--\n    Empty Data\n  --\x3e\n  <ti-loading v-else/>\n</div>'),function(){var e={props:{meta:{type:Object,default:function(){return{}}},value:{type:String,default:null},status:{type:Object,default:function(){return{}}}},computed:{hasMeta:function(){return!!this.meta}},methods:{onChangeContent:function(e){this.$notify("change",e)}},mounted:function(){var e=this;Ti.Fuse.getOrCreate().add({key:"wn-obj-json",everythingOk:function(){return!e.status.changed},fail:function(){Ti.Toast.Open("i18n:wn-obj-nosaved","warn")}})},beforeDestroy:function(){Ti.Fuse.get().remove("wn-obj-json")}};Ti.Preload("ti/com/wn/obj/json/wn-obj-json.mjs",e)}(),Ti.Preload("ti/com/wn/obj/json/_com.json",{name:"wn-obj-json",globally:!0,template:"./wn-obj-json.html",mixins:["./wn-obj-json.mjs"],components:["@com:ti/text/json"]}),function(){var e={meta:{type:[Object,String],default:null},mediaSrcMode:{type:String,default:"path",validator:function(e){return/^(path|fullPath|idPath|id)$/.test(e)}},keepLastBy:{type:String,default:"wn-markdown-richeditor-last-open"},defaultMediaDir:{type:String,default:"~"}};Ti.Preload("ti/com/wn/obj/markdown/richeditor/wn-markdown-richeditor-props.mjs",e)}(),Ti.Preload("ti/com/wn/obj/markdown/richeditor/wn-markdown-richeditor.html",'<TiTextMarkdownRicheditor\n  v-bind="this"\n  :actions="ToolbarActions"\n  :markdown-media-src="TheMarkdownMediaSrc"\n  :preview-media-src="ThePreviewMediaSrc"\n  :value="TheValue"\n  :on-init="OnEditorInit"/>'),function(){var e={computed:{ToolbarActions:function(){var e=this;return _.merge({Media:{icon:"fas-photo-video",action:function(){return e.OnInsertMedia()}}},this.actions)},TheValue:function(){return this.value},TheMarkdownMediaSrc:function(){var e=this;return this.markdownMediaSrc?this.markdownMediaSrc:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var i,a,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=/^\/o\/content\?str=id:(.+)$/.exec(n))){t.next=8;break}return t.next=4,Wn.Io.loadMetaById(i[1]);case 4:if(!(a=t.sent)){t.next=8;break}return r=Wn.Io.formatObjPath(a,e.mediaSrcMode,e.meta),t.abrupt("return",r);case 8:return t.abrupt("return",n);case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},ThePreviewMediaSrc:function(){var e=this;return this.previewMediaSrc?this.previewMediaSrc:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!/^(https?:)(\/\/)/.test(n)){t.next=2;break}return t.abrupt("return",n);case 2:return t.next=4,Wn.Io.loadMetaBy(n,e.meta);case 4:if(!(i=t.sent)){t.next=7;break}return t.abrupt("return","/o/content?str=id:".concat(i.id));case 7:return t.abrupt("return",n);case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}},methods:{OnEditorInit:function(e){this.$editor=e},OnInsertMedia:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o,s,c,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.meta||e.defaultMediaDir,e.keepLastBy&&(n=Ti.Storage.local.getString(e.keepLastBy)||n),t.next=4,Wn.OpenObjSelector(n,{fallbackPath:e.defaultMediaDir});case 4:if((i=t.sent)&&!_.isEmpty(i)){t.next=7;break}return t.abrupt("return");case 7:e.keepLastBy&&(a=_.first(i),r=Ti.Util.getParentPath(a.ph),o=Wn.Session.getFormedPath(r),Ti.Storage.local.set(e.keepLastBy,o)),s=_createForOfIteratorHelper(i);try{for(s.s();!(c=s.n()).done;)l=c.value,e.insertMediaObj(l)}catch(e){s.e(e)}finally{s.f()}case 10:case"end":return t.stop()}},t)}))()},insertMediaObj:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mime;if(t){var n="/o/content?str=id:".concat(e.id);t.startsWith("video/")?this.insertMedia("video",n,{controls:!1,autoplay:!1}):t.startsWith("image/")&&this.insertMedia("image",n)}},insertMedia:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image",n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n){var a=new(Quill.import("delta")),r=this.$editor.getSelection();r||(this.$editor.setSelection(0),r={index:0,length:0});var o=r,s=o.index,c=o.length;a.retain(s),c>0&&a.delete(c),a.insert((e={},_defineProperty(e,t,n),_defineProperty(e,"attributes",i),e)),this.$editor.updateContents(a),this.$editor.setSelection(s+1)}}}};Ti.Preload("ti/com/wn/obj/markdown/richeditor/wn-markdown-richeditor.mjs",e)}(),Ti.Preload("ti/com/wn/obj/markdown/richeditor/_com.json",{name:"wn-obj-markdown-richeditor",globally:!0,template:"./wn-markdown-richeditor.html",props:["@com:ti/text/markdown/richeditor/ti-markdown-richeditor-props.mjs","./wn-markdown-richeditor-props.mjs"],methods:"@com:ti/text/markdown/richeditor/ti-markdown-richeditor-delegate-methods.mjs",mixins:["./wn-markdown-richeditor.mjs"],components:["@com:ti/text/markdown/richeditor"]}),Ti.Preload("ti/com/wn/obj/picker/wn-obj-picker.html",'<div class="wn-obj-picker"\n  :class="TopClass">\n  \x3c!--\n    Empty Items\n  --\x3e\n  <div\n    v-if="!hasItems"\n      class="as-empty">\n      <div class="as-empty-item"\n        @click.left.stop="OnPickItem">\n        <i class="im im-plus"></i>\n      </div>\n  </div>\n  \x3c!--\n    Show Items\n  --\x3e\n  <div ref="itemsCon"\n    v-else\n      class="as-items-con"\n      @click.left="OnClickItemsCon">\n      <div \n        v-for="(it, index) in DisplayItems"\n          :key="it._key"\n          class="as-item">\n          <TiObjThumb \n              v-bind="it"\n              @remove="OnRemoveItem"/>        \n      </div>\n      \x3c!--For multi--\x3e\n      <div\n        v-if="multi" \n          class="as-empty-item"\n          @click.left.stop="OnPickItem">\n          <i class="im im-plus"></i>\n      </div>\n  </div>\n  \x3c!--\n    Loading\n  --\x3e\n  <ti-loading\n    v-if="loading"\n      class="as-mid-tip-mask"/>\n</div>'),function(){var e={data:function(){return{loading:!1,dragging:!1,skipReload:!1,myItems:[]}},props:{empty:{type:Object,default:function(){return{text:"i18n:no-selected",value:void 0}}},value:{type:[Object,String,Array],default:null},valueType:{type:String,default:"idPath",validator:function(e){return/^(obj|path|fullPath|idPath|id)$/.test(e)}},base:{type:[Object,String],default:"~"},multi:{type:Boolean,default:!1},textBy:{type:[String,Array],default:null},filterBy:{type:[Object,String,Function,Boolean],default:function(){return{race:["isEqual","FILE"]}}}},computed:{TopClass:function(){return this.getTopClass({"is-multi":this.multi,"is-single":!this.multi,"is-dragging":this.dragging})},DisplayItems:function(){for(var e=this,t=[],n=0;n<this.myItems.length;n++){var i=this.myItems[n],a=Wn.Util.getObjThumbInfo(i,{exposeHidden:!0,badges:{NW:["href","fas-link"],SE:["newtab","fas-external-link-alt"]}});a.index=n,a._key="".concat(a.id,"_").concat(a.index),a.removeIcon="im-x-mark",a.onTitle=function(t){e.OnEditItem(t)},t.push(a)}return t},FirstItem:function(){return _.first(this.myItems)},hasItems:function(){return!_.isEmpty(this.myItems)},theChooseIcon:function(){return _.isEmpty(this.myItems)?this.chooseIcon:null}},methods:{OnPickItem:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.FirstItem,n=!n||_.isEmpty(n)?e.base||"~":"id:".concat(n.id),!_.isPlainObject(n)||n.pid){t.next=6;break}return t.next=5,Wn.Io.loadMetaById(n.id);case 5:n=t.sent;case 6:return console.log("hahha"),e.filterBy&&(i=Ti.Validate.compile(e.filterBy)),t.next=10,Wn.OpenObjSelector(n,{multi:e.multi,selected:e.myItems,filter:i});case 10:if(a=t.sent,!_.isEmpty(a)){t.next=13;break}return t.abrupt("return");case 13:r=e.multi?_.concat(e.myItems,a):a,e.notifyChange(r);case 15:case"end":return t.stop()}},t)}))()},OnClickItemsCon:function(){this.OnPickItem()},OnRemoveItem:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.id,e.index),n=[],i=0;i<this.myItems.length;i++){var a=this.myItems[i];t!=i&&n.push(a)}this.notifyChange(n)},OnClearItems:function(){this.notifyChange([])},OnEditItem:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.index,a=t.myItems[i],n.next=4,Ti.App.Open({title:"i18n:edit",width:640,height:480,result:_.pick(a,"title","href","newtab"),model:{prop:"data",event:"change"},comType:"ti-form",comConf:{fields:[{title:"i18n:title",name:"title",comType:"ti-input"},{title:"i18n:href",name:"href",comType:"ti-input"},{title:"i18n:newtab",name:"newtab",type:"Boolean",comType:"ti-toggle"}]}});case 4:if(r=n.sent,!_.isUndefined(r)){n.next=7;break}return n.abrupt("return");case 7:(a=_.cloneDeep(a)).title=r.title,a.href=r.href,a.newtab=r.newtab,(o=_.cloneDeep(t.myItems)).splice(i,1,a),t.myItems=o,t.skipReload=!0,t.notifyChange(),_.delay(function(){t.skipReload=!1},100);case 17:case"end":return n.stop()}},n)}))()},notifyChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.myItems,t=null,n=["id","nm","thumb","title","mime","tp","sha1","len","href","newtab"];if(this.multi){t=[];var i,a=_createForOfIteratorHelper(e);try{for(a.s();!(i=a.n()).done;){var r=i.value,o=Wn.Io.formatObjPath(r,this.valueType,n);t.push(o)}}catch(e){a.e(e)}finally{a.f()}}else _.isEmpty(e)||(t=Wn.Io.formatObjPath(e[0],this.valueType,n));this.$notify("change",t)},switchItem:function(e,t){if(e!=t){var n=_.cloneDeep(this.myItems),i=n[e];(n=_.filter(n,function(t,n){return n!=e})).splice(t,0,i),this.myItems=n,this.notifyChange()}},initSortable:function(){var e=this;this.multi&&this.$refs.itemsCon&&new Sortable(this.$refs.itemsCon,{animation:300,filter:".as-empty-item",onStart:function(){e.dragging=!0},onEnd:function(t){var n=t.oldIndex,i=t.newIndex;e.dragging=!1,e.skipReload=!0,e.switchItem(n,i),_.delay(function(){e.skipReload=!1},100)}})},reload:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.doReload();case 3:e.loading=!1;case 4:case"end":return t.stop()}},t)}))()},doReload:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=e.value?[].concat(e.value):[],i=[],a=_createForOfIteratorHelper(n),t.prev=3,a.s();case 5:if((r=a.n()).done){t.next=15;break}return o=r.value,t.next=9,e.reloadItem(o);case 9:if((s=t.sent)&&i.push(s),e.multi||!(i.length>0)){t.next=13;break}return t.abrupt("break",15);case 13:t.next=5;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(3),a.e(t.t0);case 20:return t.prev=20,a.f(),t.finish(20);case 23:e.myItems=i;case 24:case"end":return t.stop()}},t,null,[[3,17,20,23]])}))()},reloadItem:function(e){return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&!_.isEmpty(e)){t.next=2;break}return t.abrupt("return",null);case 2:if(!_.isString(e)){t.next=8;break}return t.next=5,Wn.Io.loadMetaBy(e);case 5:return t.abrupt("return",t.sent);case 8:if(!e.id){t.next=12;break}return t.abrupt("return",e);case 12:throw Ti.Err.make("e-wn-obj-picker-unsupported-value-form",e);case 13:case"end":return t.stop()}},t)}))()}},watch:{value:function(e,t){_.isEqual(e,t)||this.skipReload||this.reload()},hasItems:function(e,t){var n=this;e&&!t&&this.$nextTick(function(){n.initSortable()})}},mounted:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reload();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()};Ti.Preload("ti/com/wn/obj/picker/wn-obj-picker.mjs",e)}(),Ti.Preload("ti/com/wn/obj/picker/_com.json",{name:"wn-obj-picker",globally:!0,template:"./wn-obj-picker.html",mixins:["./wn-obj-picker.mjs"],components:["@com:wn/adaptlist"],deps:["@deps:sortable.js"]}),Ti.Preload("ti/com/wn/obj/preview/com/preview-info-field/preview-info-field.html",'<div class="info-field">\n  <div class="as-name" :style="theNameStyle">\n    <ti-icon v-if="icon" class="it-icon" :value="icon"/>\n    <span class="it-text">{{title|i18n}}</span>\n  </div>\n  <div class="as-value" :style="theValueStyle">{{theValue}}</div>\n</div>'),function(){var e={data:function(){return{theValue:null}},props:{icon:{type:String,default:null},data:{type:Object,default:function(){return{}}},type:{type:String,default:"String"},title:{type:String,default:null},name:{type:String,default:null},dict:{type:String,default:null},nameWidth:{type:[String,Number],default:50},valueWidth:{type:[String,Number],default:200},transformer:{type:[String,Object,Function],default:null}},watch:{data:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.evalTheValue();case 2:this.theValue=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),name:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.evalTheValue();case 2:this.theValue=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},computed:{theTransformer:function(){var e=this.transformer||"Ti.Types."+Ti.Types.getFuncByType(this.type||"String","transformer");return Ti.Util.genInvoking(e,{context:this.data,partial:"right"})},theNameStyle:function(){return Ti.Css.toStyle({width:this.nameWidth})},theValueStyle:function(){return Ti.Css.toStyle({width:this.valueWidth})}},methods:{evalTheValue:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=_.get(e.data,e.name),!e.dict){t.next=5;break}return t.next=4,wn.Dict.get(e.dict,n);case 4:n=t.sent;case 5:return _.isFunction(e.theTransformer)&&(n=e.theTransformer(n)),t.abrupt("return",n);case 7:case"end":return t.stop()}},t)}))()}},mounted:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.evalTheValue();case 2:this.theValue=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()};Ti.Preload("ti/com/wn/obj/preview/com/preview-info-field/preview-info-field.mjs",e)}(),Ti.Preload("ti/com/wn/obj/preview/com/preview-info-field/_com.json",{name:"wn-obj-preview-info-field",globally:!0,template:"./preview-info-field.html",mixins:["./preview-info-field.mjs"]}),Ti.Preload("ti/com/wn/obj/preview/wn-obj-preview.html",'<div class="wn-obj-preview" :class="TopClass">\n  \x3c!--\n    With content\n  --\x3e\n  <div class="wop-con" v-if="hasMeta">\n    \x3c!--Main View--\x3e\n    <component class="as-main"\n      :is="PreviewComType"\n      :icon="DataIcon"\n      :title="DataTitle"\n      :src="DataSource"/>\n    \x3c!--ActionBar at top--\x3e\n    <div class="as-abar">\n      <ul>\n        <li v-for="it in TheActions"\n          @click.left="OnAction(it.action)">\n          <ti-icon class="it-icon" :value="it.icon"/>\n        </li>\n      </ul>\n    </div>\n    \x3c!--Meta at bottom--\x3e\n    <div class="as-info" v-if="isShowInfo">\n      \x3c!--\n        Head\n      --\x3e\n      <div class="info-head">\n        \x3c!--Pin Status Icon--\x3e\n        <span class="it-icon" @click.left="toggleInfoFloat">\n          <ti-icon :value="PreviewInfoPinIcon"/>\n        </span>\n        \x3c!--Head text--\x3e\n        <span class="it-text">{{\'i18n:info\'|i18n}}</span>\n        \x3c!--Edit Button--\x3e\n        <span class="it-edit"\n          @click.left="OnEditInfo">{{\'i18n:edit\'|i18n}}</span>\n      </div>\n      \x3c!--\n        Fields\n      --\x3e\n      <div class="info-field-con">\n        <wn-obj-preview-info-field\n          v-for="fld in PrevewInfoFields"\n          :key="fld.name"\n          v-bind="fld"\n          :data="meta"/>\n      </div>\n    </div>\n  </div>\n  \x3c!--\n    Empty \n  --\x3e\n  <div v-else\n    class="ti-blank is-big">\n    <ti-icon value="fas-file-image"/>\n    <span>{{\'nil-obj\'|i18n}}</span>\n  </div>\n</div>'),function(){var e={data:function(){return{isInFullScreen:!1,isShowInfo:!1,isFloatInfo:!1}},props:{meta:{type:Object,default:function(){return{}}},status:{type:Object,default:function(){return{}}},actions:{type:Array,default:function(){return["fullscreen","newtab","download","info"]}},showInfo:{type:Boolean,default:!1},floatInfo:{type:Boolean,default:!1},editInfoBy:{type:[Function,String],default:null},infoPosition:{type:String,default:"bottom",validator:function(e){return/^(bottom|left)$/.test(e)}},infoNameWidth:{type:[String,Number],default:50},infoValueWidth:{type:[String,Number],default:200},infoFields:{type:Array,default:function(){return["nm","tp","mime","width","height","len","duration"]}},stateLocalKey:{type:String,default:null}},computed:{hasMeta:function(){return!_.isEmpty(this.meta)},TopClass:function(){return _defineProperty({"is-fullscreen":this.isInFullScreen,"is-show-info":this.isShowInfo,"is-float-info":this.isFloatInfo},"is-info-at-".concat(this.infoPosition),!0)},PreviewComType:function(){if(this.meta){var e=this.meta.mime||"";return e.startsWith("video/")?"ti-media-video":e.startsWith("image/")?"ti-media-image":"ti-media-binary"}},PreviewInfoPinIcon:function(){return this.isFloatInfo?"fas-thumbtack":"zmdi-layers"},PrevewInfoFields:function(){var e=this;return Wn.Obj.evalFields(this.meta,this.infoFields,function(t){if(!t.quickName||!_.isUndefined(t.value))return"Group"==t.type?t:_.defaults(t,{nameWidth:e.infoNameWidth,valueWidth:e.infoValueWidth})})},TheActions:function(){var e=this,t=[];return this.hasMeta&&_.forEach(this.actions,function(n){"fullscreen"==n?e.isInFullScreen?t.push({icon:"zmdi-fullscreen-exit",text:"i18n:wop-fullscreen-quit",action:function(){return e.exitFullscreen()}}):t.push({icon:"zmdi-fullscreen",text:"i18n:wop-fullscreen-enter",action:function(){return e.enterFullscreen()}}):"newtab"==n?t.push({icon:"zmdi-open-in-new",text:"i18n:open-newtab",action:function(){return e.openInNewTab()}}):"download"==n?t.push({icon:"zmdi-download",text:"i18n:download-to-local",action:function(){return e.download()}}):"info"==n?e.isShowInfo?t.push({icon:"zmdi-info-outline",text:"i18n:info",action:function(){return e.doHideInfo()}}):t.push({icon:"zmdi-info",text:"i18n:info",action:function(){return e.doShowInfo()}}):_.isPlainObject(n)&&n.action&&t.push(n)}),t},DataSource:function(){if(!this.meta)return"";return Wn.Util.getDownloadLink(this.meta,{mode:"auto"}).toString()},DataIcon:function(){return Wn.Util.getIconObj(this.meta)},DataTitle:function(){return Wn.Util.getObjDisplayName(this.meta)}},methods:{OnAction:function(e){_.isString(e)?Ti.App(this).exec(actionName):_.isFunction(e)&&e()},OnEditInfo:function(){this.meta&&(_.isString(this.editInfoBy)?Ti.App(this).exec(this.editInfoBy,this.meta):_.isFunction(this.editInfoBy)?this.editInfoBy(this.meta):Wn.EditObjMeta(this.meta))},enterFullscreen:function(){this.isInFullScreen=!0,this.resizeMediaViewport()},exitFullscreen:function(){this.isInFullScreen=!1,this.resizeMediaViewport()},doShowInfo:function(){this.isShowInfo=!0,this.saveStateToLocal(),this.resizeMediaViewport()},doHideInfo:function(){this.isShowInfo=!1,this.saveStateToLocal(),this.resizeMediaViewport()},toggleInfoFloat:function(){this.isFloatInfo=!this.isFloatInfo,this.saveStateToLocal(),this.resizeMediaViewport()},resizeMediaViewport:function(){var e,t=this,n=_createForOfIteratorHelper(this.$children);try{var i=function(){var n=e.value;_.isFunction(n.onResizeViewport)&&t.$nextTick(function(){n.onResizeViewport()})};for(n.s();!(e=n.n()).done;)i()}catch(e){n.e(e)}finally{n.f()}},openInNewTab:function(){var e=Wn.Util.getAppLink(this.meta);Ti.Be.OpenLink(e)},download:function(){var e=Wn.Util.getDownloadLink(this.meta);Ti.Be.OpenLink(e)},saveStateToLocal:function(){this.stateLocalKey&&Ti.Storage.session.mergeObject(this.stateLocalKey,{isShowInfo:this.isShowInfo,isFloatInfo:this.isFloatInfo})},loadStateFromLocal:function(){if(this.stateLocalKey){var e=Ti.Storage.session.getObject(this.stateLocalKey);_.defaults(e,{isShowInfo:this.isShowInfo,isFloatInfo:this.isFloatInfo}),this.isShowInfo=e.isShowInfo,this.isFloatInfo=e.isFloatInfo}}},watch:{showInfo:function(e){console.log("showInfo watched"),this.isShowInfo=e},floatInfo:function(e){console.log("floatInfo watched"),this.isFloatInfo=e}},mounted:function(){var e=this;this.isShowInfo=this.showInfo,this.isFloatInfo=this.floatInfo,this.$nextTick(function(){e.loadStateFromLocal()})}};Ti.Preload("ti/com/wn/obj/preview/wn-obj-preview.mjs",e)}(),Ti.Preload("ti/com/wn/obj/preview/_com.json",{name:"wn-obj-preview",globally:!0,i18n:"@i18n:wn-obj-preview",template:"./wn-obj-preview.html",mixins:["./wn-obj-preview.mjs"],components:["./com/preview-info-field","@com:ti/media/binary","@com:ti/media/image","@com:ti/media/video"]}),Ti.Preload("ti/com/wn/obj/puretext/wn-obj-puretext.html",'<div class="wn-obj-puretext">\n  \x3c!--\n    Show Text Editor\n  --\x3e\n  <ti-text-raw v-if="hasMeta"\n    class="ti-fill-parent"\n    :icon="theIcon"\n    :title="theTitle"\n    :show-title="showTitle"\n    :value="content"\n    :content-is-changed="status.changed"\n    :blank-text="blankText"\n    @change="onChangeContent"/>\n  \x3c!--\n    Empty Data\n  --\x3e\n  <div v-else\n    class="ti-blank is-big">\n    <ti-icon value="zmdi-alert-circle-o"/>\n    <span>{{"empty-data"|i18n}}</span>\n  </div>\n</div>'),function(){var e={inheritAttrs:!0,props:{meta:{type:Object,default:function(){return{}}},content:{type:String,default:null},savedContent:{type:String,default:null},contentType:{type:String,default:null},showTitle:{type:Boolean,default:!0},status:{type:Object,default:function(){return{}}},blankText:{type:String,default:"i18n:blank"}},computed:{theIcon:function(){return this.meta?Wn.Util.getIconObj(this.meta):Ti.Icons.get()},theTitle:function(){return this.meta?this.meta.title||this.meta.nm:"no-title"},hasMeta:function(){return!!this.meta}},methods:{onChangeContent:function(e){this.$notify("change",{content:e})}},mounted:function(){var e=this;Ti.Fuse.getOrCreate().add({key:"wn-obj-puretext",everythingOk:function(){return!e.status.changed},fail:function(){Ti.Toast.Open("i18n:wn-obj-nosaved","warn")}})},beforeDestroy:function(){Ti.Fuse.get().remove("wn-obj-puretext")}};Ti.Preload("ti/com/wn/obj/puretext/wn-obj-puretext.mjs",e)}(),Ti.Preload("ti/com/wn/obj/puretext/_com.json",{name:"wn-obj-puretext",globally:!0,template:"./wn-obj-puretext.html",mixins:["./wn-obj-puretext.mjs"],components:["@com:ti/text/raw"]}),Ti.Preload("ti/com/wn/obj/uploader/wn-obj-uploader.html",'<ti-uploader\n  :value="formedValue"/>'),function(){var e={props:{value:{type:[String,Object,Array],default:null},multi:{type:Boolean,default:!0},removable:{type:Boolean,default:!0},remained:{type:Number,default:0},target:{type:String,default:null},nameTransformer:{type:[Function,String,Object],default:null},supportTypes:{type:[Array,String],default:null},imageFilter:{type:[Array,String],default:null},imageQuality:{type:Number,default:0}},computed:{formedValue:function(){return null}},methods:{getObj:function(e){e&&_.isString(e)}}};Ti.Preload("ti/com/wn/obj/uploader/wn-obj-uploader.mjs",e)}(),Ti.Preload("ti/com/wn/obj/uploader/_com.json",{name:"wn-obj-uploader",globally:!0,template:"./wn-obj-uploader.html",mixins:["./wn-obj-uploader.mjs"],components:["@com:ti/uploader"]}),Ti.Preload("ti/com/wn/session/badge/wn-session-badge.html",'<div class="wn-session-badge"\n  :class="TopClass">\n  \x3c!--\n    Ti Session Badge\n  --\x3e\n  <div class="as-info" ref="info">\n    <TiSessionBadge\n      :me="me"\n      :login-icon="TheLoginIcon"\n      avatar-key="thumb"\n      name-keys="nickname|nm"\n      name-event="show:more"\n      :auto-sign-link="false"\n      @show:more="OnShowMore"/>\n  </div>\n  \x3c!--\n    More Information\n  --\x3e\n  <template v-if="!collapse">\n    \x3c!--Mask--\x3e\n    <div class="as-mask" @click="collapse=true"></div>\n    \x3c!--Drop--\x3e\n    <div ref="drop" class="as-drop" :style="DropStyle">\n      \x3c!--\n        Avatar\n      --\x3e\n      <div class="as-avatar">\n        <ti-icon :value="TheLoginIcon"/>\n        <div class="as-name">\n          <span>{{me.nickname}}</span>\n          <span>{{me.nm}}</span>\n        </div>\n      </div>\n      \x3c!--\n        Language\n      --\x3e\n      <div class="as-lang">\n        <div\n          v-for="la in LangList"\n            class="lang-item"\n            :class="la.className"\n            @click.left="OnChangeLang(la.lang)">\n            <img :src="la.src"/>\n            <div>{{la.text}}</div>\n        </div>\n      </div>\n      \x3c!--\n        Foot: resetpasswd + logout\n      --\x3e\n      <div class="as-foot">\n        <a @click.left="OnResetPassword">{{\'passwd-reset\' | i18n}}</a>\n        <a @click.left="$notify(\'do:logout\')">{{\'logout\' | i18n}}</a>\n      </div>\n    </div>\n  </template>\n</div>'),function(){var e={data:function(){return{collapse:!0,dropReady:!1}},props:{me:{type:Object,default:null}},computed:{TopClass:function(){return this.getTopClass()},MySex:function(){return _.get(this.me,"sex")||0},MyLang:function(){return _.get(this.me,"LANG")||"zh-cn"},hasSession:function(){return!!this.me},LangList:function(){return[{lang:"zh-cn",text:"",className:{"is-current":"zh-cn"==this.MyLang},src:"/gu/rs/ti/icons/png/lang-zh-cn.png"},{lang:"en-us",text:"English",className:{"is-current":"en-us"==this.MyLang},src:"/gu/rs/ti/icons/png/lang-en-us.png"}]},TheLoginIcon:function(){return 2==this.MySex?"im-user-female":1==this.MySex?"im-user-male":"im-user-circle"},DropStyle:function(){if(this.dropReady)return{visibility:"visible"}}},methods:{OnResetPassword:function(){this.collapse=!0,Ti.App(this).dispatch("session/openResetPasswd")},OnShowMore:function(){this.collapse=!1},OnChangeLang:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.MyLang==e){n.next=4;break}return n.next=3,Wn.Sys.exec("me -set LANG=".concat(e));case 3:window.location.reload();case 4:case"end":return n.stop()}},n)}))()},dockDrop:function(){var e=this,t=this.$refs.drop,n=this.$refs.info;_.isElement(t)&&_.isElement(n)&&!this.collapse&&(Ti.Dom.dockTo(t,n,{space:{y:2}}),_.delay(function(){e.dropReady=!0},10))}},watch:{collapse:{handler:function(e,t){var n=this;e||e==t?e&&(this.dropReady=!1):_.delay(function(){n.dockDrop()},0)},immediate:!0}}};Ti.Preload("ti/com/wn/session/badge/wn-session-badge.mjs",e)}(),Ti.Preload("ti/com/wn/session/badge/_com.json",{name:"wn-session-badge",globally:!0,template:"./wn-session-badge.html",mixins:["./wn-session-badge.mjs"],components:["@com:ti/session/badge"]}),function(){var e={methods:{explainDisplayItems:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=_.concat(e),n=[];return _.forEach(t,function(e){if(!Ti.Util.isNil(e)){if(_.isString(e)){var t=/^@<thumb(:([^>]*))?>$/.exec(e);if(t){var i=t[2]||void 0;return void n.push({key:["icon","thumb","tp","mime","race","__updated_time"],type:"Object",transformer:{name:"Ti.Types.toObject",args:{icon:"icon",thumb:"thumb",type:"tp",mime:"mime",race:"race",timestamp:"__updated_time"}},comType:"wn-obj-icon",comConf:{"...":"${=value}",candidateIcon:i}})}}n.push(e)}}),n}}};Ti.Preload("ti/com/wn/support/wn_list_wrapper_mixins.mjs",e)}(),Ti.Preload("ti/com/wn/table/wn-table.html",'<ti-table\n  v-bind="this"\n  :fields="TheFields"\n  :on-init="OnSubListInit"\n  @select="OnSelected"\n  @open="$notify(\'open\', $event)"/>'),function(){var e={data:function(){return{isAllChecked:!1,hasChecked:!1,theCurrentId:!1,theCheckedIds:!1}},computed:{TheFields:function(){var e,t=[],n=_createForOfIteratorHelper(this.fields);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=_.assign({},i);a.display=this.explainDisplayItems(i.display),t.push(a)}}catch(e){n.e(e)}finally{n.f()}return t}},methods:{OnSubListInit:function(e){this.$list=e},OnSelected:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.theCheckedIds=e.checkedIds,this.theCurrentId=e.currentId,this.syncCheckStatus(),this.$notify("select",e)},syncCheckStatus:function(){this.isAllChecked=this.$list.isAllChecked,this.hasChecked=this.$list.hasChecked},selectPrevRow:function(e){this.$list.selectPrevRow(e)},selectNextRow:function(e){this.$list.selectNextRow(e)},getCurrentRow:function(e){return this.$list.getCurrentRow(e)},getCheckedRow:function(e){return this.$list.getCheckedRow(e)},getCurrent:function(e){return this.$list.getCurrent(e)},getChecked:function(e){return this.$list.getChecked(e)},selectRow:function(e){this.$list.selectRow(e)},checkRow:function(e){this.$list.checkRow(e)},cancelRow:function(e){this.$list.cancelRow(e)}},watch:{data:function(){this.syncCheckStatus()},checkedIds:function(){this.syncCheckStatus()}}};Ti.Preload("ti/com/wn/table/wn-table.mjs",e)}(),Ti.Preload("ti/com/wn/table/_com.json",{name:"wn-table",globally:!0,template:"./wn-table.html",props:["@com:ti/support/list_props.mjs","@com:ti/table/ti-table-props.mjs"],mixins:["@com:wn/support/wn_list_wrapper_mixins.mjs","./wn-table.mjs"],components:["@com:ti/table"]}),Ti.Preload("ti/com/wn/thing/manager/com/thing-creator/thing-creator.html",'<div class="thing-creator ti-box-relative">\n  <ti-form\n    :fields="fields"\n    :only-fields="onlyFields"\n    :fixed="fixed"\n    :data="TheData"\n    :on-init="OnFormInit"\n    @field:change="OnFormFieldChange"\n    @change="OnFormChange"\n    @submit="OnSubmit"/>\n  <hr class="no-space">\n  <div class="ti-flex-center ti-padding-10">\n    <div class="ti-btn is-big" \n      @click="OnCreate">\n      <span>{{\'create-now\'|i18n}}</span>\n    </div>\n  </div>\n  <div v-if="creating"\n    class="ti-box-mask as-thin ti-flex-center">\n    <ti-loading text="i18n:creating"/>\n  </div>\n</div>'),function(){var e={data:function(){return{myData:void 0,creating:!1}},props:{fields:{type:Array,default:function(){return[]}},data:{type:Object,default:function(){return{}}},onlyFields:{type:Boolean,default:!1},fixed:{type:Object,default:void 0}},computed:{TheData:function(){return this.myData||this.data}},methods:{OnFormInit:function(e){this.$form=e},OnFormFieldChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.myData=this.$form.getData(e)},OnFormChange:function(e){this.myData=e},OnCreate:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.creating=!0,t.next=3,Ti.App(e).dispatch("main/create",e.myData);case 3:n=t.sent,e.creating=!1,!n||n instanceof Error||e.$notify("block:hide","creator");case 6:case"end":return t.stop()}},t)}))()},OnSubmit:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$nextTick(function(){e.OnCreate()});case 1:case"end":return t.stop()}},t)}))()}},mounted:function(){this.myData=this.$form.getData()}};Ti.Preload("ti/com/wn/thing/manager/com/thing-creator/thing-creator.mjs",e)}(),Ti.Preload("ti/com/wn/thing/manager/com/thing-creator/_com.json",{name:"wn-thing-creator",globally:!0,template:"./thing-creator.html",mixins:["./thing-creator.mjs"],components:[]}),function(){var e={dirName:{type:String,default:void 0},dataHome:{type:String,default:void 0},files:{type:Object,default:void 0},preview:{type:Object,default:void 0},previewEdit:{type:Object,default:void 0},actions:{type:Array,default:function(){return[{name:"reloading",type:"action",icon:"zmdi-refresh",tip:"i18n:refresh",altDisplay:{icon:"zmdi-refresh zmdi-hc-spin"},action:"$parent:reloadData"},{type:"line"},{name:"deleting",type:"action",icon:"zmdi-delete",text:"i18n:del",altDisplay:{icon:"zmdi-refresh zmdi-hc-spin",text:"i18n:del-ing"},action:"$parent:doDeleteSelected"},{type:"line"},{name:"upload",type:"action",icon:"zmdi-cloud-upload",text:"i18n:upload",action:"$parent:doUploadFiles"}]}},stateLocalKey:{type:String,default:null},dirNameTip:{type:String,default:void 0},dirNameComType:{type:String,default:"ti-droplist"},dirNameOptions:{type:Array,default:function(){return[{icon:"zmdi-collection-image",text:"i18n:media",value:"media"},{icon:"zmdi-attachment-alt",text:"i18n:attachment",value:"attachment"}]}},nilIcon:{type:String,default:"fas-braille"},nilText:{type:String,default:null}};Ti.Preload("ti/com/wn/thing/manager/com/thing-files/thing-files-props.mjs",e)}(),Ti.Preload("ti/com/wn/thing/manager/com/thing-files/thing-files.html",'<div class="wn-thing-files"\n  :class="TopClass">\n  \x3c!--\n    With Data Home\n  --\x3e\n  <template v-if="dataHome">\n    \x3c!--\n      Head bar for switch dir and actions\n    --\x3e\n    <div class="as-header">\n      <div v-if="dirNameTip"\n        class="as-tip">\n        <span>{{dirNameTip|i18n}}</span>\n      </div>\n      \x3c!--Left: select files home dirName--\x3e\n      <div class="as-name">\n        <component \n          :is="dirNameComType"\n          height=".3rem"\n          :allow-empty="false"\n          :options="dirNameOptions"\n          :value="dirName"\n          :prefix-icon-for-clean="false"\n          @change="OnDirNameChanged"/>\n      </div>\n      \x3c!--Right: Common Actions--\x3e\n      <div class="as-menu">\n        <ti-actionbar \n          :items="actions"\n          :status="myStatus"/>\n      </div>\n    </div>\n    \x3c!--\n      File Preview\n    --\x3e\n    <div class="as-preview">\n      <wn-obj-preview\n        class="ti-fill-parent"\n        v-bind="ThePreview"\n        :meta="CurrentFile"/>\n    </div>\n    \x3c!--\n      File List\n    --\x3e\n    <div class="as-list">\n      <wn-adaptlist\n        class="ti-fill-parent"\n        v-bind="TheFiles"\n        :data="myData"\n        :meta="myDataDirObj"\n        :status="myStatus"\n        :before-upload="checkDataDir"\n        @uploaded="OnFileUploaded"\n        @select="OnFileSelect"\n        @open="OnFileOpen"\n        :on-init="OnAdaptListInit"/>\n    </div>\n  </template>\n  \x3c!--\n    Without Data Home\n  --\x3e\n  <ti-loading\n    v-else\n      class="nil-datahome as-big-mask"\n      :text="nilText"\n      :icon="nilIcon"/>\n</div>'),function(){var e={inject:["$ThingManager"],data:function(){return{myDataDirObj:null,myData:{},myStatus:{reloading:!1},myCurrentId:null}},computed:{TopClass:function(){return this.getTopClass()},hasDataHome:function(){return!!this.dataHome},CurrentFile:function(){if(this.myCurrentId&&this.myData.list){var e,t=_createForOfIteratorHelper(this.myData.list);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(this.myCurrentId==n.id)return n}}catch(e){t.e(e)}finally{t.f()}}},ThePreview:function(){var e=this,t=Ti.Util.getFallback(this.preview,this.dirName,"@default")||this.preview||{};return _objectSpread({showInfo:!1,floatInfo:!1,infoPosition:"left",infoNameWidth:40,infoValueWidth:120,stateLocalKey:this.getStateLocalKey("preview")},t,{editInfoBy:function(){e.editPreviewInfo()}})},TheFiles:function(){var e=this;return _.assign({},this.files,{routers:{reload:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.reloadData();case 2:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()}})}},methods:{OnAdaptListInit:function(e){this.$adaptlist=e},OnDirNameChanged:function(e){var t=this;Ti.App(this).commit("main/setCurrentDataDir",e),this.$nextTick(function(){t.reloadData()})},OnFileSelect:function(e){var t=e.currentId;this.myCurrentId=t},OnFileOpen:function(e){this.$notify("file:open",e)},OnFileUploaded:function(){var e=arguments,t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:[],(a=_.first(i))&&(t.$adaptlist.myCurrentId=a.id,t.myCurrentId=a.id),n.next=5,Ti.App(t).dispatch("main/autoSyncCurrentFilesCount");case 5:case"end":return n.stop()}},n)}))()},getStateLocalKey:function(e){if(this.stateLocalKey&&e)return"".concat(this.stateLocalKey,"_").concat(e)},doDeleteSelected:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$adaptlist.doDelete();case 2:return t.next=4,Ti.App(e).dispatch("main/autoSyncCurrentFilesCount");case 4:case"end":return t.stop()}},t)}))()},checkDataDir:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o,s,c,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.hasDataHome){t.next=2;break}return t.abrupt("return");case 2:if(e.myDataDirObj){t.next=17;break}return n=e.dataHome.indexOf("/"),i=e.dataHome.substring(0,n),a=Ti.Util.appendPath(e.dataHome.substring(n+1),e.dirName),r={race:"DIR",nm:a},o=JSON.stringify(r),s='obj "'.concat(i,"\" -IfNoExists -new '").concat(o,"' -cqno"),t.next=11,Wn.Sys.exec2(s,{as:"json"});case 11:return c=t.sent,t.next=14,Wn.Io.loadMetaBy(e.dataHome);case 14:l=t.sent,Ti.App(e).commit("main/setCurrentDataHomeObj",l),e.myDataDirObj=c;case 17:case"end":return t.stop()}},t)}))()},doUploadFiles:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.checkDataDir();case 2:if(!e.myDataDirObj){t.next=6;break}e.$adaptlist.openLocalFileSelectdDialog(),t.next=7;break;case 6:throw"Impossible!!!";case 7:case"end":return t.stop()}},t)}))()},editPreviewInfo:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.CurrentFile){t.next=6;break}return n=_.get(e.previewEdit,e.dirName),t.next=4,Wn.EditObjMeta(e.CurrentFile,n);case 4:(i=t.sent)&&i.data&&e.updateItemInDataList(i.data);case 6:case"end":return t.stop()}},t)}))()},updateItemInDataList:function(e){e&&this.myData&&_.isArray(this.myData.list)&&(this.myData.list=_.map(this.myData.list,function(t){return t.id==e.id?e:t}))},reloadData:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.dataHome||!e.dirName){t.next=19;break}return e.myStatus.reloading=!0,n=Ti.Util.appendPath(e.dataHome,e.dirName),t.next=5,Wn.Io.loadMeta(n);case 5:if(i=t.sent){t.next=11;break}e.myDataDirObj=null,e.myData={},t.next=16;break;case 11:return t.next=13,Wn.Io.loadChildren(i);case 13:a=t.sent,e.myDataDirObj=i,e.myData=a;case 16:_.delay(function(){e.myStatus.reloading=!1},100),t.next=21;break;case 19:e.myDataDirObj=null,e.myData={};case 21:case"end":return t.stop()}},t)}))()}},watch:{dirName:{handler:"reloadData",immediate:!0}},mounted:function(){this.$ThingManager.$files=this}};Ti.Preload("ti/com/wn/thing/manager/com/thing-files/thing-files.mjs",e)}(),Ti.Preload("ti/com/wn/thing/manager/com/thing-files/_com.json",{name:"wn-thing-files",globally:!0,template:"./thing-files.html",props:"./thing-files-props.mjs",mixins:["./thing-files.mjs"],components:["@com:wn/adaptlist"]}),Ti.Preload("ti/com/wn/thing/manager/com/thing-filter/thing-filter.html",'<div class="wn-thing-filter"\n  :class="TopClass">\n  \x3c!--\n    Icon: Recycle Bin\n  --\x3e\n  <div\n    v-if="isInRecycleBin"\n      class="as-recyclebin"\n      @click="OnLeaveRecycleBin"><div>\n        \x3c!--Icon--\x3e\n        <div class="it-icon">\n          <ti-icon value="fas-recycle"/>\n          <ti-icon value="far-arrow-alt-circle-left"/>\n        </div>\n        \x3c!--text--\x3e\n        <div class="it-text">{{\'i18n:thing-recycle-bin\'|i18n}}</div>\n  </div></div>\n  \x3c!--\n    Keyword\n  --\x3e\n  <TiComboFilter\n    class="as-filter"\n    v-bind="filter"\n    :placeholder="placeholder"\n    :value="value.filter"\n    @change="OnFilterChange"/>\n  \x3c!--\n    Sorter\n  --\x3e\n  <TiComboSorter\n    v-if="hasSorter"\n      class="as-sorter"\n      v-bind="sorter"\n      :value="value.sorter"\n      @change="OnSorterChange"/>\n</div>'),function(){var e={data:function(){return{keywordFocus:!1}},props:{filter:{type:Object,default:function(){return{}}},sorter:{type:Object,default:function(){return{}}},placeholder:{type:String,default:"i18n:find-data"},status:{type:Object,default:function(){return{}}},value:{type:Object,default:function(){return{}}}},computed:{TopClass:function(){return this.getTopClass({"in-recyclebin":this.isInRecycleBin})},hasSorter:function(){return!_.isEmpty(this.sorter)},isInRecycleBin:function(){return this.status.inRecycleBin}},methods:{OnFilterChange:function(e){this.$notify("filter::change",e)},OnSorterChange:function(e){this.$notify("sorter::change",e)},OnLeaveRecycleBin:function(){Ti.App(this).dispatch("main/toggleInRecycleBin")}}};Ti.Preload("ti/com/wn/thing/manager/com/thing-filter/thing-filter.mjs",e)}(),Ti.Preload("ti/com/wn/thing/manager/com/thing-filter/_com.json",{name:"wn-thing-filter",globally:!0,template:"./thing-filter.html",mixins:["./thing-filter.mjs"],components:["@com:ti/combo/filter","@com:ti/combo/sorter"]}),Ti.Preload("ti/com/wn/thing/manager/com/thing-markdown-editor/_com.json",{name:"wn-thing-markdown-richeditor",globally:!0,template:"./thing-markdown-richeditor.html",mixins:["./thing-markdown-richeditor.mjs"],components:[]}),function(){var e={batchUpdate:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o,s,c,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!_.isEmpty(e.checkedItems)){t.next=2;break}return t.abrupt("return",Ti.Toast.Open("i18n:batch-none","warn"));case 2:return n=_.first(e.checkedItems),i=_.get(e.config,"schema.behavior.batch")||{},_.defaults(i,{comType:"wn-obj-form",comConf:{},fields:"schema.meta.comConf.fields",names:null,valueKey:"data"}),i.comType=_.kebabCase(i.comType),/^(ti-|wn-obj-)(form)$/.test(i.comType)&&_.defaults(i.comConf,{autoShowBlank:!1,updateBy:!0,setDataBy:!0}),_.isString(i.names)?i.names.startsWith("^")?(r=new RegExp(i.names),a=function(e){return r.test(e.name)}):i.names.startsWith("!^")?(o=new RegExp(i.names.substring(1)),a=function(e){return!o.test(e.name)}):(s=Ti.S.toArray(i.names),a=function(e){return s.indexOf(e.name)>=0}):a=_.isArray(i.names)&&!_.isEmpty(i.names)?function(e){return i.name.indexOf(e)>=0}:function(e){return!/^(wn-upload-file|wn-imgfile)$/.test(e.comType)},c=_.get(e.config,i.fields),l=function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0,a=[],r=_createForOfIteratorHelper(n);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(_.isArray(o.fields)){var s=_.cloneDeep(o);s.fields=e(o.fields,i),_.isEmpty(s.fields)||a.push(s)}else i(o)&&a.push(o)}}catch(e){r.e(e)}finally{r.f()}return a},c=l(c,a),t.next=13,Ti.App.Open({title:"i18n:batch-update",width:640,height:"90%",position:"top",comType:"inner-body",components:[{name:"inner-body",globally:!1,data:{update:{},value:n,innerComConf:_objectSpread({},i.comConf,{fields:c})},template:"<".concat(i.comType,'\n          v-bind="innerComConf"\n          :').concat(i.valueKey,'="value"\n          @field:change="OnFieldChange"\n          @change="OnChange"/>'),methods:{OnFieldChange:function(e){var t=e.name,n=e.value;_.set(this.update,t,n),this.$notify("change",this.update)},OnChange:function(e){this.value=e}}}]});case 13:if(u=t.sent,_.isEmpty(u)){t.next=17;break}return t.next=17,Ti.App(e).dispatch("main/batchUpdateMetas",u);case 17:case"end":return t.stop()}},t)}))()},changeShown:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ti.App(this).dispatch("main/doChangeShown",e)},showBlock:function(e){"creator"==e&&this.status.inRecycleBin?Ti.Alert("i18n:thing-create-in-recyclebin",{title:"i18n:warn",icon:"im-warning",type:"warn"}):("files"==e?Ti.App(this).dispatch("main/reloadFiles"):"content"==e&&Ti.App(this).dispatch("main/current/reload"),Ti.App(this).dispatch("main/doChangeShown",_defineProperty({},e,!0)))},hideBlock:function(e){Ti.App(this).dispatch("main/doChangeShown",_defineProperty({},e,!1))},toggleBlock:function(e){Ti.App(this).dispatch("main/doChangeShown",_defineProperty({},e,!this.TheShown[e]))},invoke:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=_.get(t.SchemaMethods,e),!_.isFunction(i)){n.next=7;break}return n.next=4,i.apply(t,[]);case 4:return n.abrupt("return",n.sent);case 7:throw Ti.Err.make("e.thing.fail-to-invoke",e);case 8:case"end":return n.stop()}},n)}))()}};Ti.Preload("ti/com/wn/thing/manager/wn-thing-manager-methods.mjs",e)}(),Ti.Preload("ti/com/wn/thing/manager/wn-thing-manager.html",'<ti-gui\n  class="wn-thing"\n  :class="TopClass"\n  v-ti-activable\n  :layout="TheLayout"\n  :schema="TheSchema"\n  :shown="TheShown"\n  :can-loading="true"\n  :loading-as="GuiLoadingAs"\n  :action-status="status"/>'),function(){var e={provide:function(){return{$ThingManager:this}},data:function(){return{myRouting:{}}},props:{meta:{type:Object,default:function(){return{}}},currentDataHome:{type:String,default:void 0},currentDataHomeObj:{type:Object,default:void 0},currentDataDir:{type:String,default:void 0},status:{type:Object,default:function(){return{}}},config:{type:Object,default:function(){return{}}},search:{type:Object,default:function(){return{}}},current:{type:Object,default:function(){return{}}},files:{type:Object,default:function(){return{}}},preview:{type:Object,default:function(){return{}}},emitChange:{type:Boolean,default:!1},keepLastSelection:{type:Boolean,default:!0}},computed:_objectSpread({},Vuex.mapGetters("main/search",["currentItem","checkedItems"]),{TopClass:function(){return this.getTopClass()},TheShown:function(){return _.get(this.config,"shown")||{}},TheKeepLastKey:function(){if(this.keepLastSelection)return _.get(this.meta,"id")+":currentId"},CurrentIsDead:function(){return-1==_.get(this.current,"meta.th_live")},CurrentHeadClass:function(){if(this.CurrentIsDead)return"current-in-recyclebin"},TheLayout:function(){return Ti.Util.explainObj(this,this.config.layout)},TheSchema:function(){return Ti.Util.explainObj(this,this.config.schema)},TheLoadingAs:function(){return _.assign({reloading:{icon:"fas-spinner fa-spin",text:"i18n:loading"},saving:{icon:"zmdi-settings fa-spin",text:"i18n:saving"},deleting:{icon:"zmdi-refresh fa-spin",text:"i18n:del-ing"},publishing:{icon:"zmdi-settings zmdi-hc-spin",text:"i18n:publishing"},restoring:{icon:"zmdi-time-restore zmdi-hc-spin",text:"i18n:thing-restoring"},cleaning:{icon:"zmdi-settings zmdi-hc-spin",text:"i18n:thing-cleaning"}},_.get(this.TheSchema,"loadingAs"))},ChangedRowId:function(){if(this.currentItem&&this.current.status.changed)return this.currentItem.id},GuiLoadingAs:function(){var e=_.findKey(this.status,function(e){return e});return _.get(this.TheLoadingAs,e)},curentThumbTarget:function(){if(this.currentItem){var e=this.meta.id;return"id:".concat(e,"/data/").concat(this.currentItem.id,"/thumb.jpg")}return""},SchemaMethods:function(){return this.TheSchema&&this.TheSchema.methods?Ti.Util.merge({},this.TheSchema.methods):{}},EventRouting:function(){return _.assign({"block:show":"showBlock","block:hide":"hideBlock","block:shown":"changeShown","filter::change":"OnFilterChange","sorter::change":"OnSorterChange","list::select":"OnListSelect","list::open":"OnListOpen","content::change":"OnContentChange","pager::change":"OnPagerChange"},_.get(this.TheSchema,"events"),this.myRouting)}}),methods:{OnFilterChange:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Ti.App(t).commit("main/search/setFilter",e),n.next=3,Ti.App(t).dispatch("main/reloadSearch");case 3:case"end":return n.stop()}},n)}))()},OnSorterChange:function(){var e=arguments,t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:{},Ti.App(t).commit("main/search/setSorter",i),n.next=4,Ti.App(t).dispatch("main/reloadSearch");case 4:case"end":return n.stop()}},n)}))()},OnListSelect:function(e){var t=e.current,n=e.currentId,i=e.checkedIds,a=e.checked;Ti.App(this).dispatch("main/setCurrentThing",{meta:t,currentId:n,checkedIds:i}),this.emitChange&&this.$emit("change",{current:t,currentId:n,checkedIds:i,checked:a})},OnListOpen:function(e){var t=e.rawData,n=Ti.App(this);n.dispatch("main/config/updateShown",this.config.listOpen),n.dispatch("main/setCurrentThing",{meta:t})},OnContentChange:function(e){var t=Ti.App(this);t.dispatch("main/current/changeContent",e),t.commit("main/syncStatusChanged")},OnPagerChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pn,n=e.pgsz;Ti.App(this).dispatch("main/search/reloadPage",{pn:t,pgsz:n})},OnViewCurrentSource:function(){this.viewCurrentSource()},addEventRouting:function(e,t){this.$set(this.myRouting,e,t)},removeEventRouting:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=_.omitBy(this.myRouting,function(e,n){return t.indexOf(n)>=0});this.myRouting=i},__on_events:function(e){var t=_.get(this.EventRouting,e);return t||(t=this.$tiEventTryFallback(e,this.EventRouting)),_.isString(t)?_.get(this,t):t},__ti_shortcut:function(e){"ESCAPE"==e&&this.TheShown.creator&&this.hideBlock("creator")}},mounted:function(){this.THING_MANAGER_ROOT=!0;var e=_.get(this.config,"actions");_.isArray(e)&&this.$notify("actions:update",e)}};Ti.Preload("ti/com/wn/thing/manager/wn-thing-manager.mjs",e)}(),Ti.Preload("ti/com/wn/thing/manager/_com.json",{name:"wn-thing-manager",globally:!0,i18n:"@i18n:wn-thing",template:"./wn-thing-manager.html",methods:"./wn-thing-manager-methods.mjs",mixins:["./wn-thing-manager.mjs"],components:["./com/thing-files","./com/thing-filter","./com/thing-creator","./com/thing-files","@com:ti/gui","@com:ti/combo/filter","@com:ti/paging/jumper","@com:wn/table","@com:wn/obj/icon","@com:wn/obj/puretext","@com:wn/obj/preview","@com:wn/obj/form","@com:wn/upload/file"]}),Ti.Preload("ti/com/wn/thing/markdown/richeditor/thing-markdown-richeditor.html",'<WnObjMarkdownRicheditor\n  v-bind="this"\n  :on-init="OnEditorInit"/>'),function(){var e={inject:["$ThingManager"],props:{listenMedia:{type:String,default:"file:open"}},methods:{OnEditorInit:function(e){this.$editor=e}},mounted:function(){var e=this;this.listenMedia&&this.$ThingManager.addEventRouting(this.listenMedia,function(t){console.log("oMedia",t),e.$editor.insertMediaObj(t)})},beforeDestroy:function(){this.listenMedia&&this.$ThingManager.removeEventRouting(this.listenMedia)}};Ti.Preload("ti/com/wn/thing/markdown/richeditor/thing-markdown-richeditor.mjs",e)}(),Ti.Preload("ti/com/wn/thing/markdown/richeditor/_com.json",{name:"wn-thing-markdown-richeditor",globally:!0,template:"./thing-markdown-richeditor.html",props:["@com:ti/text/markdown/richeditor/ti-markdown-richeditor-props.mjs","@com:wn/obj/markdown/richeditor/wn-markdown-richeditor-props.mjs"],mixins:["./thing-markdown-richeditor.mjs"],components:["@com:wn/obj/markdown/richeditor"]}),Ti.Preload("ti/com/wn/transfer/wn-transfer.html",'<ti-transfer v-bind="this"\n  \n  :options="OptionsDict"\n  :can-com-type="TheCanComType"\n  :sel-com-type="TheSelComType"\n  :display="TheDisplay"\n\n  @change="$notify(\'change\', $event)"/>'),function(){var e={data:function(){return{}},props:{itemBy:{type:[String,Function],default:void 0},findBy:{type:[String,Function],default:void 0}},computed:{TheCanComType:function(){return this.canComType||"wn-list"},TheSelComType:function(){return this.selComType||"wn-list"},TheDisplay:function(){return this.display||["@<thumb>","title","nm"]},OptionsDict:function(){return Wn.Dict.evalOptionsDict(this)}}};Ti.Preload("ti/com/wn/transfer/wn-transfer.mjs",e)}(),Ti.Preload("ti/com/wn/transfer/_com.json",{name:"wn-transfer",globally:!0,template:"./wn-transfer.html",props:"@com:ti/transfer/ti-transfer-props.mjs",mixins:["./wn-transfer.mjs"],components:["@com:ti/transfer"]}),Ti.Preload("ti/com/wn/upload/file/wn-upload-file.html",'<TiUploadFile\n  :preview="PreviewIcon"\n  :width="width"\n  :height="height"\n  :progress="progress"\n  :upload-file="uploadFile"\n  :removable="removable"\n  @upload="onUpload"\n  @remove="onRemove"\n  @open="onOpen"/>'),function(){var e={data:function(){return{src_ts:null,oFile:null,uploadFile:null,progress:-1}},props:{value:{type:String,default:null},valueType:{type:String,default:"obj",validator:function(e){return/^(obj|path|fullPath|idPath|id)$/.test(e)}},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},removable:{type:Boolean,default:!0},target:{type:String,default:null},supportTypes:{type:[String,Array],default:function(){return[]}},supportMimes:{type:[String,Array],default:function(){return[]}},filter:{type:[Array,String],default:null},quality:{type:Number,default:0}},computed:{AcceptTypes:function(){return _.isString(this.supportTypes)?this.supportTypes.split(","):this.supportTypes},AcceptMimes:function(){return _.isString(this.supportMimes)?this.supportMimes.split(","):this.supportMimes},ImageFilter:function(){return this.filter?[].concat(this.filter):[]},PreviewIcon:function(){if(this.oFile){if(Wn.Obj.isMime(this.oFile,/^(image\/)/)){var e=["/o/content?str=id:",this.oFile.id];return this.src_ts&&(e.push("&_t="),e.push(this.src_ts)),{type:"image",value:e.join("")}}if(Wn.Obj.isMime(this.oFile,/^(video\/)/)){var t=["/o/content?str=id:",this.oFile.video_cover];return this.src_ts&&(t.push("&_t="),t.push(this.src_ts)),{type:"image",value:t.join("")}}return Wn.Util.getObjIcon(this.oFile)}}},methods:{assertListHas:function(e,t,n,i){return _asyncToGenerator(regeneratorRuntime.mark(function a(){var r,o,s,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(_.isEmpty(e)){a.next=24;break}r=!0,o=_createForOfIteratorHelper(e),a.prev=3,o.s();case 5:if((s=o.n()).done){a.next=12;break}if((c=s.value)!=t){a.next=10;break}return r=!1,a.abrupt("break",12);case 10:a.next=5;break;case 12:a.next=17;break;case 14:a.prev=14,a.t0=a.catch(3),o.e(a.t0);case 17:return a.prev=17,o.f(),a.finish(17);case 20:if(!r){a.next=24;break}return a.next=23,Ti.Alert(n,{type:"warn",icon:"zmdi-alert-triangle",vars:i});case 23:return a.abrupt("return",!1);case 24:return a.abrupt("return",!0);case 25:case"end":return a.stop()}},a,null,[[3,14,17,20]])}))()},onOpen:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.oFile){t.next=4;break}return n=Wn.Util.getAppLink(e.oFile),t.next=4,Ti.Be.Open(n.url,{params:n.params});case 4:case"end":return t.stop()}},t)}))()},onRemove:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.oFile){t.next=3;break}return t.next=3,Wn.Sys.exec2("rm id:".concat(e.oFile.id));case 3:e.$notify("change",null);case 4:case"end":return t.stop()}},t)}))()},onUpload:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=Ti.Util.getSuffixName(e.name),n.next=3,t.assertListHas(t.AcceptTypes,i,"i18n:wn-invalid-types",{current:i,supports:t.AcceptTypes.join(", ")});case 3:if(n.sent){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,t.assertListHas(t.AcceptMimes,e.type,"i18n:wn-invalid-mimes",{current:e.type,supports:t.AcceptMimes.join(", ")});case 7:if(n.sent){n.next=9;break}return n.abrupt("return");case 9:return a=Ti.S.renderBy(t.target,{type:i,name:e.name,majorName:Ti.Util.getMajorName(e.name)}),t.uploadFile=e,t.progress=0,n.next=14,Wn.Io.uploadFile(e,{target:a,mode:"r",progress:function(e){t.progress=e.loaded/e.total}});case 14:if(r=n.sent,o=r.ok,s=r.msg,c=r.data,t.uploadFile=null,t.progress=-1,o){n.next=24;break}return n.next=23,Ti.Alert("i18n:".concat(s),{type:"warn",icon:"zmdi-alert-triangle"});case 23:return n.abrupt("return");case 24:if(_.isEmpty(t.ImageFilter)){n.next=31;break}return l=["imagic","id:".concat(c.id),'-filter "'.concat(t.ImageFilter.join(" "),'"')],t.quality>0&&t.quality<=1&&l.push("-qa ".concat(t.quality)),l.push("-out inplace"),u=l.join(" "),n.next=31,Wn.Sys.exec2(u);case 31:t.src_ts=Date.now(),t.oFile=c,d=Wn.Io.formatObjPath(c,t.valueType),t.$notify("change",d);case 35:case"end":return n.stop()}},n)}))()},reload:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!_.isString(e.value)){t.next=6;break}return t.next=3,Wn.Io.loadMetaBy(e.value);case 3:e.oFile=t.sent,t.next=7;break;case 6:"FILE"==_.get(e.value,"race")?e.oFile=_.cloneDeep(e.value):e.oFile=null;case 7:case"end":return t.stop()}},t)}))()}},watch:{value:function(){this.reload()}},mounted:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reload();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()};Ti.Preload("ti/com/wn/upload/file/wn-upload-file.mjs",e)}(),Ti.Preload("ti/com/wn/upload/file/_com.json",{name:"wn-upload-file",globally:!0,template:"./wn-upload-file.html",mixins:["./wn-upload-file.mjs"],components:["@com:ti/upload/file"]}),function(){var e={reload:function(e,t){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,i=e.commit,!n.status.reloading&&!n.status.saving){t.next=3;break}return t.abrupt("return");case 3:case"end":return t.stop()}},t)}))()}};Ti.Preload("ti/mod/hmaker/website/mod/site-config/site-config-actions.mjs",e)}(),Ti.Preload("ti/mod/hmaker/website/mod/site-config/site-config.json",{meta:null,desktop:{mapping:{paths:{"site-state.json":"desktopSiteStateView"},types:{},mimes:{"application/json":"desktopJsonView","text/*, application/*":"desktopTextView"},races:{DIR:"desktopAdaptList",FILE:"desktopObjPreview"}}},tablet:"desktop",phone:"desktop",views:{desktopSiteStateView:{comType:"hmaker-site-state",comConf:{home:"=home",content:"=currentContent"},actions:[{key:"saving",type:"action",icon:"zmdi-floppy",text:"i18n:save-change",altDisplay:{icon:"fas-spinner fa-pulse",text:"i18n:saving"},enableBy:"changed",action:"dispatch:main/saveCurrent",shortcut:"CTRL+S"},{key:"reloading",type:"action",icon:"zmdi-rotate-right",text:"i18n:revoke-change",altDisplay:{icon:"zmdi-refresh zmdi-hc-spin",text:"i18n:loading"},action:"dispatch:main/reloadCurrent"},{type:"Group",icon:"zmdi-more-vert",items:[{type:"action",icon:"zmdi-info-outline",text:"i18n:properties",action:"main:editCurrentObjMeta"}]}]},desktopTextView:{comType:"ti-text-raw",comConf:{showTitle:!1,content:"=currentContent",contentIsChanged:"=status.changed"},actions:[{key:"saving",type:"action",icon:"zmdi-floppy",text:"i18n:save-change",altDisplay:{icon:"fas-spinner fa-pulse",text:"i18n:saving"},enableBy:"changed",action:"dispatch:main/saveCurrent",shortcut:"CTRL+S"},{key:"reloading",type:"action",icon:"zmdi-rotate-right",text:"i18n:revoke-change",altDisplay:{icon:"zmdi-refresh zmdi-hc-spin",text:"i18n:loading"},action:"dispatch:main/reloadCurrent"},{type:"Group",icon:"zmdi-more-vert",items:[{type:"action",icon:"zmdi-info-outline",text:"i18n:properties",action:"main:editCurrentObjMeta"}]}]},desktopJsonView:{comType:"ti-text-json",comConf:{data:"=currentData"},actions:[{key:"saving",type:"action",icon:"zmdi-floppy",text:"i18n:save-change",altDisplay:{icon:"fas-spinner fa-pulse",text:"i18n:saving"},enableBy:"changed",action:"dispatch:main/saveCurrent",shortcut:"CTRL+S"},{key:"reloading",type:"action",icon:"zmdi-rotate-right",text:"i18n:revoke-change",altDisplay:{icon:"zmdi-refresh zmdi-hc-spin",text:"i18n:loading"},action:"dispatch:main/reloadCurrent"},{type:"Group",icon:"zmdi-more-vert",items:[{type:"action",icon:"zmdi-info-outline",text:"i18n:properties",action:"main:editCurrentObjMeta"}]}]},desktopAdaptList:{comType:"wn-adaptlist",comConf:{list:"=currentData.list"}},desktopObjPreview:{comType:"wn-obj-preview",comConf:{meta:"=currentMeta"}}},status:{reloading:!1}}),function(){var e={mutations:{setMeta:function(e,t){e.meta=t},setStatus:function(e,t){e.status=_.assign({},e.status,t)}}};Ti.Preload("ti/mod/hmaker/website/mod/site-config/site-config.mjs",e)}(),Ti.Preload("ti/mod/hmaker/website/mod/site-config/_mod.json",{name:"hmaker-site-config",namespaced:!0,state:"./site-config.json",actions:"./site-config-actions.mjs",mixins:"./site-config.mjs"}),function(){var e={appendNode:function(e,t){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=e.state,a=e.commit,r=e.dispatch,console.log("TODO appendNode",t);case 2:case"end":return n.stop()}},n)}))()},reloadNode:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g,v,b;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.state,a=e.commit,r=e.dispatch,o=t.length>1&&void 0!==t[1]?t[1]:{},s=o.id,c=o.path,l=o.self,u=void 0!==l&&l,d=o.force,m=void 0!==d&&d,h=o.depth,p=void 0===h?1:h,f=_.cloneDeep(i.root),y=!1,g=_.isUndefined(s)?Ti.Trees.getNodeByPath(f,c):Ti.Trees.getNodeById(f,s)){n.next=7;break}return n.abrupt("return");case 7:if(!u){n.next=13;break}return n.next=10,Wn.Io.loadMetaById(g.id);case 10:v=n.sent,g.rawData=v,y=!0;case 13:return b=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){var i,a,r,o,s,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n>0)||t.leaf){e.next=29;break}if(n--,!m&&!_.isEmpty(t.children)){e.next=29;break}return i=[],e.next=6,Wn.Io.loadChildren(t.rawData);case 6:a=e.sent,r=a.list,o=_createForOfIteratorHelper(r),e.prev=9,o.s();case 11:if((s=o.n()).done){e.next=19;break}return c=s.value,l=Wn.Util.wrapTreeNode(c),e.next=16,b(l,n);case 16:i.push(l);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),o.e(e.t0);case 24:return e.prev=24,o.f(),e.finish(24);case 27:return t.children=i,e.abrupt("return",!0);case 29:return e.abrupt("return",!1);case 30:case"end":return e.stop()}},e,null,[[9,21,24,27]])}));return function(t,n){return e.apply(this,arguments)}}(),n.t0=y,n.next=17,b(g,p);case 17:(y=n.t0|=n.sent)&&a("setRoot",f);case 19:case"end":return n.stop()}},n)}))()},reloadRoot:function(e,t){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.state,a=e.commit,r=e.dispatch,o=Wn.Util.wrapTreeNode(t),a("setRoot",o),n.next=5,r("reloadNode");case 5:if(_.isEmpty(i.root.children)){n.next=26;break}s=_.keys(i.openedNodePaths).sort(),c=_createForOfIteratorHelper(s),n.prev=8,c.s();case 10:if((l=c.n()).done){n.next=18;break}if(u=l.value,!(d=Ti.Trees.getByPath(i.root,u))||d.node.leaf){n.next=16;break}return n.next=16,r("reloadNode",{path:d.path});case 16:n.next=10;break;case 18:n.next=23;break;case 20:n.prev=20,n.t0=n.catch(8),c.e(n.t0);case 23:return n.prev=23,c.f(),n.finish(23);case 26:case"end":return n.stop()}},n,null,[[8,20,23,26]])}))()}};Ti.Preload("ti/mod/hmaker/website/mod/site-tree/site-tree-actions.mjs",e)}(),Ti.Preload("ti/mod/hmaker/website/mod/site-tree/site-tree.json",{root:{},currentId:null,openedNodePaths:{}}),function(){var e={mutations:{setRoot:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_.isEqual(e.root,t)||(e.root=t)},setCurrentId:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.currentId=t},setOpenedNodePaths:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.openedNodePaths=_.cloneDeep(t)}}};Ti.Preload("ti/mod/hmaker/website/mod/site-tree/site-tree.mjs",e)}(),Ti.Preload("ti/mod/hmaker/website/mod/site-tree/_mod.json",{name:"hmaker-site-tree",namespaced:!0,state:"./site-tree.json",actions:"./site-tree-actions.mjs",mixins:"./site-tree.mjs"}),function(){var e={setTreeOpenedNodePaths:function(e){var t=e.getters,n=e.commit,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.TREE_OPEND_KEY&&(n("tree/setOpenedNodePaths",i=_.pickBy(i,function(e){return e})),Ti.Storage.session.setObject(t.TREE_OPEND_KEY,i))},setTreeSelected:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.getters,a=e.commit,r=e.dispatch,o=t.length>1&&void 0!==t[1]?t[1]:null,!i.TREE_SELECTED_KEY){n.next=15;break}if(a("tree/setCurrentId",o),Ti.Storage.session.set(i.TREE_SELECTED_KEY,o),a("setStatus",{reloading:!0}),s=null,!o){n.next=11;break}return n.next=10,Wn.Io.loadMetaById(o);case 10:s=n.sent;case 11:return n.next=13,r("current/reload",s);case 13:a("setStatus",{reloading:!1}),a("syncStatusChanged");case 15:case"end":return n.stop()}},n)}))()},onCurrentChanged:function(e,t){var n=e.commit;(0,e.dispatch)("current/onChanged",t),n("syncStatusChanged")},saveCurrent:function(e){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,i=e.commit,a=e.dispatch,!n.current.meta){t.next=7;break}return i("setStatus",{saving:!0}),t.next=5,a("current/save");case 5:i("setStatus",{saving:!1}),i("syncStatusChanged");case 7:case"end":return t.stop()}},t)}))()},reloadCurrent:function(e,t){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.commit,a=e.dispatch,i("setStatus",{reloading:!0}),n.next=4,a("current/reload",t);case 4:i("setStatus",{reloading:!1}),i("syncStatusChanged");case 6:case"end":return n.stop()}},n)}))()},reloadConfig:function(e){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,i=e.dispatch,t.next=3,i("config/reload");case 3:case"end":return t.stop()}},t)}))()},reloadTree:function(e){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getters,i=e.state,a=e.commit,r=e.dispatch,n.TREE_OPEND_KEY&&(o=Ti.Storage.session.getObject(n.TREE_OPEND_KEY),a("tree/setOpenedNodePaths",o)),t.next=4,r("tree/reloadRoot",i.home);case 4:if(!n.TREE_SELECTED_KEY){t.next=10;break}if(s=Ti.Storage.session.getString(n.TREE_SELECTED_KEY),a("tree/setCurrentId",s),!s){t.next=10;break}return t.next=10,r("setTreeSelected",s);case 10:case"end":return t.stop()}},t)}))()},reloadTreeNode:function(e,t){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.commit,a=e.dispatch,i("setStatus",{reloading:!0}),n.next=4,a("tree/reloadNode",t);case 4:i("setStatus",{reloading:!1});case 5:case"end":return n.stop()}},n)}))()},reload:function(e,t){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.state,a=e.commit,r=e.dispatch,t?a("setHome",t):t=i.home,a("setStatus",{reloading:!0}),n.next=5,r("reloadConfig");case 5:return n.next=7,r("reloadTree");case 7:a("setStatus",{reloading:!1});case 8:case"end":return n.stop()}},n)}))()}};Ti.Preload("ti/mod/hmaker/website/website-actions.mjs",e)}(),Ti.Preload("ti/mod/hmaker/website/website.json",{home:null,status:{reloading:!1,doing:!1,saving:!1,deleting:!1,changed:!1,publishing:!1,exposeHidden:!1}}),function(){var e={getters:{TREE_OPEND_KEY:function(e){if(e.home)return"website_tree_openeds_".concat(e.home.id)},TREE_SELECTED_KEY:function(e){if(e.home)return"website_tree_selected_".concat(e.home.id)}},mutations:{setHome:function(e,t){e.home=t},setStatus:function(e,t){e.status=_.assign({},e.status,t)},setExposeHidden:function(e,t){e.status.exposeHidden=t},syncStatusChanged:function(e){e.current&&(e.status.changed=e.current.status.changed)}}};Ti.Preload("ti/mod/hmaker/website/website.mjs",e)}(),Ti.Preload("ti/mod/hmaker/website/_mod.json",{name:"hmaker-website",namespaced:!0,state:"./website.json",actions:"./website-actions.mjs",mixins:"./website.mjs",modules:{tree:"./mod/site-tree",config:"./mod/site-config",current:"@mod:wn/obj-current"}}),Ti.Preload("ti/mod/ti/viewport/ti-viewport.json",{mode:"desktop",activedIds:[]}),function(){var e={getters:{viewportMode:function(e){return e.mode},viewportActivedComIds:function(e){return e.activedIds},isViewportModeDesktop:function(e){return"desktop"==e.mode},isViewportModeTablet:function(e){return"tablet"==e.mode},isViewportModePhone:function(e){return"phone"==e.mode},isViewportModeDesktopOrTablet:function(e){return"desktop"==e.mode||"tablet"==e.mode},isViewportModePhoneOrTablet:function(e){return"phone"==e.mode||"tablet"==e.mode}},mutations:{setMode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"desktop";e.mode=t},setActivedIds:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.activedIds=_.cloneDeep(t)}}};Ti.Preload("ti/mod/ti/viewport/ti-viewport.mjs",e)}(),Ti.Preload("ti/mod/ti/viewport/_mod.json",{state:"./ti-viewport.json",mixins:"./ti-viewport.mjs"}),function(){var e={onChanged:function(e,t){(0,e.dispatch)("changeContent",t)},changeContent:function(e,t){var n=e.commit;n("setContent",t),n("syncStatusChanged")},changeMeta:function(e){var t=e.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.name,a=n.value;if(i){t("mergeMeta",_.set({},i,a)),t("syncStatusChanged")}},updateContent:function(e,t){var n=e.state,i=e.commit;i("setContent",t),n.meta&&"FILE"==n.meta.race&&i("setSavedContent",t),i("syncStatusChanged")},openMetaEditor:function(e){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,i=e.dispatch,n.meta){t.next=5;break}return t.next=4,Ti.Toast.Open("i18n:empty-data","warn");case 4:return t.abrupt("return",t.sent);case 5:return t.next=7,Wn.EditObjMeta(n.meta,{fields:"auto"});case 7:if(a=t.sent,!_.isUndefined(a)){t.next=10;break}return t.abrupt("return");case 10:if(!a.saved){t.next=13;break}return t.next=13,i("reload",a.data);case 13:case"end":return t.stop()}},t)}))()},openContentEditor:function(e){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,i=e.dispatch,n.meta){t.next=5;break}return t.next=4,Ti.Toast.Open("i18n:empty-data","warn");case 4:return t.abrupt("return",t.sent);case 5:return t.next=7,Wn.EditObjContent(n.meta,{content:n.content});case 7:if(a=t.sent,!_.isUndefined(a)){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,i("changeContent",a);case 12:case"end":return t.stop()}},t)}))()},updateMeta:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.commit,a=e.dispatch,r=t.length>1&&void 0!==t[1]?t[1]:{},o=r.name,s=r.value,c=Ti.Types.toObjByPair({name:o,value:s}),n.next=5,a("updateMetas",c);case 5:case"end":return n.stop()}},n)}))()},updateMetas:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.state,a=e.commit,r=t.length>1&&void 0!==t[1]?t[1]:{},!_.isMatchWith(i.meta,r,_.isEqual)){n.next=4;break}return n.abrupt("return");case 4:return _.forEach(r,function(e,t){a("setFieldStatus",{name:t,type:"spinning",text:"i18n:saving"})}),o=JSON.stringify(r),s=i.meta.th_set,c=i.meta.id,l="thing ".concat(s," update ").concat(c," -fields -cqn"),n.next=11,Wn.Sys.exec2(l,{input:o,as:"json"});case 11:u=n.sent,(d=u instanceof Error)||Ti.Util.isNil(u)||a("setMeta",u),_.forEach(r,function(e,t){d?a("setFieldStatus",{name:t,type:"warn",text:u.message||"i18n:fail"}):(a("setFieldStatus",{name:t,type:"ok",text:"i18n:ok"}),_.delay(function(){a("clearFieldStatus",t)},500))});case 15:case"end":return n.stop()}},n)}))()},save:function(e){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,i=e.commit,!n.status.saving&&n.status.changed){t.next=3;break}return t.abrupt("return");case 3:return i("setStatus",{saving:!0}),a=n.meta,r=n.content,t.next=8,Wn.Io.saveContentAsText(a,r);case 8:return o=t.sent,i("setStatus",{saving:!1}),i("setMeta",o),i("setSavedContent",r),i("syncStatusChanged"),t.abrupt("return",o);case 14:case"end":return t.stop()}},t)}))()},reload:function(e,t){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.state,a=e.commit,r=e.dispatch,!i.status.reloading&&!i.status.saving){n.next=3;break}return n.abrupt("return");case 3:if(_.isUndefined(t)&&(t=i.meta),!_.isString(t)){n.next=8;break}return n.next=7,Wn.Io.loadMeta(t);case 7:t=n.sent;case 8:if(t){n.next=12;break}return a("setMeta",null),a("setContent",null),n.abrupt("return");case 12:if(o=null,a("setStatus",{reloading:!0}),"FILE"!=t.race){n.next=20;break}return n.next=17,Wn.Io.loadContent(t);case 17:o=n.sent,n.next=24;break;case 20:if("DIR"!=t.race){n.next=24;break}return n.next=23,Wn.Io.loadChildren(t);case 23:o=n.sent;case 24:a("setStatus",{reloading:!1}),a("setMeta",t),a("clearFieldStatus"),r("updateContent",o);case 28:case"end":return n.stop()}},n)}))()}};Ti.Preload("ti/mod/wn/obj-current/m-obj-current-actions.mjs",e)}(),Ti.Preload("ti/mod/wn/obj-current/m-obj-current.json",{meta:null,content:null,data:null,__saved_content:null,status:{changed:!1,saving:!1,reloading:!1},fieldStatus:{}}),function(){var e={mutations:{setMeta:function(e,t){e.meta=t},assignMeta:function(e,t){e.meta=_.assign({},e.meta,t)},mergeMeta:function(e,t){e.meta=_.merge({},e.meta,t)},setContent:function(e,t){var n=e.meta;if(!n||Ti.Util.isNil(t))return e.content=null,e.data=null,e.__saved_content=null,void(e.status.changed=!1);if("DIR"==n.race)e.content=null,e.__saved_content=null,e.data=t;else if("FILE"==n.race)if(_.isString(t))if(e.content=t,Wn.Util.isMimeJson(n.mime))try{e.data=JSON.parse(t)}catch(t){e.data=null}else Wn.Util.isMimeText(n.mime)&&(e.data=null);else e.content=JSON.stringify(t,null,"  "),Wn.Util.isMimeJson(n.mime)?e.data=t:Wn.Util.isMimeText(n.mime)&&(e.data=null)},setData:function(e,t){e.data=t},setSavedContent:function(e,t){e.__saved_content=t},setStatus:function(e,t){e.status=_.assign({},e.status,t)},syncStatusChanged:function(e){Ti.Util.isNil(e.content)&&Ti.Util.isNil(e.__saved_content)?e.status.changed=!1:e.status.changed=!_.isEqual(e.content,e.__saved_content)},setFieldStatus:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name,i=t.type,a=t.text;if(n){var r=_.concat(n).join("-");Vue.set(e.fieldStatus,r,{type:i,text:a})}},clearFieldStatus:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];_.isEmpty(t)?e.fieldStatus={}:e.fieldStatus=_.omit(e.fieldStatus,t)}}};Ti.Preload("ti/mod/wn/obj-current/m-obj-current.mjs",e)}(),Ti.Preload("ti/mod/wn/obj-current/_mod.json",{name:"wn-obj-current",namespaced:!0,state:"./m-obj-current.json",actions:"./m-obj-current-actions.mjs",mixins:"./m-obj-current.mjs"}),function(){var e={updateMeta:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.state,a=e.commit,r=t.length>1&&void 0!==t[1]?t[1]:{},o=r.name,s=r.value,c=Ti.Types.toObjByPair({name:o,value:s}),!_.isMatchWith(i.meta,c,_.isEqual)){n.next=5;break}return n.abrupt("return");case 5:return a("setStatus",{saving:!0}),a("setFieldStatus",{name:o,status:"spinning"}),l=JSON.stringify(c),u=i.meta.id,d="obj 'id:".concat(u,"' -ocqn -u"),n.next=12,Wn.Sys.exec2(d,{input:l,as:"json"});case 12:return m=n.sent,a("setMeta",m),a("clearFieldStatus",o),a("setStatus",{saving:!1}),n.abrupt("return",m);case 17:case"end":return n.stop()}},n)}))()},loadMetaById:function(e,t){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:(i=e.dispatch)("loadMeta","id:".concat(t));case 2:case"end":return n.stop()}},n)}))()},loadMeta:function(e,t){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.state,a=e.commit,t){n.next=5;break}a("reset"),n.next=11;break;case 5:return a("setStatus",{reloading:!0}),n.next=8,Wn.Io.loadMeta(t);case 8:r=n.sent,a("setMeta",r),a("setStatus",{reloading:!1});case 11:case"end":return n.stop()}},n)}))()},loadAncestors:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.state,a=e.commit,r=t.length>1&&void 0!==t[1]?t[1]:i.meta,a("setStatus",{reloading:!0}),n.next=5,Wn.Io.loadAncestors("id:"+r.id);case 5:o=n.sent,s=_.last(o),a("setMeta",r),a("setParent",s),a("setAncestors",o),a("setStatus",{reloading:!1});case 11:case"end":return n.stop()}},n)}))()},reload:function(e,t){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.state,a=e.dispatch,!_.isString(t)){n.next=8;break}return n.next=4,a("loadMeta",t);case 4:return n.next=6,a("loadAncestors");case 6:n.next=11;break;case 8:if(!_.isPlainObject(t)){n.next=11;break}return n.next=11,a("loadAncestors",t);case 11:return n.abrupt("return",i.meta);case 12:case"end":return n.stop()}},n)}))()}};Ti.Preload("ti/mod/wn/obj-meta/m-obj-meta-actions.mjs",e)}(),Ti.Preload("ti/mod/wn/obj-meta/m-obj-meta.json",{ancestors:[],parent:null,meta:null,status:{changed:!1,saving:!1,reloading:!1},fieldStatus:{}}),function(){var e={getters:{get:function(e){return e},getHome:function(e){var t=e.meta,n=e.ancestors;if(_.isEmpty(n)){if(t&&"root"==t.nm)return t}else{if(1==n.length&&"home"==n[0].nm)return t;if("home"==n[0].nm)return n[1]}return null},hasParent:function(e){return!!e.parent},parentIsHome:function(e){return!(_.isEmpty(e.ancestors)||!e.parent||!e.meta||!/^\/home\//.test(e.meta.ph))&&e.parent.pid==e.ancestors[0].id},isHome:function(e){return!(_.isEmpty(e.ancestors)||!e.meta||!/^\/home\//.test(e.meta.ph))&&e.meta.pid==e.ancestors[0].id}},mutations:{reset:function(e){_.assign(e,{ancestors:[],parent:null,meta:null,status:{changed:!1,saving:!1,reloading:!1},fieldStatus:{}})},setAncestors:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.ancestors=_.concat(t)},setParent:function(e,t){e.parent=t},setMeta:function(e,t){e.meta=t},setFieldStatus:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name,i=t.message,a=t.status;if(n){var r=a?{status:a,message:i}:null,o=_.concat(n).join("-");Vue.set(e.fieldStatus,o,r)}},clearFieldStatus:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];_.isEmpty(t)?e.fieldStatus={}:e.fieldStatus=_.omit(e.fieldStatus,t)},setStatus:function(e,t){e.status=_.assign({},e.status,t)}}};Ti.Preload("ti/mod/wn/obj-meta/m-obj-meta.mjs",e)}(),Ti.Preload("ti/mod/wn/obj-meta/_mod.json",{state:"./m-obj-meta.json",actions:"./m-obj-meta-actions.mjs",mixins:"./m-obj-meta.mjs"}),Ti.Preload("ti/mod/wn/session/m-session.json",{id:null,grp:null,du:-1,expi:0,pwd:"~",ticket:null,uid:null,unm:null,me:null,envs:{}}),function(){var e={getters:{get:function(e){return e}},mutations:{set:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.id=t.id,e.grp=t.grp,e.du=t.du,e.expi=t.expi,e.pwd=t.pwd,e.ticket=t.ticket,e.uid=t.uid,e.unm=t.unm,e.me=t.me,e.envs=_.cloneDeep(t.envs)}},actions:{openResetPasswd:function(e){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.dispatch,t.next=3,Ti.App.Open({icon:"fas-key",title:"i18n:my-passwd",position:"top",width:480,height:640,textOk:null,textCancel:null,comType:"WebAuthPasswd",comConf:{allowModes:{passwd:!0}},events:{"passwd:reset":function(e){console.log("passwd:reset",e),n("resetPasswd",e)}},components:"@com:web/auth/passwd"});case 3:case"end":return t.stop()}},t)}))()},resetPasswd:function(e,t){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(_objectDestructuringEmpty(e),t){n.next=3;break}return n.abrupt("return");case 3:if(console.log(t),"passwd"!=t.mode){n.next=12;break}return i="passwd '".concat(t.newpwd,"' -old '").concat(t.oldpwd,"'"),a={ok:!0},n.next=9,Wn.Sys.exec(i,{errorBy:function(e){var t=e.code;a.ok=!1,a.errCode=t}});case 9:t.done(a),n.next=13;break;case 12:throw"Unsupport passwd-reset mode: "+t.mode;case 13:case"end":return n.stop()}},n)}))()},reload:function(){_.delay(function(){console.log("hahah")},1e3)}}};Ti.Preload("ti/mod/wn/session/m-session.mjs",e)}(),Ti.Preload("ti/mod/wn/session/_mod.json",{state:"./m-session.json",mixins:["./m-session.mjs"]}),function(){var e={saveCurrent:function(e){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.commit,i=e.dispatch,n("setStatus",{saving:!0}),t.next=4,i("current/save");case 4:n("setStatus",{saving:!1}),n("syncStatusChanged");case 6:case"end":return t.stop()}},t)}))()},updateCurrent:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.state,a=e.commit,r=e.dispatch,o=e.getters,s=t.length>1&&void 0!==t[1]?t[1]:{},c=s.name,l=s.value,!o.hasCurrent){n.next=6;break}return n.next=5,r("current/updateMeta",{name:c,value:l});case 5:a("search/updateItem",i.current.meta);case 6:case"end":return n.stop()}},n)}))()},updateCurrentMetas:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.state,a=e.commit,r=e.dispatch,o=e.getters,s=t.length>1&&void 0!==t[1]?t[1]:{},!o.hasCurrent){n.next=6;break}return n.next=5,r("current/updateMetas",s);case 5:a("search/updateItem",i.current.meta);case 6:case"end":return n.stop()}},n)}))()},batchUpdateMetas:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.state,a=e.commit,r=e.getters,o=t.length>1&&void 0!==t[1]?t[1]:{},s=r["search/checkedItems"],!_.isEmpty(s)&&!_.isEmpty(o)){n.next=5;break}return n.abrupt("return");case 5:a("setStatus",{reloading:!0}),c=_.get(i.current,"meta.id"),l=JSON.stringify(o),u=i.meta.id,d=_createForOfIteratorHelper(s),n.prev=10,d.s();case 12:if((m=d.n()).done){n.next=22;break}return h=m.value,p="thing ".concat(u," update ").concat(h.id," -fields -cqn"),n.next=17,Wn.Sys.exec2(p,{as:"json",input:l});case 17:f=n.sent,a("search/updateItem",f),f.id==c&&a("current/setMeta",f);case 20:n.next=12;break;case 22:n.next=27;break;case 24:n.prev=24,n.t0=n.catch(10),d.e(n.t0);case 27:return n.prev=27,d.f(),n.finish(27);case 30:a("setStatus",{reloading:!1});case 31:case"end":return n.stop()}},n,null,[[10,24,27,30]])}))()},setCurrentMeta:function(e,t){var n=e.state,i=e.commit;i("current/setMeta",t),i("syncStatusChanged"),i("search/updateItem",n.current.meta)},setCurrentContent:function(e,t){var n=e.state,i=e.commit;(0,e.dispatch)("current/onChanged",t),i("syncStatusChanged"),i("search/updateItem",n.current.meta)},autoSyncCurrentFilesCount:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.state,a=e.commit,r=e.dispatch,o=t.length>1&&void 0!==t[1]?t[1]:{},s=o.quiet,c=void 0===s||s,l=i.current.meta,u=i.currentDataDir){n.next=7;break}return console.warn("thing file -ufc without 'dirName'"),n.abrupt("return",Ti.Toast.Open("thing file -ufc without 'dirName'"));case 7:if(!(l&&l.id&&u)){n.next=19;break}return a("setStatus",{reloading:!0}),d=l.th_set,m="thing ".concat(d," file ").concat(l.id," -dir '").concat(u,"' -ufc -cqn"),n.next=13,Wn.Sys.exec2(m,{as:"json"});case 13:if(h=n.sent,r("setCurrentMeta",h),a("setStatus",{reloading:!1}),c){n.next=19;break}return n.next=19,Ti.Toast.Open("i18n:wn-th-recount-media-done",{vars:{n:h.th_media_nb||0}});case 19:case"end":return n.stop()}},n)}))()},toggleInRecycleBin:function(e){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,i=e.commit,a=e.dispatch,r=e.getters,o=!r.isInRecycleBin,i("search/setInRecycleBin",o),i("setStatus",{inRecycleBin:o,reloading:!0}),t.next=6,a("search/reload");case 6:i("setStatus",{reloading:!1});case 7:case"end":return t.stop()}},t)}))()},create:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.state,a=e.commit,r=e.dispatch,o=t.length>1&&void 0!==t[1]?t[1]:{},s=_.get(i.config,"schema.behavior.create")||{},c=s.unique,l=s.after,u=s.fixed,d=JSON.stringify(o),m=i.meta.id,h=["thing ".concat(m," create -cqn -fields")],!_.isEmpty(c)&&_.isString(c)&&h.push(" -unique '".concat(c,"'")),!_.isEmpty(u)&&_.isString(c)&&h.push(" -fixed '".concat(JSON.stringify(u),"'")),!_.isEmpty(l)&&_.isString(l)&&h.push(" -after '".concat(l,"'")),a("setStatus",{reloading:!0}),p=h.join(" "),n.next=14,Wn.Sys.exec2(p,{input:d,as:"json"});case 14:if(!(f=n.sent)||f instanceof Error){n.next=19;break}return a("search/prependToList",f),n.next=19,r("setCurrentThing",{meta:f});case 19:return a("setStatus",{reloading:!1}),n.abrupt("return",f);case 21:case"end":return n.stop()}},n)}))()},removeChecked:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.state,a=e.commit,r=e.dispatch,o=e.getters,s=t.length>1&&void 0!==t[1]&&t[1],c=_.cloneDeep(i.search.checkedIds),!_.isEmpty(c)){n.next=7;break}return n.next=6,Ti.Alert("i18n:del-none");case 6:return n.abrupt("return",n.sent);case 7:if(l=_.get(i,"config.schema.behavior")||{},!(s|=l.hardRemove)&&!i.status.inRecycleBin){n.next=14;break}return n.next=12,Ti.Confirm("i18n:del-hard");case 12:if(n.sent){n.next=14;break}return n.abrupt("return");case 14:return a("setStatus",{deleting:!0}),u={},d=i.meta.id,m="thing ".concat(d," delete ").concat(s?"-hard":""," -cqn -l ").concat(c.join(" ")),n.next=20,Wn.Sys.exec2(m,{as:"json",errorAs:function(e){var t=e.data,n=_.trim(t);u[n]=!0}});case 20:return h=n.sent,p=_.filter(c,function(e){return!u[e]}),console.log("removeIds:",p),_.isEmpty(p)||a("search/removeItems",p),f=o["search/currentItem"],n.next=27,r("setCurrentThing",{meta:f});case 27:a("setStatus",{deleting:!1});case 28:case"end":return n.stop()}},n)}))()},restoreRecycleBin:function(e){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o,s,c,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,i=e.commit,a=e.dispatch,r=e.getters,o=n.search.checkedIds,!_.isEmpty(o)){t.next=6;break}return t.next=5,Ti.Alert("i18n:thing-restore-none");case 5:return t.abrupt("return",t.sent);case 6:return i("setStatus",{restoring:!0}),s=n.meta.id,c="thing ".concat(s," restore -quiet -cqn -l ").concat(o.join(" ")),t.next=11,Wn.Sys.exec2(c,{as:"json"});case 11:return l=t.sent,t.next=14,a("search/reload");case 14:return u=r["search/currentItem"],t.next=17,a("current/reload",u);case 17:i("setStatus",{restoring:!1});case 18:case"end":return t.stop()}},t)}))()},cleanRecycleBin:function(e){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,i=e.commit,a=e.dispatch,i("setStatus",{cleaning:!0}),r=n.meta.id,o="thing ".concat(r," clean -limit 3000"),t.next=6,Wn.Sys.exec2(o);case 6:return i("setStatus",{cleaning:!1}),t.next=9,a("reload");case 9:case"end":return t.stop()}},t)}))()},openMetaEditor:function(e){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,i=e.getters,a=e.dispatch,n.meta){t.next=5;break}return t.next=4,Ti.Toast.Open("i18n:empty-data","warn");case 4:return t.abrupt("return",t.sent);case 5:if(!i.hasCurrent){t.next=16;break}return t.next=8,Wn.EditObjMeta(n.current.meta,{fields:"default",autoSave:!1});case 8:if(r=t.sent,!_.isUndefined(r)){t.next=11;break}return t.abrupt("return");case 11:if(o=r.updates,_.isEmpty(o)){t.next=15;break}return t.next=15,a("updateCurrentMetas",o);case 15:return t.abrupt("return");case 16:return t.next=18,Wn.EditObjMeta(n.meta,{fields:"auto",autoSave:!0});case 18:case"end":return t.stop()}},t)}))()},openContentEditor:function(e){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,i=e.getters,a=e.dispatch,n.meta){t.next=5;break}return t.next=4,Ti.Toast.Open("i18n:empty-data","warn");case 4:return t.abrupt("return",t.sent);case 5:if(!i.hasCurrent){t.next=14;break}return t.next=8,Wn.EditObjContent(n.current.meta,{content:n.current.content});case 8:if(r=t.sent,!_.isUndefined(r)){t.next=11;break}return t.abrupt("return");case 11:return t.next=13,a("current/changeContent",r);case 13:return t.abrupt("return");case 14:return t.next=16,Ti.Toast.Open("i18n:nil-obj","warn");case 16:return t.abrupt("return",t.sent);case 17:case"end":return t.stop()}},t)}))()},reloadFiles:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g,v,b;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.state,a=e.commit,r=e.dispatch,o=e.getters,s=t.length>1&&void 0!==t[1]?t[1]:{},c=s.force,l=void 0!==c&&c,u=_.get(i.current,"meta"),d=_.get(u,"id"),m=i.filesName,d&&m){n.next=9;break}a("files/reset"),n.next=24;break;case 9:if(h=i.meta.id,(p=i.files.meta)&&p.ph&&p.ph.endsWith("/data/".concat(d,"/").concat(m))){n.next=22;break}return f="id:".concat(h,"/data"),y="".concat(d,"/").concat(m),g={race:"DIR",nm:y},v=JSON.stringify(g),b='obj "'.concat(f,"\" -IfNoExists -new '").concat(v,"' -cqno"),n.next=19,Wn.Sys.exec2(b,{as:"json"});case 19:if(p=n.sent){n.next=22;break}return n.abrupt("return");case 22:return n.next=24,r("files/reload",p);case 24:case"end":return n.stop()}},n)}))()},reloadSearch:function(e){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o,s,c,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,i=e.commit,a=e.dispatch,r=n.meta,i("setStatus",{reloading:!0}),t.next=5,a("search/reload",r);case 5:if(!n.current.meta){t.next=28;break}o=n.current.meta.id,s=null,c=_createForOfIteratorHelper(n.search.list),t.prev=9,c.s();case 11:if((l=c.n()).done){t.next=18;break}if((u=l.value).id!=o){t.next=16;break}return s=u,t.abrupt("break",18);case 16:t.next=11;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(9),c.e(t.t0);case 23:return t.prev=23,c.f(),t.finish(23);case 26:return t.next=28,a("setCurrentThing",{meta:s});case 28:i("setStatus",{reloading:!1});case 29:case"end":return t.stop()}},t,null,[[9,20,23,26]])}))()},setCurrentThing:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.state,a=e.commit,r=e.dispatch,o=t.length>1&&void 0!==t[1]?t[1]:{},s=o.meta,c=void 0===s?null:s,l=o.checkedIds,u=void 0===l?{}:l,d=c?c.id:null,m=Ti.Util.truthyKeys(u),Ti.Util.isNil(d)||m.push(d),a("search/setCurrentId",d),a("search/setCheckedIds",m),h=i.meta,p=d?"id:".concat(h.id,"/data/").concat(d):null,a("setCurrentDataHome",p),n.next=12,Wn.Io.loadMeta(p);case 12:return f=n.sent,a("setCurrentDataHomeObj",f),y="".concat(h.id,":currentId"),_.get(i.config.schema,"keepLastOff")?Ti.Storage.session.remove(y):Ti.Storage.session.set(y,d),n.next=18,r("current/reload",c);case 18:case"end":return n.stop()}},n)}))()},doChangeShown:function(e,t){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=e.state,a=e.commit,(r=e.dispatch)("config/updateShown",t);case 2:case"end":return n.stop()}},n)}))()},reload:function(e,t){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.state,a=e.commit,r=e.dispatch,t?a("setMeta",t):t=i.meta,o=t,a("setStatus",{reloading:!0}),n.next=6,r("config/reload",t);case 6:return s="".concat(t.id,"_dirname"),(c=Ti.Storage.session.getString(s))||(c=_.get(i.config,"schema.behavior.filesDirName")||"media"),a("setCurrentDataDir",c||"media"),l=Ti.Storage.session.getObject(t.id)||{},_.defaults(l,{filter:{},sorter:{},pager:{}}),u=_.get(i.config.schema,"behavior.filter")||{},u=_.assign({},u,l.filter),_.isEmpty(u)||a("search/setFilter",u),d=_.get(i.config.schema,"behavior.sorter")||{},_.isEmpty(l.sorter)?_.isEmpty(d)||a("search/setSorter",d):a("search/setSorter",l.sorter),_.isEmpty(l.pager)||a("search/setPager",l.pager),n.next=20,r("reloadSearch");case 20:if(!_.get(i,"meta.th_auto_select")){n.next=28;break}if(i.current.meta||_.isEmpty(i.search.list)){n.next=28;break}return m="".concat(o.id,":currentId"),(h=Ti.Storage.session.getString(m))&&(p=_.find(i.search.list,function(e){return e.id==h})),p||(p=_.first(i.search.list)),n.next=28,r("setCurrentThing",{meta:p,force:!1});case 28:a("setStatus",{reloading:!1});case 29:case"end":return n.stop()}},n)}))()}};Ti.Preload("ti/mod/wn/thing/m-thing-actions.mjs",e)}(),Ti.Preload("ti/mod/wn/thing/m-thing.json",{meta:null,currentDataDir:null,currentDataHome:null,currentDataHomeObj:null,status:{reloading:!1,doing:!1,saving:!1,deleting:!1,changed:!1,restoring:!1,cleaning:!1,inRecycleBin:!1}}),function(){var e={getters:{hasCurrent:function(e){return e.current&&e.current.meta},isInRecycleBin:function(e){return e.search.inRecycleBin}},mutations:{setMeta:function(e,t){e.meta=t},setCurrentDataDir:function(e,t){if(e.currentDataDir=t,e.meta){var n="".concat(e.meta.id,"_dirname");Ti.Storage.session.set(n,t)}},setCurrentDataHome:function(e,t){e.currentDataHome=t},setCurrentDataHomeObj:function(e,t){e.currentDataHomeObj=_.cloneDeep(t)},setStatus:function(e,t){e.status=_.assign({},e.status,t)},syncStatusChanged:function(e){e.current&&(e.status.changed=e.current.status.changed)}}};Ti.Preload("ti/mod/wn/thing/m-thing.mjs",e)}(),function(){var e={updateShown:function(e,t){var n=e.commit;n("mergeShown",t),n("persistShown")},reloadSchema:function(e){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,i=e.commit,a="id:".concat(n.meta.id,"/thing-schema.json"),t.next=4,Wn.Io.loadMeta(a);case 4:return r=t.sent,t.next=7,Wn.Io.loadContent(r,{as:"json"});case 7:if(!(o=t.sent).methods){t.next=14;break}return t.next=11,Ti.Load(o.methods);case 11:s=t.sent,_.isArray(s)||(s=[s]),o.methods=s;case 14:return i("setSchema",o),t.abrupt("return",o);case 16:case"end":return t.stop()}},t)}))()},reloadLayout:function(e){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,i=e.commit,a="id:".concat(n.meta.id,"/thing-layout.json"),t.next=4,Wn.Io.loadMeta(a);case 4:return r=t.sent,t.next=7,Wn.Io.loadContent(r,{as:"json"});case 7:return o=t.sent,i("setLayout",o),i("restoreShown"),t.abrupt("return",o);case 11:case"end":return t.stop()}},t)}))()},reloadActions:function(e){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,i=e.commit,a="id:".concat(n.meta.id,"/thing-actions.json"),t.next=4,Wn.Io.loadMeta(a);case 4:return r=t.sent,t.next=7,Wn.Io.loadContent(r,{as:"json"});case 7:return o=t.sent,i("setActions",o),t.abrupt("return",o);case 10:case"end":return t.stop()}},t)}))()},reload:function(e,t){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.state,a=e.commit,r=e.dispatch,t?a("setMeta",t):t=i.meta,a("setStatus",{reloading:!0}),n.next=5,r("reloadSchema");case 5:return n.next=7,r("reloadLayout");case 7:return n.next=9,r("reloadActions");case 9:a("setStatus",{reloading:!1});case 10:case"end":return n.stop()}},n)}))()}};Ti.Preload("ti/mod/wn/thing/mod/config/m-thing-config-actions.mjs",e)}(),Ti.Preload("ti/mod/wn/thing/mod/config/m-thing-config.json",{meta:null,shown:{search:!0,meta:!0,content:!0,files:!1},listOpen:{content:!0},schema:{},layout:{deskstop:{},tablet:{},phone:{}},actions:[],status:{reloading:!1,saving:!1}}),function(){var e={mutations:{setMeta:function(e,t){e.meta=t},setStatus:function(e,t){e.status=_.assign({},e.status,t)},setSchema:function(e,t){e.schema=t},setLayout:function(e,t){e.layout=_.pick(t,["desktop","tablet","phone"]),e.shown=t.shown||{},e.listOpen=t.listOpen||{}},setActions:function(e,t){e.actions=t},mergeShown:function(e,t){t&&!_.isEmpty(t)&&(e.shown=_.assign({},e.shown,t))},persistShown:function(e){e.meta&&e.meta.id&&Ti.Storage.session.setObject("".concat(e.meta.id,"-shown"),e.shown)},restoreShown:function(e){if(e.meta&&e.meta.id){var t=Ti.Storage.session.getObject("".concat(e.meta.id,"-shown"));e.shown=_.assign({},e.shown,t)}}}};Ti.Preload("ti/mod/wn/thing/mod/config/m-thing-config.mjs",e)}(),Ti.Preload("ti/mod/wn/thing/mod/config/_mod.json",{namespaced:!0,state:"./m-thing-config.json",actions:"./m-thing-config-actions.mjs",mixins:"./m-thing-config.mjs"}),function(){var e={reloadPage:function(e,t){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.state,a=e.commit,r=e.dispatch,a("updatePager",t),n.next=4,r("reload");case 4:case"end":return n.stop()}},n)}))()},reload:function(e,t){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g,v,b,w,x,T,k,C,S;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.state,a=e.commit,r=e.rootState,t?a("setMeta",t):t=i.meta,a("setStatus",{reloading:!0}),o=["thing id:".concat(t.id," query -pager -cqn")],s=i.filter||{},c=s.keyword,l=s.match,u={},!c){n.next=34;break}if(!/^[0-9a-z]{32}$/.test(c)){n.next=11;break}u.id=c,n.next=34;break;case 11:d="title",m=_.get(r,"main.config.schema.behavior")||{},h=_.keys(m.keyword),p=_createForOfIteratorHelper(h),n.prev=15,p.s();case 17:if((f=p.n()).done){n.next=25;break}if(y=f.value,g=m.keyword[y],!new RegExp(g).test(c)){n.next=23;break}return d=y,n.abrupt("break",25);case 23:n.next=17;break;case 25:n.next=30;break;case 27:n.prev=27,n.t0=n.catch(15),p.e(n.t0);case 30:return n.prev=30,p.f(),n.finish(30);case 33:d.startsWith("=")?u[d.substring(1).trim()]=c:u[d]="^.*"+c;case 34:return _.isEmpty(l)||_.assign(u,l),v=_.get(r,"main.config.schema.behavior.match"),_.isEmpty(v)||_.assign(u,v),u.th_live=i.inRecycleBin?-1:1,_.isEmpty(i.sorter)||(b=JSON.stringify(i.sorter),o.push("-sort '".concat(b,"'"))),w=i.pager,!_.isEmpty(w)&&w.pgsz>0&&w.pn>0&&(x=w.pgsz,T=w.pgsz*(w.pn-1),o.push("-limit ".concat(x)),o.push("-skip  ".concat(T))),k=_.isEmpty(u)?void 0:JSON.stringify(u),C=o.join(" "),n.next=45,Wn.Sys.exec2(C,{input:k,as:"json"});case 45:S=n.sent,a("setPager",S.pager),a("setList",S.list),a("setStatus",{reloading:!1});case 49:case"end":return n.stop()}},n,null,[[15,27,30,33]])}))()}};Ti.Preload("ti/mod/wn/thing/mod/search/m-thing-search-actions.mjs",e)}(),Ti.Preload("ti/mod/wn/thing/mod/search/m-thing-search.json",{meta:null,filter:{},sorter:{ct:-1},inRecycleBin:!1,pager:{pn:1,pgsz:50,pgc:0,sum:0,skip:0,count:0},currentId:null,checkedIds:[],list:[],status:{reloading:!1,saving:!1,deleting:!1}}),function(){function e(e,t,n){if(e){var i=Ti.Storage.session.getObject(e.id)||{};_.defaults(i,{filter:{},sorter:{},pager:{}}),i[t]=n,Ti.Storage.session.setObject(e.id,i)}}var t={getters:{currentItem:function(e){if(e.currentId){var t,n=_createForOfIteratorHelper(e.list);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.id==e.currentId)return i}}catch(e){n.e(e)}finally{n.f()}}return null},checkedItems:function(e){var t,n={},i=_createForOfIteratorHelper(e.checkedIds);try{for(i.s();!(t=i.n()).done;){n[t.value]=!0}}catch(e){i.e(e)}finally{i.f()}var a,r=[],o=_createForOfIteratorHelper(e.list);try{for(o.s();!(a=o.n()).done;){var s=a.value;n[s.id]&&r.push(s)}}catch(e){o.e(e)}finally{o.f()}return r}},mutations:{setMeta:function(e,t){e.meta=t},setStatus:function(e,t){e.status=_.assign({},e.status,t)},setFilter:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.filter=n,e(t.meta,"filter",t.filter)},updateFilter:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.filter=_.assign({},t.filter,n),e(t.meta,"filter",t.filter)},setSorter:function(t,n){t.sorter=n,e(t.meta,"sorter",t.sorter)},setPager:function(t,n){t.pager=n,e(t.meta,"pager",t.pager)},updatePager:function(e,t){e.pager=_.defaults({},t,e.pager)},setInRecycleBin:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.inRecycleBin=t},setList:function(e,t){e.list=t},setCurrentId:function(e,t){e.currentId=t||null},setCheckedIds:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.checkedIds=_.union(t)},selectItem:function(e,t){e.currentId!=t&&(e.currentId=t,e.checkedIds=[],t&&e.checkedIds.push(t))},removeItems:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=-1;if(e.currentId)for(var i=0;i<e.list.length;i++){if(e.list[i].id==e.currentId){n=i;break}}var a={};if(_.isArray(t)){var r,o=_createForOfIteratorHelper(t);try{for(o.s();!(r=o.n()).done;){a[r.value]=!0}}catch(e){o.e(e)}finally{o.f()}}else _.isPlainObject(t)&&(a=t);var s,c=[],l=_createForOfIteratorHelper(e.list);try{for(l.s();!(s=l.n()).done;){var u=s.value;a[u.id]||c.push(u)}}catch(e){l.e(e)}finally{l.f()}var d=null;(n=Math.min(n,c.length-1))>=0?(d=c[n],e.currentId=d.id,e.checkedIds=[d.id]):(e.currentId=null,e.checkedIds=[]),e.list=c,e.pager&&(e.pager.count=c.length,e.pager.sum=e.pager.pgsz*(e.pager.pgc-1)+c.length)},updateItem:function(e,t){var n,i=[],a=_createForOfIteratorHelper(e.list);try{for(a.s();!(n=a.n()).done;){var r=n.value;r.id==t.id?i.push(_objectSpread({},t,{__updated_time:Date.now()})):i.push(r)}}catch(e){a.e(e)}finally{a.f()}e.list=i},appendToList:function(e,t){t&&(e.list=[].concat(e.list,t))},prependToList:function(e,t){t&&(e.list=[].concat(t,e.list))}}};Ti.Preload("ti/mod/wn/thing/mod/search/m-thing-search.mjs",t)}(),Ti.Preload("ti/mod/wn/thing/mod/search/_mod.json",{namespaced:!0,state:"./m-thing-search.json",actions:"./m-thing-search-actions.mjs",mixins:"./m-thing-search.mjs"}),Ti.Preload("ti/mod/wn/thing/_mod.json",{name:"wn-thing",namespaced:!0,state:"./m-thing.json",actions:"./m-thing-actions.mjs",mixins:"./m-thing.mjs",modules:{config:"./mod/config",search:"./mod/search",current:"@mod:wn/obj-current"}}),Ti.Preload("ti/lib/www/com/site-main.html",'<div class="site-main" @click.right="OnMouseRightClick">\n  <ti-gui \n    class="site-page"\n    v-bind="PageGUI"\n    :loading-as="loading"\n    :shown="page.shown"/>\n  \x3c!--pre>{{page}}</pre--\x3e\n</div>'),function(){var e={provide:function(){return Ti.Util.explainObj(this.$store.state,this.provide)},computed:_objectSpread({},Vuex.mapState({siteId:function(e){return e.siteId},logo:function(e){return e.logo},utils:function(e){return e.utils},page:function(e){return e.page},shop:function(e){return e.shop},auth:function(e){return e.auth},domain:function(e){return e.domain},rs:function(e){return e.rs},nav:function(e){return e.nav},base:function(e){return e.base},apiBase:function(e){return e.apiBase},cdnTmpl:function(e){return e.cdnTmpl},captcha:function(e){return e.captcha},schema:function(e){return e.schema},provide:function(e){return e.provide},blocks:function(e){return e.blocks},loading:function(e){return e.loading},pageReady:function(e){return e.pageReady}}),{},Vuex.mapGetters(["actions","getUrl","getApiUrl"]),{},Vuex.mapGetters("page",["pageLink"]),{PayReturnUrl:function(){var e=this.$store.state;if(e.payReturnUrl)return Ti.Util.explainObj(e,e.payReturnUrl)},SiteLogo:function(){return this.logo&&/\.(png|jpe?g)$/.test(this.logo)?this.getUrl(this.logo):this.logo||"zmdi-globe"},SiteCaptcha:function(){var e=Ti.S.renderBy(this.captcha,{site:this.siteId});return e.startsWith("/")?e:this.getApiUrl(e)},SiteLoginMode:function(){return this.auth.me?"bind_phone":"login_by_passwd"},PageFnSet:function(){return Ti.AddGlobalFuncs(this.utils),Ti.GlobalFuncs()},PageGUI:function(){var e=this,t=this.page;if(!t||!t.layout)return{};var n=t.layout;if(n){n=function t(n){if(_.isString(n)){var i=/^@BLOCK\(([^ ]+)\)$/.exec(n);if(i){var a=i[1];return _.get(e.blocks,a)}}else{if(_.isArray(n))return _.map(n,t);if(_.isPlainObject(n))return _.mapValues(n,t)}return n}(n)}var i={className:t.className,defaultFlex:"nil",defaultOverflow:"none",layout:n,schema:{},canLoading:!0};_.assign(i.schema,this.schema,t.schema);return Ti.Util.explainObj(this,i,{fnSet:this.PageFnSet})}}),methods:{OnMouseRightClick:function(e){!1===this.page.contextMenu?e.preventDefault():_.isString(this.page.contextMenu)&&(e.preventDefault(),Ti.Toast.Open(this.page.contextMenu,"warn"))},showBlock:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:Ti.App(t).dispatch("page/showBlock",e);case 1:case"end":return n.stop()}},n)}))()},hideBlock:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:Ti.App(t).dispatch("page/hideBlock",e);case 1:case"end":return n.stop()}},n)}))()},__on_events:function(e){var t=this;return"block:show"==e?function(e){return t.showBlock(e)}:"block:hide"==e?function(e){return t.hideBlock(e)}:function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];t.invokeAction(e,i)}},invokeAction:function(e){var t=arguments,n=this;return _asyncToGenerator(regeneratorRuntime.mark(function i(){var a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.length>1&&void 0!==t[1]?t[1]:[],i.next=3,Ti.App(n).dispatch("invokeAction",{name:e,args:a});case 3:case"end":return i.stop()}},i)}))()},pushBrowserHistory:function(e){var t=window.history;if(t){var n=window.location,i=[n.pathname,n.search,n.hash].join(""),a=this.getUrl(this.pageLink);if(i!=a||!t.state){var r=_.cloneDeep(_.pick(this.page,"path","params","anchor"));t.pushState(r,e,a)}}}},watch:{"page.finger":function(){var e=Ti.Util.explainObj(this,this.page.title);document.title=e,this.pushBrowserHistory(e)}},mounted:function(){var e=this;window.onpopstate=function(t){var n=t.state;if(console.log("popstate",n),n&&n.path){console.log("window.onpopstate",n);Ti.App(e).dispatch("navTo",{type:"page",value:n.path,params:n.params,anchor:n.anchor})}}}};Ti.Preload("ti/lib/www/com/site-main.mjs",e)}(),function(){var e={reloadMyAddresses:function(e){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,i=e.commit,a=e.getters,r=a.urls.addr_mine,i("setLoading",!0,{root:!0}),t.next=5,Ti.Http.get(r,{params:{ticket:n.ticket},as:"json"});case 5:o=t.sent,i("setLoading",!1,{root:!0}),i("setAddresses",o);case 8:case"end":return t.stop()}},t)}))()},editOrCreateAddress:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.state,a=e.getters,r=e.commit,o=e.dispatch,s=t.length>1&&void 0!==t[1]?t[1]:{},c=_.pick(s,"id","country","code","province","city","area","street","door","dftaddr","consignee","phone","email"),_.defaults(c,{country:"CN",tp:"U",dftaddr:!1}),n.next=6,Ti.App.Open({title:"i18n:edit",position:"top",width:640,height:"90%",result:c,comType:"TiForm",comConf:{onlyFields:!1,data:"=result",fields:[{title:"i18n:address-k-country",name:"country",comType:"ti-combo-input",comConf:{mustInList:!0,autoCollapse:!0,valueCase:"upper",dropDisplay:"name",options:i.countries,valueBy:"key",textBy:"name"}},{title:"i18n:address-k-code",name:"code",tip:"i18n:address-k-code-tip",comType:"ti-input",comConf:{valueCase:"upper"}},{title:"i18n:address-k-province",name:"province",comType:"ti-input"},{title:"i18n:address-k-city",name:"city",comType:"ti-input"},{title:"i18n:address-k-area",name:"area",comType:"ti-input"},{title:"i18n:address-k-street",name:"street",comType:"ti-input"},{title:"i18n:address-k-door",name:"door",comType:"ti-input"},{title:"i18n:address-k-dftaddr",name:"dftaddr",type:"Boolean",comType:"ti-toggle"},{title:"i18n:address-k-consignee",name:"consignee",comType:"ti-input"},{title:"i18n:address-k-phone",name:"phone",comType:"ti-input"},{title:"i18n:address-k-email",name:"email",comType:"ti-input"}]}});case 6:if(l=n.sent,!_.isUndefined(l)){n.next=9;break}return n.abrupt("return");case 9:if(!_.isEqual(l,c)){n.next=11;break}return n.abrupt("return");case 11:return console.log("!!!",l),u=l.id?a.urls.addr_update:a.urls.addr_create,d={ticket:i.ticket,id:l.id},m=JSON.stringify(l),r("setLoading",!0,{root:!0}),n.next=18,Ti.Http.post(u,{params:d,body:m,as:"json"});case 18:return n.next=20,o("reloadMyAddresses");case 20:r("setLoading",!1,{root:!0});case 21:case"end":return n.stop()}},n)}))()},removeAddress:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.state,a=e.commit,r=e.getters,o=e.dispatch,s=t.length>1&&void 0!==t[1]?t[1]:{},c=s.id){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,Ti.Confirm("i18n:address-rm-confirm");case 6:if(n.sent){n.next=8;break}return n.abrupt("return");case 8:return a("setLoading",!0,{root:!0}),l=r.urls.addr_delete,n.next=12,Ti.Http.get(l,{params:{ticket:i.ticket,id:c},as:"json"});case 12:return n.next=14,o("reloadMyAddresses");case 14:a("setLoading",!1,{root:!0});case 15:case"end":return n.stop()}},n)}))()},setAddressDefault:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.state,a=e.commit,r=e.getters,o=e.dispatch,s=t.length>1&&void 0!==t[1]?t[1]:{},c=s.id){n.next=4;break}return n.abrupt("return");case 4:return l=r.urls.addr_update,u={ticket:i.ticket,id:c},d=JSON.stringify({dftaddr:!0}),a("setLoading",!0,{root:!0}),n.next=10,Ti.Http.post(l,{params:u,body:d,as:"json"});case 10:return n.next=12,o("reloadMyAddresses");case 12:a("setLoading",!1,{root:!0});case 13:case"end":return n.stop()}},n)}))()},initCountries:function(e){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,i=e.getters,a=e.commit,n.countries){t.next=7;break}return r=i.urls.countries,t.next=5,Ti.Http.get(r,{as:"json"});case 5:o=t.sent,a("setCountries",o);case 7:case"end":return t.stop()}},t)}))()}};Ti.Preload("ti/lib/www/mod/auth/mod-address-actions.mjs",e)}(),function(){var e={doCheckMe:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g,v;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.commit,a=e.dispatch,r=e.getters,o=e.rootState,s=t.length>1&&void 0!==t[1]?t[1]:{},c=s.force,l=void 0!==c&&c,u=s.ok,d=s.fail,m=s.nophone,h=s.noemail,p=o.siteId){n.next=6;break}return Ti.Alert("Without siteId!!!"),n.abrupt("return");case 6:if(f=Ti.Storage.local.getString("www-ticket-".concat(p),""),i("setLoading",!0,{root:!0}),y=r.sessionState,!f||!l&&y.ok){n.next=13;break}return n.next=12,Ti.Http.get(r.urls.checkme,{params:{site:p,ticket:f},as:"json"});case 12:y=n.sent;case 13:if(i("setLoading",!1,{root:!0}),!y.ok){n.next=36;break}if(i("setTicket",y.data.ticket),i("setExpi",y.data.expi),i("setMe",y.data.me),!m){n.next=24;break}if((g=y.data.me).phone){n.next=24;break}return n.next=23,a("doAction",[m,y],{root:!0});case 23:return n.abrupt("return",n.sent);case 24:if(!h){n.next=30;break}if((v=y.data.me).email){n.next=30;break}return n.next=29,a("doAction",[h,y],{root:!0});case 29:return n.abrupt("return",n.sent);case 30:if(!u){n.next=34;break}return n.next=33,a("doAction",[u,y],{root:!0});case 33:return n.abrupt("return",n.sent);case 34:n.next=40;break;case 36:if(!d){n.next=40;break}return n.next=39,a("doAction",[d,y],{root:!0});case 39:return n.abrupt("return",n.sent);case 40:case"end":return n.stop()}},n)}))()},autoCheckmeOrAuthByWxghCode:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=e.dispatch,a=t.length>1&&void 0!==t[1]?t[1]:{},r=a.codeKey,o=void 0===r?"code":r,s=a.codeTypeBy,c=void 0===s?"ct":s,l=a.force,u=void 0!==l&&l,d=a.fail,m=a.nophone,h=a.noemail,i("doCheckMe",{force:u,fail:{action:"auth/authByWxghCode",payload:{codeKey:o,codeTypeBy:c,fail:d,ok:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{},n=t.data,console.log("autoCheckmeOrAuthByWxghCode->ok:me",n),!m){e.next=8;break}if(n.phone){e.next=8;break}return e.next=7,i("doAction",[m,t],{root:!0});case 7:return e.abrupt("return",e.sent);case 8:if(!h){e.next=13;break}if(n.email){e.next=13;break}return e.next=12,i("doAction",[h,t],{root:!0});case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}}});case 3:case"end":return n.stop()}},n)}))()},authByWxghCode:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g,v,b,w,x,T;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.commit,a=e.dispatch,r=e.getters,o=e.rootState,s=t.length>1&&void 0!==t[1]?t[1]:{},c=s.codeKey,l=void 0===c?"code":c,u=s.codeTypeBy,d=void 0===u?"ct":u,m=s.done,h=s.ok,p=s.fail,f=s.invalid,y=s.others,g=o.page.params[l]){n.next=5;break}return n.abrupt("return");case 5:if(v=o.page.params[d],b=o.siteId){n.next=10;break}return Ti.Alert("Without siteId!!!"),n.abrupt("return");case 10:return w=r.urls.login_by_wxcode,x={site:b,code:g,ct:v},n.next=14,Ti.Http.get(w,{params:x,as:"json"});case 14:return T=n.sent,console.log(T),n.next=18,a("doAction",[m,T],{root:!0});case 18:if(!T.ok||!T.data){n.next=27;break}return Ti.Storage.local.set("www-ticket-".concat(b),T.data.ticket),i("setTicket",T.data.ticket),i("setExpi",T.data.expi),i("setMe",T.data.me),n.next=25,a("doAction",[h,T],{root:!0});case 25:n.next=36;break;case 27:if(!/^e.www.login.invalid/.test(T.errCode)){n.next=32;break}return n.next=30,a("doAction",[f,T],{root:!0});case 30:n.next=34;break;case 32:return n.next=34,a("doAction",[y,T],{root:!0});case 34:return n.next=36,a("doAction",[p,T],{root:!0});case 36:case"end":return n.stop()}},n)}))()},doAuth:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g,v,b,w,x,T,k,C;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a=e.commit,r=e.dispatch,o=e.getters,s=e.rootState,c=t.length>1&&void 0!==t[1]?t[1]:{},l=c.type,u=void 0===l?"login_by_passwd":l,d=c.name,m=c.passwd,h=c.done,p=c.ok,f=c.fail,y=c.noexist,g=c.invalid,v=c.others,b=s.siteId){n.next=6;break}return Ti.Alert("Without siteId!!!"),n.abrupt("return");case 6:if(w=o.urls[u],x=Ti.Storage.local.getString("www-ticket-".concat(b),""),T={login_by_passwd:"passwd",login_by_phone:"vcode",login_by_email:"vcode",bind_phone:"vcode",bind_email:"vcode"}[u]){n.next=11;break}throw"Unknown auth type: "+u;case 11:return i={site:b,name:d},_defineProperty(i,T,m),_defineProperty(i,"ticket",x),_defineProperty(i,"ajax",!0),k=i,n.next=14,Ti.Http.post(w,{params:k,as:"json"});case 14:return C=n.sent,n.next=17,r("doAction",[h,C],{root:!0});case 17:if(!C.ok||!C.data){n.next=26;break}return Ti.Storage.local.set("www-ticket-".concat(b),C.data.ticket),a("setTicket",C.data.ticket),a("setExpi",C.data.expi),a("setMe",C.data.me),n.next=24,r("doAction",[p,C],{root:!0});case 24:n.next=40;break;case 26:if("e.www.login.noexists"!=C.errCode){n.next=31;break}return n.next=29,r("doAction",[y,C],{root:!0});case 29:n.next=38;break;case 31:if(!/^e.www.login.invalid/.test(C.errCode)){n.next=36;break}return n.next=34,r("doAction",[g,C],{root:!0});case 34:n.next=38;break;case 36:return n.next=38,r("doAction",[v,C],{root:!0});case 38:return n.next=40,r("doAction",[f,C],{root:!0});case 40:case"end":return n.stop()}},n)}))()},doGetVcode:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g,v,b,w,x;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.getters,a=e.dispatch,r=e.rootState,o=t.length>1&&void 0!==t[1]?t[1]:{},s=o.type,c=void 0===s?"login_by_phone":s,l=o.scene,u=void 0===l?"auth":l,d=o.account,m=o.captcha,h=o.done,p=o.ok,f=o.fail,y=o.error,g=r.siteId){n.next=6;break}return Ti.Alert("Without siteId!!!"),n.abrupt("return");case 6:if(v={login_by_phone:"get_sms_vcode",login_by_email:"get_email_vcode",bind_phone:"get_sms_vcode",bind_email:"get_email_vcode",phone:"get_sms_vcode",email:"get_email_vcode"}[c],b=i.urls[v],v&&b){n.next=12;break}return n.next=11,Ti.Toast.Open("Invalid type: ".concat(c),"error");case 11:return n.abrupt("return",n.sent);case 12:return w={site:g,scene:u,account:d,captcha:m},n.prev=13,n.next=16,Ti.Http.get(b,{params:w,as:"json"});case 16:if(!(x=n.sent).ok||!x.data){n.next=22;break}return n.next=20,a("doAction",[p,x],{root:!0});case 20:n.next=24;break;case 22:return n.next=24,a("doAction",[f,x],{root:!0});case 24:n.next=36;break;case 26:if(n.prev=26,n.t0=n.catch(13),x=n.t0,!y){n.next=34;break}return n.next=32,a("doAction",[y,n.t0],{root:!0});case 32:n.next=36;break;case 34:return n.next=36,Ti.Alert(n.t0.responseText,"error");case 36:return n.prev=36,n.next=39,a("doAction",[h,x],{root:!0});case 39:return n.finish(36);case 40:case"end":return n.stop()}},n,null,[[13,26,36,40]])}))()},doResetPasswd:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g,v,b,w,x,T;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.getters,a=e.dispatch,r=e.rootState,o=t.length>1&&void 0!==t[1]?t[1]:{},s=o.scene,c=void 0===s?"resetpasswd":s,l=o.account,u=o.vcode,d=o.newpwd,m=o.oldpwd,h=o.done,p=o.ok,f=o.fail,y=r.siteId){n.next=6;break}return Ti.Alert("Without siteId!!!"),n.abrupt("return");case 6:if(g=r.auth.ticket,v=r.auth.me){n.next=11;break}return Ti.Alert("Without Login!!!"),n.abrupt("return");case 11:if(b=i.urls.resetpasswd){n.next=15;break}return console.error("doResetPasswd url is nil"),n.abrupt("return");case 15:return w={site:y,ticket:g},x={account:l,vcode:u,newpwd:d,oldpwd:m},n.next=19,Ti.Http.post(b,{params:w,body:JSON.stringify(x),as:"json"}).catch(function(e){var t=e.responseText;return{ok:!1,errCode:_.trim(t)}});case 19:return T=n.sent,n.next=22,a("doAction",[h,T],{root:!0});case 22:if(!T.ok){n.next=27;break}return n.next=25,a("doAction",[p,T],{root:!0});case 25:n.next=29;break;case 27:return n.next=29,a("doAction",[f,T],{root:!0});case 29:case"end":return n.stop()}},n)}))()},doLogout:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.state,a=e.commit,r=e.dispatch,o=e.getters,s=e.rootState,c=t.length>1&&void 0!==t[1]?t[1]:{},l=c.done,u=c.ok,d=c.fail,m=s.siteId){n.next=6;break}return Ti.Alert("Without siteId!!!"),n.abrupt("return");case 6:return n.next=8,Ti.Confirm("i18n:auth-logout-confirm");case 8:if(n.sent){n.next=10;break}return n.abrupt("return");case 10:if(Ti.Storage.local.remove("www-ticket-".concat(m)),o.hasSession){n.next=14;break}return r("invokeAction",d,{root:!0}),n.abrupt("return");case 14:return h=o.urls.logout,p={site:m,ticket:i.ticket},a("setLoading",{text:"i18n:logout-ing"},{root:!0}),n.next=19,Ti.Http.get(h,{params:p,as:"json"});case 19:return f=n.sent,a("setTicket",null),a("setExpi",0),a("setMe",null),a("setLoading",!1,{root:!0}),n.next=26,r("doAction",[l,f],{root:!0});case 26:f.ok?r("doAction",[u,f],{root:!0}):r("doAction",[d,f],{root:!0});case 27:case"end":return n.stop()}},n)}))()}};Ti.Preload("ti/lib/www/mod/auth/mod-auth-actions.mjs",e)}(),function(){var e={saveProfile:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.state,a=e.getters,r=e.commit,o=e.dispatch,s=e.rootState,c=t.length>1&&void 0!==t[1]?t[1]:{},c=_.omit(c,"email","phone","nm"),!_.isEmpty(c)){n.next=5;break}return n.abrupt("return");case 5:if(!_.isMatch(i.me,c)){n.next=7;break}return n.abrupt("return");case 7:return l={site:s.siteId,ticket:i.ticket},u=JSON.stringify(c),r("setLoading",!0,{root:!0}),d=a.urls.profile_save,n.next=13,Ti.Http.post(d,{params:l,body:u,as:"json"});case 13:return n.next=15,o("doCheckMe",{force:!0});case 15:r("setLoading",!1,{root:!0});case 16:case"end":return n.stop()}},n)}))()}};Ti.Preload("ti/lib/www/mod/auth/mod-profile-actions.mjs",e)}(),Ti.Preload("ti/lib/www/mod/auth/www-mod-auth.json",{ticket:null,expi:0,me:null,profile:null,countries:null,countryMap:null,addresses:[],defaultAddr:null,paths:{checkme:"auth/checkme",login_by_wxcode:"auth/login_by_wxcode",login_by_phone:"auth/login_by_phone",login_by_email:"auth/login_by_email",login_by_passwd:"auth/login_by_passwd",bind_phone:"auth/bind_account",bind_email:"auth/bind_account",get_sms_vcode:"auth/get_sms_vcode",get_email_vcode:"auth/get_email_vcode",check_name:"auth/check_name",check_phone:"auth/check_phone",logout:"auth/logout",resetpasswd:"auth/resetpasswd",countries:"lbs/countries",addr_mine:"address/mine",addr_create:"address/create",addr_update:"address/update",addr_delete:"address/delete",profile_save:"auth/setme"}}),function(){var e={getters:{hasSession:function(e){return!_.isEmpty(e.ticket)&&e.expi>Date.now()&&!_.isEmpty(e.me)},sessionState:function(e,t){return{ok:t.hasSession,data:{me:e.me||null,ticket:e.ticket||null,expi:e.expi||0}}},urls:function(e,t,n,i){var a={};return _.forEach(e.paths,function(e,t){a[t]=i.getApiUrl(e)}),a}},mutations:{setTicket:function(e,t){e.ticket=t},setExpi:function(e,t){e.expi=t},setMe:function(e,t){e.me=t},setPaths:function(e,t){_.assign(e.paths,t)},mergePaths:function(e,t){_.merge(e.paths,t)},setAddresses:function(e,t){if(e.addresses=t,_.isArray(t)){var n,i=null,a=_createForOfIteratorHelper(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(r.dftaddr){i=r;break}}}catch(e){a.e(e)}finally{a.f()}e.defaultAddr=i}},setCountries:function(e,t){e.countries=t;var n={};_.forEach(t,function(e){n[e.key]=e.name}),e.countryMap=n}}};Ti.Preload("ti/lib/www/mod/auth/www-mod-auth.mjs",e)}(),Ti.Preload("ti/lib/www/mod/auth/_mod.json",{name:"www-mod-auth",namespaced:!0,state:"./www-mod-auth.json",actions:["./mod-auth-actions.mjs","./mod-address-actions.mjs","./mod-profile-actions.mjs"],mixins:"./www-mod-auth.mjs"}),Ti.Preload("ti/lib/www/mod/page/www-mod-page.json",{className:null,title:null,name:null,path:null,pageUri:null,ready:0,finger:null,params:{},anchor:null,apis:{},data:{},contextMenu:!0,explainDataKey:[],layout:{desktop:{},tablet:"desktop",phone:"desktop"},shown:{},schema:{},actions:{}}),function(){var e,t={getters:{pageLink:function(e){var t=e.path,n=e.params,i=e.anchor,a=[t];if(!_.isEmpty(n)){var r=[];_.forEach(n,function(e,t){Ti.Util.isNil(e)||r.push("".concat(t,"=").concat(encodeURIComponent(e)))}),_.isEmpty(r)||a.push("?".concat(r.join("&")))}return i&&a.push("#".concat(i)),a.join("")},pageApis:function(e,t,n,i){var a=n.apiBase||"/",r=n.apis||{},o={},s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=_.cloneDeep(t);if(_.defaults(i,{name:e,method:"GET",headers:{},params:{},vars:{},as:"json"}),i.path)return _.assign(i.vars,n.vars),_.assign(i.headers,n.headers),_.assign(i.params,n.params),"INVOKE"!=i.method&&(/^(https?:\/\/|\/)/.test(i.path)?i.url=i.path:i.url=Ti.Util.appendPath(a,i.path)),_.assign(i,_.pick(n,"body","preload","ssr","transformer","dataKey","dataMerge","rawDataKey","rawDataMerge")),_.defaults(i,{bodyType:"form",dataKey:e}),i;console.warn("!!!API[".concat(e,"] without defined in site!!!"),i)};return _.forEach(r,function(e,t){e.pages&&(e=s(t,e))&&(o[t]=e)}),_.forEach(e.apis,function(e,t){var n=_.get(r,e.apiName||t),i=s(t,n,e);i&&(o[t]=i)}),o}},mutations:(e={set:function(e,t){_.assign(e,t)},setTitle:function(e,t){e.title=t},setPath:function(e,t){e.path=t}},_defineProperty(e,"setPath",function(e,t){e.path=t}),_defineProperty(e,"setPageUri",function(e,t){e.pageUri=t}),_defineProperty(e,"setParams",function(e,t){e.params=t}),_defineProperty(e,"mergeParams",function(e,t){!_.isEmpty(t)&&_.isPlainObject(t)&&(e.params=_.merge({},e.params,t))}),_defineProperty(e,"setData",function(e,t){e.data=t}),_defineProperty(e,"updateData",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.key,i=t.value;if(n&&!_.isUndefined(i)){var a=_.set({},n,i);e.data=_.assign({},e.data,a)}}),_defineProperty(e,"mergeData",function(e,t){!_.isEmpty(t)&&_.isPlainObject(t)&&(e.data=_.merge({},e.data,t))}),_defineProperty(e,"setLayout",function(e,t){e.layout=t}),_defineProperty(e,"setShown",function(e,t){_.assign(e.shown,t)}),_defineProperty(e,"setReady",function(e,t){e.ready=t}),_defineProperty(e,"updateFinger",function(e){var t=[e.path,e.params,e.anchor,e.data],n=Ti.Alg.sha1(t);e.finger=n}),e),actions:{showBlock:function(e,t){(0,e.commit)("setShown",_defineProperty({},t,!0))},hideBlock:function(e,t){(0,e.commit)("setShown",_defineProperty({},t,!1))},resetData:function(e){(0,e.commit)("setData",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})},resetDataByKey:function(e){var t=e.state,n=e.commit,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!_.isEmpty(i)){var a=_.cloneDeep(t.data);_.forEach(i,function(e,t){_.set(a,t,e)}),n("setData",a)}},changeData:function(e,t){(0,e.commit)("mergeData",Ti.Util.merge({},t))},changeParams:function(e,t){var n=e.commit;n("mergeParams",Ti.Util.merge({},t)),n("updateFinger")},shiftData:function(e){var t=e.state,n=e.commit,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!_.isEmpty(i)&&_.isPlainObject(i)){var a={};Ti.Util.walk(i,{leaf:function(e,n){var i=_.get(t.data,n);_.isNumber(i)&&_.isString(e)&&/^[+-][0-9.]+$/.test(e)?_.set(a,n,i+1*e):_.set(a,n,e)}}),n("mergeData",a)}},assertPage:function(e){var t,n=e.rootState,i=e.dispatch,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.checkList,o=void 0===r?[]:r,s=a.fail,c=void 0===s?{}:s,l=!1,u=_createForOfIteratorHelper(o);try{for(u.s();!(t=u.n()).done;){var d=t.value,m=_.get(n,d.target);if(!Ti.Validate.checkBy(d.assert,m)){l=!0;break}}}catch(e){u.e(e)}finally{u.f()}l&&c.action&&i("doAction",c,{root:!0})},scrollToTop:function(e){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=e.state,Ti.Be.ScrollWindowTo({y:0});case 2:case"end":return t.stop()}},t)}))()},doApi:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.getters,a=e.commit,r=e.dispatch,o=t.length>1&&void 0!==t[1]?t[1]:{},s=o.key,c=o.params,l=void 0===c?{}:c,u=o.vars,d=void 0===u?{}:u,m=o.body,h=void 0===m?null:m,p=o.ok,f=o.fail,y=_.get(i.pageApis,s),console.log("doApi",s,l,y),y){n.next=8;break}return n.next=7,Ti.Toast.Open("e.www.page.ApiNotFound: "+s,"warn");case 7:return n.abrupt("return",n.sent);case 8:return a("setLoading",!0,{root:!0}),n.next=11,r("__run_api",{api:y,params:l,vars:d,body:h,ok:p,fail:f});case 11:a("setLoading",!1,{root:!0});case 12:case"end":return n.stop()}},n)}))()},__run_api:function(e,t){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g,v,b,w,x,T,k,C;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.commit,a=e.dispatch,r=e.rootState,o=t.api,s=t.vars,c=t.params,l=t.headers,u=t.body,d=t.ok,m=t.fail,o=_.cloneDeep(o),_.assign(o.vars,s),_.assign(o.params,c),_.assign(o.headers,l),Ti.Util.isNil(u)||(o.body=u),_.defaults(s,o.vars),h=o.url,_.isEmpty(o.vars)||(p=Ti.Util.explainObj(r,o.vars),h=Ti.S.renderBy(h,p)),f=_.pick(o,["method","as"]),f.headers=Ti.Util.explainObj(r,o.headers),f.params=Ti.Util.explainObj(r,o.params),"POST"==o.method&&o.body&&(y=Ti.Util.explainObj(r,o.body),"json"==o.bodyType?f.body=JSON.stringify(y):"text"==o.bodyType?f.body=Ti.Types.toStr(y):f.body=Ti.Http.encodeFormData(y)),g=void 0,n.prev=15,"INVOKE"!=o.method){n.next=22;break}return n.next=19,a(o.path,f.params,{root:!0});case 19:g=n.sent,n.next=27;break;case 22:if(o.ssr&&"GET"==o.method&&(v=JSON.stringify(f.params||{}),(b=_.pick(f,"as")).dft=void 0,b.ssrFinger=Ti.Alg.sha1(v),g=Ti.WWW.getSSRData("api-".concat(o.name),b)),!_.isUndefined(g)){n.next=27;break}return n.next=26,Ti.Http.sendAndProcess(h,f);case 26:g=n.sent;case 27:n.next=34;break;case 29:return n.prev=29,n.t0=n.catch(15),console.warn("Fail to invoke ".concat(h),{api:o,url:h,options:f},n.t0),a("doAction",m,{root:!0}),n.abrupt("return");case 34:w=g,o.transformer&&(x=_.cloneDeep(o.transformer),T=Ti.Util.fallback(x.partial,"right"),x.explain&&(k=_.pick(x,"name","args"),x=Ti.Util.explainObjs(r,k)),C=Ti.Util.genInvoking(x,{context:r,partial:T}),_.isFunction(C)&&(w=C(g))),o.dataMerge?i("mergeData",_defineProperty({},o.dataKey,w)):o.dataKey&&i("updateData",{key:o.dataKey,value:w}),o.rawDataKey&&(o.rawDataMerge?i("mergeData",_defineProperty({},o.rawDataKey,g)):i("updateData",{key:o.rawDataKey,value:g})),a("doAction",d,{root:!0});case 39:case"end":return n.stop()}},n,null,[[15,29]])}))()},reloadData:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=e.commit,a=e.getters,r=e.dispatch,o=e.rootState,s=t.length>1&&void 0!==t[1]?t[1]:[],c=_.isEmpty(s),l=_.filter(a.pageApis,function(e,t){return!!(c&&e.preload>0||_.indexOf(s,t)>=0)&&(!e.preloadWhen||Ti.AutoMatch.test(e.preloadWhen,o))}),i("setLoading",!0,{root:!0}),u=[],d=_createForOfIteratorHelper(l);try{for(d.s();!(m=d.n()).done;)h=m.value,u.push(r("__run_api",{api:h}))}catch(e){d.e(e)}finally{d.f()}return n.next=10,Promise.all(u);case 10:i("setLoading",!1,{root:!0}),i("updateFinger");case 12:case"end":return n.stop()}},n)}))()},explainData:function(e,t){var n=e.commit,i=e.state,a=e.rootState;if(t=t||i.explainDataKey,!_.isEmpty(t)&&_.isArray(t)){var r,o={},s=_createForOfIteratorHelper(t);try{for(s.s();!(r=s.n()).done;){var c=r.value,l=_.get(i.data,c),u=Ti.Util.explainObj(a,l);_.set(o,c,u)}}catch(e){s.e(e)}finally{s.f()}n("mergeData",o)}},reload:function(e,t){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g,v,b,w,x,T,k,C;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=e.commit,a=e.dispatch,r=e.getters,o=e.rootGetters,s=t.path,c=t.anchor,l=t.params,u=void 0===l?{}:l,m=_createForOfIteratorHelper(o.routerList),n.prev=3,m.s();case 5:if((h=m.n()).done){n.next=12;break}if(p=h.value,!(d=p(s))||!d.path){n.next=10;break}return n.abrupt("break",12);case 10:n.next=5;break;case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(3),m.e(n.t0);case 17:return n.prev=17,m.f(),n.finish(17);case 20:if(d&&d.path){n.next=24;break}return n.next=23,Ti.Toast.Open("Page ${path} not found!",{type:"error",position:"center",vars:{path:s}});case 23:return n.abrupt("return",n.sent);case 24:return i("setReady",0),n.next=27,a("invokeAction",{name:"@page:init"},{root:!0});case 27:if(f=Ti.WWW.getSSRData("page-json",{as:"json"})){n.next=34;break}return y=/^([^.]+)(\.html?)?$/.exec(d.path),g=y[1]+".json",n.next=33,Ti.Load("@Site:".concat(g));case 33:f=n.sent;case 34:return c&&(d.anchor=c),d.params=_.merge({},d.params,u),d.path=d.path||s,d.name=Ti.Util.getMajorName(d.path),v=Ti.Util.Link({url:s,params:u,anchor:c}),d.pageUri=v.toString(),b=_.merge({className:null,title:null,apis:{},data:{},contextMenu:!0,explainDataKey:[],layout:{},params:{},shown:{},schema:{},actions:{}},f,d),i("set",b),i("setReady",1),n.next=45,a("invokeAction",{name:"@page:prepare"},{root:!0});case 45:w=[],x=[],_.forEach(r.pageApis,function(e,t){var n=e.preload;if(_.isBoolean(n)){if(!n)return;n=1}if(_.isNumber(n))if(n>=0){var i=_.nth(w,n);_.isArray(i)||(i=[],w[n]=i),i.push(t)}else x.push(t)}),T=0,k=w;case 49:if(!(T<k.length)){n.next=57;break}if(C=k[T],_.isEmpty(C)){n.next=54;break}return n.next=54,a("reloadData",C);case 54:T++,n.next=49;break;case 57:return n.next=59,a("explainData");case 59:return a("scrollToTop"),i("setReady",2),n.next=63,a("invokeAction",{name:"@page:ready"},{root:!0});case 63:x.length>0&&a("reloadData",x);case 64:case"end":return n.stop()}},n,null,[[3,14,17,20]])}))()}}};Ti.Preload("ti/lib/www/mod/page/www-mod-page.mjs",t)}(),Ti.Preload("ti/lib/www/mod/page/_mod.json",{name:"www-mod-page",namespaced:!0,state:"./www-mod-page.json",mixins:"./www-mod-page.mjs"}),Ti.Preload("ti/lib/www/mod/shop/www-mod-shop.json",{basket:[],payment:null,paths:{buyIt:"entity/buy/it",buyRemove:"entity/buy/rm",buyGetAll:"entity/buy/all",buyClean:"entity/buy/clean",objs:"objs",buy:"pay/buy",pay:"pay/pay",checkOrder:"pay/check",fetchOrder:"pay/order"}}),function(){var e={getters:{urls:function(e,t,n,i){var a={};return _.forEach(e.paths,function(e,t){a[t]=i.getApiUrl(e)}),a}},mutations:{appendBasket:function(e,t){e.basket=_.concat(e.basket,t)},setBasket:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.basket=t},setPayment:function(e,t){e.payment=t},setPaths:function(e,t){e.paths=_.cloneDeep(t)},mergePaths:function(e,t){_.assign(e.paths,t)}},actions:{fetchOrder:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.getters,a=e.rootState,r=t.length>1&&void 0!==t[1]?t[1]:{},o=r.orderId){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,Ti.Http.get(i.urls.fetchOrder,{params:{ticket:a.auth.ticket,id:o},as:"json"});case 6:if(!(s=n.sent).ok){n.next=11;break}return n.abrupt("return",s.data);case 11:console.warn("Fail to loadOrder",{items:items,reo:s});case 12:case"end":return n.stop()}},n)}))()},payOrder:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.getters,a=e.rootState,r=t.length>1&&void 0!==t[1]?t[1]:{},o=r.orderId,s=r.payType,o){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,Ti.Http.get(i.urls.pay,{params:{ticket:a.auth.ticket,id:o,pt:s},as:"json"});case 6:if(!(c=n.sent).ok){n.next=11;break}return n.abrupt("return",c.data);case 11:console.warn("Fail to payOrder",{items:items,reo:c});case 12:case"end":return n.stop()}},n)}))()},createOrder:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.getters,a=e.rootState,r=t.length>1&&void 0!==t[1]?t[1]:{},o=r.payType,s=r.items,c=r.orderType,l=r.orderTitle,u=r.address,d=r.fail,o&&!_.isEmpty(s)){n.next=4;break}return n.abrupt("return");case 4:return m={title:l,tp:c,pay_tp:o,products:s},u&&(m.addr_user_country=_.get(u,"country"),m.addr_user_code=_.get(u,"code"),m.addr_user_door=_.get(u,"door"),m.user_name=_.get(u,"consignee"),m.user_phone=_.get(u,"phone"),m.user_email=_.get(u,"email"),m.addr_user_province=_.get(u,"province"),m.addr_user_city=_.get(u,"city"),m.addr_user_area=_.get(u,"area"),m.addr_user_street=_.get(u,"street")),n.prev=6,n.next=9,Ti.Http.post(i.urls.buy,{params:{ticket:a.auth.ticket},headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(m),as:"json"});case 9:if(!(h=n.sent).ok){n.next=14;break}return n.abrupt("return",h.data);case 14:console.warn("Fail to createOrder",{items:s,reo:h});case 15:n.next=23;break;case 17:n.prev=17,n.t0=n.catch(6),p=_.trim(n.t0.responseText),f=Ti.I18n.explain(p),Ti.Toast.Open(f,"error"),_.isFunction(d)&&d(f);case 23:case"end":return n.stop()}},n,null,[[6,17]])}))()},checkOrder:function(e,t){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.getters,a=e.rootState,console.log("checkOrder"),t){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,Ti.Http.get(i.urls.checkOrder,{params:{ticket:a.auth.ticket,id:t},as:"json"});case 6:if(!(r=n.sent).ok){n.next=11;break}return n.abrupt("return",r.data);case 11:console.warn("Fail to checkOrder",{items:items,reo:r});case 12:case"end":return n.stop()}},n)}))()},loadBuyItems:function(e,t){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.getters,a=e.commit,r=t.items,o=void 0===r?[]:r,s=t.commitDataKey,c=void 0===s?"goods":s,l=t.commitTarget,u=void 0===l?"page/updateData":l,console.log("loadBuyItems",o),d=[],m={},_.forEach(o,function(e){var t=/^(\d+):(.+)$/.exec(e);if(t){var n=1*t[1],i=t[2];i&&n>0&&(d.push("id:".concat(i)),m[i]=n)}}),!_.isEmpty(d)){n.next=8;break}return n.abrupt("return");case 8:return n.next=10,Ti.Http.get(i.urls.objs,{params:{phs:d.join(" ")},as:"json"});case 10:(h=n.sent).ok?(p=[],_.forEach(h.data,function(e){var t=e.id,n=m[t];p.push({id:t,amount:n,obj:e})}),a(u,{key:c,value:p},{root:!0})):console.warn("Fail to loadBuyItems",{items:o,reo:h});case 12:case"end":return n.stop()}},n)}))()},checkoutItems:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.dispatch,a=t.length>1&&void 0!==t[1]?t[1]:{},r=a.items,o=void 0===r?[]:r,s=a.checkoutPage,c=void 0===s?"page/shop/checkout.html":s,l=a.newtab,u=void 0!==l&&l,d=a.orderType,m=void 0===d?"A":d,h=a.orderTitle,p=[],_.forEach(o,function(e){e.id&&e.amount>0&&p.push(_.pick(e,"id","amount"))}),_.isEmpty(o)){n.next=9;break}return n.next=7,i("checkout",{items:o,checkoutPage:c,newtab:u,orderType:m,orderTitle:h});case 7:n.next=10;break;case 9:console.warn("!checkoutItems: Empty Item List!");case 10:case"end":return n.stop()}},n)}))()},checkoutBasket:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.state,a=e.dispatch,r=t.length>1&&void 0!==t[1]?t[1]:{},o=r.checkedNames,s=void 0===o?{}:o,c=r.checkoutPage,l=void 0===c?"page/shop/checkout.html":c,u=r.newtab,d=void 0!==u&&u,m=[],_.forEach(i.basket,function(e){e.name&&e.count>0&&(!s||s[e.name])&&m.push({id:e.name,amount:e.count})}),!_.isEmpty(m)){n.next=7;break}return Ti.Toast.Open("i18n:buy-checkout-nil","warn"),n.abrupt("return");case 7:if(_.isEmpty(m)){n.next=12;break}return n.next=10,a("checkout",{items:m,checkoutPage:l,newtab:d});case 10:n.next=13;break;case 12:console.warn("!checkoutBasket: Empty Basket");case 13:case"end":return n.stop()}},n)}))()},checkout:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.dispatch,a=e.rootGetters,r=t.length>1&&void 0!==t[1]?t[1]:{},o=r.items,s=void 0===o?[]:o,c=r.checkoutPage,l=void 0===c?"page/shop/checkout.html":c,u=r.newtab,d=void 0!==u&&u,m=r.orderType,h=void 0===m?"A":m,p=r.orderTitle,f=[],_.forEach(s,function(e){e.id&&e.amount>0&&f.push("".concat(e.amount,":").concat(e.id))}),!_.isEmpty(f)){n.next=7;break}return console.warn("!checkout: Empty Item"),n.abrupt("return");case 7:if(y={its:f.join(","),tp:h,ot:p},!d){n.next=14;break}return g=a.getUrl(l),n.next=12,i("openUrl",{url:g,target:"_blank",params:y},{root:!0});case 12:n.next=16;break;case 14:return n.next=16,i("navTo",{value:l,params:y},{root:!0});case 16:case"end":return n.stop()}},n)}))()},updateBasket:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g,v;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.commit,a=e.dispatch,r=e.getters,o=e.rootState,s=t.length>1&&void 0!==t[1]?t[1]:{},c=s.id,l=s.n,u=void 0===l?1:l,d=s.reset,m=void 0!==d&&d,h=s.success,p=s.fail,f=s.invalid,y=s.noTicket,console.log("shop:addToBasket",{id:c,success:h,fail:p}),0!==u||m){n.next=5;break}return n.abrupt("return");case 5:if(g=o.auth.ticket){n.next=15;break}if(!y){n.next=13;break}return n.next=10,a(y.action,y.payload,{root:!0});case 10:return n.abrupt("return",n.sent);case 13:return Ti.Alert("Without Session Ticket!!!"),n.abrupt("return");case 15:if(c){n.next=24;break}if(!f){n.next=22;break}return n.next=19,a(f.action,f.payload,{root:!0});case 19:return n.abrupt("return",n.sent);case 22:return Ti.Alert("Without Product ID!!!"),n.abrupt("return");case 24:if(!(m&&u<=0)){n.next=29;break}return n.next=27,Ti.Confirm("i18n:shop-basket-remove-confirm");case 27:if(n.sent){n.next=29;break}return n.abrupt("return");case 29:return i("setLoading",!0,{root:!0}),n.next=32,Ti.Http.get(r.urls.buyIt,{params:{ticket:g,id:c,n:u,r:m},as:"json"});case 32:if(!(v=n.sent).ok){n.next=40;break}if(i("setBasket",v.data),!h){n.next=38;break}return n.next=38,a(h.action,h.payload,{root:!0});case 38:n.next=46;break;case 40:if(!p){n.next=45;break}return n.next=43,a(p.action,p.payload,{root:!0});case 43:n.next=46;break;case 45:console.warn("shop.updateBasket fail:",v);case 46:i("setLoading",!1,{root:!0});case 47:case"end":return n.stop()}},n)}))()},cleanBasket:function(e){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.commit,i=e.getters,a=e.rootState,console.log("shop:cleanBasket"),r=a.auth.ticket){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,Ti.Confirm("i18n:shop-basket-clean-confirm");case 7:if(t.sent){t.next=9;break}return t.abrupt("return");case 9:return n("setLoading",!0,{root:!0}),t.next=12,Ti.Http.get(i.urls.buyClean,{params:{ticket:r},as:"json"});case 12:o=t.sent,n("setLoading",!1,{root:!0}),o.ok?n("setBasket",[]):console.error("www/shop module: Fail to reloadBasket",o);case 15:case"end":return t.stop()}},t)}))()},reloadBasket:function(e){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.commit,i=e.getters,a=e.rootState,r=a.auth.ticket){t.next=4;break}return t.abrupt("return");case 4:return n("setLoading",!0,{root:!0}),t.next=7,Ti.Http.get(i.urls.buyGetAll,{params:{ticket:r},as:"json"});case 7:o=t.sent,n("setLoading",!1,{root:!0}),o.ok?n("setBasket",o.data):console.error("www/shop module: Fail to reloadBasket",o);case 10:case"end":return t.stop()}},t)}))()}}};Ti.Preload("ti/lib/www/mod/shop/www-mod-shop.mjs",e)}(),Ti.Preload("ti/lib/www/mod/shop/_mod.json",{name:"www-mod-shop",namespaced:!0,state:"./www-mod-shop.json",mixins:"./www-mod-shop.mjs"}),function(){var e={getters:{routerList:function(e){var t=[];return _.forEach(e.router,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.match,i=e.names,a=void 0===i?[]:i,r=e.page,o=void 0===r?{}:r,s=new RegExp(n);t.push(function(e){var t=s.exec(e);if(t){for(var n={},i=0;i<t.length;i++){var r=t[i];n[i]=r;var c=_.nth(a,i);c&&_.set(n,c,r)}return Ti.Util.explainObj(n,o)}})}),t},actions:function(e){var t=_.cloneDeep(e.actions);t=_.mapValues(t,function(e){return _.isString(e)?{action:e}:e});var n=e.page;return n&&_.forEach(n.actions,function(e,n){var i=e;_.isString(e)&&(i={action:e});var a=t[n];if(_.isArray(a))if(_.isArray(i)){if(i.length>0)if("+"==i[0])for(var r=1;r<i.length;r++)a.push(i[r]);else t[n]=i}else a.push(i);else t[n]=i}),t},getUrl:function(e){return function(t){return Ti.Util.appendPath(e.base,t)}},getApiUrl:function(e){return function(t){return t.startsWith("/")?t:Ti.Util.appendPath(e.apiBase,t)}}},mutations:{setSiteId:function(e,t){e.siteId=t},setDomain:function(e,t){e.domain=t,e.base=Ti.S.renderBy(e.base||"/www/${domain}/",{domain:t}),e.apiBase=Ti.S.renderBy(e.apiBase||"/api/${domain}/",{domain:t})},setLoading:function(e,t){e.loading=t}},actions:{navBackward:function(){window.history&&window.history.back()},openUrl:function(e,t){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.state,a=t.url,r=t.target,o=void 0===r?"_self":r,s=t.method,c=void 0===s?"GET":s,l=t.params,u=void 0===l?{}:l,d=t.delay,m=void 0===d?0:d,n.next=4,Ti.Be.Open(a,{target:o,method:c,params:u,delay:m});case 4:case"end":return n.stop()}},n)}))()},navTo:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.commit,a=e.dispatch,r=t.length>1&&void 0!==t[1]?t[1]:{},o=r.type,s=void 0===o?"page":o,c=r.value,l=r.anchor,u=r.data,d=r.params,c){n.next=4;break}return n.abrupt("return");case 4:if("page"!=s){n.next=15;break}return i("setLoading",!0),m=Ti.Util.parseHref(c),m.anchor=l||m.anchor,m.params=d||m.params,m.data=u,n.next=12,a("page/reload",m);case 12:i("setLoading",!1),n.next=18;break;case 15:if("dispatch"!=s){n.next=18;break}return n.next=18,a(c,d);case 18:case"end":return n.stop()}},n)}))()},doAction:function(e,t){return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.state,a=e.dispatch,t){n.next=3;break}return n.abrupt("return");case 3:if(!_.isFunction(t)){n.next=7;break}return n.next=6,t();case 6:return n.abrupt("return",n.sent);case 7:if(_.isArray(t)&&2==t.length)if(r=t[0],o=t[1],_.isUndefined(o)||_.isArray(o)||(o=[o]),_.isFunction(r))t={action:r,args:o};else if(_.isArray(r)){t=[],s=_createForOfIteratorHelper(r);try{for(s.s();!(c=s.n()).done;)l=c.value,t.push(_.assign({},l,{args:o}))}catch(e){s.e(e)}finally{s.f()}}else t=_.assign({},r,{args:o});if(_.isString(t)&&(t={action:t}),!_.isArray(t)){n.next=29;break}u=_createForOfIteratorHelper(t),n.prev=11,u.s();case 13:if((d=u.n()).done){n.next=19;break}return m=d.value,n.next=17,a("runAction",m);case 17:n.next=13;break;case 19:n.next=24;break;case 21:n.prev=21,n.t0=n.catch(11),u.e(n.t0);case 24:return n.prev=24,u.f(),n.finish(24);case 27:n.next=31;break;case 29:return n.next=31,a("runAction",t);case 31:case"end":return n.stop()}},n,null,[[11,21,24,27]])}))()},runAction:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.state,a=e.dispatch,r=t.length>1&&void 0!==t[1]?t[1]:{},o=r.action,s=r.payload,c=r.args,o){n.next=4;break}return n.abrupt("return");case 4:if(c=c||[],_.isUndefined(s)||_.isNull(s)?l=_.cloneDeep(_.nth(c,0)):(u=_.assign({},i,{$args:c}),l=Ti.Util.explainObj(u,s,{evalFunc:!1})),!_.isFunction(o)){n.next=11;break}return n.next=9,o(l);case 9:n.next=13;break;case 11:return n.next=13,a(o,l);case 13:case"end":return n.stop()}},n)}))()},invokeAction:function(e){var t=arguments;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a,r,o,s,c,l,u,d,m,h,p,f,y,g,v,b;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.getters,a=e.dispatch,r=t.length>1&&void 0!==t[1]?t[1]:{},o=r.name,s=void 0===o?"":o,c=r.args,l=void 0===c?[]:c,u=i.actions,d=_.get(u,s)){n.next=15;break}m=_.split(s,"::");case 6:if(!(m.length>1)){n.next=15;break}if(h=m,p=_toArray(h),f=p.slice(1),y=f.join("::"),!(d=_.get(u,y))){n.next=12;break}return n.abrupt("break",15);case 12:m=f,n.next=6;break;case 15:if(d){n.next=17;break}return n.abrupt("return");case 17:if(n.prev=17,!_.isArray(d)){n.next=38;break}g=_createForOfIteratorHelper(d),n.prev=20,g.s();case 22:if((v=g.n()).done){n.next=28;break}return b=v.value,n.next=26,a("doAction",{action:b.action,payload:b.payload,args:l});case 26:n.next=22;break;case 28:n.next=33;break;case 30:n.prev=30,n.t0=n.catch(20),g.e(n.t0);case 33:return n.prev=33,g.f(),n.finish(33);case 36:n.next=45;break;case 38:if(!_.isString(d)){n.next=43;break}return n.next=41,a("doAction",{action:d,args:l});case 41:n.next=45;break;case 43:return n.next=45,a("doAction",{action:d.action,payload:d.payload,args:l});case 45:n.next=50;break;case 47:n.prev=47,n.t1=n.catch(17),console.error(n.t1);case 50:case"end":return n.stop()}},n,null,[[17,47],[20,30,33,36]])}))()},reload:function(e){return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,i=e.commit,a=e.dispatch,r=Ti.Util.parseHref(window.location.href),i("auth/mergePaths",n.authPaths),o=n.entry,r.path.startsWith(n.base)&&(o=r.path.substring(n.base.length)||o),t.next=7,a("navTo",{type:"page",value:o,params:r.params,anchor:r.hash,pushHistory:!1});case 7:case"end":return t.stop()}},t)}))()}}};Ti.Preload("ti/lib/www/mod/www-mod-site.mjs",e)}(),Ti.Preload("/a/load/wn.manager/gui/layout.json",{desktop:{type:"rows",border:!0,blocks:[{name:"sky",size:48,type:"rows",border:!0,blocks:[{type:"cols",blocks:[{name:"logo",size:"auto",body:"pcSkyLogo"},{name:"title",size:"stretch",body:"pcSkyTitle"},{name:"session",size:"auto",body:"pcSkySession"},{name:"menu",size:"auto",body:"pcSkyMenu"}]}]},{name:"main",size:"100px",flex:"both",type:"cols",border:!0,blocks:[{name:"sidebar",size:"1.8rem",body:"pcMainSideBar"},{name:"arena",size:"stretch",body:"pcMainArena"}]},{name:"footer",size:".32rem",body:"pcFooter"}]},tablet:"desktop",phone:"desktop"}),Ti.Preload("/a/load/wn.manager/gui/schema.json",{pcSkyLogo:{comType:"ti-icon",comConf:{width:"3em",fontSize:"1.5em",value:"=Logo"}},pcSkyTitle:{comType:"ti-crumb",comConf:"=Crumb"},pcSkySession:{comType:"wn-session-badge",comConf:"=SessionBadge"},pcSkyMenu:{comType:"ti-actionbar",comConf:"=ActionMenu"},pcMainSideBar:{comType:"wn-gui-side-nav",comConf:{items:"=sidebar",highlightItemId:"=MetaId",highlightItemPath:"=MetaPath"}},pcMainArena:{comType:"=comType",comConf:"=Arena"},pcFooter:{comType:"wn-gui-footer",comConf:"=Footer"}}),Ti.Preload("/a/load/wn.manager/gui/setup.json",{shown:{desktop:{logo:"==theLogo",menu:"==theMenu",sessionBadge:"==theSessionBadge"},tablet:{},phone:{}},canLoading:!0,loadingAs:!1,firstCrumbIndex:1,logo:"<:home>"}),function(){var e={Logo:function(){if("<:home>"==this.setup.logo){var e=_.nth(this.CrumbData,0);return e?e.icon:null}return this.setup.logo},CrumbData:function(){var e=this;return Wn.Obj.evalCrumbData({meta:this.meta,ancestors:this.ancestors,fromIndex:this.setup.firstCrumbIndex,homePath:this.setup.skyHomePath,self:function(t){t.asterisk=e.isChanged}})},Crumb:function(){var e=_.cloneDeep(this.CrumbData);return this.Logo&&!_.isEmpty(e)&&(e[0].icon=null),{data:e}},SessionBadge:function(){var e=_.get(this.session,"me");if(e)return{me:e,avatarKey:"thumb",avatarSrc:null,loginIcon:1==e.sex?"im-user-male":"im-user-female",nameKeys:"nickname|nm"}},ActionMenu:function(){if(_.isArray(this.actions)&&!_.isEmpty(this.actions))return{className:"wn-".concat(this.viewportMode,"-menu"),items:this.actions,status:this.TheStatus,delay:500}},Arena:function(){if(this.hasView){var e=Ti.App(this),t=Ti.Util.explainObj(this,this.comConf)||{meta:this.meta,content:this.content,data:this.data,status:this.status};return t.onInit=function(){e.$vmMain(this)},t}},Footer:function(){return{infoIcon:this.comIcon,infoText:this.comType,message:this.myMessage||this.StatusText,indicator:this.myIndicator}}};Ti.Preload("/a/load/wn.manager/wn-manager-computed.mjs",e)}(),function(){var e={reloadMain:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n,i,a,r,o,s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.meta){t.next=5;break}return t.next=4,Ti.Toast.Open("i18n:wn-manager-no-meta","warn");case 4:return t.abrupt("return",t.sent);case 5:if(!e.isLoading){t.next=10;break}return console.log("!!!"),t.next=9,Ti.Toast.Open("i18n:wn-manager-is-loading","warn");case 9:return t.abrupt("return",t.sent);case 10:if(e.loading=!0,e.comType="ti-loading",e.comConf={},t.prev=13,e.view&&e.view.modType)try{e.$store.unregisterModule("main")}catch(e){console.error("Error when unregisterModule",e)}return i=/^#!(.+)$/.exec(window.location.hash),a=i?i[1]:null,r=a?"ti views -cqn -name '".concat(a,"'"):"ti views -cqn id:".concat(n.id),t.next=20,Wn.Sys.exec2(r,{as:"json"});case 20:return o=t.sent,s=Ti.App(e),t.next=24,s.loadView(o);case 24:if(c=t.sent,Ti.IsInfo("app/wn.manager")&&console.log("TiView Loaded:",c),!c||!c.modType){t.next=30;break}return e.$store.registerModule("main",c.mod),t.next=30,s.dispatch("main/reload",n);case 30:e.comType=c.comName,e.comIcon=c.comIcon,e.comConf=c.comConf,e.view=c,e.myMessage=null,e.myIndicator=null,e.OnUpdateActions(c.actions);case 37:return t.prev=37,e.loading=!1,t.finish(37);case 40:case"end":return t.stop()}},t,null,[[13,,37,40]])}))()},reloadAncestors:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.hasMeta){t.next=5;break}return t.next=3,Wn.Io.loadAncestors("id:"+e.MetaId);case 3:e.ancestors=t.sent,e.parent=_.last(e.ancestors);case 5:case"end":return t.stop()}},t)}))()},reloadSidebar:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Wn.Sys.exec("ti sidebar -cqn",{as:"json"});case 2:n=t.sent,e.sidebar=n.sidebar;case 4:case"end":return t.stop()}},t)}))()},pushHistory:function(e){var t=window.history;if(t&&e){if(t.state&&t.state.id==e.id)return;var n=Wn.Util.getAppLink(e.id),i=Wn.Util.getObjDisplayName(e);Ti.IsInfo("app/wn-manager")&&console.log(i,"->",n),t.pushState(e,i,n),document.title=Ti.I18n.text(i)}}};Ti.Preload("/a/load/wn.manager/wn-manager-methods.mjs",e)}(),Ti.Preload("/a/load/wn.manager/wn-manager.html",'<ti-gui\n  class="wn-manager"\n  :class="TopClass"\n  :layout="GuiLayout"\n  :schema="GuiSchema"\n  :shown="GuiShown"\n  :can-loading="GuiCanLoading"\n  :loading-as="GuiLoadingAs"\n  @arena::expose-hidden="OnExposeHidden"\n  @do:logout="OnLogout"\n  @item:active="OnCurrentMetaChange"\n  @arena::open="OnCurrentMetaChange"\n  @arena::change="OnCurrentDataChange"\n  @arena::actions:update="OnUpdateActions"\n  @arena::indicate="OnArenaIndicate"\n  @arena::message="OnArenaMessage"/>'),function(){var e={provide:function(){return{$session:{ticket:this.session.ticket,userId:this.session.uid,userName:this.session.unm,group:this.session.grp},$vars:this.vars}},data:function(){return{myExposeHidden:!1,loading:!1,comIcon:"zmdi-hourglass-alt",comType:"ti-loading",comConf:{},actions:[],sidebar:[],ancestors:[],parent:null,view:null,myMessage:null,myIndicator:null}},computed:{TopClass:function(){return this.getTopClass({"is-current-as-home":this.CurrentIsHome,"is-current-no-home":!this.CurrentIsHome},this.appClassName)},isLoading:function(){return this.loading||this.isReloading},isChanged:function(){var e=this.$store.state.main;return!!_.get(e,"status.changed")||_.get(this.status,"changed")},isSaving:function(){return _.get(this.status,"saving")},isReloading:function(){return _.get(this.status,"reloading")},hasActions:function(){return!_.isEmpty(this.actions)},hasView:function(){return!!this.view},hasMeta:function(){return!!this.meta},hasParent:function(){return!!this.parent},MetaId:function(){return _.get(this.meta,"id")},MetaPath:function(){return _.get(this.meta,"ph")},MyHome:function(){var e=this.meta,t=this.ancestors;if(_.isEmpty(t)){if(e&&"root"==e.nm)return e}else{if(1==t.length&&"home"==t[0].nm)return e;if("home"==t[0].nm)return t[1]}return null},MyHomeId:function(){return _.get(this.MyHome,"id")},ParentIsHome:function(){return this.hasParent&&this.parent.id==this.MyHomeId},CurrentIsHome:function(){return this.hasMeta&&this.MetaId==this.MyHomeId},TheStatus:function(){var e=_.get(this.$store.state,"main.status"),t=_.get(e,"reloading")||this.status.reloading;return _.assign({},e,this.status,{exposeHidden:this.myExposeHidden,changed:this.isChanged,reloading:t})},StatusText:function(){var e=_.assign({},this.status);return e.saving?Ti.I18n.text("i18n:saving"):e.reloading?Ti.I18n.text("i18n:loading"):void 0},Main:function(){return this.$store.state.main},GuiShown:function(){var e=_.get(this.setup,"shown");if(_.isPlainObject(e)){var t=e[this.viewportMode];return _.isString(t)&&(t=e[t]),_.isString(t)&&(t=e[t]),Ti.Util.explainObj(this,t)}return{}},GuiCanLoading:function(){return _.get(this.setup,"canLoading")},GuiLoadingAs:function(){return _.get(this.setup,"loadingAs")},GuiLayout:function(){return Ti.Util.explainObj(this,this.layout)},GuiSchema:function(){return Ti.Util.explainObj(this,this.schema)}},methods:{OnExposeHidden:function(e){this.myExposeHidden=e},OnLogout:function(){this.doLogout()},OnCurrentMetaChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.path,i=e.value;this.openView(t||n||i)},OnCurrentDataChange:function(e){Ti.App(this).dispatch("current/changeContent",e)},OnUpdateActions:function(e){this.actions=_.cloneDeep(e),Ti.App(this).reWatchShortcut(e)},OnArenaIndicate:function(e){this.myIndicator=e},OnArenaMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.myMessage=e},doCheckDomainObjThumb:function(){var e=Wn.Session.getMyGroup(),t='hookx @query \'d0:"home",d1:"'.concat(e,'",thumb_src:null,mime:"^image"\' @invoke write -v');Wn.OpenCmdPanel(t)},openView:function(e){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function n(){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(_.isString(e)){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,Ti.Fuse.fire();case 4:if(i=n.sent){n.next=7;break}return n.abrupt("return");case 7:return a=Wn.Io.isFullObjId(e)?"id:".concat(e):e,n.next=10,Ti.App(t).dispatch("current/reload",a);case 10:case"end":return n.stop()}},n)}))()},doLogout:function(){return _asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Wn.Session.env("QUIT")||"/a/login/",e.next=3,Ti.Http.get("/a/sys_logout",{params:{ajax:!0}});case 3:n=e.sent,console.log(n),Ti.Be.Open(t,{target:"_self",delay:0});case 6:case"end":return e.stop()}},e)}))()}},watch:{meta:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){var i,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=_.get(t,"id"),a=_.get(n,"id"),r=_.isEqual(i,a),!t){e.next=11;break}if(r){e.next=7;break}return e.next=7,this.reloadAncestors();case 7:if(r&&!this.isChanged){e.next=11;break}return e.next=10,this.reloadMain();case 10:this.pushHistory(t);case 11:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},mounted:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reloadSidebar();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),beforeDestroy:function(){}};Ti.Preload("/a/load/wn.manager/wn-manager.mjs",e)}(),Ti.Preload("ti/i18n/en-us/hmaker.i18n.json",{"com-form":"","com-label":"","com-list":"","hm-type-Array":"","hm-type-Boolean":"","hm-type-Group":"","hm-type-Integer":"","hm-type-Number":"","hm-type-Object":"","hm-type-String":"","hm-type-icons":{Array:"Zmdi-format-list-bulleted",Boolean:"Zmdi-toll",Group:"Zmdi-collection-bookmark",Integer:"Zmdi-n-6-square",Number:"Zmdi-input-svideo",Object:"Zmdi-toys",String:"Zmdi-translate"},"hmaker-com-conf-blank":"","hmaker-com-type-blank":"","hmaker-edit-form-del-group-all":"","hmaker-edit-form-del-group-confirm":"","hmaker-edit-form-del-group-only":"","hmaker-edit-form-field-nil":"","hmaker-edit-form-new-field":"","hmaker-edit-form-new-field-e0":"","hmaker-edit-form-new-field-e1":"${val}","hmaker-edit-form-new-field-tip":"","hmaker-edit-form-new-group":"","hmaker-edit-form-new-group-tip":"","hmaker-edit-form-nil-field":"","hmaker-edit-form-not-current":"","hmaker-layout-cols":"","hmaker-layout-rows":"","hmaker-layout-tabs":"","hmaker-nav-blank-item":"","hmaker-nav-k-display":"","hmaker-nav-k-icon":"","hmaker-nav-k-title":"","hmaker-nav-k-type":"","hmaker-nav-k-value":"","hmaker-nav-tp-dispatch":"","hmaker-nav-tp-href":"","hmaker-nav-tp-page":"","hmaker-site-k-apiBase":"","hmaker-site-k-base":"","hmaker-site-k-captcha":"","hmaker-site-k-domain":"","hmaker-site-k-entry":"","hmaker-site-prop":"","hmaker-site-state":"","hmaker-site-state-actions":"","hmaker-site-state-apis":"","hmaker-site-state-blocks":"","hmaker-site-state-general":"","hmaker-site-state-nav":"","hmaker-site-state-router":"","hmaker-site-state-schema":"","hmaker-site-state-utils":"","hmaker-site-tree":"","hmaker-site-tree-loading":"...","hmk-adjustDelay":"","hmk-aspect":"","hmk-autoI18n":"","hmk-behavior":"","hmk-blankAs":"","hmk-breakLine":"","hmk-currentTab":"","hmk-data":"","hmk-dict":"","hmk-editable":"","hmk-field-checkEquals":"","hmk-field-com":"","hmk-field-defaultAs":"","hmk-field-disabled":"","hmk-field-height":"","hmk-field-hidden":"","hmk-field-icon":"","hmk-field-name":"","hmk-field-serializer":"","hmk-field-tip":"","hmk-field-title":"","hmk-field-transformer":"","hmk-field-type":"","hmk-field-width":"","hmk-fieldStatus":"","hmk-fields":"","hmk-fields-advance":"","hmk-fields-general":"","hmk-form-data":"","hmk-form-height":"","hmk-form-onlyFields":"","hmk-form-width":"","hmk-format":"","hmk-height":"","hmk-href":"","hmk-icon":"","hmk-measure":"","hmk-mode":"","hmk-mode-all":"","hmk-mode-tab":"","hmk-newTab":"","hmk-placeholder":"","hmk-prefixIcon":"","hmk-prefixText":"","hmk-spacing":"","hmk-spacing-comfy":"","hmk-spacing-tiny":"","hmk-suffixIcon":"","hmk-suffixText":"","hmk-tabAt":"","hmk-tabAt-bottom-center":"","hmk-tabAt-bottom-left":"","hmk-tabAt-bottom-right":"","hmk-tabAt-top-center":"","hmk-tabAt-top-left":"","hmk-tabAt-top-right":"","hmk-title":"","hmk-trimed":"","hmk-value":"","hmk-valueMaxWidth":"","hmk-width":""}),Ti.Preload("ti/i18n/en-us/ti-datetime.i18n.json",{Apr:"April",Aug:"August",Dec:"December",Feb:"February",Fri:"Fri",Friday:"Friday",Jan:"January",Jul:"July",Jun:"June",Mar:"March",May:"May",Mon:"Mon",Monday:"Monday",Nov:"November",Oct:"October",Sat:"Sat",Saturday:"Saturday",Sep:"September",Sun:"Sun",Sunday:"Sunday",Thu:"Thu",Thursday:"Thursday",Tue:"Tue",Tuesday:"Tuesday",Wed:"Wed",Wednesday:"Wednesday","blank-date":"Select a date","blank-date-range":"Select a date range","blank-datetime":"Select datetime","blank-month":"Select month","blank-time":"Select time","blank-time-range":"Select a time range",cal:{abbr:{Apr:"Apr",Aug:"Aug",Dec:"Dec",Feb:"Feb",Jan:"Jan",Jul:"Jul",Jun:"Jun",Mar:"Mar",May:"May",Nov:"Nov",Oct:"Oct",Sep:"Sep"},"d-range-beyond-days":"${yy0}-${MM0}-${dd0} to ${dd1}","d-range-beyond-months":"${yy0}-${MM0}-${dd0} to ${MM1}-${dd1}","d-range-beyond-years":"${yy0}-${MM0}-${dd0} to ${yy1}-${MM1}-${dd1}","d-range-in-same-day":"${yy0}-${MM0}-${dd0} whole day","m-range-beyond-months":"${yy0}-${MT0} to ${MT1}","m-range-beyond-years":"${yy0}-${MT0} to ${yy1}-${MT1}",week:["S","M","T","W","T","F","S"]},"du-in-min":"${n}Min",time:{"any-time":"yyyy-M-d","in-year":"M-dd","past-in-min":"Just now","past-in-hour":"In ${min}mins","past-in-day":"In ${hour}hours","past-in-week":"In ${day}days","future-in-min":"Soon","future-in-hour":"After ${min}mins","future-in-day":"After ${hour}hours","future-in-week":"After ${day}days"},"time-begin":"Begin Time","time-end":"End Time",today:"Today"}),Ti.Preload("ti/i18n/en-us/ti-text-editor.i18n.json",{"wordp-h0":"Main","wordp-h1":"Heading 1","wordp-h2":"Heading 2","wordp-h3":"Heading 3","wordp-h4":"Heading 4","wordp-h5":"Heading 5","wordp-h6":"Heading 6","wordp-heading":"Heading levels","wordp-link":"Hyperlink","wordp-nil-sel":"Please select a paragraph first"}),Ti.Preload("ti/i18n/en-us/ti-text-json.i18n.json",{"json-Array":"Array","json-Boolean":"Boolean","json-Float":"Decimal","json-Integer":"Integer","json-Nil":"Nil","json-Number":"Number","json-Object":"Object","json-String":"String","json-new-key":"Enter a new key"}),Ti.Preload("ti/i18n/en-us/web.i18n.json",{account:"Account","account-flt-tip":"Filter by account name","account-manage":"Accounts","account-meta":"Account properties","account-meta-tip":"Choose an account for detail","address-consignee":"Consignee","address-empty-list":"No shipping address","address-flt-tip":"Filter by address name","address-is-dft":"Default shipping address","address-k-area":"Area","address-k-city":"City","address-k-code":"Addr code","address-k-code-tip":"Your postcode","address-k-consignee":"Consignee","address-k-country":"Country","address-k-dftaddr":"Default address","address-k-door":"Door","address-k-email":"Email","address-k-phone":"Phone","address-k-postcode":"Postcode","address-k-province":"Province","address-k-street":"Street","address-k-title":"Address","address-k-tp":"Addr Type","address-k-tp-s":"SELLER","address-k-tp-u":"USER","address-k-uid":"User","address-k-uid-tip":"Filter by username","address-meta":"Address properties","address-nil":"Address blank","address-nil-detail":"Select an address for details","address-rm-confirm":"Are you sure you want to delete this address?","address-set-dft":"Set as default address","address-shipping-add":"Add shipping address","admin-flt-tip":"Filter by admin name","admin-meta":"Admin properties","admin-new":"New admin","admin-nickname":"Admin nickname","admin-no-detail":"Select an admin for detail","ar-cate":"Catetory","ar-content":"Content","ar-flt-tip":"Filter by article title","ar-meta":"Article property","ar-new":"New article","ar-title":"Title","auth-bind":"Bind","auth-bind-email-title":"Bind email","auth-bind-phone-title":"Bind phone","auth-blank-email":"Blank email address not allowed","auth-blank-name":"Blank name not allowed","auth-blank-name-passwd":"Blank name or password","auth-blank-phone":"Blank phone number not allowd","auth-doing":"Verifying","auth-email-tip":"Email address","auth-email-title":"Sign by email","auth-email-vcode":"Email password","auth-email-vcode-get":"Get email password","auth-go-email":"Sign by email","auth-go-passwd":"Sign in by password","auth-go-phone":"Sign by sms","auth-login":"Sign in","auth-login-NoSaltedPasswd":"Please switch to sign by [${ta?password}]after sign in, go to [profile > reset password] to setup your password, thanks.","auth-login-or-signup":"Sign up or sign in","auth-logout-confirm":"Are you sure you want to log out?","auth-ok":"Verify successful","auth-passwd-getback":"Retrieve password","auth-passwd-name-email-tip":"Email/Name","auth-passwd-name-phone-tip":"Phone/Name","auth-passwd-tip":"Password","auth-passwd-title":"Sign in by password","auth-phone-tip":"Phone number","auth-phone-title":"Sign by sms","auth-phone-vcode":"SMS password","auth-phone-vcode-get":"Get sms password","auth-reset-passwd":"Reset password ...","auth-reset-passwd-again":"Reset password again","auth-reset-passwd-btn-lack":"Lack information","auth-reset-passwd-btn-ready":"Reset password","auth-reset-passwd-btn-short":"Password too short (at least 6 chars)","auth-reset-passwd-btn-unmatch":"The password is not consistent","auth-reset-passwd-by-email":"Reset password by email","auth-reset-passwd-by-email-sent":"The email password has been sent to your registered email address ${email}","auth-reset-passwd-by-email-tip":"Registered email address","auth-reset-passwd-by-passwd":"Reset by old password","auth-reset-passwd-by-phone":"Reset by sms","auth-reset-passwd-by-phone-sent":"The sms password has been sent to your mobile phone ${phone}","auth-reset-passwd-by-phone-tip":"Registered phone number","auth-reset-passwd-ing":"Reseting password ...","auth-reset-passwd-lack-email":"Please enter your registered email address","auth-reset-passwd-lack-phone":"Please enter your registered mobile phone number","auth-reset-passwd-new":"New password (at least 6 chars)","auth-reset-passwd-ok":"The password has been reset and will take effect the next time you log in","auth-reset-passwd-old":"Old password","auth-reset-passwd-ren":"Reconfirm","auth-sending-vcode":"Sending verification code","auth-sent-ok":"${ta?Password} has been sent, please check in ${by} in ${min} minutes","auth-ta-by-email":"Your email","auth-ta-by-phone":"Your sms","auth-ta-email":"Email password","auth-ta-phone":"SMS password","auth-vcode-delay":"Resend after ${sec}s","auth-vcode-lost":"Can't get password?","base-info":"Base info","buy-checkout-nil":"You have nothing to checkout",cate:"Category","cate-flt-tip":"Filter by category name","cate-maj":"Major category","cate-meta":"Category properties","cate-new":"New category","cate-nil-tip":"Select a category","cate-no-detail":"Select a category for details","cate-pa":"Parent category","cate-pa-nil":"Select a parent category","cate-sub":"Child category","cate-sub-nil":"Select a child category","cate-val":"Category value","cmt-brief":"Comment brief","cmt-content":"Comment content","cmt-flt-tip":"Filter by a user id or comment","cmt-meta":"Comment properties","cmt-no-detail":"Select a role for detail","cmt-target":"Comment target","cmt-type":"Comment type","cmt-user":"Comment account",comments:"COMMENTS",cover:"Cover","cover-pic":"Cover pic","detail-info":"Detail info","dir-media":"Media dir","e-cmd-passwd-old_invalid":"Old Password Invalid","e-cmd-www_passwd-Blank":"Blank new password not allowed","e-cmd-www_passwd-CheckBlankAccount":"Blank account","e-cmd-www_passwd-CheckBlankCode":"Blank code","e-cmd-www_passwd-CheckCodeFail":"Invalid code","e-cmd-www_passwd-CheckFailed":"Verify failed","e-cmd-www_passwd-CheckWeirdAccount":"Weird account","e-cmd-www_passwd-InvalidNewPasswd":"Invalid new password","e-cmd-www_passwd-LackTarget":"Missing target","e-cmd-www_passwd-TooShort":"The new password is too short","e-cmd-www_passwd-nopvg":"No permission to reset passwords","e-www-invalid-captcha":"Invalid ${ta?captcha}","e-www-login-invalid-passwd":"Invalid password","e-www-login-noexists":"Account not exists","e-www-order-OutOfStore":"Goods ${val?} insufficient stock","invoice-k-bankaccount":"Bank account","invoice-k-bankname":"Bank","invoice-k-busiaddr":"Biz address","invoice-k-busiphone":"Biz phone","invoice-k-invdft":"Default title","invoice-k-invtfn":"TFN","invoice-k-invtitle":"Invoice title","invoice-k-type":"Invoice Type","invoice-k-uemail":"Taker email","invoice-k-uid":"Owner account","invoice-k-uid-tip":"Filter by username","invoice-k-uname":"Taker name","invoice-k-uphone":"Taker phone","invoice-kg-bank":"Bank info","invoice-kg-busi":"Biz info","invoice-kg-inv":"Invoice info","invoice-kg-u":"Taker info","k-ct-date":"Create date","k-lm":"Last modifed","me-k-account":"Account","me-k-avatar":"Avatar","me-k-city":"City","me-k-country":"Country","me-k-email":"Email","me-k-login":"Login","me-k-nickname":"Nickname","me-k-nm":"Login name","me-k-phone":"Phone","me-k-role":"Role","me-k-sex":"Gender",mine:"Mine","my-favors":"My favorite","my-favors-blog":"Favorite blog","my-favors-goods":"Favorite goods","my-favors-posts":"Favorite posts","my-favors-spots":"Favorite spots","my-favors-video":"Favorite video","my-orders":"My orders","my-orders-shop":"Shopping orders","my-orders-video":"VOD order","my-passwd":"Reset password","my-profile":"My profile","my-shipping-address":"Shipping address","my-shopping-car":"Shopping car","or-st-dn":"Done","or-st-fa":"Fail to create order","or-st-nw":"New order","or-st-ok":"Pay ok","or-st-sp":"Shipped","or-st-wt":"Wait for pay","ord-detail":"Order detail","order-flt-tip":"Query by order id","order-k-accounts":"Accounts","order-k-addr_ship":"Ship address","order-k-addr_ship_code":"Ship code","order-k-addr_ship_country":"Ship country","order-k-addr_ship_door":"Ship door","order-k-addr_user":"User address","order-k-addr_user_area":"Area","order-k-addr_user_city":"City","order-k-addr_user_code":"User code","order-k-addr_user_country":"User country","order-k-addr_user_door":"User door","order-k-addr_user_province":"Province","order-k-addr_user_street":"Street","order-k-buyer_id":"Buyer","order-k-currency":"Currency","order-k-discount":"Discount","order-k-dn_at":"Done at","order-k-fa_at":"Fail at","order-k-fee":"Payment amount","order-k-freight":"Freight","order-k-freight-m":"Alt Freight","order-k-freight-m-tip":"Enter 0 to waive shipping costs","order-k-id":"Order id","order-k-invoice":"Invoice","order-k-note":"Note","order-k-ok_at":"OK at","order-k-pay_id":"Payment id","order-k-pay_tp":"Pay type","order-k-payment":"Total","order-k-price":"Order price","order-k-pro-amount":"Amount","order-k-pro-price":"Price","order-k-pro-subtotal":"Subtotal","order-k-pro-title":"Title","order-k-products":"Goods","order-k-seller":"Seller","order-k-sp_at":"Shipping at","order-k-st":"Order status","order-k-title":"Order title","order-k-total":"Total","order-k-total-m":"Alt Total","order-k-total-m-tip":"Enter the new total price","order-k-user_email":"User email","order-k-user_name":"User name","order-k-user_phone":"User phone","order-k-waybil":"Waybil","order-k-waybil_com":"Waybil COM","order-k-waybil_nb":"Waybil NB","order-k-wt_at":"Pay at","order-nil-detail":"Please select an order for details","order-pay-id":"Pay ID","order-pay-status":"Payment status","order-shipaddr-nil":"Please specify a shipping address","passwd-invalid-char":"Passwords can only include english numbers/upper and lower case letters/and special characters","passwd-sl-1":"Weak","passwd-sl-2":"Weaker","passwd-sl-3":"Normal","passwd-sl-4":"Stronger","passwd-sl-5":"Strong","passwd-tip":"Please enter a combination of english numerals/upper and lower case letters/special characters with a minimum of 6 characters","pay-by-free":"Free","pay-by-paypal":"PayPal","pay-by-wx-jsapi":"WeChat jsapi","pay-by-wx-qrcode":"WeChat scan code","pay-by-wx-scan":"WeChat payment code","pay-by-zfb-qrcode":"Alipay scan code","pay-by-zfb-scan":"Alipay payment code","pay-checkout-it-amount":"Amount","pay-checkout-it-name":"Name","pay-checkout-it-price":"Price","pay-checkout-it-subtotal":"Subtotal","pay-checkout-tip":"Please confirm the quantity and amount of your purchase","pay-paypal":"PayPal","pay-proceed-check":"Check payment","pay-proceed-ing":"Checking for...","pay-re-fail":"Payment failure","pay-re-nil":"The payoff is a schrodinger's cat","pay-re-ok":"Payment success","pay-re-wait":"Pending payment","pay-step-checkout-title":"Confirm order","pay-step-choose-nil":" please select one of the above payment methods ","pay-step-choose-tip":"You may choose any of the following payment methods to pay for this order","pay-step-choose-tip2":"You will pay for this order using ${val}","pay-step-choose-title":"Mode of payment","pay-step-choose-title2":"Choose payment","pay-step-done-title":"Done","pay-step-proceed-create-order":"Creating order ...","pay-step-proceed-fetch-order":"Getting order ...","pay-step-proceed-nil":"Please choose a method of payment","pay-step-proceed-tip":"Pay for this order with ${val}","pay-step-proceed-title":"Pay","pay-tip-wx-qrcode":"Please pay in wechat scan within 15 minutes","pay-tip-zfb-qrcode":"Please pay by alipay scan code within 15 minutes","pay-title":"Payment","pay-wx":"WeChat","pay-zfb":"Alipay","paypal-amount_value":"Payment Amount","paypal-approve-tip":"Already in the new tab for you to open the paypal payment page, if there is no open, please click on  the icon above. after payment, the page will automatically perceive, if there is no response, try to click  [check payment] button below.","paypal-cap-id":"Capture ID","paypal-cap-status":"Capture status","paypal-currency":"Currency","paypal-id":"PayPal TID","paypal-payer_email":"Payer email","paypal-payer_id":"Payer ID",photo:"Photo","post-content-blank":"The content you post cannot be empty or less than 10 words","profile-title":"My profile",pubat:"Release date","read-du":"Reading spend",role:"Role","role-as-guest":"Guest","role-as-normal":"Normal","role-as-vip":"VIP","role-dft":"Default role","role-flt-tip":"Filter by role name","role-manage":"Roles","role-meta":"Role propery","role-meta-tip":"Choose an role for detail","role-name":"Role name","role-select-tip":"Select role","role-val":"Role value","shop-basket-clean-confirm":"Are you sure you want to empty the shopping cart? this is an operation that cannot be undone.","shop-basket-remove-confirm":"Are you sure you want to remove this item from your shopping cart?",sort:"Sort","sort-tip-asc":"The smaller at first","sort-tip-desc":"The bigger at first","sort-val":"Sort value",topic:"Topic",type:"Type","type-new":"New type","video-title":"Video title",watch_c:"View count","waybil-com-ane":"AN NENG Logistics","waybil-com-best":"BAISHI Express","waybil-com-db":"DE BANG Express","waybil-com-ems":"EMS Logistics","waybil-com-jdl":"JING DONG Logistics","waybil-com-pj":"PIN JUN Express","waybil-com-sf":"SHUN FENG Express","waybil-com-sto":"SHEN TONG Express","waybil-com-uce":"YOU SU Express","waybil-com-yto":"YUAN TONG Express","waybil-com-yunda":"YUN DA Express","waybil-com-zto":"ZHONG TONG Express"}),Ti.Preload("ti/i18n/en-us/wn-manager.i18n.json",{"ti-loading":"Load...","wn-adaptlist":"Object explorer","wn-create-fail":"Fail to create","wn-create-invalid":"Illegal characters in object name","wn-create-ok":"Create ok","wn-create-too-long":"Object name too long","wn-del-item":'Deleting: "${name}"',"wn-del-no-empty-folder":'The directory "${nm}" is not empty, do you want to delete all? click "no" to skip',"wn-del-none":"Please select at least one file to delete!","wn-del-ok":"${N} objects have been removed","wn-download-dir":'Object "${nm}" is a directory, click "continue" to skip it and download the next file, and click "terminate" to end this operation!',"wn-download-none":"Please select at least one file to download!","wn-download-too-many":"We are going to download ${n} files one by one. continue?","wn-expose-hidden-off":"Not show hidden objects","wn-expose-hidden-on":"Show hidden objects","wn-gui":"General gui","wn-obj-preview":"Object preview","wn-obj-puretext":"Plain text editor","wn-obj-single-com":"Single control test suite","wn-publish-done":"Publish success","wn-publish-to-nil":"No publish target is set","wn-publish-to-noexist":"The publish target does not exist","wn-rename":'Rename object "${name}"',"wn-rename-fail":"Rename failed","wn-rename-invalid":"The name cannot contain illegal characters","wn-rename-none":"Please select a file to rename!","wn-rename-ok":"Rename successful","wn-rename-suffix-changed":"Your file suffix name has changed. do you need to complete the original suffix for you automatically?","wn-rename-too-long":"The name is too long","wn-thing-manager":"Data manager","wn-view-opening":"Loading gui..."}),Ti.Preload("ti/i18n/en-us/wn-obj-preview.i18n.json",{"wop-fullscreen-enter":"Enter fullscreen","wop-fullscreen-quit":"Exit fullscreen"}),Ti.Preload("ti/i18n/en-us/wn-thing.i18n.json",{"thing-clean":"Empty the recycle bin","thing-cleaning":"Cleaning...","thing-content":"Object content","thing-content-hide":"Hide content","thing-content-show":"Show content","thing-create":"New object","thing-create-in-recyclebin":"Exit recycle bin before create object","thing-enter-recyclebin":"Enter recyclebin","thing-files":"Object files","thing-files-hide":"Hide files","thing-files-show":"Show files","thing-filter-kwdplhd":"Enter the query criteria","thing-leave-recyclebin":"Leave recyclebin","thing-meta":"Object properties","thing-meta-hide":"Hide properties","thing-meta-show":"Show properties","thing-recycle-bin":"Recycle bin","thing-restore":"Restore","thing-restore-none":"Select the data you want to recover first","thing-restoring":"Restoring..."}),Ti.Preload("ti/i18n/en-us/_net.i18n.json",{"net-ct":"Created","net-flt-nil":"Query by name","net-vod-add-video":"Add video","net-vod-cate":"Category","net-vod-du-long":"Long video","net-vod-du-short":"Short video","net-vod-du-tv":"TV","net-vod-duration":"Duration","net-vod-size":"Video size","net-vod-video-nil":"Please choose one video for detail"}),Ti.Preload("ti/i18n/en-us/_ti.i18n.json",{add:"Add","add-item":"New item",amount:"Amount",attachment:"Attachment",avatar:"Avatar",banner:"Banner","batch-none":"Please choose at least one item for batch updating","batch-update":"Batch update...",blank:"BLANK","blank-to-edit":"Please choose item for editing",brief:"Brief","brief-d":"Brief","brief-i":"Brief",buy:"Buy","buy-now":"Buy now",cancel:"Cancel","cancel-all":"Cancel all",candidate:"Candidations",captcha:"Captcha","captcha-chagne":"Next","captcha-tip":"Please enter the captcha",chart:"Chart","chart-bar":"Bar Chart","chart-line":"Line Chart","chart-pie":"Pie Chart","chart-rank":"Rank Chart",checked:"Checked",choose:"Select","choose-file":"Select file","choose-obj":"Select object",clean:"Clean",clear:"Clear",close:"Close",confirm:"Confirm",console:"Console",content:"Content",continue:"Continue",create:"New","create-now":"Create now",creating:"Creating",date:"Date",debug:"Debug",default:"Default",del:"Delete","del-checked":"Delete selected","del-hard":"The selected item will be deleted directly. this operation is irrevocable. are you sure you want to continue?","del-ing":"Deleting...","del-none":"Please choose at least one item for deleting",desktop:"Desktop",detail:"Detail","dis-name":"Display name",disable:"Disable",disabled:"Disabled",doing:"Processing...",download:"Download","download-to-local":"Download to local","drop-file-here-to-upload":"Drop file here to upload","drop-here":"Drop here","dt-in":"in ${val}","dt-u-day":"Day","dt-u-hour":"Hour","dt-u-min":"Min","dt-u-month":"Month","dt-u-ms":"Milliseconds","dt-u-sec":"Seconds","dt-u-week":"Week","dt-u-year":"Year","e-auth-account-noexists":"Account not exists","e-auth-home-forbidden":"Auth home forbidden","e-auth-login-NoPhoneOrEmail":"Invalid phone number or email address","e-auth-login-NoSaltedPasswd":"Password without salting","e-auth-login-invalid-passwd":"Invalid password","e-io-obj-exists":"Object already exists","e-io-obj-noexists":"Object does't exists","e-io-obj-noexistsf":"Object[${nm}] does't exists",edit:"Edit","edit-com":"Edit control",email:"Email",emoji:"Emoji",empty:"Empty","empty-data":"Empty data",enable:"Enable",enabled:"Enabled",error:"Error","export-data":"Export data...",fail:"Failed",false:"False",favorites:"Favorite",female:"Female",filter:"Filter",find:"Find","find-data":"Find data",gender:"Gender","global-settings":"Global settings","history-record":"History record",home:"HOME","i-known":"I known",icon:"Icon","icon-code-tip":"Please key-in code for icon, such as 'zmdi-case'","import-data":"Import data ...",index:"Index",info:"Information",input:"Input","input-tags":"Input tags",label:"Label",lat:"Latitude","lbs-place-add":"Add place","lbs-ro-rnb-k-first":"Starting number","lbs-ro-rnb-k-type":"Display type","lbs-ro-rnb-k-type-alpha":"Alphabet","lbs-ro-rnb-k-type-capital":"Capital","lbs-ro-rnb-k-type-number":"Number","lbs-ro-rnb-title":"Autosets line label",link:"Link","link-href":"Link target","link-text":"Link text",lng:"Longitude",loading:"Loading...",login:"Sign in","login-name":"Login name",logout:"Sign out","logout-ing":"Log out ...",male:"Male","map-hybrid":"HYBIRD","map-roadmap":"ROADMAP","map-satellite":"SATELLITE","map-terrain":"TERRAIN","map-type":"Map type",me:"Me",media:"Media",meta:"Meta data",mine:"Mine",modal:"Modal",modify:"Modify",more:"More",msg:"Message",name:"Name","new-item":"New item",newsfeed:"Newfeed",next:"Next",nil:"Nil","nil-obj":"Please choose one object",no:"No","no-saved":"You get data need to be saved","no-selected":"None selected","no-title":"No title",obj:"Object",off:"Off",ok:"Ok",on:"On",open:"Open","open-newtab":"Open in new tab",others:"Others","paging-change-pgsz":"Current page contains ${pgsz} records maximumly, you want to change it to","paging-change-pgsz-invalid":"Page size must be integer, and great than 0, but ... -_-!","paging-change-pn":"Current page number is ${pn}, please enter number between 1 to ${pgc}:","paging-change-pn-invalid":"Page number must be integer, and must between 1 to ${pgc}","paging-first":"Head","paging-last":"Tail","paging-next":"Next","paging-prev":"Prev","paging-sum":"Total ${pgc} pages, ${sum} recordscurrent ${count}/${pgsz}",passwd:"Password","passwd-reset":"Reset password",path:"Path",phone:"Phone","phone-nb":"Phone number",post:"Post",prev:"Prev",price:"Price",profile:"Profile","profile-edit":"Edit profile",prompt:"Prompt",properties:"Properties",publish:"Publish",publishing:"Publishing ...",refresh:"Refresh","refresh-hard":"Hard refresh","refresh-hard-clear":"Clean cache & hard refresh",reloading:"Reloading ...",remove:"Remove",removing:"Removing ...",rename:"Rename ...",renaming:"Renameing ...",reset:"Reset","reset-change":"Reset change","reset-data":"Reset data",restore:"Restore",revoke:"Revoke","revoke-change":"Revoke change",run:"Run","run-finished":"Done for running script","run-welcome":"Run script, please wait for a while ...",save:"Save","save-change":"Save change","save-done":"Save success","save-now":"Save now",saving:"Saving ...",score:"Score","score-count":"Score count",select:"Select","select-all":"Select all",send:"Send",settings:"Settings",slogan:"Slogan","source-code":"Source code","stat-date-at":"Stat at","stat-date-at-oor":"Statistics on this date are not ready yet","stat-date-span":"Date span",stop:"Stop",structure:"Structure",success:"Success","sys-settings":"System settings",tablet:"Tablet",terminal:"Terminal",terminate:"Terminate",text:"Text",timestamp:"Timestamp",title:"Title","total-count":"Total ${nb?0} ${unit?items}",trace:"Trace",track:"Track message",true:"True",type:"Type","under-construction":"Under construction",unknown:"Unknown",upload:"Upload","upload-done":"Done for upload","upload-file":"Uploading files ...","upload-nofinished":"Upload not finished",uploading:"Uplading","user-avator":"User avatar",value:"Value",view:"View","view-resource":"View source code",warn:"Warn",website:"Website",yes:"Yes"}),Ti.Preload("ti/i18n/en-us/_wn.i18n.json",{"wn-admin-check-obj-thumb":"Check obj thumbnails ...","wn-admin-tools":"Admin tools","wn-ctt-css-text":"CSS File","wn-ctt-folder-text":"Folder","wn-ctt-html-text":"HTML FILE","wn-ctt-js-text":"Javascript","wn-ctt-json-text":"JSON File","wn-ctt-less-text":"LESS File","wn-ctt-md-text":"Markdown","wn-ctt-mjs-text":"Module Javascript","wn-ctt-sass-text":"SASS File","wn-ctt-thing_set-text":"Thing Set","wn-ctt-txt-text":"Pure text","wn-ctt-wnml-text":"WNML File","wn-ctt-xml-text":"XML File","wn-edit-com-nil":"Default as label control","wn-en-his-ct":"Created","wn-en-his-flt-tip":"Please input user id or name to filtering","wn-en-his-mor":"OP more","wn-en-his-opt":"Operation","wn-en-his-tar":"Target","wn-en-his-tid":"Target id","wn-en-his-tnm":"Target name","wn-en-his-ttp":"Target type","wn-en-his-uid":"User id","wn-en-his-unm":"User name","wn-en-his-usr":"User","wn-en-his-utp":"User type","wn-invalid-mimes":'Unsupported mime "${current}", only "${supports}" allowed',"wn-invalid-types":'Unsupported type "${current}", only "${supports}" allowed',"wn-key-c":"Creater","wn-key-ct":"Created","wn-key-d0":"D0","wn-key-d1":"D1","wn-key-data":"Data","wn-key-duration":"Duration","wn-key-expi":"Expired","wn-key-g":"Group","wn-key-grp-advance":"Advance","wn-key-grp-basic":"Basic","wn-key-grp-customized":"Customized","wn-key-grp-more":"More","wn-key-grp-others":"Others","wn-key-grp-privilege":"Privilege","wn-key-grp-thumb":"Thumb","wn-key-grp-timestamp":"Timestamp","wn-key-height":"Height","wn-key-icon":"Icon","wn-key-id":"ID","wn-key-len":"Length","wn-key-lm":"Last modified","wn-key-m":"Mender","wn-key-md":"Mode","wn-key-mime":"MIME","wn-key-nm":"Name","wn-key-ph":"Path","wn-key-pid":"Parent","wn-key-pvg":"Biz pvg","wn-key-race":"Race","wn-key-sha1":"SHA1","wn-key-thumb":"Thumb","wn-key-title":"Title","wn-key-tp":"Type","wn-key-width":"Width","wn-obj-nosaved":"You have unsaved objects","wn-oc-auto-type":"All types","wn-oc-free":"Please enter the full name, including the extension, such as `myfile.xml`","wn-oc-tip":"New object name","wn-race-DIR":"DIRECTORY","wn-race-FILE":"FILE","wn-th-acc-pwd-choose-none":"Select the account to reset password (multiple allowed)","wn-th-acc-pwd-done":"Password has been reset for ${n} users","wn-th-acc-pwd-invalid":"Illegal characters found in password","wn-th-acc-pwd-reset-tip":"Reset password to","wn-th-acc-pwd-too-short":"Password too short, no less than 6 digits, better contains alphanumeric & special chars","wn-th-recount-media":"Recalculate file number","wn-th-recount-media-done":"Current number of files: ${n}"}),Ti.Preload("ti/i18n/zh-cn/hmaker.i18n.json",{"com-form":"","com-label":"","com-list":"","hm-type-Array":"","hm-type-Boolean":"","hm-type-Group":"","hm-type-Integer":"","hm-type-Number":"","hm-type-Object":"","hm-type-String":"","hm-type-icons":{Array:"zmdi-format-list-bulleted",Boolean:"zmdi-toll",Group:"zmdi-collection-bookmark",Integer:"zmdi-n-6-square",Number:"zmdi-input-svideo",Object:"zmdi-toys",String:"zmdi-translate"},"hmaker-com-conf-blank":"","hmaker-com-type-blank":"","hmaker-edit-form-del-group-all":"","hmaker-edit-form-del-group-confirm":"","hmaker-edit-form-del-group-only":"","hmaker-edit-form-field-nil":"","hmaker-edit-form-new-field":"","hmaker-edit-form-new-field-e0":"","hmaker-edit-form-new-field-e1":"${val}","hmaker-edit-form-new-field-tip":"","hmaker-edit-form-new-group":"","hmaker-edit-form-new-group-tip":"","hmaker-edit-form-nil-field":"","hmaker-edit-form-not-current":"","hmaker-layout-cols":"","hmaker-layout-rows":"","hmaker-layout-tabs":"","hmaker-nav-blank-item":"","hmaker-nav-k-display":"","hmaker-nav-k-icon":"","hmaker-nav-k-title":"","hmaker-nav-k-type":"","hmaker-nav-k-value":"","hmaker-nav-tp-dispatch":"","hmaker-nav-tp-href":"","hmaker-nav-tp-page":"","hmaker-site-k-apiBase":"","hmaker-site-k-base":"","hmaker-site-k-captcha":"","hmaker-site-k-domain":"","hmaker-site-k-entry":"","hmaker-site-prop":"","hmaker-site-state":"","hmaker-site-state-actions":"","hmaker-site-state-apis":"","hmaker-site-state-blocks":"","hmaker-site-state-general":"","hmaker-site-state-nav":"","hmaker-site-state-router":"","hmaker-site-state-schema":"","hmaker-site-state-utils":"","hmaker-site-tree":"","hmaker-site-tree-loading":"...","hmk-adjustDelay":"","hmk-aspect":"","hmk-autoI18n":"","hmk-behavior":"","hmk-blankAs":"","hmk-breakLine":"","hmk-currentTab":"","hmk-data":"","hmk-dict":"","hmk-editable":"","hmk-field-checkEquals":"","hmk-field-com":"","hmk-field-defaultAs":"","hmk-field-disabled":"","hmk-field-height":"","hmk-field-hidden":"","hmk-field-icon":"","hmk-field-name":"","hmk-field-serializer":"","hmk-field-tip":"","hmk-field-title":"","hmk-field-transformer":"","hmk-field-type":"","hmk-field-width":"","hmk-fieldStatus":"","hmk-fields":"","hmk-fields-advance":"","hmk-fields-general":"","hmk-form-data":"","hmk-form-height":"","hmk-form-onlyFields":"","hmk-form-width":"","hmk-format":"","hmk-height":"","hmk-href":"","hmk-icon":"","hmk-measure":"","hmk-mode":"","hmk-mode-all":"","hmk-mode-tab":"","hmk-newTab":"","hmk-placeholder":"","hmk-prefixIcon":"","hmk-prefixText":"","hmk-spacing":"","hmk-spacing-comfy":"","hmk-spacing-tiny":"","hmk-suffixIcon":"","hmk-suffixText":"","hmk-tabAt":"","hmk-tabAt-bottom-center":"","hmk-tabAt-bottom-left":"","hmk-tabAt-bottom-right":"","hmk-tabAt-top-center":"","hmk-tabAt-top-left":"","hmk-tabAt-top-right":"","hmk-title":"","hmk-trimed":"","hmk-value":"","hmk-valueMaxWidth":"","hmk-width":""}),Ti.Preload("ti/i18n/zh-cn/ti-datetime.i18n.json",{Apr:"",Aug:"",Dec:"",Feb:"",Fri:"",Friday:"",Jan:"",Jul:"",Jun:"",Mar:"",May:"",Mon:"",Monday:"",Nov:"",Oct:"",Sat:"",Saturday:"",Sep:"",Sun:"",Sunday:"",Thu:"",Thursday:"",Tue:"",Tuesday:"",Wed:"",Wednesday:"","blank-date":"","blank-date-range":"","blank-datetime":"","blank-month":"","blank-time":"","blank-time-range":"",cal:{abbr:{Apr:"",Aug:"",Dec:"",Feb:"",Jan:"",Jul:"",Jun:"",Mar:"",May:"",Nov:"",Oct:"",Sep:""},"d-range-beyond-days":"${yy0}${MM0}${dd0}${dd1}","d-range-beyond-months":"${yy0}${MM0}${dd0}${MM1}${dd1}","d-range-beyond-years":"${yy0}${MM0}${dd0}${yy1}${MM1}${dd1}","d-range-in-same-day":"${yy0}${MM0}${dd0}","m-range-beyond-months":"${yy0}${MT0}${MT1}","m-range-beyond-years":"${yy0}${MT0}${yy1}${MT1}",week:["","","","","","",""]},"du-in-min":"${n}",time:{"any-time":"yyyyMd","in-year":"Md","past-in-min":"","past-in-hour":"${min}","past-in-day":"${hour}","past-in-week":"${day}","future-in-min":"","future-in-hour":"${min}","future-in-day":"${hour}","future-in-week":"${day}"},"time-begin":"","time-end":"",today:""}),Ti.Preload("ti/i18n/zh-cn/ti-text-editor.i18n.json",{"wordp-h0":"","wordp-h1":" 1","wordp-h2":" 2","wordp-h3":" 3","wordp-h4":" 4","wordp-h5":" 5","wordp-h6":" 6","wordp-heading":"","wordp-link":"","wordp-nil-sel":""}),Ti.Preload("ti/i18n/zh-cn/ti-text-json.i18n.json",{"json-Array":"","json-Boolean":"","json-Float":"","json-Integer":"","json-Nil":"","json-Number":"","json-Object":"","json-String":"","json-new-key":""}),Ti.Preload("ti/i18n/zh-cn/web.i18n.json",{account:"","account-flt-tip":"","account-manage":"","account-meta":"","account-meta-tip":"","address-consignee":"","address-empty-list":"","address-flt-tip":"","address-is-dft":"","address-k-area":"","address-k-city":"","address-k-code":"","address-k-code-tip":"12","address-k-consignee":"","address-k-country":"","address-k-dftaddr":"","address-k-door":"","address-k-email":"","address-k-phone":"","address-k-postcode":"","address-k-province":"/","address-k-street":"/","address-k-title":"","address-k-tp":"","address-k-tp-s":"","address-k-tp-u":"","address-k-uid":"","address-k-uid-tip":"","address-meta":"","address-nil":"","address-nil-detail":"","address-rm-confirm":"","address-set-dft":"","address-shipping-add":"","admin-flt-tip":"","admin-meta":"","admin-new":"","admin-nickname":"","admin-no-detail":"","ar-cate":"","ar-content":"","ar-flt-tip":"","ar-meta":"","ar-new":"","ar-title":"","auth-bind":"","auth-bind-email-title":"","auth-bind-phone-title":"","auth-blank-email":"","auth-blank-name":"","auth-blank-name-passwd":"","auth-blank-phone":"","auth-doing":"","auth-email-tip":"","auth-email-title":"/","auth-email-vcode":"","auth-email-vcode-get":"","auth-go-email":"/","auth-go-passwd":"","auth-go-phone":"/","auth-login":"","auth-login-NoSaltedPasswd":"${ta?} > ","auth-login-or-signup":"/","auth-logout-confirm":"","auth-ok":"","auth-passwd-getback":"","auth-passwd-name-email-tip":"/","auth-passwd-name-phone-tip":"/","auth-passwd-tip":"","auth-passwd-title":"","auth-phone-tip":"","auth-phone-title":"/","auth-phone-vcode":"","auth-phone-vcode-get":"","auth-reset-passwd":" ...","auth-reset-passwd-again":"","auth-reset-passwd-btn-lack":"","auth-reset-passwd-btn-ready":"","auth-reset-passwd-btn-short":"6","auth-reset-passwd-btn-unmatch":"","auth-reset-passwd-by-email":"","auth-reset-passwd-by-email-sent":" ${email} ","auth-reset-passwd-by-email-tip":"","auth-reset-passwd-by-passwd":"","auth-reset-passwd-by-phone":"","auth-reset-passwd-by-phone-sent":" ${phone} ","auth-reset-passwd-by-phone-tip":"","auth-reset-passwd-ing":"...","auth-reset-passwd-lack-email":"","auth-reset-passwd-lack-phone":"","auth-reset-passwd-new":"6","auth-reset-passwd-ok":"","auth-reset-passwd-old":"","auth-reset-passwd-ren":"","auth-sending-vcode":"","auth-sent-ok":"${ta?}${by}${min}","auth-ta-by-email":"","auth-ta-by-phone":"","auth-ta-email":"","auth-ta-phone":"","auth-vcode-delay":"${sec} ","auth-vcode-lost":"","base-info":"","buy-checkout-nil":"",cate:"","cate-flt-tip":"","cate-maj":"","cate-meta":"","cate-new":"","cate-nil-tip":"","cate-no-detail":"","cate-pa":"","cate-pa-nil":"","cate-sub":"","cate-sub-nil":"","cate-val":"","cmt-brief":"","cmt-content":"","cmt-flt-tip":"ID","cmt-meta":"","cmt-no-detail":"","cmt-target":"","cmt-type":"","cmt-user":"",comments:"",cover:"","cover-pic":"","detail-info":"","dir-media":"","e-cmd-passwd-old_invalid":"","e-cmd-www_passwd-Blank":"","e-cmd-www_passwd-CheckBlankAccount":"","e-cmd-www_passwd-CheckBlankCode":"","e-cmd-www_passwd-CheckCodeFail":"","e-cmd-www_passwd-CheckFailed":"","e-cmd-www_passwd-CheckWeirdAccount":"","e-cmd-www_passwd-InvalidNewPasswd":"","e-cmd-www_passwd-LackTarget":"","e-cmd-www_passwd-TooShort":"","e-cmd-www_passwd-nopvg":"","e-www-invalid-captcha":"${ta?}","e-www-login-invalid-passwd":"","e-www-login-noexists":"","e-www-order-OutOfStore":"${val?}","invoice-k-bankaccount":"","invoice-k-bankname":"","invoice-k-busiaddr":"","invoice-k-busiphone":"","invoice-k-invdft":"","invoice-k-invtfn":"","invoice-k-invtitle":"","invoice-k-type":"","invoice-k-uemail":"","invoice-k-uid":"","invoice-k-uid-tip":"","invoice-k-uname":"","invoice-k-uphone":"","invoice-kg-bank":"","invoice-kg-busi":"","invoice-kg-inv":"","invoice-kg-u":"","k-ct-date":"","k-lm":"","me-k-account":"","me-k-avatar":"","me-k-city":"","me-k-country":"","me-k-email":"","me-k-login":"","me-k-nickname":"","me-k-nm":"","me-k-phone":"","me-k-role":"","me-k-sex":"",mine:"","my-favors":"","my-favors-blog":"","my-favors-goods":"","my-favors-posts":"","my-favors-spots":"","my-favors-video":"","my-orders":"","my-orders-shop":"","my-orders-video":"","my-passwd":"","my-profile":"","my-shipping-address":"","my-shopping-car":"","or-st-dn":"","or-st-fa":"","or-st-nw":"","or-st-ok":"","or-st-sp":"","or-st-wt":"","ord-detail":"","order-flt-tip":"ID","order-k-accounts":"","order-k-addr_ship":"","order-k-addr_ship_code":"","order-k-addr_ship_country":"","order-k-addr_ship_door":"","order-k-addr_user":"","order-k-addr_user_area":"","order-k-addr_user_city":"","order-k-addr_user_code":"","order-k-addr_user_country":"","order-k-addr_user_door":"","order-k-addr_user_province":"","order-k-addr_user_street":"","order-k-buyer_id":"","order-k-currency":"","order-k-discount":"","order-k-dn_at":"","order-k-fa_at":"","order-k-fee":"","order-k-freight":"","order-k-freight-m":"","order-k-freight-m-tip":"0","order-k-id":"","order-k-invoice":"","order-k-note":"","order-k-ok_at":"","order-k-pay_id":"","order-k-pay_tp":"","order-k-payment":"","order-k-price":"","order-k-pro-amount":"","order-k-pro-price":"","order-k-pro-subtotal":"","order-k-pro-title":"","order-k-products":"","order-k-seller":"","order-k-sp_at":"","order-k-st":"","order-k-title":"","order-k-total":"","order-k-total-m":"","order-k-total-m-tip":"","order-k-user_email":"","order-k-user_name":"","order-k-user_phone":"","order-k-waybil":"","order-k-waybil_com":"","order-k-waybil_nb":"","order-k-wt_at":"","order-nil-detail":"","order-pay-id":"","order-pay-status":"","order-shipaddr-nil":"","passwd-invalid-char":"//","passwd-sl-1":"","passwd-sl-2":"","passwd-sl-3":"","passwd-sl-4":"","passwd-sl-5":"","passwd-tip":"6//","pay-by-free":"","pay-by-paypal":"PayPal","pay-by-wx-jsapi":"JSAPI","pay-by-wx-qrcode":"","pay-by-wx-scan":"","pay-by-zfb-qrcode":"","pay-by-zfb-scan":"","pay-checkout-it-amount":"","pay-checkout-it-name":"","pay-checkout-it-price":"","pay-checkout-it-subtotal":"","pay-checkout-tip":"","pay-paypal":"PayPal","pay-proceed-check":"","pay-proceed-ing":"...","pay-re-fail":"","pay-re-nil":"","pay-re-ok":"","pay-re-wait":"","pay-step-checkout-title":"","pay-step-choose-nil":"  ","pay-step-choose-tip":"","pay-step-choose-tip2":"${val}","pay-step-choose-title":"","pay-step-choose-title2":"","pay-step-done-title":"","pay-step-proceed-create-order":"...","pay-step-proceed-fetch-order":"...","pay-step-proceed-nil":"","pay-step-proceed-tip":"${val}","pay-step-proceed-title":"","pay-tip-wx-qrcode":"15","pay-tip-zfb-qrcode":"15","pay-title":"","pay-wx":"","pay-zfb":"","paypal-amount_value":"","paypal-approve-tip":"PayPal","paypal-cap-id":"ID","paypal-cap-status":"","paypal-currency":"","paypal-id":"PayPal","paypal-payer_email":"","paypal-payer_id":"ID",photo:"","post-content-blank":"10","profile-title":"",pubat:"","read-du":"",role:"","role-as-guest":"","role-as-normal":"","role-as-vip":"VIP","role-dft":"","role-flt-tip":"","role-manage":"","role-meta":"","role-meta-tip":"","role-name":"","role-select-tip":"","role-val":"","shop-basket-clean-confirm":"","shop-basket-remove-confirm":"",sort:"","sort-tip-asc":"","sort-tip-desc":"","sort-val":"",topic:"",type:"","type-new":"","video-title":"",watch_c:"","waybil-com-ane":"","waybil-com-best":"","waybil-com-db":"","waybil-com-ems":"","waybil-com-jdl":"","waybil-com-pj":"","waybil-com-sf":"","waybil-com-sto":"","waybil-com-uce":"","waybil-com-yto":"","waybil-com-yunda":"","waybil-com-zto":""}),Ti.Preload("ti/i18n/zh-cn/wn-manager.i18n.json",{"ti-loading":"...","wn-adaptlist":"","wn-create-fail":"","wn-create-invalid":"","wn-create-ok":"","wn-create-too-long":"","wn-del-item":': "${name}"',"wn-del-no-empty-folder":'"${nm}"""',"wn-del-none":"!","wn-del-ok":" ${N} ","wn-download-dir":' "${nm}" """"!',"wn-download-none":"!","wn-download-too-many":" ${N} ","wn-expose-hidden-off":"","wn-expose-hidden-on":"","wn-gui":"","wn-obj-preview":"","wn-obj-puretext":"","wn-obj-single-com":"","wn-publish-done":"","wn-publish-to-nil":"","wn-publish-to-noexist":"","wn-rename":' "${name}"',"wn-rename-fail":"","wn-rename-invalid":"","wn-rename-none":"!","wn-rename-ok":"","wn-rename-suffix-changed":"","wn-rename-too-long":"","wn-thing-manager":"","wn-view-opening":"..."}),Ti.Preload("ti/i18n/zh-cn/wn-obj-preview.i18n.json",{"wop-fullscreen-enter":"","wop-fullscreen-quit":""}),Ti.Preload("ti/i18n/zh-cn/wn-thing.i18n.json",{"thing-clean":"","thing-cleaning":"...","thing-content":"","thing-content-hide":"","thing-content-show":"","thing-create":"","thing-create-in-recyclebin":"","thing-enter-recyclebin":"","thing-files":"","thing-files-hide":"","thing-files-show":"","thing-filter-kwdplhd":"","thing-leave-recyclebin":"","thing-meta":"","thing-meta-hide":"","thing-meta-show":"","thing-recycle-bin":"","thing-restore":"","thing-restore-none":"","thing-restoring":"..."}),Ti.Preload("ti/i18n/zh-cn/_net.i18n.json",{"net-ct":"","net-flt-nil":"","net-vod-add-video":"","net-vod-cate":"","net-vod-du-long":"","net-vod-du-short":"","net-vod-du-tv":"","net-vod-duration":"","net-vod-size":"","net-vod-video-nil":""}),Ti.Preload("ti/i18n/zh-cn/_ti.i18n.json",{add:"","add-item":"",amount:"",attachment:"",avatar:"",banner:"","batch-none":"","batch-update":"...",blank:"","blank-to-edit":"",brief:"","brief-d":"","brief-i":"",buy:"","buy-now":"",cancel:"","cancel-all":"",candidate:"",captcha:"","captcha-chagne":"","captcha-tip":"",chart:"","chart-bar":"","chart-line":"","chart-pie":"","chart-rank":"",checked:"",choose:"","choose-file":"","choose-obj":"",clean:"",clear:"",close:"",confirm:"",console:"",content:"",continue:"",create:"","create-now":"",creating:"...",date:"",debug:"",default:"",del:"","del-checked":"","del-hard":"","del-ing":"...","del-none":"",desktop:"",detail:"","dis-name":"",disable:"",disabled:"",doing:"...",download:"","download-to-local":"","drop-file-here-to-upload":"","drop-here":"","dt-in":"${val}","dt-u-day":"","dt-u-hour":"","dt-u-min":"","dt-u-month":"","dt-u-ms":"","dt-u-sec":"","dt-u-week":"","dt-u-year":"","e-auth-account-noexists":"","e-auth-home-forbidden":"","e-auth-login-NoPhoneOrEmail":"","e-auth-login-NoSaltedPasswd":"","e-auth-login-invalid-passwd":"","e-io-obj-exists":"","e-io-obj-noexists":"","e-io-obj-noexistsf":"[${nm}]",edit:"","edit-com":"",email:"",emoji:"",empty:"","empty-data":"",enable:"",enabled:"",error:"","export-data":"...",fail:"",false:"",favorites:"",female:"",filter:"",find:"","find-data":"",gender:"","global-settings":"","history-record":"",home:"","i-known":"",icon:"","icon-code-tip":" zmdi-case","import-data":"...",index:"",info:"",input:"","input-tags":"",label:"",lat:"","lbs-place-add":"","lbs-ro-rnb-k-first":"","lbs-ro-rnb-k-type":"","lbs-ro-rnb-k-type-alpha":"","lbs-ro-rnb-k-type-capital":"","lbs-ro-rnb-k-type-number":"","lbs-ro-rnb-title":"",link:"","link-href":"","link-text":"",lng:"",loading:"...",login:"","login-name":"",logout:"","logout-ing":"...",male:"","map-hybrid":"","map-roadmap":"","map-satellite":"","map-terrain":"","map-type":"",me:"",media:"",meta:"",mine:"",modal:"",modify:"",more:"",msg:"",name:"","new-item":"",newsfeed:"",next:"",nil:"","nil-obj":"",no:"","no-saved":"","no-selected":"","no-title":"",obj:"",off:"",ok:"",on:"",open:"","open-newtab":"",others:"","paging-change-pgsz":"${pgsz}","paging-change-pgsz-invalid":"0... -_-!","paging-change-pn":"${pn} 1  ${pgc} ","paging-change-pn-invalid":" 1  ${pgc} ","paging-first":"","paging-last":"","paging-next":"","paging-prev":"","paging-sum":"${pgc}${sum}${count}/${pgsz}",passwd:"","passwd-reset":"",path:"",phone:"","phone-nb":"",post:"",prev:"",price:"",profile:"","profile-edit":"",prompt:"",properties:"",publish:"",publishing:"...",refresh:"","refresh-hard":"","refresh-hard-clear":"",reloading:"...",remove:"",removing:"...",rename:"...",renaming:"...",reset:"","reset-change":"","reset-data":"",restore:"",revoke:"","revoke-change":"",run:"","run-finished":"","run-welcome":" ...",save:"","save-change":"","save-done":"","save-now":"",saving:"...",score:"","score-count":"",select:"","select-all":"",send:"",settings:"",slogan:"","source-code":"","stat-date-at":"","stat-date-at-oor":"","stat-date-span":"",stop:"",structure:"",success:"","sys-settings":"",tablet:"",terminal:"",terminate:"",text:"",timestamp:"",title:"","total-count":" ${nb?0} ${unit?}",trace:"",track:"",true:"",type:"","under-construction":"",unknown:"",upload:"","upload-done":"","upload-file":"...","upload-nofinished":"",uploading:"","user-avator":"",value:"",view:"","view-resource":"",warn:"",website:"",yes:""}),Ti.Preload("ti/i18n/zh-cn/_wn.i18n.json",{"wn-admin-check-obj-thumb":"...","wn-admin-tools":"","wn-ctt-css-text":"CSS","wn-ctt-folder-text":"","wn-ctt-html-text":"HTML","wn-ctt-js-text":"JS","wn-ctt-json-text":"JSON","wn-ctt-less-text":"LESS","wn-ctt-md-text":"Markdown","wn-ctt-mjs-text":"JS","wn-ctt-sass-text":"SASS","wn-ctt-thing_set-text":"","wn-ctt-txt-text":"","wn-ctt-wnml-text":"WNML","wn-ctt-xml-text":"XML","wn-edit-com-nil":"","wn-en-his-ct":"","wn-en-his-flt-tip":"ID","wn-en-his-mor":"","wn-en-his-opt":"","wn-en-his-tar":"","wn-en-his-tid":"ID","wn-en-his-tnm":"","wn-en-his-ttp":"","wn-en-his-uid":"ID","wn-en-his-unm":"","wn-en-his-usr":"","wn-en-his-utp":"","wn-invalid-mimes":' "${current}" "${supports}"',"wn-invalid-types":' "${current}" "${supports}"',"wn-key-c":"","wn-key-ct":"","wn-key-d0":"D0","wn-key-d1":"D1","wn-key-data":"","wn-key-duration":"","wn-key-expi":"","wn-key-g":"","wn-key-grp-advance":"","wn-key-grp-basic":"","wn-key-grp-customized":"","wn-key-grp-more":"","wn-key-grp-others":"","wn-key-grp-privilege":"","wn-key-grp-thumb":"","wn-key-grp-timestamp":"","wn-key-height":"","wn-key-icon":"","wn-key-id":"ID","wn-key-len":"","wn-key-lm":"","wn-key-m":"","wn-key-md":"","wn-key-mime":"","wn-key-nm":"","wn-key-ph":"","wn-key-pid":"","wn-key-pvg":"","wn-key-race":"","wn-key-sha1":"","wn-key-thumb":"","wn-key-title":"","wn-key-tp":"","wn-key-width":"","wn-obj-nosaved":"","wn-oc-auto-type":"","wn-oc-free":" `myfile.xml`","wn-oc-tip":"","wn-race-DIR":"","wn-race-FILE":"","wn-th-acc-pwd-choose-none":"","wn-th-acc-pwd-done":"${n}","wn-th-acc-pwd-invalid":"","wn-th-acc-pwd-reset-tip":"","wn-th-acc-pwd-too-short":"6","wn-th-recount-media":"","wn-th-recount-media-done":": ${n}"});