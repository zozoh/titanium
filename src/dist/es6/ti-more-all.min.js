Ti.Preload("ti/com/hmaker/edit-com/form/edit-com-form.html",'<ti-form \n  class="hmaker-edit-com-form"\n  v-bind="FormConf"/>'),function(){const t={props:{value:{type:Object,default:void 0},keepTabIndexBy:{type:String,default:"hMakerEditComForm"}},computed:{FormConf(){return{mode:"tab",keepTabIndexBy:this.keepTabIndexBy,spacing:"tiny",data:this.value,fields:[{type:"Group",title:"i18n:hmk-aspect",fields:[{name:"title",title:"i18n:hmk-title",type:"String",comType:"ti-input"},{name:"icon",title:"i18n:hmk-icon",type:"String",comType:"ti-input-icon"},{name:"mode",title:"i18n:hmk-mode",type:"String",defaultAs:"all",comType:"ti-switcher",comConf:{options:[{value:"all",text:"i18n:hmk-mode-all"},{value:"tab",text:"i18n:hmk-mode-tab"}]}},{name:"tabAt",title:"i18n:hmk-tabAt",type:"String",defaultAs:"top-center",width:240,hidden:{mode:{name:"isEqual",args:"tab",not:!0}},comType:"ti-droplist",comConf:{placeholder:"i18n:hmk-tabAt-top-center",autoI18n:!0,options:[{value:"top-left",text:"i18n:hmk-tabAt-top-left"},{value:"top-center",text:"i18n:hmk-tabAt-top-center"},{value:"top-right",text:"i18n:hmk-tabAt-top-right"},{value:"bottom-left",text:"i18n:hmk-tabAt-bottom-left"},{value:"bottom-center",text:"i18n:hmk-tabAt-bottom-center"},{value:"bottom-right",text:"i18n:hmk-tabAt-bottom-right"}]}},{name:"currentTab",title:"i18n:hmk-currentTab",type:"Integer",defaultAs:0,width:120,hidden:{mode:{name:"isEqual",args:"tab",not:!0}},comType:"ti-input-num"},{name:"spacing",title:"i18n:hmk-spacing",type:"String",defaultAs:"comfy",comType:"ti-switcher",comConf:{options:[{value:"comfy",text:"i18n:hmk-spacing-comfy"},{value:"tiny",text:"i18n:hmk-spacing-tiny"}]}},{name:"adjustDelay",title:"i18n:hmk-adjustDelay",type:"Integer",defaultAs:0,width:120,comType:"ti-input-num"},{name:"blankAs",title:"i18n:hmk-blankAs",type:"Object",comType:"ti-input"}]},{type:"Group",title:"i18n:hmk-fields",fields:[{name:"fields",type:"Array",height:"100%",comType:"hmaker-edit-form-fieldset",comConf:{className:"ti-fill-parent",keepTabIndexBy:this.keepTabIndexBy}}]},{type:"Group",title:"i18n:hmk-data",fields:[{title:"i18n:hmk-form-data",name:"data",comType:"ti-input"},{name:"fieldStatus",title:"i18n:hmk-fieldStatus",comType:"ti-input"},{name:"onlyFields",title:"i18n:hmk-form-onlyFields",type:"Boolean",defaultAs:!0,comType:"ti-toggle"}]},{title:"i18n:hmk-measure",fields:[{title:"i18n:hmk-form-width",name:"width",comType:"ti-input"},{title:"i18n:hmk-form-height",name:"height",comType:"ti-input"}]}]}}},methods:{},created:async function(){Wn.Dict.hMakerComponents()}};Ti.Preload("ti/com/hmaker/edit-com/form/edit-com-form.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-com/form/field/edit-form-field.html",'<div class="hmaker-edit-form-field ti-scroll-v">\n  \x3c!--\n    Empty\n  --\x3e\n  <ti-loading \n    v-if="isEmpty"\n      icon="fas-hand-point-left"\n      text="i18n:hmaker-edit-form-field-nil"/>\n  \x3c!--\n    Editing\n  --\x3e\n  <ti-form\n    v-else\n      v-bind="TheForm"\n      :data="value"/>\n</div>'),function(){const t={props:{value:{type:Object,default:void 0},keepTabIndexBy:{type:String,default:void 0}},computed:{isEmpty(){return Ti.Util.isNil(this.value)},TheFormGeneralFields(){return[{hidden:this.isGroup,name:"type",title:"hmk-field-type",defaultAs:"String",comType:"ti-droplist",comConf:{placeholder:"i18n:hm-type-String",options:(t=>_.map(t,t=>({icon:Ti.I18n.get("hm-type-icons")[t],value:t,text:Ti.I18n.get(`hm-type-${t}`)})))(["Object","Number","Integer","Boolean","String","Array"]),dropDisplay:["<icon>","text","value"]}},{name:"title",title:"hmk-field-title",comType:"ti-input"},{name:"icon",title:"hmk-field-icon",comType:"ti-input-icon"},{hidden:this.isGroup,name:"name",title:"hmk-field-name",comType:"ti-input"},{hidden:this.isGroup,name:"tip",title:"hmk-field-tip",comType:"ti-input"},{hidden:this.isGroup,name:"width",title:"hmk-field-width",width:120,comType:"ti-input"},{hidden:this.isGroup,name:"height",title:"hmk-field-height",width:120,comType:"ti-input"},{hidden:this.isGroup,name:"defaultAs",title:"hmk-field-defaultAs",comType:"ti-input",comConf:{autoJsValue:!0}},{hidden:this.isGroup,name:["comType","comConf"],title:"hmk-field-com",type:"Object",width:"auto",comType:"wn-combo-edit-com"}]},TheFormAdvanceFields:()=>[{name:"disabled",title:"hmk-field-disabled",comType:"ti-input",comConf:{autoJsValue:!0}},{name:"hidden",title:"hmk-field-hidden",comType:"ti-input",comConf:{autoJsValue:!0}},{name:"checkEquals",title:"hmk-field-checkEquals",comType:"ti-toggle"},{name:"transformer",title:"hmk-field-transformer",comType:"ti-input-text",comConf:{autoJsValue:!0}},{name:"serializer",title:"hmk-field-serializer",comType:"ti-input-text",comConf:{autoJsValue:!0}}],TheForm(){return{spacing:"tiny",keepTabIndexBy:this.keepTabIndexBy,fields:[{type:"Group",title:"i18n:hmk-fields-general",fields:this.TheFormGeneralFields},{type:"Group",title:"i18n:hmk-fields-advance",hidden:this.isGroup,fields:this.TheFormAdvanceFields}]}}},methods:{isGroup:t=>_.isArray(t.fields)||"Group"==t.type}};Ti.Preload("ti/com/hmaker/edit-com/form/field/edit-form-field.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-com/form/field/_com.json",{name:"hmaker-edit-form-field",globally:!0,template:"./edit-form-field.html",mixins:["./edit-form-field.mjs"]}),Ti.Preload("ti/com/hmaker/edit-com/form/fieldset/edit-form-fieldset.html",'<ti-gui\n  class="hmaker-edit-form-fieldset"\n  :class="TopClass"\n  :layout="Layout"\n  :schema="Schema"\n  :can-loading="false"\n  @tree::select="OnFieldTreeSelect"\n  @detail::change="OnFieldChange"/>'),function(){const t={data:()=>({myCurrentId:null}),props:{value:{type:Array,default:void 0},keepTabIndexBy:{type:String,default:"hMakerEditComForm"}},computed:{TopClass(){return this.getTopClass()},TheDetailCom(){return{comType:"hmaker-edit-form-field",comConf:{value:this.CurrentField,keepTabIndexBy:this.keepTabIndexBy?`${this.keepTabIndexBy}-field`:null}}},CurrentField(){if(this.myCurrentId){let t=this.$tree.findTableRow(this.myCurrentId);if(t)return t.rawData}},Layout:()=>({type:"cols",border:!0,blocks:[{type:"rows",size:"37%",border:!0,blocks:[{size:40,body:"actions"},{name:"tree",body:"tree"}]},{name:"detail",body:"detail"}]}),Schema(){return{actions:{comType:"ti-actionbar",comConf:{items:[{type:"action",icon:"im-plus",text:"i18n:hmaker-edit-form-new-field",action:()=>this.addNewField()},{type:"action",icon:"im-folder-add",text:"i18n:hmaker-edit-form-new-group",action:()=>this.addNewGroup()},{type:"line"},{type:"action",icon:"im-trash-can",action:()=>this.removeSelectedFieldOrGroup()},{type:"line"},{type:"action",icon:"im-arrow-up",action:()=>this.moveSelectedFieldsUp()},{type:"action",icon:"im-arrow-down",action:()=>this.moveSelectedFieldsDown()}]}},tree:{comType:"ti-tree",comConf:{data:this.value,showRoot:!1,puppetMode:!0,autoOpen:!0,border:"row",defaultOpenDepth:2,currentId:this.myCurrentId,nameBy:t=>t.name||t.title,childrenBy:t=>t.fields,leafBy:t=>"Group"!=t.type,display:[{key:"type",transformer:{name:"toStr",args:[{Group:"zmdi-collection-bookmark",Object:"zmdi-toys",Number:"zmdi-input-svideo",Integer:"zmdi-n-6-square",Boolean:"zmdi-toll",String:"zmdi-translate",Array:"zmdi-format-list-bulleted"}]},defaultAs:"im-question",comType:"ti-icon"},{key:"name",transformer:t=>_.isArray(t)?t.join("+"):t},"title"],onInit:this.OnTreeInit}},detail:this.TheDetailCom}}},methods:{OnTreeInit(t){this.$tree=t},OnFieldTreeSelect({currentId:t}){this.myCurrentId=t},OnFieldChange(t){this.updateCurrentField(t)},getMyCurrent(t=this.value){if(!this.myCurrentId||!_.isArray(t))return;let e=this.myCurrentId.split("/"),i={path:e,index:[],group:null,field:null};if(e.length>0){let n=e[0];for(let e=0;e<t.length;e++){let a=t[e];if(_.isArray(a.fields)||"Group"==a.type){if(n==a.title){i.group=a,i.index.push(e);break}}else if(n==a.name){i.field=a,i.index.push(e);break}}}if(e.length>1&&i.group&&_.isArray(i.group.fields)){let t=e[1];for(let e=0;e<i.group.fields.length;e++){let n=i.group.fields[e];t==n.name&&(i.field=n,i.index.push(e))}}return i},isGroup:t=>"Group"==t.type||_.isArray(t.fields),selectNextIdByIndex(t=[],e=this.value){let i=[];for(let n of t){if(!e||_.isEmpty(e))break;let t=_.nth(e,n);t||(t=_.nth(e,n-1)),t&&(i.push(t.name||t.title),e=t.fields)}this.myCurrentId=i.join("/")||null},findByName(t){if(_.isArray(this.value))for(let e=0;e<this.value.length;e++){let i=this.value[e],n=i.name||i.title;if(_.isEqual(t,n)){let t={index:[e],path:[n],field:i};return this.isGroup(i)?t.group=i:t.field=i,t}if(this.isGroup(i))for(let a=0;a<i.fields.length;a++){let s=i.fields[a],o=s.name||s.title;if(_.isEqual(t,o))return{index:[e,a],path:[n,o],group:i,field:s}}}},existsName(t){return!!this.findByName(t)},updateCurrentField(t){let e=_.cloneDeep(this.value),i=this.getMyCurrent(e);if(console.log(i),i.group&&i.field){let e=_.last(i.index);i.group.fields[e]=t}else if(i.group){let n=_.first(i.index);_.assign(e[n],t)}else{if(!i.field)return;e[_.first(i.index)]=t}this.selectNextIdByIndex(i.index,e),this.$notify("change",e)},addFieldOrGroup(t){let e=_.cloneDeep(this.value)||[],i=this.getMyCurrent(e),n=[];i?i.group?this.isGroup(t)?(Ti.Util.insertToArray(e,_.first(i.index),t),n.push(t.title)):i.field?(Ti.Util.insertToArray(i.group.fields,_.last(i.index)+1,t),n.push(i.path[0],t.name)):_.isArray(i.group.fields)?(i.group.fields.push(t),n.push(i.path[0],t.name)):(i.group.fields=[t],n.push(i.path[0],t.name)):(Ti.Util.insertToArray(e,_.last(i.index)+1,t),n.push(t.name||t.title)):e.push(t),this.$notify("change",e),this.myCurrentId=n.join("/")},async addNewField(){let t=await Ti.Prompt("i18n:hmaker-edit-form-new-field-tip");if(!(t=_.trim(t)))return;let e=_.without(t.split(/[\s\W]/),"");for(let t of e)if(!/^[a-z_][\da-z_]+$/.test(t))return await Ti.Toast.Open("i18n:hmaker-edit-form-new-field-e0","error");let i=1==e.length?t:e;if(this.existsName(i))return await Ti.Toast.Open({content:"i18n:hmaker-edit-form-new-field-e1",type:"error",vars:{val:t},position:"center",duration:5e3});this.addFieldOrGroup({name:i,type:_.isArray(i)?"Object":"String",comType:"ti-input"})},async addNewGroup(){let t=await Ti.Prompt("i18n:hmaker-edit-form-new-group-tip");if(t=_.trim(t))return this.existsName(t)?await Ti.Toast.Open({content:"i18n:hmaker-edit-form-new-field-e1",type:"error",vars:{val:t},position:"center",duration:5e3}):void this.addFieldOrGroup({type:"Group",title:t,fields:[]})},async removeSelectedFieldOrGroup(){let t=this.getMyCurrent();if(!t)return Ti.Toast.Open("i18n:hmaker-edit-form-nil-field","warn");let e;if(t.group&&!t.field){let i=!0;if(_.isEmpty(t.group.fields)||(i=await Ti.Confirm("i18n:hmaker-edit-form-del-group-confirm",{closer:!0,textYes:"i18n:hmaker-edit-form-del-group-all",textNo:"i18n:hmaker-edit-form-del-group-only"})),_.isUndefined(i))return;let n=_.first(t.index);e=_.filter(this.value,(t,e)=>e!=n),!1===i&&(_.isEmpty(t.group.fields)||Ti.Util.insertToArray(e,n,...t.group.fields))}else if(t.group&&t.field){e=_.cloneDeep(this.value);let i=_.cloneDeep(t.group),n=_.first(t.index),a=_.last(t.index);i.fields=_.filter(i.fields,(t,e)=>e!=a),e[n]=i}else{let i=_.first(t.index);e=_.filter(this.value,(t,e)=>e!=i)}this.selectNextIdByIndex(t.index,e),this.$notify("change",e)},moveSelectedFieldsUp(){let t=_.cloneDeep(this.value),e=this.getMyCurrent(t);if(!e)return Ti.Toast.Open("i18n:hmaker-edit-form-nil-field","warn");let i=_.first(e.index);if(e.group&&e.field){let n=_.last(e.index);0==n?(_.remove(e.group.fields,(t,e)=>e==n),Ti.Util.insertToArray(t,i,e.field),this.myCurrentId=_.last(e.path)):(e.group.fields[n]=e.group.fields[n-1],e.group.fields[n-1]=e.field)}else if(i>0){let n=t[i-1];this.isGroup(n)&&e.field&&this.$tree.isOpened(n.title)?(_.remove(t,(t,e)=>e==i),_.isArray(n.fields)?n.fields.push(e.field):n.fields=[e.field],this.myCurrentId=[n.title,_.last(e.path)].join("/")):(t[i]=t[i-1],t[i-1]=e.field||e.group)}this.$notify("change",t)},moveSelectedFieldsDown(){let t=_.cloneDeep(this.value),e=this.getMyCurrent(t);if(!e)return Ti.Toast.Open("i18n:hmaker-edit-form-nil-field","warn");let i=_.first(e.index);if(e.group&&e.field){let n=_.last(e.index);n>=e.group.fields.length-1?(_.remove(e.group.fields,(t,e)=>e==n),Ti.Util.insertToArray(t,i+1,e.field),this.myCurrentId=_.last(e.path)):(e.group.fields[n]=e.group.fields[n+1],e.group.fields[n+1]=e.field)}else if(i<t.length-1){let n=t[i+1];this.isGroup(n)&&e.field&&this.$tree.isOpened(n.title)?(_.remove(t,(t,e)=>e==i),_.isArray(n.fields)?Ti.Util.insertToArray(n.fields,0,e.field):n.fields=[e.field],this.myCurrentId=[n.title,_.last(e.path)].join("/")):(t[i]=t[i+1],t[i+1]=e.field||e.group)}this.$notify("change",t)}},mounted:function(){let t=Ti.Storage.local.getObject("vue-drop-me",null);if(t){let e=Date.now()-t.timeInMs;console.log({du:e}),e<1e3&&(this.myCurrentId=t.myCurrentId),Ti.Storage.local.remove("vue-drop-me")}else this.selectNextIdByIndex([0])},beforeDestroy:function(){Ti.Storage.local.setObject("vue-drop-me",{myCurrentId:this.myCurrentId,timeInMs:Date.now()})}};Ti.Preload("ti/com/hmaker/edit-com/form/fieldset/edit-form-fieldset.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-com/form/fieldset/_com.json",{name:"hmaker-edit-form-fieldset",globally:!0,template:"./edit-form-fieldset.html",mixins:["./edit-form-fieldset.mjs"],components:["@com:hmaker/edit-com/form/field","@com:hmaker/edit-com/form/group"]}),Ti.Preload("ti/com/hmaker/edit-com/form/group/edit-form-group.html",'<div class="hmaker-edit-form-group">\n  Group: {{value}}\n</div>'),function(){const t={props:{value:{type:Object,default:void 0}},computed:{},methods:{}};Ti.Preload("ti/com/hmaker/edit-com/form/group/edit-form-group.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-com/form/group/_com.json",{name:"hmaker-edit-form-group",globally:!0,template:"./edit-form-group.html",mixins:["./edit-form-group.mjs"]}),Ti.Preload("ti/com/hmaker/edit-com/form/_com.json",{name:"hmaker-edit-com-form",globally:!0,template:"./edit-com-form.html",mixins:["./edit-com-form.mjs"],components:["@com:hmaker/edit-com/form/fieldset"]}),Ti.Preload("ti/com/hmaker/edit-com/hmaker-edit-com.html",'<div class="hmaker-edit-com">\n  \x3c!--\n    Select Com Type\n  --\x3e\n  <div class="as-com-type">\n    <ti-combo-input \n      v-bind="ComTypeComboInput"\n      :value="ComType"\n      @change="OnComTypeChange"/>\n  </div>\n  \x3c!--\n    Edit Com Conf\n  --\x3e\n  <div class="as-com-conf"><div class="as-con">\n    \x3c!--\n      Show Com Editor\n    --\x3e\n    <component\n      v-if="hasEditCom"\n        class="ti-fill-parent"\n        :is="EditComType"\n        v-bind="EditComConf"\n        @change="OnComConfChange"/>\n    \x3c!--\n      Show Blank\n    --\x3e\n    <ti-loading \n      v-else\n        icon="fas-hand-pointer"\n        text="i18n:hmaker-com-conf-blank"/>\n  </div></div>\n</div>'),function(){const t={data:()=>({myCom:null}),props:{value:{type:Object,default:()=>({})}},computed:{Dict:()=>Wn.Dict.hMakerComponents(),ComTypeComboInput(){return{options:this.Dict,placeholder:"i18n:hmaker-com-type-blank",autoI18n:!0,mustInList:!0,autoCollapse:!0,dropDisplay:["<icon:im-plugin>","title|name"]}},hasEditCom(){return!!this.myCom},ComType(){return _.get(this.value,"comType")},ComConf(){return _.get(this.value,"comConf")},EditComType(){return _.get(this.myCom,"editComType")},EditComConf(){let t=_.get(this.myCom,"editComConf");return Ti.Util.explainObj(this.value,t)}},methods:{async OnComTypeChange(t){this.myCom=await this.Dict.getItem(t),this.notifyChange({comType:t,comConf:this.ComConf})},OnComConfChange(t={}){this.notifyChange({comType:this.ComType,comConf:t})},notifyChange(t={}){this.$notify("change",t)},async reloadMyCom(){if(_.isEmpty(this.value))this.myCom=null;else{let{comType:t}=this.value;this.myCom=await this.Dict.getItem(t)}}},watch:{value:{handler:"reloadMyCom",immediate:!0}}};Ti.Preload("ti/com/hmaker/edit-com/hmaker-edit-com.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-com/_com.json",{name:"hmaker-edit-com",globally:!0,template:"./hmaker-edit-com.html",mixins:["./hmaker-edit-com.mjs"],components:["@com:hmaker/edit-com/form","@com:wn/combo/edit-com"]}),Ti.Preload("ti/com/hmaker/edit-site-actions/edit-site-actions.html",'<div class="hmaker-edit-site-actions">\n  Actions\n</div>'),function(){const t={inheritAttrs:!1,data:()=>({}),props:{data:{type:Object,default:()=>({})}},computed:{theConfig(){}},methods:{}};Ti.Preload("ti/com/hmaker/edit-site-actions/edit-site-actions.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-site-actions/_com.json",{name:"hmaker-edit-site-actions",globally:!0,template:"./edit-site-actions.html",mixins:["./edit-site-actions.mjs"]}),Ti.Preload("ti/com/hmaker/edit-site-apis/edit-site-apis.html",'<div class="hmaker-edit-site-apis">\n  Apis\n</div>'),function(){const t={inheritAttrs:!1,data:()=>({}),props:{data:{type:Object,default:()=>({})}},computed:{theConfig(){}},methods:{}};Ti.Preload("ti/com/hmaker/edit-site-apis/edit-site-apis.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-site-apis/_com.json",{name:"hmaker-edit-site-apis",globally:!0,template:"./edit-site-apis.html",mixins:["./edit-site-apis.mjs"]}),Ti.Preload("ti/com/hmaker/edit-site-blocks/edit-site-blocks.html",'<div class="hmaker-edit-site-blocks">\n  Blocks\n</div>'),function(){const t={inheritAttrs:!1,data:()=>({}),props:{data:{type:Object,default:()=>({})}},computed:{theConfig(){}},methods:{}};Ti.Preload("ti/com/hmaker/edit-site-blocks/edit-site-blocks.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-site-blocks/_com.json",{name:"hmaker-edit-site-blocks",globally:!0,template:"./edit-site-blocks.html",mixins:["./edit-site-blocks.mjs"]}),Ti.Preload("ti/com/hmaker/edit-site-general/edit-site-general.html",'<ti-form class="hmaker-edit-site-general"\n  :fields="TheFields"\n  :data="data"/>'),function(){const t={inheritAttrs:!1,data:()=>({}),props:{data:{type:Object,default:()=>({})}},computed:{TheFields:()=>[{title:"i18n:hmaker-site-k-domain",name:"domain"},{title:"i18n:hmaker-site-k-apiBase",name:"apiBase"},{title:"i18n:hmaker-site-k-captcha",name:"captcha"},{title:"i18n:hmaker-site-k-base",name:"base"},{title:"i18n:hmaker-site-k-entry",name:"entry"}]},methods:{}};Ti.Preload("ti/com/hmaker/edit-site-general/edit-site-general.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-site-general/_com.json",{name:"hmaker-edit-site-general",globally:!0,template:"./edit-site-general.html",mixins:["./edit-site-general.mjs"]}),Ti.Preload("ti/com/hmaker/edit-site-nav/edit-site-nav.html",'<div class="hmaker-edit-site-nav">\n  \x3c!--\n    Nav Table\n  --\x3e\n  <div class="as-table ti-fill-parent">\n    <ti-table class="ti-fill-parent"\n      :data="TableData"\n      :fields="TableFields"\n      :selectable="true"\n      :checkable="true"\n      :multi="true"\n      :current-id="myCurrentId"\n      :checked-ids="myCheckedIds"\n      @select="OnRowSelected"/>\n  </div>\n  \x3c!--\n    Nav Form\n  --\x3e\n  <div class="as-form">\n    <ti-form\n      class="ti-fill-parent"\n      :fields="FormFields"\n      :blank-as="FormBlankAs"\n      :data="FormData"\n      @change="OnFormChanged"/>\n  </div>\n</div>'),function(){const t={data:()=>({myCurrentIndex:-1,myCurrentId:null,myCheckedIds:{},myActionStatus:{remove:!1,moveUp:!1,moveDown:!1}}),props:{data:{type:Array,default:()=>[]}},computed:{TableData(){let t=[];return _.forEach(this.data,(e,i)=>{t.push(_.assign({id:`N${i}`},e))}),t},TableLastIndex(){return this.TableData.length-1},TableFields:()=>[{title:"i18n:hmaker-nav-k-display",display:[{key:"icon",comType:"ti-icon"},"title"],width:-150},{title:"i18n:hmaker-nav-k-type",name:"type",width:-100,display:[{comType:"ti-icon",transformer:{name:"toStr",args:{page:"zmdi-file",href:"zmdi-link",dispatch:"zmdi-flash-auto"}}},{transformer:{name:"toStr",args:{page:"i18n:hmaker-nav-tp-page",href:"i18n:hmaker-nav-tp-href",dispatch:"i18n:hmaker-nav-tp-dispatch"}}}]},{title:"i18n:hmaker-nav-k-value",display:"value"}],FormBlankAs:()=>({icon:"zmdi-long-arrow-return zmdi-hc-rotate-90",text:"i18n:hmaker-nav-blank-item"}),FormFields:()=>[{title:"i18n:hmaker-nav-k-title",name:"title",comType:"ti-input"},{title:"i18n:hmaker-nav-k-icon",name:"icon",comType:"ti-input-icon"},{title:"i18n:hmaker-nav-k-type",name:"type",comType:"ti-switcher",comConf:{options:[{icon:"zmdi-file",text:"i18n:hmaker-nav-tp-page",value:"page"},{icon:"zmdi-link",text:"i18n:hmaker-nav-tp-href",value:"href"},{icon:"zmdi-flash-auto",text:"i18n:hmaker-nav-tp-dispatch",value:"dispatch"}]}},{title:"i18n:hmaker-nav-k-value",name:"value",comType:"ti-input"}],FormData(){if(this.myCurrentIndex>=0)return this.TableData[this.myCurrentIndex]}},methods:{OnRowSelected({currentId:t,checkedIds:e,currentIndex:i}){this.myCurrentIndex=i,this.myCurrentId=t,this.myCheckedIds=e,_.assign(this.myActionStatus,{moveUp:i>0,moveDown:i>=0&&i<this.TableLastIndex,remove:i>=0})},OnFormChanged({name:t,value:e}={}){if(this.myCurrentIndex>=0){let i=_.cloneDeep(this.data);i[this.myCurrentIndex][t]=e,this.notifyChange(i)}},updateParentActionMenu(){this.$notify("actions:update",{data:[{key:"create",text:"i18n:add-item",type:"action",icon:"zmdi-plus",action:"$parent:callChild(createNewOne)"},{type:"line"},{key:"remove",type:"action",icon:"zmdi-delete",action:"$parent:callChild(removeChecked)",enableBy:"remove"},{type:"line"},{key:"moveUp",type:"action",icon:"zmdi-long-arrow-up",action:"$parent:callChild(moveUp)",enableBy:"moveUp"},{key:"moveDown",type:"action",icon:"zmdi-long-arrow-down",action:"$parent:callChild(moveDown)",enableBy:"moveDown"}],status:this.myActionStatus})},notifyChange(t=[]){let e=[];_.forEach(t,t=>{e.push(_.pick(t,"icon","title","type","value"))}),this.$notify("change",e)},__recover_selected(t,e){let i={};for(let n=0;n<e;n++)i[`N${t+n}`]=!0;console.log(i),this.$nextTick(()=>{this.OnRowSelected({currentId:`N${t}`,currentIndex:t,checkedIds:i})})},moveUp(){let t=_.cloneDeep(this.TableData),e=_.remove(t,({id:t})=>this.myCheckedIds[t]);if(!_.isEmpty(e)){let i=1*_.first(e).id.substring(1),n=Math.max(0,i-1);n>=0&&(Ti.Util.insertToArray(t,n,...e),this.notifyChange(t),this.__recover_selected(n,e.length))}},moveDown(){let t=_.cloneDeep(this.TableData),e=_.remove(t,({id:t})=>this.myCheckedIds[t]);if(!_.isEmpty(e)){let i=1*_.first(e).id.substring(1)+1;i<=this.TableData.length-e.length&&(Ti.Util.insertToArray(t,i,...e),this.notifyChange(t),this.__recover_selected(i,e.length))}},removeChecked(){let t=_.filter(this.TableData,({id:t})=>!this.myCheckedIds[t]);this.notifyChange(t),this.myCurrentIndex=-1,this.myCurrentId=null,this.myCheckedIds={}},createNewOne(){let t=_.cloneDeep(this.TableData);Ti.Util.insertToArray(t,this.myCurrentIndex,{title:Ti.I18n.get("new-item"),type:"page"}),console.log(t),this.notifyChange(t)}},mounted:function(){this.updateParentActionMenu()}};Ti.Preload("ti/com/hmaker/edit-site-nav/edit-site-nav.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-site-nav/_com.json",{name:"hmaker-edit-site-nav",globally:!0,template:"./edit-site-nav.html",mixins:["./edit-site-nav.mjs"]}),Ti.Preload("ti/com/hmaker/edit-site-router/edit-site-router.html",'<div class="hmaker-edit-site-router">\n  Routers\n</div>'),function(){const t={inheritAttrs:!1,data:()=>({}),props:{data:{type:Object,default:()=>({})}},computed:{theConfig(){}},methods:{}};Ti.Preload("ti/com/hmaker/edit-site-router/edit-site-router.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-site-router/_com.json",{name:"hmaker-edit-site-router",globally:!0,template:"./edit-site-router.html",mixins:["./edit-site-router.mjs"]}),Ti.Preload("ti/com/hmaker/edit-site-schema/edit-site-schema.html",'<div class="hmaker-edit-site-schema">\n  SCHEMA\n</div>'),function(){const t={inheritAttrs:!1,data:()=>({}),props:{data:{type:Object,default:()=>({})}},computed:{theConfig(){}},methods:{}};Ti.Preload("ti/com/hmaker/edit-site-schema/edit-site-schema.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-site-schema/_com.json",{name:"hmaker-edit-site-schema",globally:!0,template:"./edit-site-schema.html",mixins:["./edit-site-schema.mjs"]}),Ti.Preload("ti/com/hmaker/edit-site-utils/edit-site-utils.html",'<div class="hmaker-edit-site-utils">\n  Utils\n</div>'),function(){const t={inheritAttrs:!1,data:()=>({}),props:{data:{type:Object,default:()=>({})}},computed:{theConfig(){}},methods:{}};Ti.Preload("ti/com/hmaker/edit-site-utils/edit-site-utils.mjs",t)}(),Ti.Preload("ti/com/hmaker/edit-site-utils/_com.json",{name:"hmaker-edit-site-utils",globally:!0,template:"./edit-site-utils.html",mixins:["./edit-site-utils.mjs"]}),Ti.Preload("ti/com/hmaker/site-current-view/com/current-view-con/current-view-con.html",'<div class="current-view-con">\n  <component :is="comType"\n    class="ti-cover-parent"\n    v-bind="comConf"/>\n</div>'),function(){const t={inheritAttrs:!1,props:{comType:{type:String,default:"ti-loading"},comConf:{type:Object,default:()=>({})}}};Ti.Preload("ti/com/hmaker/site-current-view/com/current-view-con/current-view-con.mjs",t)}(),Ti.Preload("ti/com/hmaker/site-current-view/com/current-view-con/_com.json",{name:"current-view-con",globally:!1,template:"./current-view-con.html",mixins:["./current-view-con.mjs"]}),Ti.Preload("ti/com/hmaker/site-current-view/site-current-view.html",'<div class="site-current-view"\n  :class="topClass">\n  \x3c!--\n    Title\n  --\x3e\n  <div class="current-view-title">\n    \x3c!-- For Site --\x3e\n    <div class="as-name">\n      <ti-icon \n        class="as-icon"\n        :value="theTitleIcon"/>\n      <span\n        class="as-text">{{theTitleText|i18n}}</span>\n    </div>\n    \x3c!-- Crumb --\x3e\n    <div class="as-crumb"></div>\n    \x3c!-- Actions --\x3e\n    <div class="as-actions">\n      <ti-menu\n        v-if="theCurrentAction"\n          :data="theCurrentAction"\n          :status="status"/>\n    </div>\n  </div>\n  \x3c!--\n    Main Area\n  --\x3e\n  <current-view-con\n    class="ti-fill-parent"\n    :com-type="theCurrentView.comType"\n    :com-conf="theCurrentView.comConf"/>\n</div>'),function(){const t={inheritAttrs:!1,props:{home:{type:Object,default:null},tree:{type:Object,default:()=>({})},currentMeta:{type:Object,default:null},currentContent:{type:String,default:null},currentData:{type:Object,default:null},mapping:{type:Object,default:()=>({})},views:{type:Object,default:()=>({})},status:{type:Object,default:()=>({})}},computed:{topClass(){return{"is-changed":this.status.changed}},theViewsMapping(){return new e(this.mapping||{})},hasCurrent(){return this.currentMeta},theTitleIcon(){return Wn.Util.getIconObj(this.currentMeta||this.home)},theTitleText(){return Wn.Util.getObjDisplayName(this.currentMeta||this.home)},theCurrentView(){let t={comType:"ti-loading",comConf:{icon:"zmdi-alert-circle-o",text:"i18n:blank"}};if(this.hasCurrent){let e=this.home.ph,i=this.currentMeta.ph;t=this.theViewsMapping.getView({path:Ti.Util.getRelativePath(e,i),type:this.currentMeta.tp,mime:this.currentMeta.mime,race:this.currentMeta.race},t),_.isString(t)&&(t=this.views[t])}return Ti.Util.explainObj(this,t)},theCurrentAction(){return this.theCurrentView.actions}}};class e{constructor(t){this.paths=new Ti.Mapping(t.paths),this.types=new Ti.Mapping(t.types),this.mimes=new Ti.Mapping(t.mimes),this.races=new Ti.Mapping(t.races)}getView({path:t,type:e,mime:i,race:n}={},a){return this.paths.get(t)||this.types.get(e)||this.mimes.get(i)||this.races.get(n)||a}}Ti.Preload("ti/com/hmaker/site-current-view/site-current-view.mjs",t)}(),Ti.Preload("ti/com/hmaker/site-current-view/_com.json",{name:"hmaker-site-current-view",globally:!0,template:"./site-current-view.html",mixins:["./site-current-view.mjs"],components:["./com/current-view-con","@com:hmaker/site-state","@com:ti/text/raw","@com:ti/obj/json","@com:wn/obj/preview","@com:wn/adaptlist"]}),Ti.Preload("ti/com/hmaker/site-manager/hm-site-manager.html",'<ti-gui\n  class="hmaker-site-manager"\n  :class="className"\n  keep-shown-to="hmaker-site-manager"\n  :layout="theLayout"\n  :schema="theSchema"\n  :can-loading="true"\n  :loading-as="status.reloading"\n  @block:event="onBlockEvent"/>'),function(){const t={inheritAttrs:!1,props:{home:{type:Object,default:null},tree:{type:Object,default:()=>({})},current:{type:Object,default:()=>({})},config:{type:Object,default:()=>({})},status:{type:Object,default:()=>({})}},computed:{theConfig(){return this.config[this.viewportMode]||{}},theLayout:()=>({type:"cols",border:!0,blocks:[{title:"i18n:hmaker-site-tree",size:280,name:"site-tree",body:"desktop-site-tree"},{name:"site-current",body:"desktop-site-current"}]}),theSchema(){return{"desktop-site-tree":{comType:"ti-tree",comConf:{data:this.tree.root,display:[{key:"rawData",type:"Object",transformer:"getIconObj",comType:"ti-icon"},"rawData.title","name"],blankAs:{icon:"zmdi-settings zmdi-hc-spin",text:"i18n:hmaker-site-tree-loading"},currentId:this.tree.currentId,showRoot:!1,defaultOpenDepth:1,extendFunctionSet:Wn.Util,openedNodePaths:this.tree.openedNodePaths}},"desktop-site-current":{comType:"hmaker-site-current-view",comConf:{home:this.home,tree:this.tree,currentMeta:this.current.meta,currentContent:this.current.content,currentData:this.current.data,mapping:this.theConfig.mapping,views:this.config.views,status:this.status}}}}},methods:{onBlockEvent({block:t,name:e,args:i}={}){let n=_.concat(t||[],e||[]).join("."),a=_.first(i);console.log("hmaker-site-manager:onBlockEvent",n,a),_.isUndefined(a)||("site-tree.opened"==n&&Ti.App(this).dispatch("main/reloadTreeNode",{id:a.id}),"site-tree.opened-status:change"==n&&Ti.App(this).dispatch("main/setTreeOpenedNodePaths",a),"site-tree.select"==n&&Ti.App(this).dispatch("main/setTreeSelected",a.currentId),"site-current.open"==n&&Ti.App(this).dispatch("main/reloadCurrent",a.rawData),"site-current.change"==n&&Ti.App(this).dispatch("main/onCurrentChanged",a))},editCurrentObjMeta(){let t=this.current.meta||this.home;if(!t)return Ti.Toast.Open("i18n:nil-obj");Wn.EditObjMeta(t)}},mounted:function(){Ti.Fuse.getOrCreate().add({key:"hmaker-site-manager",everythingOk:()=>!this.status.changed,fail:()=>{Ti.Toast.Open("i18n:wn-obj-nosaved","warn")}})},beforeDestroy:function(){Ti.Fuse.get().remove("hmaker-site-manager")}};Ti.Preload("ti/com/hmaker/site-manager/hm-site-manager.mjs",t)}(),Ti.Preload("ti/com/hmaker/site-manager/_com.json",{name:"hmaker-site-manager",globally:!0,i18n:"@i18n:hmaker",template:"./hm-site-manager.html",mixins:["./hm-site-manager.mjs"],components:["@com:hmaker/site-current-view"]}),Ti.Preload("ti/com/hmaker/site-state/com/site-node-editing/site-node-editing.html",'<div class="hmaker-site-node-editing">\n  <template v-if="hasNode">\n    \x3c!--\n      Heading\n    --\x3e\n    <div class="as-head">\n      \x3c!--Title Bar--\x3e\n      <div class="at-left">\n        <ti-icon :value="node.icon"/>\n        <span>{{node.title | i18n}}</span>\n      </div>\n      \x3c!--Action Menu--\x3e\n      <div \n        v-if="hasActionMenu"\n          class="at-right">\n          <ti-menu v-bind="myActionMenu"/>\n      </div>\n    </div>\n    \x3c!--\n      Editing\n    --\x3e\n    <div class="as-edit">\n      <component class="ti-fill-parent"\n        :is="Com.comType"\n        v-bind="Com.comConf"\n        :on-init="OnChildInit"\n        @change="OnChange"\n        @actions:update="OnActionsUpdate"/>\n    </div>\n  </template>\n  \x3c!--\n    Blank\n  --\x3e\n  <template v-else>\n    <ti-loading\n      text="i18n:blank-to-edit"\n      icon="zmdi-arrow-left"/>\n  </template>\n</div>'),function(){const t={inheritAttrs:!1,data:()=>({myActionMenu:null}),props:{path:{type:String,default:null},node:{type:Object,default:()=>({})}},computed:{hasNode(){return this.path&&!_.isEmpty(this.node)},hasActionMenu(){return!_.isEmpty(this.myActionMenu)},Com(){return"general"==this.path?{comType:"hmaker-edit-site-general",comConf:{data:this.node.data}}:"nav"==this.path?{comType:"hmaker-edit-site-nav",comConf:{data:this.node.data}}:{comType:"ti-form",comConf:{fields:[{name:"path"},{name:"node",comType:"ti-input-text",comConf:{readonly:!0,height:"7rem"}}],data:{path:this.path,node:JSON.stringify(this.node,null,"  ")}}}}},methods:{OnChange(t){this.$notify("change",{path:this.path,node:this.node,payload:t})},OnActionsUpdate(t={}){this.myActionMenu=t},OnChildInit(t){this.$myChildCom=t},callChild(t){console.log(t),this.$myChildCom&&this.$myChildCom[t]()}},watch:{path:function(){this.myActionMenu=null}}};Ti.Preload("ti/com/hmaker/site-state/com/site-node-editing/site-node-editing.mjs",t)}(),Ti.Preload("ti/com/hmaker/site-state/com/site-node-editing/_com.json",{name:"hmaker-site-node-editing",globally:!0,template:"./site-node-editing.html",mixins:["./site-node-editing.mjs"],components:["@com:hmaker/edit-site-general","@com:hmaker/edit-site-utils","@com:hmaker/edit-site-apis","@com:hmaker/edit-site-schema","@com:hmaker/edit-site-blocks","@com:hmaker/edit-site-nav","@com:hmaker/edit-site-router","@com:hmaker/edit-site-actions","@com:ti/form"]}),Ti.Preload("ti/com/hmaker/site-state/hm-site-state.html",'<ti-gui\n  class="hmaker-site-state ti-fill-parent"\n  keep-shown-to="hmaker-site-state"\n  :layout="theLayout"\n  :schema="theSchema"\n  @block:event="onBlockEvent"/>'),function(){const t={inheritAttrs:!1,data:()=>({myCurrentPathId:null,myTreeOpenedStatus:{}}),props:{home:{type:Object,default:()=>({})},content:{type:String,default:null}},computed:{theData(){let t=_.trim(this.content);return t?JSON.parse(t):{}},theTreeDisplay:()=>["<icon>","title","tip"],theTreeData(){return{name:"ROOT",children:[this._general,this._nav,this._apis,this._schema,this._blocks,this._router,this._actions,this._utils]}},_general(){return{icon:"fas-sliders-h",name:"general",title:"i18n:hmaker-site-state-general",data:_.pick(this.theData,["domain","apiBase","captcha","base","entry"])}},_utils(){return{icon:"zmdi-card-sd",name:"utils",title:"i18n:hmaker-site-state-utils",data:_.assign({},this.theData.utils)}},_apis(){let t=[];return _.forEach(this.theData.apis,(e,i)=>{t.push({icon:"zmdi-input-power",name:i,title:e.title||i,tip:i,data:e})}),{icon:"zmdi-input-composite",name:"apis",title:"i18n:hmaker-site-state-apis",children:t}},_schema(){let t=[];return _.forEach(this.theData.schema,(e,i)=>{t.push({icon:"fas-puzzle-piece",name:i,title:e.title||i,data:e})}),{icon:"fas-pencil-ruler",name:"schema",title:"i18n:hmaker-site-state-schema",children:t}},_blocks(){const t=(e,i)=>{if(_.isString(e))return{icon:"fas-external-link-alt",name:i,title:e,data:e};if(e.body){let t=_.isString(e.body)?e.body:e.body.comType||"ti-label";return{icon:"fas-puzzle-piece",name:i,title:`${_.isNumber(i)?`[${i}]`:`"${i}"`}:<${t}>`,data:e}}{let n=[];_.forEach(e.blocks,(e,i)=>{n.push(t(e,i))});return{icon:"im-layer",name:i,title:[_.isNumber(i)?`[${i}]`:`"${i}"`,Ti.I18n.get(`hmaker-layout-${e.type||"cols"}`)].join(":"),data:e,children:n}}};let e=[];return _.forEach(this.theData.blocks,(i,n)=>{let a=[];_.forEach(i,(e,i)=>{a.push(t(e,i))}),e.push({icon:{desktop:"zmdi-desktop-windows",tablet:"zmdi-tablet",phone:"zmdi-smartphone-iphone"}[n],name:n,title:`i18n:${n}`,data:i,children:a})}),{icon:"far-object-group",name:"blocks",title:"i18n:hmaker-site-state-blocks",children:e}},_nav(){return{icon:"im-sitemap",name:"nav",title:"i18n:hmaker-site-state-nav",data:this.theData.nav||[]}},_router(){let t=[];return _.forEach(this.theData.router,(e,i)=>{t.push({icon:"im-share",name:i,title:e.match,data:e})}),{icon:"zmdi-router",name:"router",title:"i18n:hmaker-site-state-router",children:t}},_actions(){let t=[];return _.forEach(this.theData.actions,(e,i)=>{t.push({icon:"im-flash",name:i,title:i,data:e})}),{icon:"im-rocket",name:"actions",title:"i18n:hmaker-site-state-actions",children:t}},theLayout:()=>({type:"tabs",tabAt:"bottom-left",blocks:[{title:"i18n:structure",type:"cols",border:!0,blocks:[{size:.372,name:"tree",body:"desktopStructureTree"},{name:"edit",body:"desktopStructureEdit"}]},{title:"i18n:source-code",name:"source",body:"desktopSourceCode"}]}),theSchema(){return{desktopStructureTree:{comType:"ti-tree",comConf:{mainWidth:300,border:"cell",multi:!1,data:this.theTreeData,display:this.theTreeDisplay,autoOpen:!1,currentId:this.myCurrentPathId,defaultOpenDepth:0,keepOpenBy:`hm-site-state-${this.home.id}-opened`,keepCurrentBy:`hm-site-state-${this.home.id}-current`,showRoot:!1}},desktopStructureEdit:{comType:"hmaker-site-node-editing",comConf:{path:this.myCurrentPathId,node:this.theCurrentNode}},desktopSourceCode:{comType:"ti-text-raw",comConf:{showTitle:!1,content:this.content,ignoreKeyUp:!0}}}},theCurrentNode(){return this.myCurrentPathId?Ti.Trees.getNodeByPath(this.theTreeData,this.myCurrentPathId):null}},methods:{updateByPath({path:t,payload:e}={}){let i=_.cloneDeep(this.theData);_.set(i,t,e),Ti.App(this).dispatch("main/onCurrentChanged",i)},onBlockEvent({block:t,name:e,args:i}={}){let n=_.concat(t||[],e||[]).join("."),a=_.first(i);console.log("hmaker-site-state:onBlockEvent",n,a),_.isUndefined(a)||("tree.select"==n?this.onSelected(a):"tree.opened-status:change"==n?this.onOpenedStatusChanged(a):"edit.change"==n?this.updateByPath(a):"source.change"==n&&Ti.App(this).dispatch("main/onCurrentChanged",a))},async onSelected({currentId:t,current:e}={}){this.myCurrentPathId=t},onOpenedStatusChanged(t){this.myTreeOpenedStatus=t}}};Ti.Preload("ti/com/hmaker/site-state/hm-site-state.mjs",t)}(),Ti.Preload("ti/com/hmaker/site-state/_com.json",{name:"hmaker-site-state",globally:!0,template:"./hm-site-state.html",mixins:["./hm-site-state.mjs"],components:["./com/site-node-editing"]}),Ti.Preload("ti/com/net/aliyun/vod/manager/vod-manager.html",'<ti-gui\n  class="net-aliyun-vod-manager"\n  :class="TopClass"\n  :layout="GuiLayout"\n  :schema="GuiSchema"\n  :can-loading="true"\n  :loading-as="reloading"\n  @filter::change="OnFilterChange"\n  @sorter::change="OnSorterChange"\n  @list::select="OnListSelect"\n  @video::preview="OnVideoPreview"\n  @pager::change="OnPagerChange"/>'),function(){const t={data:()=>({reloading:!1,list:[],pager:{},scrollToken:null,myCurrentId:null,myCurrentVideo:null,myFilter:{match:{}},mySort:{CreationTime:-1}}),props:{meta:{type:Object,default:()=>({})},fields:{type:String,default:"Title,CoverURL,Duration,CateName,Size,Description,RegionID"},filter:{type:Object,default:()=>({comType:"ti-combo-filter",comConf:{placeholder:"i18n:net-flt-nil",form:{fields:[{title:"i18n:net-ct",name:"CreationTime",type:"Array",comType:"ti-input-daterange"},{title:"i18n:net-vod-duration",name:"Duration",comType:"ti-switcher",comConf:{autoSplitValue:!1,options:[{value:"[0, 600]",text:"i18n:net-vod-du-short"},{value:"(600, 4800]",text:"i18n:net-vod-du-tv"},{value:"(4800, )",text:"i18n:net-vod-du-long"}]}}]}}})},sorter:{type:Object,default:()=>({comType:"ti-combo-sorter",comConf:{options:[{value:"CreationTime",text:"i18n:net-ct"}]}})},pageSize:{type:Number,default:20},multi:{type:Boolean,default:!0}},computed:{TopClass(){return this.getTopClass()},ConfName(){return _.get(this.meta,"vodConfigName")},CmdPrefix(){return this.ConfName?`aliyunvod ${this.ConfName}`:"aliyunvod"},ThePageNumber(){return _.get(this.pager,"pn")||1},ThePageSize(){return _.get(this.pager,"pgsz")||this.pageSize},WallItemDisplay:()=>({key:"..",comType:"ti-obj-thumb",comConf:t=>({id:t.videoId,title:t.title,preview:{type:"image",value:t.coverURL}})}),GuiLayout:()=>({type:"cols",border:!0,blocks:[{type:"rows",size:"61.8%",border:!0,blocks:[{type:"cols",size:".44rem",blocks:[{name:"filter",flex:"both",body:"pcFilter"},{name:"sorter",flex:"none",body:"pcSorter"}]},{name:"list",body:"pcList"},{name:"pager",size:40,body:"pcPager"}]},{icon:"zmdi-tv-alt-play",title:"i18n:video",name:"video",body:"pcVideo"}]}),GuiSchema(){return{pcFilter:{comType:this.filter.comType,comConf:_.assign({value:this.myFilter},this.filter.comConf)},pcSorter:{comType:this.sorter.comType,comConf:_.assign({value:this.mySort},this.sorter.comConf)},pcList:{comType:"ti-wall",comConf:{data:this.list,idBy:"videoId",multi:this.multi,display:this.WallItemDisplay}},pcPager:{comType:"ti-paging-jumper",comConf:{value:this.pager}},pcVideo:{comType:"net-aliyun-vod-video-info",comConf:{value:this.myCurrentVideo}}}}},methods:{async OnFilterChange(t){this.myFilter=t,this.pager=_.assign({},this.pager,{pn:1}),await this.reloadVideos()},async OnSorterChange(t){this.mySort=t,this.pager=_.assign({},this.pager,{pn:1}),await this.reloadVideos()},async OnPagerChange(t){if(this.pager=_.assign({},this.pager,t),this.meta){let e=_.get(t,"pgsz");Ti.Util.isNil(e)||Ti.Storage.session.setObject(this.meta.id,{pgsz:e})}await this.reloadVideos()},async OnListSelect({currentId:t,checkedIds:e,checked:i}){this.myCurrentId=t,t?(this.myCurrentVideo=await this.reloadVideoInfo(t),this.$notify("change",{currentId:this.myCurrentId,current:this.myCurrentVideo,checkedIds:e,checked:i})):(this.myCurrentVideo=null,this.$notify("change",void 0))},async OnVideoPreview({title:t,videoId:e,coverURL:i}={}){let n=await this.requestPlayAuth(e);await Ti.App.Open({icon:"zmdi-tv-alt-play",title:`Preview: ${t}`,textOk:null,textCancel:"i18n:close",position:"top",width:"90%",height:"90%",comType:"NetAliyunVodVideoPlayer",comConf:{videoId:e,playAuth:n,coverUrl:i},components:"@com:net/aliyun/vod/video/player"})},async requestPlayAuth(t){this.reloading=!0;let e=[this.CmdPrefix,"playauth",t,"-cqn"],i=await Wn.Sys.exec2(e.join(" "),{as:"json"});return this.reloading=!1,i.playAuth},async reloadVideoInfo(t){this.reloading=!0;let e=[this.CmdPrefix,"video",t,"-cqn"],i=await Wn.Sys.exec2(e.join(" "),{as:"json"});return this.reloading=!1,i},toAliyunTime(t){},toMatchStr(t,e={}){let i=[];return Ti.S.isBlank(t)||(/^[a-z0-9]{32}$/.test(t)?i.push(`VideoId = '${t}'`):i.push(`Title in ('${t.replace(/'/g,"")}')`)),_.forEach(e,(t,e)=>{if(!Ti.Util.isNil(t))if(_.isString(t)&&/^[\[(].+[)\]]$/.test(t))i.push(`${e}=${t}`);else if(/time/i.test(e)){let n="yyyy-MM-dd'T'HH:mm:ss'Z'",a=Ti.Types.formatDateTime(t,n);1==(a=_.concat(a)).length&&a.push(a[0]);let s=Ti.Types.toDate(a[1]).getTime()+864e5;a[1]=Ti.Types.formatDateTime(s,n),i.push(`${e}=['${a[0]}', '${a[1]}')`)}else if(_.isArray(t)){let n=_.map(t,t=>_.isString(t)?t.replace(/'/g,""):t);i.push(`${e} in (${n.join(",")})`)}else _.isString(t)?i.push(`${e} in ('${t.replace(/'/g,"")}')`):i.push(`${e} = ${t}`)}),i.join(" and ")},async reloadVideos(){this.reloading=!0;let t=[this.CmdPrefix];t.push("search","-fields",`'${this.fields}'`);let e=_.get(this.myFilter,"keyword"),i=_.get(this.myFilter,"match");if(!_.isEmpty(i)||!Ti.Util.isNil(e))try{t.push("-match",`"${this.toMatchStr(e,i)}"`)}catch(t){console.error(t)}let n=[];_.forEach(this.mySort,(t,e)=>{n.push(`${e}:${t>0?"ASC":"DESC"}`)}),_.isEmpty(n)||t.push("-sort ",`${n.join(" ")}`),t.push("-pn",this.ThePageNumber),t.push("-pgsz",this.ThePageSize),t.push("-as page -cqn");let a=await Wn.Sys.exec2(t.join(" "),{as:"json"});this.list=a.list,this.pager=a.pager,this.scrollToken=a.scrollToken,this.reloading=!1}},mounted:function(){if(this.meta){let t=Ti.Storage.session.getObject(this.meta.id);if(t){let e=_.get(t,"pgsz");this.pager.pgsz=e}}this.reloadVideos()}};Ti.Preload("ti/com/net/aliyun/vod/manager/vod-manager.mjs",t)}(),Ti.Preload("ti/com/net/aliyun/vod/manager/_com.json",{name:"net-aliyun-vod-manager",globally:!0,template:"./vod-manager.html",mixins:["./vod-manager.mjs"],components:["@com:ti/wall","@com:ti/combo/filter","@com:ti/combo/sorter","@com:ti/paging/jumper","@com:net/aliyun/vod/video/info"]}),Ti.Preload("ti/com/net/aliyun/vod/video/info/vod-video-info.html",'<div class="net-aliyun-vod-video-info"\n  :class="TopClass">\n  \x3c!--\n    Blank\n  --\x3e\n  <ti-loading\n    v-if="!hasVideo"\n      icon="fas-hand-point-left"\n      text="i18n:net-vod-video-nil"/>\n  \x3c!--\n    Show Content\n  --\x3e\n  <template v-else>\n    \x3c!--Preview--\x3e\n    <div class="as-preview">\n      <img \n        class="ti-fill-parent"\n        :src="VideoCoverURL"/>\n      <div class="as-btn" @click.left="OnClickPreview">\n        <i class="fas fa-play-circle"></i>\n      </div>\n    </div>\n    \x3c!--\n      Detail info\n    --\x3e\n    <div class="as-detail">\n      <ti-form\n        class="ti-cover-parent"\n        spacing="tiny"\n        :fields="FormFields"\n        :data="value"/>\n    </div>\n  </template>\n</div>'),function(){const t={props:{value:{type:Object,default:void 0}},computed:{TopClass(){return this.getTopClass()},hasVideo(){return!!this.value},VideoCoverURL(){return _.get(this.value,"coverURL")},FormFields:()=>[{title:"VideoID",name:"videoId"},{title:"Title",name:"title"},{title:"CateName",name:"cateName"},{title:"Description",name:"description"},{title:"Duration",name:"duration"},{title:"RegionId",name:"regionId"},{title:"Size",name:"size"},{title:"Status",name:"status"},{title:"Tags",name:"tags"},{title:"AuditStatus",name:"auditStatus"},{title:"DownloadSwitch",name:"downloadSwitch"},{title:"PreprocessStatus",name:"preprocessStatus"},{title:"CreateTime",name:"createTime"},{title:"ModifyTime",name:"modifyTime"}]},methods:{OnClickPreview(){this.$notify("preview",this.value)}}};Ti.Preload("ti/com/net/aliyun/vod/video/info/vod-video-info.mjs",t)}(),Ti.Preload("ti/com/net/aliyun/vod/video/info/_com.json",{name:"NetAliyunVodVideoInfo",globally:!0,template:"./vod-video-info.html",mixins:["./vod-video-info.mjs"],components:["@com:ti/form"]}),Ti.Preload("ti/com/net/aliyun/vod/video/player/vod-video-player.html",'<div class="net-vod-video-player"\n  :class="TopClass">\n  <div :id="PlayerID"></div>\n</div>'),function(){const t={props:{autoplay:{type:Boolean,default:!0},videoId:{type:String,default:void 0},coverUrl:{type:String,default:void 0},playAuth:{type:String,default:void 0},encryptType:{type:Number,default:void 0}},computed:{TopClass(){return this.getTopClass()},PlayerID:()=>`ALIPLAYER_${parseInt(1e5*Math.random())}`},methods:{initPlayer(){!this.$player&&this.playAuth&&this.videoId&&this.coverUrl&&(this.$player=new Aliplayer({id:this.PlayerID,width:"100%",height:"100%",autoplay:this.autoplay,vid:this.videoId,cover:this.coverUrl,encryptType:this.encryptType,playauth:this.playAuth}))}},watch:{},mounted:function(){this.initPlayer()}};Ti.Preload("ti/com/net/aliyun/vod/video/player/vod-video-player.mjs",t)}(),Ti.Preload("ti/com/net/aliyun/vod/video/player/_com.json",{name:"NetAliyunVodVideoPlayer",globally:!0,template:"./vod-video-player.html",mixins:["./vod-video-player.mjs"],components:[]}),Ti.Preload("ti/com/ti/actionbar/com/bar-item-action/bar-item-action.html",'<div class="bar-item-action">\n  <bar-item-info\n    v-bind="this"\n    @fire="OnFired"/>\n</div>'),function(){const t={inject:["$bar"],props:{name:{type:String,default:void 0},icon:{type:String,default:void 0},hideIcon:{type:Boolean,default:!1},text:{type:String,default:void 0},tip:{type:String,default:void 0},altDisplay:{type:[Object,Array],default:()=>[]},enabled:{type:[String,Array,Object],default:void 0},disabled:{type:[String,Array,Object],default:void 0},highlight:{type:[String,Array,Object],default:void 0},value:{type:[Boolean,String,Number,Array],default:!0},depth:{type:Number,default:0},status:{type:Object,default:()=>({})},action:{type:[String,Object,Function],default:void 0},notify:{type:[Boolean,String],default:!1},wait:{type:Number,default:0},shortcut:{type:String,default:void 0}},computed:{notifyName(){if(this.notify)return _.isString(this.notify)?this.notify:this.name}},methods:{OnFired(t){if(this.action){let t=Ti.App(this);Ti.Shortcut.genActionInvoking(this.action,{$com:this.$bar.$parent,argContext:t.$state(),wait:this.wait})()}this.notifyName&&this.$bar.notifyChange({name:this.notifyName,value:t})}},mounted:function(){this.shortcut&&Ti.App(this).guardShortcut(this,this.shortcut,()=>this.isEnabled)},destroyed:function(){this.shortcut&&Ti.App(this).pulloutShortcut(this)}};Ti.Preload("ti/com/ti/actionbar/com/bar-item-action/bar-item-action.mjs",t)}(),Ti.Preload("ti/com/ti/actionbar/com/bar-item-action/_com.json",{name:"bar-item-action",template:"./bar-item-action.html",mixins:["./bar-item-action.mjs"]}),Ti.Preload("ti/com/ti/actionbar/com/bar-item-group/bar-item-group.html",'<div class="bar-item-group"\n  :class="TopClass"\n  @mouseenter.stop="OnMouseEnter"\n  @mouseleave.stop="OnMouseLeave">\n  \x3c!--\n    Info\n  --\x3e\n  <bar-item-info\n    v-if="hasInfo"\n      v-bind="this"\n      :value="collapse"\n      :status="status"\n      @fire="OnFired"/>\n  \x3c!--\n    Group Children\n  --\x3e\n  <template v-if="showChildren">\n    <div v-if="isDepth1"\n      class="as-mask"\n      @click="doCollapse"></div>\n    <div ref="children"\n      v-if="showChildren"\n        class="as-children"\n        :style="ChildrenStyle"\n        @click.left="doCollapse">\n          <component \n            v-for="bi in items"\n              :key="bi.key"\n              :is="bi.comType"\n              v-bind="bi.comConf"\n              :depth="depth+1"\n              :items="bi.items"\n              :hide-icon="isChildrenWithoutIcon"\n              :status="status"/>\n    </div>\n  </template>\n</div>'),function(){const t={inject:["$bar"],provide:function(){return{depth:this.depth+1}},data:()=>({collapse:!0,isDocked:!1,barItems:[]}),props:{name:{type:String,default:void 0},icon:{type:String,default:void 0},hideIcon:{type:Boolean,default:!1},text:{type:String,default:void 0},tip:{type:String,default:void 0},altDisplay:{type:[Object,Array],default:()=>[]},enabled:{type:[String,Array,Object],default:void 0},disabled:{type:[String,Array,Object],default:void 0},highlight:{type:[String,Array,Object],default:void 0},depth:{type:Number,default:0},status:{type:Object,default:()=>({})},items:{type:Array,default:()=>[]},autoExtend:{type:Boolean,default:!1}},computed:{TopClass(){return this.getTopClass({"is-collapse":this.collapse,"is-extended":!this.collapse},`is-depth-${this.depth}`)},isDepth0(){return 0==this.depth},isDepth1(){return 1==this.depth},isDepthX(){return this.depth>1},hasInfo(){return this.icon||this.text},isChildrenWithoutIcon(){for(let t of this.items)if(t.comConf&&t.comConf.icon)return!1;return!0},showChildren(){return this.isDepth0||!this.collapse},ChildrenStyle(){if(!this.isDepth0&&!this.isDocked)return{visibility:"hidden"}}},methods:{OnMouseEnter(){this.isDepthX&&this.doExtend()},OnMouseLeave(){this.isDepthX&&this.doCollapse()},OnFired(t){t?this.doExtend():this.doCollapse()},doExtend(){this.collapse=!1},doCollapse(){this.collapse=!0,this.isDocked=!1},doDockChildren(){this.$nextTick(()=>{this.$refs.children&&this.depth>0&&(Ti.Dom.dockTo(this.$refs.children,this.$el,{mode:this.isDepthX?"V":"H",position:"fixed",space:this.isDepthX?{x:1}:{y:3}}),_.delay(()=>{this.isDocked=!0},5))})}},watch:{collapse:"doDockChildren"},mounted:function(){this.doDockChildren(),this.$bar.allocGroup(this)},beforeDestroy:function(){this.$bar.freeGroup(this)}};Ti.Preload("ti/com/ti/actionbar/com/bar-item-group/bar-item-group.mjs",t)}(),Ti.Preload("ti/com/ti/actionbar/com/bar-item-group/_com.json",{name:"bar-item-group",template:"./bar-item-group.html",mixins:["./bar-item-group.mjs"]}),Ti.Preload("ti/com/ti/actionbar/com/bar-item-info/bar-item-info.html",'<div class="bar-item-info"\n  :class="TopClass"\n  @click.left="OnClickTop">\n  \x3c!--\n    Icon\n  --\x3e\n  <span\n    v-if="isShowIcon"\n      class="as-icon">\n      <ti-icon\n        v-if="hasIcon" \n          :value="CurrentDisplay.icon"/>\n  </span>\n  \x3c!--\n    Text\n  --\x3e\n  <span\n    v-if="CurrentDisplay.text"\n      class="as-text"\n        >{{CurrentDisplay.text|i18n}}</span>\n  \x3c!--\n    Shortcut\n  --\x3e\n  <span\n    v-if="isShowShortcut"\n      class="as-shortcut">{{shortcut}}</span>\n</div>'),function(){const t={inject:["$bar"],props:{name:{type:String,default:void 0},icon:{type:String,default:void 0},hideIcon:{type:Boolean,default:!1},text:{type:String,default:void 0},tip:{type:String,default:void 0},shortcut:{type:String,default:void 0},altDisplay:{type:[Object,Array],default:()=>[]},enabled:{type:[Boolean,String,Array,Object],default:void 0},disabled:{type:[Boolean,String,Array,Object],default:void 0},highlight:{type:[Boolean,String,Array,Object],default:void 0},value:{type:[Boolean,String,Number,Array],default:void 0},depth:{type:Number,default:0},status:{type:Object,default:()=>({})}},computed:{TopClass(){return this.getTopClass({"is-enabled":this.isEnabled,"is-disabled":this.isDisabled,"is-highlight":this.isHighlight,"is-top":1==this.depth,"is-sub":this.depth>1,"has-icon":!!this.icon,"no-icon":!this.icon,"show-icon":this.isShowIcon,"hide-icon":!this.isShowIcon},`is-depth-${this.depth}`)},AltDisplay(){return _.isArray(this.altDisplay)?this.altDisplay:this.altDisplay?[this.altDisplay]:[]},isEnabled(){return Ti.Util.isNil(this.enabled)?!(!Ti.Util.isNil(this.disabled)&&this.isMatchStatus(this.disabled)):this.isMatchStatus(this.enabled)},isDisabled(){return!this.isEnabled},isHighlight(){return!Ti.Util.isNil(this.highlight)&&this.isMatchStatus(this.highlight)},isShowShortcut(){return this.shortcut&&this.depth>1},isShowIcon(){return!this.hideIcon||this.hasIcon},hasIcon(){return!!this.CurrentDisplay.icon},CurrentDisplay(){let t={icon:this.icon,text:this.text,tip:this.tip,value:this.value};if(!_.isEmpty(this.AltDisplay))for(let e of this.AltDisplay){let i=e.match||this.name;if(this.isMatchStatus(i)){_.assign(t,_.pick(e,["icon","text","tip","value"]));break}}return t},TheValues(){let t=this.CurrentDisplay.value;return _.isBoolean(t)?[t,!t]:_.isArray(t)?t:[t]}},methods:{OnClickTop(){if(!this.isDisabled){let t=this.isHighlight?_.last(this.TheValues):_.first(this.TheValues);this.$emit("fire",t)}},isMatchStatus(t){if(_.isBoolean(t))return t;if(_.isString(t))return!!_.get(this.status,t);if(_.isArray(t)){for(let e of t)if(!_.get(this.status,e))return!1;return!0}return!!_.isPlainObject(t)&&(t.validate?Ti.Validate.match(this.status,t.validate):_.isMatch(this.status,t))}}};Ti.Preload("ti/com/ti/actionbar/com/bar-item-info/bar-item-info.mjs",t)}(),Ti.Preload("ti/com/ti/actionbar/com/bar-item-info/_com.json",{name:"bar-item-info",template:"./bar-item-info.html",mixins:["./bar-item-info.mjs"]}),Ti.Preload("ti/com/ti/actionbar/com/bar-item-line/bar-item-line.html",'<div class="bar-item-line"\n  :class="TopClass"></div>'),function(){const t={inject:["$bar"],props:{depth:{type:Number,default:0}},computed:{TopClass(){return this.getTopClass({"is-top":1==this.depth,"is-sub":this.depth>1})}}};Ti.Preload("ti/com/ti/actionbar/com/bar-item-line/bar-item-line.mjs",t)}(),Ti.Preload("ti/com/ti/actionbar/com/bar-item-line/_com.json",{name:"bar-item-line",template:"./bar-item-line.html",mixins:["./bar-item-line.mjs"]}),Ti.Preload("ti/com/ti/actionbar/ti-actionbar.html",'<div class="ti-actionbar"\n  :class="TopClass"\n  v-ti-activable>\n  <bar-item-group \n    name="Ti_ActionBar_Root_Group"\n    :items="BarItems"\n    :status="status"/>\n</div>'),function(){const t={provide:function(){return{$bar:this,depth:0}},data:()=>({mySeq:0,myGroups:{}}),props:{items:{type:Array,default:()=>[]},align:{type:String,default:"left",validator:t=>/^(left|right|center)$/.test(t)},status:{type:Object,default:()=>({})}},computed:{TopClass(){return this.getTopClass(`align-${this.align}`)},BarItems(){let t=[];return _.forEach(this.items,e=>{let i=this.evalBarItem(e);i&&t.push(i)}),t}},methods:{allocGroup(t){this.myGroups[t.name]=t},freeGroup(t){delete this.myGroups[t.name]},notifyChange({name:t,value:e}={}){t&&this.$notify("change",{name:t,value:e})},evalBarItem(t){let e=this.getItemType(t),i=this.getItemKey(e),n={type:e,key:i,comType:`bar-item-${e}`,comConf:_.defaults(_.omit(t,"items"),{name:i})};if("group"==e&&_.isArray(t.items)){n.items=[];for(let e of t.items){let t=this.evalBarItem(e);n.items.push(t)}}return n},getItemType:t=>t.type?_.toLower(t.type):_.isEmpty(t)?"line":_.isArray(t.items)?"group":"action",getItemKey(t="BarItem"){return`${t}-${this.mySeq++}`},collapseAllGroup(){_.forEach(this.myGroups,t=>{t.doCollapse()})},__ti_shortcut(t){Ti.InvokeBy({ESCAPE:()=>this.collapseAllGroup()},t)}},mounted:function(){Ti.Viewport.watch(this,{resize:()=>this.collapseAllGroup()})},beforeDestroy:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/actionbar/ti-actionbar.mjs",t)}(),Ti.Preload("ti/com/ti/actionbar/_com.json",{name:"ti-actionbar",globally:!0,template:"./ti-actionbar.html",mixins:["./ti-actionbar.mjs"],components:["./com/bar-item-action","./com/bar-item-group","./com/bar-item-line","./com/bar-item-info"]}),Ti.Preload("ti/com/ti/button/ti-button.html",'<div class="ti-button"\n  :class="topClass">\n  <ul>\n    <li v-for="it in items"\n      :key="it.name"\n      :class="it.buttonClass"\n      @click="onClickItem(it)">\n      \x3c!--\n        Icon\n      --\x3e\n      <ti-icon v-if="it.icon"\n        :value="it.icon"/>\n      \x3c!--\n        Text\n      --\x3e\n      <span v-if="it.text"\n        class="it-text">{{it.text|i18n}}</span>\n    </li>\n  </ul>\n</div>'),function(){const t={inheritAttrs:!1,props:{size:{type:String,default:"normal",validator:t=>/^(big|normal|small|tiny)$/.test(t)},align:{type:String,default:"center"},setup:{type:[Array,Object],default:()=>[]}},computed:{topClass(){return Ti.Css.mergeClassName([`is-${this.size}`,`at-${this.align}`],this.className)},items(){let t=[].concat(this.setup),e=[];return _.forEach(t,(t,i)=>{let n={};n.name=t.name||`item-${i}`,n.eventName=t.eventName||n.name,n.payload=t.payload,n.icon=t.icon,n.text=t.text,n.disabled=t.disabled,n.buttonClass={[`as-do-${n.name}`]:!0,"is-enabled":!t.disabled,"is-disabled":!!t.disabled,"is-invert-icon":!!t.invertIcon},e.push(n)}),e}},methods:{onClickItem(t){t.disabled||this.$notify(t.eventName,t.payload)}}};Ti.Preload("ti/com/ti/button/ti-button.mjs",t)}(),Ti.Preload("ti/com/ti/button/_com.json",{name:"ti-button",globally:!0,template:"./ti-button.html",mixins:["./ti-button.mjs"],components:[]}),Ti.Preload("ti/com/ti/calendar/ti-calendar.html",'<div class="ti-calendar">\n  \x3c!--\n    Heading\n  --\x3e\n  <div class="as-head">\n    \x3c!--\n      Switcher\n    --\x3e\n    <div class="as-switcher" :class="switcherClass">\n      <div class="as-title">\n        <ti-input-month\n          width="100%"\n          height=".36rem"\n          icon="far-calendar-alt"\n          :hide-border="true"\n          :value="theViewDate"\n          :format="theViewRangeText"\n          :editable="monthEditable"\n          :begin-year="beginYear"\n          :end-year="endYear"\n          @change="onMonthChanged"/>\n      </div>\n      <div class="go-btn to-prev-block" @click="gotoMatrix(-1)">\n        <ti-icon value="zmdi-chevron-left"/>\n      </div>\n      <div class="go-btn go-today" @click="gotoToday">\n        <span>{{\'today\'|i18n}}</span>\n      </div>\n      <div class="go-btn to-next-block" @click="gotoMatrix(1)">\n        <ti-icon value="zmdi-chevron-right"/>\n      </div>\n    </div>\n    \x3c!--\n      Change Mode\n      TODO maybe should support mode changing here\n    --\x3e\n    \n  </div>\n  \x3c!--\n    Day cells\n  --\x3e\n  <div class="as-matrix-table">\n    <div v-for="matrix in dateMatrixList"\n      class="as-matrix">\n      <table>\n        <thead>\n          <th v-for="wt in weekTitles">{{wt.title}}</th>\n        </thead>\n        <tbody>\n          <tr v-for="row in matrix">\n            <td v-for="cell in row" :class="cell.type">\n              <slot name="cell">\n                <span class="as-date-item"\n                  @click="onClickCell(cell)">{{cell.text}}</span>\n              </slot>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>'),function(){const t={data:()=>({view_date:null}),props:{value:{type:[String,Number,Date,Array],default:null},range:{type:Boolean,default:!1},firstDayInWeek:{type:[Number,String],default:0},matrixMode:{type:String,default:"monthly"},matrixCount:{type:Number,default:1},monthEditable:{type:Boolean,default:!0},monthFormat:{type:String,default:"yyyy-MM-dd"},beginYear:{type:[Number,String],default:1970},endYear:{type:[Number,String],default:(new Date).getFullYear()+1}},watch:{value:function(t){if(t){let[e]=[].concat(t),i=Ti.Types.toDate(e).getTime();_.inRange(i,...this.theMatrixRangeInMs)||(this.view_date=null)}}},computed:{switcherClass(){if(this.isMonthly&&this.matrixCount>1)return"sz-double"},isMonthly(){return"monthly"==this.matrixMode},isWeekly(){return"weekly"==this.matrixMode},today:()=>new Date,todayName(){return Ti.Types.formatDate(this.today,"yyyy-MM-dd")},theDate(){return _.isArray(this.value)?this.value.length>0?Ti.Types.toDate(this.value[0]):null:Ti.Types.toDate(this.value,null)},theRangeInMs(){let t,e=new Date(this.theDate);t=_.isArray(this.value)&&this.value.length>1?Ti.Types.toDate(this.value[1]):new Date(e);let i=[e.getTime(),t.getTime()].sort();return e=Ti.DateTime.setTime(new Date(i[0])),t=Ti.DateTime.setDayLastTime(new Date(i[1])),[e.getTime(),t.getTime()]},theRangeInText(){return Ti.Types.formatDate(this.theRangeInMs,"yyyy-MM-dd")},theRangeBeginDate(){return new Date(this.theRangeInMs[0])},theRangeEndDate(){return new Date(this.theRangeInMs[1])},theMatrixRangeInMs(){let t=this.dateMatrixList[0][0][0],e=this.dateMatrixList.length-1,i=this.dateMatrixList[e].length-1,n=this.dateMatrixList[e][i].length-1,a=this.dateMatrixList[e][i][n],s=new Date(t.raw),o=new Date(a.raw);return Ti.DateTime.setTime(s),Ti.DateTime.setDayLastTime(o),[s.getTime(),o.getTime()]},theMatrixRange(){return[new Date(this.theMatrixRangeInMs[0]),new Date(this.theMatrixRangeInMs[1])]},theViewRange(){let t=this.dateMatrixList.length-1,e=this.dateMatrixList[t].length-1,i=this.dateMatrixList[t][e].length-1,n=this.dateMatrixList[t][e][i];for(;"in-month"!=n.type&&i>0;)n=this.dateMatrixList[t][e][--i];let a=new Date(this.theViewDate),s=new Date(n.raw);return Ti.DateTime.setTime(a),Ti.DateTime.setDayLastTime(s),[a,s]},theViewRangeText(){let t=this.theViewRange[0];if(this.isMonthly&&this.matrixCount>1){let e=this.theViewRange[1],i=t.getFullYear(),n=t.getMonth(),a=e.getFullYear(),s=e.getMonth(),o=Ti.DateTime.getMonthAbbr(n),l=Ti.DateTime.getMonthAbbr(s),r={yy0:i,yy1:a,MM0:++n,MM1:++s,MA0:o,MA1:l,MT0:Ti.I18n.get(o),MT1:Ti.I18n.get(l)};if(i!=a)return Ti.I18n.getf("cal.m-range-beyond-years",r);if(n!=s)return Ti.I18n.getf("cal.m-range-beyond-months",r)}return Ti.Types.formatDate(t,this.monthFormat)},theDateName(){return Ti.Types.formatDate(this.theDate,"yyyy-MM-dd")},theViewDate(){return this.view_date||this.theDate||new Date},theViewYear(){return this.theViewDate.getFullYear()},theViewMonth(){return this.theViewDate.getMonth()},theViewMonthAbbr(){return Ti.DateTime.getMonthAbbr(this.theViewMonth)},weekTitles(){let t=this.firstDayInWeek;if(_.isNumber(t))t=_.clamp(t,0,6);else if(_.isString(t)){let e=_.lowerCase(t);t=Ti.DateTime.getWeekDayValue(e,0)}let e=[];for(let i=0;i<7;i++)e.push({day:t,title:Ti.I18n.get(["cal","week",t])}),++t>=7&&(t=0);return e},weekFirstDayValue(){return _.isString(this.firstDayInWeek)?Ti.DateTime.getWeekDayValue(this.firstDayInWeek,0):_.clamp(this.firstDayInWeek,0,6)},dateMatrixList(){let t=new Date(this.theViewDate),e=[],i=this.theViewYear,n=this.theViewMonth;if(this.isMonthly)for(let a=0;a<this.matrixCount;a++){let{matrix:a,lastDate:s}=this.createMatrix(t,i,n);e.push(a),t=Ti.DateTime.moveDate(new Date(s),1),++n>=12&&(n=0,i++)}else{let{matrix:i}=this.createMatrix(t);e.push(i)}return e}},methods:{createMatrix(t,e,i){this.isMonthly&&t.setDate(1);let n=this.weekFirstDayValue;for(;t.getDay()>n;)Ti.DateTime.moveDate(t,-1);for(;t.getDay()<n;)Ti.DateTime.moveDate(t,1);let a=0,s=[],o=null;for(;;){let n=[];for(let e=0;e<7;e++){let s=7*a+e,l=(o=Ti.DateTime.createDate(t,s)).getMonth(),r=o.getDate(),c=Ti.Types.formatDate(o,"yyyy-MM-dd"),d=!1;d=this.range?_.inRange(o.getTime(),...this.theRangeInMs):c==this.theDateName;let h={"is-prev":l<i,"is-next":l>i,"in-month":l==i,"is-today":this.todayName==c,"is-selected":d},m=""+r;if(1==r&&(this.isMonthly&&this.matrixCount>1||this.isWeekly)){let t=Ti.DateTime.getMonthAbbr(l);m=Ti.I18n.get(`cal.abbr.${t}`)}n.push({x:e,y:a,index:s,type:h,name:c,text:m,year:o.getFullYear(),month:l,day:o.getDay(),date:o.getDate(),raw:o})}if(a++,this.isWeekly){if(a>_.clamp(this.matrixCount,1,100))break}else{if(!this.isMonthly)break;if(n[0].year==e&&n[0].month>i||n[0].year>e)break}s.push(n)}return{matrix:s,lastDate:o}},gotoToday(){this.view_date=new Date},gotoMatrix(t=0){let e=this.theViewDate,i=new Date(e.getFullYear(),e.getMonth(),e.getDate());if(this.isMonthly)Ti.DateTime.moveMonth(i,t);else{if(!this.isWeekly)return;Ti.DateTime.moveDate(i,7*t*this.matrixCount)}this.view_date=i},onMonthChanged(t){let e=Ti.Types.toDate(t);this.view_date=e},onClickCell(t){if(this.range)if(_.isArray(this.value))if(1==this.value.length){let e=[t.raw.getTime(),this.theDate.getTime()].sort(),i=Ti.Types.toDate(e[0]),n=Ti.Types.toDate(e[1]);this.$notify("change",[i,n])}else this.$notify("change",[t.raw]);else this.$notify("change",[t.raw]);else this.$notify("change",t.raw)}},mounted:function(){this.view_date=this.theDate||new Date}};Ti.Preload("ti/com/ti/calendar/ti-calendar.mjs",t)}(),Ti.Preload("ti/com/ti/calendar/_com.json",{name:"ti-calendar",globally:!0,template:"./ti-calendar.html",mixins:["./ti-calendar.mjs"],components:["@com:ti/input/month"]}),Ti.Preload("ti/com/ti/chart/g2/ti-chart-g2.html",'<div class="ti-chart ti-chart-g2">\n  <section ref="chart"\n    class="chart-main ti-fill-parent"></section>\n</div>'),function(){const t={inheritAttrs:!1,props:{data:{type:Array,default:()=>[]},padding:{type:[Number,Array,String],default:"auto"},setup:{type:Function,default:_.identity},autoSource:{type:Boolean,default:!0}},watch:{data:function(){this.debounceRedrawChart()}},computed:{},methods:{redrawChart(){if(_.isElement(this.$refs.chart)){if(this.__g2_chart){try{this.__g2_chart.destroy()}catch(t){}$(this.$refs.chart).empty()}this.__g2_chart=function({$refs:t,padding:e,data:i,setup:n=_.identity,autoSource:a}={}){let s=t.chart,o=G2.DomUtil.getWidth(s),l=G2.DomUtil.getHeight(s),r=new G2.Chart({container:s,padding:e,width:o,height:l});return a&&i&&!_.isEmpty(i)&&r.source(i),n(r,i,{width:o,height:l}),r.render(),r}(this)}},drawAll(){this.$nextTick(()=>{this.redrawChart()})}},mounted:function(){this.drawAll(),this.debounceRedrawChart=_.debounce(()=>{this.redrawChart()},500),this.debounceRedrawAll=_.debounce(()=>{this.drawAll()},500),Ti.Viewport.watch(this,{resize:function(){let t=this.__g2_chart;if(t){this.$notify("before_resize");let e=this.$refs.chart,i=G2.DomUtil.getWidth(e),n=G2.DomUtil.getHeight(e);t.changeWidth(i),t.changeHeight(n)}}})},beforeDestroy:function(){this.__g2_chart&&this.__g2_chart.destroy(),Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/chart/g2/ti-chart-g2.mjs",t)}(),Ti.Preload("ti/com/ti/chart/g2/_com.json",{name:"ti-chart-g2",globally:!0,template:"./ti-chart-g2.html",mixins:["./ti-chart-g2.mjs"],components:[],deps:[]}),Ti.Preload("ti/com/ti/chart/simple/ti-chart-simple.html",'<div class="ti-chart ti-chart-simple">\n  <header \n    v-if="title" \n    @click="drawAll">{{title}}</header>\n  <aside v-if="aside"\n    :class="asideClass">\n    <slot name="aside">\n      <span v-if="unit">{{unit}}</span>\n    </slot>\n  </aside>\n  <section class="chart-main" ref="chart"></section>\n  <div v-if="hasSlider"\n    ref="slider"\n    class="chart-slider">\n  </div>\n</div>'),function(){const t={inheritAttrs:!1,props:{title:{type:String,default:null},data:{type:Array,default:()=>[]},type:{type:String,default:"interval"},axisX:{type:Object,default:()=>({name:"name",title:"name"})},axisY:{type:Object,default:()=>({name:"value",title:"value"})},aside:{type:String,default:"left"},unit:{type:String,default:null},padding:{type:Array,default:()=>[20,20,50,50]},minValue:{type:Number,default:0},maxValue:{type:Number,default:void 0},color:{type:String,default:null},animate:{type:Object,default:()=>({delay:500,duration:1e3})},valueInterval:{type:Number,default:100},coord:{type:[String,Object],default:null}},watch:{data:function(){this.debounceRedrawChart()}},computed:{asideClass(){return`at-${this.aside||"none"}`},hasSlider:()=>!1},methods:{redrawChart(){this.__g2_chart&&(this.__g2_chart.destroy(),$(this.$refs.chart).empty()),this.__g2_chart=function({$refs:t,type:e="interval",unit:i,data:n=[],axisX:a,axisY:s,color:o,animate:l,padding:r,minValue:c,maxValue:d,valueInterval:h,coord:m}={}){let u=t.chart,p=G2.DomUtil.getWidth(u),y=G2.DomUtil.getHeight(u);if(_.isUndefined(d)){d=0;let t=s.name;for(let e of n)d=Math.max(d,e[t])}let f=new G2.Chart({container:u,padding:r,width:p,height:y});f.source(n),f.legend(!1);let g={label:{textStyle:{fill:a.color||"#888"}}};f.axis(a.name,g);let v={label:{autoRotate:!1,textStyle:{fill:s.color||"#888"}},grid:{type:"line",lineStyle:{stroke:"rgba(255,255,255,0.4)",lineWidth:.5,lineDash:!1}}};f.axis(s.name,v),m&&"transpose"==m&&f.coord().transpose();let b=s.title||s.name;f.scale(s.name,{alias:b,type:"linear",min:c,max:d,tickInterval:h});let T={line(){let t=f.line().position(w);return f.point().position(w).size(4).shape("circle").style({stroke:"#fff",lineWidth:1}),t},interval:()=>f.interval().position(w),intervalDodge:()=>f.interval().position(w).adjust([{type:"dodge",marginRatio:1/32}]),intervalStack:t=>f.intervalStack().position(t)}[e];T=T||(t=>f.interval().position(t));let w=`${a.name}*${s.name}`,x=T(w);return o&&x.color(o),l&&x.animate(l),f.render(),f}(this)},drawAll(){this.$nextTick(()=>{this.redrawChart()})}},mounted:function(){this.drawAll(),this.debounceRedrawChart=_.debounce(()=>{this.redrawChart()},500),this.debounceRedrawAll=_.debounce(()=>{this.drawAll()},500)},beforeDestroy:function(){this.__g2_chart&&this.__g2_chart.destroy()}};Ti.Preload("ti/com/ti/chart/simple/ti-chart-simple.mjs",t)}(),Ti.Preload("ti/com/ti/chart/simple/_com.json",{name:"ti-chart-simple",globally:!0,template:"./ti-chart-simple.html",mixins:["./ti-chart-simple.mjs"],components:[],deps:[]}),Ti.Preload("ti/com/ti/color/ti-color.html",'<div class="ti-color" >\n  \x3c!--\n    Color Matrix Table\n  --\x3e\n  <div class="as-table">\n    <table>\n      <thead>\n        <tr>\n          <th v-for="color in colorGrays">\n            <span \n              :style="colorItemStyle(color)" \n              @click="onColorClicked(color)"></span>\n          </th>\n        </tr>\n        <tr>\n            <th v-for="color in colorMajors">\n              <span \n                :style="colorItemStyle(color)" \n                @click="onColorClicked(color)"></span>\n            </th>\n          </tr>\n      </thead>\n      \x3c!--Matrix--\x3e\n      <tbody>\n        <tr v-for="row in colorMatrix"\n          class="as-row">\n          <td v-for="color in row">\n            <span \n              :style="colorItemStyle(color)" \n              @click="onColorClicked(color)"></span>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div> \x3c!-- End Matrix--\x3e\n  \x3c!--\n    Color Input\n  --\x3e\n  <div class="as-input">\n    <div class="as-hex">\n        <input class="as-value" \n          spellcheck="false"\n          :value="theHex"\n          @change="onHexChanged"/>\n    </div>\n    <div class="as-alpha">\n      <ti-input-num \n        :value="theAlpha"\n        :max-value="100"\n        :min-value="0"\n        :step="10"\n        @change="onAlphaChanged"/>\n    </div>\n  </div>\n  \x3c!--\n    Color Preview\n  --\x3e\n  <div class="as-preview">\n    <span>{{theColorValue}}</span>\n  </div>\n</div>'),function(){const t={inheritAttrs:!1,props:{value:{type:[String,Number],default:null},majorColors:{type:Array,default:()=>["#980000","#ff0000","#ff9900","#ffff00","#00ff00","#00ffff","#4a86e8","#0000ff","#9900ff","#ff00ff"]},topColors:{type:Array,default:()=>["#e6b8af","#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#c9daf8","#cfe2f3","#d9d2e9","#ead1dc"]},bottomColors:{type:Array,default:()=>["#5b0f00","#660000","#783f04","#7f6000","#274e13","#0c343d","#1c4587","#073763","#20124d","#4c1130"]},middleDegree:{type:Number,default:5}},computed:{theColor(){return Ti.Types.toColor(this.value,null)},theHex(){if(this.theColor)return this.theColor.hex},theAlpha(){if(this.theColor)return Math.round(100*this.theColor.alpha)},theColorValue(){return this.theColor?this.theColor.rgba:Ti.I18n.get("empty")},colCount(){return this.topColors.length},colorGrays(){let t=[],e=255/this.colCount;for(let i=0;i<this.colCount;i++){let n=Math.round((i+1)*e);t.push(Ti.Types.toColor(n))}return t},colorMajors(){let t=[];for(let e of this.majorColors)t.push(Ti.Types.toColor(e));return t},colorMatrix(){let t=[];for(let e of this.topColors)t.push(Ti.Types.toColor(e));let e=[];for(let t of this.bottomColors)e.push(Ti.Types.toColor(t));let i=[t];for(let n=0;n<this.middleDegree-1;n++){let a=[];for(let i=0;i<this.colCount;i++){let s=t[i],o=e[i],l=(n+1)/this.middleDegree,r=s.between(o,l);r.adjustByHSL({s:.5}),a.push(r)}i.push(a)}return i.push(e),i}},methods:{colorItemStyle:t=>({"background-color":t.rgb}),onHexChanged(t){let e=_.trim(t.target.value);/^[0-9a-f]{3,6}$/i.test(e)&&(e="#"+e);let i=Ti.Types.toColor(e);this.$notify("change",i)},onAlphaChanged(t){let e=this.theColor?this.theColor.clone():Ti.Types.toColor("black");e.alpha=t/100,this.$notify("change",e)},onColorClicked(t){let e=t.clone();_.isNumber(this.theAlpha)&&(e.alpha=this.theAlpha/100),this.$notify("change",e)}}};Ti.Preload("ti/com/ti/color/ti-color.mjs",t)}(),Ti.Preload("ti/com/ti/color/_com.json",{name:"ti-color",globally:!0,template:"./ti-color.html",mixins:["./ti-color.mjs"]}),Ti.Preload("ti/com/ti/combo/box/ti-combo-box.html",'<div class="ti-combo-box" \n  :class="topClass"\n  :style="topStyle">\n  \x3c!--\n    Box: Component\n  --\x3e\n  <div class="as-box" ref="box" :style="theBoxStyle">\n    <slot name="box"><div>ComboBox</div></slot>\n  </div>\n  \x3c!--\n    Mask & Drop\n  --\x3e\n  <template v-if="\'extended\'==status">\n    \x3c!--Mask--\x3e\n    <div class="as-mask" @click.left="notifyCollapse()"></div>\n    \x3c!--Drop--\x3e\n    <div class="as-drop" ref="drop" :style="theDropStyle">\n      <slot name="drop"><div>ComboBox Dropdown</div></slot>\n    </div>\n  </template>\n</div>'),function(){const t={data:()=>({box:{position:null,width:null,height:null,top:null,left:null},myDropDockReady:!1}),props:{width:{type:[Number,String],default:null},height:{type:[Number,String],default:null},dropFloat:{type:Boolean,default:!0},dropWidth:{type:[Number,String],default:"box"},dropHeight:{type:[Number,String],default:null},dropOverflow:{type:[String,Array],default:"auto",validator:t=>{if(Ti.Util.isNil(t))return!0;if(_.isString(t)&&(t=t.split(" ")),_.isArray(t)){if(t.length>2||0==t.length)return!1;for(let e of t)if(!/^(auto|hidden|visible|scroll)$/.test(e))return!1;return!0}return!1}},status:{type:String,default:"collapse",validator:t=>/^(collapse|extended)$/.test(t)}},computed:{topClass(){return this.getTopClass(`is-${this.status}`)},topStyle(){return Ti.Css.toStyle({height:this.box.height})},theBoxStyle(){if(this.dropFloat)return Ti.Css.toStyle(this.box)},theDropStyle(){return Ti.Css.toStyle({overflow:this.dropOverflow,visibility:this.myDropDockReady?"visible":"hidden"})}},methods:{notifyCollapse(t=!1){this.$notify("collapse",{escaped:t})},dockDrop(){let t=this.$refs.drop,e=this.$refs.box;_.isElement(t)&&_.isElement(e)&&"extended"==this.status&&_.delay(()=>{let i=Ti.Rects.createBy(e),n=Ti.Rects.createBy(t);_.assign(this.box,{position:"fixed"},i.raw());let a={};"box"==this.dropWidth?a.width=Math.max(i.width,n.width):Ti.Util.isNil(this.dropWidth)||(this.dropWidth<0?a.width=Math.max(i.width,Math.abs(this.dropWidth)):a.width=this.dropWidth),Ti.Util.isNil(this.dropHeight)||(a.height=this.dropHeight),Ti.Dom.setStyle(t,Ti.Css.toStyle(a)),Ti.Dom.dockTo(t,e,{space:{y:2}}),_.delay(()=>{this.myDropDockReady=!0},1)},1)},reDockDrop(){this.resetBoxStyle(),this.$nextTick(()=>{this.dockDrop()})},resetBoxStyle(){_.assign(this.box,{position:null,top:null,left:null,width:this.width,height:this.height}),this.myDropDockReady=!1},__ti_shortcut(t){"ESCAPE"==t&&this.notifyCollapse(!0)}},watch:{status:function(t){this.$nextTick(()=>{"collapse"==t?this.resetBoxStyle():this.dockDrop()})}},mounted:function(){this.dropOpened=this.autoOpenDrop,this.box.width=this.width,this.box.height=this.height,this.dockDrop(),Ti.Viewport.watch(this,{scroll:()=>this.notifyCollapse(),resize:()=>this.notifyCollapse()})},beforeDestroy:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/combo/box/ti-combo-box.mjs",t)}(),Ti.Preload("ti/com/ti/combo/box/_com.json",{name:"ti-combo-box",globally:!0,template:"./ti-combo-box.html",mixins:["./ti-combo-box.mjs"]}),function(){const t={form:{type:Object,default:null},autoCollapse:{type:Boolean,default:!1},statusIcons:{type:Object,default:()=>({collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"})},autoFocusExtended:{type:Boolean,default:!0},spacing:{type:String,default:"tiny",validator:t=>/^(none|comfy|tiny)$/.test(t)},dropWidth:{type:[Number,String],default:"box"},dropHeight:{type:[Number,String],default:null}};Ti.Preload("ti/com/ti/combo/filter/ti-combo-filter-props.mjs",t)}(),Ti.Preload("ti/com/ti/combo/filter/ti-combo-filter.html",'<div class="ti-combo-filter"\n  :class="TopClass">\n  \x3c!--\n    Marjor type\n  --\x3e\n\n  \x3c!--\n    Filter input box\n  --\x3e\n  <ti-combo-box\n    class="as-filter"\n    :drop-width="dropWidth"\n    :drop-height="dropHeight"\n    :status="myDropStatus"\n    @collapse="OnCollapse"\n    v-ti-activable>\n    \x3c!--\n      Box\n    --\x3e\n    <template v-slot:box>\n      <ti-input \n        v-bind="TheInputProps"\n\n        :value="InputValue"\n        :prefix-icon="ThePrefixIcon"\n        :suffix-icon="TheSuffixIcon"\n\n        @change="OnInputChanged"\n        @input:focus="OnInputFocused"\n        @prefix:icon="$notify(\'prefix:icon\')"\n        @suffix:icon="OnClickStatusIcon"/>\n    </template>\n    \x3c!--\n      Drop\n    --\x3e\n    <template v-slot:drop="slotProps">\n      <ti-form\n        v-bind="form"\n        :data="myFormData"\n        @change="OnFormChange"/>\n    </template>\n  </ti-combo-box>\n  \x3c!--\n    Sorter\n  --\x3e\n</div>'),function(){const t={data:()=>({myDropStatus:"collapse",myFreeValue:null,myFormData:{}}),computed:{TopClass(){return this.getTopClass({"is-enabled":this.isFilterEnabled},`as-spacing-${this.spacing}`)},isCollapse(){return"collapse"==this.myDropStatus},isExtended(){return"extended"==this.myDropStatus},hasForm(){return!_.isEmpty(this.form)},isFilterEnabled(){return!_.isEmpty(this.myFreeValue)||!_.isEmpty(this.myFormData)},TheInputProps(){return _.assign({},this,{autoI18n:this.autoI18n,placeholder:this.placeholder})},InputValue(){return this.myFreeValue},ThePrefixIcon(){return this.prefixIcon||"im-filter"},TheSuffixIcon(){if(this.hasForm)return this.statusIcons[this.myDropStatus]}},methods:{OnCollapse(){this.doCollapse()},OnInputChanged(t){this.myFreeValue=t,this.myDropStatus="collapse",Ti.Util.isNil(t)&&(this.myFormData={}),this.tryNotifyChanged()},OnInputFocused(){this.autoFocusExtended&&!this.isExtended&&this.doExtend()},OnClickStatusIcon(){this.isExtended?this.doCollapse():this.doExtend()},OnFormChange(t){this.myFormData=t},doExtend(t=!0){this.hasForm&&!this.isExtended&&(this.myDropStatus="extended")},doCollapse({escaped:t=!1}={}){this.isCollapse||(t||this.tryNotifyChanged(),this.myDropStatus="collapse")},tryNotifyChanged(){let t=this.genValue();_.isEqual(t,this.value)||this.$notify("change",t)},genValue(){return{keyword:this.myFreeValue,match:this.myFormData}},evalMyValue(){let t=_.assign({},this.value);this.myFreeValue=t.keyword,this.myFormData=t.match},__ti_shortcut(t){if("ESCAPE"==t)return this.doCollapse({escaped:!0}),{prevent:!0,stop:!0,quit:!0};"ARROWDOWN"!=t?"ARROWUP"!=t||this.doCollapse():this.doExtend()}},watch:{value:{handler:"evalMyValue",immediate:!0}}};Ti.Preload("ti/com/ti/combo/filter/ti-combo-filter.mjs",t)}(),Ti.Preload("ti/com/ti/combo/filter/_com.json",{name:"ti-combo-filter",globally:!0,template:"./ti-combo-filter.html",props:["@com:ti/input/ti-input-props.mjs","@com:ti/combo/filter/ti-combo-filter-props.mjs"],mixins:"./ti-combo-filter.mjs",components:["@com:ti/form","@com:ti/combo/sorter"]}),function(){const t={options:{type:[String,Array,Function,Ti.Dict],default:()=>[]},valueBy:{type:[String,Function],default:void 0},textBy:{type:[String,Function],default:void 0},iconeBy:{type:[String,Function],default:void 0},childrenBy:{type:[String,Function],default:void 0},dropComType:{type:String,default:void 0},dropComConf:{type:Object,default:void 0},mustInList:{type:Boolean,default:!1},autoFocusExtended:{type:Boolean,default:!0},filter:{type:Boolean,default:!0},delay:{type:Number,default:800},statusIcons:{type:Object,default:()=>({collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"})},dropDisplay:{type:[Object,String,Array],default:void 0},dropItemBorder:{type:Boolean,default:!0},dropWidth:{type:[Number,String],default:"box"},dropHeight:{type:[Number,String],default:null}};Ti.Preload("ti/com/ti/combo/input/ti-combo-input-props.mjs",t)}(),Ti.Preload("ti/com/ti/combo/input/ti-combo-input.html",'<ti-combo-box \n  class="ti-combo-input"\n  :class="TopClass"\n  :drop-width="dropWidth"\n  :drop-height="dropHeight"\n  :status="myDropStatus"\n  @collapse="OnCollapse"\n  v-ti-activable>\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <ti-input \n      v-bind="TheInputProps"\n\n      :value="InputValue"\n      :prefix-icon="ThePrefixIcon"\n      :suffix-icon="TheSuffixIcon"\n\n      @change="OnInputChanged"\n      @inputing="OnInputInputing"\n      @input:focus="OnInputFocused"\n      @prefix:icon="$notify(\'prefix:icon\')"\n      @suffix:icon="OnClickStatusIcon"/>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop="slotProps">\n    <component \n      :is="DropComType"\n      class="ti-fill-parent"\n      blank-class="mid-tip"\n      v-bind="DropComConf"\n      :on-init="OnDropListInit"\n      @select="OnDropListSelected"/>\n  </template>\n</ti-combo-box>'),function(){const t={data:()=>({myDropStatus:"collapse",myItem:null,myFreeValue:null,myFilterValue:null,myOptionsData:[],myCurrentId:null,myCheckedIds:{},myOldValue:void 0,loading:!1}),props:{canInput:{type:Boolean,default:!0},autoCollapse:{type:Boolean,default:!1}},computed:{isCollapse(){return"collapse"==this.myDropStatus},isExtended(){return"extended"==this.myDropStatus},TopClass(){return this.getTopClass()},TheInputProps(){return _.assign({},this,{readonly:!this.canInput||this.readonly,autoI18n:this.autoI18n,placeholder:this.placeholder})},InputValue(){return Ti.Util.isNil(this.myFilterValue)?this.myItem?this.Dict.getText(this.myItem)||this.Dict.getValue(this.myItem):this.myFreeValue:this.myFilterValue},GetValueBy(){return t=>this.Dict.getValue(t)},ThePrefixIcon(){if(this.loading)return"zmdi-settings zmdi-hc-spin";let t=this.prefixIcon;return this.myItem&&(t=this.Dict.getIcon(this.myItem)||t),t||"zmdi-minus"},TheSuffixIcon(){return this.statusIcons[this.myDropStatus]},DropComType(){return this.dropComType||"ti-list"},DropComConf(){return _.assign({display:this.dropDisplay||"text",border:this.dropItemBorder},this.dropComConf,{data:this.myOptionsData,currentId:this.myCurrentId,checkedIds:this.myCheckedIds,idBy:this.GetValueBy,multi:!1,hoverable:!0,checkable:!1,autoCheckCurrent:!0})},Dict(){if(this.options instanceof Ti.Dict)return this.options;if(_.isString(this.options)){let t=Ti.DictFactory.DictReferName(this.options);if(t)return Ti.DictFactory.CheckDict(t,({loading:t})=>{this.loading=t})}return Ti.DictFactory.CreateDict({data:this.options,getValue:Ti.Util.genGetter(this.valueBy||"value"),getText:Ti.Util.genGetter(this.textBy||"text|name"),getIcon:Ti.Util.genGetter(this.iconBy||"icon")})}},methods:{OnDropListInit(t){this.$dropList=t},OnCollapse(){this.doCollapse()},OnInputInputing(t){this.filter&&(this.myFilterValue=t,this.autoFocusExtended&&(this.isExtended||this.doExtend(!1)),this.isExtended&&this.debReload())},async OnInputChanged(t,e){if(this.myFilterValue=null,t){let e=await this.Dict.getItem(t);e?(this.myItem=e,this.myFreeValue=null):this.mustInList||(this.myItem=null,this.myFreeValue=t)}else this.myItem=null,this.myFreeValue=null,this.myCheckedIds={},this.myCurrentId=null;e||this.tryNotifyChanged()},async OnInputFocused(){this.autoFocusExtended&&!this.isExtended&&await this.doExtend()},async OnClickStatusIcon(){this.isExtended?await this.doCollapse():await this.doExtend()},async OnDropListSelected({currentId:t,byKeyboardArrow:e}={}){this.myCurrentId=t,await this.OnInputChanged(t,e),this.autoCollapse&&!e&&await this.doCollapse({escaped:!0})},async doExtend(t=!0){this.myOldValue=this.evalMyValue(),t&&_.isEmpty(this.myOptionsData)&&await this.reloadMyOptionData(!0),this.$nextTick(()=>{this.myDropStatus="extended"})},async doCollapse({escaped:t=!1}={}){t?this.evalMyItem(this.myOldValue):this.tryNotifyChanged(),this.myDropStatus="collapse",this.myOldValue=void 0},tryNotifyChanged(){let t=this.evalMyValue();_.isEqual(t,this.value)||this.$notify("change",t)},evalMyValue(t=this.myItem,e=this.myFreeValue){return t?this.Dict.getValue(t):this.mustInList?null:e},async evalMyItem(t=this.value){let e=await this.Dict.getItem(t);if(e){let t=this.Dict.getValue(e);this.myItem=e,this.myFreeValue=null,this.myCurrentId=t,this.myCheckedIds={[t]:!0}}else this.myItem=null,this.myFreeValue=this.mustInList?null:t,this.myCurrentId=null,this.myCheckedIds={}},async reloadMyOptionData(t=!1){t||this.isExtended?this.myOptionsData=await this.Dict.queryData(this.myFilterValue):this.myOptionsData=[]},__ti_shortcut(t){return"ESCAPE"==t?(this.doCollapse({escaped:!0}),{prevent:!0,stop:!0,quit:!0}):"ENTER"==t?(this.doCollapse(),{stop:!0,quit:!1}):"ARROWUP"==t?(this.$dropList&&this.$dropList.selectPrevRow({payload:{byKeyboardArrow:!0}}),{prevent:!0,stop:!0,quit:!0}):"ARROWDOWN"==t?(this.$dropList&&this.isExtended?this.$dropList.selectNextRow({payload:{byKeyboardArrow:!0}}):this.doExtend(),{prevent:!0,stop:!0,quit:!0}):void 0}},watch:{value:{handler:"evalMyItem",immediate:!0},options:function(){this.myOptionsData=[]}},created:function(){this.debReload=_.debounce(t=>{this.reloadMyOptionData()},this.delay)}};Ti.Preload("ti/com/ti/combo/input/ti-combo-input.mjs",t)}(),Ti.Preload("ti/com/ti/combo/input/_com.json",{name:"ti-combo-input",globally:!0,template:"./ti-combo-input.html",props:["@com:ti/input/ti-input-props.mjs","./ti-combo-input-props.mjs"],mixins:"./ti-combo-input.mjs",components:["@com:ti/combo/box"]}),Ti.Preload("ti/com/ti/combo/multi-input/ti-combo-multi-input.html",'<ti-combo-box \n  class="ti-combo-multi-input"\n  :class="TopClass"\n  :drop-width="dropWidth"\n  :drop-height="dropHeight"\n  :status="myDropStatus"\n  @collapse="OnCollapse"\n  v-ti-activable>\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <ti-input-tags\n      :input-value="myFilterValue"\n      :value="InputTagValues"\n      :value-case="valueCase"\n      :trimed="trimed"\n        :max-value-len="maxValueLen"\n        :value-unique="valueUnique"\n        :tag-options="tagOptions"\n        :tag-mapping="tagMapping"\n\n      :readonly="readonly"\n      :focused="focused"\n      :hover="hover"\n      :auto-select="autoSelect"\n        :can-input="canInput"\n        :cancel-tag-bubble="cancelTagBubble"\n\n      :placeholder="placeholder"\n      :hide-border="hideBorder"\n      :prefix-icon="prefixIcon"\n      :prefix-hover-icon="prefixHoverIcon"\n      :prefix-icon-for-clean="prefixIconForClean"\n      :prefix-text="prefixText"\n      :suffix-icon="TheSuffixIcon"\n      :suffix-text="suffixText"\n        :tag-item-icon-by="tagItemIconBy"\n        :tag-item-default-icon="tagItemDefaultIcon"\n        :tag-option-default-icon="tagOptionDefaultIcon"\n      \n      :width="width"\n      :height="height"\n\n      :input-change="OnInputChanged"\n\n      @inputing="OnInputInputing"\n      @input:focus="OnInputFocused"\n      @change="OnTagListChanged"\n      @prefix:icon="$notify(\'prefix:icon\')"\n      @suffix:icon="OnClickStatusIcon"/>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <component class="ti-fill-parent"\n      :is="DropComType"\n      blank-class="mid-tip"\n      v-bind="DropComConf"\n      :on-init="OnDropListInit"\n      @select="OnDropListSelected"/>\n  </template>\n</ti-combo-box>'),function(){const t={inheritAttrs:!1,data:()=>({myDropStatus:"collapse",myTags:[],myFreeValues:[],myFilterValue:null,myOptionsData:[],myCurrentId:null,myCheckedIds:{},myOldValue:void 0}),computed:{isCollapse(){return"collapse"==this.myDropStatus},isExtended(){return"extended"==this.myDropStatus},TopClass(){return this.getTopClass()},Values(){return Ti.S.toArray(this.value)},InputTagValues(){return _.concat(this.myTags,this.myFreeValues)},GetValueBy(){return t=>this.Dict.getValue(t)},TheSuffixIcon(){return this.statusIcons[this.myDropStatus]},DropComType(){return this.dropComType||"ti-list"},DropComConf(){return _.assign({display:this.dropDisplay||"text",border:this.dropItemBorder},this.dropComConf,{data:this.myOptionsData,currentId:this.myCurrentId,checkedIds:this.myCheckedIds,idBy:this.GetValueBy,multi:!0,hoverable:!0,checkable:!0,autoCheckCurrent:!1})},Dict(){if(this.options instanceof Ti.Dict)return this.options;if(_.isString(this.options)){let t=Ti.DictFactory.DictReferName(this.options);if(t)return Ti.DictFactory.CheckDict(t,({loading:t})=>{this.loading=t})}return Ti.DictFactory.CreateDict({data:this.options,getValue:Ti.Util.genGetter(this.valueBy||"value"),getText:Ti.Util.genGetter(this.textBy||"text|name"),getIcon:Ti.Util.genGetter(this.iconBy||"icon")})}},methods:{OnDropListInit(t){this.$dropList=t},async OnCollapse(){this.doCollapse()},OnInputInputing(t){this.filter&&(this.myFilterValue=t,this.debReload())},async OnInputChanged(t){if(this.myFilterValue=null,this.valueUnique){if(_.indexOf(this.myFreeValues,t)>=0)return;for(let e of this.myTags){if(this.Dict.getValue(e)==t)return}}let e=await this.Dict.getItem(t);e?this.myTags.push(e):t&&!this.mustInList&&this.myFreeValues.push(t),this.tryNotifyChanged()},async OnInputFocused(){this.autoFocusExtended&&!this.isExtended&&await this.doExtend()},async OnTagListChanged(t=[]){await this.evalMyTags(t),this.tryNotifyChanged()},async OnClickStatusIcon(){this.isExtended?this.doCollapse():await this.doExtend()},async OnDropListSelected({currentId:t,checkedIds:e}={}){this.myCurrentId=t,this.myCheckedIds=e;let i=Ti.Util.truthyKeys(e);await this.evalMyTags(_.concat(i,this.myFreeValues)),this.tryNotifyChanged()},async doExtend(){this.myOldValue=this.evalMyValues(),_.isEmpty(this.myOptionsData)&&await this.reloadMyOptionData(!0),this.$nextTick(()=>{this.myDropStatus="extended"})},doCollapse({escaped:t=!1}={}){t&&this.$notify("change",this.myOldValue),this.myDropStatus="collapse",this.myOldValue=void 0},tryNotifyChanged(t=!1){let e=this.evalMyValues();t||_.isEqual(e,this.Values)||this.$notify("change",e)},evalMyValues(t=this.myTags,e=this.myFreeValues){let i=[];return _.forEach(t,t=>{let e=this.Dict.getValue(t);Ti.Util.isNil(e)?this.mustInList||i.push(t):i.push(e)}),this.mustInList||_.isEmpty(e)?i:_.concat(i,e)},async evalMyTags(t=this.value){t=Ti.S.toArray(t);let e=[],i={},n=[];for(let a of t){let t=await this.Dict.getItem(a);t?(e.push(t),i[a]=!0):n.push(a)}this.myTags=e,this.myFreeValues=n,this.myCheckedIds=i},async reloadMyOptionData(t=!1){t||this.isExtended?this.myOptionsData=await this.Dict.queryData(this.myFilterValue):this.myOptionsData=[]},__ti_shortcut(t){return"ESCAPE"==t?(this.doCollapse({escaped:!0}),{prevent:!0,stop:!0,quit:!0}):"ENTER"==t&&this.$dropList&&this.$dropList.isActived?(this.doCollapse(),{stop:!0,quit:!0}):"ARROWUP"==t?(this.$dropList&&this.$dropList.selectPrevRow({payload:{byKeyboardArrow:!0}}),{prevent:!0,stop:!0,quit:!0}):"ARROWDOWN"==t?(this.$dropList&&this.isExtended?this.$dropList.selectNextRow({payload:{byKeyboardArrow:!0}}):this.doExtend(),{prevent:!0,stop:!0,quit:!0}):void 0}},watch:{value:{handler:"evalMyTags",immediate:!0}},created:function(){this.debReload=_.debounce(t=>{this.reloadMyOptionData()},this.delay)}};Ti.Preload("ti/com/ti/combo/multi-input/ti-combo-multi-input.mjs",t)}(),Ti.Preload("ti/com/ti/combo/multi-input/_com.json",{name:"ti-combo-multi-input",globally:!0,template:"./ti-combo-multi-input.html",props:["@com:ti/input/ti-input-props.mjs","@com:ti/input/tags/ti-input-tags-props.mjs","@com:ti/combo/input/ti-combo-input-props.mjs"],mixins:["./ti-combo-multi-input.mjs"],components:["@com:ti/combo/box"]}),function(){const t={placeholder:{type:String,default:"i18n:no-title"},options:{type:Array,default:()=>[]},value:{type:Object,default:null},width:{type:[Number,String],default:void 0},height:{type:[Number,String],default:void 0},dropWidth:{type:[Number,String],default:"box"},dropHeight:{type:[Number,String],default:null},sortIcons:{type:Object,default:()=>({asc:"fas-long-arrow-alt-up",desc:"fas-long-arrow-alt-down"})},suffixIcon:{type:String,default:"im-menu-list"}};Ti.Preload("ti/com/ti/combo/sorter/ti-combo-sorter-props.mjs",t)}(),Ti.Preload("ti/com/ti/combo/sorter/ti-combo-sorter.html",'<div class="ti-combo-sorter"\n  :class="TopClass"\n  :style="TopStyle">\n  \x3c!--\n    sorter box\n  --\x3e\n  <ti-combo-box\n    class="as-sorter"\n    :drop-width="dropWidth"\n    :drop-height="dropHeight"\n    :drop-float="false"\n    :status="myDropStatus"\n    @collapse="OnCollapse"\n    v-ti-activable>\n    \x3c!--\n      Box\n    --\x3e\n    <template v-slot:box>\n      \x3c!--\n        Current Sort Box\n      --\x3e\n      <div class="as-sort-box"\n        @click.left="OnClickBox">\n        \x3c!--Sort Icon--\x3e\n        <ti-icon\n          v-if="TheSortIcon"\n          class="as-sort-icon"\n            :value="TheSortIcon"/>\n        \x3c!--Preifx Icon--\x3e\n        <ti-icon \n          v-if="ThePrefixIcon"\n            class="at-prefix"\n            :value="ThePrefixIcon"/>\n        \x3c!--Title--\x3e\n        <div class="as-title">{{SortTitle|i18n}}</div>\n      </div>\n      \x3c!--Status Icon--\x3e\n      <div  \n        v-if="TheSuffixIcon"\n          class="as-sort-btn"\n          @click.left="OnClickSuffixIcon">\n            <ti-icon :value="TheSuffixIcon"/>\n      </div>\n    </template>\n    \x3c!--\n      Drop\n    --\x3e\n    <template v-slot:drop="slotProps">\n      <ti-list\n        id-by="value"\n        :data="myListData"\n        :display="[\'<icon>\', \'text\']"\n        :hoverable="true"\n        :current-id="SortBy"\n        @select="OnDropListSelected"/>\n    </template>\n  </ti-combo-box>\n  \x3c!--\n    Sorter\n  --\x3e\n</div>'),function(){const t={data:()=>({myDropStatus:"collapse",myItem:null,isASC:!0,myListData:[]}),computed:{isCollapse(){return"collapse"==this.myDropStatus},isExtended(){return"extended"==this.myDropStatus},TopClass(){return this.getTopClass()},TopStyle(){return Ti.Css.toStyle({width:this.width,height:this.height})},SortTitle(){return Ti.Util.getOrPick(this.myItem,"text|value",this.placeholder)},SortBy(){return _.first(_.keys(this.value))},SortAs(){return _.get(this.value,this.SortBy)||1},ThePrefixIcon(){return _.get(this.myItem,"icon")},TheSortIcon(){return this.isASC?this.sortIcons.asc:this.sortIcons.desc},TheSuffixIcon(){if(!_.isEmpty(this.myListData)&&this.myListData.length>1)return this.suffixIcon},Dict(){if(this.options instanceof Ti.Dict)return this.options;if(_.isString(this.options)){let t=Ti.DictFactory.DictReferName(this.options);if(t)return Ti.DictFactory.CheckDict(t,({loading:t})=>{this.loading=t})}return Ti.DictFactory.CreateDict({data:this.options,getValue:Ti.Util.genGetter(this.valueBy||"value"),getText:Ti.Util.genGetter(this.textBy||"text|name"),getIcon:Ti.Util.genGetter(this.iconBy||"icon")})}},methods:{OnCollapse(){this.doCollapse()},OnClickBox(){this.isASC=!this.isASC,this.tryNotifyChanged()},OnClickSuffixIcon(){this.isExtended?this.doCollapse():this.doExtend()},OnDropListSelected({current:t}={}){this.myItem=t,this.doCollapse()},doExtend(){this.myDropStatus="extended"},doCollapse({escaped:t=!1}={}){this.myDropStatus="collapse",t||this.tryNotifyChanged()},tryNotifyChanged(){let t=this.genValue();_.isEqual(t,this.value)||this.$notify("change",t)},genValue(){return{[_.get(this.myItem,"value")]:this.isASC?1:-1}},async evalMyValue(){let t={by:null,as:1};if(_.isString(this.value)){let e=this.value.split(":");t.by=_.nth(e,0),t.as="1"==_.nth(e,1)?1:-1}else _.isArray(this.value)?(t.by=_.nth(this.value,0),t.as=_.nth(this.value,1)>0?1:-1):(t.by=this.SortBy,t.as=this.SortAs);let e=await this.Dict.getItem(t.by);this.myItem=e||{text:this.text||t.by,value:t.by},this.isASC=1==t.as},__ti_shortcut(t){if("ESCAPE"==t)return this.doCollapse({escaped:!0}),{prevent:!0,stop:!0,quit:!0}}},watch:{value:{handler:"evalMyValue",immediate:!0}},mounted:async function(){this.myListData=await this.Dict.getData()}};Ti.Preload("ti/com/ti/combo/sorter/ti-combo-sorter.mjs",t)}(),Ti.Preload("ti/com/ti/combo/sorter/_com.json",{name:"ti-combo-sorter",globally:!0,template:"./ti-combo-sorter.html",props:"@com:ti/combo/sorter/ti-combo-sorter-props.mjs",mixins:"./ti-combo-sorter.mjs",components:["@com:ti/combo/box"]}),Ti.Preload("ti/com/ti/crumb/com/crumb-item/crumb-item.html",'<div class="ti-crumb-item" \n  :class="topClass"\n  @click.left="onClickTop">\n  \x3c!--\n    Icon\n  --\x3e\n  <ti-icon v-if="icon" \n    class="as-icon"\n    :value="icon"/>\n  \x3c!--\n    Text\n  --\x3e\n  <template v-if="text">\n    <a v-if="href"\n      class="as-text"\n      @click.prevent\n      :href="href"\n      :class="textClass">{{text|i18n}}</a>\n    <span v-else\n      class="as-text"\n      :class="textClass">{{text|i18n}}</span>\n  </template>\n  \x3c!--\n    Asterisk\n  --\x3e\n  <span v-if="asterisk"\n    class="as-asterisk"\n    ></span>\n  \x3c!--\n    Path Icon\n  --\x3e\n  <ti-icon v-if="!atLast"\n    class="as-path-icon"\n    :value="pathIcon"/>\n</div>'),function(){const t={inheritAttrs:!1,props:{index:{type:Number,default:-1},atLast:{type:Boolean,default:!1},icon:{type:[String,Object],default:null},text:{type:String,default:null},href:{type:String,default:null},value:{type:[String,Number,Boolean,Object],default:null},pathIcon:{type:String,default:null},asterisk:{type:Boolean,default:!1},cancelBubble:{type:Boolean,default:!0}},computed:{topClass(){return Ti.Css.mergeClassName({"at-tail":this.atLast,"at-path":!this.atLast,"is-asterisk":this.asterisk},this.className)},textClass(){return{"without-icon":!this.hasIcon&&!this.removeIcon}},hasIcon(){return!!this.icon},theData(){return{index:this.index,icon:this.icon,text:this.text,value:this.value,href:this.href,atLast:this.atLast,asterisk:this.asterisk}}},methods:{onClickTop(t){this.hasOptions?(t.stopPropagation(),this.openDrop()):this.cancelBubble&&t.stopPropagation(),this.href&&this.$notify("item:active",this.theData)}}};Ti.Preload("ti/com/ti/crumb/com/crumb-item/crumb-item.mjs",t)}(),Ti.Preload("ti/com/ti/crumb/com/crumb-item/_com.json",{name:"crumb-item",globally:!1,template:"./crumb-item.html",mixins:["./crumb-item.mjs"]}),Ti.Preload("ti/com/ti/crumb/ti-crumb.html",'<div class="ti-crumb"\n  :class="topClass">\n  \x3c!--\n    Loop items\n  --\x3e\n  <crumb-item v-for="it in theData"\n    :key="it.index"\n    :path-icon="pathIcon"\n    :cancel-bubble="cancelItemBubble"\n    v-bind="it"/>\n</div>'),function(){const t={inheritAttrs:!1,props:{data:{type:Array,default:()=>[]},itemIcon:{type:String,default:null},pathIcon:{type:String,default:"zmdi-chevron-right"},cancelItemBubble:{type:Boolean,default:!0}},computed:{topClass(){if(this.className)return this.className},theData(){let t=[];return _.isArray(this.data)&&_.forEach(this.data,(e,i)=>{t.push(_.assign({icon:this.itemIcon},e,{index:i,atLast:i==this.data.length-1}))}),t},theDataValues(){let t=[];for(let e of this.theData)t.push(Ti.Util.fallback(e.value,null));return t}}};Ti.Preload("ti/com/ti/crumb/ti-crumb.mjs",t)}(),Ti.Preload("ti/com/ti/crumb/_com.json",{name:"ti-crumb",globally:!0,template:"./ti-crumb.html",mixins:["./ti-crumb.mjs"],components:["./com/crumb-item"]}),Ti.Preload("ti/com/ti/datetime/ti-datetime.html",'<div class="ti-datetime">\n  \x3c!--Date--\x3e\n  <ti-calendar class="is-date"\n    :value="theDate"\n    :month-format="monthFormat"\n    :begin-year="beginYear"\n    :end-year="endYear"\n    @change="onDateChanged"/>\n  \x3c!--Time--\x3e\n  <div class="is-time">\n    <div class="as-time-text">{{theTimeText}}</div>\n    <div class="as-time-cols">\n      <ti-time\n        :value="theTime"\n        :mode="timeMode"\n        width="100%"\n        height="none"\n        @change="onTimeChanged"/>\n    </div>\n  </div>\n</div>'),function(){const t={inheritAttrs:!1,props:{value:{type:[String,Number,Date],default:null},timeMode:{type:String,default:"sec",validator:function(t){return/^(sec|min|auto)$/.test(t)}},monthFormat:{type:String,default:"yyyy-MM"},beginYear:{type:[Number,String],default:1970},endYear:{type:[Number,String],default:(new Date).getFullYear()+1}},computed:{topClass(){return this.className},theDate(){return Ti.Types.toDate(this.value,null)},theTime(){return Ti.Types.toTime(this.theDate)},theTimeFormat(){return{sec:"HH:mm:ss",min:"HH:mm",auto:"auto"}[this.timeMode]},theTimeText(){return this.getTimeText(this.theTime)}},methods:{onDateChanged(t){this.theDate||new Date;let e=Ti.Types.toTime(this.theTime||0);(t=new Date(t)).setHours(e.hours),t.setMinutes(e.minutes),t.setSeconds(e.seconds),t.setMilliseconds(e.milliseconds),this.$notify("change",t)},onTimeChanged(t){let e=this.theDate||new Date,i=new Date(e);i.setHours(t.hours),i.setMinutes(t.minutes),i.setSeconds(t.seconds),i.setMilliseconds(t.milliseconds),this.$notify("change",i)},getTimeText(t){if(t instanceof Ti.Types.Time)return t.toString(this.theTimeFormat)}}};Ti.Preload("ti/com/ti/datetime/ti-datetime.mjs",t)}(),Ti.Preload("ti/com/ti/datetime/_com.json",{name:"ti-datetime",globally:!0,template:"./ti-datetime.html",mixins:["./ti-datetime.mjs"],components:["@com:ti/time","@com:ti/calendar"]}),Ti.Preload("ti/com/ti/droplist/ti-droplist.html",'<component \n  :is="ComType"\n  v-bind="this"\n  :can-input="false"\n  :must-in-list="true"\n  :auto-collapse="true"\n  @change="$notify(\'change\', $event)"/>'),function(){const t={inheritAttrs:!1,props:{multi:{type:Boolean,default:!1}},computed:{ComType(){return this.multi?"ti-combo-multi-input":"ti-combo-input"}}};Ti.Preload("ti/com/ti/droplist/ti-droplist.mjs",t)}(),Ti.Preload("ti/com/ti/droplist/_com.json",{name:"ti-droplist",globally:!0,template:"./ti-droplist.html",props:["@com:ti/input/ti-input-props.mjs","@com:ti/input/tags/ti-input-tags-props.mjs","@com:ti/combo/input/ti-combo-input-props.mjs"],mixins:["./ti-droplist.mjs"],components:["@com:ti/combo/input","@com:ti/combo/multi-input"]}),function(){const t={type:{type:String,default:"String"},disabled:{type:Boolean,default:!1},uniqKey:{type:String,default:null},name:{type:[String,Array],default:null},icon:{type:String,default:null},fieldStatus:{type:Object,default:()=>({})},message:{type:String,default:null},title:{type:String,default:null},tip:{type:String,default:null},width:{type:[String,Number],default:"stretch"},height:{type:[String,Number],default:void 0},checkEquals:{type:Boolean,default:!0},undefinedAs:{default:void 0},nullAs:{default:void 0},nanAs:{type:Number,default:void 0},emptyAs:{type:String,default:void 0},defaultAs:{default:void 0},display:{type:[String,Object,Boolean],default:!1},comType:{type:String,default:"ti-label"},comConf:{type:Object,default:()=>({})},autoValue:{type:String,default:"value"},serializer:{type:Function,default:_.identity},transformer:{type:Function,default:_.identity},data:{type:Object,default:null},statusIcons:{type:Object,default:()=>({spinning:"fas-spinner fa-spin",error:"zmdi-alert-polygon",warn:"zmdi-alert-triangle",ok:"zmdi-check-circle"})}};Ti.Preload("ti/com/ti/form/com/form-field/form-field-props.mjs",t)}(),Ti.Preload("ti/com/ti/form/com/form-field/form-field.html",'<div class="form-field"\n  :class="TopClass"\n  :style="ConStyle"\n  v-ti-activable>\n  \x3c!--========================================\n    Field Name\n  --\x3e\n  <div \n    v-if="isShowTitle"\n      class="field-name"\n      :title="StatusText">\n        \x3c!--Status Icon--\x3e\n        <span \n          v-if="StatusIcon"\n            class="name-status">\n            <ti-icon :value="StatusIcon"/>\n        </span>\n        \x3c!--Title Text--\x3e\n        <span class="name-title">{{TheTitle|i18n}}</span>\n        \x3c!--Field Icon--\x3e\n        <span \n          v-if="isShowIcon" \n            class="name-icon">\n            <ti-icon :value="icon"/>\n        </span>\n  </div>\n  \x3c!--========================================\n    Field Value\n  --\x3e\n  <div class="field-value"\n    :style="ConStyle">\n    \x3c!--\n      UI Component\n    --\x3e\n    <div v-if="isComReady"\n      class="field-component"\n      :class="ComClass"\n      :style="ComStyle">\n      <component \n        :is="myComType"\n          v-bind="myComConf"\n          @change="OnChange"/>\n    </div>\n    \x3c!--\n      Tips\n    --\x3e\n    <div \n      v-if="isShowTip"\n        class="field-tip">{{tip|i18n}}</div>\n  </div>\n</div>'),function(){const t={data:()=>({isComReady:!1,myComType:null,myComConf:null}),computed:{TopClass(){return this.getTopClass({"no-status-icons":!this.hasStatusIcons,"has-status-icons":this.hasStatusIcons,"is-disabled":this.disabled},`as-${this.viewportMode}`,this.StatusType?`is-${this.StatusType}`:null)},isShowTitle(){return!Ti.Util.isNil(this.title)},isShowIcon(){return!Ti.Util.isNil(this.icon)},isShowTip(){return!Ti.Util.isNil(this.tip)},hasStatusIcons(){return!_.isEmpty(this.statusIcons)},isNumberType(){return/^(Number|Integer|Float)$/.test(this.type)},UniqName(){return _.isArray(this.name)?this.name.join("-"):this.name},TheTitle(){return this.title||this.UniqName},ComClass(){let t="auto"==this.width,e="full"==this.width,i="stretch"==this.width;return{"is-size-auto":t,"is-size-full":e,"is-size-stretch":i,"is-size-fixed":!(t||e||i||Ti.Util.isNil(this.width))}},ConStyle(){return Ti.Css.toStyle({height:this.height})},ComStyle(){let t={height:this.height};return this.width&&!/^(auto|stretch)$/.test(this.width)&&(t.width=Ti.Css.toSize(this.width)),Ti.Css.toStyle(t)},TheDisplay(){if(this.display)return!_.isBoolean(this.display)&&this.display?this.evalFieldDisplayItem(this.display,{defaultKey:this.name}):{comType:"ti-label",comConf:{}}},CurrentDisplayItem(){let t=this.TheDisplay||{};return!this.isActived&&this.display||(t={defaultAs:this.defaultAs,comType:this.comType,comConf:this.comConf}),_.defaults(_.cloneDeep(t),{comType:"ti-label",key:this.name,type:this.type,dict:this.dict,transformer:this.transformer})},Status(){return _.get(this.fieldStatus,this.uniqKey)},StatusType(){return _.get(this.Status,"type")},StatusText(){return _.get(this.Status,"text")},StatusIcon(){if(this.Status&&this.hasStatusIcons)return this.statusIcons[this.Status.type]}},methods:{__before_bubble({name:t,args:e}){if(this.name)return{name:`${this.UniqName}::${t}`,args:e}},OnChange(t){let e=t;try{e=this.serializer(t)}catch(e){return void this.$notify("invalid",{errMessage:""+e,name:this.name,value:t})}e=this.evalInputValue(e),this.checkEquals&&_.isEqual(e,this.fieldValue)||this.$notify("change",{name:this.name,value:e})},async evalTheCom(){let t=await this.evalDataForFieldDisplayItem({itemData:this.data,displayItem:this.CurrentDisplayItem,vars:{isActived:this.isActived,disabled:this.disabled},autoIgnoreNil:!1,autoValue:this.autoValue});this.myComType=t.comType,this.myComConf=t.comConf,this.isComReady=!0},evalInputValue(t){return _.isUndefined(t)?_.cloneDeep(Ti.Util.fallback(this.undefinedAs,this.defaultAs)):_.isNull(t)?_.cloneDeep(Ti.Util.fallback(this.nullAs,this.defaultAs,null)):this.isNumberType&&isNaN(t)?_.cloneDeep(Ti.Util.fallback(this.nanAs,this.defaultAs,NaN)):_.isEmpty(t)&&_.isString(t)?_.cloneDeep(Ti.Util.fallback(this.emptyAs,this.defaultAs,"")):t}},watch:{CurrentDisplayItem:"evalTheCom",data:{handler:"evalTheCom",immediate:!0}}};Ti.Preload("ti/com/ti/form/com/form-field/form-field.mjs",t)}(),Ti.Preload("ti/com/ti/form/com/form-field/_com.json",{name:"ti-form-field",globally:!0,template:"./form-field.html",methods:"@com:ti/support/field_display.mjs",props:"./form-field-props.mjs",mixins:["./form-field.mjs"]}),function(){const t={type:{type:String,default:"Group"},icon:{type:String,default:null},title:{type:String,default:null},fields:{type:Array,default:()=>[]},data:{type:Object,default:null},fieldStatus:{type:Object,default:()=>({})},statusIcons:{spinning:"fas-spinner fa-spin",error:"zmdi-alert-polygon",warn:"zmdi-alert-triangle",ok:"zmdi-check-circle"}};Ti.Preload("ti/com/ti/form/com/form-group/form-group-props.mjs",t)}(),Ti.Preload("ti/com/ti/form/com/form-group/form-group.html",'<div class="form-group"\n  :class="topClass">\n  <div class="group-title">\n    <ti-icon\n      v-if="show.icon" \n      :value="icon"/>\n    <span\n      v-if="show.title"\n      class="name-title">{{title|i18n}}</span>\n  </div>\n  <div class="group-fields">\n      <ti-form-field v-for="fld in fields"\n        :key="fld.key"\n        v-bind="fld"\n        :data="data"\n        :field-status="fieldStatus"\n        :status-icons="statusIcons"/>\n  </div>\n</div>'),function(){const t={inheritAttrs:!1,computed:{topClass(){let t=[`as-${this.viewportMode}`];return this.className&&t.push(this.className),t},show(){return{title:!!this.title,icon:!!this.icon}}}};Ti.Preload("ti/com/ti/form/com/form-group/form-group.mjs",t)}(),Ti.Preload("ti/com/ti/form/com/form-group/_com.json",{name:"form-group",globally:!1,template:"./form-group.html",props:"./form-group-props.mjs",mixins:["./form-group.mjs"]}),function(){const t={data:{type:Object,default:void 0},fields:{type:Array,default:()=>[]},fieldStatus:{type:Object,default:()=>({})},onlyFields:{type:Boolean,default:!0},fixed:{type:Object,default:void 0},keepTabIndexBy:{type:String,default:null},defaultComType:{type:String,default:"ti-label"},autoShowBlank:{type:Boolean,default:void 0},currentTab:{type:Number,default:0},adjustDelay:{type:Number,default:0},mode:{type:String,default:"all",validator:t=>/^(all|tab)$/.test(t)},tabAt:{type:String,default:"top-center",validator:t=>/^(top|bottom)-(left|center|right)$/.test(t)},blankAs:{type:Object,default:()=>({icon:"fas-dna",text:null})},icon:{type:String,default:null},title:{type:String,default:null},statusIcons:{type:Object,default:()=>({spinning:"fas-spinner fa-spin",error:"zmdi-alert-polygon",warn:"zmdi-alert-triangle",ok:"zmdi-check-circle"})},spacing:{type:String,default:"comfy",validator:t=>/^(comfy|tiny)$/.test(t)},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null}};Ti.Preload("ti/com/ti/form/ti-form-props.mjs",t)}(),Ti.Preload("ti/com/ti/form/ti-form.html",'<div class="ti-form"\n  :class="TopClass"\n  :style="TopStyle"\n  v-ti-activable>\n  <template v-if="hasData || !isAutoShowBlank">\n    \x3c!--\n      Form Header\n    --\x3e\n    <header class="form-header" v-if="hasHeader">\n      <span v-if="icon"\n        class="it-icon"><ti-icon :value="icon"/></span>\n      <span v-if="title"\n        class="it-text">{{title}}</span>\n    </header>\n    \x3c!--\n      Tabs for display:"tab"\n    --\x3e\n    <div class="form-tab" v-if="isTabMode">\n      <ul>\n        <li v-for="tab in TabItems" \n          :class="tab.className"\n          @click.left="OnClickTab(tab)">\n          <ti-icon \n            class="tab-icon" v-if="tab.icon" :value="tab.icon"/>\n          <span \n            class="tab-text" v-if="tab.title">{{tab.title|i18n}}</span>\n        </li>\n      </ul>\n    </div>\n    \x3c!--\n      Form Fields\n    --\x3e\n    <div class="form-body">\n      <template v-for="fld in FieldsInCurrentTab">\n        \x3c!--\n          For Group\n        --\x3e\n        <form-group v-if="\'Group\' == fld.type"\n          v-bind="fld"\n          :data="data"\n          :field-status="fieldStatus"\n          :status-icons="statusIcons"\n          @change="OnFieldChange"/>\n        \x3c!--\n          For field\n        --\x3e\n        <ti-form-field v-else\n          :key="fld.key"\n          v-bind="fld"\n          :data="data"\n          :field-status="fieldStatus"\n          :status-icons="statusIcons"\n          @change="OnFieldChange"/>\n      </template>\n    </div>\n  </template>\n  \x3c!--\n    Show Blank\n  --\x3e\n  <ti-loading \n    v-else\n      class="nil-data as-big-mask"\n      v-bind="blankAs"/>\n</div>'),function(){const t={model:{prop:"data",event:"change"},data:()=>({myKeysInFields:[],currentTabIndex:0}),computed:{TopClass(){return this.getTopClass({"is-tab-mode":this.isTabMode,"is-all-mode":this.isAllMode,[`tab-at-${this.tabAt}`]:this.isTabMode,[`tab-at-${this.TheTabAtX}`]:this.isTabMode,[`tab-at-${this.TheTabAtY}`]:this.isTabMode},`as-${this.viewportMode}`,`as-spacing-${this.spacing||"comfy"}`)},TopStyle(){return Ti.Css.toStyle({width:this.width,height:this.height})},hasHeader(){return!(!this.title&&!this.icon)},hasData(){return!Ti.Util.isNil(this.data)},isTabMode(){return"tab"==this.mode},isAllMode(){return"all"==(this.mode||"all")},isAutoShowBlank(){return Ti.Util.fallback(this.autoShowBlank,!1)},TheTabAt(){return this.tabAt.split("-")},TheTabAtX(){return this.TheTabAt[1]},TheTabAtY(){return this.TheTabAt[0]},TheFields(){let t=[],e=[];return _.forEach(this.fields,(i,n)=>{let a=this.evalFormField(i,[n]);a&&(t.push(a),a.disabled||("Group"==a.type?_.forEach(a.fields,({disabled:t,name:i})=>{t||e.push(i)}):e.push(a.name)))}),this.myKeysInFields=_.flattenDeep(e),t},TabList(){let t=[],e=[];if(this.isTabMode){for(let i of this.TheFields)"Group"==i.type?t.push(i):e.push(i);_.isEmpty(e)||t.push({type:"Group",title:"i18n:others",fields:e})}return t},TabItems(){let t=[];return _.forEach(this.TabList,(e,i)=>{let n=i==this.currentTabIndex;t.push(_.assign({},e,{index:i,isCurrent:n,className:{"is-current":n}}))}),t},CurrentTab(){for(let t of this.TabItems)if(t.isCurrent)return t},FieldsInCurrentTab(){return this.isTabMode?this.CurrentTab?this.CurrentTab.fields||[]:[]:this.TheFields},TheData(){return this.data?this.onlyFields?_.pick(this.data,this.myKeysInFields):this.data:{}}},methods:{OnClickTab(t){this.currentTabIndex=t.index,this.$notify("tab:change",t)},OnFieldChange({name:t,value:e}={}){this.$notify("field:change",{name:t,value:e}),this.$nextTick(()=>{let i=this.getData({name:t,value:e});this.$notify("change",i)})},getData({name:t,value:e}={}){let i=_.cloneDeep(this.TheData);if(t&&_.isString(t))if(".."==t)_.assign(i,e);else{if(/^'[^']+'$/.test(t))return;_.set(i,t,e)}else if(_.isArray(t)){let n={};for(let i of t)n[i]=_.get(e,i);_.assign(i,n)}return this.fixed&&_.assign(i,fixed),i},isGroup:t=>"Group"==t.type||_.isArray(t.fields),evalFormField(t={},e=[]){if(t.hidden&&Ti.Validate.match(this.data,t.hidden))return;let i=!1;t.disabled&&(i=Ti.Validate.match(this.data,t.disabled));let n=Ti.Util.anyKey(t.name||e,"ti-fld");if(this.isGroup(t)){let a={disabled:i,type:"Group",key:n,className:t.className,icon:t.icon,title:t.title,fields:[]};return _.forEach(t.fields,(t,i)=>{let n=this.evalFormField(t,[...e,i]);n&&a.fields.push(n)}),_.isEmpty(a.fields)?null:a}if(t.name){let e=_.defaults(_.omit(t,"disabled"),{type:"String",comType:this.defaultComType,disabled:i});if(e.uniqKey=_.concat(e.name).join("-"),!e.serializer){let t=Ti.Types.getFuncByType(e.type||"String","serializer");e.serializer=`Ti.Types.${t}`}if(!e.transformer){let t=Ti.Types.getFuncByType(e.type||"String","transformer");e.transformer=`Ti.Types.${t}`}const n={context:this,partialRight:!0};return e.serializer=Ti.Util.genInvoking(e.serializer,n),e.transformer=Ti.Util.genInvoking(e.transformer,n),e}},__adjust_fields_width(){if(!_.isElement(this.$el))return;let t=Ti.Dom.findAll(".form-field > .field-name",this.$el);for(let e of t)Ti.Dom.setStyle(e,{width:""});let e=0;for(let i of t){let t=Ti.Rects.createBy(i);e=Math.ceil(Math.max(t.width,e))}for(let i of t)Ti.Dom.setStyle(i,{width:e})},adjustFieldsWidth(){this.adjustDelay>0?_.delay(()=>{this.__adjust_fields_width()},this.adjustDelay):this.$nextTick(()=>{this.__adjust_fields_width()})},__ti_shortcut(t){"ENTER"==t&&_.delay(()=>{this.$notify("submit")},100)}},watch:{TheFields:function(){this.adjustFieldsWidth()},currentTab:function(t){this.currentTabIndex=t},currentTabIndex:function(t){this.keepTabIndexBy&&Ti.Storage.session.set(this.keepTabIndexBy,t),this.adjustFieldsWidth()}},created:function(){this.__debounce_adjust_fields_width=_.debounce(()=>{this.__adjust_fields_width()},500)},mounted:function(){this.currentTabIndex=Ti.Storage.session.getInt(this.keepTabIndexBy,this.currentTab),Ti.Viewport.watch(this,{resize:()=>{this.__debounce_adjust_fields_width()}}),this.adjustFieldsWidth()},beforeDestroy:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/form/ti-form.mjs",t)}(),Ti.Preload("ti/com/ti/form/_com.json",{name:"ti-form",globally:!0,template:"./ti-form.html",methods:"@com:ti/support/field_display.mjs",props:"./ti-form-props.mjs",mixins:["./ti-form.mjs"],components:["./com/form-group","./com/form-field","@com:ti/input","@com:ti/input/num","@com:ti/input/tags","@com:ti/input/color","@com:ti/input/icon","@com:ti/input/date","@com:ti/input/time","@com:ti/input/timerange","@com:ti/input/month","@com:ti/input/datetime","@com:ti/input/daterange","@com:ti/input/text","@com:ti/combo/input","@com:ti/combo/multi-input","@com:ti/label","@com:ti/toggle","@com:ti/switcher","@com:ti/droplist"]}),Ti.Preload("ti/com/ti/form/_hmaker.json",{icon:"im-task-o",title:"i18n:com-form",scenes:["desktop","tablet"],editComType:"hmaker-edit-com-form",editComConf:{value:"=comConf"}}),Ti.Preload("ti/com/ti/gui/block/ti-gui-block.html",'<div class="ti-gui-block" \n  :class="TopClass"\n  :style="TopStyle">\n  \x3c!--\n    Header\n  --\x3e\n  <div class="block-head" v-if="isShowHeader">\n    \x3c!--Icon--\x3e\n    <div class="as-icon" v-if="icon">\n      <ti-icon :value="icon"/>\n    </div>\n    \x3c!--Title--\x3e\n    <div class="as-title">\n      <span v-if="title">{{title|i18n}}</span>\n    </div>\n    \x3c!--Actions--\x3e\n    <div class="as-actions" v-if="hasActions">\n      <ti-actionbar \n        :items="actions"\n        :status="actionStatus"/>\n    </div>\n  </div>\n  \x3c!--\n    Content\n  --\x3e\n  <div class="block-main" v-if="TheCom">\n    <div class="block-main-con"\n      :class="MainConClass">\n      <component \n        class="ti-fill-parent"\n        :is="TheCom.comType"\n        v-bind="TheCom.comConf"/>\n    </div>\n  </div>\n  \x3c!--Blank--\x3e\n  </div>'),function(){const t={inject:["$gui"],props:{type:{type:String,default:null,validator:t=>Ti.Util.isNil(t)||/^(cols|rows|tabs)$/.test(t)},title:{type:String,default:null},icon:{type:[String,Object],default:null},hideTitle:{type:Boolean,default:!1},actions:{type:Array,default:()=>[]},actionStatus:{type:Object,default:()=>({})},name:{type:String,default:null},blocks:{type:Array,default:()=>[]},body:{type:[String,Object],default:null},embedIn:{type:String,default:null,validator:t=>/^(panel|rows|cols|tabs)$/.test(t)},size:{type:[String,Number],default:null},overflow:{type:String,default:null},flex:{type:String,default:void 0,validator:t=>_.isUndefined(t)||/^(auto|grow|shrink|both|none)$/.test(t)},schema:{type:Object,default:()=>({})},shown:{type:Object,default:()=>({})},captureEvents:{type:Object,default:()=>({})},tabAt:void 0,adjustable:void 0,border:void 0},computed:{TopClass(){return this.getTopClass({[`gui-block-${this.name}`]:!!this.name,"is-show-header":this.isShowHeader,"is-hide-header":!this.isShowHeader,"ti-fill-parent":/^(tabs|panel)$/.test(this.embedIn)},`is-flex-${this.FlexName}`)},TopStyle(){return Ti.Css.toStyle({rows:()=>({height:this.BlockSize}),cols:()=>({width:this.BlockSize}),tabs:()=>({}),panel:()=>({})}[this.embedIn]())},MainConClass(){return{"can-flex-none":this.isFlexNone,"can-flex-shrink":!this.isFlexNone}},BlockSize(){let t=this.size;return/^(auto|stretch)$/.test(t)?null:t},FlexName(){let t=this.flex||this.$gui.defaultFlex||"auto";return"auto"==t?"stretch"==this.size||Ti.Util.isNil(this.size)?"both":"none":t||"both"},isFlexNone(){return"none"==this.FlexName},isShowHeader(){return!this.hideTitle&&"tabs"!=this.embedIn&&!(!this.title&&!this.hasActions)},hasActions(){return!_.isEmpty(this.actions)},TheCom(){if(this.body){let t=_.isString(this.body)?this.schema[this.body]:this.body;if(t){let e=this.schema[t.extends],i=_.omit(t,"extends");return t=_.merge({},e,i),_.defaults(t,{comType:"ti-label",comConf:{}})}}if(!_.isEmpty(this.blocks)){return{comType:`ti-gui-${this.type||"cols"}`,comConf:{tabAt:this.tabAt,border:this.border,adjustable:this.adjustable,blocks:this.blocks,schema:this.schema,actionStatus:this.actionStatus,shown:this.shown,defaultFlex:this.defaultFlex}}}}},methods:{__before_bubble({name:t,args:e}){if(this.name)return{name:`${this.name}::${t}`,args:e}}}};Ti.Preload("ti/com/ti/gui/block/ti-gui-block.mjs",t)}(),Ti.Preload("ti/com/ti/gui/block/_com.json",{name:"ti-gui-block",globally:!0,template:"./ti-gui-block.html",mixins:["./ti-gui-block.mjs"]}),Ti.Preload("ti/com/ti/gui/cols/ti-gui-cols.html",'<div class="ti-gui-cols" :class="topClass">\n  <template v-if="hasBlocks">\n    <template v-for="(block, index) in blocks">\n      <ti-gui-block v-if="!block.hide"\n        :key="index"\n        embed-in="cols"\n        v-bind="block"\n        :schema="schema"\n        :action-status="actionStatus"\n        :shown="shown"/>\n      </template>\n  </template>\n</div>'),function(){const t={inheritAttrs:!1,props:{blocks:{type:Array,default:()=>[]},adjustable:{type:Boolean,default:!0},border:{type:Boolean,default:!1},schema:{type:Object,default:()=>({})},actionStatus:{type:Object,default:()=>({})},shown:{type:Object,default:()=>({})}},computed:{topClass(){return Ti.Css.mergeClassName({"is-adjustable":this.adjustable,"show-border":this.border},this.className)},hasBlocks(){return!_.isEmpty(this.blocks)}},methods:{}};Ti.Preload("ti/com/ti/gui/cols/ti-gui-cols.mjs",t)}(),Ti.Preload("ti/com/ti/gui/cols/_com.json",{name:"ti-gui-cols",globally:!0,template:"./ti-gui-cols.html",mixins:["./ti-gui-cols.mjs"],components:["@com:ti/gui/block"]}),Ti.Preload("ti/com/ti/gui/panel/ti-gui-panel.html",'<div class="ti-gui-panel"\n  :class="TopClass"\n  @click.left="OnClickMask">\n  <div class="panel-con"\n    :style="ConStyle"\n    @click.left.stop>\n    \x3c!--\n      Block\n    --\x3e\n    <ti-gui-block\n      embed-in="panel"\n      flex="none"\n      :type="type"\n      :title="title"\n      :icon="icon"\n      :hide-title="hideTitle"\n      :actions="actions"\n      :action-status="actionStatus"\n      :name="name"\n      :blocks="blocks"\n      :body="body"\n      :overflow="overflow"\n      :schema="schema"\n      :shown="shown"\n      :capture-events="captureEvents"/>\n    \x3c!--\n      Closer\n    --\x3e\n    <div\n      v-if="hasCloser"\n        class="panel-closer"\n        :class="CloserClass">\n        <ti-icon\n          value="zmdi-close"\n          @click.native="OnClose"/>\n    </div>\n  </div>\n</div>'),function(){const t={inject:["$gui"],props:{captureEvents:void 0,title:{type:String,default:null},icon:{type:[String,Object],default:null},hideTitle:{type:Boolean,default:!1},actions:{type:Array,default:()=>[]},actionStatus:{type:Object,default:()=>({})},name:{type:String,default:null},type:{type:String,default:null,validator:t=>Ti.Util.isNil(t)||/^(cols|rows|tabs)$/.test(t)},blocks:{type:Array,default:()=>[]},body:{type:[String,Object],default:null},adjustable:{type:[Boolean,String],default:!0,validator:t=>_.isBoolean(t)||/^(x|y)$/.test(t)},overflow:{type:String,default:null},width:{type:[String,Number],default:-1},height:{type:[String,Number],default:-1},viewportWidth:{type:[String,Number],default:0},viewportHeight:{type:[String,Number],default:0},position:{type:String,default:"center",validator:t=>/^(left|right|top|bottom|center)$/.test(t)||/^((left|right)-top|bottom-(left|right))$/.test(t)},closer:{type:String,default:"default",validator:t=>_.isNull(t)||/^(default|bottom|top|left|right)$/.test(t)},mask:{type:Boolean,default:!1},transparent:{type:Boolean,default:!1},clickMaskToClose:{type:Boolean,default:!1},schema:{type:Object,default:()=>({})},shown:{type:Object,default:()=>({})}},computed:{TopClass(){return this.getTopClass({"show-mask":this.mask,"no-mask":!this.mask,"is-bg-transparent":this.transparent,"is-bg-opaque":!this.transparent,"is-closer-default":this.isCloserDefault},`at-${this.position}`)},ConStyle(){let t=Ti.Css.toPixel(this.width,this.viewportWidth,this.width),e=Ti.Css.toPixel(this.height,this.viewportHeight,this.height);return Ti.Css.toStyle({width:t,height:e})},hasCloser(){return!!this.closer},isCloserDefault(){return!0===this.closer||"default"==this.closer},CloserClass(){return Ti.Css.mergeClassName({"as-lamp-cord":!this.isCloserDefault,"as-default":this.isCloserDefault,[`at-${this.closer}`]:!this.isCloserDefault})}},methods:{OnClose(){this.$gui.onBlockHide(this.name)},OnClickMask(){this.clickMaskToClose&&this.$gui.onBlockHide(this.name)}}};Ti.Preload("ti/com/ti/gui/panel/ti-gui-panel.mjs",t)}(),Ti.Preload("ti/com/ti/gui/panel/_com.json",{name:"ti-gui-panel",globally:!0,template:"./ti-gui-panel.html",mixins:["./ti-gui-panel.mjs"],components:["@com:ti/gui/block"]}),Ti.Preload("ti/com/ti/gui/rows/ti-gui-rows.html",'<div class="ti-gui-rows" :class="topClass">\n  <template v-if="hasBlocks">\n    <template v-for="(block, index) in blocks">\n      <ti-gui-block v-if="!block.hide"\n        :key="index"\n        embed-in="rows"\n        v-bind="block"\n        :schema="schema"\n        :action-status="actionStatus"\n        :shown="shown"/>\n    </template>\n  </template>\n</div>'),function(){const t={inheritAttrs:!1,props:{blocks:{type:Array,default:()=>[]},adjustable:{type:Boolean,default:!0},border:{type:Boolean,default:!1},schema:{type:Object,default:()=>({})},actionStatus:{type:Object,default:()=>({})},shown:{type:Object,default:()=>({})}},computed:{topClass(){return Ti.Css.mergeClassName({"is-adjustable":this.adjustable,"show-border":this.border},this.className)},hasBlocks(){return!_.isEmpty(this.blocks)}},methods:{}};Ti.Preload("ti/com/ti/gui/rows/ti-gui-rows.mjs",t)}(),Ti.Preload("ti/com/ti/gui/rows/_com.json",{name:"ti-gui-rows",globally:!0,template:"./ti-gui-rows.html",mixins:["./ti-gui-rows.mjs"],components:["@com:ti/gui/block"]}),Ti.Preload("ti/com/ti/gui/tabs/ti-gui-tabs.html",'<div class="ti-gui-tabs" :class="topClass">\n  \x3c!--\n    Tab title bar\n  --\x3e\n  <header :class="tabClass">\n    <ul>\n      <li v-for="it in theTabItems"\n        :key="it.key"\n        :class="it.className"\n        @click="onSetCurrentTabItem(it)">\n        \x3c!--Icon--\x3e\n        <ti-icon\n          v-if="it.icon"\n            class="it-icon"\n            :value="it.icon"/>\n        \x3c!--Text--\x3e\n        <span class="it-text">{{it.title|i18n}}</span>\n      </li>\n    </ul>\n  </header>\n  \x3c!--\n    Current Block\n  --\x3e\n  <section v-if="theCurrentBlock">\n    <ti-gui-block \n      embed-in="tabs"\n      v-bind="theCurrentBlock"\n      :action-status="actionStatus"\n      :schema="schema"\n      :shown="shown"/>\n  </section>\n</div>'),function(){const t={inject:["$gui"],data:()=>({myCurrentTab:0}),props:{tabAt:{type:String,default:"top-left",validator:t=>/^(top|bottom)-(left|center|right)$/.test(t)},blocks:{type:Array,default:()=>[]},schema:{type:Object,default:()=>({})},actionStatus:{type:Object,default:()=>({})},shown:{type:Object,default:()=>({})}},computed:{topClass(){return Ti.Css.mergeClassName([`at-${this.theTabAt[0]}`],this.className)},theTabAt(){return this.tabAt.split("-")},tabClass(){return`as-${this.theTabAt[1]}`},theSchema(){return this.schema},theBlockWrapList(){let t=[];for(let e=0;e<this.blocks.length;e++){let i=this.blocks[e],n=i.name||`tab-${e}`;t.push({index:e,key:n,block:i})}return t},theTabItems(){let t=[];for(let e of this.theBlockWrapList){let i=this.myCurrentTab==e.key,n={current:i,key:e.key,index:e.index,name:e.block.name,icon:e.block.icon,title:e.block.title,className:{"is-current":i}};n.icon||n.title||(n.title=Ti.Util.fallback(n.name,n.key)),t.push(n)}return t},theCurrentTabItem(){for(let t of this.theTabItems)if(t.current)return t},theCurrentBlock(){for(let t of this.theBlockWrapList)if(this.myCurrentTab==t.key)return t.block}},methods:{onSetCurrentTabItem(t){this.$gui.onBlockShownUpdate({[t.key]:!0,[this.theCurrentTabItem.key]:!1})},syncCurrentTabFromShown(){for(let t of this.theBlockWrapList)if(this.shown[t.key])return void(this.myCurrentTab=t.key);this.theBlockWrapList.length>0&&(this.myCurrentTab=this.theBlockWrapList[0].key)}},watch:{shown:function(){this.syncCurrentTabFromShown()},blocks:function(){this.syncCurrentTabFromShown()}},mounted:function(){this.syncCurrentTabFromShown()}};Ti.Preload("ti/com/ti/gui/tabs/ti-gui-tabs.mjs",t)}(),Ti.Preload("ti/com/ti/gui/tabs/_com.json",{name:"ti-gui-tabs",globally:!0,template:"./ti-gui-tabs.html",mixins:["./ti-gui-tabs.mjs"],components:["@com:ti/gui/block"]}),function(){const t={formatGuiBlock(t={},e={},i=!1){let n=[`at-${t.position||"center"}`],a=e[t.name];_.isUndefined(a)&&(a=!i),t.mask?n.push("show-mask"):n.push("no-mask");let s=t.position?`gui-panel-${t.position}`:null,o=["className","actionDisplayMode","flex","icon","title","actions","name","adjustable","closer","position","overflow","status"],l={};!i||t.mask?(o.push("width"),o.push("height")):/^(left|right)$/.test(t.position)?(o.push("height"),l.width=t.width):/^(top|bottom)$/.test(t.position)?(o.push("width"),l.height=t.height):"center"==t.position?(o.push("width"),o.push("height")):(l.width=t.width,l.height=t.height);let r=_.pick(t,o);t.size&&"stretch"!=t.size&&("cols"==this.type?r.width=t.size:"rows"==this.type&&(r.height=t.size));let c,d;if(t.body){let e=t.body||{};if(_.isString(e)){let t=this.schema[e];if(_.isPlainObject(t)){if((e=t).extends){let t=this.schema[e.extends],i=_.omit(e,["extends"]);e=_.merge({},t,i)}}else e={comType:e,comConf:{}}}c=e.comType||"ti-label",d=e.comConf||{value:t.name||"GUI"}}else _.isEmpty(t.blocks)||(c="ti-gui",d=_.pick(t,["type","blocks","adjustable","border"]),_.defaults(d,{type:"cols",schema:this.schema,shown:this.shown}));return{className:n.join(" "),panelStyle:Ti.Css.toStyle(l),name:t.name,isShown:a,transName:s,info:r,comType:c,comConf:d}},getFormedBlockList(t=[],e={},i=!1){let n=[];if(_.isArray(t))for(let a of t){let t=this.formatGuiBlock(a,e,i);n.push(t)}return n},createGuiBlockShown(t={},e,i){let n={...t};if(_.isString(e))n[e]=i;else if(_.isArray(e))for(let t of e)n[t]=i;else _.isPlainObject(e)&&_.assign(n,e);return n}};Ti.Preload("ti/com/ti/gui/ti-gui-methods.mjs",t)}(),Ti.Preload("ti/com/ti/gui/ti-gui.html",'<div class="ti-gui" :class="TopClass">\n  \x3c!--===========================================\n    All normal layout\n  --\x3e\n  <div class="gui-con">\n    \x3c!--\n      Layout as rows\n    --\x3e\n    <ti-gui-rows v-if="isRowsLayout"\n      class="ti-fill-parent"\n      v-bind="TheLayout"\n      :schema="schema"\n      :shown="TheShown"\n      :default-flex="defaultFlex"\n      :action-status="actionStatus"/>\n    \x3c!--\n      Layout as cols\n    --\x3e\n    <ti-gui-cols v-else-if="isColsLayout"\n      class="ti-fill-parent"\n      v-bind="TheLayout"\n      :schema="schema"\n      :shown="TheShown"\n      :default-flex="defaultFlex"\n      :action-status="actionStatus"/>\n    \x3c!--\n      Layout as tabs\n    --\x3e\n    <ti-gui-tabs v-else-if="isTabsLayout"\n      class="ti-fill-parent"\n      v-bind="TheLayout"\n      :schema="schema"\n      :shown="TheShown"\n      :default-flex="defaultFlex"\n      :action-status="actionStatus"/>\n  </div>\n  \x3c!--===========================================\n    All float panels\n  --\x3e\n  <template v-for="pan in ThePanels">\n    <transition :name="pan.transName">\n      <ti-gui-panel\n        v-if="pan.visible"\n          :key="pan.key"\n          v-bind="pan.panel"\n          :viewport-width="myViewportWidth"\n          :viewport-height="myViewportHeight"\n          :schema="schema"\n          :shown="TheShown"\n          :default-flex="defaultFlex"\n          :action-status="actionStatus"/>\n    </transition>\n  </template>\n  \x3c!--===========================================\n    Loading\n  --\x3e\n  <div v-if="isLoading"\n    class="ti-mask-loading">\n    <ti-loading v-bind="TheLoading"/>\n  </div>\n</div>'),function(){const t={provide:function(){return{$gui:this}},data:()=>({myShown:{},myViewportWidth:0,myViewportHeight:0}),props:{defaultFlex:{type:String,default:void 0,validator:t=>_.isUndefined(t)||/^(auto|grow|shrink|both|none)$/.test(t)},layout:{type:Object,default:()=>({desktop:{},tablet:"desktop",phone:"desktop"})},schema:{type:Object,default:()=>({})},keepShownTo:{type:String,default:null},actionStatus:{type:Object,default:()=>({})},shown:{type:Object,default:()=>({})},canLoading:{type:Boolean,default:!1},loadingAs:{type:[Boolean,Object],default:null}},computed:{TopClass(){return this.getTopClass({"is-loading":this.isLoading})},TheLayout(){if(_.isEmpty(this.layout))return{};if(/^(rows|cols|tabs)$/.test(this.layout.type))return this.layout;let t=this.layout[this.viewportMode];return _.isString(t)&&(t=this.layout[t]),_.isString(t)&&(t=this.layout[t]),t||{}},isRowsLayout(){return"rows"==this.TheLayout.type},isColsLayout(){return"cols"==this.TheLayout.type},isTabsLayout(){return"tabs"==this.TheLayout.type},ThePanels(){let t=[];return this.joinThePanels(t,this.layout.panels,"G"),this.layout!=this.TheLayout&&this.joinThePanels(t,this.TheLayout.panels,this.viewportMode),t},TheShown(){return this.keepShownTo?this.myShown:this.shown},isLoading(){return!(!this.canLoading||!this.loadingAs)},TheLoading(){return _.isPlainObject(this.loadingAs)?this.loadingAs:{}}},methods:{isShown(...t){for(let e of t)if(this.TheShown[e])return!0;return!1},joinThePanels(t=[],e=[],i=""){if(_.isArray(e)&&e.length>0)for(let n=0;n<e.length;n++){let a=e[n],s=Ti.Util.fallback(a.position,"center"),o=t.length;t.push({index:o,visible:this.isShown(a.name),key:a.name||`panel-${i}-${o}`,transName:`ti-gui-panel-${s}`,panel:a})}},updateShown(t){this.syncMyShown(t),this.persistMyStatus()},onBlockShow(t){this.keepShownTo?this.updateShown({[t]:!0}):this.$notify("block:show",t)},onBlockHide(t){this.keepShownTo?this.updateShown({[t]:!1}):this.$notify("block:hide",t)},onBlockShownUpdate(t){this.keepShownTo?this.updateShown(t):this.$notify("block:shown",t)},syncMyShown(...t){this.keepShownTo&&(this.myShown=_.assign({},this.myShown,...t))},persistMyStatus(){if(this.keepShownTo){let t=_.omitBy(this.myShown,t=>!t);Ti.Storage.session.setObject(this.keepShownTo,t)}},loadMyStatus(){if(this.keepShownTo){let t=Ti.Storage.session.getObject(this.keepShownTo);this.syncMyShown(this.shown,t)}},syncViewportMeasure(){let t=Ti.Rects.createBy(this.$el);this.myViewportWidth=t.width,this.myViewportHeight=t.height}},watch:{shown:function(t){this.syncMyShown(t)}},mounted:function(){Ti.Viewport.watch(this,{resize:_.debounce(()=>this.syncViewportMeasure(),100)}),this.syncViewportMeasure(),this.loadMyStatus()},beforeDestroy:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/gui/ti-gui.mjs",t)}(),Ti.Preload("ti/com/ti/gui/_com.json",{name:"ti-gui",globally:!0,template:"./ti-gui.html",methods:"./ti-gui-methods.mjs",mixins:["./ti-gui.mjs"],components:["@com:ti/gui/cols","@com:ti/gui/rows","@com:ti/gui/tabs","@com:ti/gui/panel"]}),Ti.Preload("ti/com/ti/icon/text/ti-icon-text.html",'<div class="ti-icon-text" \n  :class="className">\n  \x3c!--Icon--\x3e\n  <ti-icon v-if="icon" class="as-icon" :value="icon"/>\n  \x3c!--Text--\x3e\n  <div v-if="text" class="as-text">{{text|i18n}}</div>\n</div>'),function(){const t={inheritAttrs:!1,props:{icon:{type:[String,Object],default:""},text:{type:String,default:null}}};Ti.Preload("ti/com/ti/icon/text/ti-icon-text.mjs",t)}(),Ti.Preload("ti/com/ti/icon/text/_com.json",{name:"ti-icon-text",globally:!0,template:"./ti-icon-text.html",mixins:["./ti-icon-text.mjs"]}),Ti.Preload("ti/com/ti/icon/ti-icon.html",'<div \n  class="ti-icon" \n  :class="TopClass">\n  <div class="icon-icon"\n    :style="Icon.outerStyle">\n    \x3c!--Font icon--\x3e\n    <i v-if="\'font\'==Icon.type"\n      :class="Icon.className"\n      :style="Icon.innerStyle">\n      \x3c!--ligature font --\x3e\n      <template v-if="Icon.text">{{Icon.text}}</template>\n    </i>\n    \x3c!--Svg/Image--\x3e\n    <img v-else-if="\'svg\'==Icon.type || \'image\'==Icon.type"\n        :src="Icon.value"\n        :style="Icon.innerStyle"/>\n    \x3c!--\n      Default output the value\n    --\x3e\n    <em v-else>{{value}}</em>\n  </div>\n</div>'),function(){const t={inheritAttrs:!1,data:()=>({myValue:null}),props:{base:{type:String,default:null},value:{type:[String,Object,Number],default:null},dict:{type:[String,Ti.Dict],default:null},defaultValue:{type:[String,Object],default:null},fontSize:{type:[Number,String],default:null},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null},color:{type:String,default:""},opacity:{type:Number,default:-1}},computed:{TopClass(){return this.getTopClass(`is-${this.Icon.type}`)},Dict(){if(this.dict){if(this.dict instanceof Ti.Dict)return this.dict;let{name:t}=Ti.DictFactory.explainDictName(this.dict);return Ti.DictFactory.CheckDict(t)}},Icon(){let t;if(_.isPlainObject(this.myValue)?t=this.myValue.type&&this.myValue.value?this.myValue:{type:"font",value:Ti.Icons.get(this.myValue)}:(t={type:"font",value:this.myValue},_.isString(this.myValue)&&(t.type=Ti.Util.getSuffixName(this.myValue)||"font"),/^(jpe?g|gif|png)$/i.test(t.type)&&(t.type="image")),"font"==t.type){let e=Ti.Icons.getByName(t.value,t.value);_.assign(t,Ti.Icons.parseFontIcon(e))}else"image"==t.type&&(Ti.Util.isBlank(this.base)||(t.value=Ti.Util.appendPath(this.base,t.value)));return t.outerStyle=Ti.Css.toStyle({width:this.width,height:this.height,color:this.color,opacity:this.opacity>=0?this.opacity:void 0}),"image"==t.type?t.innerStyle={width:this.width?"100%":void 0,height:this.height?"100%":void 0}:"font"==t.type&&(t.innerStyle={"font-size":this.fontSize?Ti.Css.toSize(this.fontSize):void 0}),t}},methods:{async evalMyValue(){let t=Ti.Util.fallbackNil(this.value,this.defaultValue);this.Dict?this.myValue=await this.Dict.getItemIcon(t):this.myValue=t}},watch:{value:{handler:"evalMyValue",immediate:!0}}};Ti.Preload("ti/com/ti/icon/ti-icon.mjs",t)}(),Ti.Preload("ti/com/ti/icon/_com.json",{name:"ti-icon",globally:!0,template:"./ti-icon.html",mixins:["./ti-icon.mjs"]}),Ti.Preload("ti/com/ti/imgfile/ti-imgfile.html",'<div class="ti-imgfile"\n  :class="TopClass">\n  \x3c!--\n    Hidden input file to choose files\n  --\x3e\n  <input \n    type="file" \n    ref="file" \n    class="ti-hide"\n    @change.stop.seft="OnSelectLocalFilesToUpload">\n  \x3c!--\n    Major preview zone\n  --\x3e\n  <div class="thumb-con"\n    :style="ThumbStyle"\n    @click="OnClickToEdit"\n    v-drop-files.mask="OnDropFiles">\n    \x3c!--\n      Preview\n    --\x3e\n    <ti-obj-thumb \n      :preview="PreviewThumb"\n      :progress="progress"\n      :footer="false"/>\n  </div>\n  \x3c!--\n    Remove\n  --\x3e\n  <div v-if="isShowRemoveIcon"\n    class="thumb-actions">\n    \x3c!--remove--\x3e\n    <div class="thumb-opt as-del"\n      @click="OnRemove">\n      <ti-icon value="zmdi-delete"/>\n      <span class="it-text">{{\'clear\'|i18n}}</span>\n    </div>\n    \x3c!--open--\x3e\n    <div class="thumb-opt as-open"\n      @click="OnOpen">\n      <ti-icon value="zmdi-open-in-new"/>\n      <span class="it-text">{{\'open\'|i18n}}</span>\n    </div>\n    \x3c!--//////--\x3e\n  </div>\n</div>'),function(){const t={props:{src:{type:String,default:null},uploadFile:{type:File,default:null},progress:{type:Number,default:-1},width:{type:[String,Number],default:100},height:{type:[String,Number],default:100},removable:{type:Boolean,default:!0}},computed:{TopClass(){return this.getTopClass()},ThumbStyle(){return Ti.Css.toStyle({width:this.width,height:this.height})},isShowRemoveIcon(){return!(this.uploadFile||!this.src)},PreviewThumb(){return this.uploadFile?{type:"localFile",value:this.uploadFile}:this.src?{type:"image",value:this.src}:{type:"font",value:"zmdi-plus"}}},methods:{OnClickToEdit(){this.$refs.file.click()},async OnDropFiles(t){let e=_.get(t,0);e&&this.$notify("upload",e)},async OnSelectLocalFilesToUpload(t){await this.OnDropFiles(t.target.files),this.$refs.file.value=""},OnRemove(){this.$notify("remove")},OnOpen(){this.$notify("open")}}};Ti.Preload("ti/com/ti/imgfile/ti-imgfile.mjs",t)}(),Ti.Preload("ti/com/ti/imgfile/_com.json",{name:"ti-imgfile",globally:!0,template:"./ti-imgfile.html",mixins:["./ti-imgfile.mjs"],components:["@com:ti/obj/thumb"]}),Ti.Preload("ti/com/ti/input/color/ti-input-color.html",'<ti-combo-box class="ti-input-color"\n  :class="topClass"\n  :drop-width="null"\n  :status="status"\n  @collapse="doCollapse">\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <span class="as-color"\n      @click.left="onToggleDrop">\n        <u class="as-bg"></u>\n        <u class="as-fr" :style="colorStyle"></u>\n    </span>\n    <span class="as-clear" @click="onClearColor">\n      <ti-icon value="zmdi-close"/>\n    </span>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <ti-color \n      :value="value"\n      @change="onColorChanged"/>\n  </template>\n</ti-combo-box>'),function(){const t={inheritAttrs:!1,data:()=>({hideBorder:!1,status:"collapse"}),props:{value:{type:[String,Number],default:null}},computed:{topClass(){return Ti.Css.mergeClassName({"is-empty":!this.hasValue,"is-valued":this.hasValue,"show-border":!this.hideBorder,"hide-border":this.hideBorder},this.className)},colorStyle(){let t=Ti.Types.toColor(this.value,null);if(t)return{background:t.rgba}},isCollapse(){return"collapse"==this.status},isExtended(){return"extended"==this.status},hasValue(){return!Ti.Util.isNil(this.value)}},methods:{onToggleDrop(){this.status={collapse:"extended",extended:"collapse"}[this.status]},onClearColor(){this.$notify("change",null)},onColorChanged(t){let e=Ti.Types.toColor(t);this.$notify("change",e?e.toString():null)},doCollapse(){this.status="collapse"}}};Ti.Preload("ti/com/ti/input/color/ti-input-color.mjs",t)}(),Ti.Preload("ti/com/ti/input/color/_com.json",{name:"ti-input-color",globally:!0,template:"./ti-input-color.html",mixins:["./ti-input-color.mjs"],components:["@com:ti/color"]}),Ti.Preload("ti/com/ti/input/date/ti-input-date.html",'<ti-combo-box class="as-date"\n  :class="topClass"\n  :width="width"\n  :drop-width="null"\n  :status="status"\n  @collapse="doCollapse">\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <ti-input \n      :readonly="!canInput"\n      :hide-border="hideBorder"\n      :placeholder="placeholder|i18n"\n      :prefix-icon="icon"\n      :suffix-icon="theStatusIcon"\n      :value="theInputValue"\n      :height="height"\n      :focus="isExtended"\n      @change="onChanged"\n      @input:focus="onInputFocused"\n      @suffix:icon="onClickStatusIcon"/>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <ti-calendar\n      :value="theDropDate"\n      :month-format="monthFormat"\n      :begin-year="beginYear"\n      :end-year="endYear"\n      @change="onDateChanged"/>\n  </template>\n</ti-combo-box>'),function(){const t={data:()=>({runtime:null,status:"collapse"}),props:{canInput:{type:Boolean,default:!0},value:{type:[String,Number,Date],default:null},icon:{type:String,default:"far-calendar-alt"},format:{type:String,default:"yyyy-MM-dd"},placeholder:{type:[String,Number],default:"i18n:blank-date"},hideBorder:{type:Boolean,default:!1},autoCollapse:{type:Boolean,default:!0},width:{type:[Number,String],default:"2rem"},height:{type:[Number,String],default:void 0},monthFormat:{type:String,default:"yyyy-MM"},beginYear:{type:[Number,String],default:1970},endYear:{type:[Number,String],default:(new Date).getFullYear()+1},statusIcons:{type:Object,default:()=>({collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"})}},computed:{topClass(){return Ti.Css.mergeClassName(this.className)},isCollapse(){return"collapse"==this.status},isExtended(){return"extended"==this.status},theDate(){return Ti.Types.toDate(this.value,null)},theDropDate(){return this.runtime||this.theDate},theInputValue(){return this.isExtended?this.getDateText(this.theDropDate):this.getDateText(this.theDropDate,this.format)},theStatusIcon(){return this.statusIcons[this.status]}},methods:{applyRuntime(){if(this.runtime){let t=this.runtime;this.runtime=null;let e=this.getDateText(t);this.$notify("change",e)}},doExtend(){this.status="extended"},doCollapse({escaped:t=!1}={}){this.status="collapse",t?this.runtime=null:this.applyRuntime()},onInputFocused(){this.doExtend()},onChanged(t){if(_.isEmpty(t))this.$notify("change",null);else{let e=Ti.Types.toDate(t),i=this.getDateText(e);this.$notify("change",i)}},onClickStatusIcon(){this.isExtended?this.doCollapse():this.doExtend()},onDateChanged(t){this.runtime=t,this.autoCollapse&&this.doCollapse()},getDateText(t,e="yyyy-MM-dd"){let i=Ti.Types.toDate(t,null);return Ti.Types.formatDate(i,e)}}};Ti.Preload("ti/com/ti/input/date/ti-input-date.mjs",t)}(),Ti.Preload("ti/com/ti/input/date/_com.json",{name:"ti-input-date",globally:!0,template:"./ti-input-date.html",mixins:["./ti-input-date.mjs"],components:["@com:ti/combo/input","@com:ti/calendar"]}),Ti.Preload("ti/com/ti/input/daterange/ti-input-daterange.html",'<ti-combo-box class="as-daterange"\n  :class="topClass"\n  :drop-width="null"\n  :status="status"\n  @collapse="doCollapse">\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <ti-input \n      :readonly="!canInput"\n      :hide-border="hideBorder"\n      :placeholder="placeholder|i18n"\n      :prefix-icon="icon"\n      :suffix-icon="theStatusIcon"\n      :value="theInputValue"\n      :width="width"\n      :height="height"\n      :focus="isExtended"\n      @change="onChanged"\n      @input:focus="onInputFocused"\n      @suffix:icon="onClickStatusIcon"/>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <ti-calendar\n      :value="theDropRange"\n      :range="true"\n      :matrix-count="matrixCount"\n      :month-format="monthFormat"\n      :begin-year="beginYear"\n      :end-year="endYear"\n      @change="onDateRangeChanged"/>\n  </template>\n</ti-combo-box>'),function(){const t={data:()=>({runtime:null,status:"collapse"}),props:{canInput:{type:Boolean,default:!0},value:{type:[String,Number,Date,Array],default:null},icon:{type:String,default:"fas-calendar-alt"},format:{type:String,default:"yyyy-MM-dd HH:mm:ss"},valueType:{type:String,default:"ms-range",validator:t=>/^(ms-(array|range)|ds-(array|range)|date-array)$/.test(t)},placeholder:{type:String,default:"i18n:blank-date-range"},hideBorder:{type:Boolean,default:!1},width:{type:[Number,String],default:"3rem"},height:{type:[Number,String],default:void 0},matrixCount:{type:Number,default:2},monthFormat:{type:String,default:"yyyy-MM-dd"},beginYear:{type:[Number,String],default:1970},endYear:{type:[Number,String],default:(new Date).getFullYear()+1},statusIcons:{type:Object,default:()=>({collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"})}},computed:{topClass(){return Ti.Css.mergeClassName(this.className)},isCollapse(){return"collapse"==this.status},isExtended(){return"extended"==this.status},theValue(){if(_.isEmpty(this.value))return null;if(_.isString(this.value)){let t=_.trim(this.value),e=/^[[(](.+)[\])]$/.exec(t);e&&(t=_.trim(e[1]));let i=Ti.S.toArray(t,{sep:","});if(i.length>0)return Ti.Types.toDate(i)}return _.isString(this.value)?Ti.Types.toDate(this.value):void 0},theDate(){return _.isArray(this.theValue)&&!_.isEmpty(this.theValue)?Ti.Types.toDate(this.theValue[0]):this.theValue?Ti.Types.toDate(this.theValue):void 0},theRangeInMs(){if(!this.theDate)return[];let t,e=new Date(this.theDate);t=_.isArray(this.theValue)&&this.theValue.length>1?Ti.Types.toDate(this.theValue[1]):new Date(e);let i=[e.getTime(),t.getTime()].sort();return e=Ti.DateTime.setTime(new Date(i[0])),t=Ti.DateTime.setDayLastTime(new Date(i[1])),[e.getTime(),t.getTime()]},theRange(){return _.isEmpty(this.theRangeInMs)?[]:[new Date(this.theRangeInMs[0]),new Date(this.theRangeInMs[1])]},theDropRange(){return this.runtime||this.theRange},theRangeValue(){return this.formatRangeValue(this.theRange,{valueType:"ds-array",format:"yyyy-MM-dd",collapse:!0}).join(", ")},theRangeText(){if(!_.isEmpty(this.theRange)){let t=this.theRange[0],e=this.theRange[1],i=t.getFullYear(),n=t.getMonth(),a=t.getDate(),s=e.getFullYear(),o=e.getMonth(),l=e.getDate(),r=Ti.DateTime.getMonthAbbr(n),c=Ti.DateTime.getMonthAbbr(o),d={yy0:i,yy1:s,MM0:++n,MM1:++o,dd0:a,dd1:l,MA0:r,MA1:c,MT0:Ti.I18n.get(r),MT1:Ti.I18n.get(c)};return i!=s?Ti.I18n.getf("cal.d-range-beyond-years",d):n!=o?Ti.I18n.getf("cal.d-range-beyond-months",d):a!=l?Ti.I18n.getf("cal.d-range-beyond-days",d):Ti.I18n.getf("cal.d-range-in-same-day",d)}},theInputValue(){return this.isExtended?this.theRangeValue:this.theRangeText},theStatusIcon(){return this.statusIcons[this.status]}},methods:{applyRuntime(){if(this.runtime){let t=this.runtime;this.runtime=null;let e=this.formatRangeValue(t);this.$notify("change",e)}},doExtend(){this.status="extended"},doCollapse({escaped:t=!1}={}){this.status="collapse",t?this.runtime=null:this.applyRuntime()},onInputFocused(){this.doExtend()},onChanged(t){let e=this.parseDateRange(t);if(_.isEmpty(e))this.$notify("change",null);else{let t=this.formatRangeValue(e);this.$notify("change",t)}},onClickStatusIcon(){this.isExtended?this.doCollapse():this.doExtend()},onDateRangeChanged(t){this.runtime=t},parseDateRange(t){if(_.isEmpty(t))return[];let e=t.split(",");if(_.isEmpty(e))return[];if(1==e.length){let t=Ti.Types.toDate(e[0]);Ti.DateTime.setTime(t);let i=new Date(t.getTime());return Ti.DateTime.setDayLastTime(i),[t,i]}let i=Ti.Types.toDate(e[0]);Ti.DateTime.setTime(i);let n=Ti.Types.toDate(e[1]);return Ti.DateTime.setDayLastTime(n),[i,n].sort((t,e)=>t.getTime()-e.getTime())},formatRangeValue(t,{valueType:e,format:i,collapse:n=!1}={}){let[a,s]=t||[];if(!a)return[];s||(s=new Date(a),Ti.DateTime.setDayLastTime(s)),e=e||this.valueType,i=i||this.format;let o=(0,{"ms-range":()=>`[${a.getTime()},${s.getTime()}]`,"ms-array":()=>[a.getTime(),s.getTime()],"ds-range":()=>"["+[Ti.Types.formatDate(a,i),Ti.Types.formatDate(s,i)].join(",")+"]","ds-array":()=>[Ti.Types.formatDate(a,i),Ti.Types.formatDate(s,i)],"date-array":()=>[a,s]}[e])();return n&&o[0]==o[1]?[o[0]]:o}}};Ti.Preload("ti/com/ti/input/daterange/ti-input-daterange.mjs",t)}(),Ti.Preload("ti/com/ti/input/daterange/_com.json",{name:"ti-input-daterange",globally:!0,template:"./ti-input-daterange.html",mixins:["./ti-input-daterange.mjs"],components:["@com:ti/combo/input","@com:ti/calendar"]}),Ti.Preload("ti/com/ti/input/datetime/ti-input-datetime.html",'<ti-combo-box class="as-datetime"\n  :class="topClass"\n  :width="width"\n  :drop-width="\'box\'"\n  :drop-overflow="\'hidden\'"\n  :status="status"\n  @collapse="doCollapse">\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <ti-input \n      :readonly="!canInput"\n      :hide-border="hideBorder"\n      :placeholder="placeholder|i18n"\n      :prefix-icon="icon"\n      :suffix-icon="theStatusIcon"\n      :value="theInputValue"\n      :height="height"\n      :focus="isExtended"\n      @change="onChanged"\n      @input:focus="onInputFocused"\n      @suffix:icon="onClickStatusIcon"/>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <ti-datetime\n      :value="theDropDate"\n      :month-format="monthFormat"\n      :begin-year="beginYear"\n      :end-year="endYear"\n      @change="onDateChanged"/>\n  </template>\n</ti-combo-box>'),function(){const t={inheritAttrs:!1,data:()=>({runtime:null,status:"collapse"}),props:{canInput:{type:Boolean,default:!0},value:{type:[String,Number,Date],default:null},icon:{type:String,default:"fas-clock"},format:{type:String,default:"yyyy-MM-dd HH:mm:ss"},placeholder:{type:[String,Number],default:"i18n:blank-datetime"},hideBorder:{type:Boolean,default:!1},autoCollapse:{type:Boolean,default:!1},width:{type:[Number,String],default:"2.4rem"},height:{type:[Number,String],default:void 0},monthFormat:{type:String,default:"yyyy-MM"},beginYear:{type:[Number,String],default:1970},endYear:{type:[Number,String],default:(new Date).getFullYear()+1},statusIcons:{type:Object,default:()=>({collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"})}},computed:{topClass(){return Ti.Css.mergeClassName(this.className)},isCollapse(){return"collapse"==this.status},isExtended(){return"extended"==this.status},theDate(){return Ti.Types.toDate(this.value,null)},theDropDate(){return this.runtime||this.theDate},theInputValue(){return this.isExtended?this.getDateText(this.theDropDate):this.getDateText(this.theDropDate,this.format)},theStatusIcon(){return this.statusIcons[this.status]}},methods:{applyRuntime(){if(this.runtime){let t=this.runtime;this.runtime=null;let e=this.getDateText(t);this.$notify("change",e)}},doExtend(){this.status="extended"},doCollapse({escaped:t=!1}={}){this.status="collapse",t?this.runtime=null:this.applyRuntime()},onInputFocused(){this.doExtend()},onChanged(t){if(_.isEmpty(t))this.$notify("change",null);else{let e=Ti.Types.toDate(t),i=this.getDateText(e);this.$notify("change",i)}},onClickStatusIcon(){this.isExtended?this.doCollapse():this.doExtend()},onDateChanged(t){this.runtime=t,this.autoCollapse&&this.doCollapse()},getDateText(t,e="yyyy-MM-dd HH:mm:ss"){let i=Ti.Types.toDate(t,null);return Ti.Types.formatDate(i,e)}}};Ti.Preload("ti/com/ti/input/datetime/ti-input-datetime.mjs",t)}(),Ti.Preload("ti/com/ti/input/datetime/_com.json",{name:"ti-input-datetime",globally:!0,template:"./ti-input-datetime.html",mixins:["./ti-input-datetime.mjs"],components:["@com:ti/combo/input","@com:ti/datetime"]}),function(){const t={options:{type:Array,default:()=>["im-spotify","im-newsletter","im-award","im-headphones","im-megaphone","im-barcode","im-google-play","im-facebook-messenger","im-wechat","im-line","im-git","im-first-aid","im-ribbon","im-plane","im-idea","im-data","im-data-delete","im-data-validate","im-folder-add","im-radar","im-pizza","im-truck","im-support","im-reset","im-import","im-export","im-color-fan","im-cookie","im-gift-card","im-factory","im-pulse","im-accessibility","im-apartment","im-plugin","im-layer","im-direction","im-dribbble","im-radio","im-bank","im-battery-empty","im-battery","im-battery-full","im-x-mark-circle-o","im-timer","im-hashtag","im-server","im-flask","im-anchor","im-umbrella","im-cc-amex","im-cc-visa","im-cc-mastercard","im-cc-paypal","im-cc-amazon","im-cc-bitcoin","im-car","im-paintbrush","im-cube","im-cubes","im-language","im-calculator","im-user-settings","im-trophy","im-pointer","im-edit","im-warning-circle","im-check-mark-circle-o","im-date-o","im-newspaper-o","im-wrench","im-binoculars","im-gamepad","im-history","im-bell-active","im-coffee","im-leaf","im-gift","im-flip-chart-o","im-clock","im-line-chart-up","im-laptop-o","im-monitor-o","im-cursor","im-keyboard","im-pin","im-store","im-graduation-hat","im-certificate-o","im-sun","im-diamond-o","im-drop","im-paperplane","im-fingerprint","im-lifebuoy","im-power","im-target","im-navigation","im-bug","im-network","im-pie-chart","im-note-o","im-id-card","im-tags","im-floppy-disk","im-dashboard","im-tools","im-users","im-trash-can","im-x-mark-circle","im-x-mark","im-shield","im-mobile","im-inbox","im-crown","im-check-square","im-check-square-o","im-check-mark-circle","im-check-mark","im-redo","im-undo","im-map-o","im-task-o","im-menu-dot-v","im-edit-off","im-facebook","im-sitemap","im-save","im-volume-off","im-volume","im-sign-out","im-sign-in","im-shopping-cart","im-rocket","im-banknote","im-fullscreen","im-minimize","im-maximize","im-light-bulb","im-filter","im-picture-o","im-eye-off","im-eye","im-external-link","im-random","im-loop","im-next","im-previous","im-eject","im-stop","im-pause","im-play","im-credit-card","im-bookmark","im-upload","im-download","im-video-camera","im-photo-camera","im-care-up","im-care-down","im-care-left","im-arrow-up-circle","im-arrow-down-circle","im-arrow-left-circle","im-arrow-right-circle","im-arrow-up","im-arrow-down","im-arrow-left","im-arrow-right","im-angle-up-circle","im-angle-down-circle","im-angle-left-circle","im-angle-right-circle","im-angle-up","im-angle-down","im-angle-left","im-angle-right","im-twitch","im-reddit","im-edge","im-whatsapp","im-amazon","im-snapchat","im-instagram","im-fire","im-sync","im-toggle","im-control-panel","im-archive","im-bell","im-bell-off","im-youtube","im-spinner","im-smiley-o","im-frown-o","im-code","im-android-os","im-linux-os","im-apple-os","im-menu","im-menu-list","im-menu-dot-h","im-windows-os","im-square-o","im-check-square-i","im-radio-button-circle","im-radio-button-circle-o","im-flag","im-opera","im-thumb-up","im-thumb-down","im-safari","im-paper-clip","im-firefox","im-copy","im-chrome","im-quote-left","im-quote-right","im-ie","im-briefcase","im-forbidden","im-vk","im-wizard","im-location","im-paypal","im-coin","im-key","im-lock","im-lock-open","im-share","im-flash","im-cloud","im-database","im-wifi","im-book","im-audio","im-video","im-microphone","im-printer","im-computer","im-phone","im-user-male","im-user-female","im-user-circle","im-clock-o","im-calendar","im-pencil","im-question","im-bar-chart","im-info","im-folder","im-folder-open","im-file","im-file-o","im-files-o","im-warning","im-link","im-unlink","im-tag","im-heart","im-cloud-upload","im-cloud-download","im-speech-bubble","im-speech-bubble-comment","im-speech-bubble-comments","im-mail","im-globe","im-home","im-window-o","im-table","im-windows-o","im-gear","im-twitter","im-magnifier","im-magnifier-plus","im-magnifier-minus","im-minus","im-minus-circle","im-plus","im-plus-circle","im-care-right","im-star","im-star-half","im-star-o","im-circle-o","im-xing","im-vimeo","im-tumblr","im-stumbleupon","im-stackoverflow","im-soundcloud","im-skype","im-pinterest","im-linkedin","im-google-plus","im-github","im-flickr","im-facebook-like","im-blogger","im-behance"]}};Ti.Preload("ti/com/ti/input/icon/ti-input-icon-props.mjs",t)}(),Ti.Preload("ti/com/ti/input/icon/ti-input-icon.html",'<ti-combo-box class="ti-input-icon"\n  :class="topClass"\n  :drop-width="dropWidth"\n  :drop-height="dropHeight"\n  :status="status"\n  @collapse="doCollapse">\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <span class="as-value"\n      :style="theValueStyle"\n      @click.left="onToggleDrop">\n      \x3c!--Show Icon--\x3e\n      <ti-icon \n        v-if="hasValue"\n          :value="value"/>\n      \x3c!--No Icon--\x3e\n      <span \n        v-else\n          class="no-icon"><i class="zmdi zmdi-cake"></i></span>\n    </span>\n    <span class="as-clear" @click="onClearIcon">\n      <ti-icon value="zmdi-close"/>\n    </span>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <div class="icon-input">\n      <input ref="input"\n        :placeholder="\'i18n:icon-code-tip\'|i18n"\n        @change="onChangedIcon">\n    </div>\n    <div class="icon-options">\n      <ul>\n        <li v-for="li of theOptionIcons"\n          @click.left="onSelectIcon(li)"\n          @dblclick.left="onSelectIconAndCollapse(li)"\n          @mouseenter="onHoverIcon(li)"\n          @mouseleave="onLeaveIcon(li)">\n          <ti-icon :value="li.value"/>\n        </li>\n      </ul>\n    </div>\n    <div class="icon-tip">\n      <template v-if="theTipIcon">\n        <ti-icon :value="theTipIcon"/>\n        <span>{{theTipIcon}}</span>\n      </template>\n      <template v-else>\n        <span>...</span>\n      </template>\n    </div>\n  </template>\n</ti-combo-box>'),function(){const t={inheritAttrs:!1,data:()=>({hideBorder:!1,myHoverIcon:null,status:"collapse"}),props:{value:{type:[String,Object],default:null},iconSize:{type:[Number,String],default:null},dropWidth:{type:[Number,String],default:"4rem"},dropHeight:{type:[Number,String],default:"4rem"}},computed:{topClass(){return Ti.Css.mergeClassName({"show-border":!this.hideBorder,"hide-border":this.hideBorder},this.className)},theValueStyle(){return{"font-size":Ti.Css.toSize(this.iconSize)}},isCollapse(){return"collapse"==this.status},isExtended(){return"extended"==this.status},hasValue(){return!Ti.Util.isNil(this.value)},theTipIcon(){return this.myHoverIcon||this.value},theOptionIcons(){let t=[];return _.forEach(this.options,(e,i)=>{let n=/^([a-z]+)-(.+)$/.exec(e);t.push({value:e,index:i,type:n[1],name:n[2]})}),t}},methods:{onToggleDrop(){this.status={collapse:"extended",extended:"collapse"}[this.status]},onSelectIcon({value:t}={}){this.$notify("change",t)},onSelectIconAndCollapse({value:t}={}){this.$notify("change",t),this.status="collapse"},onChangedIcon(){let t=_.trim(this.$refs.input.value);console.log("haha",t),this.$notify("change",t)},onHoverIcon({value:t}={}){this.myHoverIcon=t},onLeaveIcon(){this.myHoverIcon=null},onClearIcon(){this.$notify("change",null)},doCollapse(){this.status="collapse"}}};Ti.Preload("ti/com/ti/input/icon/ti-input-icon.mjs",t)}(),Ti.Preload("ti/com/ti/input/icon/_com.json",{name:"ti-input-icon",globally:!0,template:"./ti-input-icon.html",props:"./ti-input-icon-props.mjs",mixins:["./ti-input-icon.mjs"]}),Ti.Preload("ti/com/ti/input/month/ti-input-month.html",'<ti-combo-box class="as-month"\n  :class="topClass"\n  :width="width"\n  :drop-width="dropWidth"\n  :drop-height="dropHeight"\n  :drop-overflow="\'hidden\'"\n  :status="status"\n  @collapse="doCollapse">\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <ti-input \n      :readonly="!canInput"\n      :hide-border="hideBorder"\n      :placeholder="placeholder|i18n"\n      :prefix-icon="icon"\n      :suffix-icon="theStatusIcon"\n      :value="theInputValue"\n      :height="height"\n      :focus="isExtended"\n      @change="onChanged"\n      @input:focus="onInputFocused"\n      @suffix:icon="onClickStatusIcon"/>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <ti-month\n      :value="theDropDate"\n      :height="dropHeight"\n      :begin-year="beginYear"\n      :end-year="endYear"\n      @change="onMonthChanged"/>\n  </template>\n</ti-combo-box>'),function(){const t={inheritAttrs:!1,data:()=>({runtime:null,status:"collapse"}),props:{canInput:{type:Boolean,default:!0},value:{type:[String,Number,Date],default:null},icon:{type:String,default:"far-calendar"},format:{type:String,default:"yyyy-MM"},placeholder:{type:[String,Number],default:"i18n:blank-month"},hideBorder:{type:Boolean,default:!1},width:{type:[Number,String],default:"1.4rem"},height:{type:[Number,String],default:void 0},dropWidth:{type:[Number,String],default:"box"},dropHeight:{type:[Number,String],default:200},beginYear:{type:[Number,String],default:1970},endYear:{type:[Number,String],default:(new Date).getFullYear()+1},statusIcons:{type:Object,default:()=>({collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"})}},computed:{topClass(){return Ti.Css.mergeClassName(this.className)},isCollapse(){return"collapse"==this.status},isExtended(){return"extended"==this.status},theDate(){return Ti.Types.toDate(this.value,null)},theDropDate(){return this.runtime||this.theDate},theInputValue(){return this.isExtended?this.getDateText(this.theDropDate):this.getDateText(this.theDropDate,this.format)},theStatusIcon(){return this.statusIcons[this.status]}},methods:{applyRuntime(){if(this.runtime){let t=this.runtime;this.runtime=null;let e=this.getDateText(t);this.$notify("change",e)}},doExtend(){this.status="extended"},doCollapse({escaped:t=!1}={}){this.status="collapse",t?this.runtime=null:this.applyRuntime()},onInputFocused(){this.doExtend()},onChanged(t){if(_.isEmpty(t))this.$notify("change",null);else{let e=Ti.Types.toDate(t),i=this.getDateText(e);this.$notify("change",i)}},onClickStatusIcon(){this.isExtended?this.doCollapse():this.doExtend()},onMonthChanged(t){this.runtime=t},getDateText(t,e="yyyy-MM"){let i=Ti.Types.toDate(t,null);return Ti.Types.formatDate(i,e)}}};Ti.Preload("ti/com/ti/input/month/ti-input-month.mjs",t)}(),Ti.Preload("ti/com/ti/input/month/_com.json",{name:"ti-input-month",globally:!0,template:"./ti-input-month.html",mixins:["./ti-input-month.mjs"],components:["@com:ti/combo/input","@com:ti/month"]}),Ti.Preload("ti/com/ti/input/num/ti-input-num.html",'<div\n  class="ti-input-num ti-fill-parent"\n  :class="TopClass"\n  :style="TopStyle">\n  \x3c!--\n    Button: -\n  --\x3e\n  <div class="as-btn is-decrease"\n    :class="DesreaseClass"\n    @click="changeByStep(-1)">\n    <ti-icon value="zmdi-minus"/>\n  </div>\n  \x3c!--\n    Input\n  --\x3e\n  <div class="as-input">\n    <input \n      spellcheck="false" \n      :value="TheValue"\n      @change="onChanged">\n  </div>\n  \x3c!--\n    Button: +\n  --\x3e\n  <div class="as-btn is-increase"\n    :class="IncreaseClass"\n    @click="changeByStep(1)">\n    <ti-icon value="zmdi-plus"/>\n  </div>\n</div>'),function(){const t={props:{value:null,defaultValue:{type:Number,default:0},maxValue:{type:Number,default:void 0},minValue:{type:Number,default:void 0},step:{type:Number,default:1},width:{type:[Number,String],default:200}},computed:{TopClass(){return this.getTopClass()},TopStyle(){return Ti.Css.toStyleRem100({width:this.width})},DesreaseClass(){return!_.isUndefined(this.minValue)&&this.value<=this.minValue?"is-disabled":"is-enabled"},IncreaseClass(){return!_.isUndefined(this.maxValue)&&this.value>=this.maxValue?"is-disabled":"is-enabled"},TheValue(){if(!isNaN(this.value)&&_.isNumber(this.value))return this.getValue(this.value)}},methods:{getValue(t){return isNaN(t)||!_.isNumber(t)?this.defaultValue:!_.isUndefined(this.minValue)&&t<this.minValue?this.minValue:!_.isUndefined(this.maxValue)&&t>this.maxValue?this.maxValue:t},changeByStep(t=0){let e=this.TheValue;_.isUndefined(e)?e=this.defaultValue:e+=t*this.step,(e=this.getValue(e))!=this.value&&this.$notify("change",e)},onChanged(t){let e=t.target;if(_.isElement(e)){let t=_.trim(e.value);if(_.isEmpty(t))this.$notify("change",null);else{let e=t?1*t:this.defaultValue;isNaN(e)||this.$notify("change",e)}}}}};Ti.Preload("ti/com/ti/input/num/ti-input-num.mjs",t)}(),Ti.Preload("ti/com/ti/input/num/_com.json",{name:"ti-input-num",globally:!0,template:"./ti-input-num.html",mixins:["./ti-input-num.mjs"]}),function(){const t={dict:{type:[String,Ti.Dict],default:null},inputValue:null,maxValueLen:{type:Number,default:0},valueUnique:{type:Boolean,default:!0},tagOptions:{type:[Array,Function],default:()=>[]},tagMapping:{type:Object,default:void 0},canInput:{type:Boolean,default:!0},cancelTagBubble:{type:Boolean,default:!1},tagItemIconBy:{type:[String,Function],default:void 0},tagItemDefaultIcon:{type:String,default:void 0},tagOptionDefaultIcon:{type:String,default:void 0}};Ti.Preload("ti/com/ti/input/tags/ti-input-tags-props.mjs",t)}(),Ti.Preload("ti/com/ti/input/tags/ti-input-tags.html",'<ti-input\n  class="ti-input-tags"\n  :class-name="className"\n  :value="inputValue"\n  :value-case="valueCase"\n  :trimed="trimed"\n\n  :readonly="!canInput || readonly"\n  :focused="focused"\n  :hover="hover"\n  :auto-select="autoSelect"\n\n  :placeholder="thePlaceholder"\n  :auto-i18n="autoI18n"\n  :hide-border="hideBorder"\n  :prefix-icon="prefixIcon"\n  :prefix-hover-icon="prefixHoverIcon"\n  :prefix-icon-for-clean="prefixIconForClean"\n  :prefix-text="prefixText"\n  :suffix-icon="suffixIcon"\n  :suffix-text="suffixText"\n  \n  :width="width"\n  :height="height"\n\n  :on-init="onInputInit"\n  \n  @inputing="onInputInputing"\n  @change="onInputChanged"\n  @input:focus="$notify(\'input:focus\')"\n  @prefix:icon="$notify(\'prefix:icon\')"\n  @input:blur="$notify(\'input:blur\')"\n  @suffix:icon="$notify(\'suffix:icon\')">\n  \x3c!--\n    Tag List\n  --\x3e\n  <div v-if="hasTags"\n    class="as-tags">\n    <ti-tags\n      :value="theTags"\n      :dict="dict"\n      :removable="true"\n      :item-options="tagOptions"\n      :item-icon-by="tagItemIconBy"\n      :item-default-icon="tagItemDefaultIcon"\n      :option-default-icon="tagOptionDefaultIcon"\n      :mapping="tagMapping"\n      :cancel-item-bubble="cancelTagBubble"\n      @change="$notify(\'change\', $event)"/>\n  </div>\n</ti-input>'),function(){const t={data:()=>({}),props:{inputChange:{type:Function,default:void 0}},computed:{theTags(){return this.evalTagList(this.value)},hasTags(){return!_.isEmpty(this.theTags)},thePlaceholder(){return this.placeholder?this.placeholder:this.readonly||!this.canInput?"":"i18n:input-tags"}},methods:{onInputInit(t){this.$input=t},evalTagList(t=[],e){let i=_.filter(_.concat(t),t=>!Ti.Util.isNil(t));if(Ti.Util.isNil(e)||i.push(e),this.valueUnique&&(i=_.uniq(i)),this.maxValueLen>0)i=_.slice(i,0,this.maxValueLen);else if(this.maxValueLen<0){let t=Math.max(0,i.length+this.maxValueLen);i=_.slice(i,t)}let n=[];for(let t of i)_.isPlainObject(t)?n.push(_.assign({icon:this.tagIcon,options:this.tagOptions},t)):n.push(t);return n},getTagValues(t=[]){let e=[];for(let i of t){let t=_.isPlainObject(i)?i.value:i;Ti.Util.isNil(t)||e.push(t)}return e},onInputInputing(t){this.$notify("inputing",t)},onInputChanged(t){if(_.isNull(t))this.$notify("change",[]);else if(_.isFunction(this.inputChange))this.inputChange(t);else if(t){let e=this.evalTagList(this.value,t),i=this.getTagValues(e);this.$notify("change",i)}}}};Ti.Preload("ti/com/ti/input/tags/ti-input-tags.mjs",t)}(),Ti.Preload("ti/com/ti/input/tags/_com.json",{name:"ti-input-tags",globally:!0,template:"./ti-input-tags.html",props:["@com:ti/input/ti-input-props.mjs","./ti-input-tags-props.mjs"],mixins:["./ti-input-tags.mjs"],components:["@com:ti/tags"]}),Ti.Preload("ti/com/ti/input/text/ti-input-text.html",'<div class="ti-input-text" \n  :class="topClass" \n  :style="topStyle"\n  v-ti-activable>\n  \x3c!--\n    Prefix\n  --\x3e\n  <div class="as-bar is-prefix">\n    \x3c!--prefix:icon--\x3e\n    <div v-if="prefixIcon"\n      class="as-icon at-prefix"\n      :class="getHoverClass(\'prefixIcon\')"\n      @click.left.stop="onClickPrefixIcon"\n      @mouseenter="pointerHover=\'prefixIcon\'"\n      @mouseleave="pointerHover=null">\n      <ti-icon :value="thePrefixIcon"/>\n    </div>\n    \x3c!--prefix:text--\x3e\n    <div v-if="prefixText" \n      class="as-text at-prefix"\n      :class="getHoverClass(\'prefixText\')"\n      @click.left.stop="onClickPrefixText"\n      @mouseenter="pointerHover=\'prefixText\'"\n      @mouseleave="pointerHover=null">\n      <span>{{prefixText|i18n}}</span>\n    </div>\n  </div>\n  \x3c!--input--\x3e\n  <textarea ref="input"\n    spellcheck="false" \n    :readonly="readonly"\n    :value="theValue"\n    :placeholder="placeholder"\n    @compositionstart="onInputCompositionStart"\n    @compositionend="onInputCompositionEnd"\n    @input="onInputing"\n    @keydown="onInputKeyDown"\n    @change="onInputChanged"\n    @focus="onInputFocus"\n    @blur="onInputBlur"></textarea>\n  \x3c!--\n    Suffox\n  --\x3e\n  <div class="as-bar is-suffix">\n    \x3c!--suffix:text--\x3e\n    <div v-if="suffixText"\n      class="as-text at-suffix"\n      :class="getHoverClass(\'suffixText\')"\n      @click.left.stop="onClickSuffixIcon"\n      @mouseenter="pointerHover=\'suffixText\'"\n      @mouseleave="pointerHover=null">\n      <span>{{suffixText|i18n}}</span>\n    </div>\n    \x3c!--suffix:icon--\x3e\n    <div v-if="suffixIcon"\n      class="as-icon at-suffix"\n      :class="getHoverClass(\'suffixIcon\')"\n      @click.left.stop="onClickSuffixIcon"\n      @mouseenter="pointerHover=\'suffixIcon\'"\n      @mouseleave="pointerHover=null">\n      <ti-icon :value="suffixIcon"/>\n    </div>\n  </div>\n</div>'),function(){const t={inheritAttrs:!1,data:()=>({inputCompositionstart:!1,isFocused:!1,pointerHover:null}),watch:{focus:function(t){this.isFocused=t}},props:{value:null,format:{type:[String,Array,Object],default:void 0},readonly:{type:Boolean,default:!1},valueCase:{type:String,default:null,validator:t=>Ti.Util.isNil(t)||Ti.S.isValidCase(t)},placeholder:{type:[String,Number],default:null},trimed:{type:Boolean,default:!0},autoJsValue:{type:Boolean,default:!1},hideBorder:{type:Boolean,default:!1},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null},prefixHoverIcon:{type:String,default:"zmdi-close-circle"},prefixIconForClean:{type:Boolean,default:!0},prefixIcon:{type:String,default:null},prefixText:{type:String,default:null},suffixText:{type:String,default:null},suffixIcon:{type:String,default:null},focus:{type:Boolean,default:!1},hover:{type:[Array,String],default:()=>["prefixIcon","suffixIcon"]},autoSelect:{type:Boolean,default:!1}},computed:{topClass(){return Ti.Css.mergeClassName(this.className,{"is-self-actived":this.isSelfActived,"is-actived":this.isActived,"is-focused":this.isFocused,"is-blurred":!this.isFocused,"is-readonly":this.readonly,"show-border":!this.hideBorder,"hide-border":this.hideBorder,"has-prefix-icon":this.thePrefixIcon,"has-prefix-text":this.prefixText,"has-suffix-icon":this.suffixIcon,"has-suffix-text":this.suffixText})},topStyle(){return Ti.Css.toStyle({width:this.width,height:this.height})},theValue(){return Ti.Types.toStr(this.value,this.format)},thePrefixIcon(){return"prefixIcon"==this.pointerHover&&this.isCanHover("prefixIcon")?this.prefixHoverIcon||this.prefixIcon:this.prefixIcon},theHover(){let t={},e=_.concat(this.hover);for(let i of e)i&&(t[i]=!0);return t}},methods:{isCanHover(t){return!!this.theHover[t]},getHoverClass(t){let e=this.isCanHover(t);return{"can-hover":e,"for-look":!e}},onInputCompositionStart(){this.inputCompositionstart=!0},onInputCompositionEnd(){this.inputCompositionstart=!1,this.doWhenInput()},onInputing(t){this.inputCompositionstart||this.doWhenInput()},doWhenInput(t="inputing",e=!1){if(_.isElement(this.$refs.input)){let i=this.$refs.input.value;e?i=Ti.S.toJsValue(i,{autoNil:!0,autoDate:!1,trimed:this.trimed}):this.trimed&&(i=_.trim(i)),i=Ti.S.toCase(i,this.valueCase),this.$notify(t,i)}},onInputKeyDown(t){let e=_.pick(t,"code","key","keyCode","altKey","ctrlKey","metaKey","shiftKey");e.uniqueKey=Ti.Shortcut.getUniqueKey(e),e.$event=t,this.$notify("keypress",e)},onInputChanged(){this.doWhenInput("change",this.autoJsValue)},onInputFocus(){this.readonly||(this.autoSelect?this.$refs.input.select():this.$refs.input.focus()),this.isFocused=!0,this.$notify("input:focus"),this.isActived||this.setActived()},onInputBlur(){this.isFocused=!1,this.$notify("input:blur")},onClickPrefixIcon(){this.prefixIconForClean&&this.$notify("change",null),this.$notify("prefix:icon")},onClickPrefixText(){this.$notify("prefix:text")},onClickSuffixIcon(){this.$notify("suffix:icon")},onClickSuffixText(){this.$notify("suffix:text")},doAutoFocus(){this.focus&&!this.isFocused&&this.onInputFocus()}},watch:{focus:function(){this.doAutoFocus()}},mounted:function(){this.doAutoFocus()}};Ti.Preload("ti/com/ti/input/text/ti-input-text.mjs",t)}(),Ti.Preload("ti/com/ti/input/text/_com.json",{name:"ti-input-text",globally:!0,template:"./ti-input-text.html",mixins:["./ti-input-text.mjs"],components:[]}),function(){const t={value:null,format:void 0,valueCase:{type:String,default:null,validator:t=>Ti.Util.isNil(t)||Ti.S.isValidCase(t)},trimed:{type:Boolean,default:!0},autoJsValue:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},focused:{type:Boolean,default:!1},hover:{type:[Array,String],default:()=>["prefixIcon","suffixIcon"]},autoSelect:{type:Boolean,default:!1},placeholder:{type:[String,Number],default:null},autoI18n:{type:Boolean,default:!1},hideBorder:{type:Boolean,default:!1},prefixIcon:{type:[String,Object],default:null},prefixHoverIcon:{type:String,default:"zmdi-close-circle"},prefixIconForClean:{type:Boolean,default:!0},prefixText:{type:String,default:null},suffixIcon:{type:[String,Object],default:null},suffixText:{type:String,default:null},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null}};Ti.Preload("ti/com/ti/input/ti-input-props.mjs",t)}(),Ti.Preload("ti/com/ti/input/ti-input.html",'<div class="ti-input" \n  :class="TopClass" \n  :style="TopStyle"\n  v-ti-activable>\n  \x3c!--prefix:icon--\x3e\n  <div v-if="prefixIcon"\n    class="as-input-icon at-prefix"\n    :class="getHoverClass(\'prefixIcon\')"\n    @click.left="OnClickPrefixIcon"\n    @mouseenter="pointerHover=\'prefixIcon\'"\n    @mouseleave="pointerHover=null">\n    <ti-icon :value="ThePrefixIcon"/>\n  </div>\n  \x3c!--prefix:text--\x3e\n  <div v-if="prefixText" \n    class="as-input-text at-prefix"\n    :class="getHoverClass(\'prefixText\')"\n    @click.left="OnClickPrefixText"\n    @mouseenter="pointerHover=\'prefixText\'"\n    @mouseleave="pointerHover=null">\n    <span>{{prefixText|i18n}}</span>\n  </div>\n  \x3c!--PreSlot--\x3e\n  <slot></slot>\n  \x3c!--\n    Input Box\n  --\x3e\n  <div class="as-input">\n    <input ref="input"\n      spellcheck="false" \n      :readonly="readonly"\n      :value="TheValue"\n      :placeholder="placeholder|i18n"\n      @compositionstart="OnInputCompositionStart"\n      @compositionend="OnInputCompositionEnd"\n      @input="OnInputing"\n      @change="OnInputChanged"\n      @focus="OnInputFocus"\n      @blur="OnInputBlur">\n    \x3c!--suffix:text--\x3e\n    <div v-if="suffixText"\n      class="as-input-text at-suffix"\n      :class="getHoverClass(\'suffixText\')"\n      @click.left="OnClickSuffixIcon"\n      @mouseenter="pointerHover=\'suffixText\'"\n      @mouseleave="pointerHover=null">\n      <span>{{suffixText|i18n}}</span>\n    </div>\n    \x3c!--suffix:icon--\x3e\n    <div v-if="suffixIcon"\n      class="as-input-icon at-suffix"\n      :class="getHoverClass(\'suffixIcon\')"\n      @click.left="OnClickSuffixIcon"\n      @mouseenter="pointerHover=\'suffixIcon\'"\n      @mouseleave="pointerHover=null">\n      <ti-icon :value="suffixIcon"/>\n    </div>\n  </div>\n</div>'),function(){const t={model:{prop:"value",event:"change"},data:()=>({inputCompositionstart:!1,isFocused:!1,pointerHover:null}),computed:{TopClass(){return this.getTopClass({"is-focused":this.isFocused,"is-blurred":!this.isFocused,"is-readonly":this.readonly,"show-border":!this.hideBorder,"hide-border":this.hideBorder,"has-prefix-icon":this.thePrefixIcon,"has-prefix-text":this.prefixText,"has-suffix-icon":this.suffixIcon,"has-suffix-text":this.suffixText})},TopStyle(){return Ti.Css.toStyle({width:this.width,height:this.height})},TheValue(){let t=Ti.Types.toStr(this.value,this.format);return this.autoI18n?Ti.I18n.text(t):t},ThePrefixIcon(){return"prefixIcon"==this.pointerHover&&this.isCanHover("prefixIcon")?this.prefixHoverIcon||this.prefixIcon:this.prefixIcon},TheHover(){let t={},e=_.concat(this.hover);for(let i of e)i&&(t[i]=!0);return t}},methods:{isCanHover(t){return!!this.TheHover[t]},getHoverClass(t){let e=this.isCanHover(t);return{"can-hover":e,"for-look":!e,"is-prefix-icon-hover":"prefixIcon"==t}},OnInputCompositionStart(){this.inputCompositionstart=!0},OnInputCompositionEnd(){this.inputCompositionstart=!1,this.doWhenInput()},OnInputing(t){this.inputCompositionstart||this.doWhenInput()},doWhenInput(){let t=this.getInputValue(!1);Ti.Util.isNil(t)||this.$notify("inputing",t)},OnInputChanged(){let t=this.getInputValue(this.autoJsValue);this.$notify("change",t)},OnInputFocus(){this.readonly||(this.autoSelect?this.$refs.input.select():this.$refs.input.focus()),this.isFocused=!0,this.$notify("input:focus"),this.isActived||this.setActived()},OnInputBlur(){this.isFocused=!1,this.$notify("input:blur")},OnClickPrefixIcon(){this.prefixIconForClean&&this.$notify("change",null),this.$notify("prefix:icon")},OnClickPrefixText(){this.$notify("prefix:text")},OnClickSuffixIcon(){this.$notify("suffix:icon")},OnClickSuffixText(){this.$notify("suffix:text")},getInputValue(t=!1){if(_.isElement(this.$refs.input)){let e=this.$refs.input.value;return t?e=Ti.S.toJsValue(e,{autoNil:!0,autoDate:!1,trimed:this.trimed}):this.trimed&&(e=_.trim(e)),e=Ti.S.toCase(e,this.valueCase)}},doAutoFocus(){this.focused&&!this.isFocused&&this.OnInputFocus()}},watch:{focused:"doAutoFocus"},mounted:function(){this.doAutoFocus()}};Ti.Preload("ti/com/ti/input/ti-input.mjs",t)}(),Ti.Preload("ti/com/ti/input/time/ti-input-time.html",'<ti-combo-box class="as-time"\n  :class="topClass"\n  :width="width"\n  :drop-width="dropWidth"\n  :drop-height="dropHeight"\n  :drop-overflow="\'hidden\'"\n  :status="status"\n  @collapse="doCollapse">\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <ti-input \n      :readonly="!canInput"\n      :hide-border="hideBorder"\n      :placeholder="placeholder|i18n"\n      :prefix-icon="icon"\n      :suffix-icon="theStatusIcon"\n      :value="theTimeText"\n      :height="height"\n      :focus="isExtended"\n      @change="onChanged"\n      @input:focus="onInputFocused"\n      @suffix:icon="onClickStatusIcon"/>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <ti-time\n      :value="theDropTime"\n      :height="dropHeight"\n      :mode="mode"\n      @change="onTimeChanged"/>\n  </template>\n</ti-combo-box>'),function(){const t={inheritAttrs:!1,data:()=>({runtime:null,status:"collapse"}),props:{canInput:{type:Boolean,default:!0},value:{type:[String,Number,Ti.Types.Time],default:null},icon:{type:String,default:"far-clock"},valueUnit:{type:String,default:"s",validator:function(t){return/^(ms|s|min|hr)$/.test(t)}},mode:{type:String,default:"auto",validator:function(t){return/^(sec|min|auto)$/.test(t)}},placeholder:{type:[String,Number],default:"i18n:blank-time"},hideBorder:{type:Boolean,default:!1},width:{type:[Number,String],default:"1.4rem"},height:{type:[Number,String],default:void 0},dropWidth:{type:[Number,String],default:"box"},dropHeight:{type:[Number,String],default:400},statusIcons:{type:Object,default:()=>({collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"})}},computed:{topClass(){return Ti.Css.mergeClassName(this.className)},isCollapse(){return"collapse"==this.status},isExtended(){return"extended"==this.status},theTime(){return Ti.Types.toTime(this.value,this.valueUnit)},theDropTime(){return this.runtime||this.theTime},theTimeFormat(){return{sec:"HH:mm:ss",min:"HH:mm",auto:"auto"}[this.mode]},theTimeText(){return this.getTimeText(this.theDropTime)},theStatusIcon(){return this.statusIcons[this.status]}},methods:{applyRuntime(){if(this.runtime){let t=this.runtime;this.runtime=null;let e=this.getTimeText(t);this.$notify("change",e)}},doExtend(){this.status="extended"},doCollapse({escaped:t=!1}={}){this.status="collapse",t?this.runtime=null:this.applyRuntime()},onInputFocused(){this.doExtend()},onChanged(t){if(_.isEmpty(t))this.$notify("change",null);else{let e=Ti.Types.toTime(t),i=this.getTimeText(e);this.$notify("change",i)}},onClickStatusIcon(){this.isExtended?this.doCollapse():this.doExtend()},onTimeChanged(t){this.runtime=t},getTimeText(t){if(t instanceof Ti.Types.Time)return t.toString(this.theTimeFormat)}}};Ti.Preload("ti/com/ti/input/time/ti-input-time.mjs",t)}(),Ti.Preload("ti/com/ti/input/time/_com.json",{name:"ti-input-time",globally:!0,template:"./ti-input-time.html",mixins:["./ti-input-time.mjs"],components:["@com:ti/combo/input","@com:ti/time"]}),Ti.Preload("ti/com/ti/input/timerange/ti-input-timerange.html",'<ti-combo-box class="as-timerange"\n  :class="topClass"\n  :width="width"\n  :drop-width="null"\n  :status="status"\n  @collapse="doCollapse">\n  \x3c!--\n    Box\n  --\x3e\n  <template v-slot:box>\n    <ti-input \n      :readonly="!canInput"\n      :hide-border="hideBorder"\n      :placeholder="placeholder|i18n"\n      :prefix-icon="icon"\n      :suffix-icon="theStatusIcon"\n      :value="theRangeText"\n      :height="height"\n      :focus="isExtended"\n      @change="onChanged"\n      @input:focus="onInputFocused"\n      @suffix:icon="onClickStatusIcon"/>\n  </template>\n  \x3c!--\n    Drop\n  --\x3e\n  <template v-slot:drop>\n    <ti-form\n      :data="theDropRange"\n      v-bind="theFormConfig"\n      @change="onFormChanged"/>\n  </template>\n</ti-combo-box>'),function(){const t={inheritAttrs:!1,data:()=>({runtime:null,status:"collapse"}),props:{canInput:{type:Boolean,default:!0},value:{type:[String,Object,Number,Array],default:null},rangeKeys:{type:Array,default:()=>["beginTime","endTime"]},valueMode:{type:String,default:"Array"},dftValue:{type:Array,default:()=>["09:00","17:00"]},icon:{type:String,default:"zmdi-time-interval"},format:{type:String,default:"HH:mm"},placeholder:{type:String,default:"i18n:blank-time-range"},hideBorder:{type:Boolean,default:!1},width:{type:[Number,String],default:"2rem"},height:{type:[Number,String],default:void 0},statusIcons:{type:Object,default:()=>({collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"})}},computed:{topClass(){return Ti.Css.mergeClassName(this.className)},isCollapse(){return"collapse"==this.status},isExtended(){return"extended"==this.status},theFormConfig(){let[t,e]=this.rangeKeys;return{fields:[{name:t,type:"Time",title:"i18n:time-begin",comType:"ti-input-time"},{name:e,type:"Time",title:"i18n:time-end",comType:"ti-input-time"}],spacing:"tiny",statusIcons:null}},theRange(){return this.parseTimeRange(this.value)},theRangeText(){let[t,e]=this.rangeKeys,i=[];return _.forEach(this.theRange,t=>{t?i.push(t.toString(this.format)):i.push(Ti.Types.formatTime(0,this.format))}),i.join(" ~ ")},theRangeValue(){return this.formatRangeValue(this.theRange)},theDropRange(){return this.runtime||this.theRangeValue},theStatusIcon(){return this.statusIcons[this.status]}},methods:{applyRuntime(){if(this.runtime){let t=this.parseTimeRange(this.runtime);this.runtime=null;let e=this.formatRangeValue(t),i=this.formatEmitRangeValue(e);this.$notify("change",i)}},doExtend(){this.status="extended"},doCollapse({escaped:t=!1}={}){this.status="collapse",t?this.runtime=null:this.applyRuntime()},onInputFocused(){this.doExtend()},onChanged(t){let e=this.parseTimeRange(t);if(_.isEmpty(e))this.$notify("change",null);else{let t=this.formatRangeValue(e),i=this.formatEmitRangeValue(t);this.$notify("change",i)}},onClickStatusIcon(){this.isExtended?this.doCollapse():this.doExtend()},formatEmitRangeValue(t){let[e,i]=this.rangeKeys;if(t&&"Array"==this.valueMode){let n=[t[e],t[i]];return _.filter(n,t=>t&&_.isString(t))}return t},onFormChanged(t){let e=_.assign({},this.theRangeValue,this.runtime);e[t.name]=t.value,this.runtime=e},parseTimeRange(t){let[e,i]=this.rangeKeys;t=Ti.Util.fallback(t,this.dftValue,{});let n={};if(_.isNumber(t)){n={[e]:Ti.Types.toTime(t)}}else if(_.isString(t)){let a=_.trim(t),s=_.split(a,/[\t ,\/~-]+/);n={[e]:Ti.Types.toTime(s[0]),[i]:Ti.Types.toTime(s[1])}}else _.isArray(t)?n={[e]:Ti.Types.toTime(t[0]),[i]:Ti.Types.toTime(t[1])}:_.isPlainObject(t)&&(n=_.pick(t,this.rangeKeys));return this.normalizeRange(n)},normalizeRange(t){let[e,i]=this.rangeKeys;if(t&&t[e]&&t[i]){let n=Ti.Types.toTime(t[e]),a=Ti.Types.toTime(t[i]);if(n.valueInMilliseconds>a.valueInMilliseconds){t[e];t[e]=a,t[i]=n}}return t},formatRangeValue(t){let e=_.assign({},t);return _.forEach(e,(t,i)=>{e[i]=t?t.toString():Ti.Types.formatTime(0)}),e}}};Ti.Preload("ti/com/ti/input/timerange/ti-input-timerange.mjs",t)}(),Ti.Preload("ti/com/ti/input/timerange/_com.json",{name:"ti-input-timerange",globally:!0,template:"./ti-input-timerange.html",mixins:["./ti-input-timerange.mjs"],components:["@com:ti/combo/input"]}),Ti.Preload("ti/com/ti/input/_com.json",{name:"ti-input",globally:!0,template:"./ti-input.html",props:"./ti-input-props.mjs",mixins:["./ti-input.mjs"],components:[]}),function(){const t={value:null,dict:{type:[String,Ti.Dict],default:void 0},trimed:{type:Boolean,default:!0},format:void 0,href:{type:String,default:void 0},newTab:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},hover:{type:[Array,String],default:()=>["suffixIcon"]},placeholder:{type:String,default:"i18n:nil"},autoI18n:{type:Boolean,default:!0},prefixIcon:{type:String,default:void 0},prefixText:{type:String,default:void 0},suffixText:{type:String,default:void 0},suffixIcon:{type:String,default:void 0},width:{type:[Number,String],default:void 0},height:{type:[Number,String],default:void 0},valueMaxWidth:{type:[Number,String],default:void 0}};Ti.Preload("ti/com/ti/label/ti-label-props.mjs",t)}(),Ti.Preload("ti/com/ti/label/ti-label.html",'<div class="ti-label"\n  :class="TopClass"\n  :style="TopStyle"\n  @dblclick.left="OnDblClick">\n  \x3c!--prefix:icon--\x3e\n  <div v-if="ThePrefixIcon"\n    class="as-icon at-prefix"\n    :class="getHoverClass(\'prefixIcon\')"\n    @click.left="OnClickPrefixIcon">\n    <ti-icon :value="ThePrefixIcon"/>\n  </div>\n  \x3c!--prefix:text--\x3e\n  <div v-if="prefixText" \n    class="as-text at-prefix"\n    :class="getHoverClass(\'prefixText\')"\n    @click.left="OnClickPrefixText">\n    <span>{{prefixText|i18n}}</span>\n  </div>\n  \x3c!--Text--\x3e\n  <div class="as-value"\n    :style="ValueStyle"\n    @click.left="OnClickValue">\n    \x3c!--Link--\x3e\n    <a v-if="href"\n        :href="href"\n        :taget="newTab ? \'_blank\' : undefined"\n        @click.left.prevent>{{myDisplayText}}</a>\n    \x3c!--Normal Text--\x3e\n    <span v-else>{{myDisplayText}}</span>\n  </div>\n  \x3c!--suffix:text--\x3e\n  <div v-if="suffixText"\n    class="as-text at-suffix"\n    :class="getHoverClass(\'suffixText\')"\n    @click.left="OnClickSuffixIcon">\n    <span>{{suffixText|i18n}}</span>\n  </div>\n  \x3c!--suffix:icon--\x3e\n  <div v-if="suffixIcon"\n    class="as-icon at-suffix"\n    :class="getHoverClass(\'suffixIcon\')"\n    @click.left="OnClickSuffixIcon">\n    <ti-icon :value="suffixIcon"/>\n  </div>\n</div>'),function(){const t={data:()=>({myDisplayIcon:void 0,myDisplayText:void 0,myDictValKey:void 0}),computed:{TopClass(){return this.getTopClass({"is-blank":!_.isNumber(this.TheValue)&&_.isEmpty(this.TheValue),"is-nowrap":this.valueMaxWidth>0})},TopStyle(){return Ti.Css.toStyle({width:this.width,height:this.height})},ValueStyle(){return Ti.Css.toStyle({maxWidth:this.valueMaxWidth})},ThePrefixIcon(){return null===this.prefixIcon?null:this.myDisplayIcon||this.prefixIcon},TheHover(){let t={},e=_.concat(this.hover);for(let i of e)i&&(t[i]=!0);return t},TheValue(){let t=this.value;return this.trim&&_.isString(t)?_.trim(t):t},Dict(){if(this.dict){if(this.dict instanceof Ti.Dict)return this.myDictValKey=".text",this.dict;let{name:t,vKey:e}=Ti.DictFactory.explainDictName(this.dict);return this.myDictValKey=e||".text",Ti.DictFactory.CheckDict(t)}}},methods:{isCanHover(t){return!!this.TheHover[t]},getHoverClass(t){let e=this.isCanHover(t);return{"can-hover":e,"for-look":!e,"is-prefix-icon-hover":"prefixIcon"==t}},OnDblClick(){this.editable&&Ti.Be.EditIt(this.$el,{text:this.TheValue,ok:t=>{this.$notify("change",t)}})},OnClickPrefixIcon(){this.$notify("prefix:icon")},OnClickPrefixText(){this.$notify("prefix:text")},OnClickValue(){this.$notify("click:value")},OnClickSuffixIcon(){this.$notify("suffix:icon")},OnClickSuffixText(){this.$notify("suffix:text")},async evalDisplay(t){if(this.Dict){let e=await this.Dict.getItem(t);e?(this.myDisplayIcon=this.Dict.getIcon(e),t=this.Dict.getBy(this.myDictValKey,e,t)):this.myDisplayIcon=null}return _.isNumber(t)?this.format?Ti.Types.toStr(t,this.format):t:_.isArray(t)||_.isPlainObject(t)?JSON.stringify(t,null,"  "):Ti.Util.isNil(t)?Ti.I18n.text(this.placeholder):_.isDate(t)?Ti.Types.toStr(t,this.format):(this.format&&(t=Ti.Types.toStr(t,this.format)),this.autoI18n?Ti.I18n.text(t):t)},async reloadMyDisplay(){this.myDisplayIcon=null,this.myDisplayText=await this.evalDisplay(this.TheValue)}},watch:{value:{handler:"reloadMyDisplay",immediate:!0}}};Ti.Preload("ti/com/ti/label/ti-label.mjs",t)}(),Ti.Preload("ti/com/ti/label/_com.json",{name:"ti-label",globally:!0,template:"./ti-label.html",props:"./ti-label-props.mjs",mixins:["./ti-label.mjs"]}),Ti.Preload("ti/com/ti/label/_hmaker.json",{icon:"im-tag",title:"i18n:com-label",scenes:["desktop","tablet","phone"],editComType:"ti-form",editComConf:{mode:"tab",data:"=comConf",fields:[{title:"i18n:hmk-aspect",fields:[{title:"i18n:hmk-placeholder",name:"placeholder",comType:"ti-input"},{title:"i18n:hmk-autoI18n",name:"autoI18n",type:"Boolean",defaultAs:!0,comType:"ti-toggle"},{title:"i18n:hmk-prefixIcon",name:"prefixIcon",comType:"ti-input-icon"},{title:"i18n:hmk-prefixText",name:"prefixText",comType:"ti-input"},{title:"i18n:hmk-suffixIcon",name:"suffixIcon",comType:"ti-input-icon"},{title:"i18n:hmk-suffixText",name:"suffixText",comType:"ti-input"}]},{title:"i18n:hmk-behavior",fields:[{title:"i18n:hmk-href",name:"href",comType:"ti-input"},{title:"i18n:hmk-newTab",name:"newTab",type:"Boolean",hidden:{href:"NoEmpty"},comType:"ti-toggle"},{title:"i18n:hmk-breakLine",name:"breakLine",type:"Boolean",defaultAs:!0,comType:"ti-toggle"},{title:"i18n:hmk-editable",name:"editable",type:"Boolean",comType:"ti-toggle"}]},{title:"i18n:hmk-data",fields:[{title:"i18n:hmk-value",name:"value",comType:"ti-input"},{title:"i18n:hmk-dict",name:"dict",comType:"ti-input"},{title:"i18n:hmk-trimed",name:"trimed",type:"Boolean",comType:"ti-toggle"},{title:"i18n:hmk-format",name:"format",comType:"ti-input",comConf:{autoJsValue:!0}}]},{title:"i18n:hmk-measure",fields:[{title:"i18n:hmk-width",name:"width",comType:"ti-input"},{title:"i18n:hmk-height",name:"height",comType:"ti-input"},{title:"i18n:hmk-valueMaxWidth",name:"valueMaxWidth",comType:"ti-input"}]}]}}),Ti.Preload("ti/com/ti/lbs/map/baidu/ti-lbs-map-baidu.html",'<div class="ti-lbs-map by-baidu ti-fill-parent">\n  <div ref="arena" class="map-arena ti-fill-parent"></div>\n</div>'),function(){const t={inheritAttrs:!1,data:()=>({valueMarker:null}),props:{mapType:{type:String,default:"ROADMAP"},center:{type:Object,default:null},zoom:{type:Number,default:8},value:{type:Object,default:null},valueOptions:{type:Object,default:()=>({icon:null,title:"UserMarker",animation:"DOWN"})}},computed:{mapCenterLatLng(){return _.isEmpty(this.center)?_.isEmpty(this.value)?this.genLatLng({lat:39.9042,lng:116.4074}):this.genLatLng(this.value):this.genLatLng(this.center)},mapTypeId(){return{ROADMAP:BMAP_NORMAL_MAP,SATELLITE:BMAP_SATELLITE_MAP,HYBRID:BMAP_HYBRID_MAP}[this.mapType]||BMAP_NORMAL_MAP}},methods:{genLatLng:({lat:t,lng:e}={})=>new BMap.Point(e,t),drawValue(){let t=this.__map;this.valueOptions;if(!this.value)return;let e=this.genLatLng(this.value);var i=new BMap.Marker(e);t.addOverlay(i),this.valueMarker=i}},watch:{value:function(){this.drawValue()}},mounted:async function(){let t=new BMap.Map(this.$refs.arena,{mapType:this.mapTypeId});t.centerAndZoom(this.mapCenterLatLng,this.zoom),t.addControl(new BMap.MapTypeControl({mapTypes:[BMAP_NORMAL_MAP,BMAP_SATELLITE_MAP,BMAP_HYBRID_MAP]})),t.enableScrollWheelZoom(!0),this.__map=t,this.drawValue()}};Ti.Preload("ti/com/ti/lbs/map/baidu/ti-lbs-map-baidu.mjs",t)}(),Ti.Preload("ti/com/ti/lbs/map/baidu/_com.json",{name:"ti-lbs-map-baidu",globally:!0,template:"./ti-lbs-map-baidu.html",mixins:["./ti-lbs-map-baidu.mjs"],components:[]}),Ti.Preload("ti/com/ti/lbs/map/tencent/ti-lbs-map-tencent.html",'<div class="ti-lbs-map by-tencent ti-fill-parent">\n  <div ref="arena" class="map-arena ti-fill-parent"></div>\n</div>'),function(){const t={inheritAttrs:!1,data:()=>({valueMarker:null}),props:{mapType:{type:String,default:"ROADMAP"},center:{type:Object,default:null},zoom:{type:Number,default:8},value:{type:Object,default:null},valueOptions:{type:Object,default:()=>({icon:null,title:"UserMarker",animation:"DOWN"})}},computed:{mapCenterLatLng(){return _.isEmpty(this.center)?_.isEmpty(this.value)?this.genLatLng({lat:39.9042,lng:116.4074}):this.genLatLng(this.value):this.genLatLng(this.center)},mapTypeId(){return qq.maps.MapTypeId[this.mapType]||qq.maps.MapTypeId.ROADMAP}},methods:{genLatLng:({lat:t,lng:e}={})=>new qq.maps.LatLng(t,e),drawValue(){let t=this.__map,e=this.valueOptions;if(!this.value)return;let i=this.genLatLng(this.value);var n=new qq.maps.Marker({position:i,animation:qq.maps.MarkerAnimation[e.animation],map:t,draggable:!0,title:e.title,visible:!0});this.valueMarker=n}},watch:{value:function(){this.drawValue()}},mounted:async function(){let t=new qq.maps.Map(this.$refs.arena,{zoom:this.zoom,center:this.mapCenterLatLng,mapTypeId:this.mapTypeId});this.__map=t,this.drawValue()}};Ti.Preload("ti/com/ti/lbs/map/tencent/ti-lbs-map-tencent.mjs",t)}(),Ti.Preload("ti/com/ti/lbs/map/tencent/_com.json",{name:"ti-lbs-map-tencent",globally:!0,template:"./ti-lbs-map-tencent.html",mixins:["./ti-lbs-map-tencent.mjs"],components:[]}),Ti.Preload("ti/com/ti/lbs/map/ti-lbs-map.html",'<div class="ti-lbs-map" \n  :class="topClass"\n  :style="topStyle">\n  <div class="map-con">\n    \x3c!--\n      Map Main\n    --\x3e\n    <div class="as-main">\n      <component \n        :is="mapComType"\n        v-bind="mapComConf"/>\n    </div>\n    \x3c!--\n      Map Info\n    --\x3e\n    <div class="as-info">\n      <div class="as-toggle" @click="fullScreen=!fullScreen">\n        <ti-icon :value="toggleIcon"/>\n      </div>\n      <ul class="as-laln">\n        <li><span>{{\'lat\'|i18n}}:</span><em>{{lalnCenter.lat|float(8)}}</em></li>\n        <li><span>{{\'lng\'|i18n}}:</span><em>{{lalnCenter.lng|float(8)}}</em></li>\n      </ul>\n    </div>\n  </div>\n</div>'),function(){const t={inheritAttrs:!1,data:()=>({fullScreen:!1}),props:{by:{type:String,default:"tencent"},mapType:{type:String,default:"ROADMAP"},center:{type:Object,default:null},autoFloat:{type:Number,default:1e7},width:{type:[String,Number],default:400},height:{type:[String,Number],default:400},zoom:{type:Number,default:8},coordinate:{type:String,default:"WGS84"},value:{type:Object,default:null},layers:{type:Object,default:()=>({})}},computed:{topClass(){let t=[];return this.fullScreen&&t.push("is-fullscreen"),this.className&&t.push(this.className),t},topStyle(){if(!this.fullScreen)return Ti.Css.toStyle({width:this.width,height:this.height})},toggleIcon(){return this.fullScreen?"zmdi-fullscreen-exit":"zmdi-fullscreen"},mapComType(){return`ti-lbs-map-${this.by}`},mapComConf(){return{mapType:this.mapType,center:this.lalnCenter,zoom:this.zoom,value:this.lalnValue,valueOptions:this.valueOptions}},targetCoordinate(){return{tencent:"GCJ02",baidu:"BD09",ali:"GCJ02"}[this.by]||"WGS84"},arenaStyle(){return Ti.Css.toStyle({width:this.width,height:this.height})},lalnValue(){return _.isEmpty(this.center)?_.isEmpty(this.value)?new qq.maps.LatLng({lat:39.9042,lng:116.4074}):this.genLatLng(this.value):this.genLatLng(this.center)},lalnCenter(){return _.isEmpty(this.center)?_.isEmpty(this.value)?new qq.maps.LatLng({lat:39.9042,lng:116.4074}):this.genLatLng(this.value):this.genLatLng(this.center)}},methods:{autoLatLng(t){return t>360?t/this.autoFloat:t},genLatLng({lat:t,lng:e}={}){t=this.autoLatLng(t),e=this.autoLatLng(e);let i=this.coordinate,n=this.targetCoordinate;if(i==n)return{lat:t,lng:e};let a=`${i}_TO_${n}`;return(0,Ti.GPS[a])(t,e)}}};Ti.Preload("ti/com/ti/lbs/map/ti-lbs-map.mjs",t)}(),Ti.Preload("ti/com/ti/lbs/map/_com.json",{name:"ti-lbs-map",globally:!0,template:"./ti-lbs-map.html",mixins:["./ti-lbs-map.mjs"],components:["./tencent/_com.json","./baidu/_com.json"]}),Ti.Preload("ti/com/ti/list/com/list-row/list-row.html",'<div class="list-row"\n  :class="TopClass">\n  \x3c!--current actived row indicator--\x3e\n  <div class="row-actived-indicator"></div>\n  \x3c!-- Indents --\x3e\n  <div v-for="n in indent"\n  class="row-indent"></div>\n  \x3c!--ICON: Handler--\x3e\n  <template v-if="icon">\n    <ti-icon\n      v-if="hasRealIcon"\n        class="row-icon"\n        :value="icon"\n        @click.native.left.stop="OnClickIcon"/>\n    <div v-else\n      class="row-icon"></div>\n  </template>\n  \x3c!--ICON: Checker--\x3e\n  <ti-icon v-if="checkable"\n      class="row-checker"\n      :value="theCheckIcon"\n      @click.native.left.stop="OnClickChecker"/>\n  \x3c!-- Content --\x3e\n  <div\n    class="row-con"\n    @click.left="OnClickRow"\n    @dblclick.left="OnDblClickRow"\n    v-ti-activable>\n    <component \n      v-for="(it, index) in myDisplayItems"\n        :class="\'item-\'+index"\n        :key="it.uniqueKey"\n        :is="it.comType"\n        v-bind="it.comConf"\n        @change="onItemChanged(it, $event)"/>\n  </div>\n\n</div>'),function(){const t={inheritAttrs:!1,data:()=>({myDisplayItems:[]}),props:{indent:{type:Number,default:0},icon:{type:[Boolean,String],default:null},display:{type:Array,default:()=>[]}},computed:{TopClass(){return this.getListItemClass(`row-indent-${this.indent}`)},hasRealIcon(){return this.icon&&_.isString(this.icon)}},methods:{async evalMyDisplayItems(){let t=[];for(let e of this.display){let i=await this.evalDataForFieldDisplayItem({itemData:this.data,displayItem:e,vars:{isCurrent:this.isCurrent,isChecked:this.isChecked,isChanged:this.isChanged,isActived:this.isActived,rowId:this.rowId}});i&&t.push(i)}this.myDisplayItems=t},onItemChanged({name:t,value:e}={}){this.$notify("item:changed",{name:t,value:e,rowId:this.rowId,data:this.data})},OnClickIcon(t){this.$notify("icon",{rowId:this.rowId,shift:t.shiftKey,toggle:t.ctrlKey||t.metaKey})},__ti_shortcut(t){if(!_.isEmpty(this.rowToggleKey)&&this.isRowToggleKey(t))return this.onClickChecker({}),{prevent:!0,stop:!0,quit:!0}}},watch:{display:async function(){await this.evalMyDisplayItems()},data:async function(){await this.evalMyDisplayItems()},isCurrent:async function(){await this.evalMyDisplayItems()},isChecked:async function(){await this.evalMyDisplayItems()}},mounted:async function(){await this.evalMyDisplayItems()}};Ti.Preload("ti/com/ti/list/com/list-row/list-row.mjs",t)}(),Ti.Preload("ti/com/ti/list/com/list-row/_com.json",{name:"list-row",globally:!1,template:"./list-row.html",methods:"@com:ti/support/field_display.mjs",mixins:["@com:ti/support/list_item_mixins.mjs","./list-row.mjs"]}),Ti.Preload("ti/com/ti/list/ti-list.html",'<div class="ti-list"\n  :class="TopClass"\n  @click="OnClickTop"\n  v-ti-activable>\n  \x3c!--\n    Blank\n  --\x3e\n  <ti-loading \n    v-if="isDataEmpty"\n      class="nil-data"\n      :class="\'as-\'+blankClass"\n      v-bind="blankAs"/>\n  \x3c!--\n    Show Items\n  --\x3e\n  <template v-else>\n    <list-row\n      v-for="row in TheData"\n        :key="row.id"\n        :row-id="row.id"\n        :index="row.index"\n        :icon="row.icon"\n        :indent="row.indent"\n        :data="row.rawData"\n        :display="DisplayItems"\n        :current-id="theCurrentId"\n        :checked-ids="theCheckedIds"\n        :changed-id="changedId"\n        :checkable="checkable"\n        :selectable="selectable"\n        :openable="openable"\n        :row-toggle-key="TheRowToggleKey"\n        :class-name="itemClassName"\n        @checker="OnRowCheckerClick"\n        @select="OnRowSelect"\n        @open="OnRowOpen"/>\n  </template>\n</div>'),function(){const t={data:()=>({myData:[]}),props:{iconBy:{type:[String,Function],default:null},indentBy:{type:[String,Function],default:null},itemClassName:void 0,display:{type:[Object,String,Array],default:()=>({key:"..",comType:"ti-label"})},border:{type:Boolean,default:!0},autoScrollIntoView:{type:Boolean,default:!0}},computed:{TopClass(){return this.getTopClass({"is-hoverable":this.hoverable,"show-border":this.border})},getRowIndent(){return _.isFunction(this.indentBy)?t=>this.indentBy(t):_.isString(this.indentBy)?t=>_.get(t,this.indentBy):t=>0},getRowIcon(){return _.isFunction(this.iconBy)?t=>this.iconBy(t):_.isString(this.iconBy)?t=>_.get(t,this.iconBy):t=>null},DisplayItems(){let t=_.concat(this.display),e=[];for(let i of t){let t=this.evalFieldDisplayItem(i);t&&e.push(t)}return e},TheData(){return this.myData}},methods:{OnClickTop(t){this.cancelable&&Ti.Dom.hasOneClass(t.target,"ti-list","list-item")&&this.cancelRow()},scrollCurrentIntoView(){if(this.autoScrollIntoView&&this.myLastIndex>=0){let[t]=Ti.Dom.findAll(".list-row.is-current",this.$el);if(t){let e=Ti.Rects.createBy(t),i=Ti.Rects.createBy(this.$el);i.contains(e)||(this.$el.scrollTop+=e.top-i.top)}}},__ti_shortcut(t){return"ARROWUP"==t?(this.selectPrevRow({payload:{byKeyboardArrow:!0}}),this.scrollCurrentIntoView(),{prevent:!0,stop:!0,quit:!0}):"ARROWDOWN"==t?(this.selectNextRow({payload:{byKeyboardArrow:!0}}),this.scrollCurrentIntoView(),{prevent:!0,stop:!0,quit:!0}):void 0}},watch:{data:{handler:async function(t,e){_.isEqual(t,e)||(this.myData=await this.evalData(t=>{t.icon=this.getRowIcon(t.item),t.indent=this.getRowIndent(t.item)}))},immediate:!0}},mounted:function(){this.autoScrollIntoView&&this.$nextTick(()=>{this.scrollCurrentIntoView()})}};Ti.Preload("ti/com/ti/list/ti-list.mjs",t)}(),Ti.Preload("ti/com/ti/list/_com.json",{name:"ti-list",globally:!0,template:"./ti-list.html",props:"@com:ti/support/list_props.mjs",methods:"@com:ti/support/field_display.mjs",mixins:["@com:ti/support/list_mixins.mjs","./ti-list.mjs"],components:["./com/list-row","@com:ti/label"]}),Ti.Preload("ti/com/ti/list/_hmaker.json",{icon:"im-data",title:"i18n:com-list",screen:["desktop","tablet"],manual:!0,tutorial:!0,video:!0,editComType:"ti-form",editComConf:{fields:[]}}),Ti.Preload("ti/com/ti/loading/ti-loading.html",'<div class="ti-loading">\n  <ti-icon class="as-icon" :value="icon"/>\n  <div class="as-text">{{text|i18n}}</div>\n</div>'),function(){const t={props:{icon:{type:String,default:"fas-spinner fa-spin"},text:{type:String,default:"i18n:loading"}}};Ti.Preload("ti/com/ti/loading/ti-loading.mjs",t)}(),Ti.Preload("ti/com/ti/loading/_com.json",{name:"ti-loading",globally:!0,template:"./ti-loading.html",mixins:["./ti-loading.mjs"]}),Ti.Preload("ti/com/ti/logging/ti-logging.html",'<div class="ti-logging"\n  :class="TopClass"\n  :style="TopStyle">\n  <pre ref="pre"><div \n    v-for="(line, index) in lines"\n      :data-index="index"\n      >{{line || \'&nbsp;\'}}</div></pre>    \n</div>'),function(){const t={props:{lines:{type:Array,default:()=>[]},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null}},computed:{TopClass(){return this.getTopClass()},TopStyle(){return Ti.Css.toStyle({width:this.width,height:this.height})}},methods:{scrollToBottom(){let t=this.$refs.pre;t.scrollTop=t.scrollHeight}},watch:{lines:function(){this.$nextTick(()=>{this.scrollToBottom()})}}};Ti.Preload("ti/com/ti/logging/ti-logging.mjs",t)}(),Ti.Preload("ti/com/ti/logging/_com.json",{name:"ti-logging",globally:!0,template:"./ti-logging.html",mixins:["./ti-logging.mjs"]}),Ti.Preload("ti/com/ti/media/binary/ti-media-binary.html",'<div class="ti-media-binary">\n  <div class="tob-icon">\n    <ti-icon v-if="icon" :value="icon" size="1.28rem"/>\n  </div>\n  <div class="tob-title">\n    {{title}}\n  </div>\n  <div class="tob-actions">\n    <a :href="src">\n      <ti-icon value="download"/>\n      <span>{{\'download\'|i18n}}</span>\n    </a>\n  </div>\n</div>'),function(){const t={inheritAttrs:!1,props:{icon:{type:[String,Object],default:null},title:{type:String,default:null},src:{type:String,default:null},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""}},computed:{},methods:{}};Ti.Preload("ti/com/ti/media/binary/ti-media-binary.mjs",t)}(),Ti.Preload("ti/com/ti/media/binary/_com.json",{name:"ti-media-binary",globally:!0,template:"./ti-media-binary.html",mixins:["./ti-media-binary.mjs"]}),Ti.Preload("ti/com/ti/media/image/ti-media-image.html",'<div class="ti-media-image" \n     :class="topClass"\n     :style="topStyle"\n     :fit-mode="fitMode"\n     v-drag-off>\n  <div class="as-con" ref="con">\n    <img ref="the_image"\n      :src="src"\n      :style="theImageStyle"\n      @load="onImageLoaded"\n      @dblclick.stop="onToggleImageFitMode">\n  </div>\n</div>'),function(){const t={inheritAttrs:!1,data:()=>({naturalWidth:-1,naturalHeight:-1,viewportWidth:-1,viewportHeight:-1,fitMode:"contain",imgLoading:!0,inViewport:!1}),props:{src:{type:String,default:null},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""}},computed:{topClass(){return Ti.Css.mergeClassName({"as-fitmode-cover":"cover"==this.fitMode,"as-fitmode-contain":"contain"==this.fitMode,"is-img-loading":this.imgLoading,"is-in-viewport":this.inViewport},this.className)},topStyle(){return{width:this.width,height:this.height}},theImageStyle(){let t={visibility:"hidden",position:"relative"};if(this.naturalWidth>0&&this.naturalHeight>0){let e=Ti.Rects.create({top:0,left:0,width:this.viewportWidth,height:this.viewportHeight}),i=Ti.Rects.create({top:2,left:2,width:this.naturalWidth,height:this.naturalHeight}).zoomTo({width:e.width,height:e.height,mode:this.fitMode});this.inViewport=e.contains(i,2),t.width=i.width,t.height=i.height,t.left=(e.width-i.width)/2,t.top=(e.height-i.height)/2,t.visibility="visible"}return Ti.Css.toStyle(t)}},methods:{onImageLoaded(){let t=this.$refs.the_image;t&&(this.naturalWidth=t.naturalWidth,this.naturalHeight=t.naturalHeight,this.imgLoading=!1)},onResizeViewport(){let t=Ti.Rects.createBy(this.$refs.con);this.viewportWidth=t.width,this.viewportHeight=t.height},onToggleImageFitMode(){this.fitMode={contain:"cover",cover:"contain"}[this.fitMode]}},mounted:function(){Ti.Viewport.watch(this,{resize:()=>{this.onResizeViewport()}}),this.onResizeViewport()},beforeDestroy:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/media/image/ti-media-image.mjs",t)}(),Ti.Preload("ti/com/ti/media/image/_com.json",{name:"ti-media-image",globally:!0,template:"./ti-media-image.html",mixins:["./ti-media-image.mjs"]}),Ti.Preload("ti/com/ti/media/video/ti-media-video.html",'<div class="ti-media-video"\n    :class="topClass"\n    :style="topStyle"\n    v-drag-off>\n    <video ref="the_video"\n      :src="src"\n      controls\n      @loadeddata="onVideoLoaded"/>\n    <div class="tov-loading" v-if="loading">\n      <ti-loading/>\n    </div>\n</div>'),function(){const t=function(t){this.doResizeVideo()},e={inheritAttrs:!1,data:()=>({naturalWidth:-1,naturalHeight:-1,fitMode:"none",loading:!0}),props:{src:{type:String,default:null},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""}},computed:{topClass(){return{"as-none":"none"==this.fitMode,"as-contain":"contain"==this.fitMode,"as-loading":this.loading}},topStyle(){return{width:this.width,height:this.height}}},methods:{onVideoLoaded(){let t=this.$refs.the_video;this.naturalWidth=t.videoWidth,this.naturalHeight=t.videoHeight,this.loading=!1,this.doResizeVideo()},isContainsByViewport(){let t=Ti.Rects.createBy(this.$el),e=Ti.Rects.create({...t.raw("tl"),width:this.naturalWidth,height:this.naturalHeight});return t.contains(e)},doResizeVideo(){this.isContainsByViewport()?this.fitMode="none":this.fitMode="contain"}},mounted:function(){Ti.Viewport.watch(this,{resize:t})},beforeDestroy:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/media/video/ti-media-video.mjs",e)}(),Ti.Preload("ti/com/ti/media/video/_com.json",{name:"ti-media-video",globally:!0,template:"./ti-media-video.html",mixins:["./ti-media-video.mjs"]}),Ti.Preload("ti/com/ti/month/ti-month.html",'<div class="ti-col-data as-month" \n  :class="topClass" \n  :style="topStyle">\n  <ti-list v-for="list in theListGroup"\n    :key="list.key"\n    :data="list.data"\n    :display="\'text\'"\n    :current-id="list.currentId"\n    :cancelable="false"\n    @select="onListSelected(list.key, $event)"/>\n</div>'),function(){const t={inheritAttrs:!1,props:{value:{type:[String,Number,Date],default:null},height:{type:[Number,String],default:200},beginYear:{type:[Number,String],default:1970},endYear:{type:[Number,String],default:(new Date).getFullYear()+1}},computed:{topClass(){return this.getTopClass()},topStyle(){return{height:Ti.Css.toSize(this.height)}},theDate(){return Ti.Types.toDate(this.value,null)},theListGroup(){return[this.createList("year",1*this.beginYear,1*this.endYear,this.theDate?this.theDate.getFullYear():null,{reverse:!0}),this.createList("month",0,12,this.theDate?this.theDate.getMonth():null,{getText:t=>{let e=Ti.DateTime.getMonthAbbr(t);return Ti.I18n.get(e)}})]}},methods:{createList(t,e,i,n,{reverse:a=!1,getText:s=(t=>t)}={}){let o={key:t,currentId:`R-${n}`,data:[]};for(let t=e;t<i;t++)o.data.push({id:`R-${t}`,value:t,text:s(t)});return a&&o.data.reverse(),o},onListSelected(t,{current:e}={}){let i=_.get(e,"value")||0,n=this.theDate||new Date,a={month:t=>new Date(n.getFullYear(),t),year:t=>new Date(t,n.getMonth())}[t](i);this.$notify("change",a)}}};Ti.Preload("ti/com/ti/month/ti-month.mjs",t)}(),Ti.Preload("ti/com/ti/month/_com.json",{name:"ti-month",globally:!0,template:"./ti-month.html",mixins:["./ti-month.mjs"],components:["@com:ti/list"]}),Ti.Preload("ti/com/ti/obj/creation/ti-obj-creation.html",'<div class="ti-obj-creation">\n  <div class="toc-types"\n    v-if="hasTypes">\n    <ul>\n      <li v-if="freeCreate"\n        @click="setCurrentType(null)">\n        <span class="ti-icon"></span>\n        <span class="ti-text">{{\'toc-auto-type\'|i18n}}</span>\n      </li>\n      <li v-for="tp of types"\n        :class="getTypeItemClassName(tp)"\n        @click="setCurrentType(tp)">\n        <ti-icon :value="tp.icon"/>\n        <span class="ti-text">{{tp.text}}</span>\n        <em v-if="\'DIR\' != tp.race">(*.{{tp.name}})</em>\n      </li>\n    </ul>\n  </div>\n  <div class="toc-main">\n    <div v-if="hasCurrentType"\n      class="toc-info">\n      <div class="toc-thumb">\n        <ti-icon :value="currentType.thumb"/>\n      </div>\n      <div class="toc-text">{{currentType.text}}</div>\n      <div v-if="!currentIsDir"\n        class="toc-name">*.{{currentType.name}}</div>\n      <div class="toc-brief"\n        v-if="currentType.brief">{{currentType.brief}}</div>\n    </div>\n    <div v-else\n      class="toc-free">\n      <span>{{\'toc-free\'|i18n}}</span>\n    </div>\n    <div class="toc-input">\n      <input\n        ref="input" \n        :value="value.name"\n        :placeholder="\'toc-tip\'|i18n" \n        @change="onChange" \n        spellcheck="false">\n    </div>\n  </div>\n</div>'),function(){const t={props:{types:{type:Array,default:()=>[]},value:{type:Object,default:()=>({name:"",type:"",race:""})},trimed:{type:Boolean,default:!0},freeCreate:{type:Boolean,default:!1}},computed:{hasTypes(){return!_.isEmpty(this.types)},currentIsDir(){return"DIR"==this.value.race},hasCurrentType(){return this.value.type&&this.value.race},currentType(){for(let t of this.types)if(t.name==this.value.type)return t}},methods:{isCurrent(t){return this.value.type==t.name},getTypeItemClassName(t){return this.isCurrent(t)?"as-current":""},setCurrentType(t){t?(this.value.type=t.name,this.value.race=t.race):(this.value.type="",this.value.race=""),this.$notify("change",this.value)},onChange(){let t=this.$refs.input.value;if(this.trimed&&(t=_.trim(t)),this.value.name=t,"DIR"!=this.value.race&&this.value.type&&this.value.name){let t=`.${this.value.type}`;if(!this.value.name.endsWith(t)){let e=Ti.Util.getMajorName(this.value.name);this.value.name=e+t}}this.$notify("change",this.value)}},mounted:function(){this.hasTypes&&this.setCurrentType(this.types[0]),this.$refs.input.focus()}};Ti.Preload("ti/com/ti/obj/creation/ti-obj-creation.mjs",t)}(),Ti.Preload("ti/com/ti/obj/creation/_com.json",{name:"ti-obj-creation",globally:!0,i18n:"@i18n:ti-obj-creation",template:"./ti-obj-creation.html",mixins:["./ti-obj-creation.mjs"]}),Ti.Preload("ti/com/ti/obj/thumb/ti-obj-thumb.html",'<div class="ti-obj-thumb" \n    :class="TopClass">\n  \x3c!--\n    Preview && Process Bar\n  --\x3e\n  <header>\n    \x3c!--Preview Part--\x3e\n    <div class="as-preview">\n      \x3c!-- Local Image --\x3e\n      <template v-if="isLocalImage">\n        <img ref="localImage" is-local-file>\n      </template>\n      \x3c!-- Local File --\x3e\n      <template v-else-if="isLocalFile">\n        <ti-icon :value="LocalFileIcon"/>\n      </template>\n      \x3c!-- Remote Image --\x3e\n      <template v-else-if="\'image\'==preview.type">\n        <img :src="preview.value">\n      </template>\n      \x3c!-- Icon --\x3e\n      <template v-else>\n        <ti-icon :value="preview"/>\n      </template>\n      \x3c!--Badge--\x3e\n      <template v-if="badges">\n        <div v-if="badges.NW" class="as-badge at-nw"><ti-icon :value="badges.NW"/></div>\n        <div v-if="badges.NE" class="as-badge at-ne"><ti-icon :value="badges.NE"/></div>\n        <div v-if="badges.SW" class="as-badge at-sw"><ti-icon :value="badges.SW"/></div>\n        <div v-if="badges.SE" class="as-badge at-se"><ti-icon :value="badges.SE"/></div>\n      </template>\n    </div>\n    \x3c!--Process bar--\x3e\n    <div v-if="isShowProgress"\n      class="as-progress ti-progress-bar">\n      <span class="bar-tip">{{ProgressTip}}</span>\n      <b class="bar-outer">\n        <em class="bar-inner" \n            :style="ProgressStyle"></em>\n      </b>\n    </div>\n  </header>\n  \x3c!--\n    Status Mask\n  --\x3e\n  <section class="as-status" v-if="status">\n    <ti-icon \n      :value="status"\n      font-size="2em"\n      width="3em"\n      height="3em"/>\n  </section>\n  \x3c!--\n    Footer for item title text\n  --\x3e\n  <footer v-if="showFooter">\n    <div class="as-title">\n      <a v-if="hasHref"\n        :href="TheHref"\n        @click.prevent>{{title}}</a>\n      <span v-else>{{title}}</span>\n    </div>\n  </footer>\n</div>'),function(){const t={props:{index:{type:Number,default:-1},id:{type:String,default:null},title:{type:String,default:null},preview:{type:[String,Object],default:"broken_image"},href:{type:String,default:null},status:{type:[String,Object],default:null},progress:{type:Number,default:-1},visibility:{type:String,default:"show"},showFooter:{type:Boolean,default:!0},badges:{type:Object,default:()=>({NW:null,NE:null,SW:null,SE:null})}},watch:{preview:function(){this.renderLocalFile()}},computed:{TopClass(){return this.getTopClass({"is-hide":"hide"==this.visibility,"is-weak":"weak"==this.visibility},()=>this.status?`is-status-${this.status}`:null)},PreviewType(){return _.get(this.preview,"type")||"auto"},isLocalFile(){return"localFile"==this.PreviewType},isLocalImage(){return this.isLocalFile&&/^image\//.test(this.LocalFile.type)},LocalFile(){if(this.isLocalFile)return this.preview.value},LocalFileIcon(){if(this.isLocalFile){let t=this.LocalFile,e={type:Ti.Util.getSuffixName(t.name),mime:t.type,race:Ti.Util.isNil(t.type)?"DIR":"FILE"};return Ti.Icons.get(e)}},isShowProgress(){return this.progress>=0},ProgressTip(){return Ti.S.toPercent(this.progress,{fixed:1,auto:!1})},ProgressStyle(){return{width:this.ProgressTip}},hasHref(){return!!this.href},TheHref(){return encodeURI(this.href)}},methods:{renderLocalFile(){if(this.isLocalImage){let t=new FileReader;t.onload=(t=>{this.$refs.localImage&&(this.$refs.localImage.src=t.target.result)}),t.readAsDataURL(this.preview.value)}}},mounted:function(){this.renderLocalFile()}};Ti.Preload("ti/com/ti/obj/thumb/ti-obj-thumb.mjs",t)}(),Ti.Preload("ti/com/ti/obj/thumb/_com.json",{name:"ti-obj-thumb",globally:!0,template:"./ti-obj-thumb.html",mixins:["./ti-obj-thumb.mjs"]}),Ti.Preload("ti/com/ti/obj/tile/ti-obj-tile.html",'<div class="ti-obj-tile" \n    :class="topClass">\n  \x3c!--\n    Preview Image\n  --\x3e\n  <div class="as-preview">\n    <a v-if="hasHref"\n      :href="href"\n      @click="onClick"\n      ><ti-icon \n        :value="preview"\n        :height="previewHeight"/></a>\n    <ti-icon v-else\n      :value="preview"\n      :height="previewHeight"/>\n  </div>\n  \x3c!--\n    Title\n  --\x3e\n  <div class="as-title">\n    <a v-if="hasHref"\n      :href="href"\n      @click="onClick"\n    >{{title}}</a>\n    \x3c!--\n      Without Href\n    --\x3e\n    <span v-else>{{title}}</span>\n  </div>\n  \x3c!--\n    Footer\n  --\x3e\n  <div v-if="hasBrief"\n    class="as-brief">\n    <span>{{brief}}</span>\n  </div>\n</div>'),function(){const t={inheritAttrs:!1,props:{index:{type:Number,default:-1},id:{type:String,default:null},preview:{type:[Object,String],default:()=>({type:"font",value:"broken_image"})},previewHeight:{type:[String,Number],default:null},hover:{type:String,default:null,validator:function(t){return!t||/^(up|down|left|right|zoom)$/.test(t)}},title:{type:String,default:null},href:{type:String,default:null},brief:{type:String,default:null},emitBy:{type:Object,default:()=>({evantName:null,payload:{}})}},computed:{topClass(){let t=[this.className];return this.hover&&(t.push("on-hover"),t.push(`on-hover-${this.hover}`)),t},hasHref(){return!!this.href},hasBrief(){return!!this.brief}},methods:{onClick(t){if(this.emitBy.eventName){t.preventDefault();let e=this.emitBy.eventName,i=this.emitBy.payload||{};console.log("onClick",e,i),this.$notify(e,i)}}}};Ti.Preload("ti/com/ti/obj/tile/ti-obj-tile.mjs",t)}(),Ti.Preload("ti/com/ti/obj/tile/_com.json",{name:"ti-obj-tile",globally:!0,template:"./ti-obj-tile.html",mixins:["./ti-obj-tile.mjs"]}),Ti.Preload("ti/com/ti/paging/jumper/ti-paging-jumper.html",'<div class="ti-paging-jumper">\n  <div \n    class="pj-btn"\n    :class="getBtnClass(1)"\n    @click="OnJumpTo(1)">\n      <ti-icon value="zmdi-skip-previous"/>\n      <span class="it-text">{{\'paging-first\'|i18n}}</span></div>\n  <div \n    class="pj-btn"\n    :class="getBtnClass(value.pn-1)"\n    @click="OnJumpTo(value.pn-1)">\n      <ti-icon value="zmdi-chevron-left"/>\n      <span class="it-text">{{\'paging-prev\'|i18n}}</span></div>\n  <div \n    class="pj-current"\n    :class="PageNumberClass"\n    @click="OnClickCurrent">\n    <b>{{value.pn}}</b>\n  </div>\n  <div \n    class="pj-btn"\n    :class="getBtnClass(value.pn+1)"\n    @click="OnJumpTo(value.pn+1)">\n      <span class="it-text">{{\'paging-next\'|i18n}}</span>\n      <ti-icon value="zmdi-chevron-right"/></div>\n  <div \n    class="pj-btn"\n    :class="getBtnClass(value.pgc)"\n    @click="OnJumpTo(value.pgc)">\n      <span class="it-text">{{\'paging-last\'|i18n}}</span>\n      <ti-icon value="zmdi-skip-next"/></div>\n  <div\n    class="pj-sum"\n    :class="SumClass"\n    @click="OnClickSum">{{\'paging-sum\'|i18n(value)}}</div>\n</div>'),function(){const t={props:{value:{type:Object,default:()=>({pn:0,pgsz:0,pgc:0,sum:0,count:0})}},computed:{PageNumberClass(){return this.value.pgc>1?"is-enabled":"is-disabled"},SumClass(){return this.value.pgsz>0?"is-enabled":"is-disabled"}},methods:{isInvalidPageNumber(t){return t<=0||t>this.value.pgc||t==this.value.pn},getBtnClass(t){return this.isInvalidPageNumber(t)?"is-disabled":"is-enabled"},OnJumpTo(t){this.isInvalidPageNumber(t)||this.$notify("change",{pn:t,pgsz:this.value.pgsz})},async OnClickCurrent(){if(this.value.pgc<=1)return;let t=Ti.I18n.getf("paging-change-pn",this.value),e=await Ti.Prompt(t,{value:this.value.pn});if(!e||e==this.value.pn)return;let i=parseInt(e);if(isNaN(i)||i<=0||i>this.value.pgc)return t=Ti.I18n.getf("paging-change-pn-invalid",this.value),void await Ti.Alert(t,{title:"i18n:warn",type:"warn",icon:"im-warning",width:420});this.$notify("change",{pn:i,pgsz:this.value.pgsz})},async OnClickSum(){let t=Ti.I18n.getf("paging-change-pgsz",this.value),e=await Ti.Prompt(t,{value:this.value.pgsz});if(!e||e==this.value.pgsz)return;let i=parseInt(e);isNaN(i)||i<=0?await Ti.Alert("i18n:paging-change-pgsz-invalid",{title:"i18n:warn",type:"warn",icon:"im-warning",width:420}):(this.$notify("change:pgsz",i),this.$notify("change",{pn:1,pgsz:i}))}}};Ti.Preload("ti/com/ti/paging/jumper/ti-paging-jumper.mjs",t)}(),Ti.Preload("ti/com/ti/paging/jumper/_com.json",{name:"ti-paging-jumper",globally:!0,template:"./ti-paging-jumper.html",mixins:["./ti-paging-jumper.mjs"]}),Ti.Preload("ti/com/ti/roadblock/ti-roadblock.html",'<div class="ti-roadblock">\n  <div class="as-main">\n    <div v-if="icon" class="as-icon">\n      <ti-icon :value="icon"/>\n    </div>\n    <div v-if="text" class="as-text">\n      <span>{{text | i18n}}</span>\n    </div>\n  </div>\n</div>'),function(){const t={inheritAttrs:!1,props:{icon:{type:String,default:"fas-exclamation-triangle"},text:{type:String,default:null}},computed:{}};Ti.Preload("ti/com/ti/roadblock/ti-roadblock.mjs",t)}(),Ti.Preload("ti/com/ti/roadblock/_com.json",{name:"ti-roadblock",globally:!0,template:"./ti-roadblock.html",mixins:["./ti-roadblock.mjs"],components:[]}),Ti.Preload("ti/com/ti/session/badge/ti-session-badge.html",'<div class="ti-session-badge"\n  :class="TopClass">\n  \x3c!--\n    Has Session, show account info\n  --\x3e\n  <template v-if="hasSession">\n    \x3c!--Avatar--\x3e\n    <div v-if="hasAvatar"\n      class="as-avatar">\n      <img :src="myAvatar"/>\n    </div>\n    \x3c!--User Icon--\x3e\n    <div v-else\n      class="as-icon">\n      <ti-icon :value="myIcon"/>\n    </div>\n    \x3c!--User Name--\x3e\n    <div class="as-name">{{myName}}</div>\n    \x3c!--Links--\x3e\n    <div v-for="li in theLinks"\n      class="as-link">\n      \x3c!--Icon--\x3e\n      <ti-icon\n        v-if="li.icon"\n          class="it-icon"\n          :value="li.icon"/>\n      \x3c!--Text--\x3e\n      <a\n        @click.left="OnClickLink(li, $event)"\n        :href="li.href"\n        :target="li.newtab?\'_blank\':null">{{li.text|i18n}}</a>\n    </div>\n  </template>\n  \x3c!--\n    Without session, show login link\n  --\x3e\n  <template v-else>\n    <div v-if="loginIcon"\n      class="as-icon">\n      <ti-icon :value="loginIcon"/>\n    </div>\n    <div class="as-link">\n      <a @click="$notify(loginEvent)">{{\'login\'|i18n}}</a>\n    </div>\n  </template>\n</div>'),function(){const t={props:{me:{type:Object,default:null},avatarKey:{type:String,default:null},avatarSrc:{type:String,default:null},loginIcon:{type:String,default:"zmdi-account-circle"},nameKeys:{type:[String,Array],default:"name"},loginEvent:{type:String,default:"do:login"},logoutEvent:{type:String,default:"do:logout"},links:{type:Array,default:()=>[]}},computed:{TopClass(){return this.getTopClass()},theLinks(){let t=[];for(let e of this.links)e.inSession&&!this.hasSession||t.push(e);return this.hasSession?t.push({text:"i18n:logout",emit:this.logoutEvent}):t.push({text:"i18n:login",emit:this.loginEvent}),t},myName(){if(this.me)return Ti.Util.getOrPick(this.me,this.nameKeys)||Ti.I18n.get("mine")},myIcon(){return this.me?2==this.me.sex?"im-user-female":"im-user-male":"far-user"},myAvatar(){if(this.avatarSrc)return Ti.S.renderBy(this.avatarSrc,this.me)},hasAvatar(){return this.avatarSrc&&this.avatarKey&&this.me&&this.me[this.avatarKey]},hasSession(){return!!this.me}},methods:{OnClickLink(t,e){t.emit&&(e.preventDefault(),this.$notify(t.emit))}}};Ti.Preload("ti/com/ti/session/badge/ti-session-badge.mjs",t)}(),Ti.Preload("ti/com/ti/session/badge/_com.json",{name:"ti-session-badge",globally:!0,template:"./ti-session-badge.html",mixins:["./ti-session-badge.mjs"]}),function(){function t({varName:t,vars:e,matched:i}={}){if(i.startsWith("$$"))return i.substring(1);let n=/^(=)?([^?]+)(\?(.*))?$/.exec(t),a="="==n[1]?e.vars:e.itemData,s=_.trim(n[2]),o=Ti.Util.fallbackNil(_.trim(n[4]),i),l=Ti.Util.getOrPick(a,s);return Ti.Util.fallback(l,o)}function e(i,n={}){if(_.isString(i)){let e=/^=>(.+)$/.exec(i);if(e){return Ti.Util.genInvoking(e[1],{context:{...n,item:n.itemData}})()}if(e=/^\$\{=([^${}=]+)\}$/.exec(i)){let t=_.trim(e[1]);return".."==t?n.itemData:"value"==t?n.value:Ti.Util.fallback(_.get(n.vars,t),i)}if(e=/^(\((.+)\)\?)?(.+)$/.exec(i)){let i=_.trim(e[2]),a=_.trim(e[3]);return i?_.get(n.itemData,i)?Ti.S.renderBy(a,n,{iteratee:t}):null:Ti.S.renderBy(a,n,{iteratee:t})}return i}if(_.isPlainObject(i)){let t={};return _.forEach(i,(i,a)=>{let s=e(i,n);"..."==a?_.assign(t,s):t[a]=s}),t}if(_.isArray(i)){let t=[];for(let a of i){let i=e(a,n);t.push(i)}return t}return i}const i={evalFieldDisplayItem(t={},{defaultKey:e}={}){let i=(()=>{if(Ti.Util.isNil(t))return e?{key:e,comType:"ti-label"}:null;if(_.isPlainObject(t)){let i=_.assign({key:e,comType:"ti-label"},t);if(i.transformer){const t={context:this,partialRight:!0};i.transformer=Ti.Util.genInvoking(i.transformer,t)}return i}if(_.isArray(t))return{key:t,comType:"ti-label"};if(!0===t)return{key:e,comType:"ti-label"};if(_.isString(t)){let i=/^<([^:>=]*)(:([^>]+))?>$/.exec(t);if(i)return{key:i[1]||e||":ti-icon",defaultAs:i[3]||void 0,comType:"ti-icon"};if(i=/^[@#]([^\(]+)\(([^)]+)\)(:(.+))?$/.exec(t))return{key:i[2]||e,comType:"ti-label",comConf:{dict:i[1],className:"is-nowrap",format:i[4]}};if(i=/^<=([^:]+)(:(.+))?>$/.exec(t))return{key:i[3]||e||Symbol(t),comType:i[1]};if(i=/^([^+-:>]+)(:([^+-]+))?(([+-])>([^%]*))?$/.exec(t)){let t=_.trim(i[1]||i[0]),e=i[3];return{key:t,comType:"ti-label",comConf:{className:"is-nowrap",newTab:"+"==i[5],href:_.trim(i[6]),format:e}}}return{key:t,comType:"ti-label"}}return t})();if(i.dict){let{name:t,vKey:e}=Ti.DictFactory.explainDictName(i.dict);i.$dict=Ti.DictFactory.CheckDict(t),i.$dictValueKey=e||".text"}return i},async evalDataForFieldDisplayItem({itemData:t={},displayItem:i={},vars:n={},autoIgnoreNil:a=!0,autoValue:s="value",uniqueKey:o}={}){let l=i,r=l.defaultAs;if(_.isArray(l.key)?r=_.pick(t,l.key):_.isString(l.key)&&(r=".."==l.key?t:/^'[^']+'$/.test(l.key)?l.key.substring(1,l.key.length-1):/^->(.+)$/.test(l.key)?Ti.S.renderBy(l.key.substring(2),t):Ti.Util.fallback(Ti.Util.getOrPick(t,l.key),r)),_.isFunction(l.transformer)&&(Ti.Util.isNil(r)&&!l.transNil||(r=l.transformer(r))),a&&Ti.Util.isNil(r)&&Ti.Util.fallback(l.ignoreNil,!0))return;l.$dict&&(r=await l.$dict.getItemAs(l.$dictValueKey,r));let c=_.cloneDeep(l),d={};return _.isFunction(l.comConf)?d=_.assign({},l.comConf(t)):l.comConf&&(d=e(l.comConf,{vars:n,itemData:t,value:r})),s&&_.isUndefined(d[s])&&(d[s]=r),c.comConf=d,c.uniqueKey=o||_.concat(c.key,c.comType).join("-"),c}};Ti.Preload("ti/com/ti/support/field_display.mjs",i)}(),function(){const t={isSelectedItem:(t={},{value:e=null,multi:i=!1}={})=>i?_.isArray(e)&&_.indexOf(e,t.value)>=0:_.isEqual(e,t.value),normalizeData(t=[],{emptyItem:e=null,multi:i=!1,value:n=null,focusIndex:a=-1,mapping:s=null,defaultIcon:o=null,iteratee:l=null,defaultTipKey:r=null}={}){let c=0,d=[];if(!i&&e){let t=_.cloneDeep(e);t.selected=_.isUndefined(t.value)||_.isNull(t.value)?_.isNull(n):this.isSelectedItem(t,{value:n,multi:i}),_.isFunction(l)&&(t=l(t,c)||t),d.push(t),c++}let h=[];if(_.isArray(t)){let e=s?_.defaults({...s},{icon:"icon",text:"text",value:"value",tip:"tip"}):null;for(let i of t)if(_.isPlainObject(i)){let t;!(t=e?Ti.Util.translate(i,e):_.cloneDeep(i)).tip&&r&&(t.tip=i[r]),h.push(t)}else h.push({icon:o,text:Ti.Types.toStr(i),value:i})}for(let t=0;t<h.length;t++){let e=h[t];e.index=t,e.focused=t==a,e.icon=e.icon||o,e.selected=this.isSelectedItem(e,{value:n,multi:i}),_.isFunction(l)&&(h[t]=l(e,t)||e)}return h},matchItemByKey(t={},e="value",i="equal",n){let a=t[e],s={equal:()=>_.isEqual(a,n),starts:()=>_.startsWith(a,n),contains:()=>{if(_.isString(a))return a.indexOf(n+"")>=0;_.indexOf(a,n)}}[i];return!!_.isFunction(s)&&s()},findItemInList(t,{list:e=[],matchValue:i="equal",matchText:n="off"}={}){if(_.isArray(e)&&!_.isEmpty(e))for(let a of e){if(this.matchItemByKey(a,"value",i,t))return a;if(this.matchItemByKey(a,"text",n,t))return a}return null},getSelectedItemIndex(t,{value:e=null,multi:i=!1}={}){let n=[],a={value:e,multi:i};for(let e=0;e<t.length;e++){let i=t[e];if(this.isSelectedItem(i,a)){if(!this.multi)return e;n.push(e)}}return _.isEmpty(n)&&!i?-1:n}};Ti.Preload("ti/com/ti/support/formed_list_methods.mjs",t)}(),function(){const t={inject:["$vars"],props:{index:{type:Number,default:-1},rowId:{type:String,default:null},data:null,changedId:{type:String,default:null},currentId:{type:String,default:null},checkedIds:{type:Object,default:()=>({})},checkable:{type:Boolean,default:!1},selectable:{type:Boolean,default:!0},openable:{type:Boolean,default:!0},rowToggleKey:{type:Array,default:()=>[]},checkIcons:{type:Object,default:()=>({on:"fas-check-square",off:"far-square"})}},computed:{getListItemClass(){return(...t)=>this.getTopClass({"is-current":this.isCurrent,"is-checked":this.isChecked,"is-changed":this.isChanged},t)},isCurrent(){return this.rowId==this.currentId},isChanged(){return this.rowId==this.changedId},isChecked(){return!!this.checkedIds[this.rowId]},theCheckIcon(){return this.checkedIds[this.rowId]?this.checkIcons.on:this.checkIcons.off}},methods:{isRowToggleKey(t){return _.indexOf(this.rowToggleKey,t)>=0},OnClickChecker(t={}){this.checkable&&this.$notify("checker",{rowId:this.rowId,shift:t.shiftKey,toggle:t.ctrlKey||t.metaKey})},OnClickRow(t={}){let e=t.ctrlKey||t.metaKey;!this.selectable||this.isCurrent&&this.isChecked&&!e||this.$notify("select",{rowId:this.rowId,shift:t.shiftKey,toggle:e})},OnDblClickRow(t={}){this.openable&&(t.stopPropagation(),this.$notify("open",{rowId:this.rowId}))},doAutoActived(){!this.isActived&&this.isCurrent&&this.setActived()}},watch:{isCurrent:function(){this.doAutoActived()}},mounted:function(){this.doAutoActived()}};Ti.Preload("ti/com/ti/support/list_item_mixins.mjs",t)}(),function(){const t={provide:function(){return{$vars:this.vars||{}}},data:()=>({myLastIndex:-1,myCurrentId:null,myCheckedIds:{}}),computed:{TopStyle(){let t=this.width,e=this.height;return Ti.Css.toStyle({width:t,height:e})},hasRowToggleKey(){return!_.isEmpty(this.rowToggleKey)},TheRowToggleKey(){return _.without(_.concat(this.rowToggleKey),void 0)},getRowId(){return Ti.Util.genRowIdGetter(this.idBy)},getRowData(){return Ti.Util.genRowDataGetter(this.rawDataBy)},isDataEmpty(){return!_.isArray(this.data)||_.isEmpty(this.data)},isAllChecked(){if(this.isDataEmpty)return!1;for(let t of this.TheData)if(!this.theCheckedIds[t.id])return!1;return!0},hasChecked(){for(let t of this.data){let e=this.getRowId(t);if(this.theCheckedIds[e])return!0}return!1},theCurrentRowId(){return this.wrapRowId(this.currentId)},theCurrentId(){return this.puppetMode?this.theCurrentRowId:this.myCurrentId},theCheckedIds(){return this.puppetMode?this.getCheckedIdsMap(this.checkedIds):this.myCheckedIds},Dict(){if(this.dict){if(this.dict instanceof Ti.Dict)return this.dict;let{name:t}=Ti.DictFactory.explainDictName(this.dict);return Ti.DictFactory.CheckDict(t)}}},methods:{wrapRowId:t=>_.isNumber(t)?""+t:t,async evalData(t=_.identity){let e=this.data;if(this.Dict)if(_.isString(e))e=await this.Dict.queryData(e);else if(_.isArray(e)){let t=[];for(let i=0;i<e.length;i++){let n=e[i];if(_.isString(n)){let e=await this.Dict.getItem(n);e&&t.push(e)}else t.push(n)}e=t}else e=await this.Dict.getData();let i=[];return _.forEach(e,(e,n)=>{let a={index:n,id:this.getRowId(e,n),rawData:this.getRowData(e),item:e};a=t(a)||a,i.push(a)}),i},findRowIndexById(t){for(let e of this.TheData)if(e.id==t)return e.index;return-1},findRowById(t){for(let e of this.TheData)if(e.id==t)return e},getCurrentRow(t=this.theCurrentId){return this.findRowById(t)},getCurrent(t=this.theCurrentId){let e=this.getCurrentRow(t);return e?e.rawData:null},getCheckedRow(t=this.theCheckedIds){let e=[];for(let i of this.TheData)t[i.id]&&e.push(i);return e},getChecked(t=this.theCheckedIds){let e=this.getCheckedRow(t);return _.map(e,t=>t.rawData)},getEmitContext(t,e={}){let i=[],n=null,a=-1;for(let s of this.TheData)s.id==t&&(n=s.rawData,a=s.index),e[s.id]&&i.push(s.rawData);return{current:n,currentId:t,currentIndex:a,checked:i,checkedIds:e}},selectRow(t,{quiet:e=!1,payload:i}={}){let n={},a=null;this.autoCheckCurrent?(n=t?{[t]:!0}:{},a=t||null):(n=_.cloneDeep(this.myCheckedIds),a=t);let s=this.getEmitContext(a,n);this.puppetMode||(this.myCheckedIds=n,this.myCurrentId=a,this.myLastIndex=this.findRowIndexById(t)),e||(_.defaults(s,i),this.$notify("select",s))},selectRowByIndex(t,e){let i=t;if(this.scrollIndex&&(i=Ti.Num.scrollIndex(t,this.TheData.length)),_.inRange(i,0,this.TheData.length)){let t=this.TheData[i];this.selectRow(t.id,e)}},selectPrevRow(t){this.selectRowByIndex(Math.max(-1,this.myLastIndex-1),t)},selectNextRow(t){this.selectRowByIndex(this.myLastIndex+1,t)},selectRowsToCurrent(t){let e=_.cloneDeep(this.theCheckedIds),i=this.theCurrentId,n=this.findRowIndexById(t);if(n>=0){let t=Math.min(n,this.myLastIndex),a=Math.max(n,this.myLastIndex);t<0&&(t=0);for(let i=t;i<=a;i++){e[this.TheData[i].id]=!0}let s=this.getEmitContext(i,e);this.puppetMode||(this.myCheckedIds=e,this.myCurrentId=i,this.myLastIndex=n),this.$notify("select",s)}},checkRow(t){let e=_.cloneDeep(this.theCheckedIds),i=this.theCurrentId,n=this.myLastIndex;if(_.isUndefined(t))e={},_.forEach(this.TheData,t=>{e[t.id]=!0});else if(_.isArray(t)){let i=_.last(t);_.forEach(t,t=>{e[t]=!0}),this.autoCheckCurrent&&(n=this.findRowIndexById(i))}else e[t]=!0,this.autoCheckCurrent&&(n=this.findRowIndexById(t));let a=this.getEmitContext(i,e);this.puppetMode||(this.myCheckedIds=e,this.myCurrentId=i,this.myLastIndex=n),this.$notify("select",a)},cancelRow(t){let e=_.cloneDeep(this.theCheckedIds),i=this.theCurrentId,n=-1;_.isUndefined(t)?(e={},i=null):(n=this.findRowIndexById(t),e[t]=!1,this.autoCheckCurrent&&i==t&&(i=null));let a=this.getEmitContext(i,e);this.puppetMode||(this.myCheckedIds=e,this.myCurrentId=i,this.myLastIndex=n),this.$notify("select",a)},toggleRow(t){this.theCheckedIds[t]?this.cancelRow(t):this.checkRow(t)},OnRowCheckerClick({rowId:t,shift:e}={}){this.multi?e?this.selectRowsToCurrent(t):this.toggleRow(t):this.selectRow(t)},OnRowSelect({rowId:t,shift:e,toggle:i}={}){e&&this.multi?this.selectRowsToCurrent(t):i&&this.multi?this.toggleRow(t):Ti.Util.isNil(t)||this.autoCheckCurrent?this.selectRow(t):this.toggleRow(t)},OnRowOpen({rowId:t}={}){let e=this.findRowById(t);e&&this.$notify("open",e)},getCheckedIdsMap(t=[]){let e={};return _.isArray(t)?_.forEach(t,t=>{e[t]=!0}):_.forEach(t,(t,i)=>{t&&(e[i]=!0)}),this.autoCheckCurrent&&!Ti.Util.isNil(this.theCurrentId)&&(e[this.theCurrentId]=!0),e},syncCurrentId(){this.puppetMode||this.theCurrentId==this.theCurrentRowId?this.myLastIndex=this.findRowIndexById(this.theCurrentRowId):this.selectRow(this.theCurrentRowId,{quiet:!0})},syncCheckedIds(){this.puppetMode||(this.myCheckedIds=this.getCheckedIdsMap(this.checkedIds))}},watch:{currentId:function(){this.syncCurrentId()},checkedIds:function(){this.syncCheckedIds()},data:function(){this.theCurrentId&&(this.myLastIndex=this.findRowIndexById(this.theCurrentId))}},mounted:async function(){this.syncCheckedIds(),this.syncCurrentId()}};Ti.Preload("ti/com/ti/support/list_mixins.mjs",t)}(),function(){const t={data:{type:[Array,String],default:()=>[]},dict:{type:[String,Ti.Dict],default:null},idBy:{type:[String,Function],default:"id"},rawDataBy:{type:[Object,String,Function],default:_.identity},currentId:{type:[String,Number],default:null},checkedIds:{type:[Array,Object],default:()=>[]},changedId:{type:String,default:null},vars:{type:Object,default:()=>({})},multi:{type:Boolean,default:!1},autoCheckCurrent:{type:Boolean,default:!0},rowToggleKey:{type:[String,Array],default:()=>["SPACE"]},checkable:{type:Boolean,default:!1},selectable:{type:Boolean,default:!0},openable:{type:Boolean,default:!0},cancelable:{type:Boolean,default:!0},hoverable:{type:Boolean,default:!1},puppetMode:{type:Boolean,default:!1},scrollIndex:{type:Boolean,default:!1},blankAs:{type:Object,default:()=>({icon:"fas-disease",text:"empty-data"})},blankClass:{type:String,default:"big-mask",validator:t=>/^(big-mask|mid-tip)$/.test(t)},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null}};Ti.Preload("ti/com/ti/support/list_props.mjs",t)}(),function(){const t={value:null,options:{type:[Array,Function,String,Ti.Dict],default:()=>[]},valueBy:{type:[String,Function],default:void 0},textBy:{type:[String,Function],default:void 0},iconeBy:{type:[String,Function],default:void 0},multi:!1,allowEmpty:{type:Boolean,default:!0},autoSplitValue:{type:[Boolean,String],default:!0},defaultIcon:{type:String,default:null},emptylAs:{default:null},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null}};Ti.Preload("ti/com/ti/switcher/ti-switcher-props.mjs",t)}(),Ti.Preload("ti/com/ti/switcher/ti-switcher.html",'<div class="ti-switcher"\n  :class="TopClass">\n  \x3c!--\n    Show Loading\n  --\x3e\n  <ti-icon\n    v-if="loading"\n    value="zmdi-settings zmdi-hc-spin"/>\n  \x3c!--\n    Options\n  --\x3e\n  <div v-else\n    class="switcher-con">\n    <ul>\n      <li v-for="it in TheItems" \n        :key="it.value"\n        :class="it.className"\n        @click="OnClickItem(it, $event)"\n        @mousedown="myFocusIndex=it.index;">\n        <ti-icon class="it-icon"\n          size=".8em"\n          v-if="it.icon" \n          :value="it.icon"/>\n        <span\n          class="it-text">{{it.text|i18n}}</span>\n      </li>\n    </ul>\n  </div>\n</div>'),function(){const t={data:()=>({loading:!1,myOptionsData:[],myValueMap:{},myLastIndex:0,myFocusIndex:-1}),computed:{TopClass(){return this.getTopClass()},Dict(){if(this.options instanceof Ti.Dict)return this.options;if(_.isString(this.options)){let t=Ti.DictFactory.DictReferName(this.options);if(t)return Ti.DictFactory.CheckDict(t,({loading:t})=>{this.loading=t})}return Ti.DictFactory.GetOrCreate({data:this.options,getValue:Ti.Util.genGetter(this.valueBy||"value"),getText:Ti.Util.genGetter(this.textBy||"text|name"),getIcon:Ti.Util.genGetter(this.iconBy||"icon")},{hooks:({loading:t})=>this.loading=t})},TheItems(){return _.map(this.myOptionsData,(t,e)=>{let i=this.Dict.getValue(t);return{index:e,className:{"is-selected":this.myValueMap[i],"is-focused":e==this.myFocusIndex},text:this.Dict.getText(t),value:i,icon:this.Dict.getIcon(t)||this.defaultIcon}})}},methods:{OnClickItem({value:t,index:e},i){let n=i.ctrlKey||i.metaKey;i.shiftKey&&this.multi?this.selectItemsToCurrent(t,e):n&&this.multi?this.toggleItem(t):this.allowEmpty?this.toggleItem(t):this.myValueMap={[t]:!0},this.myLastIndex=e,this.tryNotifyChanged()},findItemIndexByValue(t){for(let e of this.TheItems)if(e.value==t)return e.index;return-1},selectItemsToCurrent(t){let e=_.cloneDeep(this.myValueMap),i=this.findItemIndexByValue(t);if(i>=0){let t=Math.min(i,this.myLastIndex),n=Math.max(i,this.myLastIndex);t<0&&(t=0);for(let i=t;i<=n;i++){e[this.TheItems[i].value]=!0}}this.myValueMap=e},toggleItem(t){let e=this.myValueMap[t];this.multi?this.myValueMap=_.assign({},this.myValueMap,{[t]:!e}):this.myValueMap={[t]:!e}},tryNotifyChanged(){let t=Ti.Util.truthyKeys(this.myValueMap);if(!_.isEqual(t,this.Values)){let e=this.multi?t:t.join(",");this.$notify("change",e)}},async reloadMyOptionsData(){this.myOptionsData=await this.Dict.getData()},reloadMyValueMap(){let t=null;this.autoSplitValue&&(t=_.isBoolean(this.autoSplitValue)?/[:,;\t\n\/]+/g:this.autoSplitValue);let e=Ti.S.toArray(this.value,{sep:t}),i={};_.forEach(e,t=>i[t]=!0),this.myValueMap=i}},watch:{options:{handler:"reloadMyOptionsData",immediate:!0},value:{handler:"reloadMyValueMap",immediate:!0}},mounted:async function(){Ti.Dom.watchDocument("mouseup",()=>this.myFocusIndex=-1)},beforeDestroy:function(){Ti.Dom.unwatchDocument("mouseup",this.__on_mouseup)}};Ti.Preload("ti/com/ti/switcher/ti-switcher.mjs",t)}(),Ti.Preload("ti/com/ti/switcher/_com.json",{name:"ti-switcher",globally:!0,template:"./ti-switcher.html",props:"./ti-switcher-props.mjs",mixins:["./ti-switcher.mjs"]}),Ti.Preload("ti/com/ti/table/com/table-row/com/table-cell/table-cell.html",'<div class="table-cell"\n  :class="TopClass"\n  :style="TopStyle"\n  :col-index="index"\n  v-ti-activable>\n  <div class="cell-wrapper"\n    :class="WrapperClass">\n    \x3c!--Slot for first column--\x3e\n    <slot></slot>\n    \x3c!--Fields--\x3e\n    <div class="cell-con">\n      <component \n        v-for="(it, index) in cellItems"\n          :class="\'item-\'+index"\n          :key="it.uniqueKey"\n          :is="it.comType"\n          v-bind="it.comConf"\n          @change="OnItemChanged(it, $event)"/>\n    </div>\n  </div>\n</div>'),function(){const t={inject:["$table"],data:()=>({isEditingMode:!1,cellItems:[],myCellSize:-1}),props:{index:{type:Number,default:-1},rowId:{type:String,default:null},rowIndex:{type:Number,default:-1},cellSize:{type:Number,default:0},title:{type:String,default:null},nowrap:{type:Boolean,default:!0},display:{type:Array,default:()=>[]},name:{type:[String,Array],default:null},type:{type:String,default:"String"},dict:{type:String,default:"String"},comType:{type:String,default:null},comConf:{type:Object,default:()=>({})},serializer:{type:Function,default:_.identity},transformer:{type:Function,default:_.identity},data:{type:Object,default:()=>({})},isCurrent:{type:Boolean,default:!1},isHover:{type:Boolean,default:!1},isChecked:{type:Boolean,default:!1},ignoreNil:{type:Boolean,default:!0},focusBy:{type:String,default:"focus"},widthBy:{type:String,default:"width"}},computed:{TopClass(){return this.getTopClass()},TopStyle(){if(this.cellSize>0)return Ti.Css.toStyle({width:this.cellSize})},WrapperClass(){return{"is-nowrap":this.nowrap,"is-editing-mode":this.isEditingMode}},theCurrentDisplayItems(){if(this.isActived&&this.comType||_.isEmpty(this.display)){this.isEditingMode=!0;let t=_.assign({},this.comConf);return this.focusBy&&(t[this.focusBy]="${=isActived}"),this.widthBy&&(t[this.widthBy]="${=cellSize}"),[{comType:this.comType,comConf:t,key:this.name,type:this.type,dict:this.dict,transformer:this.transformer,ignoreNil:!1}]}return this.isEditingMode=!1,this.display}},methods:{async evalCellDisplayItems(){this.$table.reportReady(this.rowIndex,this.index,!_.isEmpty(this.cellItems));let t=[];for(let e=0;e<this.theCurrentDisplayItems.length;e++){let i=this.theCurrentDisplayItems[e],n=await this.evalDataForFieldDisplayItem({itemData:this.data,displayItem:i,vars:{isCurrent:this.isCurrent,isChecked:this.isChecked,isHover:this.isHover,isActived:this.isActived,rowId:this.rowId,cellSize:this.cellSize},autoIgnoreNil:!0,uniqueKey:`row${this.rowId}-cell${this.index}-${e}`});n&&t.push(n)}let e=Ti.Util.pureCloneDeep(this.cellItems),i=Ti.Util.pureCloneDeep(t);_.isEqual(e,i)||(this.cellItems=t),this.$table.reportReady(this.rowIndex,this.index,!0)},OnItemChanged(t,e){this.$table.$notify("cell:item:change",{rowId:this.rowId,cellIndex:this.index,index:this.rowIndex,name:t.key,value:e})}},watch:{data:{handler:"evalCellDisplayItems",immediate:!0},isCurrent:"evalCellDisplayItems",isChecked:"evalCellDisplayItems",isHover:"evalCellDisplayItems",isActived:"evalCellDisplayItems"}};Ti.Preload("ti/com/ti/table/com/table-row/com/table-cell/table-cell.mjs",t)}(),Ti.Preload("ti/com/ti/table/com/table-row/com/table-cell/_com.json",{name:"table-cell",globally:!1,template:"./table-cell.html",methods:"@com:ti/support/field_display.mjs",mixins:["./table-cell.mjs"],components:["@com:ti/label"]}),Ti.Preload("ti/com/ti/table/com/table-row/table-row.html",'<div class="table-row"\n  :class="TopClass"\n  @click.left="OnClickRow"\n  @dblclick.left="OnDblClickRow"\n  @mouseenter="OnMouseEnter"\n  @mouseleave="OnMouseLeave"\n  v-ti-activable>\n  \x3c!--\n    Cells\n  --\x3e\n  <table-cell v-for="fld in fields"\n    :key="fld.index"\n    v-bind="fld"\n    :row-id="rowId"\n    :row-index="index"\n    :cell-size="getCellSize(fld.index)"\n    :is-current="isCurrent"\n    :is-hover="isHover"\n    :is-checked="isChecked"\n    :data="data">\n    <template v-if="fld.index == 0">\n      <div class="table-row-head">\n        \x3c!--current actived row indicator--\x3e\n        <div class="row-actived-indicator"></div>\n        \x3c!-- Indents --\x3e\n        <div v-for="n in indent"\n            class="row-indent"></div>\n        \x3c!--ICON: Handler--\x3e\n        <template v-if="icon">\n          <ti-icon\n            v-if="hasRealIcon"\n              class="row-icon"\n              :value="icon"\n              @click.native.left.stop="OnClickIcon"/>\n          <div v-else\n            class="row-icon"></div>\n        </template>\n        \x3c!--ICON: Checker--\x3e\n        <ti-icon v-if="checkable"\n            class="row-checker"\n            :value="theCheckIcon"\n            @click.native.left.stop="OnClickChecker"/>\n      </div>\n    </template>\n  </table-cell>\n</div>'),function(){const t={props:{indent:{type:Number,default:0},icon:{type:[Boolean,String],default:null},fields:{type:Array,default:()=>[]},sizes:{type:Array,default:()=>[]},hoverId:{type:String,default:null}},computed:{TopClass(){return this.getListItemClass({"is-hover":this.isHover},`row-indent-${this.indent}`)},isHover(){return this.hoverId&&this.rowId==this.hoverId},hasRealIcon(){return this.icon&&_.isString(this.icon)}},methods:{getCellSize(t){if(this.sizes.length>t)return this.sizes[t]},OnClickIcon(t){this.$notify("icon",{rowId:this.rowId,shift:t.shiftKey,toggle:t.ctrlKey||t.metaKey})},OnMouseEnter(){this.$notify("enter",{rowId:this.rowId})},OnMouseLeave(){this.$notify("leave",{rowId:this.rowId})}}};Ti.Preload("ti/com/ti/table/com/table-row/table-row.mjs",t)}(),Ti.Preload("ti/com/ti/table/com/table-row/_com.json",{name:"table-row",globally:!1,template:"./table-row.html",mixins:["@com:ti/support/list_item_mixins.mjs","./table-row.mjs"],components:["./com/table-cell"]}),function(){const t={iconBy:{type:[String,Function],default:null},indentBy:{type:[String,Function],default:null},fields:{type:Array,default:()=>[]},head:{type:String,default:"frozen",validator:t=>Ti.Util.isNil(t)||/^(frozen|none|normal)$/.test(t)},border:{type:String,default:"cell",validator:t=>/^(row|column|cell|none)$/.test(t)},autoScrollIntoView:{type:Boolean,default:!0}};Ti.Preload("ti/com/ti/table/ti-table-props.mjs",t)}(),function(){const t={data:()=>({myViewportWidth:0,myTableWidth:0,myColSizes:{priHead:[],priBody:[],primary:[],fixeds:[],amended:[]},myCellsReady:!1,myCellsReport:{},I_am_in_resizing:!1}),methods:{reportReady(t=-1,e=-1,i=!1){let n=`R${t}-C${e}`;i?delete this.myCellsReport[n]:this.myCellsReport[n]=i,_.delay(()=>{this.myCellsReady=_.isEmpty(this.myCellsReport),this.myCellsReady&&this.evalEachColumnSize()})},evalEachColumnSize(){if(this.I_am_in_resizing)return;let t=_.get(this.$refs.body,"scrollTop");this.I_am_in_resizing=!0,this.myTableWidth=0,this.myColSizes={priHead:[],priBody:[],primary:[],fixeds:[],amended:[]};for(let t of this.TableFields){let e=t.width||"stretch";/^(stretch|auto)$/.test(e)?this.myColSizes.fixeds.push(e):this.myColSizes.fixeds.push(Ti.Css.toPixel(e,1))}this.$nextTick(()=>{let e=Ti.Dom.findAll(".table-head ul li",this.$el);for(let t of e){let e=Ti.Rects.createBy(t);this.myColSizes.priHead.push(e.width)}let i=Ti.Dom.findAll(".table-body .table-row",this.$el);for(let t of i){let e=Ti.Dom.findAll(":scope > div",t);for(let t=0;t<e.length;t++){let i=e[t],n=Ti.Rects.createBy(i);t>=this.myColSizes.priBody.length?this.myColSizes.priBody[t]=n.width:this.myColSizes.priBody[t]=Math.max(n.width,this.myColSizes.priBody[t])}}for(let t=0;t<this.myColSizes.priHead.length;t++){let e=this.myColSizes.priHead[t],i=this.myColSizes.priBody[t],n=Math.max(e,i);this.myColSizes.primary.push(n)}this.onTableResize(),_.delay(()=>{this.I_am_in_resizing=!1,this.$refs.body&&(this.$refs.body.scrollTop=t)},10)})},onTableResize(){if(this.myColSizes.primary.length<=0)return;let t=Ti.Rects.createBy(this.$el).width,e=[],i=[];for(let n=0;n<this.myColSizes.fixeds.length;n++){let a=this.myColSizes.fixeds[n],s=this.myColSizes.primary[n];if("stretch"==a)e.push(n),i.push(s);else if("auto"==a)i.push(s);else if(a<=1&&a>0)i.push(a*t);else if(a<0&&a>=-1){let e=Math.abs(a*t);i.push(Math.max(e,s))}else if(a<-1){let t=Math.abs(a);i.push(Math.max(t,s))}else i.push(a)}let n=_.sum(i),a=Math.max(t,n);if(this.myTableWidth=a,e.length>0){let t=a-n;if(t>0){let n=t/e.length;for(let t of e)i[t]+=n}}this.myColSizes.amended=i}},mounted:async function(){Ti.Viewport.watch(this,{resize:_.debounce(()=>this.onTableResize(),10)})},beforeDestroy:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/table/ti-table-resizes.mjs",t)}(),Ti.Preload("ti/com/ti/table/ti-table.html",'<div class="ti-table"\n  :class="TopClass"\n  @click="OnClickTop"\n  v-ti-activable>\n  \x3c!--\n    Blank\n  --\x3e\n  <ti-loading \n    v-if="isDataEmpty"\n      class="nil-data"\n      :class="\'as-\'+blankClass"\n      v-bind="blankAs"/>\n  \x3c!--\n    Show thead/tbody\n  --\x3e\n  <template v-else>\n    \x3c!--\n      Head\n    --\x3e\n    <div v-if="isShowHead"\n      class="table-head"\n      :style="TableStyle">\n      \x3c!--checker--\x3e\n      <div\n          v-if="checkable && multi"\n            class="as-checker"\n            @click.left="OnClickHeadChecker">\n            <ti-icon :value="HeadCheckerIcon"/>\n      </div>\n      \x3c!--field titles--\x3e\n      <ul>\n        <li\n          v-for="fld in TableFields"\n            class="table-head-cell"\n            :style="getHeadCellStyle(fld.index)"\n            :col-index="fld.index">\n          <span class="table-head-cell-text">{{fld.title|i18n}}</span>\n        </li>\n      </ul>\n    </div\n    \x3c!--\n      Body\n    --\x3e\n    <div ref="body"\n      class="table-body"\n      :style="TableStyle">\n      <table-row\n        v-for="row in myData"\n          :key="row.id"\n          :row-id="row.id"\n          :index="row.index"\n          :icon="row.icon"\n          :indent="row.indent"\n          :data="row.rawData"\n          :fields="TableFields"\n          :sizes="myColSizes.amended"\n          :current-id="theCurrentId"\n          :checked-ids="theCheckedIds"\n          :hover-id="myHoverId"\n          :changed-id="changedId"\n          :checkable="checkable"\n          :selectable="selectable"\n          :openable="openable"\n          @icon="$notify(\'icon\', $event)"\n          @checker="OnRowCheckerClick"\n          @select="OnRowSelect"\n          @open="OnRowOpen"\n          @enter="OnRowEnter"\n          @leave="OnRowLeave"/>\n    </div>\n  </template>\n</div>'),function(){const t={provide:function(){return{$table:this}},data:()=>({myData:[],myHoverId:null}),computed:{TopClass(){return this.getTopClass({"is-cells-no-ready":!this.myCellsReady,"is-layout-ready":this.myCellsReady,"is-hoverable":this.hoverable},[`is-border-${this.border}`,`is-head-${this.head||"none"}`])},TableStyle(){if(this.myTableWidth>0)return Ti.Css.toStyle({width:this.myTableWidth})},getRowIndent(){return _.isFunction(this.indentBy)?t=>this.indentBy(t):_.isString(this.indentBy)?t=>_.get(t,this.indentBy):t=>0},getRowIcon(){return _.isFunction(this.iconBy)?t=>this.iconBy(t):_.isString(this.iconBy)?t=>_.get(t,this.iconBy):t=>null},TheData(){return this.myData},isShowHead(){return/^(frozen|normal)$/.test(this.head)},HeadCheckerIcon(){return this.isAllChecked?"fas-check-square":this.hasChecked?"fas-minus-square":"far-square"},TableFields(){let t=[];for(let e=0;e<this.fields.length;e++){let i=this.fields[e],n=this.evalFieldDisplay(i.display,i.name),a=Ti.Util.fallbackNil(i.width,"stretch");_.isString(a)?/^\d+(\.\d+)?%$/.test(a)?a=a.substring(0,a.length-1)/100:/^(auto|stretch)$/.test(a)||(a="stretch"):_.isNumber(a)||(a="stretch"),t.push({index:e,title:i.title,nowrap:i.nowrap,width:a,name:i.name,display:n,type:i.type,comType:i.comType,comConf:i.comConf,transformer:i.transformer,serializer:i.serializer})}return t}},methods:{OnRowEnter({rowId:t}={}){this.hoverable&&(this.myHoverId=t)},OnRowLeave({rowId:t}={}){this.hoverable&&this.myHoverId==t&&(this.myHoverId=null)},OnClickHeadChecker(){this.isAllChecked?this.cancelRow():this.checkRow()},OnClickTop(t){this.cancelable&&Ti.Dom.hasOneClass(t.target,"ti-table","table-body","table-head-cell","table-head-cell-text")&&this.cancelRow()},onItemChanged(t){this.$notify("item:change",t)},getHeadCellStyle(t=-1){if(this.myColSizes.amended.length>t)return Ti.Css.toStyle({width:this.myColSizes.amended[t]})},evalFieldDisplay(t=[],e){t=_.concat(t);let i=[];for(let n of t){let t=this.evalFieldDisplayItem(n,{defaultKey:e});t&&i.push(t)}return i},scrollCurrentIntoView(){if(this.autoScrollIntoView&&this.myLastIndex>=0){console.log("scroll");let t=this.$refs.body,e=Ti.Dom.find(`.table-row:nth-child(${this.myLastIndex+1})`,t),i=Ti.Rects.createBy(t),n=Ti.Rects.createBy(e);i.contains(n)||(n.bottom>i.bottom?t.scrollTop+=n.bottom-i.bottom:t.scrollTop+=n.top-i.top)}},__ti_shortcut(t){return"ARROWUP"==t?(this.selectPrevRow({payload:{byKeyboardArrow:!0}}),this.scrollCurrentIntoView(),{prevent:!0,stop:!0,quit:!0}):"ARROWDOWN"==t?(this.selectNextRow({payload:{byKeyboardArrow:!0}}),this.scrollCurrentIntoView(),{prevent:!0,stop:!0,quit:!0}):void 0}},watch:{data:{handler:async function(t,e){_.isEqual(t,e)||(this.myData=await this.evalData(t=>{t.icon=this.getRowIcon(t.item),t.indent=this.getRowIndent(t.item)})),_.isEmpty(this.data)&&(this.myCellsReady=!0)},immediate:!0}}};Ti.Preload("ti/com/ti/table/ti-table.mjs",t)}(),Ti.Preload("ti/com/ti/table/_com.json",{name:"ti-table",globally:!0,template:"./ti-table.html",props:["@com:ti/support/list_props.mjs","./ti-table-props.mjs"],methods:"@com:ti/support/field_display.mjs",mixins:["@com:ti/support/list_mixins.mjs","./ti-table-resizes.mjs","./ti-table.mjs"],components:["./com/table-row"]}),Ti.Preload("ti/com/ti/tags/com/tags-item/tags-item.html",'<div class="ti-tags-item" \n  :class="topClass"\n  @mouseenter="mouseEnter=\'top\'"\n  @mouseleave="mouseEnter=null"\n  @click.left="onClickTop">\n  \x3c!--\n    Deleter\n  --\x3e\n  <ti-icon v-if="removable"\n    class="as-del"\n    :value="removeIcon"\n    @mouseenter.native="mouseEnter=\'del\'"\n    @mouseleave.native="mouseEnter=\'top\'"\n    @click.native.stop="onClickDel"/>\n  \x3c!--\n    Icon\n  --\x3e\n  <ti-icon v-if="icon" \n    class="as-icon"\n    :value="icon"/>\n  \x3c!--\n    Text\n  --\x3e\n  <template v-if="text">\n    <a v-if="href"\n      class="as-text"\n      @click.prevent\n      :href="href"\n      :class="textClass">{{text|i18n}}</a>\n    <span v-else\n      class="as-text"\n      :class="textClass">{{text|i18n}}</span>\n  </template>\n  \x3c!--\n    Status Icon\n  --\x3e\n  <ti-icon v-if="hasOptions"\n    class="as-status"\n    :value="theStatusIcon"/>\n  \x3c!--\n    Drop & Mask\n  --\x3e\n  <template v-if="\'extended\' == status">\n    <div class="as-mask" @click.stop="closeDrop"></div>\n    <div class="as-drop" ref="drop"\n      @click.stop>\n      <ti-icon-text v-for="it in theOptions"\n        :key="it.index"\n        v-bind="it"\n        @click.native="onClickOption(it)"/>\n    </div>\n  </template>\n</div>'),function(){const t={inheritAttrs:!1,data:()=>({mouseEnter:null,status:"collapse"}),props:{index:{type:Number,default:-1},atLast:{type:Boolean,default:!1},icon:{type:[String,Object],default:null},text:{type:String,default:null},href:{type:String,default:null},value:{type:[String,Number,Boolean,Object],default:null},options:{type:Array,default:()=>[]},optionDefaultIcon:{type:String,default:null},cancelBubble:{type:Boolean,default:!1},removable:{type:Boolean,default:!1},removeIcon:{type:String,default:null},statusIcons:{type:Object,default:()=>({collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"})}},computed:{topClass(){return Ti.Css.mergeClassName({"has-options":this.hasOptions,"is-enter-top":"top"==this.mouseEnter&&this.hasOptions,"is-enter-del":"del"==this.mouseEnter},this.className)},textClass(){return{"without-icon":!this.hasIcon&&!this.removable,"without-options":!this.hasOptions}},hasIcon(){return!!this.icon},hasOptions(){return _.isArray(this.options)&&this.options.length>0},theOptions(){let t=_.filter(_.concat(this.options),t=>!Ti.Util.isNil(t)),e=[];return _.forEach(t,(t,i)=>{let n;n=_.isPlainObject(t)?_.assign({icon:this.optionDefaultIcon},t,{index:i}):{index:i,icon:this.optionDefaultIcon,text:Ti.Types.toStr(t),value:t},_.isEqual(n.value,this.value)||e.push(n)}),e},theStatusIcon(){return this.statusIcons[this.status]},theData(){return{index:this.index,icon:this.icon,text:this.text,value:this.value,href:this.href,atLast:this.atLast,asterisk:this.asterisk}}},methods:{onClickDel(){this.$notify("remove",this.theData)},onClickOption({value:t,text:e,icon:i}={}){this.$notify("change",{value:t,text:e,icon:i,index:this.index}),this.closeDrop()},onClickTop(t){this.hasOptions?(t.stopPropagation(),this.openDrop()):this.cancelBubble&&t.stopPropagation(),this.href&&this.$notify("fire",this.theData)},openDrop(){this.hasOptions&&(this.status="extended",this.$nextTick(()=>{this.dockDrop()}))},closeDrop(){this.status="collapse",this.mouseEnter=null},dockDrop(){let t=this.$refs.drop,e=this.$el;if(_.isElement(t)&&_.isElement(e)&&"extended"==this.status){let i=Ti.Rects.createBy(e);Ti.Dom.setStyle(t,{"min-width":`${i.width}px`}),Ti.Dom.dockTo(t,e,{space:{y:2},posListX:["left","right"]})}}},mounted:function(){this.dockDrop()}};Ti.Preload("ti/com/ti/tags/com/tags-item/tags-item.mjs",t)}(),Ti.Preload("ti/com/ti/tags/com/tags-item/_com.json",{name:"tags-item",globally:!1,template:"./tags-item.html",mixins:["./tags-item.mjs"],components:["@com:ti/icon/text"]}),Ti.Preload("ti/com/ti/tags/ti-tags.html",'<div class="ti-tags"\n  :class="TopClass">\n  \x3c!--\n    Loop piece\n  --\x3e\n  <tags-item v-for="tag in myTags"\n    :key="tag.index"\n    v-bind="tag"\n    :cancel-bubble="cancelItemBubble"\n    :option-default-icon="optionDefaultIcon"\n    :removable="removable"\n    :remove-icon="removeIcon"\n    :status-icons="statusIcons"\n    @change="OnItemChanged"\n    @remove="OnItemRemoved"\n    @fire="OnItemFired"/>\n</div>'),function(){const t={data:()=>({myTags:[],myValues:[]}),props:{value:{type:Array,default:()=>[]},dict:{type:[String,Ti.Dict],default:null},mapping:{type:Object,default:void 0},itemOptions:{type:Array,default:()=>[]},cancelItemBubble:{type:Boolean,default:!1},removable:{type:Boolean,default:!1},itemIconBy:{type:[String,Function],default:void 0},optionDefaultIcon:{type:String,default:void 0},itemDefaultIcon:{type:String,default:void 0},removeIcon:{type:String,default:"zmdi-close"},statusIcons:{type:Object,default:()=>({collapse:"zmdi-chevron-down",extended:"zmdi-chevron-up"})}},computed:{TopClass(){if(this.className)return this.className},getTagItemIcon(){return _.isFunction(this.itemIconBy)?t=>this.itemIconBy(t):_.isString(this.itemIconBy)?t=>_.get(t,this.itemIconBy):t=>null},Dict(){if(this.dict){if(this.dict instanceof Ti.Dict)return this.dict;let{name:t}=Ti.DictFactory.explainDictName(this.dict);return Ti.DictFactory.CheckDict(t)}}},methods:{OnItemChanged({index:t,value:e}={}){if(t>=0){let i=this.getMyValues();i[t]=Ti.Util.fallback(e,null),this.$notify("change",i)}},OnItemRemoved({index:t}={}){if(t>=0){let e=this.getMyValues();_.pullAt(e,t),this.$notify("change",e)}},OnItemFired({index:t=-1}={}){if(t>=0){let e=_.nth(this.theData,t);e&&this.$notify("item:actived",e)}},async evalMyData(){const t=[];if(_.isArray(this.value)){const e=this.value.length-1;for(let i=0;i<this.value.length;i++){let n,a=this.value[i];if(_.isPlainObject(a))(n=this.mapping?Ti.Util.translate(a,this.mapping):_.cloneDeep(a)).icon||(n.icon=this.getTagItemIcon(a));else if(this.Dict){let t=await this.Dict.getItem(a);n=_.defaults({icon:this.Dict.getIcon(t),text:this.Dict.getText(t)||a,value:a})}else n={text:a,value:a};_.defaults(n,{index:i,icon:this.itemDefaultIcon,options:this.itemOptions,atLast:i==e}),t.push(n)}}this.myTags=t},getMyValues(){const t=[];for(let e of this.myTags)t.push(Ti.Util.fallback(e.value,null));return t}},watch:{value:{handler:"evalMyData",immediate:!0}}};Ti.Preload("ti/com/ti/tags/ti-tags.mjs",t)}(),Ti.Preload("ti/com/ti/tags/_com.json",{name:"ti-tags",globally:!0,template:"./ti-tags.html",mixins:["./ti-tags.mjs"],components:["./com/tags-item"]}),Ti.Preload("ti/com/ti/text/json/ti-text-json.html",'<ti-gui\n  class="ti-text-json"\n  :class="className"\n  keep-shown-to="ti-text-json-editor"\n  :layout="TheLayout"\n  :schema="TheSchema"\n  :can-loading="true"\n  @change="OnChange"/>'),function(){const t={props:{tabAt:{type:String,default:"bottom-left",validator:t=>/^(top|bottom)-(left|center|right)$/.test(t)},value:void 0,tree:{type:Object,default:()=>({})}},computed:{TheContent(){return Ti.Util.isNil(this.value)?"":this.value},TheData(){return Ti.Util.isNil(this.value)?null:Ti.Types.safeParseJson(this.value,null)},TheLayout(){return{type:"tabs",tabAt:this.tabAt,blocks:[{title:"i18n:structure",name:"tree",body:"desktop-tree"},{title:"i18n:source-code",name:"source",body:"desktop-source"}]}},TheSchema(){return{"desktop-tree":{comType:"ti-text-json-tree",comConf:_.assign({},this.tree,{value:this.TheData})},"desktop-source":{comType:"ti-text-raw",comConf:{showTitle:!1,value:this.value}}}}},methods:{OnChange(t){this.$notify("change",t)}}};Ti.Preload("ti/com/ti/text/json/ti-text-json.mjs",t)}(),Ti.Preload("ti/com/ti/text/json/tree/item/json-tree-item.html",'<div class="json-value"\n  :class="topClass"\n  v-ti-activable>\n  \x3c!--\n  //  - Label   : Readonly\n  --\x3e\n  <span v-if="isLabel"\n    class="as-editing as-label">{{theLabelDisplayText}}</span>\n  \x3c!--\n  //  - Boolean : Editable boolean value\n  --\x3e\n  <ti-toggle v-else-if="\'Boolean\' == valueType"\n    class="as-editing"\n    :value="value"\n    @change="$notify(\'change\', $event)"/>\n  \x3c!--\n  //  - Integer : Editable integer value\n  //  - Float   : Editable float value\n  //  - String  : Editable string value\n  //  - Nil     : Edtiable any value\n  --\x3e\n  <ti-label v-else\n    class="as-editing"\n    :value="value"\n    :class-name="theValueClassName"\n    :format="theValueFormat"\n    :editable="true"\n    @change="$notify(\'change\', $event)"/>\n  \x3c!--\n    Action Menu\n  --\x3e\n  <ti-actionbar v-if="showActions"\n    class="as-actions"\n    :items="theActionMenuData"\n    :status="theActionMenuStatus"/>\n</div>'),function(){const t={inheritAttrs:!1,data:()=>({}),props:{value:null,valueType:{type:String,default:"Nil"},valuePath:{type:[String,Array],default:()=>[]},showActions:{type:Boolean,default:!1}},computed:{topClass(){return Ti.Css.mergeClassName({"is-self-actived":this.isSelfActived,"is-actived":this.isActived})},isLabel(){return/^(Array|Object)$/.test(this.valueType)},isTop(){return 0==this.theValuePath.length},theLabelDisplayText(){return"Array"==this.valueType?"[..]":"Object"==this.valueType?"{..}":"???"},theValuePath(){return _.isArray(this.valuePath)?this.valuePath:_.isString(this.valuePath)?_.without(this.valuePath.split(/[\/.]/g),""):[]},theValueClassName(){return _.kebabCase(`is${this.valueType}`)},theValueFormat(){if("String"==this.valueType)return function(t){return t?`"${t}"`:'""'}},theActionMenuData(){let t=[{name:"jvTypeArray",text:"i18n:json-Array",type:"action",altDisplay:{icon:"zmdi-check",capture:!1},action:()=>{this.$notify("change",{jsonMutate:"ChangeValueType",args:"Array"})}},{name:"jvTypeObject",text:"i18n:json-Object",type:"action",altDisplay:{icon:"zmdi-check",capture:!1},action:()=>{this.$notify("change",{jsonMutate:"ChangeValueType",args:"Object"})}}],e=[{name:"jv-add",type:"action",icon:"zmdi-plus",action:()=>{this.$notify("change",{jsonMutate:"Add"})}}];return this.isTop||(e.push({type:"line"}),e.push({name:"jv-remove",type:"action",icon:"zmdi-delete",action:()=>{this.$notify("change",{jsonMutate:"Remove"})}}),t.push({type:"line"}),t.push({name:"jvTypeBoolean",text:"i18n:json-Boolean",type:"action",altDisplay:{icon:"zmdi-check",capture:!1},action:()=>{this.$notify("change",{jsonMutate:"ChangeValueType",args:"Boolean"})}}),t.push({name:"jvTypeNumber",text:"i18n:json-Number",type:"action",altDisplay:{icon:"zmdi-check",capture:!1},action:()=>{this.$notify("change",{jsonMutate:"ChangeValueType",args:"Number"})}}),t.push({name:"jvTypeString",text:"i18n:json-String",type:"action",altDisplay:{icon:"zmdi-check",capture:!1},action:()=>{this.$notify("change",{jsonMutate:"ChangeValueType",args:"String"})}}),t.push({name:"jvTypeNil",text:"i18n:json-Nil",type:"action",altDisplay:{icon:"zmdi-check",capture:!1},action:()=>{this.$notify("change",{jsonMutate:"ChangeValueType",args:"Nil"})}})),e.push({type:"line"}),e.push({key:"jv-types",type:"group",icon:"zmdi-more",items:t}),e},theActionMenuStatus(){return{jvTypeBoolean:"Boolean"==this.valueType,jvTypeInteger:"Integer"==this.valueType,jvTypeFloat:"Float"==this.valueType,jvTypeNumber:"Number"==this.valueType,jvTypeString:"String"==this.valueType,jvTypeArray:"Array"==this.valueType,jvTypeObject:"Object"==this.valueType,jvTypeNil:"Nil"==this.valueType}}},methods:{},watch:{},mounted:function(){}};Ti.Preload("ti/com/ti/text/json/tree/item/json-tree-item.mjs",t)}(),Ti.Preload("ti/com/ti/text/json/tree/item/_com.json",{name:"ti-text-json-tree-item",globally:!0,template:"./json-tree-item.html",mixins:["./json-tree-item.mjs"]}),Ti.Preload("ti/com/ti/text/json/tree/ti-text-json-tree.html",'<ti-tree class="ti-text-json-tree"\n  title="i18n:name"\n  :main-width="mainWidth"\n  :class="className"\n  :border="border"\n  :keep-open-by="keepOpenBy"\n  :multi="true"\n  :data="myTreeRoot"\n  :display="TreeDisplay"\n  :auto-open="autoOpen"\n  :current-id="myTreeCurrentPathId"\n  :default-open-depth="2"\n  :fields="TreeFields"\n  @select\n  @node:item:change="OnNodeItemChange"\n  @opened-status:changed="OnOpenedStatusChanged"/>'),function(){const t={data:()=>({myTreeRoot:[],myTreeCurrentPathId:null,myTreeOpenedStatus:{}}),props:{value:null,mainWidth:{type:[String,Number],default:.372},border:{type:String,default:"cell",validator:t=>/^(row|column|cell|none)$/.test(t)},keepOpenBy:{type:String,default:null},autoOpen:{type:Boolean,default:!1},showRoot:{type:Boolean,default:!0},editing:{type:Object,default:()=>({})}},computed:{TreeDisplay:()=>({key:"name",comType:"ti-label",comConf:t=>({className:_.kebabCase(`is-${t.nameType}`),editable:"Key"==t.nameType,format:{Index:"[${val}]",Label:"i18n:json-${val}"}[t.nameType]})}),TreeFields:()=>[{title:"i18n:value",width:.618,display:{key:"value",ignoreNil:!1,comType:"ti-text-json-tree-item",comConf:{valueType:"${valueType}",valuePath:"${=rowId}",showActions:"${=isCurrent}"}}}]},methods:{evalTreeData(){let t=[];this.joinTreeTableRow(t,this.value),this.myTreeRoot=_.first(t)},getJsValueType:t=>Ti.Util.isNil(t)?"Nil":_.isArray(t)?"Array":_.isNumber(t)?"Number":_.upperFirst(typeof t),joinTreeTableRow(t=[],e,i){let n,a=this.getJsValueType(e);if(_.isUndefined(i)?(i=a,n="Label"):n=_.isNumber(i)?"Index":"Key",_.isUndefined(e)?t.push({nameType:n,valueType:a,name:i,value:void 0}):_.isNull(e)&&t.push({nameType:n,valueType:a,name:i,value:null}),_.isArray(e)){let a={nameType:n,valueType:"Array",name:i,value:e,children:[]};for(let t=0;t<e.length;t++){let i=e[t];this.joinTreeTableRow(a.children,i,t)}t.push(a)}else if(_.isPlainObject(e)){let a={nameType:n,valueType:"Object",name:i,value:e,children:[]};_.forEach(e,(t,e)=>{this.joinTreeTableRow(a.children,t,e)}),t.push(a)}else _.isBoolean(e)?t.push({nameType:n,valueType:a,name:i,value:!!e}):_.isNumber(e)?t.push({nameType:n,valueType:a,name:i,value:1*e}):_.isString(e)&&t.push({nameType:n,valueType:a,name:i,value:e+""})},async doAdd(t={},e=[]){let i=Ti.Trees.getByPath(this.myTreeRoot,e),n=_.isEmpty(e)?t:_.get(t,e),a=this.myTreeOpenedStatus[e.join("/")];if(i){if(a&&_.isArray(n))n.push(null);else if(a&&_.isPlainObject(n)){let t=await Ti.Prompt("i18n:json-new-key");if(Ti.Util.isNil(t))return;n[t]=null}else if(e.length>0){let i,n=e.slice(0,e.length-1),a=_.isEmpty(n)?t:_.get(t,n),s=_.last(e);if(_.isArray(a))i=a,Ti.Util.insertToArray(a,s+1,null);else if(_.isPlainObject(a)){let t=await Ti.Prompt("i18n:json-new-key");if(Ti.Util.isNil(t))return;i=Ti.Util.appendToObject(a,s,{[t]:null})}if(0==n.length)return i;_.set(t,n,i)}return t}},doRemove(t={},e=[]){if(_.isEmpty(e))return;let i,n=Ti.Trees.getByPath(this.myTreeRoot,e),a=Ti.Trees.nextCandidate(n),s=e.slice(0,e.length-1),o=_.isEmpty(s)?t:_.get(t,s),l=_.last(e);if(_.isArray(o)?(i=[],_.forEach(o,(t,e)=>{e!=l&&i.push(t)})):_.isPlainObject(o)&&(i={},_.forEach(o,(t,e)=>{e!=l&&(i[e]=t)})),a&&a.node){let t=_.concat(a.path,a.node.name).join("/");this.$nextTick(()=>{this.myTreeCurrentPathId=t})}return 0==s.length?i:(_.set(t,s,i),t)},doChangeValueType(t={},e=[],i){let n=_.isEmpty(e),a=n?t:_.get(t,e),s={Boolean:t=>!!t,Number:t=>{let e=1*t;return isNaN(e)?-1:e},Integer:t=>{let e=parseInt(t);return isNaN(e)?-1:e},Float:t=>{let e=1*t;return isNaN(e)?-1:e},String:t=>_.isArray(t)||_.isObject(t)?JSON.stringify(t):t+"",Array:t=>_.isArray(t)?void 0:Ti.Util.isNil(t)?[]:[t],Object:t=>{if(_.isArray(t)){let e=_.fromPairs(t),i={};return _.forEach(e,(t,e)=>{Ti.Util.isNil(e)||_.isUndefined(t)||(i[e]=t)}),_.isEmpty(i)&&!_.isEmpty(t)&&Ti.Util.merge(i,t),i}if(!_.isPlainObject(t))return _.isString(t)?Ti.Types.safeParseJson(t,{value:t}):{value:t}},Nil:t=>null}[i];if(_.isFunction(s)){let i=s(a);if(_.isUndefined(i))return;return n?i:(_.set(t,e,i),t)}},async OnNodeItemChange({name:t,value:e,data:i,node:n,nodeId:a}={}){if(!n.id)return;let s=_.cloneDeep(this.value),o=n.path;if(e&&e.jsonMutate){let t={Add:this.doAdd,Remove:this.doRemove,ChangeValueType:this.doChangeValueType}[e.jsonMutate];if(s=await Ti.DoInvoke(t,_.concat([s,o],e.args),this),_.isUndefined(s))return}else if("name"==t)s=Ti.Util.setKey(s,o,e);else if("value"==t){let t={Integer:t=>{let e=parseInt(t);return isNaN(e)?t:e},Float:t=>{let e=1*t;return isNaN(e)?t:e},Number:t=>{let e=1*t;return isNaN(e)?t:e},Nil:t=>Ti.S.toJsValue(t,{autoDate:!1})}[i.valueType],n=_.isFunction(t)?t(e):e;_.set(s,o,n)}this.$notify("change",s)},OnOpenedStatusChanged(t){this.myTreeOpenedStatus=t}},watch:{value:function(){this.evalTreeData()}},mounted:function(){this.evalTreeData()}};Ti.Preload("ti/com/ti/text/json/tree/ti-text-json-tree.mjs",t)}(),Ti.Preload("ti/com/ti/text/json/tree/_com.json",{name:"ti-text-json-tree",globally:!0,i18n:"@i18n:ti-text-json",template:"./ti-text-json-tree.html",mixins:["./ti-text-json-tree.mjs"],components:["@com:ti/tree","@com:ti/text/json/tree/item"]}),Ti.Preload("ti/com/ti/text/json/_com.json",{name:"ti-text-json",globally:!0,i18n:"@i18n:ti-text-json",template:"./ti-text-json.html",mixins:["./ti-text-json.mjs"],components:["@com:ti/gui","@com:ti/text/raw","@com:ti/toggle","@com:ti/text/json/tree"]}),Ti.Preload("ti/com/ti/text/markdown/preview/markdown-preview.html",'<div class="ti-markdown-preview"\n  :class="TopClass">\n  <article \n    :class="ThemeClass"\n    v-html="myHtml"></article>\n  \x3c!--pre>{{myHtml}}</pre--\x3e\n</div>'),function(){const t={data:()=>({myHtml:null,myTheme:null}),props:{previewMediaSrc:{type:[String,Function],default:void 0},value:{type:String,default:""},placeholder:{type:String,default:"i18n:blank"},theme:{type:String,default:"nice"}},computed:{TopClass(){return this.getTopClass()},ThemeClass(){if(this.myTheme)return`ti-markdown-theme-${this.myTheme}`},ThePreviewMediaSrc(){let t=_.identity;return _.isString(this.previewMediaSrc)?t=(t=>Ti.S.renderBy(this.previewMediaSrc,{src:t})):_.isFunction(this.previewMediaSrc)&&(t=this.previewMediaSrc),async e=>/^(https?:)(\/\/)/.test(e)?e:t(e)}},methods:{async renderMarkdown(){if(Ti.Util.isBlank(this.value))this.myHtml=Ti.I18n.text(this.placeholder),this.myTheme=this.theme;else{let t=Cheap.parseMarkdown(this.value);console.log(t.toString()),this.myHtml=await t.toBodyInnerHtml({mediaSrc:this.ThePreviewMediaSrc}),this.myTheme=t.getMeta("theme",this.theme)}}},watch:{value:{handler:"renderMarkdown",immediate:!0}}};Ti.Preload("ti/com/ti/text/markdown/preview/markdown-preview.mjs",t)}(),Ti.Preload("ti/com/ti/text/markdown/preview/_com.json",{name:"ti-text-markdown-preview",globally:!0,template:"./markdown-preview.html",mixins:["./markdown-preview.mjs"]}),function(){const t={getSelection(...t){return this.$editor.getSelection(...t)},setSelection(...t){return this.$editor.setSelection(...t)},updateContents(...t){return this.$editor.updateContents(...t)}};Ti.Preload("ti/com/ti/text/markdown/richeditor/ti-markdown-richeditor-delegate-methods.mjs",t)}(),function(){const t={mediaBase:{type:String,default:void 0},value:{type:String,default:""},actions:{type:Object,default:()=>({})},markdownMediaSrc:{type:[String,Function],default:void 0},previewMediaSrc:{type:[String,Function],default:void 0},placeholder:{type:String,default:"i18n:blank"},theme:{type:String,default:"nice"},toolbar:{type:Array,default:()=>["Heading","|","B","I","|","Link","Code","|","BlockQuote","CodeBlock","|","Outdent","Indent","|","UL","OL"]},toolbarAlign:{type:String,default:"left",validator:t=>/^(left|right|center)$/.test(t)},blankAs:{type:Object,default:()=>({icon:"fas-coffee",text:null})}};Ti.Preload("ti/com/ti/text/markdown/richeditor/ti-markdown-richeditor-props.mjs",t)}(),Ti.Preload("ti/com/ti/text/markdown/richeditor/ti-markdown-richeditor.html",'<div class="ti-markdown-richeditor"\n  :class="TopClass">\n  \x3c!--\n    Toolbar\n  --\x3e\n  <ti-actionbar \n    v-if="hasToolbar"\n      class="as-toolbar"\n      :items="ToolbarMenuData" \n      :align="toolbarAlign"\n      :status="myToolbarStatus"\n      @change="OnToolbarChange"/>\n  \x3c!--\n    Stage\n  --\x3e\n  <div ref="stage"\n    class="as-stage"\n    spellcheck="false"\n    :class="ThemeClass"></div>\n  \x3c!--\n    Cover when nil\n  --\x3e\n  <ti-loading\n    v-if="isNilContent"\n      class="as-nil-mask as-big-mask"\n      v-bind="blankAs"/>\n</div>'),function(){const t={"|":{type:"line"},B:{icon:"fas-bold",notify:"bold",highlight:"bold",disabled:"italic"},I:{icon:"fas-italic",notify:"italic",highlight:"italic",disabled:"bold"},Link:{icon:"fas-link",notify:"link",highlight:"link"},Code:{icon:"zmdi-code",notify:"code",highlight:"code"},Heading:{type:"group",icon:"fas-hashtag",text:"i18n:wordp-heading",items:[{text:"i18n:wordp-h1",notify:"header",highlight:"h1",value:1},{text:"i18n:wordp-h2",notify:"header",highlight:"h2",value:2},{text:"i18n:wordp-h3",notify:"header",highlight:"h3",value:3},{text:"i18n:wordp-h4",notify:"header",highlight:"h4",value:4},{text:"i18n:wordp-h5",notify:"header",highlight:"h5",value:5},{text:"i18n:wordp-h6",notify:"header",highlight:"h6",value:6},{text:"i18n:wordp-h0",notify:"header",highlight:"h0",value:0}]},BlockQuote:{icon:"fas-quote-right",notify:"blockquote",highlight:"blockquote"},CodeBlock:{icon:"fas-code",notify:"code_block",highlight:"code-block"},Indent:{icon:"fas-indent",notify:"indent"},Outdent:{icon:"fas-outdent",notify:"outdent"},UL:{icon:"fas-list-ul",notify:"list",value:"bullet",highlight:{list:"bullet"}},OL:{icon:"fas-list-ol",notify:"list",value:"ordered",highlight:{list:"ordered"}}},e={data:()=>({myMeta:{},syncForbid:0,myToolbarStatus:{}}),computed:{TopClass(){return this.getTopClass({"nil-content":this.isNilContent,"has-content":!this.isNilContent})},ThemeClass(){if(this.ThemeName)return`ti-markdown-theme-${this.ThemeName}`},ThemeName(){return _.get(this.myMeta,"theme")||this.theme},hasToolbar(){return!_.isEmpty(this.ToolbarMenuData)},isNilContent(){return Ti.Util.isNil(this.value)},ToolbarActions(){return _.merge({},t,this.actions)},ToolbarMenuData(){let t=[];return _.forEach(this.toolbar,e=>{let i=_.get(this.ToolbarActions,e);i&&t.push(i)}),t},TheMarkdownMediaSrc(){return _.isFunction(this.markdownMediaSrc)?this.markdownMediaSrc:_.isString(this.markdownMediaSrc)?Ti.Util.genInvoking(this.markdownMediaSrc,{partialRight:!0}):void 0},ThePreviewMediaSrc(){return _.isFunction(this.previewMediaSrc)?this.previewMediaSrc:_.isString(this.previewMediaSrc)?Ti.Util.genInvoking(this.previewMediaSrc,{partialRight:!0}):void 0}},methods:{OnToolbarChange({name:t,value:e}={}){const i={bold(t,e){t.format("bold",e)},italic(t,e){t.format("italic",e)},code(t,e){t.format("code",e)},header(t,e){t.format("header",e)},blockquote(t,e){t.format("blockquote",e)},code_block(t,e){t.format("code-block",e)},async link(t,e){let i=t.getSelection();if(!i)return await Ti.Toast.Open("i18n:wordp-nil-sel","warn");if(e){if(!(i.length>0))return await Ti.Toast.Open("i18n:wordp-nil-sel","warn");{let e=await Ti.Prompt("i18n:wordp-link");if(!Ti.Util.isNil(e))t.format("link",e)}}else t.format("link",!1)},indent(t){t.format("indent","+1")},outdent(t){t.format("indent","-1")},list(t,e="bullet"){t.format("list",e)}}[t];_.isFunction(i)&&(i(this.$editor,e),this.quillUpdateFormat())},async renderMarkdown(){if(console.log("!!!!!!!!!!!!!!!!!!!!!! renderMarkdown"),Ti.Util.isBlank(this.value))this.myMeta={},this.$editor.setContents([]);else{let t=Cheap.parseMarkdown(this.value);console.log(t.toString()),window.MdDoc=t,this.myMeta=_.cloneDeep(t.getMeta());let e=await t.toDelta({mediaSrc:this.ThePreviewMediaSrc});console.log(JSON.stringify(e,null,"   ")),this.$editor.setContents(e)}},syncMarkdown(){if(this.syncForbid>0)return console.log("!forbid! syncMarkdown",this.syncForbid),void this.syncForbid--;this.renderMarkdown()},async quillChanged(t){if(this.isNilContent)return;let e=Cheap.parseDelta(t);e.setDefaultMeta(this.myMeta),this.myMeta=e.getMeta();let i=await e.toMarkdown({mediaSrc:this.TheMarkdownMediaSrc});i!=this.value&&(this.syncForbid=1,this.$notify("change",i))},quillSelectionChanged(t){if(t){let e=[t.index];t.length>0&&e.push(t.length),this.$notify("indicate",e.join(":")),this.quillUpdateFormat(t)}},quillUpdateFormat(t){let e=this.$editor.getFormat(t);e.header?e[`h${e.header}`]=!0:e.h0=!0,_.isEqual(this.myToolbarStatus,e)||(this.myToolbarStatus=e)},installQuillEditor(){this.$editor||(!function(t){if(t.__has_been_reset)return;const e=t.import("formats/indent");e.keyName="li-indent",e.whitelist=[1,2,3,4,5,6],t.__has_been_reset=!0}(Quill),this.$editor=new Quill(this.$refs.stage,{modules:{syntax:!1},bounds:this.$refs.stage,placeholder:Ti.I18n.text(this.placeholder)}),this.debounceQuillChanged=_.debounce((t,e)=>{let i=e.compose(t);this.quillChanged(i)},1e3),this.$editor.on("text-change",(t,e,i)=>{this.isNilContent||this.debounceQuillChanged(t,e)}),this.$editor.on("selection-change",(t,e,i)=>{this.quillSelectionChanged(t)}))}},watch:{value:{handler:"syncMarkdown"},isNilContent:function(t,e){t&&(this.syncForbid=0)}},mounted(){this.syncForbid=0,this.installQuillEditor(),this.syncMarkdown()},beforeDestroy(){this.syncForbid=0}};Ti.Preload("ti/com/ti/text/markdown/richeditor/ti-markdown-richeditor.mjs",e)}(),Ti.Preload("ti/com/ti/text/markdown/richeditor/_com.json",{name:"ti-text-markdown-richeditor",globally:!0,i18n:"@i18n:ti-text-editor",css:"@deps:highlight/default.css",template:"./ti-markdown-richeditor.html",props:"./ti-markdown-richeditor-props.mjs",methods:"./ti-markdown-richeditor-delegate-methods.mjs",mixins:["./ti-markdown-richeditor.mjs"],components:["@com:wn/adaptlist"],deps:["@deps:quill/quill.js","@deps:highlight/highlight.js"]}),Ti.Preload("ti/com/ti/text/raw/ti-text-raw.html",'<div class="ti-text-raw"\n  :class="TopClass"\n  v-ti-activable>\n  \x3c!--\n    Header\n  --\x3e\n  <div\n    v-if="isShowHead"\n      class="as-head">\n      <ti-icon :value="icon"/>\n      <span>{{title}}</span>\n  </div>\n  \x3c!--\n    Main\n  --\x3e\n  <div class="as-main">\n    <textarea ref="text" \n      spellcheck="false"\n      :placeholder="placeholder | i18n"\n      :value="myContent"\n      @compositionstart="OnInputCompositionStart"\n      @compositionend="OnInputCompositionEnd"\n      @input="OnInputing"\n      @change="OnTextChanged"></textarea>\n  </div>\n</div>'),function(){const t={data:()=>({myContent:null,inputCompositionstart:!1}),props:{icon:{type:[String,Object],default:void 0},title:{type:String,default:void 0},trimed:{type:Boolean,default:!1},value:{type:String,default:""},placeholder:{type:String,default:"i18n:blank"},status:{type:Object,default:()=>({})}},computed:{TopClass(){return this.getTopClass({"show-title":this.showTitle,"hide-title":!this.showTitle,"is-changed":_.get(this.status,"changed")})},isShowHead(){return this.title||this.icon},hasContent(){return!Ti.Util.isNil(this.value)}},methods:{OnInputCompositionStart(){this.inputCompositionstart=!0},OnInputCompositionEnd(){this.inputCompositionstart=!1,this.OnTextChanged()},OnInputing(t){this.inputCompositionstart||this.OnTextChanged()},OnTextChanged(){let t=_.get(this.$refs.text,"value");this.trimed&&(t=_.trim(t)),this.myContent=t},syncMyContent(){this.myContent=this.value},checkMyContent(){this.myContent!=this.value&&this.$notify("change",this.myContent)},__ti_shortcut(t){if("CTRL+ENTER"==t)return this.myContent!=this.value&&this.$notify("change",this.myContent),{prevent:!0}}},watch:{value:"syncMyContent",myContent:function(){this.debCheckChange()}},created:function(){this.debCheckChange=_.debounce(()=>{this.checkMyContent()},500)},mounted:function(){this.syncMyContent()}};Ti.Preload("ti/com/ti/text/raw/ti-text-raw.mjs",t)}(),Ti.Preload("ti/com/ti/text/raw/_com.json",{name:"ti-text-raw",globally:!0,template:"./ti-text-raw.html",mixins:["./ti-text-raw.mjs"]}),Ti.Preload("ti/com/ti/time/ti-time.html",'<div class="ti-col-data as-time" \n  :class="topClass" \n  :style="topStyle">\n  <ti-list v-for="list in theListGroup"\n    :key="list.key"\n    :data="list.data"\n    :display="\'text\'"\n    :current-id="list.currentId"\n    :cancelable="false"\n    @select="onListSelected(list.key, $event)"/>\n</div>'),function(){const t={inheritAttrs:!1,props:{value:{type:[String,Number,Date,Ti.Types.Time],default:null},valueUnit:{type:String,default:"s",validator:function(t){return/^(ms|s|min|hr)$/.test(t)}},mode:{type:String,default:"auto",validator:function(t){return/^(sec|min|auto)$/.test(t)}},width:{type:[Number,String],default:null},height:{type:[Number,String],default:200}},computed:{topClass(){return this.getTopClass()},topStyle(){return Ti.Css.toStyle({width:this.width,height:this.height})},theTime(){return Ti.Types.toTime(this.value||0,{unit:this.valueUnit})},theListGroup(){let t=[this.createList("hours",0,24,this.theTime.hours),this.createList("minutes",0,60,this.theTime.minutes)];return/^(auto|sec)$/.test(this.mode)&&t.push(this.createList("seconds",0,60,this.theTime.seconds)),t}},methods:{createList(t,e,i,n=0){let a={key:t,currentId:`R-${n}`,data:[]};for(let t=e;t<i;t++)a.data.push({id:`R-${t}`,value:t,text:_.padStart(t,2,"0")});return a},onListSelected(t,{current:e}={}){let i=this.theTime.clone();i[t]=_.get(e,"value")||0,this.$notify("change",i)}}};Ti.Preload("ti/com/ti/time/ti-time.mjs",t)}(),Ti.Preload("ti/com/ti/time/_com.json",{name:"ti-time",globally:!0,template:"./ti-time.html",mixins:["./ti-time.mjs"],components:["@com:ti/list"]}),Ti.Preload("ti/com/ti/toggle/ti-toggle.html",'<div class="ti-toggle"\n  :class="topClass">\n  <aside @click.left="onClick"><b></b></aside>\n</div>'),function(){const t={data:()=>({isOn:!1}),props:{value:!1,readonly:!1,options:{type:Array,default:()=>[!1,!0]}},computed:{topClass(){return Ti.Css.mergeClassName({"is-off":!this.isOn,"is-on":this.isOn},this.className)}},methods:{onClick(){if(!this.readonly){let t=this.isOn?0:1;this.$notify("change",this.options[t])}}},watch:{value:function(){this.isOn=!!this.value}},mounted:function(){this.isOn=!!this.value}};Ti.Preload("ti/com/ti/toggle/ti-toggle.mjs",t)}(),Ti.Preload("ti/com/ti/toggle/_com.json",{name:"ti-toggle",globally:!0,template:"./ti-toggle.html",mixins:["./ti-toggle.mjs"]}),function(){const t={options:{type:[String,Array,Function,Ti.Dict],default:()=>[]},valueBy:{type:[String,Function],default:void 0},textBy:{type:[String,Function],default:void 0},iconeBy:{type:[String,Function],default:void 0},value:void 0,canComType:{type:String,default:void 0},canComConf:{type:Object,default:void 0},selComType:{type:String,default:void 0},selComConf:{type:Object,default:void 0},filter:{type:Boolean,default:!0},fltComType:{type:String,default:"ti-input"},fltComConf:{type:Object,default:void 0},display:{type:[Object,String,Array],default:void 0},assignButtons:{type:Object,default:()=>({add:"fas-angle-double-right",remove:"fas-angle-double-left"})},canTitle:{type:String,default:"i18n:candidate"},selTitle:{type:String,default:"i18n:checked"},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null}};Ti.Preload("ti/com/ti/transfer/ti-transfer-props.mjs",t)}(),Ti.Preload("ti/com/ti/transfer/ti-transfer.html",'<div class="ti-transfer"\n  :class="TopClass"\n  :style="TopStyle">\n  \x3c!--=========================================\n    Left: Candidates\n  --\x3e\n  <div class="as-box as-can-list">\n    \x3c!--\n      Head\n    --\x3e\n    <div class="as-box-head">\n      <div class="as-list-checker"\n        @click.left="OnClickHeadChecker(can)">\n        <ti-icon :value="GetHeadCheckerIcon(can)"/>\n      </div>\n      \x3c!--Title--\x3e\n      <div class="as-title">{{canTitle|i18n}}</div>\n      \x3c!--Filter--\x3e\n      <div v-if="filter"\n        class="as-filter">\n          <component \n            :is="fltComType"\n            v-bind="FilterComConf"\n            :value="myFilterValue"\n            @change="OnFilterChanged"\n            /></div>\n    </div>\n    \x3c!--\n      component\n    --\x3e\n    <component :is="CanListComType"\n      class="as-box-main ti-fill-parent"\n      v-bind="CanListComConf"\n      @select="OnCanListSelected"/>\n    \x3c!--\n      Foot\n    --\x3e\n    <div class="as-box-foot">\n      <span>{{\'total-count\'|i18n({nb:can.data.length})}}</span>\n    </div>\n  </div>\n  \x3c!--=========================================\n    Buttons\n  --\x3e\n  <div class="as-buttons">\n    \x3c!--Add--\x3e\n    <div class="as-btn is-add"\n      @click.left="canListToSel">\n      <ti-icon :value="assignButtons.add"/>\n    </div>\n    \x3c!--Remove--\x3e\n    <div class="as-btn is-remove"\n      @click.left="selListToCan">\n      <ti-icon :value="assignButtons.remove"/>\n    </div>\n  </div>\n  \x3c!--=========================================\n    Right: Checked\n  --\x3e\n  <div class="as-box as-sel-list">\n    \x3c!--\n      Head\n    --\x3e\n    <div class="as-box-head">\n      <div class="as-list-checker"\n        @click.left="OnClickHeadChecker(sel)">\n        <ti-icon :value="GetHeadCheckerIcon(sel)"/>\n      </div>\n      <div class="as-title">{{selTitle|i18n}}</div>\n    </div>\n    \x3c!--\n      component\n    --\x3e\n    <component :is="SelListComType"\n      class="as-box-main ti-fill-parent"\n      v-bind="SelListComConf"\n      @select="OnSelListSelected"/>\n    \x3c!--\n      Foot\n    --\x3e\n    <div class="as-box-foot">\n      <span>{{\'total-count\'|i18n({nb:sel.data.length})}}</span>\n    </div>\n  </div>\n</div>'),function(){const t={inheritAttrs:!1,data:()=>({myFilterValue:null,myOptionsData:[],can:{data:[],checkedIds:[]},sel:{data:[],checkedIds:[]},selIdMap:{}}),computed:{TopClass(){return this.getTopClass()},TopStyle(){return Ti.Css.toStyle({width:this.width,height:this.height})},Values(){return Ti.S.toArray(this.value)},CanListComType(){return this.canComType||"ti-list"},SelListComType(){return this.selComType||"ti-list"},CanListComConf(){return this.genComConf(this.canComConf,this.can)},SelListComConf(){return this.genComConf(this.selComConf,this.sel)},FilterComConf(){return _.assign({trimed:!0,width:"100%",prefixIcon:"zmdi-filter-list",placeholder:"i18n:filter",hover:["prefixIcon","suffixText","suffixIcon"]},this.fltComConf)},GetValueBy(){return t=>this.Dict.getValue(t)},Dict(){if(this.options instanceof Ti.Dict)return this.options;if(_.isString(this.options)){let t=Ti.DictFactory.DictReferName(this.options);if(t)return Ti.DictFactory.CheckDict(t,({loading:t})=>{this.loading=t})}return Ti.DictFactory.CreateDict({data:this.options,getValue:Ti.Util.genGetter(this.valueBy||"value"),getText:Ti.Util.genGetter(this.textBy||"text|name"),getIcon:Ti.Util.genGetter(this.textBy||"icon")})}},methods:{OnCanListSelected({checkedIds:t}){this.can.checkedIds=this.getIds(t)},OnSelListSelected({checkedIds:t}){this.sel.checkedIds=this.getIds(t)},OnClickHeadChecker(t){let{data:e,checkedIds:i}=t;if(e.length==i.length)t.checkedIds=[];else{let i=this.rebuildIdMap(e);t.checkedIds=this.getIds(i)}},async OnFilterChanged(t){this.myFilterValue=t,this.myOptionsData=await this.Dict.queryData(t),this.evalShownCanList()},GetHeadCheckerIcon({data:t,checkedIds:e}){if(t.length>0){if(t.length==e.length)return"fas-check-square";if(e.length>0)return"fas-minus-square"}return"far-square"},canListToSel(){if(_.isEmpty(this.can.checkedIds))return;let{src:t,tag:e}=this.assignToList(this.can,this.sel);this.can=t,this.sel=e},selListToCan(){if(_.isEmpty(this.sel.checkedIds))return;let{src:t,tag:e}=this.assignToList(this.sel,this.can);this.can=e,this.sel=t},assignToList({data:t,checkedIds:e},i){let n={};_.forEach(e,t=>n[t]=!0);let a=[],s=[];return _.forEach(t,t=>{let e=this.Dict.getValue(t);n[e]?s.push(t):a.push(t)}),_.forEach(i.checkedIds,t=>n[t]=!0),{src:{data:a,checkedIds:[]},tag:{data:_.concat(i.data,s),checkedIds:_.keys(n)}}},genComConf(t,{data:e,checkedIds:i}){return _.assign({idBy:this.GetValueBy,display:this.display||"text"},t,{data:e,checkedIds:i,multi:!0,checkable:!0,puppetMode:!0,autoCheckCurrent:!1})},evalShownCanList(){let t=[];_.forEach(this.myOptionsData,e=>{let i=this.Dict.getValue(e);this.selIdMap[i]||t.push(e)}),this.can.data=t,this.can.checkedIds=[]},async reloadCanList(){this.myOptionsData=await this.Dict.queryData(this.myFilterValue),this.evalShownCanList()},async reloadSelList(t=this.Values){let e=[];for(let i of t){let t=await this.Dict.getItem(i);t?e.push(t):e.push(i)}this.sel={data:e,checkedIds:[]}},rebuildIdMap(t){let e={};return _.forEach(t,t=>{let i=this.Dict.getValue(t);e[i]=!0}),e},rebuildSelIdMap(){this.selIdMap=this.rebuildIdMap(this.sel.data)},getIds(t){let e=[];return _.forEach(t,(t,i)=>{t&&e.push(i)}),e}},watch:{value:function(t,e){_.isEqual(t,e)||this.reloadSelList()},options:function(t,e){_.isEqual(t,e)||this.reloadCanList()},"sel.data":function(){this.rebuildSelIdMap();let t=_.keys(this.selIdMap);_.isEqual(t,this.Values)||this.$notify("change",t)}},mounted:async function(){await this.reloadSelList(),await this.reloadCanList()}};Ti.Preload("ti/com/ti/transfer/ti-transfer.mjs",t)}(),Ti.Preload("ti/com/ti/transfer/_com.json",{name:"ti-transfer",globally:!0,template:"./ti-transfer.html",props:"./ti-transfer-props.mjs",mixins:["./ti-transfer.mjs"]}),Ti.Preload("ti/com/ti/tree/ti-tree.html",'<ti-table\n  class="ti-tree"\n  :class="TopClass"\n  id-by="id"\n  icon-by="icon"\n  indent-by="indent"\n  raw-data-by="rawData"\n  :fields="TableFields"\n  :data="myTreeTableData"\n  :changed-id="changedId"\n  :current-id="currentId"\n  :checked-ids="checkedIds"\n  :multi="multi"\n  :checkable="checkable"\n  :selectable="selectable"\n  :cancelable="cancelable"\n  :hoverable="hoverable"\n  :puppet-mode="puppetMode"\n  :width="width"\n  :height="height"\n  :head="TableHead"\n  :border="border"\n  :blank-as="blankAs"\n  :auto-scroll-into-view="autoScrollIntoView"\n  @icon="OnRowIconClick"\n  @open="OnRowOpen"\n  @select="OnRowSelect"\n  @cell:item:change="OnCellItemChange"/>\n  '),function(){const t={data:()=>({myTreeTableData:[],myOpenedNodePaths:{},myCurrentId:null}),props:{nodeClassName:{type:String,default:null},data:{type:[Object,Array],default:null},idBy:{type:[String,Function],default:"id"},nameBy:{type:[String,Function],default:"name"},childrenBy:{type:[String,Function],default:"children"},leafBy:{type:[String,Function],default:"!children"},title:{type:String,default:"i18n:title"},mainWidth:{type:[String,Number],default:"stretch"},display:{type:[String,Object,Array],default:"name"},defaultOpenDepth:{type:Number,default:0},keepOpenBy:{type:String,default:null},keepCurrentBy:{type:String,default:null},changedId:{type:String,default:null},currentId:{type:String,default:null},checkedIds:{type:Array,default:()=>[]},openedNodePaths:{type:Object,default:()=>({})},multi:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},selectable:{type:Boolean,default:!0},cancelable:{type:Boolean,default:!0},hoverable:{type:Boolean,default:!1},width:{type:[String,Number],default:null},puppetMode:{type:Boolean,default:!1},height:{type:[String,Number],default:null},autoScrollIntoView:{type:Boolean,default:!0},autoOpen:{type:Boolean,default:!1},showRoot:{type:Boolean,default:!0},nodeHandleIcons:{type:Array,default:()=>["zmdi-chevron-right","zmdi-chevron-down"]},border:{type:String,default:"column",validator:t=>/^(row|column|cell|none)$/.test(t)},fields:{type:Array,default:()=>[]},blankAs:void 0},watch:{},computed:{TopClass(){return Ti.Css.mergeClassName({"is-selectable":this.selectable,"is-hoverable":this.hoverable},this.className)},getNodeId(){return _.isFunction(this.idBy)?t=>this.idBy(t):t=>_.get(t,this.idBy)},getNodeName(){return _.isFunction(this.nameBy)?t=>this.nameBy(t):t=>_.get(t,this.nameBy)},isNodeLeaf(){if(_.isFunction(this.leafBy))return t=>!!this.leafBy(t);let t=/^(!)?(.+)$/.exec(this.leafBy),e=!!t[1],i=_.trim(t[2]);return t=>_.get(t,i)?!e:e},getNodeChildren(){return _.isFunction(this.childrenBy)?t=>this.childrenBy(t):t=>_.get(t,this.childrenBy)},isTable(){return _.isArray(this.fields)&&!_.isEmpty(this.fields)},TableHead(){return this.isTable?"frozen":"none"},TableFields(){let t={title:this.title,width:this.mainWidth,nowrap:!0,display:this.display};return this.isTable?_.concat(t,this.fields):[t]}},methods:{async evalTreeTableData(){let t=[];_.isArray(this.data)?await this.joinTreeTableRow(t,{},null,this.data):this.data&&await this.joinTreeTableRow(t,this.data,null),this.myTreeTableData=t},async joinTreeTableRow(t=[],e={},i=[],n){let a={};if(i?(a.name=this.getNodeName(e),a.path=_.concat(i,a.name),a.pathId=a.path.join("/"),a.id=Ti.Util.fallbackNil(this.getNodeId(e),a.pathId),a.indent=a.path.length,a.leaf=this.isNodeLeaf(e),a.opened=Ti.Util.fallback(this.myOpenedNodePaths[a.pathId],a.indent<this.defaultOpenDepth),a.icon=!!a.leaf||this.nodeHandleIcons[a.opened?1:0]):(a.name=this.getNodeName(e)||"$ROOT$",a.path=[],a.pathId="/",a.id=Ti.Util.fallbackNil(this.getNodeId(e),a.pathId),a.indent=0,a.leaf=!1,a.opened=!this.showRoot||Ti.Util.fallback(this.myOpenedNodePaths[a.pathId],a.indent<this.defaultOpenDepth),a.icon=!!a.leaf||this.nodeHandleIcons[a.opened?1:0]),a.rawData=e,this.showRoot?t.push(a):(a.indent--,a.indent>=0&&t.push(a)),a.opened&&!a.leaf&&(n||(n=await this.getNodeChildren(e)),_.isArray(n)))for(let e of n)await this.joinTreeTableRow(t,e,a.path)},findTableRow(t){if(!Ti.Util.isNil(t))for(let e of this.myTreeTableData)if(e.id==t)return e},OnCellItemChange({name:t,value:e,rowId:i}={}){let n=this.findTableRow(i);n&&this.$notify("node:item:change",{name:t,value:e,node:n,nodeId:i,data:n.rawData})},OnRowSelect({currentId:t,checkedIds:e={}}={}){let i,n,a=[];if(t){let s;for(let n of this.myTreeTableData)n.id==t&&(s=n,i=n.rawData),e[n.id]&&a.push(n.rawData);s&&this.autoOpen&&this.openRow(s),this.myCurrentId=_.get(s,"id"),n=s}else this.myCurrentId=null;this.keepCurrentBy&&(this.puppetMode||Ti.Storage.session.set(this.keepCurrentBy,this.myCurrentId)),this.$notify("select",{node:n,current:i,selected:a,currentId:t,checkedIds:e})},OnRowIconClick({rowId:t}={}){let e=this.findTableRow(t);!e||e.leaf||e.opened?this.closeRow(e):this.openRow(e)},OnRowOpen({id:t}={}){let e=this.findTableRow(t);!e||e.leaf||e.opened||this.openRow(e)},openRow(t){let e=_.isString(t)?this.findTableRow(t):t;!e||e.leaf||e.opened||(this.$set(this.myOpenedNodePaths,e.pathId,!0),this.$notify("opened",e),this.saveNodeOpenStatus())},isOpened(t){let e=_.isString(t)?this.findTableRow(t):t;return!!e&&e.opened},closeRow(t){let e=_.isString(t)?this.findTableRow(t):t;e&&!e.leaf&&e.opened&&(this.$set(this.myOpenedNodePaths,e.pathId,!1),this.$notify("closed",e),this.saveNodeOpenStatus())},saveNodeOpenStatus(){this.keepOpenBy&&Ti.Storage.session.setObject(this.keepOpenBy,this.myOpenedNodePaths),this.$notify("opened-status:changed",this.myOpenedNodePaths)},syncOpenedNodePaths(){this.myOpenedNodePaths=_.assign({},this.openedNodePaths)},__ti_shortcut(t){"ARROWLEFT"==t&&this.closeRow(this.myCurrentId),"ARROWRIGHT"==t&&this.openRow(this.myCurrentId)}},watch:{data:async function(t,e){_.isEqual(t,e)||await this.evalTreeTableData()},openedNodePaths:function(t,e){_.isEqual(t,e)||this.syncOpenedNodePaths()}},mounted:async function(){if(this.syncOpenedNodePaths(),this.keepOpenBy&&(this.myOpenedNodePaths=Ti.Storage.session.getObject(this.keepOpenBy),this.puppetMode||this.$notify("opened-status:changed",this.myOpenedNodePaths)),await this.evalTreeTableData(),this.$watch("myOpenedNodePaths",()=>{this.evalTreeTableData()},{deep:!0}),this.keepCurrentBy){let t=Ti.Storage.session.get(this.keepCurrentBy);Ti.Util.isNil(t)||this.$nextTick(()=>{this.$children[0].selectRow(t)})}},beforeDestroy:function(){}};Ti.Preload("ti/com/ti/tree/ti-tree.mjs",t)}(),Ti.Preload("ti/com/ti/tree/_com.json",{name:"ti-tree",globally:!0,template:"./ti-tree.html",mixins:["./ti-tree.mjs"],components:["@com:ti/table"]}),Ti.Preload("ti/com/ti/upload/file/ti-upload-file.html",'<div class="ti-upload-file"\n  :class="TopClass">\n  \x3c!--\n    Hidden input file to choose files\n  --\x3e\n  <input \n    type="file" \n    ref="file" \n    class="ti-hide"\n    @change.stop.seft="OnSelectLocalFilesToUpload">\n  \x3c!--\n    Major preview zone\n  --\x3e\n  <div ref="thumb"\n    class="thumb-con"\n    :style="ThumbStyle"\n    @click="OnClickToEdit"\n    v-drop-files.mask="OnDropFiles">\n    \x3c!--\n      Preview\n    --\x3e\n    <ti-obj-thumb \n      :preview="PreviewIcon"\n      :progress="progress"\n      :show-footer="false"/>\n    \x3c!--\n      Remove\n    --\x3e\n    <div ref="actions"\n      v-if="isShowRemoveIcon"\n        class="thumb-actions"\n        :style="ActionsStyle">\n        \x3c!--remove--\x3e\n        <div class="thumb-opt as-del"\n          @click.left.stop="OnRemove">\n          <ti-icon value="zmdi-delete"/>\n          <span class="it-text">{{\'clear\'|i18n}}</span>\n        </div>\n        \x3c!--open--\x3e\n        <div class="thumb-opt as-open"\n          @click.left.stop="OnOpen">\n          <ti-icon value="zmdi-open-in-new"/>\n          <span class="it-text">{{\'open\'|i18n}}</span>\n        </div>\n    </div>\n    \x3c!--//////--\x3e\n  </div>\n</div>'),function(){const t={data:()=>({myArea:0,myActionsWidth:0}),props:{preview:{type:[String,Object],default:null},uploadFile:{type:File,default:null},progress:{type:Number,default:-1},width:{type:[String,Number],default:120},height:{type:[String,Number],default:120},removable:{type:Boolean,default:!0},areaSize:{type:Object,default:()=>({xs:1e4,sm:4e4,md:16e4,lg:36e4})}},computed:{TopClass(){return this.getTopClass(`is-area-${this.AreaType}`)},AreaType(){let t=this.areaSize,e=this.myArea;return e<=0?"nil":_.inRange(e,0,t.xs+1)?"xs":_.inRange(e,t.xs,t.sm+1)?"sm":_.inRange(e,t.sm,t.md+1)?"md":_.inRange(e,t.md,t.lg+1)?"lg":"xl"},ThumbStyle(){return Ti.Css.toStyle({width:this.width,height:this.height})},ActionsStyle(){if(/^(xs|sm)$/.test(this.AreaType))return{right:Ti.Css.toSize(-1*this.myActionsWidth)}},hasPreview(){return!!this.preview},isShowRemoveIcon(){return!(this.uploadFile||!this.hasPreview)},PreviewIcon(){return this.uploadFile?{type:"localFile",value:this.uploadFile}:this.preview?this.preview:"zmdi-plus"}},methods:{OnClickToEdit(){this.$refs.file.click()},async OnDropFiles(t){let e=_.get(t,0);e&&this.$notify("upload",e)},async OnSelectLocalFilesToUpload(t){await this.OnDropFiles(t.target.files),this.$refs.file.value=""},OnRemove(){this.$notify("remove")},OnOpen(){this.$notify("open")},recountArea(){let t=Ti.Rects.createBy(this.$refs.thumb);this.myArea=t.width*t.height,this.$refs.actions?this.myActionsWidth=this.$refs.actions.getBoundingClientRect().width:this.myActionsWidth=0}},watch:{preview:function(){this.$nextTick(()=>this.recountArea())}},mounted:function(){this.$nextTick(()=>this.recountArea())}};Ti.Preload("ti/com/ti/upload/file/ti-upload-file.mjs",t)}(),Ti.Preload("ti/com/ti/upload/file/_com.json",{name:"ti-upload-file",globally:!0,template:"./ti-upload-file.html",mixins:["./ti-upload-file.mjs"]}),Ti.Preload("ti/com/ti/wall/com/wall-tile/wall-tile.html",'<div class="wall-tile"\n  :class="TopClass"\n  :style="TopStyle">\n  <div v-if="myCom"\n    class="tile-con"\n    @click.left="OnClickRow"\n    @dblclick.left="OnDblClickRow"\n    v-ti-activable>\n    <component   \n      :is="myCom.comType" \n      v-bind="myCom.comConf"/>\n  </div>\n</div>'),function(){const t={inject:["$wall"],data:()=>({myCom:null}),props:{display:{type:Object,default:null},width:{type:[String,Number],default:null},height:{type:[String,Number],default:null}},computed:{TopClass(){return this.getListItemClass()},TopStyle(){let t={};return this.width&&(t.width=this.width),this.height&&(t.height=this.height),Ti.Css.toStyle(t)}},methods:{async evalMyDisplayCom(){this.$wall.reportReady(this.index,!Ti.Util.isNil(this.myCom));let t=await this.evalDataForFieldDisplayItem({itemData:this.data,displayItem:this.display,vars:{isCurrent:this.isCurrent,isChecked:this.isChecked,isChanged:this.isChanged,isActived:this.isActived,rowId:this.rowId,...this.$vars}}),e=Ti.Util.pureCloneDeep(this.myCom),i=Ti.Util.pureCloneDeep(t);_.isEqual(e,i)||(this.myCom=t),this.$wall.reportReady(this.index,!0)}},watch:{data:{handler:"evalMyDisplayCom",immediate:!0},isCurrent:"evalMyDisplayCom",isChecked:"evalMyDisplayCom"}};Ti.Preload("ti/com/ti/wall/com/wall-tile/wall-tile.mjs",t)}(),Ti.Preload("ti/com/ti/wall/com/wall-tile/_com.json",{name:"wall-tile",globally:!1,template:"./wall-tile.html",methods:"@com:ti/support/field_display.mjs",mixins:["@com:ti/support/list_item_mixins.mjs","./wall-tile.mjs"]}),Ti.Preload("ti/com/ti/wall/ti-wall.html",'<div class="ti-wall" \n  :class="TopClass"\n  @click="OnClickTop"\n  v-ti-activable>\n  \x3c!--\n    Blank\n  --\x3e\n  <ti-loading \n    v-if="isDataEmpty"\n      class="nil-data"\n      :class="\'as-\'+blankClass"\n      v-bind="blankAs"/>\n  \x3c!--\n    Show tiles\n  --\x3e\n  <template v-else>\n    \x3c!--tiles--\x3e\n    <wall-tile\n      v-for="row in TheData"\n        :key="row.id"\n        :row-id="row.id"\n        :index="row.index"\n        :display="ItemDisplay"\n        :data="row.rawData"\n        :current-id="theCurrentId"\n        :checked-ids="theCheckedIds"\n        :changed-id="changedId"\n        :checkable="checkable"\n        :selectable="selectable"\n        :openable="openable"\n        :class-name="itemClassName"\n        :width="itemWidth"\n        :height="itemHeight"\n        @select="OnRowSelect"\n        @open="OnRowOpen"/>\n    \x3c!--Blank Tile--\x3e\n    <div v-for="bc in BlankCols"\n      class="wall-tile"\n      :style="bc">\n    </div>\n  </template>\n</div>'),function(){const t={provide:function(){return{$wall:this}},data:()=>({myData:[],myColCount:0,myColWidth:0,isOnlyOneRow:!1,myCellsReport:{},myNeedResize:!0}),props:{itemClassName:void 0,display:{type:[Object,String],default:()=>({key:"..",comType:"ti-label"})},border:{type:Boolean,default:!0},spacing:{type:String,default:"sm"},itemWidth:{type:[String,Number],default:null},itemHeight:{type:[String,Number],default:null},resizeDelay:{type:Number,default:0}},computed:{TopClass(){return this.getTopClass({"is-hoverable":this.hoverable,"show-border":this.border,"is-only-one-row":this.isOnlyOneRow,"is-multi-rows":!this.isOnlyOneRow},[`spacing-${this.spacing}`])},ItemDisplay(){return this.evalFieldDisplayItem(this.display)},TheData(){return this.myData},ListRealCount(){return this.TheData.length},BlankCols(){let t=[];if(!_.isEmpty(this.TheData)&&this.myColCount>0&&this.myColWidth>1&&!this.isOnlyOneRow){let e=this.ListRealCount%this.myColCount;if(e>0){let i=this.myColCount-e;for(let e=0;e<i;e++)t.push({width:`${this.myColWidth}px`})}}return t}},methods:{OnClickTop(t){this.cancelable&&Ti.Dom.hasOneClass(t.target,"ti-wall","wall-tile")&&this.cancelRow()},OnWallResize(){let t=Ti.Dom.findAll(":scope > .wall-tile",this.$el);if(_.isEmpty(t))return;let e=0,i=1,n=-1,a=!0;for(let s of t){let t=s.getBoundingClientRect();if(n<0&&(n=t.top),n!=t.top){a=!1;break}e++,i=Math.max(t.width,i)}i>1&&(this.myColCount=e,this.myColWidth=i,this.isOnlyOneRow=a)},reportReady(t=-1,e=!1){let i=`R${t}`;e?delete this.myCellsReport[i]:(this.myCellsReport[i]=!1,this.myNeedResize=!0),e&&_.delay(()=>{_.isEmpty(this.myCellsReport)&&this.myNeedResize&&(_.delay(()=>{this.OnWallResize()},this.resizeDelay),this.myNeedResize=!1)})}},watch:{data:{handler:async function(t,e){_.isEqual(t,e)||(this.myData=await this.evalData())},immediate:!0}},mounted:function(){Ti.Viewport.watch(this,{resize:_.debounce(()=>this.OnWallResize(),20)})},destroyed:function(){Ti.Viewport.unwatch(this)}};Ti.Preload("ti/com/ti/wall/ti-wall.mjs",t)}(),Ti.Preload("ti/com/ti/wall/_com.json",{name:"ti-wall",globally:!0,template:"./ti-wall.html",props:"@com:ti/support/list_props.mjs",methods:"@com:ti/support/field_display.mjs",mixins:["@com:ti/support/list_mixins.mjs","./ti-wall.mjs"],components:["./com/wall-tile","@com:ti/label"]}),Ti.Preload("ti/com/ti/wizard/com/wizard-step/wizard-step.html",'<component \n  class="ti-fill-parent"\n  :is="comType"\n  v-bind="comConf"\n  @change="OnChange"/>'),function(){const t={props:{index:{type:Number,default:-1},stepKey:{type:String,default:null},title:{type:String,default:null},serializer:{type:Function,default:null},comType:{type:String,default:"ti-label"},comConf:{type:Object,default:()=>({})}},methods:{OnChange(t){_.isFunction(this.serializer)&&(t=this.serializer(t)),this.$emit("data:change",t)}},watch:{title:function(){this.$notify("change:title",this.title)}}};Ti.Preload("ti/com/ti/wizard/com/wizard-step/wizard-step.mjs",t)}(),Ti.Preload("ti/com/ti/wizard/com/wizard-step/_com.json",{name:"wizard-step",globally:!0,template:"./wizard-step.html",mixins:["./wizard-step.mjs"]}),Ti.Preload("ti/com/ti/wizard/ti-wizard.html",'<div class="ti-wizard ti-fill-parent"\n  :class="TopClass"><div class="wizard-con">\n  \x3c!--\n    Header Indicators\n  --\x3e\n  <div class="as-head">\n    \x3c!--Title--\x3e\n    <div\n      v-if="TheTitle" \n        class="as-title">{{TheTitle | i18n}}</div>\n    \x3c!--Step indicators--\x3e\n    <ul>\n      <li v-for="(step, index) in StepHeads"\n        :key="step.stepKey"\n        :class="step.className"\n        @click.left="OnClickHeadItem(index, step)">\n        <span class="as-indicator">\n          <span class="as-line at-l"></span>\n          <span class="as-dot">{{index+1}}</span>\n          <span class="as-line at-r"></span>\n        </span>\n        <span class="as-text">{{step.title | i18n}}</span>\n      </li>\n    </ul>\n  </div>\n  \x3c!--\n    Current Step Component\n  --\x3e\n  <div class="as-main">\n    <WizardStep \n      v-bind="CurrentStep"\n      @data:change="OnDataChange"\n      @step:change="OnStepChange"\n      @change:title="OnTitleChange"/>\n  </div>\n  \x3c!--\n    Footer Default Buttons\n  --\x3e\n  <div v-if="BtnPrev || BtnNext"\n    class="as-foot">\n      \x3c!--\n        Btn: Prev\n      --\x3e\n      <div\n        v-if="BtnPrev" \n          class="as-btn is-prev"\n          :class="BtnPrev.className"\n          @click="OnClickBtnPrev">\n          <span v-if="BtnPrev.icon"\n            class="as-icon">\n            <ti-icon :value="BtnPrev.icon"/>\n          </span>\n          <span class="as-sep"></span>\n          <span class="as-text">{{BtnPrev.text|i18n}}</span>\n      </div>\n      \x3c!--Sep--\x3e\n      <div class="as-space"></div>\n      \x3c!--\n        Btn: Next\n      --\x3e\n      <div\n        v-if="BtnNext" \n          class="as-btn is-next"\n          :class="BtnNext.className"\n          @click="OnClickBtnNext">\n          <span v-if="BtnNext.icon"\n            class="as-icon">\n            <ti-icon :value="BtnNext.icon"/>\n          </span>\n          <span class="as-sep"></span>\n          <span class="as-text">{{BtnNext.text|i18n}}</span>\n      </div>\n  </div>\n</div></div>'),function(){const t={data:()=>({myCurrent:void 0,myTitle:void 0}),props:{title:{type:String,default:void 0},steps:{type:Array,default:()=>[]},value:{type:Object,default:()=>({})},current:{type:[Number,String],default:0},canClickHeadItem:{type:String,default:null}},computed:{TopClass(){return this.getTopClass()},StepList(){let t=[];if(_.isArray(this.steps))for(let e=0;e<this.steps.length;e++){let i=this.steps[e],n=i.key||`step${e}`;t.push({index:e,stepKey:n,title:i.title||n,comType:i.comType||"ti-label",comConf:i.comConf,serializer:i.serializer,prev:i.prev,next:i.next})}return t},StepHeads(){let t=[];if(_.isArray(this.steps))for(let e of this.StepList){let i=[];this.CurrentStepIndex==e.index?i.push("is-current"):e.index>this.CurrentStepIndex?i.push("is-future"):i.push("is-passed"),t.push(_.assign({},e,{className:i}))}return t},CurrentStepIndex(){return this.CurrentStep?this.CurrentStep.index:-1},hasCurrentStep(){return!!this.CurrentStep},TheTitle(){return this.myTitle||this.title},CurrentStep(){let t=Ti.Util.fallback(this.myCurrent,this.current),e=_.cloneDeep(this.getStep(t)),i=e.serializer?Ti.Util.genInvoking(e.serializer,{context:this.value,partialRight:!0}):_.identity,n=Ti.Util.explainObj(this.value,e.comConf);return _.assign({},e,{serializer:i,comConf:n})},BtnPrev(){let t=_.get(this.CurrentStep,"prev");return this.getStepAction(t,{icon:"zmdi-chevron-left",text:"i18n:prev",enabled:!0})},BtnNext(){let t=_.get(this.CurrentStep,"next");return this.getStepAction(t,{icon:"zmdi-chevron-right",text:"i18n:next",enabled:!0,reverse:!_.get(t,"icon")})}},methods:{OnTitleChange(t){this.myTitle=t},OnDataChange(t){let e=_.assign({},this.value,t);this.$notify("change",e)},OnStepChange(t){"@prev"==t?this.gotoFromCurrent(-1):"@next"==t?this.gotoFromCurrent(1):this.gotoStep(t)},OnClickHeadItem(t){"passed"==this.canClickHeadItem&&this.CurrentStepIndex>t&&this.gotoStep(t)},OnClickBtnPrev(){if(this.BtnPrev&&this.BtnPrev.enabled)if(this.BtnPrev.handler){Ti.Util.genInvoking(this.BtnPrev.handler,{context:this.value}).apply(this)}else this.gotoFromCurrent(-1)},OnClickBtnNext(){if(this.BtnNext&&this.BtnNext.enabled)if(this.BtnNext.handler){Ti.Util.genInvoking(this.BtnNext.handler,{context:this.value}).apply(this)}else this.gotoFromCurrent(1)},getStep(t){if(_.isNumber(t)){let e=Ti.Num.scrollIndex(t,this.StepList.length);if(e>=0)return this.StepList[e]}else for(let e of this.StepList)if(e.stepKey==t)return e},gotoStep(t){let e=this.getStep(t);if(e){let t=_.cloneDeep(this.CurrentStep);this.myCurrent=e.index,this.$notify("step:chanage",{index:e.index,step:e,oldStep:t})}},gotoFromCurrent(t=1){if(this.CurrentStep){let e=this.CurrentStep.index+t;this.gotoStep(e)}},getStepAction(t,e={}){if(t){let i;return _.isBoolean(t)?i={}:_.isString(t)?i={text:t||dftText}:(i=_.assign({},t),_.isPlainObject(i.enabled)?i.enabled=Ti.Validate.match(this.value,i.enabled):_.isFunction(i.enabled)&&(i.enabled=i.enabled())),_.defaults(i,e),i.className=Ti.Css.mergeClassName(i.className),i.enabled&&(i.className["is-enabled"]=!0),i.reverse&&(i.className["is-reverse"]=!0),i}}}};Ti.Preload("ti/com/ti/wizard/ti-wizard.mjs",t)}(),Ti.Preload("ti/com/ti/wizard/_com.json",{name:"ti-wizard",globally:!0,template:"./ti-wizard.html",mixins:["./ti-wizard.mjs"],components:["./com/wizard-step"]}),Ti.Preload("ti/com/web/auth/captcha/web-auth-captcha.html",'<div \n  class="ti-combo-captcha" \n  :class="topClass">\n \n</div>'),function(){const t={inheritAttrs:!1,props:{value:{type:[String,Object],default:""},text:{type:String,default:null},fontSize:{type:[Number,String],default:null},width:{type:[Number,String],default:null},height:{type:[Number,String],default:null},color:{type:String,default:""},opacity:{type:Number,default:-1}},computed:{topClass(){if(this.className)return this.className},icon(){let t;return _.isPlainObject(this.value)?t=this.value.type&&this.value.value?this.value:Ti.Icons.get(this.value):(t={type:"font",value:this.value},_.isString(this.value)&&(t.type=Ti.Util.getSuffixName(this.value)||"font"),/^(jpe?g|gif|png)$/i.test(t.type)&&(t.type="img")),"font"==t.type&&_.assign(t,Ti.Icons.parseFontIcon(t.value)),t.outerStyle=Ti.Css.toStyle({width:this.width,height:this.height,color:this.color,opacity:this.opacity>=0?this.opacity:void 0}),"img"==t.type?t.innerStyle={width:this.width?"100%":void 0,height:this.height?"100%":void 0}:"font"==t.type&&(t.innerStyle={"font-size":this.fontSize?Ti.Css.toSize(this.fontSize):void 0}),t}}};Ti.Preload("ti/com/web/auth/captcha/web-auth-captcha.mjs",t)}(),Ti.Preload("ti/com/web/auth/captcha/_com.json",{name:"web-auth-captcha",globally:!0,template:"./web-auth-captcha.html",mixins:["./web-auth-captcha.mjs"]}),Ti.Preload("ti/com/web/auth/signup/web-auth-signup.html",'<div \n  class="web-auth-signup web-simple-form" \n  :class="TopClass"\n  v-ti-activable>\n  \x3c!--\n    Top Logo\n  --\x3e\n  <div \n    v-if="logo"\n      class="as-logo">\n      <ti-icon :value="logo"/>\n  </div>\n  \x3c!--\n    Head text\n  --\x3e\n  <header>{{Msgs.title|i18n}}</header>\n  \x3c!--\n    Main Area\n  --\x3e\n  <section>\n    \x3c!--\n      Input: Name\n    --\x3e\n    <div class="as-input" :class="NameClass">\n      <input \n        spellcheck="false"\n        :placeholder="Msgs.nameTip|i18n"\n        v-model="data.name"></div>\n    \x3c!--\n      Input: Password\n    --\x3e\n    <div class="as-input" :class="PasswdClass">\n      <input \n        spellcheck="false"\n        :type="PasswdInputType"\n        :placeholder="Msgs.passwdTip|i18n"\n        v-model="data.passwd">\n      <span v-if="Msgs.codeGet">\n        <em v-if="delay>0">{{\'auth-vcode-delay\'|i18n({sec:delay})}}</em>\n        <a v-else\n          @click="OnGetVcode">{{Msgs.codeGet|i18n}}</a>\n      </span>\n    </div>\n    \x3c!--\n      Submit button\n    --\x3e\n    <div class="as-btn">\n      <button @click="OnAuthSubmit">{{Msgs.btnText|i18n}}</button>\n    </div>\n    \x3c!--\n      Sublinks: switch mode / passwd-back\n    --\x3e\n    <ul \n      v-if="hasToggleMode"\n        class="as-links">\n        <li v-if="Msgs.linkLeft"\n          class="at-left">\n          <a @click="OnChangeMode">{{Msgs.linkLeft   |i18n}}</a></li>\n        <li v-if="Msgs.linkRight"\n          class="at-right">\n          <a>{{Msgs.linkRight |i18n}}</a></li>\n    </ul>\n  </section>\n  \x3c!--\n    Bottom link for oauth2\n  --\x3e\n  <template v-if="hasOAuth2">\n    <div class="as-spacing"></div>\n    <footer>\n      <a\n        v-for="it in OAuth2Items"\n          :href="it.href"\n          :title="it.tip">\n          <ti-icon :value="it.icon"/>\n      </a>\n    </footer>\n  </template>\n</div>'),function(){const t={data:()=>({data:{name:null,passwd:null},guarding:!1,currentMode:"login_by_passwd",invalidField:null,delay:-1}),props:{mode:{type:String,default:"login_by_passwd"},toggleMode:{type:String,default:"login_by_phone"},captcha:{type:String,required:!0,default:null},scenes:{type:Object,default:()=>({robot:"robot",bind_phone:"auth",bind_email:"auth",login_by_email:"auth",login_by_phone:"auth",login_by_passwd:"auth"})},getDelay:{type:Number,default:60},logo:{type:String,default:void 0},oauth2:{type:Array,default:()=>[]}},computed:{TopClass(){return this.getTopClass()},Msgs(){if("login_by_passwd"==this.currentMode)return{title:"i18n:auth-passwd-title",nameTip:"login_by_email"==this.toggleMode?"i18n:auth-passwd-name-email-tip":"i18n:auth-passwd-name-phone-tip",passwdTip:"i18n:auth-passwd-tip",btnText:"i18n:auth-login",linkLeft:"login_by_email"==this.toggleMode?"i18n:auth-go-email":"i18n:auth-go-phone",linkRight:"i18n:auth-passwd-getback",blankName:"i18n:auth-blank-name"};if("login_by_phone"==this.currentMode)return{title:"i18n:auth-phone-title",nameTip:"i18n:auth-phone-tip",passwdTip:"i18n:auth-phone-vcode",codeGet:"i18n:auth-phone-vcode-get",btnText:"i18n:auth-login-or-signup",linkLeft:"i18n:auth-go-passwd",linkRight:"i18n:auth-vcode-lost",blankName:"i18n:auth-blank-phone"};if("login_by_email"==this.currentMode)return{title:"i18n:auth-email-title",nameTip:"i18n:auth-email-tip",passwdTip:"i18n:auth-email-vcode",codeGet:"i18n:auth-email-vcode-get",btnText:"i18n:auth-login-or-signup",linkLeft:"i18n:auth-go-passwd",linkRight:"i18n:auth-vcode-lost",blankName:"i18n:auth-blank-email"};if("bind_phone"==this.currentMode)return{title:"i18n:auth-bind-phone-title",nameTip:"i18n:auth-phone-tip",passwdTip:"i18n:auth-phone-vcode",codeGet:"i18n:auth-phone-vcode-get",btnText:"i18n:auth-bind",linkRight:"i18n:auth-vcode-lost",blankName:"i18n:auth-blank-phone"};if("bind_email"==this.currentMode)return{title:"i18n:auth-bind-email-title",nameTip:"i18n:auth-email-tip",passwdTip:"i18n:auth-email-vcode",codeGet:"i18n:auth-email-vcode-get",btnText:"i18n:auth-bind",linkRight:"i18n:auth-vcode-lost",blankName:"i18n:auth-blank-email"};throw Ti.Err.make("e.com.combo.auth.invalid-mode",this.currentMode)},Params(){return _.mapValues(this.data,t=>_.trim(t))},isBlankName(){return!this.Params.name},isBlankNameOrPasswd(){let{name:t,passwd:e}=this.Params;return!t||!e},Invalid(){return{name:this.isInvalid("name"),passwd:this.isInvalid("passwd")}},NameClass(){if(this.guarding&&(this.Invalid.name||!this.Params.name))return"is-invalid"},PasswdClass(){if(this.guarding&&(this.Invalid.passwd||!this.Params.passwd))return"is-invalid"},PasswdInputType(){return"login_by_passwd"==this.currentMode?"password":"text"},OAuth2Items(){return _.cloneDeep(this.oauth2)},hasOAuth2(){return!_.isEmpty(this.OAuth2Items)},hasToggleMode(){return!_.isEmpty(this.toggleMode)},ToggleModeName(){return{login_by_phone:"i18n:auth-ta-phone",login_by_email:"i18n:auth-ta-email",bind_phone:"i18n:auth-ta-phone",bind_email:"i18n:auth-ta-email"}[this.toggleMode]},vCodeTargetName(){return{login_by_phone:"i18n:auth-ta-phone",login_by_email:"i18n:auth-ta-email",bind_phone:"i18n:auth-ta-phone",bind_email:"i18n:auth-ta-email"}[this.currentMode]},vCodeTargetBy(){return{login_by_phone:"i18n:auth-ta-by-phone",login_by_email:"i18n:auth-ta-by-email",bind_phone:"i18n:auth-ta-by-phone",bind_email:"i18n:auth-ta-by-email"}[this.currentMode]},vCodeScene(){return _.get(this.scenes,this.currentMode)||"auth"}},methods:{OnChangeMode(){"login_by_passwd"==this.currentMode?this.currentMode=this.toggleMode:this.currentMode="login_by_passwd",Ti.Be.BlinkIt(this.$el)},OnAuthSubmit(){if(this.guarding=!0,this.isBlankNameOrPasswd)return Ti.Toast.Open("i18n:auth-blank-name-passwd","warn");let t=Ti.Toast.Open({icon:"fas-spinner fa-spin",content:"i18n:auth-doing",position:"center",duration:0,closer:!1});this.$notify("auth:send",{type:this.currentMode,name:this.Params.name,passwd:this.Params.passwd,done:()=>{t.close(),this.InvalidField=null},ok:()=>{Ti.Toast.Open({type:"success",position:"top",content:"i18n:auth-ok",duration:2e3}),this.$notify("auth:ok")},noexist:()=>{this.InvalidField="name"},invalid:()=>{this.InvalidField="passwd"},others:()=>{this.InvalidField=["name","passwd"]},fail:({errCode:t,data:e}={})=>{"e.auth.captcha.invalid"==t?Ti.Toast.Open({type:"warn",position:"top",content:"i18n:e-www-invalid-captcha",vars:{ta:Ti.I18n.text(this.vCodeTargetName)},duration:5e3}):"e.auth.login.NoSaltedPasswd"==t?Ti.Alert("i18n:auth-login-NoSaltedPasswd",{title:"i18n:e-auth-login-NoSaltedPasswd",icon:"zmdi-shield-security",textOk:"i18n:i-known",vars:{ta:Ti.I18n.text(this.ToggleModeName)}}):Ti.Toast.Open({type:"warn",position:"top",content:`i18n:${t}`,duration:5e3})}})},async OnGetVcode(){if(this.guarding=!0,this.isBlankName)return this.InvalidField="name",void Ti.Toast.Open(this.Msgs.blankName,"warn");this.guarding=!1,this.InvalidField=null,console.log("captcha",this.captcha);let t={scene:this.scenes.robot,account:this.Params.name},e=Ti.S.renderBy(this.captcha,t),i=await Ti.Captcha(e);if(!i)return;let n=Ti.Toast.Open({icon:"fas-spinner fa-spin",content:"i18n:auth-sending-vcode",position:"center",duration:0,closer:!1});this.$notify("get:vcode",{type:this.currentMode,scene:this.vCodeScene,account:this.data.name,captcha:i,done:()=>{n.close(),this.InvalidField=null,this.data.passwd=""},ok:({duInMin:t=60}={})=>{this.delay=this.getDelay,Ti.Toast.Open({type:"success",position:"top",content:"i18n:auth-sent-ok",vars:{ta:Ti.I18n.text(this.vCodeTargetName),by:Ti.I18n.text(this.vCodeTargetBy),min:t},duration:5e3})},fail:({errCode:t,data:e}={})=>{Ti.Toast.Open({type:"warn",position:"top",content:`i18n:${t}`,duration:5e3})}})},isInvalid(t=""){return _.isArray(this.InvalidField)?_.indexOf(this.InvalidField,t)>=0:t==this.InvalidField},__ti_shortcut(t){if("ENTER"==t&&!this.isBlankNameOrPasswd)return this.$nextTick(()=>{this.OnAuthSubmit()}),{stop:!0,quit:!0}}},watch:{currentMode:function(){this.guarding=!1,this.data.passwd=""}},mounted:function(){this.mode&&(this.currentMode=this.mode),this.__H=window.setInterval(()=>{this.delay>=0&&this.delay--},1e3)},beforeDestroy:function(){this.__H&&window.clearInterval(this.__H)}};Ti.Preload("ti/com/web/auth/signup/web-auth-signup.mjs",t)}(),Ti.Preload("ti/com/web/auth/signup/_com.json",{name:"web-auth-signup",globally:!0,template:"./web-auth-signup.html",mixins:["./web-auth-signup.mjs"]}),Ti.Preload("ti/com/web/footer/web-footer.html",'<div class="ti-web-footer">\n  I footer\n</div>'),function(){const t={inheritAttrs:!1,props:{logo:{type:[String,Object],default:"zmdi-chevron-down"},brief:{type:String,default:null},copyright:{type:String,default:null}},computed:{}};Ti.Preload("ti/com/web/footer/web-footer.mjs",t)}(),Ti.Preload("ti/com/web/footer/_com.json",{name:"web-footer",globally:!0,template:"./web-footer.html",mixins:["./web-footer.mjs"]}),Ti.Preload("ti/com/web/media/image/web-media-image.html",'<img\n  :class="TopClass"\n  class="web-media-image"\n  :src="ImgSrc"/>'),function(){const t={props:{base:{type:String,default:void 0},src:{type:String,default:void 0}},computed:{TopClass(){return this.getTopClass()},ImgSrc(){return Ti.Util.appendPath(this.base,this.src)}}};Ti.Preload("ti/com/web/media/image/web-media-image.mjs",t)}(),Ti.Preload("ti/com/web/media/image/_com.json",{name:"web-media-image",globally:!0,template:"./web-media-image.html",mixins:["./web-media-image.mjs"]}),Ti.Preload("ti/com/web/media/player/web-media-player.html",'<div class="ti-web-image">\n  \n</div>'),function(){const t={inheritAttrs:!1,props:{src:{type:String,default:void 0},value:{type:[String,Number],default:void 0},bgColor:{type:[String,Number],default:"#000000"},items:{type:[Array],default:()=>[]}},computed:{TheItems(){return _.forEach(this.items,t=>{}),[]}}};Ti.Preload("ti/com/web/media/player/web-media-player.mjs",t)}(),Ti.Preload("ti/com/web/media/player/_com.json",{name:"web-media-player",globally:!0,template:"./web-media-player.html",mixins:["./web-media-player.mjs"]}),Ti.Preload("ti/com/web/meta/article/web-meta-article.html",'<div class="web-meta-article"\n  :class="TopClass">\n  \x3c!--\n    Title\n  --\x3e\n  <h1\n    v-if="title"\n      class="as-title">{{title}}</h1>\n  \x3c!--\n    Information\n  --\x3e\n  <div\n    v-if="hasInfo"\n      class="as-info">\n      \x3c!--author--\x3e\n      <div v-if="author" class="as-author">{{author}}</div>\n      \x3c!--PubDateText--\x3e\n      <div v-if="PubDateText" class="as-pub-date">{{PubDateText}}</div>\n      \x3c!--Watch Count--\x3e\n      <div\n        v-if="watchCount > 0"\n          class="as-watch-count">\n            <i class="zmdi zmdi-eye"></i>\n            <span>{{watchCount}}</span></div>\n      \x3c!--PubDateText--\x3e\n      <div v-if="duration" class="as-duration">{{DurationText}}</div>\n  </div>\n  \x3c!--\n    Tags\n  --\x3e\n  <ul \n  v-if="hasTags"\n    class="as-tags">\n    <li\n      v-for="tag in TheTags">{{tag}}</li></ul>\n  \x3c!--\n    Brief\n  --\x3e\n  <blockquote\n    v-if="brief"\n      class="as-brief">{{brief}}</blockquote>\n  \x3c!--\n    Bottom line\n  --\x3e\n  <hr v-if="bottomLine" class="as-bottom-line">\n</div>'),function(){const t={props:{title:{type:String,default:null},brief:{type:String,default:null},pubDate:{type:[String,Number,Date],default:null},tags:{type:[String,Array],default:null},dateFormat:{type:String,default:"yyyy-MM-dd"},author:{type:String,default:null},duration:{type:[String,Number],default:null},watchCount:{type:Number,default:0},align:{type:String,default:"center",validator:t=>/^(left|center|right)$/.test(t)},bottomLine:{type:Boolean,default:!0}},computed:{TopClass(){return this.getTopClass(`align-${this.align}`)},TheTags(){return Ti.S.toArray(this.tags)},hasTags(){return!_.isEmpty(this.TheTags)},DurationText(){return _.isNumber(this.duration)?Ti.I18n.getf("du-in-min",{n:this.duration}):this.duration},PubDateText(){if(this.pubDate)return Ti.DateTime.format(this.pubDate,this.dateFormat)},hasInfo(){return this.author||this.watchCount>0||this.author||this.duration}}};Ti.Preload("ti/com/web/meta/article/web-meta-article.mjs",t)}(),Ti.Preload("ti/com/web/meta/article/_com.json",{name:"web-meta-article",globally:!0,template:"./web-meta-article.html",mixins:["./web-meta-article.mjs"]}),Ti.Preload("ti/com/web/meta/commodity/web-meta-commodity.html",'<div class="web-meta-commodity"\n  :class="TopClass">\n  <div class="as-main">\n    \x3c!--\n      Left: Preview\n    --\x3e\n    <div\n      v-if="previewImageSrc"\n        class="at-left">\n      <WebMediaImage\n        :src="previewImageSrc"/>\n    </div>\n    \x3c!--\n      Right: Information\n    --\x3e\n    <div class="at-right">\n      \x3c!--Title--\x3e\n      <h1>{{MetaTitle}}</h1>\n      <div class="as-form">\n        <ti-form\n          v-bind="form"\n          :data="FormData"\n          @change="OnFormChanged"/>\n      </div>\n      <div class="as-btns">\n        \x3c!--Buy Button--\x3e\n        <a class="ti-btn" @click="OnClickBuyNow">{{actions.buy|i18n}}</a>\n      </div>\n    </div>\n  </div>\n</div>'),function(){const t={props:{meta:{type:Object,default:()=>({})},previewSrc:{type:String,default:null},titleKey:{type:String,default:"title"},buyAmount:{type:Number,default:1},form:{type:Object,default:()=>({})},actions:{type:Object,default:()=>({buy:"i18n:buy-now"})}},computed:{TopClass(){return this.getTopClass()},FormData(){return{...this.meta,buyAmount:this.buyAmount}},previewImageSrc(){if(this.previewSrc&&this.meta)return Ti.S.renderBy(this.previewSrc,this.meta)},MetaTitle(){return this.titleKey?_.get(this.meta,this.titleKey):"NoTitle"}},methods:{OnClickBuyNow(){this.$notify("buy:now")},OnFormChanged({name:t,value:e}){this.$notify("meta:changed",{name:t,value:e})}}};Ti.Preload("ti/com/web/meta/commodity/web-meta-commodity.mjs",t)}(),Ti.Preload("ti/com/web/meta/commodity/_com.json",{name:"web-meta-commodity",globally:!0,template:"./web-meta-commodity.html",mixins:["./web-meta-commodity.mjs"],components:["@com:web/meta/preview"]}),Ti.Preload("ti/com/web/meta/order/com/order-item/order-item.html",'<div class="as-row order-item">\n  \x3c!--Thumb/Title--\x3e\n  <div class="as-cell">\n    <div class="as-title">\n      <ti-icon \n        :value="thumbObj" \n        width=".32rem" \n        height=".32rem"/>\n      <span class="as-text">{{title}}</span>\n    </div>\n  </div>\n  \x3c!--price--\x3e\n  <div class="as-cell as-price">\n    <span>{{price}}</span>\n  </div>\n  \x3c!--amount--\x3e\n  <div class="as-cell as-amount">\n    <span>{{amount}}</span>\n  </div>\n  \x3c!--Total--\x3e\n  <div class="as-cell as-fee">\n    <em class="ti-num is-md">{{feeText}}</em>\n  </div>\n</div>'),function(){const t={props:{id:{type:String,default:null},thumb:{type:String,default:null},src:{type:String,default:"/api/thumb?id:${id}"},dftIcon:{type:String,default:"fas-cube"},title:{type:String,default:null},price:{type:Number,default:1},currency:{type:String,default:"RMB"},amount:{type:Number,default:1}},computed:{thumbObj(){if(this.thumb){return{type:"image",value:Ti.S.renderBy(this.src,this)}}return this.dftIcon},fee(){return Ti.WWW.evalFee(this)},feeText(){return Ti.WWW.feeText(this.fee,this.currency)}}};Ti.Preload("ti/com/web/meta/order/com/order-item/order-item.mjs",t)}(),Ti.Preload("ti/com/web/meta/order/com/order-item/_com.json",{name:"order-item",globally:!1,template:"./order-item.html",mixins:["./order-item.mjs"]}),Ti.Preload("ti/com/web/meta/order/web-meta-order.html",'<div class="ti-web-meta-order">\n  \x3c!--\n    Title\n  --\x3e\n  <h1>确认订单信息</h1>\n  \x3c!--\n    Item list\n  --\x3e\n  <div class="as-items">\n    <div class="as-table">\n      <div class="as-head">\n        <ul>\n          <li class="as-title">商品</li>\n          <li class="as-price">单价</li>\n          <li class="as-amount">数量</li>\n          <li class="as-fee">小计</li>\n        </ul>\n      </div>\n      <div class="as-body">\n        <order-item v-for="it in items"\n          :key="it.id"\n          v-bind="it"\n          :src="itemThumbSrc"\n          :currency="currency"/>\n      </div>\n    </div>\n  </div>\n  \x3c!--\n    Summary\n  --\x3e\n  <div class="as-summary">\n    <div class="as-sum-fee">\n      <span>实际支付</span>\n      <em class="ti-num is-xl">{{totalFeeText}}</em>\n    </div>\n    <div class="as-btns">\n      <a class="ti-btn" @click="onSubmit">提交订单</a>\n    </div>\n  </div>\n\n</div>'),function(){const t={props:{items:{type:Array,default:()=>[]},itemThumbSrc:{type:String,default:"/api/thumb?id:${id}"},currency:{type:String,default:"RMB"}},computed:{totalFee(){let t=0;for(let e of this.items)t+=Ti.WWW.evalFee(e);return t},totalFeeText(){return Ti.WWW.feeText(this.totalFee,this.currency)}},methods:{onSubmit(){this.$notify("order:submit",{items:this.items,currency:this.currency})}}};Ti.Preload("ti/com/web/meta/order/web-meta-order.mjs",t)}(),Ti.Preload("ti/com/web/meta/order/_com.json",{name:"web-meta-order",globally:!0,template:"./web-meta-order.html",mixins:["./web-meta-order.mjs"],components:["./com/order-item"]}),Ti.Preload("ti/com/web/meta/preview/web-meta-preview.html",'<div class="ti-web-preview ti-fill-parent">\n  \x3c!--\n    Top: Image\n  --\x3e\n  <div class="as-preview">\n    <ti-icon value="zmdi-image"/>\n  </div>\n  \x3c!--\n    Bottom: List\n  --\x3e\n  \n</div>'),function(){const t={inheritAttrs:!1,props:{logo:{type:[String,Object],default:"zmdi-chevron-down"},brief:{type:String,default:null},copyright:{type:String,default:null}},computed:{}};Ti.Preload("ti/com/web/meta/preview/web-meta-preview.mjs",t)}(),Ti.Preload("ti/com/web/meta/preview/_com.json",{name:"web-meta-preview",globally:!0,template:"./web-meta-preview.html",mixins:["./web-meta-preview.mjs"]}),Ti.Preload("ti/com/web/nav/columns/nav-columns.html",'<nav class="web-nav-columns"\n  :class="TopClass">\n  \x3c!--=======================================--\x3e\n  <div v-for="it in TheItems"\n    class="as-column">\n    <div class="item-self">\n      <a\n        :key="it.index"\n        class="link-item"\n        :class="it.className"\n        :href="it.href"\n        :target="it.target"\n        @click.left="OnClickLink($event, it)">\n        \x3c!--Icon--\x3e\n        <ti-icon\n          v-if="it.icon"\n            :value="it.icon"/>\n        \x3c!--Text--\x3e\n        <span\n          v-if="it.title"\n            class="as-text">{{it.title}}</span>\n        </a>\n      </div>\n      \x3c!--===================================--\x3e\n      \x3c!--SubItems--\x3e\n      <div\n        v-if="it.items"\n          class="sub-items">\n          <div class="items-con">\n            <a\n              v-for="sub in it.items"\n                :key="sub.index"\n                class="sub-item"\n                :class="sub.className"\n                :href="sub.href"\n                :target="sub.target"\n                @click.left="OnClickLink($event, sub)">\n                \x3c!--Icon--\x3e\n                <ti-icon\n                  v-if="sub.icon"\n                    :value="sub.icon"/>\n                \x3c!--Text--\x3e\n                <span\n                  v-if="sub.title"\n                    class="as-text">{{sub.title}}</span>\n            </a>\n          </div>\n      </div>\n      \x3c!--===================================--\x3e\n  </div>\n  \x3c!--=======================================--\x3e\n</nav>'),function(){const t={props:{items:{type:Array,default:()=>[]},path:{type:String,default:null},align:{type:String,default:"center",validator:t=>/^(left|center|right)$/.test(t)},spacing:{type:String,validator:t=>/^(tiny|comfy|wide)$/.test(t)},border:{type:String,default:"solid",validator:t=>/^(none|solid|dashed|dotted)$/.test(t)}},computed:{TopClass(){return this.getTopClass(`is-spacing-${this.spacing}`,`is-align-${this.align}`,()=>{if(this.border)return`is-border-${this.border}`})},TheItems(){return this.evalItems(this.items)}},methods:{OnClickLink(t,{type:e,value:i}={}){/^(page|action)$/.test(e)&&(t.preventDefault(),console.log("onClickLink","nav:to",{type:e,value:i}),this.$notify("nav:to",{type:e,value:i}))},evalItems(t){let e=[];return _.forEach(t,(t,i)=>{let n=_.pick(t,["icon","title","type","href","target","value"]);n.index=i,this.path&&(n.highlight=t.highlightBy(this.path));let a=!!n.href;n.className={"has-href":a,"nil-href":!a,"is-highlight":n.highlight,"is-normal":!n.highlight},t.items&&(n.items=this.evalItems(t.items)),e.push(n)}),e}}};Ti.Preload("ti/com/web/nav/columns/nav-columns.mjs",t)}(),Ti.Preload("ti/com/web/nav/columns/_com.json",{name:"web-nav-columns",globally:!0,template:"./nav-columns.html",mixins:["./nav-columns.mjs"],components:[]}),Ti.Preload("ti/com/web/nav/links/nav-links.html",'<nav class="web-nav-links"\n  :class="TopClass">\n  \x3c!--=======================================--\x3e\n  <a\n    v-for="it in TheItems"\n      :key="it.index"\n      class="link-item"\n      :class="it.className"\n      :href="it.href"\n      :target="it.target"\n      @click.left="OnClickLink($event, it)"\n      @mouseenter="OnItemMouseEnter(it)"\n      @mouseleave="OnItemMouseLeave(it)">\n      \x3c!--Icon--\x3e\n      <ti-icon\n        v-if="it.icon"\n          :value="it.icon"/>\n      \x3c!--Text--\x3e\n      <span\n        v-if="it.title"\n          class="as-text">{{it.title}}</span>\n      \x3c!--===================================--\x3e\n      \x3c!--SubItems--\x3e\n      <div\n        v-if="mySubItems && mySubIndex == it.index"\n          class="sub-items">\n          <div class="items-con">\n            <a\n              v-for="sub in mySubItems"\n                :key="sub.index"\n                class="sub-item"\n                :class="sub.className"\n                :href="sub.href"\n                :target="sub.target"\n                @click.left="OnClickLink($event, sub)">\n                \x3c!--Icon--\x3e\n                <ti-icon\n                  v-if="sub.icon"\n                    :value="sub.icon"/>\n                \x3c!--Text--\x3e\n                <span\n                  v-if="sub.title"\n                    class="as-text">{{sub.title}}</span>\n            </a>\n          </div>\n      </div>\n      \x3c!--===================================--\x3e\n  </a>\n  \x3c!--=======================================--\x3e\n</nav>'),function(){const t={data:()=>({mySubIndex:-1,mySubItems:null}),props:{items:{type:Array,default:()=>[]},path:{type:String,default:null},align:{type:String,default:"left",validator:t=>/^(left|center|right)$/.test(t)},spacing:{type:String,validator:t=>/^(tiny|comfy|wide)$/.test(t)},border:{type:String,default:"solid",validator:t=>/^(none|solid|dashed|dotted)$/.test(t)}},computed:{TopClass(){return this.getTopClass(`is-spacing-${this.spacing}`,`is-align-${this.align}`,()=>{if(this.border)return`is-border-${this.border}`})},TheItems(){return this.evalItems(this.items)}},methods:{OnClickLink(t,{type:e,value:i}={}){/^(page|action)$/.test(e)&&(t.preventDefault(),console.log("onClickLink","nav:to",{type:e,value:i}),this.$notify("nav:to",{type:e,value:i}))},OnItemMouseEnter({index:t,items:e}){if(_.isEmpty(e))return this.mySubIndex=-1,void(this.mySubItems=null);this.mySubItems=this.evalItems(e),this.mySubIndex=t,this.$nextTick(()=>this.dockSub())},OnItemMouseLeave({index:t}){this.mySubIndex==t&&(this.mySubIndex=-1,this.mySubItems=null)},dockSub(){let t=Ti.Dom.find(".sub-items",this.$el);if(!t)return;let e=t.parentNode,i=Ti.Rects.createBy(e),n=Ti.Rects.createBy(t),a=Ti.Css.toStyle({top:i.height,left:(i.width-n.width)/2});Ti.Dom.setStyle(t,a)},evalItems(t){let e=[];return _.forEach(t,(t,i)=>{let n=_.pick(t,["icon","title","type","href","target","value","items"]);n.index=i,this.path&&(n.highlight=t.highlightBy(this.path));let a=!!n.href;n.className={"has-href":a,"nil-href":!a,"is-highlight":n.highlight,"is-normal":!n.highlight},e.push(n)}),e}}};Ti.Preload("ti/com/web/nav/links/nav-links.mjs",t)}(),Ti.Preload("ti/com/web/nav/links/_com.json",{name:"web-nav-links",globally:!0,template:"./nav-links.html",mixins:["./nav-links.mjs"],components:[]}),function(){const t={tipIcon:{type:String,default:"fas-clipboard-check"},tipText:{type:String,default:"i18n:pay-checkout-tip"},items:{type:Array,default:()=>[]},currency:{type:String,default:"RMB"}};Ti.Preload("ti/com/web/pay/checkout/web-pay-checkout-props.mjs",t)}(),Ti.Preload("ti/com/web/pay/checkout/web-pay-checkout.html",'<div class="web-pay-checkout"\n  :class="TopClass">\n  \x3c!--\n    Blank\n  --\x3e\n  <div \n    v-if="isEmpty"\n      class="as-empty">\n    <ti-loading\n      class="as-big"\n      icon="fas-shopping-basket"\n      text="You should pick something to checkout!"/>\n  </div>\n  \x3c!--\n    List table\n  --\x3e\n  <template v-else>\n    \x3c!--\n      Tip\n    --\x3e\n    <div class="as-tip">\n      <ti-icon :value="tipIcon"/>\n      <span>{{tipText | i18n}}</span>\n    </div>\n    \x3c!--\n      List\n    --\x3e\n    <div class="as-list">\n      \x3c!--循环展示商品--\x3e\n      <table>\n        <thead>\n          <tr>\n            <th><span>{{\'pay-checkout-it-name\'     | i18n}}</span></th>\n            <th>\n              <u>{{CurrencyChar}}</u>\n              <span>{{\'pay-checkout-it-price\'      | i18n}}</span>\n            </th>\n            <th><span>{{\'pay-checkout-it-amount\'   | i18n}}</span></th>\n            <th><span>{{\'pay-checkout-it-subtotal\' | i18n}}</span></th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr\n            v-for="it of TheItems"\n              class="as-item">\n              <td class="it-thumb">\n                <a\n                  v-if="it.thumbSrc" \n                    @click.prevent="OnShowProduct(it)" \n                    :href="it.href">\n                    <img :src="it.thumbSrc"/>\n                </a>\n                <div class="it-title">\n                  <a :href="it.href"\n                    @click.prevent="OnShowProduct(it)">{{it.title}}</a>\n                </div>\n              </td>\n              <td class="it-price">\n                <em>{{CurrencyChar}}{{it.price}}</em>\n              </td>\n              <td class="it-amount">\n                <span>{{it.amount}}</span>\n              </td>\n              <td class="it-subtotal">\n                <em>{{CurrencyChar}}{{it.subtotal}}</em>\n              </td>\n            </tr>\n          </tbody>\n      </table>\n    </div> \x3c!--~as-list--\x3e\n    \x3c!--\n      Summary\n    --\x3e\n    <div class="as-summary">\n      <div class="at-left">\n        \x3c!--Maybe Coupon here--\x3e\n      </div>\n      <div class="at-right">\n        <div class="as-total">\n          <span>Total:</span>\n          <em>{{CurrencyChar}}{{TotalFee}}</em>\n        </div>\n      </div>\n    </div>\n  </template>\n</div>'),function(){const t={computed:{TopClass(){return this.getTopClass()},isEmpty(){return _.isEmpty(this.items)},CurrencyChar(){return Ti.Bank.getCurrencyChar(this.currency)},TheItems(){let t=[];return _.forEach(this.items,e=>{t.push({...e,subtotal:Ti.Num.precise(e.price*e.amount)})}),t},TotalFee(){let t=0;return _.forEach(this.TheItems,e=>t+=e.price*e.amount),Ti.Num.precise(t)}},methods:{OnShowProduct({id:t}={}){this.$notify("show:product",t)}}};Ti.Preload("ti/com/web/pay/checkout/web-pay-checkout.mjs",t)}(),Ti.Preload("ti/com/web/pay/checkout/_com.json",{name:"web-pay-checkout",globally:!0,template:"./web-pay-checkout.html",props:"./web-pay-checkout-props.mjs",mixins:["./web-pay-checkout.mjs"]}),function(){const t={options:{type:Array,default:()=>[{icon:"/gu/rs/ti/icons/png/wxpay256.png",value:"wx.qrcode",text:"i18n:pay-wx"},{icon:"/gu/rs/ti/icons/png/alipay256.png",value:"zfb.qrcode",text:"i18n:pay-zfb"}]}};Ti.Preload("ti/com/web/pay/choose/web-pay-choose-props.mjs",t)}(),Ti.Preload("ti/com/web/pay/choose/web-pay-choose.html",'<div class="web-pay-choose"\n  :class="TopClass">\n  \x3c!--Title--\x3e\n  <div class="as-title">{{\'pay-step-choose-tip\'|i18n}}</div>\n  \x3c!--Choosing--\x3e\n  <div class="as-options">\n    <div\n      v-for="op in options"\n        class="as-pay-type"\n        :class="getOptionClass(op)"\n        @click.left="OnChooseOption(op)">\n        <ti-icon :value="op.icon"/>\n        <div class="as-text">{{op.text | i18n}}</div>\n    </div>\n  </div>\n  <div class="as-tip">{{PayTypeText}}</div>\n</div>'),function(){const t={props:{value:{type:String,default:null}},computed:{TopClass(){return this.getTopClass()},hasPayType(){return Ti.Bank.isValidPayType(this.value)},PayTypeText(){return Ti.Bank.getPayTypeChooseI18nText(this.value,{text:"pay-step-choose-tip2",nil:"pay-step-choose-nil"})}},methods:{OnChooseOption({value:t}={}){this.$emit("change",{payType:t})},getOptionClass(t){return t.value==this.value?"is-enabled":"is-disabled"}},mounted(){this.$notify("change:title","pay-step-choose-title2")}};Ti.Preload("ti/com/web/pay/choose/web-pay-choose.mjs",t)}(),Ti.Preload("ti/com/web/pay/choose/_com.json",{name:"web-pay-choose",globally:!0,template:"./web-pay-choose.html",props:"./web-pay-choose-props.mjs",mixins:["./web-pay-choose.mjs"]}),function(){const t={okIcon:{type:String,default:"im-check-mark-circle"},okText:{type:String,default:"i18n:pay-re-ok"},okLinks:{type:Array,default:()=>[]},failIcon:{type:String,default:"im-warning"},failText:{type:String,default:"i18n:pay-re-fail"},failLinks:{type:Array,default:()=>[]},doneLinks:{type:Array,default:()=>[]}};Ti.Preload("ti/com/web/pay/done/web-pay-done-props.mjs",t)}(),Ti.Preload("ti/com/web/pay/done/web-pay-done.html",'<div class="web-pay-done"\n  :class="TopClass">\n  \x3c!--\n    Icon\n  --\x3e\n  <div class="as-icon"><ti-icon :value="TheIcon"/></div>\n  \x3c!--\n    Text\n  --\x3e\n  <div class="as-text">{{TheText | i18n}}</div>\n  \x3c!--\n    errMsg\n  --\x3e\n  <div\n    v-if="errMsg" \n      class="as-error">{{errMsg | i18n}}</div>\n  \x3c!--\n    Links\n  --\x3e\n  <div\n    v-if="hasLinks"\n      class="as-links">\n      <ul>\n        <li\n          v-for="li in TheLinks">\n          <a\n            class="link-item"\n            :href="li.href"\n            @click.left.prevent="OnClickLink(li)">\n            <ti-icon\n              v-if="li.icon"\n                :value="li.icon"/>\n            <span class="it-text">{{li.text | i18n}}</span>\n          </a>\n        </li>\n      </ul>\n  </div>\n</div>'),function(){const t={props:{payOk:{type:Boolean,default:!1},errMsg:{type:String,default:"Name have page personal assume actually study else. Court response"},orderId:{type:String,default:void 0}},computed:{TopClass(){return this.getTopClass({"is-ok":this.payOk,"is-fail":!this.payOk})},TheIcon(){return this.payOk?this.okIcon:this.failIcon},TheText(){return this.payOk?this.okText:this.failText},TheLinks(){let t=_.cloneDeep(this.payOk?_.concat(this.okLinks,this.doneLinks):_.concat(this.failLinks,this.doneLinks)),e=[];return _.forEach(t,t=>{e.push(_.defaults(Ti.Util.explainObj(this,t),{icon:"zmdi-chevron-right"}))}),e},hasLinks(){return!_.isEmpty(this.TheLinks)}},methods:{OnClickLink({path:t,params:e}={}){t&&this.$notify("nav:to",{value:t,params:e})}}};Ti.Preload("ti/com/web/pay/done/web-pay-done.mjs",t)}(),Ti.Preload("ti/com/web/pay/done/_com.json",{name:"web-pay-done",globally:!0,template:"./web-pay-done.html",props:"./web-pay-done-props.mjs",mixins:["./web-pay-done.mjs"]}),function(){const t={watchUser:{type:String,default:null},qrcodeSize:{type:[String,Number],default:200},getOrder:{type:Function,default:void 0},createOrder:{type:Function,default:void 0},checkOrder:{type:Function,default:void 0}};Ti.Preload("ti/com/web/pay/proceed/web-pay-proceed-props.mjs",t)}(),Ti.Preload("ti/com/web/pay/proceed/web-pay-proceed.html",'<div class="web-pay-proceed">\n  \x3c!--\n    Wait for create order\n  --\x3e\n  <div \n    v-if="!hasOrder"\n      class="as-nil-order">\n      <ti-loading\n        class="as-big"\n        :text="OrderLoadText"/>\n  </div>\n  \x3c!--\n    Show payment\n  --\x3e\n  <template\n    v-else>\n    \x3c!--QRCODE--\x3e\n    <div v-if="isQRCODE"\n      class="as-main is-qrcode">\n      <img \n        :style="QrcodeImageStyle"\n        :src="PaymentDataAsQrcodeUrl">\n    </div>\n    \x3c!--IFRAME--\x3e\n    <div v-else-if="isIFRAME"\n      class="as-main is-iframe">\n      <iframe \n        frameborder="0" \n        scrolling="no"\n        :src="PaymentData"></iframe>\n    </div>\n    \x3c!--\n      JSON\n    --\x3e\n    <div v-else-if="isJSON"\n      class="as-main is-json">\n      \x3c!--The self/approve/update/capture links for PayPal--\x3e\n      <div\n        v-if="\'paypal\' == payType"\n          class="by-paypal">\n        \x3c!--Logo--\x3e\n        <div class="paypal-logo">\n          <a \n            :href="PayPalLinksMap.approve.href"\n            target="_blank"><i class="fab fa-paypal"></i></a>\n        </div>\n        <div class="paypal-tip">{{\'paypal-approve-tip\'|i18n}}</div>\n      </div> \x3c!--End PayPal--\x3e\n    </div>\n    \x3c!--\n      Others\n    --\x3e\n    <div\n      v-else\n        class="as-main">{{myOrder}}</div>\n    \x3c!--\n      Check Button\n    --\x3e\n    <div class="as-check">\n      <div class="ti-btn is-huge"\n        @click.left="OnClickCheckBtn">\n        <ti-icon class="as-icon" :value="CheckBtnIcon"/>\n        <div class="as-text">{{CheckBtnText|i18n}}</div>\n      </div>\n    </div>\n  </template>\n</div>'),function(){const t={data:()=>({__WS:null,myOrder:null,isChecking:!1}),props:{payType:{type:String,default:null},items:{type:Array,default:()=>[]},orderId:{type:String,default:void 0},payOk:{type:Boolean,default:void 0},currency:{type:String,default:"RMB"}},computed:{TopClass(){return this.getTopClass({"has-paytype":this.hasPayType,"nil-paytype":!this.hasPayType},`is-${this.PayTypeName}`)},hasPayType(){return Ti.Bank.isValidPayType(this.payType)},PayTypeName(){if(_.isString(this.payType))return this.payType.replace(".","-")},PayTypeText(){return Ti.Bank.getPayTypeChooseI18nText(this.payType,{text:"pay-step-proceed-tip",nil:"pay-step-proceed-nil"})},OrderLoadText(){return this.orderId?"pay-step-proceed-fetch-order":"pay-step-proceed-create-order"},hasOrder(){return!_.isEmpty(this.myOrder)},Payment(){return _.get(this.myOrder,"pay_re")},PaymentId(){return _.get(this.Payment,"payObjId")},PaymentStatus(){return _.get(this.Payment,"status")},PaymentData(){return _.get(this.Payment,"data")},PaymentDataType(){return _.get(this.Payment,"dataType")},isPaymentCreated(){return!!_.get(this.Payment,"payObjId")},isQRCODE(){return"QRCODE"==this.PaymentDataType},isIFRAME(){return"IFRAME"==this.PaymentDataType},isLINK(){return"LINK"==this.PaymentDataType},isJSON(){return"JSON"==this.PaymentDataType},isTEXT(){return"TEXT"==this.PaymentDataType},PaymentDataAsQrcodeUrl(){return`/gu/qrcode?d=${this.PaymentData}&s=${this.qrcodeSize}&_=${Date.now()}`},PayPalLinksMap(){let t={};return this.hasOrder&&"paypal"==this.myOrder.pay_tp&&_.forEach(this.PaymentData.links,e=>{t[e.rel]=e}),t},QrcodeImageStyle(){return Ti.Css.toStyleRem100({width:this.qrcodeSize,height:this.qrcodeSize})},CheckBtnIcon(){return this.isChecking?"fas-spinner fa-spin":"zmdi-assignment-check"},CheckBtnText(){return this.isChecking?"i18n:pay-proceed-ing":"i18n:pay-proceed-check"}},methods:{async OnClickCheckBtn(){_.isFunction(this.checkOrder)&&(this.isChecking=!0,this.myOrder=await this.checkOrder(this.orderId),this.isChecking=!1)},async checkOrCreateOrder(){if(!this.hasOrder){if(this.orderId)_.isFunction(this.getOrder)&&(this.myOrder=await this.getOrder(this.orderId,this.payType));else if(_.isFunction(this.createOrder)){let t=_.map(this.items,t=>({id:t.id,amount:t.amount||1,title:t.title,price:t.price})),e=await this.createOrder({payType:this.payType,items:t});this.$emit("change",{orderId:_.get(e,"id")}),this.myOrder=e}if("paypal"==this.payType&&this.isPaymentCreated){let t=_.get(this.PayPalLinksMap,"approve.href"),e=Ti.Util.parseHref(t),i=`${e.protocol}://${e.host}${e.path}`;console.log("🤳",{href:t,link:e,url:i}),await Ti.Be.Open(i,{params:e.params,delay:1e3})}this.watchPaymentChanged()}},watchPaymentChanged(){!this.__WS&&this.watchUser&&this.hasOrder&&this.isPaymentCreated&&(console.log("【🦅】watchPaymentChanged"),this.__WS=Ti.Websocket.listenRemote({watchTo:{method:"watch",user:this.watchUser,match:{id:this.PaymentId}},received:t=>{console.log("【🦅】websocket",t),this.OnClickCheckBtn()},closed:()=>{this.unwatchPaymentChanged()}}))},unwatchPaymentChanged(){this.__WS&&this.__WS.close()}},watch:{PaymentStatus:function(t){"FAIL"==t?(this.$emit("change",{payOk:!1,errMsg:JSON.stringify(this.PaymentData)}),this.$notify("step:change","@next")):"OK"==t&&(this.$emit("change",{payOk:!0}),this.$notify("step:change","@next"))}},mounted:function(){this.$notify("change:title",this.PayTypeText),this.$nextTick(()=>{this.checkOrCreateOrder()})},beforeDestroy:function(){this.unwatchPaymentChanged()}};Ti.Preload("ti/com/web/pay/proceed/web-pay-proceed.mjs",t)}(),Ti.Preload("ti/com/web/pay/proceed/_com.json",{name:"web-pay-proceed",globally:!0,template:"./web-pay-proceed.html",props:"./web-pay-proceed-props.mjs",mixins:["./web-pay-proceed.mjs"]}),Ti.Preload("ti/com/web/pay/web-pay.html",'<div class="web-pay">\n  <ti-wizard\n    :current="1"\n    :title="title"\n    :steps="PaySteps"\n    :value="myPayment"\n    can-click-head-item="passed"\n    @change="OnChange"/>\n</div>'),function(){const t={data:()=>({myPayment:{payType:null,orderId:void 0,payOk:void 0,errMsg:null}}),props:{title:{type:String,default:"i18n:pay-title"},payType:{type:String,default:null},payTypeOptions:{type:Array,default:void 0}},computed:{PaySteps(){return[{title:"i18n:pay-step-checkout-title",next:{enabled:()=>!_.isEmpty(this.items)},comType:"WebPayCheckout",comConf:{tipIcon:this.tipIcon,tipText:this.tipText,items:this.items,currency:this.currency}},{title:"i18n:pay-step-choose-title",prev:!0,next:{enabled:{payType:"notBlank"}},comType:"WebPayChoose",comConf:{options:this.options,value:"=payType"}},{title:"i18n:pay-step-proceed-title",prev:!0,next:{enabled:{payOk:"isBoolean",orderId:"notBlank"}},comType:"WebPayProceed",comConf:{items:this.items,currency:this.currency,payType:"=payType",orderId:"=orderId",payOk:"=payOk",watchUser:this.watchUser,qrcodeSize:this.qrcodeSize,getOrder:this.getOrder,createOrder:this.createOrder,checkOrder:this.checkOrder}},{title:"pay-step-done-title",comType:"WebPayDone",comConf:{payOk:"=payOk",errMsg:"=errMsg",orderId:"=orderId",okIcon:this.okIcon,okText:this.okText,okLinks:this.okLinks,failIcon:this.failIcon,failText:this.failText,failLinks:this.failLinks,doneLinks:this.doneLinks}}]}},methods:{OnChange(t){_.assign(this.myPayment,t)}},watch:{payType:{handler:function(){this.myPayment.payType=this.payType},immediate:!0}}};Ti.Preload("ti/com/web/pay/web-pay.mjs",t)}(),Ti.Preload("ti/com/web/pay/_com.json",{name:"web-pay",globally:!0,template:"./web-pay.html",props:["@com:web/pay/checkout/web-pay-checkout-props.mjs","@com:web/pay/choose/web-pay-choose-props.mjs","@com:web/pay/proceed/web-pay-proceed-props.mjs","@com:web/pay/done/web-pay-done-props.mjs"],mixins:["./web-pay.mjs"],components:["@com:ti/wizard","@com:web/pay/checkout","@com:web/pay/choose","@com:web/pay/proceed","@com:web/pay/done"]}),Ti.Preload("ti/com/web/shelf/free/web-shelf-free.html",'<div class="web-shelf-free"\n  :class="TopClass"\n  :style="TopStyle">\n  \x3c!--=============================--\x3e\n  <div class="free-main"\n    :style="MainStyle">\n    <div \n      v-for="it in TheItems"\n        :key="it.key"\n        class="free-item"\n        :class="it.className"\n        :style="it.style">\n      <component\n        :is="it.comType"\n        v-bind="it.comConf"/>\n    </div>\n  </div>\n  \x3c!--=============================--\x3e\n</div>'),function(){const t={props:{base:{type:String,default:void 0},items:{type:Array,default:()=>[]},background:{type:String,default:null},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},mainBackground:{type:String,default:null},mainWidth:{type:[String,Number],default:void 0},mainHeight:{type:[String,Number],default:void 0}},computed:{TopClass(){return this.getTopClass()},TopStyle(){return Ti.Css.toStyle({width:this.width,height:this.height,backgroundImage:this.getCssBackgroundUrl(this.background)})},MainStyle(){return Ti.Css.toStyle({width:this.mainWidth,height:this.mainHeight,backgroundImage:this.getCssBackgroundUrl(this.mainBackground)})},TheItems(){if(!_.isArray(this.items))return[];let t=[];return _.forEach(this.items,(e,i)=>{let n=[`at-${e.position||"free"}`,`i-${i}`];e.className&&n.push(e.className);let a=Ti.Css.toStyle(e.style);t.push({key:`It-${i}`,index:i,className:Ti.Css.mergeClassName(n),style:a,comType:e.comType||"WebTextRaw",comConf:e.comConf})}),t}},methods:{getCssBackgroundUrl(t){return Ti.Css.toBackgroundUrl(t,this.base)}}};Ti.Preload("ti/com/web/shelf/free/web-shelf-free.mjs",t)}(),Ti.Preload("ti/com/web/shelf/free/_com.json",{name:"web-shelf-free",globally:!0,template:"./web-shelf-free.html",mixins:["./web-shelf-free.mjs"]}),Ti.Preload("ti/com/web/shelf/scroller/web-shelf-scroller.html",'<div class="web-shelf-scroller"\n  :class="TopClass">\n  \x3c!--=======================================--\x3e\n  <div class="scroll-btn at-left" :class="BtnLeftClass">\n    <span @click.left="OnScrollLeft"><ti-icon :value="iconLeft"/></span>\n  </div>\n  \x3c!--=======================================--\x3e\n  <div class="scroller-outer" ref="outer">\n    \x3c!--=====================================--\x3e\n    <div class="scroller-inner" ref="inner"\n      :style="InnerStyle">\n      \x3c!--===================================--\x3e\n      <div\n        v-for="it in ItemList"\n          class="scroller-tile"\n          :key="it.key"\n          :style="ItemStyle">\n          <component\n            :is="it.comType"\n            v-bind="it.comConf"/>\n      </div>\n      \x3c!--===================================--\x3e\n    </div>\n    \x3c!--=====================================--\x3e\n  </div>\n  \x3c!--=======================================--\x3e\n  <div class="scroll-btn at-right" :class="BtnRightClass">\n    <span @click.left="OnScrollRight"><ti-icon :value="iconRight"/></span>\n  </div>\n  \x3c!--=======================================--\x3e\n</div>'),function(){const t={data:()=>({myScrollLeft:0,myMaxScroll:0,myScrollWidth:0}),props:{data:{type:Array,default:()=>[]},cols:{type:Number,default:4,validator:t=>t>0},comType:{type:String,default:"ti-label"},comConf:{type:Object,default:()=>({value:"=.."})},iconLeft:{type:String,default:"zmdi-chevron-left"},iconRight:{type:String,default:"zmdi-chevron-right"}},computed:{TopClass(){return this.getTopClass()},InnerStyle(){return{left:Ti.Css.toSize(this.myScrollLeft)}},ItemStyle(){return{width:Ti.Types.toPercent(1/this.cols)}},isLeftEnabled(){return this.myScrollLeft<0},isRightEnabled(){return this.myScrollLeft+this.myMaxScroll>this.myScrollWidth},BtnLeftClass(){return{"is-enabled":this.isLeftEnabled,"is-disabled":!this.isLeftEnabled}},BtnRightClass(){return{"is-enabled":this.isRightEnabled,"is-disabled":!this.isRightEnabled}},ItemList(){if(!_.isArray(this.data))return[];let t=[];for(let e=0;e<this.data.length;e++){let i=this.data[e],n=_.assign({},this.comConf,{value:i});t.push({key:`It-${e}`,comType:this.comType,comConf:n})}return t}},methods:{OnScrollLeft(){if(!this.isLeftEnabled)return;let t=Math.abs(this.myScrollLeft);t=Math.min(this.myScrollWidth,t),this.myScrollLeft+=t},OnScrollRight(){if(!this.isRightEnabled)return;let t=this.myMaxScroll+this.myScrollLeft-this.myScrollWidth,e=Math.min(this.myScrollWidth,t);this.myScrollLeft-=e},evalScrolling(){this.myMaxScroll=this.$refs.inner.scrollWidth,this.myScrollWidth=this.$refs.inner.getBoundingClientRect().width,this.myScrollLeft=0}},watch:{data:{handler:function(){this.$nextTick(()=>{this.evalScrolling()})},immediate:!0}}};Ti.Preload("ti/com/web/shelf/scroller/web-shelf-scroller.mjs",t)}(),Ti.Preload("ti/com/web/shelf/scroller/_com.json",{name:"web-shelf-scroller",globally:!0,template:"./web-shelf-scroller.html",mixins:["./web-shelf-scroller.mjs"]}),Ti.Preload("ti/com/web/shelf/wall/web-shelf-wall.html",'<div class="web-shelf-wall"\n  :class="TopClass">\n  \x3c!--\n    Each rows\n  --\x3e\n  <div v-for="wr in WallList"\n    class="wall-group"\n    :key="wr.key">\n    \x3c!--\n      ===========================================\n      Items in row\n    --\x3e\n    <template v-for="it in wr.items">\n      \x3c!--\n        Blank\n      --\x3e\n      <div\n        v-if="it.blank"\n          class="wall-tile is-blank"\n          :style="ItemStyle"></div>\n      \x3c!--\n        Normal Item\n      --\x3e\n      <div\n        v-else\n          class="wall-tile is-com"\n          :style="ItemStyle">\n          <component\n            :is="it.comType"\n            v-bind="it.comConf"/>\n      </div>\n    </template> \x3c!-- End item--\x3e\n  </div> \x3c!--End Row--\x3e\n</div>'),function(){const t={props:{data:{type:Array,default:()=>[]},cols:{type:Number,default:4,validator:t=>t>0&&parseInt(t)==t},comType:{type:String,default:"ti-label"},comConf:{type:Object,default:()=>({value:"=.."})}},computed:{TopClass(){return this.getTopClass()},ItemStyle(){return{width:Ti.Types.toPercent(1/this.cols)}},WallList(){if(!_.isArray(this.data))return[];let t=[],e=[],i=1;for(let n=0;n<this.data.length;n++){let a=this.data[n],s=_.assign({},this.comConf,{value:a});e.push({key:`It-${n}`,comType:this.comType,comConf:s}),i>=this.cols?(i=1,t.push({key:`Row-${t.length}`,items:e}),e=[]):i++}if(!_.isEmpty(e)){for(let t=e.length;t<this.cols;t++)e.push({key:`It-${t}`,blank:!0});t.push({key:`Row-${t.length}`,items:e})}return t}},methods:{}};Ti.Preload("ti/com/web/shelf/wall/web-shelf-wall.mjs",t)}(),Ti.Preload("ti/com/web/shelf/wall/_com.json",{name:"web-shelf-wall",globally:!0,template:"./web-shelf-wall.html",mixins:["./web-shelf-wall.mjs"]}),Ti.Preload("ti/com/web/text/heading/web-text-heading.html",'<div class="web-text-heading">\n  \x3c!--Icon--\x3e\n  <div\n    v-if="icon"\n      class="as-icon"><ti-icon :value="icon"/></div>\n  \x3c!--Title--\x3e\n  <div\n    v-if="title"\n      class="as-title"\n      @click.left="OnClickTitle"><span>{{title|i18n}}</span></div>\n  \x3c!--Comments--\x3e\n  <div\n    v-if="comment"\n      class="as-comment"><span>{{comment|i18n}}</span></div>\n  \x3c!--View more--\x3e\n  <div\n    v-if="more"\n      class="as-more"\n      @click.left="OnClickMore"><span>{{more|i18n}}</span></div>\n</div>'),function(){const t={props:{icon:{type:String,default:null},title:{type:String,default:null},comment:{type:String,default:null},more:{type:String,default:null},value:null},methods:{OnClickTitle(){this.$notify("fire",this.value)},OnClickMore(){this.$notify("more",this.value)}}};Ti.Preload("ti/com/web/text/heading/web-text-heading.mjs",t)}(),Ti.Preload("ti/com/web/text/heading/_com.json",{name:"web-text-heading",globally:!0,template:"./web-text-heading.html",mixins:["./web-text-heading.mjs"]}),Ti.Preload("ti/com/web/text/raw/web-text-raw.html",'<div class="web-text-raw" :class="TopClass"><span>{{TheValue}}</span></div>\n<div class="web-text-raw" :class="TopClass"><span>{{TheValue}}</span></div>'),function(){const t={props:{value:{type:[String,Number],default:"Web Text"}},computed:{TopClass(){return this.getTopClass()},TheValue(){return this.value}}};Ti.Preload("ti/com/web/text/raw/web-text-raw.mjs",t)}(),Ti.Preload("ti/com/web/text/raw/_com.json",{name:"web-text-raw",globally:!0,template:"./web-text-raw.html",mixins:["./web-text-raw.mjs"]}),Ti.Preload("ti/com/web/widget/choose-mode/web-choose-mode.html",'<div class="ti-web-choose-mode">\n  <div v-for="it in theItems"\n    class="wcm-item"\n    :class="it.className"\n    @click.left="onClickItem(it)">\n    \x3c!--Icon--\x3e\n    <ti-icon\n      class="as-icon"\n      :base="base"\n      :value="it.icon"/>\n    \x3c!--Text--\x3e\n    <div v-if="it.text"\n      class="as-text">{{it.text|i18n}}</div>\n  </div>\n</div>'),function(){const t={inheritAttrs:!1,props:{base:{type:String,default:null},options:{type:Array,default:()=>[]},value:{type:String,default:null}},computed:{theItems(){let t=[];for(let e of this.options)t.push(_.assign({},e,{className:_.isEqual(this.value,e.value)?"is-current":"is-others"}));return t}},methods:{onClickItem(t){this.$notify("change",t.value)}}};Ti.Preload("ti/com/web/widget/choose-mode/web-choose-mode.mjs",t)}(),Ti.Preload("ti/com/web/widget/choose-mode/_com.json",{name:"web-choose-mode",globally:!0,template:"./web-choose-mode.html",mixins:["./web-choose-mode.mjs"]}),Ti.Preload("ti/com/web/widget/sharebar/web-widget-sharebar.html",'<div class="web-widget-sharebar"\n  :class="TopClass">\n  \x3c!--\n    Title\n  --\x3e\n  <div\n    v-if="title"\n      class="as-title">{{title|i18n}}</div>\n  \x3c!--\n    Items\n  --\x3e\n  <div class="as-items">\n    <a\n      v-for="it in TheItems"\n        class="bar-item">\n      <i :class="it.iconClass"></i>\n    </a>\n  </div>\n</div>'),function(){const t={props:{title:{type:String,default:null},items:{type:Array,default:()=>[]}},computed:{TopClass(){return this.getTopClass()},TheItems(){return this.evalItems(this.items)}},methods:{evalItems(t){let e=[];return _.forEach(t,(t,i)=>{let n={facebook:{iconClass:"fab fa-facebook-f"},twitter:{iconClass:"fab fa-twitter"},instagram:{iconClass:"fab fa-instagram"},tumblr:{iconClass:"fab fa-tumblr"}}[t];n&&e.push(n)}),e}}};Ti.Preload("ti/com/web/widget/sharebar/web-widget-sharebar.mjs",t)}(),Ti.Preload("ti/com/web/widget/sharebar/_com.json",{name:"web-widget-sharebar",globally:!0,template:"./web-widget-sharebar.html",mixins:["./web-widget-sharebar.mjs"],components:[]}),function(){const t={async doCreate(){let{types:t,freeCreate:e}=await Wn.Sys.exec(`ti creation -cqn id:${this.meta.id}`,{as:"json"}),i=await Ti.App.Open({title:"i18n:create",type:"success",position:"top",width:640,height:"61.8%",comType:"ti-obj-creation",comConf:{types:t,freeCreate:e},components:["@com:ti/obj/creation"]});if(console.log(i),i&&i.name){if(i.name.search(/[%;:"'*?`\t^<>\/\\]/)>=0)return await Ti.Alert("i18n:wn-create-invalid");if(i.length>256)return await Ti.Alert("i18n:wn-create-too-long");let t=JSON.stringify({nm:i.name,tp:"folder"==i.type?"":i.type,race:i.race}),e=await Wn.Sys.exec2(`obj id:${this.meta.id} -cqno -new '${t}'`,{as:"json"});e instanceof Error?Ti.Toast.Open("i18n:wn-create-fail","error"):(Ti.Toast.Open("i18n:wn-create-ok","success"),await this._run("reload"),this.myCheckedIds=[e.id],this.myCurrentId=e.id)}},async doRename(){let t=this.getCurrentItem();if(!t)return await Ti.Toast.Open("i18n:wn-rename-none","warn");this.setItemStatus(t.id,"renaming");try{let e=await Ti.Prompt({text:"i18n:wn-rename",vars:{name:t.nm}},{title:"i18n:rename",placeholder:t.nm,value:t.nm});if(e){if(e.search(/[%;:"'*?`\t^<>\/\\]/)>=0)return await Ti.Alert("i18n:wn-rename-invalid");if(e.length>256)return await Ti.Alert("i18n:wn-rename-too-long");let i=Ti.Util.getSuffix(t.nm),n=Ti.Util.getSuffix(e);if(i&&i!=n){await Ti.Confirm("i18n:wn-rename-suffix-changed")&&(e+=i)}this.setItemStatus(t.id,"loading");let a=await Wn.Sys.exec2(`obj id:${t.id} -cqno -u 'nm:"${e}"'`,{as:"json"});a instanceof Error?Ti.Toast.Open("i18n:wn-rename-fail","error"):(Ti.Toast.Open("i18n:wn-rename-ok","success"),this.setItem(a)),this.setItemStatus({id:t.id,status:{loading:!1}})}}finally{this.setItemStatus(t.id,null)}},async doDelete(){let t=this.getCheckedItems();if(_.isEmpty(t))return await Ti.Toast.Open("i18n:wn-del-none","warn");let e=0,i={};try{for(let n of t){if(!n||!n.id||!n.nm)continue;if(n.__is&&(n.__is.loading||n.__is.removed))continue;if(i[n.id])continue;if(this.setItemStatus(n.id,"loading"),"DIR"==n.race){let t=await Wn.Sys.exec(`count -A id:${n.id}`);if((t=parseInt(t))>0&&!await Ti.Confirm({text:"i18n:wn-del-no-empty-folder",vars:{nm:n.nm}})){this.setItemStatus(n.id,null);continue}}await Wn.Sys.exec(`rm ${"DIR"==n.race?"-r":""} id:${n.id}`),this.setItemStatus(n.id,"removed");let t=/^id:(.+)$/.exec(n.videoc_dir);if(t){let e=t[1];i[e]=!0,this.setItemStatus(e,"removed")}e++}await this._run("reload")}finally{Ti.Toast.Open("i18n:wn-del-ok",{N:e},"success")}},async doUpload(t=[]){_.isFunction(this.beforeUpload)&&await this.beforeUpload();let e=_.map(t,(t,e)=>({id:`U${e}_${Ti.Random.str(6)}`,file:t,total:t.size,current:0}));this.myUploadigFiles=e;let i={};for(let t of e){let e=t.file,{ok:n,data:a}=await Wn.Io.uploadFile(e,{target:`id:${this.meta.id}`,progress:function(e){t.current=e.loaded}});n&&(i[a.id]=!0)}_.delay(()=>{this.myUploadigFiles=[]},1e3),Ti.Toast.Open("i18n:upload-done","success"),await this._run("reload"),this.myCheckedIds=i,this.myCurrentId=null},async doDownload(){let t=this.getCheckedItems();if(_.isEmpty(t))return await Ti.Toast.Open("i18n:wn-download-none","warn");if(!(t.length>5)||await Ti.Confirm({text:"i18n:wn-download-too-many",vars:{N:t.length}}))for(let e of t){if("FILE"!=e.race){if(!await Ti.Confirm({text:"i18n:wn-download-dir",vars:e},{textYes:"i18n:continue",textNo:"i18n:terminate"}))return;continue}let t=Wn.Util.getDownloadLink(e);Ti.Be.OpenLink(t)}}};Ti.Preload("ti/com/wn/adaptlist/wn-adaptlist-methods.mjs",t)}(),function(){const t={meta:{type:Object,default:null},data:{type:[Object,Array],default:null},changedId:{type:String,default:null},status:{type:Object,default:()=>({reloading:!1})},droppable:{type:Boolean,default:!0},multi:{type:Boolean,default:!0},checkable:{type:Boolean,default:!0},blurable:{type:Boolean,default:!0},selectable:{type:Boolean,default:!0},spacing:{type:String,default:"sm"},keeyHiddenBy:{type:String,default:"wn-list-adaptview-expose-hidden"},routers:{type:Object,default:()=>({reload:"dispatch:current/reload"})},listConf:{type:Object,default:void 0},itemClassName:{type:String,default:null},beforeUpload:{type:Function,default:void 0}};Ti.Preload("ti/com/wn/adaptlist/wn-adaptlist-props.mjs",t)}(),Ti.Preload("ti/com/wn/adaptlist/wn-adaptlist.html",'<div class="wn-adaptlist" \n  :class="TopClass"\n  v-ti-activable>\n  <div\n    class="list-con ti-fill-parent"\n    v-drop-files.mask="OnDropFiles">\n    \x3c!--==================================\n      Show Loading\n    --\x3e\n    <ti-loading\n      v-if="isReloading"\n        class="as-reloading as-mid-tip"\n        text="i18n:reloading"/>\n    \x3c!--==================================\n      Data List\n    --\x3e\n    <ti-wall\n      v-else\n        class="ti-fill-parent"\n        :data="TheDataList"\n        :spacing="spacing"\n        :changed-id="changedId"\n        :current-id="myCurrentId"\n        :checked-ids="myCheckedIds"\n        :multi="multi"\n        :checkable="checkable"\n        :blurable="blurable"\n        :selectable="selectable"\n        :display="WallItemDisplay"\n        :puppet-mode="true"\n        v-bind="listConf"\n        :on-init="OnListInit"\n        @select="OnSelected"/>\n    \x3c!--==================================\n      Hidden file upload control\n    --\x3e\n    <input \n      type="file" \n      ref="file" \n      class="ti-hide"\n      multiple\n      @change.stop.seft="OnSelectLocalFilesToUpload">\n    \x3c!--==================================\n      Uploading Pannel\n    --\x3e\n    <div\n      class="wal-uploading"\n      :class="UploadingClass">\n      <header>\n        <ti-icon value="fas-spinner fa-pulse"/>\n        <span>{{\'uploading\'|i18n}}</span>\n      </header>\n      <section>\n        <ti-wall \n          :data="TheUploadingList"\n          :spacing="spacing"\n          :selectable="false"\n          :multi="false"\n          :checkable="false"\n          :blurable="false"\n          :display="UploadingItemDisplay"\n          :puppet-mode="true"/>\n      </section>\n    </div>\n    \x3c!--==================================--\x3e\n  </div>\n</div>'),function(){const t={data:()=>({myCurrentId:null,myCheckedIds:{},myUploadigFiles:[],myItemStatus:{},myExposeHidden:!0,myData:null}),computed:{TopClass(){return this.getTopClass()},isReloading(){return _.get(this.status,"reloading")},WallItemDisplay(){return{key:"..",transformer:{name:"Wn.Util.getObjThumbInfo",args:[{status:this.myItemStatus,exposeHidden:this.myExposeHidden}]},comType:"ti-obj-thumb",comConf:{"...":"${=value}"}}},UploadingItemDisplay:()=>({key:"..",comType:"ti-obj-thumb",comConf:{"...":"${=value}"}}),hasDataList(){return this.myData&&_.isArray(this.myData.list)},TheDataList(){if(!this.myData||_.isEmpty(this.myData.list))return[];let t=[];for(let e of this.myData.list)if(!this.isHiddenItem(e)){this.myItemStatus[e.id];t.push(e)}return t},TheUploadingList(){let t=this.myUploadigFiles,e=[];if(_.isArray(t))for(let i of t){let t,n=i.file.type,a=Ti.Util.getSuffixName(i.file.name);t=/^image\//.test(n)?{type:"localFile",value:i.file}:Ti.Icons.get({tp:a,mime:n}),e.push({id:i.id,title:i.file.name,preview:t,progress:i.current/i.total})}return e},hasUploading(){return this.myUploadigFiles.length>0},UploadingClass(){return this.hasUploading?"up-show":"up-hide"}},methods:{OnListInit(t){this.$innerList=t},OnSelected({currentId:t,checkedIds:e}){return this.myCurrentId=t,this.myCheckedIds=e,{stop:!1}},async OnDropFiles(t){if(!this.droppable)return;let e=[...t];await this.doUpload(e),this.$nextTick(()=>{let t=[];for(let e of this.TheDataList)this.myCheckedIds[e.id]&&t.push(e);this.$notify("uploaded",t)})},async OnSelectLocalFilesToUpload(t){await this.OnDropFiles(t.target.files),this.$refs.file.value=""},getCurrentItem(){if(this.myCurrentId)return _.find(this.TheDataList,t=>t.id==this.myCurrentId)},getCheckedItems(){return _.filter(this.TheDataList,t=>this.myCheckedIds[t.id])},setItem(t){if(t&&this.hasDataList){let e=_.map(this.TheDataList,e=>e.id==t.id?t:e);this.myData.list=e}},setItemStatus(t,e="loading"){this.myItemStatus=_.assign({},this.myItemStatus,{[t]:e})},invokeList(t){console.log("methodName"),Ti.InvokeBy(this.$innerList,t)},isHiddenItem(t){return!(!t.nm.startsWith(".")||this.myExposeHidden)},async _run(t,e){let i=(this.routers||{})[t];if(_.isFunction(i))await i();else if(i){let t=Ti.App(this);return await t.exec(i,e)}},toggleExposeHidden(){let t=!this.myExposeHidden;this.myExposeHidden=t,this.keeyHiddenBy&&Ti.Storage.session.set(this.keeyHiddenBy,t)},openLocalFileSelectdDialog(){this.$refs.file.click()},async openCurrentMeta(){let t=this.getCurrentItem()||this.meta;if(!t)return Ti.Toast.Open("i18n:nil-obj");let e=await Wn.EditObjMeta(t,{fields:"auto"});if(e){let{updates:t,data:i}=e;this.setItem(i)}},syncMyData(){this.myData=_.cloneDeep(this.data)||{list:[],pager:{}},this.myItemStatus={}}},watch:{data:{handler:"syncMyData",immediate:!0},myExposeHidden:function(t){this.$notify("expose-hidden",t)}},mounted:function(){Ti.Fuse.getOrCreate().add({key:"wn-list-adaptview-check-uploading",everythingOk:()=>!this.hasUploading,fail:()=>{Ti.Toast.Open("i18n:upload-nofinished","warn")}}),this.keeyHiddenBy&&(this.myExposeHidden=Ti.Storage.session.getBoolean(this.keeyHiddenBy))},beforeDestroy:function(){Ti.Fuse.get().remove("wn-list-adaptview-check-uploading")}};Ti.Preload("ti/com/wn/adaptlist/wn-adaptlist.mjs",t)}(),Ti.Preload("ti/com/wn/adaptlist/_com.json",{name:"wn-adaptlist",globally:!0,template:"./wn-adaptlist.html",props:"./wn-adaptlist-props.mjs",methods:"./wn-adaptlist-methods.mjs",mixins:["./wn-adaptlist.mjs"],components:["@com:ti/obj/thumb","@com:ti/wall"]}),Ti.Preload("ti/com/wn/combo/edit-com/wn-combo-edit-com.html",'<ti-label\n  class="wn-combo-edit-com"\n  :class="className"\n  :placeholder="placeholder"\n  :prefix-icon="ComIcon"\n  :value="ComTitle"\n  :suffix-icon="\'zmdi-delete\'"\n  @click:value="OnClickValue"\n  @suffix:icon="OnClickSuffixIcon"/>\n  '),function(){const t={data:()=>({myCom:null}),props:{value:{type:Object,default:()=>({})},placeholder:{type:String,default:"i18n:wn-edit-com-nil"}},computed:{Dict:()=>Wn.Dict.hMakerComponents(),ComIcon(){return _.get(this.myCom,"icon")},ComTitle(){return _.get(this.myCom,"title")}},methods:{async OnClickValue(){let t=await Wn.EditTiComponent(this.value);t&&this.notifyChange(t)},OnClickSuffixIcon(){this.notifyChange({})},notifyChange(t={}){t.comType||(t.comType=void 0,t.comConf=void 0),this.$notify("change",t)},async reloadMyCom(){if(_.isEmpty(this.value))this.myCom=null;else{let{comType:t}=this.value;this.myCom=await this.Dict.getItem(t)}}},watch:{value:{handler:"reloadMyCom",immediate:!0}}};Ti.Preload("ti/com/wn/combo/edit-com/wn-combo-edit-com.mjs",t)}(),Ti.Preload("ti/com/wn/combo/edit-com/_com.json",{name:"wn-combo-edit-com",globally:!0,template:"./wn-combo-edit-com.html",mixins:"./wn-combo-edit-com.mjs"}),Ti.Preload("ti/com/wn/combo/input/wn-combo-input.html",'<ti-combo-input v-bind="this"\n  \n  :options="OptionsDict"\n  :drop-com-type="DropComType"\n  :prefix-icon="ThePrefixIcon"\n  :drop-display="TheDropDisplay"\n  \n  @change="$notify(\'change\', $event)"/>\n  '),function(){const t={data:()=>({loading:!1}),props:{itemBy:{type:[String,Function],default:void 0},findBy:{type:[String,Function],default:void 0},loadingIcon:{type:String,default:"zmdi-settings zmdi-hc-spin"},canInput:{type:Boolean,default:!0},autoCollapse:{type:Boolean,default:!1}},computed:{DropComType(){return this.dropComType||"wn-list"},ThePrefixIcon(){return this.loading?this.loadingIcon:this.prefixIcon},OptionsDict(){return Wn.Dict.evalOptionsDict(this,({loading:t})=>{this.loading=t})},TheDropDisplay(){return this.dropDisplay||["@<thumb>","title|text"]}}};Ti.Preload("ti/com/wn/combo/input/wn-combo-input.mjs",t)}(),Ti.Preload("ti/com/wn/combo/input/_com.json",{name:"wn-combo-input",globally:!0,template:"./wn-combo-input.html",props:["@com:ti/input/ti-input-props.mjs","@com:ti/combo/input/ti-combo-input-props.mjs"],mixins:"./wn-combo-input.mjs",components:["@com:ti/combo/input","@com:wn/list","@com:wn/obj/icon"]}),Ti.Preload("ti/com/wn/combo/multi-input/wn-combo-multi-input.html",'<ti-combo-multi-input v-bind="this"\n\n  :options="OptionsDict"\n  :tag-mapping="TheTagMapping"\n  :drop-com-type="DropComType"\n  :prefix-icon="ThePrefixIcon"\n  :tag-item-icon-by="TheTagItemIconBy"\n  :drop-display="TheDropDisplay"\n  \n  @change="$notify(\'change\', $event)"/>\n  '),function(){const t={inheritAttrs:!1,data:()=>({loading:!1}),props:{itemBy:{type:[String,Function],default:void 0},findBy:{type:[String,Function],default:void 0},loadingIcon:{type:String,default:"zmdi-settings zmdi-hc-spin"}},computed:{DropComType(){return this.dropComType||"wn-list"},ThePrefixIcon(){return this.loading&&this.prefixIcon?this.loadingIcon:this.prefixIcon},OptionsDict(){return Wn.Dict.evalOptionsDict(this,({loading:t})=>{this.loading=t})},TheTagMapping(){return _.isEmpty(this.tagMapping)?{text:"title|nm",icon:"icon",value:"id"}:this.tagMapping},TheTagItemIconBy(){return this.tagItemIconBy||(t=>Wn.Util.getObjIcon(t))},TheDropDisplay(){return this.dropDisplay||["@<thumb>","title","nm"]}}};Ti.Preload("ti/com/wn/combo/multi-input/wn-combo-multi-input.mjs",t)}(),Ti.Preload("ti/com/wn/combo/multi-input/_com.json",{name:"wn-combo-multi-input",globally:!0,template:"./wn-combo-multi-input.html",props:["@com:ti/input/ti-input-props.mjs","@com:ti/input/tags/ti-input-tags-props.mjs","@com:ti/combo/input/ti-combo-input-props.mjs"],mixins:"./wn-combo-multi-input.mjs",components:["@com:ti/combo/multi-input","@com:wn/list","@com:wn/obj/icon"]}),Ti.Preload("ti/com/wn/droplist/wn-droplist.html",'<component \n  :is="ComType"\n  v-bind="this"\n  :can-input="false"\n  :must-in-list="true"\n  :auto-collapse="true"\n  @change="$notify(\'change\', $event)"/>'),function(){const t={props:{multi:{type:Boolean,default:!1}},computed:{ComType(){return this.multi?"wn-combo-multi-input":"wn-combo-input"}}};Ti.Preload("ti/com/wn/droplist/wn-droplist.mjs",t)}(),Ti.Preload("ti/com/wn/droplist/_com.json",{name:"wn-droplist",globally:!0,template:"./wn-droplist.html",props:["@com:ti/input/ti-input-props.mjs","@com:ti/input/tags/ti-input-tags-props.mjs","@com:ti/combo/input/ti-combo-input-props.mjs"],mixins:["./wn-droplist.mjs"],components:["@com:wn/combo/input","@com:wn/combo/multi-input"]}),Ti.Preload("ti/com/wn/explorer/wn-explorer.html",'<div class="wn-explorer"\n  v-drop-off\n  :class="topClass">\n  \x3c!--\n    Sky\n  --\x3e\n  <div v-if="show.sky"\n    class="explorer-sky">\n    \x3c!--Logo--\x3e\n    <div v-if="show.logo"\n      class="sky-logo ti-flex-center">\n      <slot name="logo"></slot>\n    </div>\n    \x3c!--Title/Crumb--\x3e\n    <div v-if="!noTitle"\n      class="sky-title">\n      <slot name="title">\n        <ul class="as-address-bar">\n          <li v-for="an in ancestors" :key="an.id">\n            <a :href="getObjLink(an)"\n              @click.prevent="$notify(\'main:open\', an)">{{getObjTitle(an)}}</a>\n            <ti-icon class="center" value="chevron_right"/>\n          </li>\n          <li v-if="meta">\n            <b>{{getObjTitle(meta)}}</b>\n            <span v-if="status.changed"\n              class="ti-mark-changed">*</span>\n          </li>\n        </ul>\n      </slot>\n    </div>\n    \x3c!--Actions--\x3e\n    <div v-if="show.action"\n      class="sky-action ti-flex-right">\n      <slot name="action"></slot>\n    </div>\n  </div>\n  \x3c!--\n    Aside\n  --\x3e\n  <div v-if="show.aside"\n    class="explorer-aside">\n    <slot name="aside"></slot>\n  </div>\n  \x3c!--\n    Main Arena\n  --\x3e\n  <div class="explorer-arena">\n    <slot name="arena"></slot>\n  </div>\n  \x3c!--\n    Footer\n  --\x3e\n  <div v-if="show.footer"\n    class="explorer-footer">\n    <slot name="footer"></slot>\n  </div>\n  <div v-if="loading" class="exploer-loading-mask"></div>\n</div>'),function(){const t={props:{loading:{type:Boolean,default:!1},noTitle:{type:Boolean,default:!1},meta:{type:Object,default:()=>({})},ancestors:{type:Array,default:()=>[]},children:{type:Array,default:()=>[]},status:{type:Object,default:()=>({changed:!1})}},computed:{show(){let t={logo:!!this.$slots.logo,action:!!this.$slots.action,aside:!!this.$slots.aside,footer:!!this.$slots.footer};return t.sky=!(this.noTitle&&!t.logo&&!t.action),t},topClass(){return{"no-sky":!this.show.sky,"no-aside":!this.show.aside,"no-footer":!this.show.footer}}},methods:{getObjTitle(t){let e=t.title||t.nm;return Ti.I18n.text(e)},getObjLink:t=>Wn.Util.getAppLink(t).toString()},mounted:function(){}};Ti.Preload("ti/com/wn/explorer/wn-explorer.mjs",t)}(),Ti.Preload("ti/com/wn/explorer/_com.json",{name:"wn-explorer",globally:!0,template:"./wn-explorer.html",mixins:["./wn-explorer.mjs"]}),Ti.Preload("ti/com/wn/gui/arena/wn-gui-arena.html",'<div class="wn-gui-arena">\n  <component \n    :is="comType"\n      class="ti-cover-parent"\n      v-bind="comConf"/>\n</div>'),function(){const t={props:{meta:{type:Object,default:null},comType:{type:String,default:"ti-loading"},comConf:{type:Object,default:()=>({})}}};Ti.Preload("ti/com/wn/gui/arena/wn-gui-arena.mjs",t)}(),Ti.Preload("ti/com/wn/gui/arena/_com.json",{name:"wn-gui-arena",globally:!0,template:"./wn-gui-arena.html",mixins:["./wn-gui-arena.mjs"]}),Ti.Preload("ti/com/wn/gui/footer/wn-gui-footer.html",'<div class="wn-gui-footer">\n  \x3c!--\n    Info\n  --\x3e\n  <div class="as-info ti-flex-center">\n    <ti-icon v-if="infoIcon"\n      :value="infoIcon"/>\n    <span v-if="infoText"\n      >{{infoText|i18n}}</span>\n  </div>\n  \x3c!--\n    Message\n  --\x3e\n  <div class="as-msg ti-flex-center">\n    {{message}}\n  </div>\n  \x3c!--\n    Indicator\n  --\x3e\n  <div class="as-indi">\n    {{indicator}}\n  </div>\n</div>'),function(){const t={inheritAttrs:!1,props:{infoIcon:{type:[String,Object],default:void 0},infoText:{type:String,default:void 0},message:{type:String,default:void 0},indicator:{type:String,default:void 0}}};Ti.Preload("ti/com/wn/gui/footer/wn-gui-footer.mjs",t)}(),Ti.Preload("ti/com/wn/gui/footer/_com.json",{name:"wn-gui-footer",globally:!0,template:"./wn-gui-footer.html",mixins:["./wn-gui-footer.mjs"]}),Ti.Preload("ti/com/wn/gui/side/nav/com/side-nav-item/side-nav-item.html",'<div class="side-nav-item" :class="topClass">\n  \x3c!--\n    Self Info\n  --\x3e\n  <div class="it-info" >\n    \x3c!--Icon--\x3e\n    <span v-if="icon" class="it-info-icon">\n      <ti-icon :value="icon" size=".16rem"/>\n    </span>\n    \x3c!--Group--\x3e\n    <span v-if="isGroup"\n      class="it-info-text"\n      @click.stop.prevent="onClickGroupInfo">{{title|i18n}}</span>\n    \x3c!--Item--\x3e\n    <a v-else\n      class="it-info-text"\n      :href="href"\n      @click.stop.prevent="onClickItemInfo">\n      {{title|i18n}}\n    </a>\n  </div>\n  \x3c!--\n    Sub Container\n  --\x3e\n  <div class="it-con" v-if="items && items.length > 0">\n      <side-nav-item v-for="subIt in items"\n        :key="subIt.key"\n        :group-status-store-key="subIt.key"\n        :highlight-id="highlightId"\n        v-bind="subIt"\n        @item:actived="$notify(\'item:actived\', $event)"/>\n  </div>\n</div>'),function(){const t={inheritAttrs:!1,data:()=>({collapse:!0}),props:{groupStatusStoreKey:{type:String,default:null},highlightId:{type:String,default:null},id:{type:String,default:null},depth:{type:Number,default:0},icon:{type:[String,Object],default:null},title:{type:String,default:null},path:{type:String,default:null},view:{type:String,default:null},href:{type:String,default:null},items:{type:Array,default:()=>[]}},computed:{topClass(){return{"is-top":this.isTop,"is-sub":!this.isTop,"is-group":this.isGroup,"is-item":!this.isGroup,"is-collapse":this.collapse,"is-expend":!this.collapse,"is-highlight":this.isHighlight}},isTop(){return 0==this.depth},isGroup(){return _.isArray(this.items)},isHighlight(){return this.id&&this.id==this.highlightId}},methods:{onClickGroupInfo(){this.isGroup&&(this.collapse=!this.collapse,this.groupStatusStoreKey&&Ti.Storage.session.set(this.groupStatusStoreKey,this.collapse))},onClickItemInfo(){this.$notify("item:actived",{id:this.id,title:this.title,path:this.path,href:this.href,view:this.view})}},mounted:function(){this.isGroup&&(this.isTop?this.collapse=!1:this.collapse=!0,this.groupStatusStoreKey&&(this.collapse=Ti.Storage.session.getBoolean(this.groupStatusStoreKey,this.collapse)))}};Ti.Preload("ti/com/wn/gui/side/nav/com/side-nav-item/side-nav-item.mjs",t)}(),Ti.Preload("ti/com/wn/gui/side/nav/com/side-nav-item/_com.json",{name:"side-nav-item",template:"./side-nav-item.html",mixins:["./side-nav-item.mjs"]}),Ti.Preload("ti/com/wn/gui/side/nav/wn-gui-side-nav.html",'<div class="wn-gui-side-nav"\n  :class="topClass"\n  v-ti-activable>\n  <side-nav-item v-for="it in theItems"\n    :key="it.key"\n    v-bind="it"\n    @item:actived="onItemActived"/>\n</div>'),function(){const t={inheritAttrs:!1,props:{items:{type:Array,default:null},highlightItemId:{type:String,default:null},highlightItemPath:{type:String,default:null}},computed:{topClass(){return Ti.Css.mergeClassName({"is-self-actived":this.isSelfActived,"is-actived":this.isActived},this.className)},theItems(){let t=[];if(_.isArray(this.items))for(let e of this.items)t.push(this.evalItem(e));return t},theHighlightItemId(){let t=this.joinHighlightItems([],this.items);if(t.length>0)return t.sort((t,e)=>t.score-e.score),_.first(t).id}},methods:{evalItem(t={}){let e=null;if(_.isArray(t.items)){e=[];for(let i of t.items)e.push(this.evalItem(i))}return _.assign(_.pick(t,["id","key","depth","icon","title","path","view"]),{items:e,groupStatusStoreKey:t.key,highlightId:this.theHighlightItemId,href:t.id?Wn.Util.getAppLink(t.id)+"":null})},joinHighlightItems(t=[],e=[]){if(this.highlightItemId&&_.isArray(e)&&e.length>0)for(let i of e){if(i.id==this.highlightItemId)t.push({score:0,id:i.id});else if(i.path&&i.id&&this.highlightItemPath&&this.highlightItemPath.startsWith(i.path)){let e=this.highlightItemPath.length-i.path.length;t.push({score:1+e,id:i.id})}i.items&&this.joinHighlightItems(t,i.items)}return t},onItemActived(t={}){this.$notify("item:active",t)}}};Ti.Preload("ti/com/wn/gui/side/nav/wn-gui-side-nav.mjs",t)}(),Ti.Preload("ti/com/wn/gui/side/nav/_com.json",{name:"wn-gui-side-nav",globally:!0,template:"./wn-gui-side-nav.html",mixins:["./wn-gui-side-nav.mjs"],components:["./com/side-nav-item"]}),Ti.Preload("ti/com/wn/gui/side/tree/wn-gui-side-tree.html",'<ti-tree\n  class="ti-fill-parent wn-gui-side-tree"\n  id-by="value"\n  name-by="name"\n  :display="TreeDisplay"\n  :data="myTreeData"\n  :current-id="highlightItemId"\n  :checked-ids="CheckedIds"\n  keep-open-by="wn-gui-side-tree"\n  :auto-open="true"\n  :default-open-depth="2"\n  :show-root="false"\n  :puppet-mode="true"\n  @select="onItemActived"/>'),function(){const t={data:()=>({myItems:[],myTreeData:[]}),props:{items:{type:Array,default:null},highlightItemId:{type:String,default:null},highlightItemPath:{type:String,default:null}},computed:{TreeDisplay:()=>["<icon>",{key:"text",comConf:{className:"is-nowrap",href:"(value)?/a/open/wn.manager?ph=id:${value}"}}],HighlightItemId(){let t=this.joinHighlightItems([],this.items);if(t.length>0)return t.sort((t,e)=>t.score-e.score),_.first(t).id},CheckedIds(){return this.HighlightItemId?[this.HighlightItemId]:[]}},methods:{evalTreeData(t=[]){this.myItems=_.cloneDeep(t);let e=[];if(_.isArray(t))for(let i of t)e.push(this.evalItemToTreeNode(i));this.myTreeData=e},evalItemToTreeNode(t={}){let e=null;if(_.isArray(t.items)){e=[];for(let i of t.items)e.push(this.evalItemToTreeNode(i))}return{name:t.key,text:t.title,icon:t.icon,value:t.id,children:e}},joinHighlightItems(t=[],e=[]){if(this.highlightItemId&&_.isArray(e)&&e.length>0)for(let i of e){if(i.id==this.highlightItemId)t.push({score:0,id:i.id});else if(i.path&&i.id&&this.highlightItemPath&&this.highlightItemPath.startsWith(i.path)){let e=this.highlightItemPath.length-i.path.length;t.push({score:1+e,id:i.id})}i.items&&this.joinHighlightItems(t,i.items)}return t},onItemActived({current:t={}}={}){t.value&&this.$notify("item:active",{id:t.value})}},watch:{items:{handler:function(t,e){_.isEqual(t,this.myItems)||this.evalTreeData(t)},immediate:!0}}};Ti.Preload("ti/com/wn/gui/side/tree/wn-gui-side-tree.mjs",t)}(),Ti.Preload("ti/com/wn/gui/side/tree/_com.json",{name:"wn-gui-side-tree",globally:!0,template:"./wn-gui-side-tree.html",mixins:["./wn-gui-side-tree.mjs"],components:["@com:ti/tree"]}),Ti.Preload("ti/com/wn/gui/test.json",{layout:{type:"cols",border:!0,blocks:[{name:"C0",icon:"im-award",title:"Test C0",closer:!0,actions:[{type:"group",icon:"zmdi-more-vert",items:[{key:"show-P1",text:"show P1",type:"action",action:"main:showBlock(P1)"},{key:"hide-P1",text:"hide P1",type:"action",action:"main:hideBlock(P1)"}]}],size:"20%",type:"rows",border:!0,blocks:[{name:"C0-1",size:100,body:{comType:"ti-label",comConf:{value:"C0-1 content"}}},{name:"C0-2",body:{comType:"ti-label",comConf:{value:"C0-2 content"}}},{name:"C0-3",body:{comType:"ti-label",comConf:{value:"C0-3 content"}}}]},{name:"C1",icon:"im-award",title:"Test C1",actions:[{type:"group",icon:"zmdi-more-vert",items:[{key:"show-P1",text:"show P1",type:"action",action:"main:showBlock(P1)"},{key:"hide-P1",text:"hide P1",type:"action",action:"main:hideBlock(P1)"}]}],size:"stretch",type:"tabs",blocks:[{name:"C1-1",size:100,body:{comType:"ti-label",comConf:{value:"C1-1 content"}}},{name:"C1-2",body:{comType:"ti-label",comConf:{value:"C1-2 content"}}},{name:"C1-3",body:{comType:"ti-label",comConf:{value:"C1-3 content"}}}]},{name:"C2",body:"C2",size:260}],panels:[{name:"P1",closer:"right",position:"left-top",width:"50%",height:"50%",mask:!0,body:{comType:"ti-label",comConf:{value:"P1"}}}]},schema:{C1:{comType:"ti-label",comConf:{value:"I am C11"}},C2:{comType:"ti-label",comConf:{value:"I am C22"}}},actions:[{key:"reloading",type:"action",icon:"zmdi-refresh",text:"i18n:refresh",altDisplay:{icon:"zmdi-refresh zmdi-hc-spin",text:"i18n:loading"},action:"dispatch:main/reload",shortcut:"CTRL+R"},{key:"show-P1",text:"show P1",type:"action",action:"main:showBlock(P1)"},{key:"hide-P1",text:"hide P1",type:"action",action:"main:hideBlock(P1)"}]}),Ti.Preload("ti/com/wn/gui/wn-gui.html",'<ti-gui\n  v-bind="layout"\n  :schema="schema"\n  :shown="shown"\n  @block:show="showBlock"\n  @block:hide="hideBlock"/>'),function(){const t={inheritAttrs:!1,data:function(){return{shown:{}}},props:{data:{type:Object,default:()=>({})}},computed:{layout(){return this.data?this.data.layout:{}},schema(){return this.data?this.data.schema:{}}},watch:{"data.actions":function(){}},methods:{showBlock(t){this.shown=this.createGuiBlockShown(this.shown,t,!0)},hideBlock(t){this.shown=this.createGuiBlockShown(this.shown,t,!1)}}};Ti.Preload("ti/com/wn/gui/wn-gui.mjs",t)}(),Ti.Preload("ti/com/wn/gui/_com.json",{name:"wn-gui",globally:!0,template:"./wn-gui.html",methods:"@com:ti/gui/ti-gui-methods.mjs",mixins:["./wn-gui.mjs"],components:["@com:ti/gui"]}),Ti.Preload("ti/com/wn/imgfile/wn-imgfile.html",'<ti-imgfile\n  :src="imageSrc"\n  :width="width"\n  :height="height"\n  :progress="progress"\n  :upload-file="uploadFile"\n  :removable="removable"\n  @upload="onUpload"\n  @remove="onRemove"\n  @open="onOpen"/>'),function(){const t={data:()=>({src_ts:null,oImage:null,uploadFile:null,progress:-1}),props:{value:{type:String,default:null},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},removable:{type:Boolean,default:!0},target:{type:String,required:!0,default:null},supportTypes:{type:[String,Array],default:()=>["png","jpg","jpeg","gif"]},supportMimes:{type:[String,Array],default:()=>["image/png","image/jpeg","image/gif"]},filter:{type:[Array,String],default:null},quality:{type:Number,default:0}},computed:{acceptTypes(){return _.isString(this.supportTypes)?this.supportTypes.split(","):this.supportTypes},acceptMimes(){return _.isString(this.supportMimes)?this.supportMimes.split(","):this.supportMimes},imageFilter(){return this.filter?[].concat(this.filter):[]},imageSrc(){if(this.oImage){let t=["/o/content?str=id:",this.oImage.id];return this.src_ts&&(t.push("&_t="),t.push(this.src_ts)),t.join("")}}},methods:{async assertListHas(t,e,i,n){if(!_.isEmpty(t)){let n=!0;for(let i of t)if(i==e){n=!1;break}if(n)return await Ti.Alert(i,{type:"warn",icon:"zmdi-alert-triangle"}),!1}return!0},async onOpen(){if(this.oImage){let t=Wn.Util.getAppLink(this.oImage);await Ti.Be.Open(t.url,{params:t.params})}},async onRemove(){this.oImage&&await Wn.Sys.exec2(`rm id:${this.oImage.id}`),this.$notify("change",null)},async onUpload(t){let e=Ti.Util.getSuffixName(t.name);if(!await this.assertListHas(this.acceptTypes,e,{text:"i18n:wn-invalid-types",vars:{current:e,supports:this.acceptTypes.join(", ")}}))return;if(!await this.assertListHas(this.acceptMimes,t.type,{text:"i18n:wn-invalid-mimes",vars:{current:t.type,supports:this.acceptMimes.join(", ")}}))return;this.uploadFile=t,this.progress=0;let{ok:i,msg:n,data:a}=await Wn.Io.uploadFile(t,{target:this.target,mode:"r",progress:t=>{this.progress=t.loaded/t.total}});if(this.uploadFile=null,this.progress=-1,i){if(!_.isEmpty(this.imageFilter)){let t=["imagic",`id:${a.id}`,`-filter "${this.imageFilter.join(" ")}"`];this.quality>0&&this.quality<=1&&t.push(`-qa ${this.quality}`),t.push("-out inplace");let e=t.join(" ");await Wn.Sys.exec2(e)}this.src_ts=Date.now(),this.oImage=a,this.$notify("change",a)}else await Ti.Alert(`i18n:${n}`,{type:"warn",icon:"zmdi-alert-triangle"})},async reload(){this.value?this.oImage=await Wn.Io.loadMeta(this.value):this.oImage=null}},watch:{value:function(){this.reload()}},mounted:async function(){await this.reload()}};Ti.Preload("ti/com/wn/imgfile/wn-imgfile.mjs",t)}(),Ti.Preload("ti/com/wn/imgfile/_com.json",{name:"wn-imgfile",globally:!0,template:"./wn-imgfile.html",mixins:["./wn-imgfile.mjs"],components:["@com:ti/imgfile"]}),Ti.Preload("ti/com/wn/label/wn-label.html",'<ti-label\n  :class-name="className"\n  :blank-as="blankAs"\n  :value="theValue"\n  :format="format"\n  :prefix-icon="prefixIcon"\n  :prefix-text="prefixText"\n  :suffix-text="suffixText"\n  :suffix-icon="suffixIcon"\n  :href="href"\n  :new-tab="newTab"/>'),function(){const t={inheritAttrs:!1,data:()=>({theValue:null}),props:{blankAs:{type:String,default:"i18n:nil"},value:null,format:void 0,prefixIcon:{type:String,default:null},prefixText:{type:String,default:null},suffixText:{type:String,default:null},suffixIcon:{type:String,default:null},dict:{type:String,default:null},href:{type:String,default:null},newTab:{type:Boolean,default:!1}},watch:{value:async function(){await this.evalTheValue()}},methods:{async evalTheValue(){!Ti.Util.isNil(this.value)&&this.dict?this.theValue=await Wn.Dict.get(this.dict,this.value):this.theValue=this.value}},mounted:async function(){await this.evalTheValue()}};Ti.Preload("ti/com/wn/label/wn-label.mjs",t)}(),Ti.Preload("ti/com/wn/label/_com.json",{name:"wn-label",globally:!0,template:"./wn-label.html",mixins:["./wn-label.mjs"],components:["@com:ti/label"]}),Ti.Preload("ti/com/wn/list/wn-list.html",'<ti-list\n  v-bind="this"\n  :display="DisplayItems"\n  :on-init="OnSubListInit"\n  @select="OnSelected"\n  @open="$notify(\'open\', $event)"/>'),function(){const t={inheritAttrs:!1,data:()=>({isAllChecked:!1,hasChecked:!1,theCurrentId:!1,theCheckedIds:!1}),props:{iconBy:{type:[String,Function],default:void 0},indentBy:{type:[String,Function],default:void 0},itemClassName:void 0,display:{type:[Object,String,Array],default:()=>({key:"..",comType:"ti-label"})},border:{type:Boolean,default:!0},autoScrollIntoView:{type:Boolean,default:!0}},computed:{DisplayItems(){return this.explainDisplayItems(this.display)}},methods:{OnSubListInit(t){this.$list=t},OnSelected(t={}){this.theCheckedIds=t.checkedIds,this.theCurrentId=t.currentId,this.syncCheckStatus(),this.$notify("select",t)},syncCheckStatus(){this.isAllChecked=this.$list.isAllChecked,this.hasChecked=this.$list.hasChecked},selectPrevRow(t){this.$list.selectPrevRow(t)},selectNextRow(t){this.$list.selectNextRow(t)},getCurrentRow(t){return this.$list.getCurrentRow(t)},getCheckedRow(t){return this.$list.getCheckedRow(t)},getCurrent(t){return this.$list.getCurrent(t)},getChecked(t){return this.$list.getChecked(t)},selectRow(t){this.$list.selectRow(t)},checkRow(t){this.$list.checkRow(t)},cancelRow(t){this.$list.cancelRow(t)}},watch:{data:function(){this.syncCheckStatus()},checkedIds:function(){this.syncCheckStatus()}}};Ti.Preload("ti/com/wn/list/wn-list.mjs",t)}(),Ti.Preload("ti/com/wn/list/_com.json",{name:"wn-list",globally:!0,template:"./wn-list.html",props:["@com:ti/support/list_props.mjs"],mixins:["@com:wn/support/wn_list_wrapper_mixins.mjs","./wn-list.mjs"],components:["@com:ti/table"]}),Ti.Preload("ti/com/wn/obj/form/wn-obj-form.html",'<ti-form \n  v-bind="this"\n  :auto-show-blank="isAutoShowBlank"\n  :class-name="className"\n  @field:change="OnFieldChange"\n  @change="OnChange"\n  @invalid="OnInvalid"/>'),function(){const t={props:{fuse:{type:Object,default:()=>({key:"wn-obj-form",noti:null})},setDataBy:{type:[String,Object,Boolean],default:null},updateBy:{type:[String,Object,Boolean],default:null},setFieldStatusBy:{type:[String,Object,Boolean],default:null}},computed:{isAutoShowBlank(){return Ti.Util.fallback(this.autoShowBlank,!0)}},methods:{doAction(t,e,i){_.isPlainObject(e)?Ti.App(this)[e.method](e.target,i):_.isString(e)?Ti.App(this).exec(e,i):e&&this.$notify(t,i)},OnFieldChange({name:t,value:e}={}){this.doAction("field:change",this.updateBy,{name:t,value:e})},OnChange(t){this.doAction("change",this.setDataBy,t)},OnInvalid(t){let e={name:t.name,message:[t.errMessage,t.value].join(" :: "),status:"warn"};this.doAction("invalid",this.setFieldStatusBy,e)}}};Ti.Preload("ti/com/wn/obj/form/wn-obj-form.mjs",t)}(),Ti.Preload("ti/com/wn/obj/form/_com.json",{name:"wn-obj-form",globally:!0,template:"./wn-obj-form.html",props:"@com:ti/form/ti-form-props.mjs",mixins:["./wn-obj-form.mjs"],components:["@com:ti/form","@com:wn/transfer","@com:wn/droplist","@com:wn/combo/input","@com:wn/imgfile","@com:wn/combo/multi-input"]}),Ti.Preload("ti/com/wn/obj/icon/wn-obj-icon.html",'<ti-icon \n  class="wn-obj-icon" \n  :class="topClass"\n  :value="theIcon"/>'),function(){const t={inheritAttrs:!1,props:{icon:{type:String,default:null},thumb:{type:String,default:null},mime:{type:String,default:null},type:{type:String,default:null},race:{type:String,default:null},candidateIcon:{type:String,default:null},timestamp:{type:Number,default:0}},computed:{topClass(){return Ti.Css.mergeClassName(this.className)},theIcon(){return Wn.Util.getObjThumbIcon({candidateIcon:this.candidateIcon,timestamp:this.timestamp,thumb:this.thumb,icon:this.icon,mime:this.mime,type:this.type,race:this.race},"fas-cube")}},methods:{}};Ti.Preload("ti/com/wn/obj/icon/wn-obj-icon.mjs",t)}(),Ti.Preload("ti/com/wn/obj/icon/_com.json",{name:"wn-obj-icon",globally:!0,template:"./wn-obj-icon.html",mixins:["./wn-obj-icon.mjs"]}),Ti.Preload("ti/com/wn/obj/json/wn-obj-json.html",'<div class="wn-obj-json">\n  \x3c!--\n    Show Text Editor\n  --\x3e\n  <ti-text-json v-if="hasMeta"\n    class="ti-fill-parent"\n    :value="value"\n    :data="data"\n    @change="onChangeContent"/>\n  \x3c!--\n    Empty Data\n  --\x3e\n  <ti-loading v-else/>\n</div>'),function(){const t={props:{meta:{type:Object,default:()=>({})},value:{type:String,default:null},status:{type:Object,default:()=>({})}},computed:{hasMeta(){return!!this.meta}},methods:{onChangeContent(t){this.$notify("change",t)}},mounted:function(){Ti.Fuse.getOrCreate().add({key:"wn-obj-json",everythingOk:()=>!this.status.changed,fail:()=>{Ti.Toast.Open("i18n:wn-obj-nosaved","warn")}})},beforeDestroy:function(){Ti.Fuse.get().remove("wn-obj-json")}};Ti.Preload("ti/com/wn/obj/json/wn-obj-json.mjs",t)}(),Ti.Preload("ti/com/wn/obj/json/_com.json",{name:"wn-obj-json",globally:!0,template:"./wn-obj-json.html",mixins:["./wn-obj-json.mjs"],components:["@com:ti/text/json"]}),function(){const t={meta:{type:[Object,String],default:null},mediaSrcMode:{type:String,default:"path",validator:t=>/^(path|fullPath|idPath|id)$/.test(t)},keepLastBy:{type:String,default:"wn-markdown-richeditor-last-open"},defaultMediaDir:{type:String,default:"~"}};Ti.Preload("ti/com/wn/obj/markdown/richeditor/wn-markdown-richeditor-props.mjs",t)}(),Ti.Preload("ti/com/wn/obj/markdown/richeditor/wn-markdown-richeditor.html",'<TiTextMarkdownRicheditor\n  v-bind="this"\n  :actions="ToolbarActions"\n  :markdown-media-src="TheMarkdownMediaSrc"\n  :preview-media-src="ThePreviewMediaSrc"\n  :value="TheValue"\n  :on-init="OnEditorInit"/>'),function(){const t={computed:{ToolbarActions(){return _.merge({Media:{icon:"fas-photo-video",action:()=>this.OnInsertMedia()}},this.actions)},TheValue(){return this.value},TheMarkdownMediaSrc(){return this.markdownMediaSrc?this.markdownMediaSrc:async t=>{let e=/^\/o\/content\?str=id:(.+)$/.exec(t);if(e){let t=await Wn.Io.loadMetaById(e[1]);if(t){return Wn.Io.formatObjPath(t,this.mediaSrcMode,this.meta)}}return t}},ThePreviewMediaSrc(){return this.previewMediaSrc?this.previewMediaSrc:async t=>{if(/^(https?:)(\/\/)/.test(t))return t;let e=await Wn.Io.loadMetaBy(t,this.meta);return e?`/o/content?str=id:${e.id}`:t}}},methods:{OnEditorInit(t){this.$editor=t},async OnInsertMedia(){let t=this.meta||this.defaultMediaDir;this.keepLastBy&&(t=Ti.Storage.local.getString(this.keepLastBy)||t);let e=await Wn.OpenObjSelector(t,{fallbackPath:this.defaultMediaDir});if(e&&!_.isEmpty(e)){if(this.keepLastBy){let t=_.first(e),i=Ti.Util.getParentPath(t.ph),n=Wn.Session.getFormedPath(i);Ti.Storage.local.set(this.keepLastBy,n)}for(let t of e)this.insertMediaObj(t)}},insertMediaObj(t={}){let e=t.mime;if(!e)return;let i=`/o/content?str=id:${t.id}`;e.startsWith("video/")?this.insertMedia("video",i,{controls:!1,autoplay:!1}):e.startsWith("image/")&&this.insertMedia("image",i)},insertMedia(t="image",e,i={}){if(!e)return;let n=new(Quill.import("delta")),a=this.$editor.getSelection();a||(this.$editor.setSelection(0),a={index:0,length:0});let{index:s,length:o}=a;n.retain(s),o>0&&n.delete(o),n.insert({[t]:e,attributes:i}),this.$editor.updateContents(n),this.$editor.setSelection(s+1)}}};Ti.Preload("ti/com/wn/obj/markdown/richeditor/wn-markdown-richeditor.mjs",t)}(),Ti.Preload("ti/com/wn/obj/markdown/richeditor/_com.json",{name:"wn-obj-markdown-richeditor",globally:!0,template:"./wn-markdown-richeditor.html",props:["@com:ti/text/markdown/richeditor/ti-markdown-richeditor-props.mjs","./wn-markdown-richeditor-props.mjs"],methods:"@com:ti/text/markdown/richeditor/ti-markdown-richeditor-delegate-methods.mjs",mixins:["./wn-markdown-richeditor.mjs"],components:["@com:ti/text/markdown/richeditor"]}),Ti.Preload("ti/com/wn/obj/picker/wn-obj-picker.html",'<div class="wn-obj-picker">\n  <ti-box ref="box"\n    :empty="empty"\n    :items="formedItems"\n    :loading="loading"\n    :multi="multi"\n    :icon="theChooseIcon"\n    :clear-icon="clearIcon"\n    @open="openPicker"\n    @remove="onRemoveItem"\n    @clear="onClearItems"/>\n</div>'),function(){const t={data:()=>({loading:!1,items:[]}),props:{empty:{type:Object,default:()=>({text:"i18n:no-selected",value:void 0})},value:{type:[Object,String,Array],default:null},base:{type:[Object,String],default:"~"},multi:{type:Boolean,default:!1},clearIcon:{type:[String,Object],default:"zmdi-close-circle"},chooseIcon:{type:String,default:"zmdi-folder-outline"},textBy:{type:[String,Array],default:null}},watch:{value:function(){this.reload()}},computed:{formedItems(){let t=[];for(let e of this.items){let i={icon:Wn.Util.genPreviewObj(e),text:Wn.Util.getObjDisplayName(e,this.textBy),value:e.id};t.push(i)}return t},oneItem(){let t=_.isArray(this.value)?_.get(this.value,0):this.value;return"id:"==t||!t||_.isEmpty(t)?null:t},theChooseIcon(){return _.isEmpty(this.items)?this.chooseIcon:null}},methods:{async openPicker(){let t=this.oneItem,e=!1;t&&!_.isEmpty(t)||(t=this.base||"~",e=!0);let i=await Wn.OpenObjSelector(t,{multi:this.multi,selected:this.items,autoOpenDir:e});_.isUndefined(i)||this.$notify("change",i)},onRemoveItem(t){let e=[];for(let i=0;i<this.items.length;i++){let n=this.items[i],a=this.formedItems[i];_.isEqual(a.value,t.value)||e.push(n)}this.$notify("change",e)},onClearItems(){console.log("remove!!"),this.$notify("change",this.multi?[]:null)},async reload(){this.loading=!0,await this.doReload(),this.loading=!1},async doReload(){let t=this.value?[].concat(this.value):[],e=[];for(let i of t){let t=await this.reloadItem(i);if(t&&e.push(t),!this.multi&&e.length>0)break}this.items=e},async reloadItem(t){if(!t||_.isEmpty(t))return null;if(_.isString(t))return await Wn.Io.loadMeta(t);if(t.id)return await Wn.Io.loadMetaById(t.id);throw Ti.Err.make("e-wn-obj-picker-unsupported-value-form",t)}},mounted:async function(){await this.reload()}};Ti.Preload("ti/com/wn/obj/picker/wn-obj-picker.mjs",t)}(),Ti.Preload("ti/com/wn/obj/picker/_com.json",{name:"wn-obj-picker",globally:!0,template:"./wn-obj-picker.html",mixins:["./wn-obj-picker.mjs"],components:["@com:wn/adaptlist"]}),Ti.Preload("ti/com/wn/obj/preview/com/preview-info-field/preview-info-field.html",'<div class="info-field">\n  <div class="as-name" :style="theNameStyle">\n    <ti-icon v-if="icon" class="it-icon" :value="icon"/>\n    <span class="it-text">{{title|i18n}}</span>\n  </div>\n  <div class="as-value" :style="theValueStyle">{{theValue}}</div>\n</div>'),function(){const t={data:()=>({theValue:null}),props:{icon:{type:String,default:null},data:{type:Object,default:()=>({})},type:{type:String,default:"String"},title:{type:String,default:null},name:{type:String,default:null},dict:{type:String,default:null},nameWidth:{type:[String,Number],default:50},valueWidth:{type:[String,Number],default:200},transformer:{type:[String,Object,Function],default:null}},watch:{data:async function(){this.theValue=await this.evalTheValue()},name:async function(){this.theValue=await this.evalTheValue()}},computed:{theTransformer(){let t=this.transformer||"Ti.Types."+Ti.Types.getFuncByType(this.type||"String","transformer");return Ti.Util.genInvoking(t,{context:this.data,partialRight:!0})},theNameStyle(){return Ti.Css.toStyle({width:this.nameWidth})},theValueStyle(){return Ti.Css.toStyle({width:this.valueWidth})}},methods:{async evalTheValue(){let t=_.get(this.data,this.name);return this.dict&&(t=await wn.Dict.get(this.dict,t)),_.isFunction(this.theTransformer)&&(t=this.theTransformer(t)),t}},mounted:async function(){this.theValue=await this.evalTheValue()}};Ti.Preload("ti/com/wn/obj/preview/com/preview-info-field/preview-info-field.mjs",t)}(),Ti.Preload("ti/com/wn/obj/preview/com/preview-info-field/_com.json",{name:"wn-obj-preview-info-field",globally:!0,template:"./preview-info-field.html",mixins:["./preview-info-field.mjs"]}),Ti.Preload("ti/com/wn/obj/preview/wn-obj-preview.html",'<div class="wn-obj-preview" :class="TopClass">\n  \x3c!--\n    With content\n  --\x3e\n  <div class="wop-con" v-if="hasMeta">\n    \x3c!--Main View--\x3e\n    <component class="as-main"\n      :is="PreviewComType"\n      :icon="DataIcon"\n      :title="DataTitle"\n      :src="DataSource"/>\n    \x3c!--ActionBar at top--\x3e\n    <div class="as-abar">\n      <ul>\n        <li v-for="it in TheActions"\n          @click.left="OnAction(it.action)">\n          <ti-icon class="it-icon" :value="it.icon"/>\n        </li>\n      </ul>\n    </div>\n    \x3c!--Meta at bottom--\x3e\n    <div class="as-info" v-if="isShowInfo">\n      \x3c!--\n        Head\n      --\x3e\n      <div class="info-head">\n        \x3c!--Pin Status Icon--\x3e\n        <span class="it-icon" @click.left="toggleInfoFloat">\n          <ti-icon :value="PreviewInfoPinIcon"/>\n        </span>\n        \x3c!--Head text--\x3e\n        <span class="it-text">{{\'i18n:info\'|i18n}}</span>\n        \x3c!--Edit Button--\x3e\n        <span class="it-edit"\n          @click.left="OnEditInfo">{{\'i18n:edit\'|i18n}}</span>\n      </div>\n      \x3c!--\n        Fields\n      --\x3e\n      <div class="info-field-con">\n        <wn-obj-preview-info-field\n          v-for="fld in PrevewInfoFields"\n          :key="fld.name"\n          v-bind="fld"\n          :data="meta"/>\n      </div>\n    </div>\n  </div>\n  \x3c!--\n    Empty \n  --\x3e\n  <div v-else\n    class="ti-blank is-big">\n    <ti-icon value="fas-file-image"/>\n    <span>{{\'nil-obj\'|i18n}}</span>\n  </div>\n</div>'),function(){const t={data:()=>({isInFullScreen:!1,isShowInfo:!1,isFloatInfo:!1}),props:{meta:{type:Object,default:()=>({})},status:{type:Object,default:()=>({})},actions:{type:Array,default:()=>["fullscreen","newtab","download","info"]},showInfo:{type:Boolean,default:!1},floatInfo:{type:Boolean,default:!1},editInfoBy:{type:[Function,String],default:null},infoPosition:{type:String,default:"bottom",validator:t=>/^(bottom|left)$/.test(t)},infoNameWidth:{type:[String,Number],default:50},infoValueWidth:{type:[String,Number],default:200},infoFields:{type:Array,default:()=>["nm","tp","mime","width","height","len","duration"]},stateLocalKey:{type:String,default:null}},computed:{hasMeta(){return!_.isEmpty(this.meta)},TopClass(){return{"is-fullscreen":this.isInFullScreen,"is-show-info":this.isShowInfo,"is-float-info":this.isFloatInfo,[`is-info-at-${this.infoPosition}`]:!0}},PreviewComType(){if(this.meta){let t=this.meta.mime||"";return t.startsWith("video/")?"ti-media-video":t.startsWith("image/")?"ti-media-image":"ti-media-binary"}},PreviewInfoPinIcon(){return this.isFloatInfo?"fas-thumbtack":"zmdi-layers"},PrevewInfoFields(){return Wn.Obj.evalFields(this.meta,this.infoFields,t=>{if(!t.quickName||!_.isUndefined(t.value))return"Group"==t.type?t:_.defaults(t,{nameWidth:this.infoNameWidth,valueWidth:this.infoValueWidth})})},TheActions(){let t=[];return this.hasMeta&&_.forEach(this.actions,e=>{"fullscreen"==e?this.isInFullScreen?t.push({icon:"zmdi-fullscreen-exit",text:"i18n:wop-fullscreen-quit",action:()=>this.exitFullscreen()}):t.push({icon:"zmdi-fullscreen",text:"i18n:wop-fullscreen-enter",action:()=>this.enterFullscreen()}):"newtab"==e?t.push({icon:"zmdi-open-in-new",text:"i18n:open-newtab",action:()=>this.openInNewTab()}):"download"==e?t.push({icon:"zmdi-download",text:"i18n:download-to-local",action:()=>this.download()}):"info"==e?this.isShowInfo?t.push({icon:"zmdi-info-outline",text:"i18n:info",action:()=>this.doHideInfo()}):t.push({icon:"zmdi-info",text:"i18n:info",action:()=>this.doShowInfo()}):_.isPlainObject(e)&&e.action&&t.push(e)}),t},DataSource(){if(!this.meta)return"";return Wn.Util.getDownloadLink(this.meta,{mode:"auto"}).toString()},DataIcon(){return Wn.Util.getIconObj(this.meta)},DataTitle(){return Wn.Util.getObjDisplayName(this.meta)}},methods:{OnAction(t){_.isString(t)?Ti.App(this).exec(actionName):_.isFunction(t)&&t()},OnEditInfo(){this.meta&&(_.isString(this.editInfoBy)?Ti.App(this).exec(this.editInfoBy,this.meta):_.isFunction(this.editInfoBy)?this.editInfoBy(this.meta):Wn.EditObjMeta(this.meta))},enterFullscreen(){this.isInFullScreen=!0,this.resizeMediaViewport()},exitFullscreen(){this.isInFullScreen=!1,this.resizeMediaViewport()},doShowInfo(){this.isShowInfo=!0,this.saveStateToLocal(),this.resizeMediaViewport()},doHideInfo(){this.isShowInfo=!1,this.saveStateToLocal(),this.resizeMediaViewport()},toggleInfoFloat(){this.isFloatInfo=!this.isFloatInfo,this.saveStateToLocal(),this.resizeMediaViewport()},resizeMediaViewport(){for(let t of this.$children)_.isFunction(t.onResizeViewport)&&this.$nextTick(()=>{t.onResizeViewport()})},openInNewTab(){let t=Wn.Util.getAppLink(this.meta);Ti.Be.OpenLink(t)},download(){let t=Wn.Util.getDownloadLink(this.meta);Ti.Be.OpenLink(t)},saveStateToLocal(){this.stateLocalKey&&Ti.Storage.session.mergeObject(this.stateLocalKey,{isShowInfo:this.isShowInfo,isFloatInfo:this.isFloatInfo})},loadStateFromLocal(){if(this.stateLocalKey){let t=Ti.Storage.session.getObject(this.stateLocalKey);_.defaults(t,{isShowInfo:this.isShowInfo,isFloatInfo:this.isFloatInfo}),this.isShowInfo=t.isShowInfo,this.isFloatInfo=t.isFloatInfo}}},watch:{showInfo:function(t){console.log("showInfo watched"),this.isShowInfo=t},floatInfo:function(t){console.log("floatInfo watched"),this.isFloatInfo=t}},mounted:function(){this.isShowInfo=this.showInfo,this.isFloatInfo=this.floatInfo,this.$nextTick(()=>{this.loadStateFromLocal()})}};Ti.Preload("ti/com/wn/obj/preview/wn-obj-preview.mjs",t)}(),Ti.Preload("ti/com/wn/obj/preview/_com.json",{name:"wn-obj-preview",globally:!0,i18n:"@i18n:wn-obj-preview",template:"./wn-obj-preview.html",mixins:["./wn-obj-preview.mjs"],components:["./com/preview-info-field","@com:ti/media/binary","@com:ti/media/image","@com:ti/media/video"]}),Ti.Preload("ti/com/wn/obj/puretext/wn-obj-puretext.html",'<div class="wn-obj-puretext">\n  \x3c!--\n    Show Text Editor\n  --\x3e\n  <ti-text-raw v-if="hasMeta"\n    class="ti-fill-parent"\n    :icon="theIcon"\n    :title="theTitle"\n    :show-title="showTitle"\n    :value="content"\n    :content-is-changed="status.changed"\n    :blank-text="blankText"\n    @change="onChangeContent"/>\n  \x3c!--\n    Empty Data\n  --\x3e\n  <div v-else\n    class="ti-blank is-big">\n    <ti-icon value="zmdi-alert-circle-o"/>\n    <span>{{"empty-data"|i18n}}</span>\n  </div>\n</div>'),function(){const t={inheritAttrs:!0,props:{meta:{type:Object,default:()=>({})},content:{type:String,default:null},savedContent:{type:String,default:null},contentType:{type:String,default:null},showTitle:{type:Boolean,default:!0},status:{type:Object,default:()=>({})},blankText:{type:String,default:"i18n:blank"}},computed:{theIcon(){return this.meta?Wn.Util.getIconObj(this.meta):Ti.Icons.get()},theTitle(){return this.meta?this.meta.title||this.meta.nm:"no-title"},hasMeta(){return!!this.meta}},methods:{onChangeContent(t){this.$notify("change",{content:t})}},mounted:function(){Ti.Fuse.getOrCreate().add({key:"wn-obj-puretext",everythingOk:()=>!this.status.changed,fail:()=>{Ti.Toast.Open("i18n:wn-obj-nosaved","warn")}})},beforeDestroy:function(){Ti.Fuse.get().remove("wn-obj-puretext")}};Ti.Preload("ti/com/wn/obj/puretext/wn-obj-puretext.mjs",t)}(),Ti.Preload("ti/com/wn/obj/puretext/_com.json",{name:"wn-obj-puretext",globally:!0,template:"./wn-obj-puretext.html",mixins:["./wn-obj-puretext.mjs"],components:["@com:ti/text/raw"]}),Ti.Preload("ti/com/wn/obj/uploader/wn-obj-uploader.html",'<ti-uploader\n  :value="formedValue"/>'),function(){const t={props:{value:{type:[String,Object,Array],default:null},multi:{type:Boolean,default:!0},removable:{type:Boolean,default:!0},remained:{type:Number,default:0},target:{type:String,default:null},nameTransformer:{type:[Function,String,Object],default:null},supportTypes:{type:[Array,String],default:null},imageFilter:{type:[Array,String],default:null},imageQuality:{type:Number,default:0}},computed:{formedValue:()=>null},methods:{getObj(t){t&&_.isString(t)}}};Ti.Preload("ti/com/wn/obj/uploader/wn-obj-uploader.mjs",t)}(),Ti.Preload("ti/com/wn/obj/uploader/_com.json",{name:"wn-obj-uploader",globally:!0,template:"./wn-obj-uploader.html",mixins:["./wn-obj-uploader.mjs"],components:["@com:ti/uploader"]}),function(){const t={methods:{explainDisplayItems(t=[]){let e=_.concat(t),i=[];return _.forEach(e,t=>{if(!Ti.Util.isNil(t)){if(_.isString(t)){let e=/^@<thumb(:([^>]*))?>$/.exec(t);if(e){let t=e[2]||void 0;return void i.push({key:["icon","thumb","tp","mime","race","__updated_time"],type:"Object",transformer:{name:"Ti.Types.toObject",args:{icon:"icon",thumb:"thumb",type:"tp",mime:"mime",race:"race",timestamp:"__updated_time"}},comType:"wn-obj-icon",comConf:{"...":"${=value}",candidateIcon:t}})}}i.push(t)}}),i}}};Ti.Preload("ti/com/wn/support/wn_list_wrapper_mixins.mjs",t)}(),Ti.Preload("ti/com/wn/table/wn-table.html",'<ti-table\n  v-bind="this"\n  :fields="TheFields"\n  :on-init="OnSubListInit"\n  @select="OnSelected"\n  @open="$notify(\'open\', $event)"/>'),function(){const t={data:()=>({isAllChecked:!1,hasChecked:!1,theCurrentId:!1,theCheckedIds:!1}),computed:{TheFields(){let t=[];for(let e of this.fields){let i=_.assign({},e);i.display=this.explainDisplayItems(e.display),t.push(i)}return t}},methods:{OnSubListInit(t){this.$list=t},OnSelected(t={}){this.theCheckedIds=t.checkedIds,this.theCurrentId=t.currentId,this.syncCheckStatus(),this.$notify("select",t)},syncCheckStatus(){this.isAllChecked=this.$list.isAllChecked,this.hasChecked=this.$list.hasChecked},selectPrevRow(t){this.$list.selectPrevRow(t)},selectNextRow(t){this.$list.selectNextRow(t)},getCurrentRow(t){return this.$list.getCurrentRow(t)},getCheckedRow(t){return this.$list.getCheckedRow(t)},getCurrent(t){return this.$list.getCurrent(t)},getChecked(t){return this.$list.getChecked(t)},selectRow(t){this.$list.selectRow(t)},checkRow(t){this.$list.checkRow(t)},cancelRow(t){this.$list.cancelRow(t)}},watch:{data:function(){this.syncCheckStatus()},checkedIds:function(){this.syncCheckStatus()}}};Ti.Preload("ti/com/wn/table/wn-table.mjs",t)}(),Ti.Preload("ti/com/wn/table/_com.json",{name:"wn-table",globally:!0,template:"./wn-table.html",props:["@com:ti/support/list_props.mjs","@com:ti/table/ti-table-props.mjs"],mixins:["@com:wn/support/wn_list_wrapper_mixins.mjs","./wn-table.mjs"],components:["@com:ti/table"]}),Ti.Preload("ti/com/wn/thing/manager/com/thing-creator/thing-creator.html",'<div class="thing-creator ti-box-relative">\n  <ti-form\n    :fields="fields"\n    :only-fields="onlyFields"\n    :fixed="fixed"\n    :data="TheData"\n    :on-init="OnFormInit"\n    @field:change="OnFormFieldChange"\n    @change="OnFormChange"\n    @submit="OnSubmit"/>\n  <hr class="no-space">\n  <div class="ti-flex-center ti-padding-10">\n    <div class="ti-btn is-big" \n      @click="OnCreate">\n      <span>{{\'create-now\'|i18n}}</span>\n    </div>\n  </div>\n  <div v-if="creating"\n    class="ti-box-mask as-thin ti-flex-center">\n    <ti-loading text="i18n:creating"/>\n  </div>\n</div>'),function(){const t={data:()=>({myData:void 0,creating:!1}),props:{fields:{type:Array,default:()=>[]},data:{type:Object,default:()=>({})},onlyFields:{type:Boolean,default:!1},fixed:{type:Object,default:void 0}},computed:{TheData(){return this.myData||this.data}},methods:{OnFormInit(t){this.$form=t},OnFormFieldChange(t={}){this.myData=this.$form.getData(t)},OnFormChange(t){this.myData=t},async OnCreate(){this.creating=!0,await Ti.App(this).dispatch("main/create",this.myData),this.$notify("block:hide","creator")},async OnSubmit(){this.$nextTick(()=>{this.OnCreate()})}},mounted(){this.myData=this.$form.getData()}};Ti.Preload("ti/com/wn/thing/manager/com/thing-creator/thing-creator.mjs",t)}(),Ti.Preload("ti/com/wn/thing/manager/com/thing-creator/_com.json",{name:"wn-thing-creator",globally:!0,template:"./thing-creator.html",mixins:["./thing-creator.mjs"],components:[]}),function(){const t={dirName:{type:String,default:"media"},dataHome:{type:String,default:null},files:{type:Object,default:void 0},preview:{type:Object,default:void 0},previewEdit:{type:Object,default:void 0},actions:{type:Array,default:()=>[{name:"reloading",type:"action",icon:"zmdi-refresh",tip:"i18n:refresh",altDisplay:{icon:"zmdi-refresh zmdi-hc-spin"},action:"$parent:reloadData"},{type:"line"},{name:"deleting",type:"action",icon:"zmdi-delete",text:"i18n:del",altDisplay:{icon:"zmdi-refresh zmdi-hc-spin",text:"i18n:del-ing"},action:"$parent:doDeleteSelected"},{type:"line"},{name:"upload",type:"action",icon:"zmdi-cloud-upload",text:"i18n:upload",action:"$parent:doUploadFiles"}]},stateLocalKey:{type:String,default:null},dirNameTip:{type:String,default:"i18n:thing-files"},dirNameComType:{type:String,default:"ti-droplist"},dirNameOptions:{type:Array,default:()=>[{icon:"zmdi-collection-image",text:"i18n:media",value:"media"},{icon:"zmdi-attachment-alt",text:"i18n:attachment",value:"attachment"}]},nilIcon:{type:String,default:"fas-braille"},nilText:{type:String,default:null}};Ti.Preload("ti/com/wn/thing/manager/com/thing-files/thing-files-props.mjs",t)}(),Ti.Preload("ti/com/wn/thing/manager/com/thing-files/thing-files.html",'<div class="wn-thing-files">\n  \x3c!--\n    With Data Home\n  --\x3e\n  <template v-if="dataHome">\n    \x3c!--\n      Head bar for switch dir and actions\n    --\x3e\n    <div class="as-header">\n      <div v-if="dirNameTip"\n        class="as-tip">\n        <span>{{dirNameTip|i18n}}</span>\n      </div>\n      \x3c!--Left: select files home dirName--\x3e\n      <div class="as-name">\n        <component \n          :is="dirNameComType"\n          height=".3rem"\n          :allow-empty="false"\n          :options="dirNameOptions"\n          :value="dirName"\n          :prefix-icon-for-clean="false"\n          @change="OnDirNameChanged"/>\n      </div>\n      \x3c!--Right: Common Actions--\x3e\n      <div class="as-menu">\n        <ti-actionbar \n          :items="actions"\n          :status="myStatus"/>\n      </div>\n    </div>\n    \x3c!--\n      File Preview\n    --\x3e\n    <div class="as-preview">\n      <wn-obj-preview\n        class="ti-fill-parent"\n        v-bind="ThePreview"\n        :meta="CurrentFile"/>\n    </div>\n    \x3c!--\n      File List\n    --\x3e\n    <div class="as-list">\n      <wn-adaptlist\n        class="ti-fill-parent"\n        v-bind="TheFiles"\n        :data="myData"\n        :meta="myDataDirObj"\n        :status="myStatus"\n        :before-upload="checkDataDir"\n        @uploaded="OnFileUploaded"\n        @select="OnFileSelect"\n        @open="OnFileOpen"\n        :on-init="OnAdaptListInit"/>\n    </div>\n  </template>\n  \x3c!--\n    Without Data Home\n  --\x3e\n  <ti-loading\n    v-else\n      class="nil-datahome as-big-mask"\n      :text="nilText"\n      :icon="nilIcon"/>\n</div>'),function(){const t={inject:["$ThingManager"],data:()=>({myDataDirObj:null,myData:{},myStatus:{reloading:!1},myCurrentId:null}),computed:{hasDataHome(){return!!this.dataHome},CurrentFile(){if(this.myCurrentId&&this.myData.list)for(let t of this.myData.list)if(this.myCurrentId==t.id)return t},ThePreview(){let t=Ti.Util.getFallback(this.preview,this.dirName,"@default")||this.preview||{};return{showInfo:!1,floatInfo:!1,infoPosition:"left",infoNameWidth:40,infoValueWidth:120,stateLocalKey:this.stateLocalKey,...t,editInfoBy:()=>{this.editPreviewInfo()}}},TheFiles(){return _.assign({},this.files,{routers:{reload:async()=>{await this.reloadData()}}})}},methods:{OnAdaptListInit(t){this.$adaptlist=t},OnDirNameChanged(t){Ti.App(this).commit("main/setCurrentDataDir",t),this.$nextTick(()=>{this.reloadData()})},OnFileSelect({currentId:t}){this.myCurrentId=t},OnFileOpen({id:t,item:e}){this.$notify("file:open",e)},async OnFileUploaded(t=[]){let e=_.first(t);e&&(this.$adaptlist.myCurrentId=e.id,this.myCurrentId=e.id),await Ti.App(this).dispatch("main/autoSyncCurrentFilesCount")},async doDeleteSelected(){await this.$adaptlist.doDelete(),await Ti.App(this).dispatch("main/autoSyncCurrentFilesCount")},async checkDataDir(){if(this.hasDataHome&&!this.myDataDirObj){let t=this.dataHome.indexOf("/"),e=this.dataHome.substring(0,t),i={race:"DIR",nm:Ti.Util.appendPath(this.dataHome.substring(t+1),this.dirName)},n=`obj "${e}" -IfNoExists -new '${JSON.stringify(i)}' -cqno`,a=await Wn.Sys.exec2(n,{as:"json"}),s=await Wn.Io.loadMetaBy(this.dataHome);Ti.App(this).commit("main/setCurrentDataHomeObj",s),this.myDataDirObj=a}},async doUploadFiles(){if(await this.checkDataDir(),!this.myDataDirObj)throw"Impossible!!!";this.$adaptlist.openLocalFileSelectdDialog()},async editPreviewInfo(){if(this.CurrentFile){let t=_.get(this.previewEdit,this.dirName),e=await Wn.EditObjMeta(this.CurrentFile,t);e&&e.data&&this.updateItemInDataList(e.data)}},updateItemInDataList(t){t&&this.myData&&_.isArray(this.myData.list)&&(this.myData.list=_.map(this.myData.list,e=>e.id==t.id?t:e))},async reloadData(){if(this.dataHome&&this.dirName){this.myStatus.reloading=!0;let t=Ti.Util.appendPath(this.dataHome,this.dirName),e=await Wn.Io.loadMeta(t);if(e){let t=await Wn.Io.loadChildren(e);this.myDataDirObj=e,this.myData=t}else this.myDataDirObj=null,this.myData={};_.delay(()=>{this.myStatus.reloading=!1},100)}else this.myDataDirObj=null,this.myData={}}},watch:{dataHome:{handler:"reloadData",immediate:!0}},mounted:function(){this.$ThingManager.$files=this}};Ti.Preload("ti/com/wn/thing/manager/com/thing-files/thing-files.mjs",t)}(),Ti.Preload("ti/com/wn/thing/manager/com/thing-files/_com.json",{name:"wn-thing-files",globally:!0,template:"./thing-files.html",props:"./thing-files-props.mjs",mixins:["./thing-files.mjs"],components:["@com:wn/adaptlist"]}),Ti.Preload("ti/com/wn/thing/manager/com/thing-filter/thing-filter.html",'<div class="wn-thing-filter"\n  :class="TopClass">\n  \x3c!--\n    Icon: Recycle Bin\n  --\x3e\n  <div\n    v-if="isInRecycleBin"\n      class="as-recyclebin"\n      @click="OnLeaveRecycleBin"><div>\n        \x3c!--Icon--\x3e\n        <div class="it-icon">\n          <ti-icon value="fas-recycle"/>\n          <ti-icon value="far-arrow-alt-circle-left"/>\n        </div>\n        \x3c!--text--\x3e\n        <div class="it-text">{{\'i18n:thing-recycle-bin\'|i18n}}</div>\n  </div></div>\n  \x3c!--\n    Keyword\n  --\x3e\n  <TiComboFilter\n    class="as-filter"\n    v-bind="filter"\n    :placeholder="placeholder"\n    :value="value.filter"\n    @change="OnFilterChange"/>\n  \x3c!--\n    Sorter\n  --\x3e\n  <TiComboSorter\n    v-if="hasSorter"\n      class="as-sorter"\n      v-bind="sorter"\n      :value="value.sorter"\n      @change="OnSorterChange"/>\n</div>'),function(){const t={data:()=>({keywordFocus:!1}),props:{filter:{type:Object,default:()=>({})},sorter:{type:Object,default:()=>({})},placeholder:{type:String,default:"i18n:find-data"},status:{type:Object,default:()=>({})},value:{type:Object,default:()=>({})}},computed:{TopClass(){return this.getTopClass({"in-recyclebin":this.isInRecycleBin})},hasSorter(){return!_.isEmpty(this.sorter)},isInRecycleBin(){return this.status.inRecycleBin}},methods:{OnFilterChange(t){this.$notify("filter::change",t)},OnSorterChange(t){this.$notify("sorter::change",t)},OnLeaveRecycleBin(){Ti.App(this).dispatch("main/toggleInRecycleBin")}}};Ti.Preload("ti/com/wn/thing/manager/com/thing-filter/thing-filter.mjs",t)}(),Ti.Preload("ti/com/wn/thing/manager/com/thing-filter/_com.json",{name:"wn-thing-filter",globally:!0,template:"./thing-filter.html",mixins:["./thing-filter.mjs"],components:["@com:ti/combo/filter","@com:ti/combo/sorter"]}),Ti.Preload("ti/com/wn/thing/manager/com/thing-markdown-editor/_com.json",{name:"wn-thing-markdown-richeditor",globally:!0,template:"./thing-markdown-richeditor.html",mixins:["./thing-markdown-richeditor.mjs"],components:[]}),function(){const t={async batchUpdate(){if(_.isEmpty(this.checkedItems))return Ti.Toast.Open("i18n:batch-none","warn");let t=_.first(this.checkedItems),e=_.get(this.config,"schema.behavior.batch")||{};_.defaults(e,{comType:"wn-obj-form",comConf:{},fields:"schema.meta.comConf.fields",names:null,valueKey:"data"}),e.comType=_.kebabCase(e.comType),/^(ti-|wn-obj-)(form)$/.test(e.comType)&&_.defaults(e.comConf,{autoShowBlank:!1,updateBy:!0,setDataBy:!0});let i;if(_.isString(e.names))if(e.names.startsWith("^")){let t=new RegExp(e.names);i=(e=>t.test(e.name))}else if(e.names.startsWith("!^")){let t=new RegExp(e.names.substring(1));i=(e=>!t.test(e.name))}else{let t=Ti.S.toArray(e.names);i=(e=>t.indexOf(e.name)>=0)}else i=_.isArray(e.names)&&!_.isEmpty(e.names)?t=>e.name.indexOf(t)>=0:t=>!/^(wn-upload-file|wn-imgfile)$/.test(t.comType);let n=_.get(this.config,e.fields);const a=function(t=[],e){let i=[];for(let n of t)if(_.isArray(n.fields)){let t=_.cloneDeep(n);t.fields=a(n.fields,e),_.isEmpty(t.fields)||i.push(t)}else e(n)&&i.push(n);return i};n=a(n,i);let s=await Ti.App.Open({title:"i18n:batch-update",width:640,height:"90%",position:"top",comType:"inner-body",components:[{name:"inner-body",globally:!1,data:{update:{},value:t,innerComConf:{...e.comConf,fields:n}},template:`<${e.comType}\n          v-bind="innerComConf"\n          :${e.valueKey}="value"\n          @field:change="OnFieldChange"\n          @change="OnChange"/>`,methods:{OnFieldChange({name:t,value:e}){_.set(this.update,t,e),this.$notify("change",this.update)},OnChange(t){this.value=t}}}]});_.isEmpty(s)||await Ti.App(this).dispatch("main/batchUpdateMetas",s)},changeShown(t={}){Ti.App(this).dispatch("main/doChangeShown",t)},showBlock(t){"creator"==t&&this.status.inRecycleBin?Ti.Alert("i18n:thing-create-in-recyclebin",{title:"i18n:warn",icon:"im-warning",type:"warn"}):("files"==t?Ti.App(this).dispatch("main/reloadFiles"):"content"==t&&Ti.App(this).dispatch("main/current/reload"),Ti.App(this).dispatch("main/doChangeShown",{[t]:!0}))},hideBlock(t){Ti.App(this).dispatch("main/doChangeShown",{[t]:!1})},toggleBlock(t){Ti.App(this).dispatch("main/doChangeShown",{[t]:!this.TheShown[t]})},async invoke(t){let e=_.get(this.SchemaMethods,t);if(_.isFunction(e))return await e.apply(this,[]);throw Ti.Err.make("e.thing.fail-to-invoke",t)}};Ti.Preload("ti/com/wn/thing/manager/wn-thing-manager-methods.mjs",t)}(),Ti.Preload("ti/com/wn/thing/manager/wn-thing-manager.html",'<ti-gui\n  class="wn-thing"\n  :class="TopClass"\n  v-ti-activable\n  :layout="TheLayout"\n  :schema="TheSchema"\n  :shown="TheShown"\n  :can-loading="true"\n  :loading-as="GuiLoadingAs"\n  :action-status="status"/>'),function(){const t={provide:function(){return{$ThingManager:this}},data:()=>({myRouting:{}}),props:{meta:{type:Object,default:()=>({})},currentDataHome:{type:String,default:void 0},currentDataHomeObj:{type:Object,default:void 0},currentDataDir:{type:String,default:"media"},status:{type:Object,default:()=>({})},config:{type:Object,default:()=>({})},search:{type:Object,default:()=>({})},current:{type:Object,default:()=>({})},files:{type:Object,default:()=>({})},preview:{type:Object,default:()=>({})},emitChange:{type:Boolean,default:!1},keepLastSelection:{type:Boolean,default:!0}},computed:{...Vuex.mapGetters("main/search",["currentItem","checkedItems"]),TopClass(){return this.getTopClass()},TheShown(){return _.get(this.config,"shown")||{}},TheKeepLastKey(){if(this.keepLastSelection)return _.get(this.meta,"id")+":currentId"},TheLayout(){return Ti.Util.explainObj(this,this.config.layout)},TheSchema(){return Ti.Util.explainObj(this,this.config.schema)},TheLoadingAs(){return _.assign({reloading:{icon:"fas-spinner fa-spin",text:"i18n:loading"},saving:{icon:"zmdi-settings fa-spin",text:"i18n:saving"},deleting:{icon:"zmdi-refresh fa-spin",text:"i18n:del-ing"},publishing:{icon:"zmdi-settings zmdi-hc-spin",text:"i18n:publishing"},restoring:{icon:"zmdi-time-restore zmdi-hc-spin",text:"i18n:thing-restoring"},cleaning:{icon:"zmdi-settings zmdi-hc-spin",text:"i18n:thing-cleaning"}},_.get(this.TheSchema,"loadingAs"))},ChangedRowId(){if(this.currentItem&&this.current.status.changed)return this.currentItem.id},GuiLoadingAs(){let t=_.findKey(this.status,t=>t);return _.get(this.TheLoadingAs,t)},curentThumbTarget(){if(this.currentItem){return`id:${this.meta.id}/data/${this.currentItem.id}/thumb.jpg`}return""},SchemaMethods(){return this.TheSchema&&this.TheSchema.methods?Ti.Util.merge({},this.TheSchema.methods):{}},EventRouting(){return _.assign({"block:show":"showBlock","block:hide":"hideBlock","block:shown":"changeShown","filter::change":"OnFilterChange","sorter::change":"OnSorterChange","list::select":"OnListSelect","list::open":"OnListOpen","content::change":"OnContentChange","pager::change":"OnPagerChange"},_.get(this.TheSchema,"events"),this.myRouting)}},methods:{async OnFilterChange(t){Ti.App(this).commit("main/search/setFilter",t),await Ti.App(this).dispatch("main/reloadSearch")},async OnSorterChange(t={}){Ti.App(this).commit("main/search/setSorter",t),await Ti.App(this).dispatch("main/reloadSearch")},OnListSelect({current:t,currentId:e,checkedIds:i,checked:n}){Ti.App(this).dispatch("main/setCurrentThing",{meta:t,currentId:e,checkedIds:i}),this.emitChange&&this.$emit("change",{current:t,currentId:e,checkedIds:i,checked:n})},OnListOpen({rawData:t}){let e=Ti.App(this);e.dispatch("main/config/updateShown",this.config.listOpen),e.dispatch("main/setCurrentThing",{meta:t})},OnContentChange(t){let e=Ti.App(this);e.dispatch("main/current/changeContent",t),e.commit("main/syncStatusChanged")},OnPagerChange({pn:t,pgsz:e}={}){Ti.App(this).dispatch("main/search/reloadPage",{pn:t,pgsz:e})},OnViewCurrentSource(){this.viewCurrentSource()},addEventRouting(t,e){this.$set(this.myRouting,t,e)},removeEventRouting(...t){let e=_.omitBy(this.myRouting,(e,i)=>t.indexOf(i)>=0);this.myRouting=e},__on_events(t){let e=_.get(this.EventRouting,t);return e||(e=this.$tiEventTryFallback(t,this.EventRouting)),_.isString(e)?_.get(this,e):e},__ti_shortcut(t){"ESCAPE"==t&&this.TheShown.creator&&this.hideBlock("creator")}},mounted:function(){this.THING_MANAGER_ROOT=!0;let t=_.get(this.config,"actions");_.isArray(t)&&this.$notify("actions:update",t)}};Ti.Preload("ti/com/wn/thing/manager/wn-thing-manager.mjs",t)}(),Ti.Preload("ti/com/wn/thing/manager/_com.json",{name:"wn-thing-manager",globally:!0,i18n:"@i18n:wn-thing",template:"./wn-thing-manager.html",methods:"./wn-thing-manager-methods.mjs",mixins:["./wn-thing-manager.mjs"],components:["./com/thing-files","./com/thing-filter","./com/thing-creator","./com/thing-files","@com:ti/gui","@com:ti/combo/filter","@com:ti/paging/jumper","@com:wn/table","@com:wn/obj/icon","@com:wn/obj/puretext","@com:wn/obj/preview","@com:wn/obj/form","@com:wn/upload/file"]}),Ti.Preload("ti/com/wn/thing/markdown/richeditor/thing-markdown-richeditor.html",'<WnObjMarkdownRicheditor\n  v-bind="this"\n  :on-init="OnEditorInit"/>'),function(){const t={inject:["$ThingManager"],props:{listenMedia:{type:String,default:"file:open"}},methods:{OnEditorInit(t){this.$editor=t}},mounted(){this.listenMedia&&this.$ThingManager.addEventRouting(this.listenMedia,t=>{this.$editor.insertMediaObj(t)})},beforeDestroy(){this.listenMedia&&this.$ThingManager.removeEventRouting(this.listenMedia)}};Ti.Preload("ti/com/wn/thing/markdown/richeditor/thing-markdown-richeditor.mjs",t)}(),Ti.Preload("ti/com/wn/thing/markdown/richeditor/_com.json",{name:"wn-thing-markdown-richeditor",globally:!0,template:"./thing-markdown-richeditor.html",props:["@com:ti/text/markdown/richeditor/ti-markdown-richeditor-props.mjs","@com:wn/obj/markdown/richeditor/wn-markdown-richeditor-props.mjs"],mixins:["./thing-markdown-richeditor.mjs"],components:["@com:wn/obj/markdown/richeditor"]}),Ti.Preload("ti/com/wn/transfer/wn-transfer.html",'<ti-transfer v-bind="this"\n  \n  :options="OptionsDict"\n  :can-com-type="TheCanComType"\n  :sel-com-type="TheSelComType"\n  :display="TheDisplay"\n\n  @change="$notify(\'change\', $event)"/>'),function(){const t={inheritAttrs:!1,data:()=>({}),props:{itemBy:{type:[String,Function],default:void 0},findBy:{type:[String,Function],default:void 0}},computed:{TheCanComType(){return this.canComType||"wn-list"},TheSelComType(){return this.selComType||"wn-list"},TheDisplay(){return this.display||["@<thumb>","title","nm"]},OptionsDict(){return Wn.Dict.evalOptionsDict(this)}}};Ti.Preload("ti/com/wn/transfer/wn-transfer.mjs",t)}(),Ti.Preload("ti/com/wn/transfer/_com.json",{name:"wn-transfer",globally:!0,template:"./wn-transfer.html",props:"@com:ti/transfer/ti-transfer-props.mjs",mixins:["./wn-transfer.mjs"],components:["@com:ti/transfer"]}),Ti.Preload("ti/com/wn/upload/file/wn-upload-file.html",'<TiUploadFile\n  :preview="PreviewIcon"\n  :width="width"\n  :height="height"\n  :progress="progress"\n  :upload-file="uploadFile"\n  :removable="removable"\n  @upload="onUpload"\n  @remove="onRemove"\n  @open="onOpen"/>'),function(){const t={data:()=>({src_ts:null,oFile:null,uploadFile:null,progress:-1}),props:{value:{type:String,default:null},valueType:{type:String,default:"obj",validator:t=>/^(obj|path|fullPath|idPath|id)$/.test(t)},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},removable:{type:Boolean,default:!0},target:{type:String,default:null},supportTypes:{type:[String,Array],default:()=>[]},supportMimes:{type:[String,Array],default:()=>[]},filter:{type:[Array,String],default:null},quality:{type:Number,default:0}},computed:{AcceptTypes(){return _.isString(this.supportTypes)?this.supportTypes.split(","):this.supportTypes},AcceptMimes(){return _.isString(this.supportMimes)?this.supportMimes.split(","):this.supportMimes},ImageFilter(){return this.filter?[].concat(this.filter):[]},PreviewIcon(){if(this.oFile){if(Wn.Obj.isMime(this.oFile,/^(image\/)/)){let t=["/o/content?str=id:",this.oFile.id];return this.src_ts&&(t.push("&_t="),t.push(this.src_ts)),{type:"image",value:t.join("")}}if(Wn.Obj.isMime(this.oFile,/^(video\/)/)){let t=["/o/content?str=id:",this.oFile.video_cover];return this.src_ts&&(t.push("&_t="),t.push(this.src_ts)),{type:"image",value:t.join("")}}return Wn.Util.getObjIcon(this.oFile)}}},methods:{async assertListHas(t,e,i,n){if(!_.isEmpty(t)){let a=!0;for(let i of t)if(i==e){a=!1;break}if(a)return console.log("haha"),await Ti.Alert(i,{type:"warn",icon:"zmdi-alert-triangle",vars:n}),!1}return!0},async onOpen(){if(this.oFile){let t=Wn.Util.getAppLink(this.oFile);await Ti.Be.Open(t.url,{params:t.params})}},async onRemove(){this.oFile&&await Wn.Sys.exec2(`rm id:${this.oFile.id}`),this.$notify("change",null)},async onUpload(t){let e=Ti.Util.getSuffixName(t.name);if(!await this.assertListHas(this.AcceptTypes,e,"i18n:wn-invalid-types",{current:e,supports:this.AcceptTypes.join(", ")}))return;if(!await this.assertListHas(this.AcceptMimes,t.type,"i18n:wn-invalid-mimes",{current:t.type,supports:this.AcceptMimes.join(", ")}))return;this.uploadFile=t,this.progress=0;let{ok:i,msg:n,data:a}=await Wn.Io.uploadFile(t,{target:this.target,mode:"r",progress:t=>{this.progress=t.loaded/t.total}});if(this.uploadFile=null,this.progress=-1,!i)return void await Ti.Alert(`i18n:${n}`,{type:"warn",icon:"zmdi-alert-triangle"});if(!_.isEmpty(this.ImageFilter)){let t=["imagic",`id:${a.id}`,`-filter "${this.ImageFilter.join(" ")}"`];this.quality>0&&this.quality<=1&&t.push(`-qa ${this.quality}`),t.push("-out inplace");let e=t.join(" ");await Wn.Sys.exec2(e)}this.src_ts=Date.now(),this.oFile=a;let s=a;"obj"!=this.valueType&&(s=Wn.Io.formatObjPath(a,this.valueType)),this.$notify("change",s)},async reload(){_.isString(this.value)?this.oFile=await Wn.Io.loadMetaBy(this.value):"FILE"==_.get(this.value,"race")?this.oFile=_.cloneDeep(this.value):this.oFile=null}},watch:{value:function(){this.reload()}},mounted:async function(){await this.reload()}};Ti.Preload("ti/com/wn/upload/file/wn-upload-file.mjs",t)}(),Ti.Preload("ti/com/wn/upload/file/_com.json",{name:"wn-upload-file",globally:!0,template:"./wn-upload-file.html",mixins:["./wn-upload-file.mjs"],components:["@com:ti/upload/file"]}),function(){const t={async reload({state:t,commit:e},i){!t.status.reloading&&t.status.saving}};Ti.Preload("ti/mod/hmaker/website/mod/site-config/site-config-actions.mjs",t)}(),Ti.Preload("ti/mod/hmaker/website/mod/site-config/site-config.json",{meta:null,desktop:{mapping:{paths:{"site-state.json":"desktopSiteStateView"},types:{},mimes:{"application/json":"desktopJsonView","text/*, application/*":"desktopTextView"},races:{DIR:"desktopAdaptList",FILE:"desktopObjPreview"}}},tablet:"desktop",phone:"desktop",views:{desktopSiteStateView:{comType:"hmaker-site-state",comConf:{home:"=home",content:"=currentContent"},actions:[{key:"saving",type:"action",icon:"zmdi-floppy",text:"i18n:save-change",altDisplay:{icon:"fas-spinner fa-pulse",text:"i18n:saving"},enableBy:"changed",action:"dispatch:main/saveCurrent",shortcut:"CTRL+S"},{key:"reloading",type:"action",icon:"zmdi-rotate-right",text:"i18n:revoke-change",altDisplay:{icon:"zmdi-refresh zmdi-hc-spin",text:"i18n:loading"},action:"dispatch:main/reloadCurrent"},{type:"Group",icon:"zmdi-more-vert",items:[{type:"action",icon:"zmdi-info-outline",text:"i18n:properties",action:"main:editCurrentObjMeta"}]}]},desktopTextView:{comType:"ti-text-raw",comConf:{showTitle:!1,content:"=currentContent",contentIsChanged:"=status.changed"},actions:[{key:"saving",type:"action",icon:"zmdi-floppy",text:"i18n:save-change",altDisplay:{icon:"fas-spinner fa-pulse",text:"i18n:saving"},enableBy:"changed",action:"dispatch:main/saveCurrent",shortcut:"CTRL+S"},{key:"reloading",type:"action",icon:"zmdi-rotate-right",text:"i18n:revoke-change",altDisplay:{icon:"zmdi-refresh zmdi-hc-spin",text:"i18n:loading"},action:"dispatch:main/reloadCurrent"},{type:"Group",icon:"zmdi-more-vert",items:[{type:"action",icon:"zmdi-info-outline",text:"i18n:properties",action:"main:editCurrentObjMeta"}]}]},desktopJsonView:{comType:"ti-text-json",comConf:{data:"=currentData"},actions:[{key:"saving",type:"action",icon:"zmdi-floppy",text:"i18n:save-change",altDisplay:{icon:"fas-spinner fa-pulse",text:"i18n:saving"},enableBy:"changed",action:"dispatch:main/saveCurrent",shortcut:"CTRL+S"},{key:"reloading",type:"action",icon:"zmdi-rotate-right",text:"i18n:revoke-change",altDisplay:{icon:"zmdi-refresh zmdi-hc-spin",text:"i18n:loading"},action:"dispatch:main/reloadCurrent"},{type:"Group",icon:"zmdi-more-vert",items:[{type:"action",icon:"zmdi-info-outline",text:"i18n:properties",action:"main:editCurrentObjMeta"}]}]},desktopAdaptList:{comType:"wn-adaptlist",comConf:{list:"=currentData.list"}},desktopObjPreview:{comType:"wn-obj-preview",comConf:{meta:"=currentMeta"}}},status:{reloading:!1}}),function(){const t={mutations:{setMeta(t,e){t.meta=e},setStatus(t,e){t.status=_.assign({},t.status,e)}}};Ti.Preload("ti/mod/hmaker/website/mod/site-config/site-config.mjs",t)}(),Ti.Preload("ti/mod/hmaker/website/mod/site-config/_mod.json",{name:"hmaker-site-config",namespaced:!0,state:"./site-config.json",actions:"./site-config-actions.mjs",mixins:"./site-config.mjs"}),function(){const t={async appendNode({state:t,commit:e,dispatch:i},n){console.log("TODO appendNode",n)},async reloadNode({state:t,commit:e,dispatch:i},{id:n,path:a,self:s=!1,force:o=!1,depth:l=1}={}){let r,c=_.cloneDeep(t.root),d=!1;if(!(r=_.isUndefined(n)?Ti.Trees.getNodeByPath(c,a):Ti.Trees.getNodeById(c,n)))return;if(s){let t=await Wn.Io.loadMetaById(r.id);r.rawData=t,d=!0}const h=async(t,e)=>{if(e>0&&!t.leaf&&(e--,o||_.isEmpty(t.children))){let i=[],{list:n}=await Wn.Io.loadChildren(t.rawData);for(let t of n){let n=Wn.Util.wrapTreeNode(t);await h(n,e),i.push(n)}return t.children=i,!0}return!1};(d|=await h(r,l))&&e("setRoot",c)},async reloadRoot({state:t,commit:e,dispatch:i},n){if(e("setRoot",Wn.Util.wrapTreeNode(n)),await i("reloadNode"),!_.isEmpty(t.root.children)){let e=_.keys(t.openedNodePaths).sort();for(let n of e){let e=Ti.Trees.getByPath(t.root,n);e&&!e.node.leaf&&await i("reloadNode",{path:e.path})}}}};Ti.Preload("ti/mod/hmaker/website/mod/site-tree/site-tree-actions.mjs",t)}(),Ti.Preload("ti/mod/hmaker/website/mod/site-tree/site-tree.json",{root:{},currentId:null,openedNodePaths:{}}),function(){const t={mutations:{setRoot(t,e=null){_.isEqual(t.root,e)||(t.root=e)},setCurrentId(t,e=null){t.currentId=e},setOpenedNodePaths(t,e={}){t.openedNodePaths=_.cloneDeep(e)}}};Ti.Preload("ti/mod/hmaker/website/mod/site-tree/site-tree.mjs",t)}(),Ti.Preload("ti/mod/hmaker/website/mod/site-tree/_mod.json",{name:"hmaker-site-tree",namespaced:!0,state:"./site-tree.json",actions:"./site-tree-actions.mjs",mixins:"./site-tree.mjs"}),function(){const t={setTreeOpenedNodePaths({getters:t,commit:e},i={}){t.TREE_OPEND_KEY&&(e("tree/setOpenedNodePaths",i=_.pickBy(i,t=>t)),Ti.Storage.session.setObject(t.TREE_OPEND_KEY,i))},async setTreeSelected({getters:t,commit:e,dispatch:i},n=null){if(t.TREE_SELECTED_KEY){e("tree/setCurrentId",n),Ti.Storage.session.set(t.TREE_SELECTED_KEY,n),e("setStatus",{reloading:!0});let a=null;n&&(a=await Wn.Io.loadMetaById(n)),await i("current/reload",a),e("setStatus",{reloading:!1}),e("syncStatusChanged")}},onCurrentChanged({commit:t,dispatch:e},i){e("current/onChanged",i),t("syncStatusChanged")},async saveCurrent({state:t,commit:e,dispatch:i}){t.current.meta&&(e("setStatus",{saving:!0}),await i("current/save"),e("setStatus",{saving:!1}),e("syncStatusChanged"))},async reloadCurrent({commit:t,dispatch:e},i){t("setStatus",{reloading:!0}),await e("current/reload",i),t("setStatus",{reloading:!1}),t("syncStatusChanged")},async reloadConfig({state:t,dispatch:e}){await e("config/reload")},async reloadTree({getters:t,state:e,commit:i,dispatch:n}){if(t.TREE_OPEND_KEY){i("tree/setOpenedNodePaths",Ti.Storage.session.getObject(t.TREE_OPEND_KEY))}if(await n("tree/reloadRoot",e.home),t.TREE_SELECTED_KEY){let e=Ti.Storage.session.getString(t.TREE_SELECTED_KEY);i("tree/setCurrentId",e),e&&await n("setTreeSelected",e)}},async reloadTreeNode({commit:t,dispatch:e},i){t("setStatus",{reloading:!0}),await e("tree/reloadNode",i),t("setStatus",{reloading:!1})},async reload({state:t,commit:e,dispatch:i},n){n?e("setHome",n):n=t.home,e("setStatus",{reloading:!0}),await i("reloadConfig"),await i("reloadTree"),e("setStatus",{reloading:!1})}};Ti.Preload("ti/mod/hmaker/website/website-actions.mjs",t)}(),Ti.Preload("ti/mod/hmaker/website/website.json",{home:null,status:{reloading:!1,doing:!1,saving:!1,deleting:!1,changed:!1,publishing:!1,exposeHidden:!1}}),function(){const t={getters:{TREE_OPEND_KEY(t){if(t.home)return`website_tree_openeds_${t.home.id}`},TREE_SELECTED_KEY(t){if(t.home)return`website_tree_selected_${t.home.id}`}},mutations:{setHome(t,e){t.home=e},setStatus(t,e){t.status=_.assign({},t.status,e)},setExposeHidden(t,e){t.status.exposeHidden=e},syncStatusChanged(t){t.current&&(t.status.changed=t.current.status.changed)}}};Ti.Preload("ti/mod/hmaker/website/website.mjs",t)}(),Ti.Preload("ti/mod/hmaker/website/_mod.json",{name:"hmaker-website",namespaced:!0,state:"./website.json",actions:"./website-actions.mjs",mixins:"./website.mjs",modules:{tree:"./mod/site-tree",config:"./mod/site-config",current:"@mod:wn/obj-current"}}),Ti.Preload("ti/mod/ti/viewport/ti-viewport.json",{mode:"desktop",activedIds:[]}),function(){const t={getters:{viewportMode:t=>t.mode,viewportActivedComIds:t=>t.activedIds,isViewportModeDesktop:t=>"desktop"==t.mode,isViewportModeTablet:t=>"tablet"==t.mode,isViewportModePhone:t=>"phone"==t.mode,isViewportModeDesktopOrTablet:t=>"desktop"==t.mode||"tablet"==t.mode,isViewportModePhoneOrTablet:t=>"phone"==t.mode||"tablet"==t.mode},mutations:{setMode(t,e="desktop"){t.mode=e},setActivedIds(t,e=[]){t.activedIds=_.cloneDeep(e)}}};Ti.Preload("ti/mod/ti/viewport/ti-viewport.mjs",t)}(),Ti.Preload("ti/mod/ti/viewport/_mod.json",{state:"./ti-viewport.json",mixins:"./ti-viewport.mjs"}),function(){const t={onChanged({dispatch:t},e){t("changeContent",e)},changeContent({commit:t},e){t("setContent",e),t("syncStatusChanged")},changeMeta({commit:t},{name:e,value:i}={}){if(e){t("mergeMeta",_.set({},e,i)),t("syncStatusChanged")}},updateContent({state:t,commit:e},i){e("setContent",i),t.meta&&"FILE"==t.meta.race&&e("setSavedContent",i),e("syncStatusChanged")},async openMetaEditor({state:t,dispatch:e}){if(!t.meta)return await Ti.Toast.Open("i18n:empty-data","warn");let i=await Wn.EditObjMeta(t.meta,{fields:"auto"});_.isUndefined(i)||i.saved&&await e("reload",i.data)},async openContentEditor({state:t,dispatch:e}){if(!t.meta)return await Ti.Toast.Open("i18n:empty-data","warn");let i=await Wn.EditObjContent(t.meta,{content:t.content});_.isUndefined(i)||await e("changeContent",i)},async updateMeta({commit:t,dispatch:e},{name:i,value:n}={}){let a=Ti.Types.toObjByPair({name:i,value:n});await e("updateMetas",a)},async updateMetas({state:t,commit:e},i={}){if(_.isMatchWith(t.meta,i,_.isEqual))return;_.forEach(i,(t,i)=>{e("setFieldStatus",{name:i,type:"spinning",text:"i18n:saving"})});let n=JSON.stringify(i),a=`thing ${t.meta.th_set} update ${t.meta.id} -fields -cqn`,s=await Wn.Sys.exec2(a,{input:n,as:"json"}),o=s instanceof Error;o||Ti.Util.isNil(s)||e("setMeta",s),_.forEach(i,(t,i)=>{o?e("setFieldStatus",{name:i,type:"warn",text:s.message||"i18n:fail"}):(e("setFieldStatus",{name:i,type:"ok",text:"i18n:ok"}),_.delay(()=>{e("clearFieldStatus",i)},500))})},async save({state:t,commit:e}){if(t.status.saving||!t.status.changed)return;e("setStatus",{saving:!0});let i=t.meta,n=t.content,a=await Wn.Io.saveContentAsText(i,n);return e("setStatus",{saving:!1}),e("setMeta",a),e("setSavedContent",n),e("syncStatusChanged"),a},async reload({state:t,commit:e,dispatch:i},n){if(t.status.reloading||t.status.saving)return;if(_.isUndefined(n)&&(n=t.meta),_.isString(n)&&(n=await Wn.Io.loadMeta(n)),!n)return e("setMeta",null),void e("setContent",null);let a=null;e("setStatus",{reloading:!0}),"FILE"==n.race?a=await Wn.Io.loadContent(n):"DIR"==n.race&&(a=await Wn.Io.loadChildren(n)),e("setStatus",{reloading:!1}),e("setMeta",n),e("clearFieldStatus"),i("updateContent",a)}};Ti.Preload("ti/mod/wn/obj-current/m-obj-current-actions.mjs",t)}(),Ti.Preload("ti/mod/wn/obj-current/m-obj-current.json",{meta:null,content:null,data:null,__saved_content:null,status:{changed:!1,saving:!1,reloading:!1},fieldStatus:{}}),function(){const t={mutations:{setMeta(t,e){t.meta=e},assignMeta(t,e){t.meta=_.assign({},t.meta,e)},mergeMeta(t,e){t.meta=_.merge({},t.meta,e)},setContent(t,e){let i=t.meta;if(!i||Ti.Util.isNil(e))return t.content=null,t.data=null,t.__saved_content=null,void(t.status.changed=!1);if("DIR"==i.race)t.content=null,t.__saved_content=null,t.data=e;else if("FILE"==i.race)if(_.isString(e))if(t.content=e,Wn.Util.isMimeJson(i.mime))try{t.data=JSON.parse(e)}catch(e){t.data=null}else Wn.Util.isMimeText(i.mime)&&(t.data=null);else t.content=JSON.stringify(e,null,"  "),Wn.Util.isMimeJson(i.mime)?t.data=e:Wn.Util.isMimeText(i.mime)&&(t.data=null)},setData(t,e){t.data=e},setSavedContent(t,e){t.__saved_content=e},setStatus(t,e){t.status=_.assign({},t.status,e)},syncStatusChanged(t){Ti.Util.isNil(t.content)&&Ti.Util.isNil(t.__saved_content)?t.status.changed=!1:t.status.changed=!_.isEqual(t.content,t.__saved_content)},setFieldStatus(t,{name:e,type:i,text:n}={}){if(e){let a=_.concat(e).join("-");Vue.set(t.fieldStatus,a,{type:i,text:n})}},clearFieldStatus(t,e=[]){_.isEmpty(e)?t.fieldStatus={}:t.fieldStatus=_.omit(t.fieldStatus,e)}}};Ti.Preload("ti/mod/wn/obj-current/m-obj-current.mjs",t)}(),Ti.Preload("ti/mod/wn/obj-current/_mod.json",{name:"wn-obj-current",namespaced:!0,state:"./m-obj-current.json",actions:"./m-obj-current-actions.mjs",mixins:"./m-obj-current.mjs"}),function(){const t={async updateMeta({state:t,commit:e},{name:i,value:n}={}){let a=Ti.Types.toObjByPair({name:i,value:n});if(_.isMatchWith(t.meta,a,_.isEqual))return;e("setStatus",{saving:!0}),e("setFieldStatus",{name:i,status:"spinning"});let s=JSON.stringify(a),o=`obj 'id:${t.meta.id}' -ocqn -u`,l=await Wn.Sys.exec2(o,{input:s,as:"json"});return e("setMeta",l),e("clearFieldStatus",i),e("setStatus",{saving:!1}),l},async loadMetaById({dispatch:t},e){t("loadMeta",`id:${e}`)},async loadMeta({state:t,commit:e},i){if(i){e("setStatus",{reloading:!0});e("setMeta",await Wn.Io.loadMeta(i)),e("setStatus",{reloading:!1})}else e("reset")},async loadAncestors({state:t,commit:e},i=t.meta){e("setStatus",{reloading:!0});let n=await Wn.Io.loadAncestors("id:"+i.id),a=_.last(n);e("setMeta",i),e("setParent",a),e("setAncestors",n),e("setStatus",{reloading:!1})},reload:async({state:t,dispatch:e},i)=>(_.isString(i)?(await e("loadMeta",i),await e("loadAncestors")):_.isPlainObject(i)&&await e("loadAncestors",i),t.meta)};Ti.Preload("ti/mod/wn/obj-meta/m-obj-meta-actions.mjs",t)}(),Ti.Preload("ti/mod/wn/obj-meta/m-obj-meta.json",{ancestors:[],parent:null,meta:null,status:{changed:!1,saving:!1,reloading:!1},fieldStatus:{}}),function(){const t={getters:{get:t=>t,getHome(t){let e=t.meta,i=t.ancestors;if(_.isEmpty(i)){if(e&&"root"==e.nm)return e}else{if(1==i.length&&"home"==i[0].nm)return e;if("home"==i[0].nm)return i[1]}return null},hasParent:t=>!!t.parent,parentIsHome:t=>!(_.isEmpty(t.ancestors)||!t.parent||!t.meta||!/^\/home\//.test(t.meta.ph))&&t.parent.pid==t.ancestors[0].id,isHome:t=>!(_.isEmpty(t.ancestors)||!t.meta||!/^\/home\//.test(t.meta.ph))&&t.meta.pid==t.ancestors[0].id},mutations:{reset(t){_.assign(t,{ancestors:[],parent:null,meta:null,status:{changed:!1,saving:!1,reloading:!1},fieldStatus:{}})},setAncestors(t,e=[]){t.ancestors=_.concat(e)},setParent(t,e){t.parent=e},setMeta(t,e){t.meta=e},setFieldStatus(t,{name:e,message:i,status:n}={}){if(e){let a=n?{status:n,message:i}:null,s=_.concat(e).join("-");Vue.set(t.fieldStatus,s,a)}},clearFieldStatus(t,e=[]){_.isEmpty(e)?t.fieldStatus={}:t.fieldStatus=_.omit(t.fieldStatus,e)},setStatus(t,e){t.status=_.assign({},t.status,e)}}};Ti.Preload("ti/mod/wn/obj-meta/m-obj-meta.mjs",t)}(),Ti.Preload("ti/mod/wn/obj-meta/_mod.json",{state:"./m-obj-meta.json",actions:"./m-obj-meta-actions.mjs",mixins:"./m-obj-meta.mjs"}),Ti.Preload("ti/mod/wn/session/m-session.json",{id:null,grp:null,du:-1,expi:0,pwd:"~",ticket:null,uid:null,unm:null,me:null,envs:{}}),function(){const t={getters:{get:t=>t},mutations:{set(t,e={}){t.id=e.id,t.grp=e.grp,t.du=e.du,t.expi=e.expi,t.pwd=e.pwd,t.ticket=e.ticket,t.uid=e.uid,t.unm=e.unm,t.me=e.me,t.envs=_.cloneDeep(e.envs)}},actions:{reload(){_.delay(()=>{console.log("hahah")},1e3)}}};Ti.Preload("ti/mod/wn/session/m-session.mjs",t)}(),Ti.Preload("ti/mod/wn/session/_mod.json",{state:"./m-session.json",mixins:["./m-session.mjs"]}),function(){const t={async saveCurrent({commit:t,dispatch:e}){t("setStatus",{saving:!0}),await e("current/save"),t("setStatus",{saving:!1}),t("syncStatusChanged")},async updateCurrent({state:t,commit:e,dispatch:i,getters:n},{name:a,value:s}={}){n.hasCurrent&&(await i("current/updateMeta",{name:a,value:s}),e("search/updateItem",t.current.meta))},async updateCurrentMetas({state:t,commit:e,dispatch:i,getters:n},a={}){n.hasCurrent&&(await i("current/updateMetas",a),e("search/updateItem",t.current.meta))},async batchUpdateMetas({state:t,commit:e,getters:i},n={}){let a=i["search/checkedItems"];if(_.isEmpty(a)||_.isEmpty(n))return;e("setStatus",{reloading:!0});let s=_.get(t.current,"meta.id"),o=JSON.stringify(n),l=t.meta.id;for(let t of a){let i=`thing ${l} update ${t.id} -fields -cqn`,n=await Wn.Sys.exec2(i,{as:"json",input:o});e("search/updateItem",n),n.id==s&&e("current/setMeta",n)}e("setStatus",{reloading:!1})},setCurrentMeta({state:t,commit:e},i){e("current/setMeta",i),e("syncStatusChanged"),e("search/updateItem",t.current.meta)},setCurrentContent({state:t,commit:e,dispatch:i},n){i("current/onChanged",n),e("syncStatusChanged"),e("search/updateItem",t.current.meta)},async autoSyncCurrentFilesCount({state:t,commit:e,dispatch:i},{quiet:n=!0}={}){let a=t.current.meta,s=t.currentDataDir;if(!s)return console.warn("thing file -ufc without 'dirName'"),Ti.Toast.Open("thing file -ufc without 'dirName'");if(a&&a.id&&s){e("setStatus",{reloading:!0});let t=`thing ${a.th_set} file ${a.id} -dir '${s}' -ufc -cqn`,o=await Wn.Sys.exec2(t,{as:"json"});i("setCurrentMeta",o),e("setStatus",{reloading:!1}),n||await Ti.Toast.Open("i18n:wn-th-recount-media-done",{vars:{n:o.th_media_nb||0}})}},async toggleInRecycleBin({state:t,commit:e,dispatch:i,getters:n}){let a=!n.isInRecycleBin;e("search/setInRecycleBin",a),e("setStatus",{inRecycleBin:a,reloading:!0}),await i("search/reload"),e("setStatus",{reloading:!1})},async create({state:t,commit:e,dispatch:i},n={}){let a=_.get(t.config,"schema.behavior.create")||{},{unique:s,after:o,fixed:l}=a,r=JSON.stringify(n),c=[`thing ${t.meta.id} create -cqn -fields`];!_.isEmpty(s)&&_.isString(s)&&c.push(` -unique '${s}'`),!_.isEmpty(l)&&_.isString(s)&&c.push(` -fixed '${JSON.stringify(l)}'`),!_.isEmpty(o)&&_.isString(o)&&c.push(` -after '${o}'`),e("setStatus",{reloading:!0});let d=c.join(" "),h=await Wn.Sys.exec2(d,{input:r,as:"json"});return!h||h instanceof Error||(e("search/prependToList",h),await i("setCurrentThing",{meta:h})),e("setStatus",{reloading:!1}),h},async removeChecked({state:t,commit:e,dispatch:i,getters:n},a=!1){let s=_.cloneDeep(t.search.checkedIds);if(_.isEmpty(s))return await Ti.Alert("i18n:del-none");a|=(_.get(t,"config.schema.behavior")||{}).hardRemove,e("setStatus",{deleting:!0});let o=`thing ${t.meta.id} delete ${a?"-hard":""} -cqn -l ${s.join(" ")}`;await Wn.Sys.exec2(o,{as:"json"});e("search/removeItems",s);let l=n["search/currentItem"];await i("setCurrentThing",{meta:l}),e("setStatus",{deleting:!1})},async restoreRecycleBin({state:t,commit:e,dispatch:i,getters:n}){let a=t.search.checkedIds;if(_.isEmpty(a))return await Ti.Alert("i18n:thing-restore-none");e("setStatus",{restoring:!0});let s=`thing ${t.meta.id} restore -quiet -cqn -l ${a.join(" ")}`;await Wn.Sys.exec2(s,{as:"json"});await i("search/reload");let o=n["search/currentItem"];await i("current/reload",o),e("setStatus",{restoring:!1})},async cleanRecycleBin({state:t,commit:e,dispatch:i}){e("setStatus",{cleaning:!0});let n=`thing ${t.meta.id} clean -limit 3000`;await Wn.Sys.exec2(n),e("setStatus",{cleaning:!1}),await i("reload")},async openMetaEditor({state:t,getters:e,dispatch:i}){if(!t.meta)return await Ti.Toast.Open("i18n:empty-data","warn");if(e.hasCurrent){let e=await Wn.EditObjMeta(t.current.meta,{fields:"default",autoSave:!1});if(_.isUndefined(e))return;let{updates:n}=e;_.isEmpty(n)||await i("updateCurrentMetas",n)}else await Wn.EditObjMeta(t.meta,{fields:"auto",autoSave:!0})},async openContentEditor({state:t,getters:e,dispatch:i}){if(!t.meta)return await Ti.Toast.Open("i18n:empty-data","warn");if(!e.hasCurrent)return await Ti.Toast.Open("i18n:nil-obj","warn");{let e=await Wn.EditObjContent(t.current.meta,{content:t.current.content});if(_.isUndefined(e))return;await i("current/changeContent",e)}},async reloadFiles({state:t,commit:e,dispatch:i,getters:n},{force:a=!1}={}){let s=_.get(t.current,"meta"),o=_.get(s,"id"),l=t.filesName;if(o&&l){let e=t.meta.id,n=t.files.meta;if(!n||!n.ph||!n.ph.endsWith(`/data/${o}/${l}`)){let t={race:"DIR",nm:`${o}/${l}`},i=`obj "${`id:${e}/data`}" -IfNoExists -new '${JSON.stringify(t)}' -cqno`;if(!(n=await Wn.Sys.exec2(i,{as:"json"})))return}await i("files/reload",n)}else e("files/reset")},async reloadSearch({state:t,commit:e,dispatch:i}){let n=t.meta;if(e("setStatus",{reloading:!0}),await i("search/reload",n),t.current.meta){let e=t.current.meta.id,n=null;for(let i of t.search.list)if(i.id==e){n=i;break}await i("setCurrentThing",{meta:n})}e("setStatus",{reloading:!1})},async setCurrentThing({state:t,commit:e,dispatch:i},{meta:n=null,checkedIds:a={}}={}){let s=n?n.id:null,o=Ti.Util.truthyKeys(a);Ti.Util.isNil(s)||o.push(s),e("search/setCurrentId",s),e("search/setCheckedIds",o);let l=t.meta,r=s?`id:${l.id}/data/${s}`:null;e("setCurrentDataHome",r);e("setCurrentDataHomeObj",await Wn.Io.loadMeta(r));let c=`${l.id}:currentId`;_.get(t.config.schema,"keepLastOff")?Ti.Storage.session.remove(c):Ti.Storage.session.set(c,s),await i("current/reload",n)},async doChangeShown({state:t,commit:e,dispatch:i},n){i("config/updateShown",n)},async reload({state:t,commit:e,dispatch:i},n){n?e("setMeta",n):n=t.meta;let a=n;e("setStatus",{reloading:!0}),await i("config/reload",n);let s=Ti.Storage.session.getObject(n.id)||{};_.defaults(s,{filter:{},sorter:{},pager:{}});let o=_.get(t.config.schema,"behavior.filter")||{};o=_.assign({},o,s.filter),_.isEmpty(o)||e("search/setFilter",o);let l=_.get(t.config.schema,"behavior.sorter")||{};if(_.isEmpty(s.sorter)?_.isEmpty(l)||e("search/setSorter",l):e("search/setSorter",s.sorter),_.isEmpty(s.pager)||e("search/setPager",s.pager),await i("reloadSearch"),_.get(t,"meta.th_auto_select")&&!t.current.meta&&!_.isEmpty(t.search.list)){let e,n=`${a.id}:currentId`,s=Ti.Storage.session.getString(n);s&&(e=_.find(t.search.list,t=>t.id==s)),e||(e=_.first(t.search.list)),await i("setCurrentThing",{meta:e,force:!1})}e("setStatus",{reloading:!1})}};Ti.Preload("ti/mod/wn/thing/m-thing-actions.mjs",t)}(),Ti.Preload("ti/mod/wn/thing/m-thing.json",{meta:null,currentDataDir:"media",currentDataHome:null,currentDataHomeObj:null,status:{reloading:!1,doing:!1,saving:!1,deleting:!1,changed:!1,restoring:!1,cleaning:!1,inRecycleBin:!1}}),function(){const t={getters:{hasCurrent:t=>t.current&&t.current.meta,isInRecycleBin:t=>t.search.inRecycleBin},mutations:{setMeta(t,e){t.meta=e},setCurrentDataDir(t,e){t.currentDataDir=e},setCurrentDataHome(t,e){t.currentDataHome=e},setCurrentDataHomeObj(t,e){t.currentDataHomeObj=_.cloneDeep(e)},setStatus(t,e){t.status=_.assign({},t.status,e)},syncStatusChanged(t){t.current&&(t.status.changed=t.current.status.changed)}}};Ti.Preload("ti/mod/wn/thing/m-thing.mjs",t)}(),function(){const t={updateShown({commit:t},e){t("mergeShown",e),t("persistShown")},async reloadSchema({state:t,commit:e}){let i=`id:${t.meta.id}/thing-schema.json`,n=await Wn.Io.loadMeta(i),a=await Wn.Io.loadContent(n,{as:"json"});if(a.methods){let t=await Ti.Load(a.methods);_.isArray(t)||(t=[t]),a.methods=t}return e("setSchema",a),a},async reloadLayout({state:t,commit:e}){let i=`id:${t.meta.id}/thing-layout.json`,n=await Wn.Io.loadMeta(i),a=await Wn.Io.loadContent(n,{as:"json"});return e("setLayout",a),e("restoreShown"),a},async reloadActions({state:t,commit:e}){let i=`id:${t.meta.id}/thing-actions.json`,n=await Wn.Io.loadMeta(i),a=await Wn.Io.loadContent(n,{as:"json"});return e("setActions",a),a},async reload({state:t,commit:e,dispatch:i},n){n?e("setMeta",n):n=t.meta,e("setStatus",{reloading:!0}),await i("reloadSchema"),await i("reloadLayout"),await i("reloadActions"),e("setStatus",{reloading:!1})}};Ti.Preload("ti/mod/wn/thing/mod/config/m-thing-config-actions.mjs",t)}(),Ti.Preload("ti/mod/wn/thing/mod/config/m-thing-config.json",{meta:null,shown:{search:!0,meta:!0,content:!0,files:!1},listOpen:{content:!0},schema:{},layout:{deskstop:{},tablet:{},phone:{}},actions:[],status:{reloading:!1,saving:!1}}),function(){const t={mutations:{setMeta(t,e){t.meta=e},setStatus(t,e){t.status=_.assign({},t.status,e)},setSchema(t,e){t.schema=e},setLayout(t,e){t.layout=_.pick(e,["desktop","tablet","phone"]),t.shown=e.shown||{},t.listOpen=e.listOpen||{}},setActions(t,e){t.actions=e},mergeShown(t,e){e&&!_.isEmpty(e)&&(t.shown=_.assign({},t.shown,e))},persistShown(t){t.meta&&t.meta.id&&Ti.Storage.session.setObject(`${t.meta.id}-shown`,t.shown)},restoreShown(t){if(t.meta&&t.meta.id){let e=Ti.Storage.session.getObject(`${t.meta.id}-shown`);t.shown=_.assign({},t.shown,e)}}}};Ti.Preload("ti/mod/wn/thing/mod/config/m-thing-config.mjs",t)}(),Ti.Preload("ti/mod/wn/thing/mod/config/_mod.json",{namespaced:!0,state:"./m-thing-config.json",actions:"./m-thing-config-actions.mjs",mixins:"./m-thing-config.mjs"}),function(){const t={async reloadPage({state:t,commit:e,dispatch:i},n){e("updatePager",n),await i("reload")},async reload({state:t,commit:e,rootState:i},n){n?e("setMeta",n):n=t.meta,e("setStatus",{reloading:!0});let a=[`thing id:${n.id} query -pager -cqn`],{keyword:s,match:o}=t.filter||{},l={};if(s)if(/^[0-9a-z]{32}$/.test(s))l.id=s;else{let t="title",e=_.get(i,"main.config.schema.behavior")||{},n=_.keys(e.keyword);for(let i of n){let n=e.keyword[i];if(new RegExp(n).test(s)){t=i;break}}t.startsWith("=")?l[t.substring(1).trim()]=s:l[t]="^.*"+s}if(_.isEmpty(o)||_.assign(l,o),l.th_live=t.inRecycleBin?-1:1,!_.isEmpty(t.sorter)){let e=JSON.stringify(t.sorter);a.push(`-sort '${e}'`)}let r=t.pager;if(!_.isEmpty(r)&&r.pgsz>0&&r.pn>0){let t=r.pgsz,e=r.pgsz*(r.pn-1);a.push(`-limit ${t}`),a.push(`-skip  ${e}`)}let c=_.isEmpty(l)?void 0:JSON.stringify(l),d=a.join(" "),h=await Wn.Sys.exec2(d,{input:c,as:"json"});e("setPager",h.pager),e("setList",h.list),e("setStatus",{reloading:!1})}};Ti.Preload("ti/mod/wn/thing/mod/search/m-thing-search-actions.mjs",t)}(),Ti.Preload("ti/mod/wn/thing/mod/search/m-thing-search.json",{meta:null,filter:{},sorter:{ct:-1},inRecycleBin:!1,pager:{pn:1,pgsz:50,pgc:0,sum:0,skip:0,count:0},currentId:null,checkedIds:[],list:[],status:{reloading:!1,saving:!1,deleting:!1}}),function(){function t(t,e,i){if(!t)return;let n=Ti.Storage.session.getObject(t.id)||{};_.defaults(n,{filter:{},sorter:{},pager:{}}),n[e]=i,Ti.Storage.session.setObject(t.id,n)}const e={getters:{currentItem(t){if(t.currentId)for(let e of t.list)if(e.id==t.currentId)return e;return null},checkedItems(t){let e={};for(let i of t.checkedIds)e[i]=!0;let i=[];for(let n of t.list)e[n.id]&&i.push(n);return i}},mutations:{setMeta(t,e){t.meta=e},setStatus(t,e){t.status=_.assign({},t.status,e)},setFilter(e,i={}){e.filter=i,t(e.meta,"filter",e.filter)},updateFilter(e,i={}){e.filter=_.assign({},e.filter,i),t(e.meta,"filter",e.filter)},setSorter(e,i){e.sorter=i,t(e.meta,"sorter",e.sorter)},setPager(e,i){e.pager=i,t(e.meta,"pager",e.pager)},updatePager(t,e){t.pager=_.defaults({},e,t.pager)},setInRecycleBin(t,e=!1){t.inRecycleBin=e},setList(t,e){t.list=e},setCurrentId(t,e){t.currentId=e||null},setCheckedIds(t,e=[]){t.checkedIds=_.union(e)},selectItem(t,e){t.currentId!=e&&(t.currentId=e,t.checkedIds=[],e&&t.checkedIds.push(e))},removeItems(t,e=[]){let i=-1;if(t.currentId)for(let e=0;e<t.list.length;e++){if(t.list[e].id==t.currentId){i=e;break}}let n={};if(_.isArray(e))for(let t of e)n[t]=!0;else _.isPlainObject(e)&&(n=e);let a=[];for(let e of t.list)n[e.id]||a.push(e);let s=null;(i=Math.min(i,a.length-1))>=0?(s=a[i],t.currentId=s.id,t.checkedIds=[s.id]):(t.currentId=null,t.checkedIds=[]),t.list=a,t.pager&&(t.pager.count=a.length,t.pager.sum=t.pager.pgsz*(t.pager.pgc-1)+a.length)},updateItem(t,e){let i=[];for(let n of t.list)n.id==e.id?i.push({...e,__updated_time:Date.now()}):i.push(n);t.list=i},appendToList(t,e){e&&(t.list=[].concat(t.list,e))},prependToList(t,e){e&&(t.list=[].concat(e,t.list))}}};Ti.Preload("ti/mod/wn/thing/mod/search/m-thing-search.mjs",e)}(),Ti.Preload("ti/mod/wn/thing/mod/search/_mod.json",{namespaced:!0,state:"./m-thing-search.json",actions:"./m-thing-search-actions.mjs",mixins:"./m-thing-search.mjs"}),Ti.Preload("ti/mod/wn/thing/_mod.json",{name:"wn-thing",namespaced:!0,state:"./m-thing.json",actions:"./m-thing-actions.mjs",mixins:"./m-thing.mjs",modules:{config:"./mod/config",search:"./mod/search",current:"@mod:wn/obj-current"}}),Ti.Preload("ti/lib/www/com/site-main.html",'<div class="site-main">\n  <ti-gui \n    class="site-page"\n    v-bind="PageGUI"\n    :loading-as="loading"\n    :shown="page.shown"/>\n  \x3c!--pre>{{page}}</pre--\x3e\n</div>'),function(){const t={provide:function(){return Ti.Util.explainObj(this.provide,this)},computed:{...Vuex.mapState({siteId:t=>t.siteId,logo:t=>t.logo,utils:t=>t.utils,page:t=>t.page,shop:t=>t.shop,auth:t=>t.auth,domain:t=>t.domain,base:t=>t.base,apiBase:t=>t.apiBase,cdnBase:t=>t.cdnBase,captcha:t=>t.captcha,schema:t=>t.schema,provide:t=>t.provide,blocks:t=>t.blocks,loading:t=>t.loading,pageReady:t=>t.pageReady}),...Vuex.mapGetters(["actions","getUrl","getApiUrl"]),...Vuex.mapGetters("page",["pageLink"]),SiteLogo(){return this.logo&&/\.(png|jpe?g)$/.test(this.logo)?this.getUrl(this.logo):this.logo||"zmdi-globe"},SiteNav(){let t={};return _.forEach(this.$store.state.nav,(e,i)=>{t[i]=Ti.WWW.explainNavigation(e,this.base)}),t},SiteCaptcha(){let t=Ti.S.renderBy(this.captcha,{site:this.siteId});return t.startsWith("/")?t:this.getApiUrl(t)},SiteLoginMode(){return this.auth.me?"bind_phone":"login_by_passwd"},PageFnSet(){return Ti.AddGlobalFuncs(this.utils),Ti.GlobalFuncs()},PageGUI(){let t=this.page;if(!t||!t.layout)return{};let e=t.layout;if(e){const t=e=>{if(_.isString(e)){let t=/^@BLOCK\(([^ ]+)\)$/.exec(e);if(t){let e=t[1];return _.get(this.blocks,e)}}else{if(_.isArray(e))return _.map(e,t);if(_.isPlainObject(e))return _.mapValues(e,t)}return e};e=t(e)}let i={defaultFlex:"none",layout:e,schema:{},canLoading:!0};_.assign(i.schema,this.schema,t.schema);return Ti.Util.explainObj(this,i,{fnSet:this.PageFnSet})}},methods:{async showBlock(t){Ti.App(this).dispatch("page/showBlock",t)},async hideBlock(t){Ti.App(this).dispatch("page/hideBlock",t)},__on_events(t,...e){return console.log("site-main.__on_events",t,...e),"block:show"==t?t=>this.showBlock(t):"block:hide"==t?t=>this.hideBlock(t):(...e)=>{this.invokeAction(t,e)}},async invokeAction(t,e=[]){await Ti.App(this).dispatch("invokeAction",{name:t,args:e})},pushBrowserHistory(){let t=window.history;if(!t)return;let e=window.location,i=[e.pathname,e.search,e.hash].join(""),n=this.getUrl(this.pageLink);i!=n&&t.pushState(this.page,this.page.title,n)}},watch:{"page.finger":function(){let t=Ti.Util.explainObj(this,this.page.title);document.title=t,this.pushBrowserHistory()}},mounted:function(){window.onpopstate=(t=>{let e=t.state;if(e&&e.path){console.log("window.onpopstate",e);Ti.App(this).dispatch("navTo",{type:"page",value:e.path,params:e.params,anchor:e.anchor})}})}};Ti.Preload("ti/lib/www/com/site-main.mjs",t)}(),Ti.Preload("ti/lib/www/mod/auth/www-mod-auth.json",{ticket:null,expi:0,me:null,paths:{checkme:"auth/checkme",login_by_wxcode:"auth/login_by_wxcode",login_by_phone:"auth/login_by_phone",login_by_email:"auth/login_by_email",login_by_passwd:"auth/login_by_passwd",bind_phone:"auth/bind_account",bind_email:"auth/bind_account",get_sms_vcode:"auth/get_sms_vcode",get_email_vcode:"auth/get_email_vcode",check_name:"auth/check_name",check_phone:"auth/check_phone",logout:"auth/logout"}}),function(){const t={getters:{hasSession:t=>!_.isEmpty(t.ticket)&&t.expi>Date.now()&&!_.isEmpty(t.me),sessionState:(t,e)=>({ok:e.hasSession,data:{me:t.me||null,ticket:t.ticket||null,expi:t.expi||0}}),urls(t,e,i,n){let a={};return _.forEach(t.paths,(t,e)=>{a[e]=n.getApiUrl(t)}),a}},mutations:{setTicket(t,e){t.ticket=e},setExpi(t,e){t.expi=e},setMe(t,e){t.me=e},setPaths(t,e){_.assign(t.paths,e)},mergePaths(t,e){_.merge(t.paths,e)}},actions:{async doCheckMe({state:t,commit:e,dispatch:i,getters:n,rootState:a},{force:s=!1,success:o,fail:l,nophone:r,noemail:c}={}){console.log("I am doCheckMe",{force:s,success:o,fail:l,nophone:r});let d=a.siteId;if(!d)return void Ti.Alert("Without siteId!!!");let h=Ti.Storage.local.getString(`www-ticket-${d}`,"");e("setLoading",!0,{root:!0});let m=n.sessionState;if(!h||!s&&m.ok||(m=await Ti.Http.get(n.urls.checkme,{params:{site:d,ticket:h},as:"json"})),e("setLoading",!1,{root:!0}),m.ok){if(console.log("checkme OK",m),e("setTicket",m.data.ticket),e("setExpi",m.data.expi),e("setMe",m.data.me),r){if(!m.data.me.phone)return await i(r.action,r.payload,{root:!0})}if(c){if(!m.data.me.email)return await i(c.action,c.payload,{root:!0})}o&&await i(o.action,o.payload,{root:!0})}else l&&await i(l.action,l.payload,{root:!0})},async autoCheckmeOrAuthByWxghCode({dispatch:t},{codeKey:e="code",codeTypeBy:i="ct",force:n=!1,fail:a,nophone:s,noemail:o}={}){console.log("autoCheckmeOrAuthByWxghCode"),t("doCheckMe",{force:n,fail:{action:"auth/authByWxghCode",payload:{codeKey:e,codeTypeBy:i,fail:async()=>{a&&t(a.action,a.payload,{root:!0})},ok:async({me:e={}}={})=>s&&!e.phone?await t(s.action,s.payload,{root:!0}):o&&!e.email?await t(o.action,o.payload,{root:!0}):void 0}}})},async authByWxghCode({commit:t,getters:e,rootState:i},{codeKey:n="code",codeTypeBy:a="ct",done:s=_.identity,ok:o=_.identity,fail:l=_.identity,invalid:r=_.identity,others:c=_.identity}={}){let d=i.page.params[n];if(!d)return;let h=i.page.params[a];console.log("authByWxghCode",{codeType:h,code:d});let m=i.siteId;if(!m)return void Ti.Alert("Without siteId!!!");let u=e.urls.login_by_wxcode,p={site:m,code:d,ct:h},y=await Ti.Http.get(u,{params:p,as:"json"});console.log(y),await s(y),y.ok&&y.data?(Ti.Storage.local.set(`www-ticket-${m}`,y.data.ticket),t("setTicket",y.data.ticket),t("setExpi",y.data.expi),t("setMe",y.data.me),await o(y.data)):(/^e.www.login.invalid/.test(y.errCode)?await r(y):await c(y),await l(y))},async doAuth({commit:t,getters:e,rootState:i},{type:n="login_by_passwd",name:a,passwd:s,done:o=_.identity,ok:l=_.identity,fail:r=_.identity,noexist:c=_.identity,invalid:d=_.identity,others:h=_.identity}={}){console.log("doAuth",a,s);let m=i.siteId;if(!m)return void Ti.Alert("Without siteId!!!");let u=e.urls[n],p=Ti.Storage.local.getString(`www-ticket-${m}`,""),y={login_by_passwd:"passwd",login_by_phone:"vcode",login_by_email:"vcode",bind_phone:"vcode",bind_email:"vcode"}[n];if(!y)throw"Unknown auth type: "+n;let f={site:m,name:a,[y]:s,ticket:p,ajax:!0},g=await Ti.Http.post(u,{params:f,as:"json"});console.log(g),await o(g),g.ok&&g.data?(Ti.Storage.local.set(`www-ticket-${m}`,g.data.ticket),t("setTicket",g.data.ticket),t("setExpi",g.data.expi),t("setMe",g.data.me),await l(g.data)):("e.www.login.noexists"==g.errCode?await c(g):/^e.www.login.invalid/.test(g.errCode)?await d(g):await h(g),await r(g))},async doGetVcode({getters:t,rootState:e},{type:i="login_by_phone",scene:n="auth",account:a,captcha:s,done:o=_.identity,ok:l=_.identity,fail:r=_.identity}={}){console.log("getVcode",{type:i,scene:n,account:a,captcha:s});let c=e.siteId;if(!c)return void Ti.Alert("Without siteId!!!");let d={login_by_phone:"get_sms_vcode",login_by_email:"get_email_vcode",bind_phone:"get_sms_vcode",bind_email:"get_email_vcode"}[i],h=t.urls[d];if(!d||!h)return await Ti.Toast.Open(`Invalid type: ${i}`,"error");let m={site:c,scene:n,account:a,captcha:s},u=await Ti.Http.get(h,{params:m,as:"json"});console.log(u),o(u),u.ok&&u.data?l(u.data):r(u)},async doLogout({commit:t,getters:e,rootState:i},{done:n=_.identity,ok:a=_.identity,fail:s=_.identity}={}){console.log("doLogout");let o=i.siteId;if(!o)return void Ti.Alert("Without siteId!!!");if(Ti.Storage.local.remove(`www-ticket-${o}`),!e.hasSession)return void s(e.sessionState);let l=e.sessionState,r=e.urls.logout,c={site:o,ticket:l.ticket};t("setLoading",{text:"i18n:logout-ing"},{root:!0});let d=await Ti.Http.post(r,{params:c,as:"json"});console.log(d),t("setTicket",null),t("setExpi",0),t("setMe",null),t("setLoading",!1,{root:!0}),n(d),d.ok?a(d.data):s(d)}}};Ti.Preload("ti/lib/www/mod/auth/www-mod-auth.mjs",t)}(),Ti.Preload("ti/lib/www/mod/auth/_mod.json",{name:"www-mod-auth",namespaced:!0,state:"./www-mod-auth.json",mixins:"./www-mod-auth.mjs"}),Ti.Preload("ti/lib/www/mod/page/www-mod-page.json",{title:null,path:null,ready:0,finger:null,params:{},anchor:null,apis:{},data:{},layout:{desktop:{},tablet:"desktop",phone:"desktop"},shown:{},schema:{},actions:{}}),function(){const t={getters:{pageLink({path:t,params:e,anchor:i}){let n=[t];if(!_.isEmpty(e)){let t=[];_.forEach(e,(e,i)=>{Ti.Util.isNil(e)||t.push(`${i}=${encodeURIComponent(e)}`)}),_.isEmpty(t)||n.push(`?${t.join("&")}`)}return i&&n.push(`#${i}`),n.join("")},pageApis(t,e,i,n){let a=i.apiBase||"/",s=i.apis||{},o={};return _.forEach(t.apis,(t,e)=>{let i=_.get(s,t.apiName||e),n=_.cloneDeep(i);_.defaults(n,{method:"GET",headers:{},params:{},vars:{},as:"json"}),n.path?(_.assign(n.vars,t.vars),_.assign(n.headers,t.headers),_.forEach(n.params,(e,i)=>{let n=_.get(t.params,i);_.isUndefined(n)||(e.value=n)}),/^(https?:\/\/|\/)/.test(n.path)?n.url=n.path:n.url=Ti.Util.appendPath(a,n.path),_.assign(n,_.pick(t,"body","preload","serializer","dataKey","dataMerge","rawDataKey","rawDataMerge")),_.defaults(n,{bodyType:"form",dataKey:e}),o[e]=n):console.warn(`!!!API[${e}] without defined in site!!!`,n)}),o}},mutations:{set(t,e){_.assign(t,e)},setTitle(t,e){t.title=e},setPath(t,e){t.path=e},setPath(t,e){t.path=e},setParams(t,e){t.params=e},mergeParams(t,e){!_.isEmpty(e)&&_.isPlainObject(e)&&(t.params=_.merge({},t.params,e))},setData(t,e){t.data=e},updateData(t,{key:e,value:i}={}){if(!e||_.isUndefined(i))return;let n=_.set({},e,i);t.data=_.assign({},t.data,n)},mergeData(t,e){!_.isEmpty(e)&&_.isPlainObject(e)&&(t.data=_.merge({},t.data,e))},setLayout(t,e){t.layout=e},setShown(t,e){_.assign(t.shown,e)},setReady(t,e){t.ready=e},updateFinger(t){let e=[t.path,t.params,t.anchor,t.data],i=Ti.Alg.sha1(e);t.finger=i}},actions:{showBlock({commit:t},e){t("setShown",{[e]:!0})},hideBlock({commit:t},e){t("setShown",{[e]:!1})},changeData({commit:t},e){t("mergeData",Ti.Util.merge({},e))},changeParams({commit:t},e){t("mergeParams",Ti.Util.merge({},e)),t("updateFinger")},shiftData({state:t,commit:e},i={}){if(!_.isEmpty(i)&&_.isPlainObject(i)){let n={};Ti.Util.walk(i,{leaf:(e,i)=>{let a=_.get(t.data,i);_.isNumber(a)&&_.isString(e)&&/^[+-][0-9.]+$/.test(e)?_.set(n,i,a+1*e):_.set(n,i,e)}}),e("mergeData",n)}},assertPage({rootState:t,dispatch:e},{checkList:i=[],fail:n={}}={}){let a=!1;for(let e of i){let i=_.get(t,e.target);if(!Ti.Validate.checkBy(e.assert,i)){a=!0;break}}a&&n.action&&e("doAction",n,{root:!0})},async scrollToTop({state:t}){Ti.Be.ScrollWindowTo({y:0})},async doApi({rootState:t,getters:e,commit:i},{key:n,params:a={},vars:s={},body:o=null}={}){let l=_.get(e.pageApis,n);if(console.log("doApi",n,a,l),!l)return await Ti.Toast.Open("e.www.page.ApiNotFound: "+n,"warn");_.defaults(s,l.vars);let r=l.url;if(!_.isEmpty(s)){let e=Ti.Util.explainObj(t,s);r=Ti.S.renderBy(l.url,e)}let c=_.pick(l,["method","as"]);c.vars=s,c.headers=Ti.Util.explainObj(t,l.headers),c.params={},_.forEach(l.params,(e,i)=>{let n=_.get(a,i);if(Ti.Util.isNil(n)&&(n=Ti.Util.explainObj(t,e.value)),e.required&&Ti.Util.isNil(n)){let t=`${r}: lack required param: ${i}`;throw Ti.Toast.Open(t,"error"),t}c.params[i]=n});let d=o||l.body;if("POST"==l.method&&d){let e=Ti.Util.explainObj(t,d);"json"==l.bodyType?c.body=JSON.stringify(e):"text"==l.bodyType?c.body=Ti.Types.toStr(e):c.body=Ti.Http.encodeFormData(e)}i("setLoading",!0,{root:!0});let h=await Ti.Http.sendAndProcess(r,c),m=h;if(l.serializer){let e=Ti.Util.genInvoking(l.serializer,{context:t,partialRight:!0});_.isFunction(e)&&(m=e(h))}l.dataMerge?i("mergeData",{[l.dataKey]:m}):i("updateData",{key:l.dataKey,value:m}),i("setLoading",!1,{root:!0})},async reloadData({state:t,commit:e,getters:i,rootState:n},a=[]){console.log(" # -> page.reloadData",a);let s=_.isEmpty(a),o=_.filter(i.pageApis,(t,e)=>s&&t.preload>0?!t.preloadWhen||Ti.Validate.match(n,t.preloadWhen,!1):_.indexOf(a,e)>=0);o.sort((t,e)=>t.preload-e.preload),e("setLoading",!0,{root:!0});for(let t of o){console.log("  # -> page.reloadData -> prepareApi",t);let i=t.url;if(!_.isEmpty(t.vars)){let e=Ti.Util.explainObj(n,t.vars);i=Ti.S.renderBy(i,e)}let a=_.pick(t,["method","as"]);if(a.headers=Ti.Util.explainObj(n,t.headers),a.params={},_.forEach(t.params,(t,e)=>{let s=Ti.Util.explainObj(n,t.value);if(t.required&&Ti.Util.isNil(s)){let t=`${i}: lack required param: ${e}`;throw Ti.Toast.Open(t,"error"),t}a.params[e]=s}),"POST"==t.method&&t.body){let e=Ti.Util.explainObj(n,t.body);"json"==t.bodyType?a.body=JSON.stringify(e):"text"==t.bodyType?a.body=Ti.Types.toStr(e):a.body=Ti.Http.encodeFormData(e)}let s=await Ti.Http.sendAndProcess(i,a),o=s;if(t.serializer){let e=Ti.Util.genInvoking(t.serializer,{context:n,partialRight:!0});_.isFunction(e)&&(o=e(s))}t.dataMerge?e("mergeData",{[t.dataKey]:o}):e("updateData",{key:t.dataKey,value:o}),t.rawDataKey&&(t.rawDataMerge?e("mergeData",{[t.rawDataKey]:s}):e("updateData",{key:t.rawDataKey,value:s}))}e("setLoading",!1,{root:!0}),e("updateFinger")},async reload({commit:t,dispatch:e,rootGetters:i},{path:n,anchor:a,params:s={}}){console.log(" # -> page.reload",{path:n,params:s,anchor:a});let o;for(let t of i.routerList)if((o=t(n))&&o.path)break;if(!o||!o.path)return await Ti.Toast.Open("Page ${path} not found!",{type:"error",position:"center",vars:{path:n}});console.log("@page:init ..."),t("setReady",0),await e("invokeAction",{name:"@page:init"},{root:!0});let l=await Ti.Load(`@Site:${o.path}.json`);a&&(o.anchor=a),o.params=_.merge({},o.params,s),o.path=n;let r=_.merge({title:null,apis:{},data:{},layout:{},params:{},shown:{},schema:{},actions:{}},l,o);t("set",r),console.log(" #### page.loaded",_.cloneDeep(r)),console.log("@page:prepare ..."),t("setReady",1),await e("invokeAction",{name:"@page:prepare"},{root:!0}),await e("reloadData"),e("scrollToTop"),console.log("@page:ready ..."),t("setReady",2),await e("invokeAction",{name:"@page:ready"},{root:!0})}}};Ti.Preload("ti/lib/www/mod/page/www-mod-page.mjs",t)}(),Ti.Preload("ti/lib/www/mod/page/_mod.json",{name:"www-mod-page",namespaced:!0,state:"./www-mod-page.json",mixins:"./www-mod-page.mjs"}),Ti.Preload("ti/lib/www/mod/shop/www-mod-shop.json",{basket:[],payment:null,paths:{buyIt:"entity/buy/it",buyRemove:"entity/buy/rm",buyGetAll:"entity/buy/all",buyClean:"entity/buy/clean",objs:"objs",buy:"pay/buy",pay:"pay/pay",checkOrder:"pay/check"}}),function(){const t={getters:{urls(t,e,i,n){let a={};return _.forEach(t.paths,(t,e)=>{a[e]=n.getApiUrl(t)}),a}},mutations:{appendBasket(t,e){t.basket=_.concat(t.basket,e)},setBasket(t,e=[]){t.basket=e},setPayment(t,e){t.payment=e},setPaths(t,e){t.paths=_.cloneDeep(e)},mergePaths(t,e){_.assign(t.paths,e)}},actions:{async fetchOrder({getters:t,rootState:e},{orderId:i,payType:n}={}){if(!i)return;let a=await Ti.Http.get(t.urls.pay,{params:{ticket:e.auth.ticket,id:i,pt:n},as:"json"});if(a.ok)return a.data;console.warn("Fail to loadBuyItems",{items:items,reo:a})},async createOrder({getters:t,rootState:e},{payType:i,items:n}={}){if(!i||_.isEmpty(n))return;let a=await Ti.Http.post(t.urls.buy,{params:{ticket:e.auth.ticket},headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({pay_tp:i,products:n}),as:"json"});if(a.ok)return a.data;console.warn("Fail to loadBuyItems",{items:n,reo:a})},async checkOrder({getters:t,rootState:e},i){if(console.log("checkOrder"),!i)return;let n=await Ti.Http.get(t.urls.checkOrder,{params:{ticket:e.auth.ticket,id:i},as:"json"});if(n.ok)return n.data;console.warn("Fail to loadBuyItems",{items:items,reo:n})},async loadBuyItems({getters:t,commit:e},{items:i=[],commitDataKey:n="goods",commitTarget:a="page/updateData"}){console.log("loadBuyItems",i);let s=[],o={};if(_.forEach(i,t=>{let e=/^(\d+):(.+)$/.exec(t);if(e){let t=1*e[1],i=e[2];i&&t>0&&(s.push(`id:${i}`),o[i]=t)}}),_.isEmpty(s))return;let l=await Ti.Http.get(t.urls.objs,{params:{phs:s.join(" ")},as:"json"});if(l.ok){let t=[];_.forEach(l.data,e=>{let i=e.id,n=o[i];t.push({id:i,amount:n,obj:e})}),e(a,{key:n,value:t},{root:!0})}else console.warn("Fail to loadBuyItems",{items:i,reo:l})},async checkoutBasket({state:t,dispatch:e},{checkoutPage:i="page/shop/checkout.html"}={}){let n=[];_.forEach(t.basket,t=>{t.name&&t.count>0&&n.push({id:t.name,amount:t.count})}),_.isEmpty(n)?console.warn("!checkoutBasket: Empty Basket"):await e("checkout",{items:n,checkoutPage:i})},async checkout({commit:t,dispatch:e,getters:i,rootState:n},{items:a=[],checkoutPage:s="page/shop/checkout.html"}={}){console.log("checkout",a);let o=[];_.forEach(a,t=>{t.id&&t.amount>0&&o.push(`${t.amount}:${t.id}`)}),_.isEmpty(o)?console.warn("!checkout: Empty Item"):await e("navTo",{value:s,params:{its:o.join(",")}},{root:!0})},async updateBasket({commit:t,dispatch:e,getters:i,rootState:n},{id:a,n:s=1,reset:o=!1,success:l,fail:r,invalid:c,noTicket:d}={}){if(console.log("shop:addToBasket",{id:a,success:l,fail:r}),0===s&&!o)return;let h=n.auth.ticket;if(!h)return d?await e(d.action,d.payload,{root:!0}):void Ti.Alert("Without Session Ticket!!!");if(!a)return c?await e(c.action,c.payload,{root:!0}):void Ti.Alert("Without Product ID!!!");t("setLoading",!0,{root:!0});let m=await Ti.Http.get(i.urls.buyIt,{params:{ticket:h,id:a,n:s,r:o},as:"json"});m.ok?(t("setBasket",m.data),l&&await e(l.action,l.payload,{root:!0})):r?await e(r.action,r.payload,{root:!0}):console.warn("shop.updateBasket fail:",m),t("setLoading",!1,{root:!0})},async cleanBasket({commit:t,getters:e,rootState:i}){console.log("shop:cleanBasket");let n=i.auth.ticket;if(!n)return;if(!await Ti.Confirm("i18n:shop-basket-clean-confirm"))return;t("setLoading",!0,{root:!0});let a=await Ti.Http.get(e.urls.buyClean,{params:{ticket:n},as:"json"});t("setLoading",!1,{root:!0}),a.ok?t("setBasket",[]):console.error("www/shop module: Fail to reloadBasket",a)},async reloadBasket({commit:t,getters:e,rootState:i}){console.log("shop:reloadBasket");let n=i.auth.ticket;if(!n)return;t("setLoading",!0,{root:!0});let a=await Ti.Http.get(e.urls.buyGetAll,{params:{ticket:n},as:"json"});t("setLoading",!1,{root:!0}),a.ok?t("setBasket",a.data):console.error("www/shop module: Fail to reloadBasket",a)}}};Ti.Preload("ti/lib/www/mod/shop/www-mod-shop.mjs",t)}(),Ti.Preload("ti/lib/www/mod/shop/_mod.json",{name:"www-mod-shop",namespaced:!0,state:"./www-mod-shop.json",mixins:"./www-mod-shop.mjs"}),function(){const t={getters:{routerList(t){let e=[];return _.forEach(t.router,({match:t,names:i=[],page:n={}}={})=>{let a=new RegExp(t);e.push(function(t){let e=a.exec(t);if(e){let t={};for(let n=0;n<e.length;n++){let a=e[n];t[n]=a,_.nth(i,n)&&_.set(t,key,a)}return Ti.Util.explainObj(t,n)}})}),e},actions(t){let e=_.cloneDeep(t.actions);e=_.mapValues(e,t=>_.isString(t)?{action:t}:t);let i=t.page;return i&&_.forEach(i.actions,(t,i)=>{let n=t;_.isString(t)&&(n={action:t});let a=e[i];if(_.isArray(a))if(_.isArray(n)){if(n.length>0)if("+"==n[0])for(let t=1;t<n.length;t++)a.push(n[t]);else e[i]=n}else a.push(n);else e[i]=n}),e},getUrl:t=>e=>Ti.Util.appendPath(t.base,e),getApiUrl:t=>e=>e.startsWith("/")?e:Ti.Util.appendPath(t.apiBase,e)},mutations:{setSiteId(t,e){t.siteId=e},setDomain(t,e){t.domain=e,t.base=Ti.S.renderBy(t.base||"/www/${domain}/",{domain:e}),t.apiBase=Ti.S.renderBy(t.apiBase||"/api/${domain}/",{domain:e})},setLoading(t,e){t.loading=e},explainSiteState(t){t.base=Ti.Util.explainObj(t,t.base),t.apiBase=Ti.Util.explainObj(t,t.apiBase),t.cdnBase=Ti.Util.explainObj(t,t.cdnBase),t.logo=Ti.Util.explainObj(t,t.logo),t.entry=Ti.Util.explainObj(t,t.entry)}},actions:{navBackward(){window.history&&window.history.back()},async openUrl({state:t},{url:e,target:i="_self",method:n="GET",params:a={},delay:s=0}){await Ti.Be.Open(e,{target:i,method:n,params:a,delay:s})},async navTo({commit:t,dispatch:e},{type:i="page",value:n,anchor:a,data:s,params:o}={}){console.log("navToPage::",n),n&&("page"==i?(t("setLoading",!0),await e("page/reload",{path:n,anchor:a,params:o,data:s}),t("setLoading",!1)):"dispatch"==i&&await e(n,o))},async doAction({state:t,dispatch:e},{action:i,payload:n,args:a=[]}={}){if(!i)return;let s;if(_.isUndefined(n)||_.isNull(n))s=_.cloneDeep(_.nth(a,0));else{let e=_.assign({},t,{$args:a});s=Ti.Util.explainObj(e,n,{evalFunc:!1})}console.log("invoke->",i,s),await e(i,s)},async invokeAction({getters:t,dispatch:e},{name:i="",args:n=[]}={}){let a=t.actions,s=_.get(a,i);if(!s){let t=_.split(i,"::");for(;t.length>1;){let[,...e]=t,i=e.join("::");if(s=_.get(a,i))break;t=e}}if(s)try{if(_.isArray(s))for(let t of s)await e("doAction",{action:t.action,payload:t.payload,args:n});else _.isString(s)?await e("doAction",{action:s,args:n}):await e("doAction",{action:s.action,payload:s.payload,args:n})}catch(t){console.error(t)}},async reload({state:t,commit:e,dispatch:i}){console.log("site.reload",t.entry,t.base);let n=Ti.Util.parseHref(window.location.href);e("auth/mergePaths",t.authPaths);let a=t.entry;n.path.startsWith(t.base)&&(a=n.path.substring(t.base.length)||a),await i("navTo",{type:"page",value:a,params:n.params,anchor:n.hash,pushHistory:!1})}}};Ti.Preload("ti/lib/www/mod/www-mod-site.mjs",t)}(),Ti.Preload("/a/load/wn.manager/gui/layout.json",{desktop:{type:"rows",border:!0,blocks:[{name:"sky",size:48,type:"rows",border:!0,blocks:[{type:"cols",blocks:[{name:"logo",size:"auto",body:"pcSkyLogo"},{name:"title",size:"stretch",body:"pcSkyTitle"},{name:"session",size:"auto",body:"pcSkySession"},{name:"menu",size:"auto",body:"pcSkyMenu"}]}]},{name:"main",size:"100px",flex:"both",type:"cols",border:!0,blocks:[{name:"sidebar",size:"1.8rem",body:"pcMainSideBar"},{name:"arena",size:"stretch",body:"pcMainArena"}]},{name:"footer",size:".32rem",body:"pcFooter"}]},tablet:"desktop",phone:"desktop"}),Ti.Preload("/a/load/wn.manager/gui/schema.json",{pcSkyLogo:{comType:"ti-icon",comConf:{width:"3em",fontSize:"1.5em",value:"=Logo"}},pcSkyTitle:{comType:"ti-crumb",comConf:"=Crumb"},pcSkySession:{comType:"ti-session-badge",comConf:"=SessionBadge"},pcSkyMenu:{comType:"ti-actionbar",comConf:"=ActionMenu"},pcMainSideBar:{comType:"wn-gui-side-nav",comConf:{items:"=sidebar",highlightItemId:"=MetaId",highlightItemPath:"=MetaPath"}},pcMainArena:{comType:"=comType",comConf:"=Arena"},pcFooter:{comType:"wn-gui-footer",comConf:"=Footer"}}),Ti.Preload("/a/load/wn.manager/gui/setup.json",{shown:{desktop:{logo:"==theLogo",menu:"==theMenu",sessionBadge:"==theSessionBadge"},tablet:{},phone:{}},canLoading:!0,loadingAs:!1,firstCrumbIndex:1,logo:"<:home>"}),function(){const t={Logo(){if("<:home>"==this.setup.logo){let t=_.nth(this.CrumbData,0);return t?t.icon:null}return this.setup.logo},CrumbData(){return Wn.Obj.evalCrumbData({meta:this.meta,ancestors:this.ancestors,fromIndex:this.setup.firstCrumbIndex,homePath:this.setup.skyHomePath,self:t=>{t.asterisk=this.isChanged}})},Crumb(){let t=_.cloneDeep(this.CrumbData);return this.Logo&&!_.isEmpty(t)&&(t[0].icon=null),{data:t}},SessionBadge(){let t=_.get(this.session,"me");if(t)return{me:t,avatarKey:"thumb",avatarSrc:null,loginIcon:1==t.sex?"im-user-male":"im-user-female",nameKeys:"nickname|nm"}},ActionMenu(){if(_.isArray(this.actions)&&!_.isEmpty(this.actions))return{className:`wn-${this.viewportMode}-menu`,items:this.actions,status:this.TheStatus,delay:500}},Arena(){if(this.hasView){let t=Ti.App(this),e=Ti.Util.explainObj(this,this.comConf)||{meta:this.meta,content:this.content,data:this.data,status:this.status};return e.onInit=function(){t.$vmMain(this)},e}},Footer(){return{infoIcon:this.comIcon,infoText:this.comType,message:this.myMessage||this.StatusText,indicator:this.myIndicator}}};Ti.Preload("/a/load/wn.manager/wn-manager-computed.mjs",t)}(),function(){const t={async reloadMain(){let t=this.meta;if(!t)return await Ti.Toast.Open("i18n:wn-manager-no-meta","warn");if(this.isLoading)return console.log("!!!"),await Ti.Toast.Open("i18n:wn-manager-is-loading","warn");this.loading=!0,this.comType="ti-loading",this.comConf={};try{if(this.view&&this.view.modType)try{this.$store.unregisterModule("main")}catch(t){console.error("Error when unregisterModule",t)}let e,i=/^#!(.+)$/.exec(window.location.hash),n=i?i[1]:null;e=n?`ti views -cqn -name '${n}'`:`ti views -cqn id:${t.id}`;let a=await Wn.Sys.exec2(e,{as:"json"}),s=Ti.App(this),o=await s.loadView(a);Ti.IsInfo("app/wn.manager")&&console.log("TiView Loaded:",o),o&&o.modType&&(this.$store.registerModule("main",o.mod),await s.dispatch("main/reload",t)),this.comType=o.comName,this.comIcon=o.comIcon,this.comConf=o.comConf,this.view=o,this.myMessage=null,this.myIndicator=null,this.OnUpdateActions(o.actions)}finally{this.loading=!1}},async reloadAncestors(){this.hasMeta&&(this.ancestors=await Wn.Io.loadAncestors("id:"+this.MetaId),this.parent=_.last(this.ancestors))},async reloadSidebar(){let t=await Wn.Sys.exec("ti sidebar -cqn",{as:"json"});this.sidebar=t.sidebar},pushHistory(t){let e=window.history;if(e&&t){if(e.state&&e.state.id==t.id)return;let i=Wn.Util.getAppLink(t.id),n=Wn.Util.getObjDisplayName(t);Ti.IsInfo("app/wn-manager")&&console.log(n,"->",i),e.pushState(t,n,i),document.title=n}}};Ti.Preload("/a/load/wn.manager/wn-manager-methods.mjs",t)}(),Ti.Preload("/a/load/wn.manager/wn-manager.html",'<ti-gui\n  class="wn-manager"\n  :class="TopClass"\n  :layout="GuiLayout"\n  :schema="GuiSchema"\n  :shown="GuiShown"\n  :can-loading="GuiCanLoading"\n  :loading-as="GuiLoadingAs"\n  @arena::expose-hidden="OnExposeHidden"\n  @do:logout="OnLogout"\n  @item:active="OnCurrentMetaChange"\n  @arena::open="OnCurrentMetaChange"\n  @arena::change="OnCurrentDataChange"\n  @arena::actions:update="OnUpdateActions"\n  @arena::indicate="OnArenaIndicate"\n  @arena::message="OnArenaMessage"/>'),function(){const t={provider:function(){return{$session:{ticket:this.session.ticket,userId:this.session.uid,userName:this.session.unm,group:this.session.grp}}},data:()=>({myExposeHidden:!1,loading:!1,comIcon:"zmdi-hourglass-alt",comType:"ti-loading",comConf:{},actions:[],sidebar:[],ancestors:[],parent:null,view:null,myMessage:null,myIndicator:null}),computed:{TopClass(){return this.getTopClass({"is-current-as-home":this.CurrentIsHome,"is-current-no-home":!this.CurrentIsHome},this.appClassName)},isLoading(){return this.loading||this.isReloading},isChanged(){let t=this.$store.state.main;return!!_.get(t,"status.changed")||_.get(this.status,"changed")},isSaving(){return _.get(this.status,"saving")},isReloading(){return _.get(this.status,"reloading")},hasActions(){return!_.isEmpty(this.actions)},hasView(){return!!this.view},hasMeta(){return!!this.meta},hasParent(){return!!this.parent},MetaId(){return _.get(this.meta,"id")},MetaPath(){return _.get(this.meta,"ph")},MyHome(){let t=this.meta,e=this.ancestors;if(_.isEmpty(e)){if(t&&"root"==t.nm)return t}else{if(1==e.length&&"home"==e[0].nm)return t;if("home"==e[0].nm)return e[1]}return null},MyHomeId(){return _.get(this.MyHome,"id")},ParentIsHome(){return this.hasParent&&this.parent.id==this.MyHomeId},CurrentIsHome(){return this.hasMeta&&this.MetaId==this.MyHomeId},TheStatus(){let t=_.get(this.$store.state,"main.status"),e=_.get(t,"reloading")||this.status.reloading;return _.assign({},t,this.status,{exposeHidden:this.myExposeHidden,changed:this.isChanged,reloading:e})},StatusText(){let t=_.assign({},this.status);return t.saving?Ti.I18n.text("i18n:saving"):t.reloading?Ti.I18n.text("i18n:loading"):void 0},Main(){return this.$store.state.main},GuiShown(){let t=_.get(this.setup,"shown");if(_.isPlainObject(t)){let e=t[this.viewportMode];return _.isString(e)&&(e=t[e]),_.isString(e)&&(e=t[e]),Ti.Util.explainObj(this,e)}return{}},GuiCanLoading(){return _.get(this.setup,"canLoading")},GuiLoadingAs(){return _.get(this.setup,"loadingAs")},GuiLayout(){return Ti.Util.explainObj(this,this.layout)},GuiSchema(){return Ti.Util.explainObj(this,this.schema)}},methods:{OnExposeHidden(t){this.myExposeHidden=t},OnLogout(){this.doLogout()},OnCurrentMetaChange({id:t,path:e,value:i}={}){this.openView(t||e||i)},OnCurrentDataChange(t){Ti.App(this).dispatch("current/changeContent",t)},OnUpdateActions(t){this.actions=_.cloneDeep(t),Ti.App(this).reWatchShortcut(t)},OnArenaIndicate(t){this.myIndicator=t},OnArenaMessage(t=""){this.myMessage=t},async openView(t){if(!_.isString(t))return;if(!await Ti.Fuse.fire())return;let e=Wn.Io.isFullObjId(t)?`id:${t}`:t;await Ti.App(this).dispatch("current/reload",e)},async doLogout(){let t=Wn.Session.env("QUIT")||"/";await Wn.Sys.exec("exit"),Ti.Be.Open(t,{target:"_self",delay:0})}},watch:{meta:async function(t,e){let i=_.get(t,"id"),n=_.get(e,"id"),a=_.isEqual(i,n);t&&(a||await this.reloadAncestors(),a&&!this.isChanged||(await this.reloadMain(),this.pushHistory(t)))}},mounted:async function(){await this.reloadSidebar()},beforeDestroy:function(){}};Ti.Preload("/a/load/wn.manager/wn-manager.mjs",t)}(),Ti.Preload("ti/i18n/zh-cn/hmaker.i18n.json",{"com-form":"表单","com-label":"标签","com-list":"列表","hm-type-Array":"数组","hm-type-Boolean":"布尔","hm-type-Group":"字段分组","hm-type-Integer":"整数","hm-type-Number":"数字","hm-type-Object":"对象","hm-type-String":"文本","hm-type-icons":{Array:"zmdi-format-list-bulleted",Boolean:"zmdi-toll",Group:"zmdi-collection-bookmark",Integer:"zmdi-n-6-square",Number:"zmdi-input-svideo",Object:"zmdi-toys",String:"zmdi-translate"},"hmaker-com-conf-blank":"请选择一个控件设置其详情","hmaker-com-type-blank":"选择一个控件","hmaker-edit-form-del-group-all":"组以及全部字段","hmaker-edit-form-del-group-confirm":"您是要删除组以及其内的全部字段，还是仅是组？","hmaker-edit-form-del-group-only":"仅是组","hmaker-edit-form-field-nil":"请选择一个字段编辑详情","hmaker-edit-form-new-field":"新字段","hmaker-edit-form-new-field-e0":"字段名不能以数字开头，内容只能为小写英文字母数字和下划线","hmaker-edit-form-new-field-e1":"字段【${val}】已存在，请另选一个名称","hmaker-edit-form-new-field-tip":"请输入新字段名（只能为小写英文字母数字和下划线）","hmaker-edit-form-new-group":"新分组","hmaker-edit-form-new-group-tip":"请输入新分组名","hmaker-edit-form-nil-field":"请先选择一个字段","hmaker-edit-form-not-current":"请选择一个字段或者字段组","hmaker-layout-cols":"列布局","hmaker-layout-rows":"行布局","hmaker-layout-tabs":"标签布局","hmaker-nav-blank-item":"请选择一个导航项目编辑","hmaker-nav-k-display":"链接显示内容","hmaker-nav-k-icon":"链接图标","hmaker-nav-k-title":"链接文字","hmaker-nav-k-type":"链接类型","hmaker-nav-k-value":"链接目标","hmaker-nav-tp-dispatch":"方法调用","hmaker-nav-tp-href":"外部链接","hmaker-nav-tp-page":"站点页面","hmaker-site-k-apiBase":"接口路径","hmaker-site-k-base":"资源路径","hmaker-site-k-captcha":"验证码路径","hmaker-site-k-domain":"所属域","hmaker-site-k-entry":"着陆页","hmaker-site-prop":"站点属性","hmaker-site-state":"站点全局配置","hmaker-site-state-actions":"全局动作表","hmaker-site-state-apis":"接口集","hmaker-site-state-blocks":"预定义布局","hmaker-site-state-general":"通用配置","hmaker-site-state-nav":"全局导航条","hmaker-site-state-router":"页面路由","hmaker-site-state-schema":"预定义控件","hmaker-site-state-utils":"扩展函数","hmaker-site-tree":"站点结构","hmaker-site-tree-loading":"正在加载站点结构...","hmk-adjustDelay":"调整延迟","hmk-aspect":"外观","hmk-autoI18n":"国际化","hmk-behavior":"行为","hmk-blankAs":"空白样式","hmk-breakLine":"维持换行","hmk-currentTab":"当前标签","hmk-data":"数据","hmk-dict":"数据字典","hmk-editable":"可编辑","hmk-field-checkEquals":"检查相等","hmk-field-com":"编辑控件","hmk-field-defaultAs":"默认值","hmk-field-disabled":"失效条件","hmk-field-height":"高度","hmk-field-hidden":"隐藏条件","hmk-field-icon":"图标","hmk-field-name":"键名","hmk-field-serializer":"自定义保存","hmk-field-tip":"提示说明","hmk-field-title":"显示名","hmk-field-transformer":"自定义转换","hmk-field-type":"类型","hmk-field-width":"宽度","hmk-fieldStatus":"字段状态","hmk-fields":"字段","hmk-fields-advance":"高级","hmk-fields-general":"基本","hmk-form-data":"数据源","hmk-form-height":"表单高度","hmk-form-onlyFields":"仅声明字段","hmk-form-width":"表单宽度","hmk-format":"格式化","hmk-height":"控件高度","hmk-href":"超链接","hmk-icon":"表单图标","hmk-measure":"尺寸","hmk-mode":"显示方式","hmk-mode-all":"全部","hmk-mode-tab":"标签","hmk-newTab":"新窗口","hmk-placeholder":"占位文本","hmk-prefixIcon":"前缀图标","hmk-prefixText":"前缀文字","hmk-spacing":"间距","hmk-spacing-comfy":"舒适","hmk-spacing-tiny":"紧凑","hmk-suffixIcon":"后缀图标","hmk-suffixText":"后缀文字","hmk-tabAt":"标签位置","hmk-tabAt-bottom-center":"下部居中","hmk-tabAt-bottom-left":"下部居左","hmk-tabAt-bottom-right":"下部居右","hmk-tabAt-top-center":"上部居中","hmk-tabAt-top-left":"上部居左","hmk-tabAt-top-right":"上部居右","hmk-title":"表单标题","hmk-trimed":"修剪空白","hmk-value":"输入值","hmk-valueMaxWidth":"值最大宽度","hmk-width":"控件宽度"}),Ti.Preload("ti/i18n/zh-cn/ti-datetime.i18n.json",{Apr:"四月",Aug:"八月",Dec:"十二月",Feb:"二月",Fri:"周五",Friday:"星期五",Jan:"一月",Jul:"七月",Jun:"六月",Mar:"三月",May:"五月",Mon:"周一",Monday:"星期一",Nov:"十一月",Oct:"十月",Sat:"周六",Saturday:"星期六",Sep:"九月",Sun:"周日",Sunday:"星期日",Thu:"周四",Thursday:"星期四",Tue:"周二",Tuesday:"星期二",Wed:"周三",Wednesday:"星期三","blank-date":"请选择日期","blank-date-range":"请选择日期范围","blank-datetime":"请选择日期时间","blank-month":"请选择月份","blank-time":"请选择时间","blank-time-range":"请选择时间范围",cal:{abbr:{Apr:"四月",Aug:"八月",Dec:"十二",Feb:"二月",Jan:"一月",Jul:"七月",Jun:"六月",Mar:"三月",May:"五月",Nov:"十一",Oct:"十月",Sep:"九月"},"d-range-beyond-days":"${yy0}年${MM0}月${dd0}至${dd1}日","d-range-beyond-months":"${yy0}年${MM0}月${dd0}日至${MM1}月${dd1}日","d-range-beyond-years":"${yy0}年${MM0}月${dd0}日至${yy1}年${MM1}月${dd1}日","d-range-in-same-day":"${yy0}年${MM0}月${dd0}日全天","m-range-beyond-months":"${yy0}年${MT0}至${MT1}","m-range-beyond-years":"${yy0}年${MT0}至${yy1}年${MT1}",week:["日","一","二","三","四","五","六"]},"du-in-min":"${n}分钟",time:{"any-time":"yyyy年M月d日","in-year":"M月d日","past-in-min":"刚刚","past-in-hour":"${min}分钟前","past-in-day":"${hour}小时前","past-in-week":"${day}天前","future-in-min":"即将","future-in-hour":"${min}分钟后","future-in-day":"${hour}小时后","future-in-week":"${day}天后"},"time-begin":"开始时间","time-end":"结束时间",today:"今天"}),Ti.Preload("ti/i18n/zh-cn/ti-obj-creation.i18n.json",{"toc-auto-type":"全部类型","toc-free":"请输入对象完整名称，包括扩展名，譬如 `myfile.xml`","toc-tip":"新对象名称"}),Ti.Preload("ti/i18n/zh-cn/ti-text-editor.i18n.json",{"wordp-h0":"正文","wordp-h1":"标题 1","wordp-h2":"标题 2","wordp-h3":"标题 3","wordp-h4":"标题 4","wordp-h5":"标题 5","wordp-h6":"标题 6","wordp-heading":"标题级别","wordp-link":"超链接","wordp-nil-sel":"请先选择一段文字"}),Ti.Preload("ti/i18n/zh-cn/ti-text-json.i18n.json",{"json-Array":"数组","json-Boolean":"布尔","json-Float":"小数","json-Integer":"整数","json-Nil":"空值","json-Number":"数字","json-Object":"对象","json-String":"字符串","json-new-key":"请输入一个新键名"}),Ti.Preload("ti/i18n/zh-cn/web.i18n.json",{"auth-bind":"绑定","auth-bind-email-title":"绑定邮箱","auth-bind-phone-title":"绑定手机","auth-blank-email":"邮箱不能为空","auth-blank-name":"名称不能为空","auth-blank-name-passwd":"名称或者密码不能为空","auth-blank-phone":"手机号不能为空","auth-doing":"正在验证","auth-email-tip":"邮箱地址","auth-email-title":"邮件密码登录/注册","auth-email-vcode":"邮件密码","auth-email-vcode-get":"获取邮件密码","auth-go-email":"邮件密码登录/注册","auth-go-passwd":"账号密码登录","auth-go-phone":"短信密码登录/注册","auth-login":"登录","auth-login-NoSaltedPasswd":"你还未初始化您的登录密码，请切换至【${ta?验证码}】登录，之后前往【用户中心 > 安全设置】初始化您的登录密码，谢谢","auth-login-or-signup":"登录/注册","auth-ok":"账号验证通过","auth-passwd-getback":"找回密码","auth-passwd-name-email-tip":"邮箱地址/登录名","auth-passwd-name-phone-tip":"手机号/登录名","auth-passwd-tip":"密码","auth-passwd-title":"账号密码登录","auth-phone-email-get":"获取邮箱验证码","auth-phone-tip":"手机号","auth-phone-title":"短信密码登录/注册","auth-phone-vcode":"短信密码","auth-phone-vcode-get":"获取短信密码","auth-reset-by-phone":"用手机号重置密码","auth-reset-by-phone-sent":"已经向您的手机 ${phone} 发送了验证码","auth-reset-by-phone-tip":"请输入您的账号绑定的手机号码","auth-reset-next":"下一步","auth-reset-passwd":"新密码（最少6位）","auth-reset-retype":"再次确认","auth-reset-save":"保存","auth-sending-vcode":"正在发送验证码","auth-sent-ok":"${ta?验证码}已发出，请在${by}查收，${min}分钟内有效","auth-ta-by-email":"邮箱里","auth-ta-by-phone":"手机上","auth-ta-email":"邮件密码","auth-ta-phone":"手机密码","auth-vcode-delay":"${sec} 秒后重新发送","auth-vcode-lost":"收不到验证码？","e-www-invalid-captcha":"${ta?验证码}错误","e-www-login-invalid-passwd":"账号密码错误","e-www-login-noexists":"账号不存在","or-st-dn":"已完成","or-st-fa":"支付失败","or-st-nw":"新建","or-st-ok":"支付成功","or-st-sd":"已发货","or-st-wt":"待支付","pay-by-free":"免费","pay-by-paypal":"PayPal","pay-by-wx-jsapi":"微信JSAPI","pay-by-wx-qrcode":"微信扫码","pay-by-wx-scan":"微信付款码","pay-by-zfb-qrcode":"支付宝扫码","pay-by-zfb-scan":"支付宝付款码","paypal-approve-tip":"已经在新标签里为您打开了PayPal支付页面，如果没有打开，请点击☝上面的图标。支付完毕，页面会自动感知到，如果没有反应，试着点击👇下面的【检查支付结果】按钮。","pay-checkout-it-amount":"数量","pay-checkout-it-name":"商品名称","pay-checkout-it-price":"单价","pay-checkout-it-subtotal":"小计","pay-checkout-tip":"请确认你购买的商品数量和金额","pay-paypal":"PayPal","pay-proceed-check":"检查支付结果","pay-proceed-ing":"正在检查...","pay-re-fail":"支付失败","pay-re-nil":"支付结果是一只薛定谔的猫","pay-re-ok":"支付成功","pay-re-wait":"等待支付中","pay-step-checkout-title":"确认订单","pay-step-choose-nil":"☝ 请选择上面的一个支付方式 👆","pay-step-choose-tip":"您可以选择下面任意一种支付方式支付本订单","pay-step-choose-tip2":"您将使用${val}支付本订单","pay-step-choose-title":"支付方式","pay-step-choose-title2":"选择支付方式","pay-step-done-title":"完成","pay-step-proceed-create-order":"正在创建订单...","pay-step-proceed-fetch-order":"正在获取订单...","pay-step-proceed-nil":"您未选择任何支付方式","pay-step-proceed-tip":"使用${val}支付本订单","pay-step-proceed-title":"支付","pay-tip-wx-qrcode":"请于15分钟内用微信扫一扫付款码","pay-tip-zfb-qrcode":"请于15分钟内用支付宝扫一扫付款码","pay-title":"支付流程","pay-wx":"微信支付","pay-zfb":"支付宝","shop-basket-clean-confirm":"您确定要清空购物车内全部商品吗？这是一个不能撤回的操作。"}),Ti.Preload("ti/i18n/zh-cn/wn-manager.i18n.json",{"ti-loading":"加载中...","wn-adaptlist":"对象浏览器","wn-create-fail":"创建失败","wn-create-invalid":"新对象名称不能包括非法字符","wn-create-ok":"创建成功","wn-create-too-long":"新对象名称过长","wn-del-item":'正在删除: "${name}"',"wn-del-no-empty-folder":'目录"${nm}"不是空的，您是否要全部删除？点击"否"跳过',"wn-del-none":"请选择至少一个文件进行删除!","wn-del-ok":"已有 ${N} 个对象被移除","wn-download-dir":'对象 "${nm}" 是一个目录，点击"继续"将跳过它并下载下一个文件，点击"终止"将结束本次操作!',"wn-download-none":"请选择至少一个文件进行下载!","wn-download-too-many":"即将逐个下载 ${N} 个文件，继续吗？","wn-expose-hidden-off":"不显示隐藏的对象","wn-expose-hidden-on":"显示隐藏的对象","wn-gui":"通用布局界面","wn-obj-preview":"对象预览","wn-obj-puretext":"纯文本编辑器","wn-obj-single-com":"单控件测试套","wn-publish-done":"发布成功","wn-publish-to-nil":"未设置发布目标","wn-publish-to-noexist":"发布目标不存在","wn-rename":'重命名对象 "${name}"',"wn-rename-fail":"重命名失败","wn-rename-invalid":"名称不能包括非法字符","wn-rename-none":"请选择一个文件重命名!","wn-rename-ok":"重命名成功","wn-rename-suffix-changed":"您的文件后缀名发生变化，您需要自动为您补全原来的后缀吗？","wn-rename-too-long":"名称过长","wn-thing-manager":"数据管理器","wn-view-opening":"正在加载界面..."}),Ti.Preload("ti/i18n/zh-cn/wn-obj-preview.i18n.json",{"wop-fullscreen-enter":"进入全屏","wop-fullscreen-quit":"退出全屏"}),Ti.Preload("ti/i18n/zh-cn/wn-thing.i18n.json",{"thing-clean":"清空回收站","thing-cleaning":"正在清空...","thing-content":"对象内容","thing-content-hide":"隐藏内容","thing-content-show":"显示内容","thing-create":"创建新对象","thing-create-in-recyclebin":"请先退出回收站，再创建新对象","thing-enter-recyclebin":"打开回收站","thing-files":"对象文件表","thing-files-hide":"隐藏文件表","thing-files-show":"显示文件表","thing-filter-kwdplhd":"请输入查询条件","thing-leave-recyclebin":"退出回收站","thing-meta":"对象属性","thing-meta-hide":"隐藏属性","thing-meta-show":"显示属性","thing-recycle-bin":"回收站","thing-restore":"恢复选中","thing-restore-none":"请先选择要恢复的数据","thing-restoring":"正在恢复..."}),Ti.Preload("ti/i18n/zh-cn/_net.i18n.json",{"net-ct":"创建时间","net-flt-nil":"查找视频名称","net-vod-add-video":"添加视频","net-vod-cate":"视频分类","net-vod-du-long":"长视频","net-vod-du-short":"短视频","net-vod-du-tv":"剧集视频","net-vod-duration":"视频时长","net-vod-size":"视频大小","net-vod-video-nil":"请选择一个视频查看详情"}),Ti.Preload("ti/i18n/zh-cn/_ti.i18n.json",{add:"添加","add-item":"添加新项",amount:"数量",attachment:"附件","batch-none":"请从下面列表中选择至少一个对象进行批量更新","batch-update":"批量更新...",blank:"空白","blank-to-edit":"请选择要编辑的项目",buy:"购买","buy-now":"立即购买",cancel:"取消","cancel-all":"取消选中",candidate:"备选项",captcha:"验证码","captcha-chagne":"换一张","captcha-tip":"请输入图中的验证码",checked:"已选中",choose:"选择","choose-file":"选择文件","choose-obj":"选择对象",clean:"清理",clear:"清除",close:"关闭",confirm:"确认",console:"控制台",content:"内容",continue:"继续",create:"新建","create-now":"立即创建",creating:"正在创建...",debug:"调试",default:"默认",del:"删除","del-checked":"删除选中","del-ing":"正在删除...","del-none":"请从下面列表中选择至少一个对象进行删除",desktop:"桌面",detail:"详情",doing:"正在执行...",download:"下载","download-to-local":"下载到本地","drop-file-here-to-upload":"拖拽文件至此以便上传","drop-here":"拖拽文件至此","e-auth-account-noexists":"账户不存在","e-auth-home-forbidden":"账户不具备进入主目录的权限","e-auth-login-NoPhoneOrEmail":"错误的手机号或邮箱地址","e-auth-login-NoSaltedPasswd":"未设置合法的密码","e-auth-login-invalid-passwd":"账户密码未通过校验","e-io-obj-exists":"但是对象已然存在","e-io-obj-noexists":"对象其实并不存在","e-io-obj-noexistsf":"对象[${nm}]其实并不存在",edit:"编辑","edit-com":"编辑控件",empty:"空","empty-data":"无数据",error:"错误","export-data":"导出数据...",fail:"失败",false:"否",favorites:"收藏",female:"女",filter:"过滤",find:"查找","find-data":"查找数据",home:"主目录","i-known":"我知道了",icon:"图标","icon-code-tip":"请输入图标代码，如 zmdi-case","import-data":"导入数据...",info:"信息",input:"输入","input-tags":"输入标签",lat:"北纬",lng:"东经",loading:"加载中...",login:"登录",logout:"退出","logout-ing":"正在注销...",male:"男",me:"我",media:"媒体",meta:"元数据",mine:"我的",modal:"模式",more:"更多",msg:"消息",name:"名称","new-item":"新项目",next:"下一步",nil:"无","nil-obj":"请选择一个对象",no:"否","no-saved":"您有未保存的数据","no-selected":"未选择","no-title":"无标题",obj:"对象",off:"关",ok:"确定",on:"开",open:"打开","open-newtab":"在新标签打开",others:"其他","paging-change-pgsz":"当前每页有${pgsz}条记录，您想修改为：","paging-change-pgsz-invalid":"页大小必须是整数数字，而且必须大于0，可您... -_-!","paging-change-pn":"当前第${pn}页，您想跳转到：（请输入 1 至 ${pgc} 之间的数字）","paging-change-pn-invalid":"页码必须是整数数字，而且必须为 1 至 ${pgc} 之间的数字","paging-first":"首页","paging-last":"尾页","paging-next":"后一页","paging-prev":"前一页","paging-sum":"共${pgc}页${sum}条记录，当前${count}/${pgsz}",passwd:"密码","passwd-reset":"重置密码",path:"路径",phone:"手机",prev:"上一步",price:"价格",prompt:"询问",properties:"属性",publish:"发布",publishing:"正在发布...",refresh:"刷新",reloading:"重新加载数据...",remove:"移除",removing:"正在移除...",rename:"重命名...",renaming:"正在重命名...",revoke:"撤销","revoke-change":"撤销修改",save:"保存","save-change":"保存修改","save-done":"保存成功","save-now":"立即保存",saving:"正在保存...",score:"评分","score-count":"打分人数",select:"选择","select-all":"全部选中",settings:"设置","source-code":"源代码",stop:"停止",structure:"结构",success:"成功",tablet:"平板",terminal:"终端",terminate:"终止",text:"文字",title:"标题","total-count":"共 ${nb?0} ${unit?项}",trace:"跟踪",track:"消息",true:"是",type:"类型","under-construction":"正在施工中",unknown:"未知",upload:"上传","upload-done":"文件上传已完成","upload-file":"上传文件...","upload-nofinished":"文件上传还没有完成",uploading:"正在上传",value:"值",view:"查看","view-resource":"查看源代码",warn:"警告",yes:"是"}),Ti.Preload("ti/i18n/zh-cn/_wn.i18n.json",{"wn-edit-com-nil":"默认为标签控件","wn-invalid-mimes":'不支持的文件内容类型 "${current}"，仅能支持 "${supports}"',"wn-invalid-types":'不支持的文件扩展名 "${current}"，仅能支持 "${supports}"',"wn-key-c":"创建者","wn-key-ct":"创建时间","wn-key-d0":"D0","wn-key-d1":"D1","wn-key-data":"数据","wn-key-duration":"时长","wn-key-expi":"过期时间","wn-key-g":"主组","wn-key-grp-advance":"高级","wn-key-grp-basic":"基本","wn-key-grp-customized":"自定义","wn-key-grp-more":"更多","wn-key-grp-others":"其他","wn-key-grp-privilege":"权限","wn-key-grp-thumb":"缩略图","wn-key-grp-timestamp":"时间戳","wn-key-height":"高","wn-key-icon":"图标","wn-key-id":"ID","wn-key-len":"大小","wn-key-lm":"修改","wn-key-m":"修改者","wn-key-md":"基本权限","wn-key-mime":"MIME","wn-key-nm":"对象名","wn-key-ph":"路径","wn-key-pid":"父对象","wn-key-pvg":"定制权限","wn-key-race":"族类","wn-key-sha1":"SHA1","wn-key-thumb":"缩略图","wn-key-title":"标题","wn-key-tp":"类型","wn-key-width":"宽","wn-obj-nosaved":"您有未保存的对象","wn-race-DIR":"目录","wn-race-FILE":"文件","wn-th-acc-pwd-choose-none":"请选择要重置密码的账号（可多选）","wn-th-acc-pwd-done":"已经为${n}名用户重置了密码","wn-th-acc-pwd-invalid":"密码中不得包含单双引号星号等非法字符","wn-th-acc-pwd-reset-tip":"将密码重置为","wn-th-acc-pwd-too-short":"您输入的密码过短，不能少于6位，最好为数字字母以及特殊字符的组合","wn-th-recount-media":"重新计算当前文件数量","wn-th-recount-media-done":"当前文件数量: ${n}"});